(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ug(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const kt={},ya=[],yr=()=>{},h_=()=>!1,wd=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Vg=n=>n.startsWith("onUpdate:"),On=Object.assign,$g=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},ZT=Object.prototype.hasOwnProperty,_t=(n,e)=>ZT.call(n,e),Me=Array.isArray,va=n=>Sc(n)==="[object Map]",Za=n=>Sc(n)==="[object Set]",Jy=n=>Sc(n)==="[object Date]",Ke=n=>typeof n=="function",cn=n=>typeof n=="string",Cr=n=>typeof n=="symbol",Rt=n=>n!==null&&typeof n=="object",d_=n=>(Rt(n)||Ke(n))&&Ke(n.then)&&Ke(n.catch),f_=Object.prototype.toString,Sc=n=>f_.call(n),eS=n=>Sc(n).slice(8,-1),p_=n=>Sc(n)==="[object Object]",Hg=n=>cn(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Bl=Ug(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),_d=n=>{const e=Object.create(null);return(t=>e[t]||(e[t]=n(t)))},tS=/-\w/g,Gs=_d(n=>n.replace(tS,e=>e.slice(1).toUpperCase())),nS=/\B([A-Z])/g,Zi=_d(n=>n.replace(nS,"-$1").toLowerCase()),Ed=_d(n=>n.charAt(0).toUpperCase()+n.slice(1)),Pf=_d(n=>n?`on${Ed(n)}`:""),Li=(n,e)=>!Object.is(n,e),ch=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},g_=(n,e,t,s=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:s,value:t})},xh=n=>{const e=parseFloat(n);return isNaN(e)?n:e},sS=n=>{const e=cn(n)?Number(n):NaN;return isNaN(e)?n:e};let Yy;const bd=()=>Yy||(Yy=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ct(n){if(Me(n)){const e={};for(let t=0;t<n.length;t++){const s=n[t],r=cn(s)?aS(s):Ct(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(cn(n)||Rt(n))return n}const rS=/;(?![^(]*\))/g,iS=/:([^]+)/,oS=/\/\*[^]*?\*\//g;function aS(n){const e={};return n.replace(oS,"").split(rS).forEach(t=>{if(t){const s=t.split(iS);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Ne(n){let e="";if(cn(n))e=n;else if(Me(n))for(let t=0;t<n.length;t++){const s=Ne(n[t]);s&&(e+=s+" ")}else if(Rt(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const lS="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",cS=Ug(lS);function m_(n){return!!n||n===""}function uS(n,e){if(n.length!==e.length)return!1;let t=!0;for(let s=0;t&&s<n.length;s++)t=Lo(n[s],e[s]);return t}function Lo(n,e){if(n===e)return!0;let t=Jy(n),s=Jy(e);if(t||s)return t&&s?n.getTime()===e.getTime():!1;if(t=Cr(n),s=Cr(e),t||s)return n===e;if(t=Me(n),s=Me(e),t||s)return t&&s?uS(n,e):!1;if(t=Rt(n),s=Rt(e),t||s){if(!t||!s)return!1;const r=Object.keys(n).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in n){const a=n.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Lo(n[o],e[o]))return!1}}return String(n)===String(e)}function Gg(n,e){return n.findIndex(t=>Lo(t,e))}const y_=n=>!!(n&&n.__v_isRef===!0),E=n=>cn(n)?n:n==null?"":Me(n)||Rt(n)&&(n.toString===f_||!Ke(n.toString))?y_(n)?E(n.value):JSON.stringify(n,v_,2):String(n),v_=(n,e)=>y_(e)?v_(n,e.value):va(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[s,r],i)=>(t[Rf(s,i)+" =>"]=r,t),{})}:Za(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Rf(t))}:Cr(e)?Rf(e):Rt(e)&&!Me(e)&&!p_(e)?String(e):e,Rf=(n,e="")=>{var t;return Cr(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vs;class hS{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=vs,!e&&vs&&(this.index=(vs.scopes||(vs.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=vs;try{return vs=this,e()}finally{vs=t}}}on(){++this._on===1&&(this.prevScope=vs,vs=this)}off(){this._on>0&&--this._on===0&&(vs=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,s;for(t=0,s=this.effects.length;t<s;t++)this.effects[t].stop();for(this.effects.length=0,t=0,s=this.cleanups.length;t<s;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function dS(){return vs}let Dt;const xf=new WeakSet;class A_{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,vs&&vs.active&&vs.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,xf.has(this)&&(xf.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||__(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Xy(this),E_(this);const e=Dt,t=Zs;Dt=this,Zs=!0;try{return this.fn()}finally{b_(this),Dt=e,Zs=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)zg(e);this.deps=this.depsTail=void 0,Xy(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?xf.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Tp(this)&&this.run()}get dirty(){return Tp(this)}}let w_=0,Ml,Fl;function __(n,e=!1){if(n.flags|=8,e){n.next=Fl,Fl=n;return}n.next=Ml,Ml=n}function Qg(){w_++}function jg(){if(--w_>0)return;if(Fl){let e=Fl;for(Fl=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;Ml;){let e=Ml;for(Ml=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){n||(n=s)}e=t}}if(n)throw n}function E_(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function b_(n){let e,t=n.depsTail,s=t;for(;s;){const r=s.prevDep;s.version===-1?(s===t&&(t=r),zg(s),fS(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}n.deps=e,n.depsTail=t}function Tp(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(I_(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function I_(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Zl)||(n.globalVersion=Zl,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!Tp(n))))return;n.flags|=2;const e=n.dep,t=Dt,s=Zs;Dt=n,Zs=!0;try{E_(n);const r=n.fn(n._value);(e.version===0||Li(r,n._value))&&(n.flags|=128,n._value=r,e.version++)}catch(r){throw e.version++,r}finally{Dt=t,Zs=s,b_(n),n.flags&=-3}}function zg(n,e=!1){const{dep:t,prevSub:s,nextSub:r}=n;if(s&&(s.nextSub=r,n.prevSub=void 0),r&&(r.prevSub=s,n.nextSub=void 0),t.subs===n&&(t.subs=s,!s&&t.computed)){t.computed.flags&=-5;for(let i=t.computed.deps;i;i=i.nextDep)zg(i,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function fS(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let Zs=!0;const C_=[];function Yr(){C_.push(Zs),Zs=!1}function Xr(){const n=C_.pop();Zs=n===void 0?!0:n}function Xy(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=Dt;Dt=void 0;try{e()}finally{Dt=t}}}let Zl=0;class pS{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Wg{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Dt||!Zs||Dt===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Dt)t=this.activeLink=new pS(Dt,this),Dt.deps?(t.prevDep=Dt.depsTail,Dt.depsTail.nextDep=t,Dt.depsTail=t):Dt.deps=Dt.depsTail=t,T_(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const s=t.nextDep;s.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=s),t.prevDep=Dt.depsTail,t.nextDep=void 0,Dt.depsTail.nextDep=t,Dt.depsTail=t,Dt.deps===t&&(Dt.deps=s)}return t}trigger(e){this.version++,Zl++,this.notify(e)}notify(e){Qg();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{jg()}}}function T_(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)T_(s)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const Sp=new WeakMap,Ro=Symbol(""),Pp=Symbol(""),ec=Symbol("");function Kn(n,e,t){if(Zs&&Dt){let s=Sp.get(n);s||Sp.set(n,s=new Map);let r=s.get(t);r||(s.set(t,r=new Wg),r.map=s,r.key=t),r.track()}}function Br(n,e,t,s,r,i){const o=Sp.get(n);if(!o){Zl++;return}const a=l=>{l&&l.trigger()};if(Qg(),e==="clear")o.forEach(a);else{const l=Me(n),c=l&&Hg(t);if(l&&t==="length"){const h=Number(s);o.forEach((f,p)=>{(p==="length"||p===ec||!Cr(p)&&p>=h)&&a(f)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),c&&a(o.get(ec)),e){case"add":l?c&&a(o.get("length")):(a(o.get(Ro)),va(n)&&a(o.get(Pp)));break;case"delete":l||(a(o.get(Ro)),va(n)&&a(o.get(Pp)));break;case"set":va(n)&&a(o.get(Ro));break}}jg()}function na(n){const e=vt(n);return e===n?e:(Kn(e,"iterate",ec),Vs(n)?e:e.map(Mn))}function Id(n){return Kn(n=vt(n),"iterate",ec),n}const gS={__proto__:null,[Symbol.iterator](){return kf(this,Symbol.iterator,Mn)},concat(...n){return na(this).concat(...n.map(e=>Me(e)?na(e):e))},entries(){return kf(this,"entries",n=>(n[1]=Mn(n[1]),n))},every(n,e){return Rr(this,"every",n,e,void 0,arguments)},filter(n,e){return Rr(this,"filter",n,e,t=>t.map(Mn),arguments)},find(n,e){return Rr(this,"find",n,e,Mn,arguments)},findIndex(n,e){return Rr(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return Rr(this,"findLast",n,e,Mn,arguments)},findLastIndex(n,e){return Rr(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return Rr(this,"forEach",n,e,void 0,arguments)},includes(...n){return Nf(this,"includes",n)},indexOf(...n){return Nf(this,"indexOf",n)},join(n){return na(this).join(n)},lastIndexOf(...n){return Nf(this,"lastIndexOf",n)},map(n,e){return Rr(this,"map",n,e,void 0,arguments)},pop(){return _l(this,"pop")},push(...n){return _l(this,"push",n)},reduce(n,...e){return Zy(this,"reduce",n,e)},reduceRight(n,...e){return Zy(this,"reduceRight",n,e)},shift(){return _l(this,"shift")},some(n,e){return Rr(this,"some",n,e,void 0,arguments)},splice(...n){return _l(this,"splice",n)},toReversed(){return na(this).toReversed()},toSorted(n){return na(this).toSorted(n)},toSpliced(...n){return na(this).toSpliced(...n)},unshift(...n){return _l(this,"unshift",n)},values(){return kf(this,"values",Mn)}};function kf(n,e,t){const s=Id(n),r=s[e]();return s!==n&&!Vs(n)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=t(i.value)),i}),r}const mS=Array.prototype;function Rr(n,e,t,s,r,i){const o=Id(n),a=o!==n&&!Vs(n),l=o[e];if(l!==mS[e]){const f=l.apply(n,i);return a?Mn(f):f}let c=t;o!==n&&(a?c=function(f,p){return t.call(this,Mn(f),p,n)}:t.length>2&&(c=function(f,p){return t.call(this,f,p,n)}));const h=l.call(o,c,s);return a&&r?r(h):h}function Zy(n,e,t,s){const r=Id(n);let i=t;return r!==n&&(Vs(n)?t.length>3&&(i=function(o,a,l){return t.call(this,o,a,l,n)}):i=function(o,a,l){return t.call(this,o,Mn(a),l,n)}),r[e](i,...s)}function Nf(n,e,t){const s=vt(n);Kn(s,"iterate",ec);const r=s[e](...t);return(r===-1||r===!1)&&Jg(t[0])?(t[0]=vt(t[0]),s[e](...t)):r}function _l(n,e,t=[]){Yr(),Qg();const s=vt(n)[e].apply(n,t);return jg(),Xr(),s}const yS=Ug("__proto__,__v_isRef,__isVue"),S_=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Cr));function vS(n){Cr(n)||(n=String(n));const e=vt(this);return Kn(e,"has",n),e.hasOwnProperty(n)}class P_{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,s){if(t==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!r;if(t==="__v_isReadonly")return r;if(t==="__v_isShallow")return i;if(t==="__v_raw")return s===(r?i?PS:N_:i?k_:x_).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=Me(e);if(!r){let l;if(o&&(l=gS[t]))return l;if(t==="hasOwnProperty")return vS}const a=Reflect.get(e,t,Yn(e)?e:s);if((Cr(t)?S_.has(t):yS(t))||(r||Kn(e,"get",t),i))return a;if(Yn(a)){const l=o&&Hg(t)?a:a.value;return r&&Rt(l)?xp(l):l}return Rt(a)?r?xp(a):Pc(a):a}}class R_ extends P_{constructor(e=!1){super(!1,e)}set(e,t,s,r){let i=e[t];if(!this._isShallow){const l=$i(i);if(!Vs(s)&&!$i(s)&&(i=vt(i),s=vt(s)),!Me(e)&&Yn(i)&&!Yn(s))return l||(i.value=s),!0}const o=Me(e)&&Hg(t)?Number(t)<e.length:_t(e,t),a=Reflect.set(e,t,s,Yn(e)?e:r);return e===vt(r)&&(o?Li(s,i)&&Br(e,"set",t,s):Br(e,"add",t,s)),a}deleteProperty(e,t){const s=_t(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&s&&Br(e,"delete",t,void 0),r}has(e,t){const s=Reflect.has(e,t);return(!Cr(t)||!S_.has(t))&&Kn(e,"has",t),s}ownKeys(e){return Kn(e,"iterate",Me(e)?"length":Ro),Reflect.ownKeys(e)}}class AS extends P_{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const wS=new R_,_S=new AS,ES=new R_(!0);const Rp=n=>n,$u=n=>Reflect.getPrototypeOf(n);function bS(n,e,t){return function(...s){const r=this.__v_raw,i=vt(r),o=va(i),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=r[n](...s),h=t?Rp:e?kh:Mn;return!e&&Kn(i,"iterate",l?Pp:Ro),{next(){const{value:f,done:p}=c.next();return p?{value:f,done:p}:{value:a?[h(f[0]),h(f[1])]:h(f),done:p}},[Symbol.iterator](){return this}}}}function Hu(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function IS(n,e){const t={get(r){const i=this.__v_raw,o=vt(i),a=vt(r);n||(Li(r,a)&&Kn(o,"get",r),Kn(o,"get",a));const{has:l}=$u(o),c=e?Rp:n?kh:Mn;if(l.call(o,r))return c(i.get(r));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!n&&Kn(vt(r),"iterate",Ro),r.size},has(r){const i=this.__v_raw,o=vt(i),a=vt(r);return n||(Li(r,a)&&Kn(o,"has",r),Kn(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,l=vt(a),c=e?Rp:n?kh:Mn;return!n&&Kn(l,"iterate",Ro),a.forEach((h,f)=>r.call(i,c(h),c(f),o))}};return On(t,n?{add:Hu("add"),set:Hu("set"),delete:Hu("delete"),clear:Hu("clear")}:{add(r){!e&&!Vs(r)&&!$i(r)&&(r=vt(r));const i=vt(this);return $u(i).has.call(i,r)||(i.add(r),Br(i,"add",r,r)),this},set(r,i){!e&&!Vs(i)&&!$i(i)&&(i=vt(i));const o=vt(this),{has:a,get:l}=$u(o);let c=a.call(o,r);c||(r=vt(r),c=a.call(o,r));const h=l.call(o,r);return o.set(r,i),c?Li(i,h)&&Br(o,"set",r,i):Br(o,"add",r,i),this},delete(r){const i=vt(this),{has:o,get:a}=$u(i);let l=o.call(i,r);l||(r=vt(r),l=o.call(i,r)),a&&a.call(i,r);const c=i.delete(r);return l&&Br(i,"delete",r,void 0),c},clear(){const r=vt(this),i=r.size!==0,o=r.clear();return i&&Br(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=bS(r,n,e)}),t}function Kg(n,e){const t=IS(n,e);return(s,r,i)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?s:Reflect.get(_t(t,r)&&r in s?t:s,r,i)}const CS={get:Kg(!1,!1)},TS={get:Kg(!1,!0)},SS={get:Kg(!0,!1)};const x_=new WeakMap,k_=new WeakMap,N_=new WeakMap,PS=new WeakMap;function RS(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xS(n){return n.__v_skip||!Object.isExtensible(n)?0:RS(eS(n))}function Pc(n){return $i(n)?n:qg(n,!1,wS,CS,x_)}function D_(n){return qg(n,!1,ES,TS,k_)}function xp(n){return qg(n,!0,_S,SS,N_)}function qg(n,e,t,s,r){if(!Rt(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const i=xS(n);if(i===0)return n;const o=r.get(n);if(o)return o;const a=new Proxy(n,i===2?s:t);return r.set(n,a),a}function Aa(n){return $i(n)?Aa(n.__v_raw):!!(n&&n.__v_isReactive)}function $i(n){return!!(n&&n.__v_isReadonly)}function Vs(n){return!!(n&&n.__v_isShallow)}function Jg(n){return n?!!n.__v_raw:!1}function vt(n){const e=n&&n.__v_raw;return e?vt(e):n}function kS(n){return!_t(n,"__v_skip")&&Object.isExtensible(n)&&g_(n,"__v_skip",!0),n}const Mn=n=>Rt(n)?Pc(n):n,kh=n=>Rt(n)?xp(n):n;function Yn(n){return n?n.__v_isRef===!0:!1}function $(n){return O_(n,!1)}function NS(n){return O_(n,!0)}function O_(n,e){return Yn(n)?n:new DS(n,e)}class DS{constructor(e,t){this.dep=new Wg,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:vt(e),this._value=t?e:Mn(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,s=this.__v_isShallow||Vs(e)||$i(e);e=s?e:vt(e),Li(e,t)&&(this._rawValue=e,this._value=s?e:Mn(e),this.dep.trigger())}}function Oe(n){return Yn(n)?n.value:n}const OS={get:(n,e,t)=>e==="__v_raw"?n:Oe(Reflect.get(n,e,t)),set:(n,e,t,s)=>{const r=n[e];return Yn(r)&&!Yn(t)?(r.value=t,!0):Reflect.set(n,e,t,s)}};function L_(n){return Aa(n)?n:new Proxy(n,OS)}class LS{constructor(e,t,s){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Wg(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Zl-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Dt!==this)return __(this,!0),!0}get value(){const e=this.dep.track();return I_(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function BS(n,e,t=!1){let s,r;return Ke(n)?s=n:(s=n.get,r=n.set),new LS(s,r,t)}const Gu={},Nh=new WeakMap;let po;function MS(n,e=!1,t=po){if(t){let s=Nh.get(t);s||Nh.set(t,s=[]),s.push(n)}}function FS(n,e,t=kt){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=t,c=U=>r?U:Vs(U)||r===!1||r===0?Mr(U,1):Mr(U);let h,f,p,m,_=!1,v=!1;if(Yn(n)?(f=()=>n.value,_=Vs(n)):Aa(n)?(f=()=>c(n),_=!0):Me(n)?(v=!0,_=n.some(U=>Aa(U)||Vs(U)),f=()=>n.map(U=>{if(Yn(U))return U.value;if(Aa(U))return c(U);if(Ke(U))return l?l(U,2):U()})):Ke(n)?e?f=l?()=>l(n,2):n:f=()=>{if(p){Yr();try{p()}finally{Xr()}}const U=po;po=h;try{return l?l(n,3,[m]):n(m)}finally{po=U}}:f=yr,e&&r){const U=f,W=r===!0?1/0:r;f=()=>Mr(U(),W)}const A=dS(),w=()=>{h.stop(),A&&A.active&&$g(A.effects,h)};if(i&&e){const U=e;e=(...W)=>{U(...W),w()}}let T=v?new Array(n.length).fill(Gu):Gu;const P=U=>{if(!(!(h.flags&1)||!h.dirty&&!U))if(e){const W=h.run();if(r||_||(v?W.some((q,x)=>Li(q,T[x])):Li(W,T))){p&&p();const q=po;po=h;try{const x=[W,T===Gu?void 0:v&&T[0]===Gu?[]:T,m];T=W,l?l(e,3,x):e(...x)}finally{po=q}}}else h.run()};return a&&a(P),h=new A_(f),h.scheduler=o?()=>o(P,!1):P,m=U=>MS(U,!1,h),p=h.onStop=()=>{const U=Nh.get(h);if(U){if(l)l(U,4);else for(const W of U)W();Nh.delete(h)}},e?s?P(!0):T=h.run():o?o(P.bind(null,!0),!0):h.run(),w.pause=h.pause.bind(h),w.resume=h.resume.bind(h),w.stop=w,w}function Mr(n,e=1/0,t){if(e<=0||!Rt(n)||n.__v_skip||(t=t||new Map,(t.get(n)||0)>=e))return n;if(t.set(n,e),e--,Yn(n))Mr(n.value,e,t);else if(Me(n))for(let s=0;s<n.length;s++)Mr(n[s],e,t);else if(Za(n)||va(n))n.forEach(s=>{Mr(s,e,t)});else if(p_(n)){for(const s in n)Mr(n[s],e,t);for(const s of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,s)&&Mr(n[s],e,t)}return n}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Rc(n,e,t,s){try{return s?n(...s):n()}catch(r){Cd(r,e,t)}}function tr(n,e,t,s){if(Ke(n)){const r=Rc(n,e,t,s);return r&&d_(r)&&r.catch(i=>{Cd(i,e,t)}),r}if(Me(n)){const r=[];for(let i=0;i<n.length;i++)r.push(tr(n[i],e,t,s));return r}}function Cd(n,e,t,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||kt;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const h=a.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](n,l,c)===!1)return}a=a.parent}if(i){Yr(),Rc(i,null,10,[n,l,c]),Xr();return}}US(n,t,r,s,o)}function US(n,e,t,s=!0,r=!1){if(r)throw n;console.error(n)}const os=[];let hr=-1;const wa=[];let Ti=null,oa=0;const B_=Promise.resolve();let Dh=null;function Yg(n){const e=Dh||B_;return n?e.then(this?n.bind(this):n):e}function VS(n){let e=hr+1,t=os.length;for(;e<t;){const s=e+t>>>1,r=os[s],i=tc(r);i<n||i===n&&r.flags&2?e=s+1:t=s}return e}function Xg(n){if(!(n.flags&1)){const e=tc(n),t=os[os.length-1];!t||!(n.flags&2)&&e>=tc(t)?os.push(n):os.splice(VS(e),0,n),n.flags|=1,M_()}}function M_(){Dh||(Dh=B_.then(U_))}function $S(n){Me(n)?wa.push(...n):Ti&&n.id===-1?Ti.splice(oa+1,0,n):n.flags&1||(wa.push(n),n.flags|=1),M_()}function ev(n,e,t=hr+1){for(;t<os.length;t++){const s=os[t];if(s&&s.flags&2){if(n&&s.id!==n.uid)continue;os.splice(t,1),t--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function F_(n){if(wa.length){const e=[...new Set(wa)].sort((t,s)=>tc(t)-tc(s));if(wa.length=0,Ti){Ti.push(...e);return}for(Ti=e,oa=0;oa<Ti.length;oa++){const t=Ti[oa];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Ti=null,oa=0}}const tc=n=>n.id==null?n.flags&2?-1:1/0:n.id;function U_(n){try{for(hr=0;hr<os.length;hr++){const e=os[hr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Rc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;hr<os.length;hr++){const e=os[hr];e&&(e.flags&=-2)}hr=-1,os.length=0,F_(),Dh=null,(os.length||wa.length)&&U_()}}let ks=null,V_=null;function Oh(n){const e=ks;return ks=n,V_=n&&n.type.__scopeId||null,e}function $_(n,e=ks,t){if(!e||n._n)return n;const s=(...r)=>{s._d&&Mh(-1);const i=Oh(e);let o;try{o=n(...r)}finally{Oh(i),s._d&&Mh(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function tn(n,e){if(ks===null)return n;const t=xd(ks),s=n.dirs||(n.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=kt]=e[r];i&&(Ke(i)&&(i={mounted:i,updated:i}),i.deep&&Mr(o),s.push({dir:i,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function ao(n,e,t,s){const r=n.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(Yr(),tr(l,t,8,[n.el,a,n,e]),Xr())}}const HS=Symbol("_vte"),H_=n=>n.__isTeleport,Or=Symbol("_leaveCb"),Qu=Symbol("_enterCb");function GS(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Mt(()=>{n.isMounted=!0}),Y_(()=>{n.isUnmounting=!0}),n}const Bs=[Function,Array],G_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Bs,onEnter:Bs,onAfterEnter:Bs,onEnterCancelled:Bs,onBeforeLeave:Bs,onLeave:Bs,onAfterLeave:Bs,onLeaveCancelled:Bs,onBeforeAppear:Bs,onAppear:Bs,onAfterAppear:Bs,onAppearCancelled:Bs},Q_=n=>{const e=n.subTree;return e.component?Q_(e.component):e},QS={name:"BaseTransition",props:G_,setup(n,{slots:e}){const t=AE(),s=GS();return()=>{const r=e.default&&W_(e.default(),!0);if(!r||!r.length)return;const i=j_(r),o=vt(n),{mode:a}=o;if(s.isLeaving)return Df(i);const l=tv(i);if(!l)return Df(i);let c=kp(l,o,s,t,f=>c=f);l.type!==as&&nc(l,c);let h=t.subTree&&tv(t.subTree);if(h&&h.type!==as&&!yo(h,l)&&Q_(t).type!==as){let f=kp(h,o,s,t);if(nc(h,f),a==="out-in"&&l.type!==as)return s.isLeaving=!0,f.afterLeave=()=>{s.isLeaving=!1,t.job.flags&8||t.update(),delete f.afterLeave,h=void 0},Df(i);a==="in-out"&&l.type!==as?f.delayLeave=(p,m,_)=>{const v=z_(s,h);v[String(h.key)]=h,p[Or]=()=>{m(),p[Or]=void 0,delete c.delayedLeave,h=void 0},c.delayedLeave=()=>{_(),delete c.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function j_(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==as){e=t;break}}return e}const jS=QS;function z_(n,e){const{leavingVNodes:t}=n;let s=t.get(e.type);return s||(s=Object.create(null),t.set(e.type,s)),s}function kp(n,e,t,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:p,onLeave:m,onAfterLeave:_,onLeaveCancelled:v,onBeforeAppear:A,onAppear:w,onAfterAppear:T,onAppearCancelled:P}=e,U=String(n.key),W=z_(t,n),q=(S,C)=>{S&&tr(S,s,9,C)},x=(S,C)=>{const b=C[1];q(S,C),Me(S)?S.every(N=>N.length<=1)&&b():S.length<=1&&b()},I={mode:o,persisted:a,beforeEnter(S){let C=l;if(!t.isMounted)if(i)C=A||l;else return;S[Or]&&S[Or](!0);const b=W[U];b&&yo(n,b)&&b.el[Or]&&b.el[Or](),q(C,[S])},enter(S){let C=c,b=h,N=f;if(!t.isMounted)if(i)C=w||c,b=T||h,N=P||f;else return;let k=!1;const Se=S[Qu]=ne=>{k||(k=!0,ne?q(N,[S]):q(b,[S]),I.delayedLeave&&I.delayedLeave(),S[Qu]=void 0)};C?x(C,[S,Se]):Se()},leave(S,C){const b=String(n.key);if(S[Qu]&&S[Qu](!0),t.isUnmounting)return C();q(p,[S]);let N=!1;const k=S[Or]=Se=>{N||(N=!0,C(),Se?q(v,[S]):q(_,[S]),S[Or]=void 0,W[b]===n&&delete W[b])};W[b]=n,m?x(m,[S,k]):k()},clone(S){const C=kp(S,e,t,s,r);return r&&r(C),C}};return I}function Df(n){if(Td(n))return n=Hi(n),n.children=null,n}function tv(n){if(!Td(n))return H_(n.type)&&n.children?j_(n.children):n;if(n.component)return n.component.subTree;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&Ke(t.default))return t.default()}}function nc(n,e){n.shapeFlag&6&&n.component?(n.transition=e,nc(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function W_(n,e=!1,t){let s=[],r=0;for(let i=0;i<n.length;i++){let o=n[i];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:i);o.type===Re?(o.patchFlag&128&&r++,s=s.concat(W_(o.children,e,a))):(e||o.type!==as)&&s.push(a!=null?Hi(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function K_(n,e){return Ke(n)?On({name:n.name},e,{setup:n}):n}function q_(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}const Lh=new WeakMap;function Ul(n,e,t,s,r=!1){if(Me(n)){n.forEach((_,v)=>Ul(_,e&&(Me(e)?e[v]:e),t,s,r));return}if(Vl(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Ul(n,e,t,s.component.subTree);return}const i=s.shapeFlag&4?xd(s.component):s.el,o=r?null:i,{i:a,r:l}=n,c=e&&e.r,h=a.refs===kt?a.refs={}:a.refs,f=a.setupState,p=vt(f),m=f===kt?h_:_=>_t(p,_);if(c!=null&&c!==l){if(nv(e),cn(c))h[c]=null,m(c)&&(f[c]=null);else if(Yn(c)){c.value=null;const _=e;_.k&&(h[_.k]=null)}}if(Ke(l))Rc(l,a,12,[o,h]);else{const _=cn(l),v=Yn(l);if(_||v){const A=()=>{if(n.f){const w=_?m(l)?f[l]:h[l]:l.value;if(r)Me(w)&&$g(w,i);else if(Me(w))w.includes(i)||w.push(i);else if(_)h[l]=[i],m(l)&&(f[l]=h[l]);else{const T=[i];l.value=T,n.k&&(h[n.k]=T)}}else _?(h[l]=o,m(l)&&(f[l]=o)):v&&(l.value=o,n.k&&(h[n.k]=o))};if(o){const w=()=>{A(),Lh.delete(n)};w.id=-1,Lh.set(n,w),Ps(w,t)}else nv(n),A()}}}function nv(n){const e=Lh.get(n);e&&(e.flags|=8,Lh.delete(n))}bd().requestIdleCallback;bd().cancelIdleCallback;const Vl=n=>!!n.type.__asyncLoader,Td=n=>n.type.__isKeepAlive;function zS(n,e){J_(n,"a",e)}function WS(n,e){J_(n,"da",e)}function J_(n,e,t=Jn){const s=n.__wdc||(n.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(Sd(e,s,t),t){let r=t.parent;for(;r&&r.parent;)Td(r.parent.vnode)&&KS(s,e,t,r),r=r.parent}}function KS(n,e,t,s){const r=Sd(e,n,s,!0);un(()=>{$g(s[e],r)},t)}function Sd(n,e,t=Jn,s=!1){if(t){const r=t[n]||(t[n]=[]),i=e.__weh||(e.__weh=(...o)=>{Yr();const a=xc(t),l=tr(e,t,n,o);return a(),Xr(),l});return s?r.unshift(i):r.push(i),i}}const ci=n=>(e,t=Jn)=>{(!rc||n==="sp")&&Sd(n,(...s)=>e(...s),t)},qS=ci("bm"),Mt=ci("m"),JS=ci("bu"),YS=ci("u"),Y_=ci("bum"),un=ci("um"),XS=ci("sp"),ZS=ci("rtg"),eP=ci("rtc");function tP(n,e=Jn){Sd("ec",n,e)}const nP="components";function sP(n,e){return iP(nP,n,!0,e)||n}const rP=Symbol.for("v-ndc");function iP(n,e,t=!0,s=!1){const r=ks||Jn;if(r){const i=r.type;{const a=zP(i,!1);if(a&&(a===e||a===Gs(e)||a===Ed(Gs(e))))return i}const o=sv(r[n]||i[n],e)||sv(r.appContext[n],e);return!o&&s?i:o}}function sv(n,e){return n&&(n[e]||n[Gs(e)]||n[Ed(Gs(e))])}function Xe(n,e,t,s){let r;const i=t,o=Me(n);if(o||cn(n)){const a=o&&Aa(n);let l=!1,c=!1;a&&(l=!Vs(n),c=$i(n),n=Id(n)),r=new Array(n.length);for(let h=0,f=n.length;h<f;h++)r[h]=e(l?c?kh(Mn(n[h])):Mn(n[h]):n[h],h,void 0,i)}else if(typeof n=="number"){r=new Array(n);for(let a=0;a<n;a++)r[a]=e(a+1,a,void 0,i)}else if(Rt(n))if(n[Symbol.iterator])r=Array.from(n,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(n);r=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const h=a[l];r[l]=e(n[h],h,l,i)}}else r=[];return r}const Np=n=>n?wE(n)?xd(n):Np(n.parent):null,$l=On(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Np(n.parent),$root:n=>Np(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>Z_(n),$forceUpdate:n=>n.f||(n.f=()=>{Xg(n.update)}),$nextTick:n=>n.n||(n.n=Yg.bind(n.proxy)),$watch:n=>TP.bind(n)}),Of=(n,e)=>n!==kt&&!n.__isScriptSetup&&_t(n,e),oP={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:l}=n;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return t[e];case 3:return i[e]}else{if(Of(s,e))return o[e]=1,s[e];if(r!==kt&&_t(r,e))return o[e]=2,r[e];if((c=n.propsOptions[0])&&_t(c,e))return o[e]=3,i[e];if(t!==kt&&_t(t,e))return o[e]=4,t[e];Dp&&(o[e]=0)}}const h=$l[e];let f,p;if(h)return e==="$attrs"&&Kn(n.attrs,"get",""),h(n);if((f=a.__cssModules)&&(f=f[e]))return f;if(t!==kt&&_t(t,e))return o[e]=4,t[e];if(p=l.config.globalProperties,_t(p,e))return p[e]},set({_:n},e,t){const{data:s,setupState:r,ctx:i}=n;return Of(r,e)?(r[e]=t,!0):s!==kt&&_t(s,e)?(s[e]=t,!0):_t(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(i[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:s,appContext:r,propsOptions:i,type:o}},a){let l,c;return!!(t[a]||n!==kt&&a[0]!=="$"&&_t(n,a)||Of(e,a)||(l=i[0])&&_t(l,a)||_t(s,a)||_t($l,a)||_t(r.config.globalProperties,a)||(c=o.__cssModules)&&c[a])},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:_t(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function rv(n){return Me(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Dp=!0;function aP(n){const e=Z_(n),t=n.proxy,s=n.ctx;Dp=!1,e.beforeCreate&&iv(e.beforeCreate,n,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:c,created:h,beforeMount:f,mounted:p,beforeUpdate:m,updated:_,activated:v,deactivated:A,beforeDestroy:w,beforeUnmount:T,destroyed:P,unmounted:U,render:W,renderTracked:q,renderTriggered:x,errorCaptured:I,serverPrefetch:S,expose:C,inheritAttrs:b,components:N,directives:k,filters:Se}=e;if(c&&lP(c,s,null),o)for(const D in o){const z=o[D];Ke(z)&&(s[D]=z.bind(t))}if(r){const D=r.call(t,t);Rt(D)&&(n.data=Pc(D))}if(Dp=!0,i)for(const D in i){const z=i[D],he=Ke(z)?z.bind(t,t):Ke(z.get)?z.get.bind(t,t):yr,ke=!Ke(z)&&Ke(z.set)?z.set.bind(t):yr,Te=de({get:he,set:ke});Object.defineProperty(s,D,{enumerable:!0,configurable:!0,get:()=>Te.value,set:Ve=>Te.value=Ve})}if(a)for(const D in a)X_(a[D],s,t,D);if(l){const D=Ke(l)?l.call(t):l;Reflect.ownKeys(D).forEach(z=>{uh(z,D[z])})}h&&iv(h,n,"c");function V(D,z){Me(z)?z.forEach(he=>D(he.bind(t))):z&&D(z.bind(t))}if(V(qS,f),V(Mt,p),V(JS,m),V(YS,_),V(zS,v),V(WS,A),V(tP,I),V(eP,q),V(ZS,x),V(Y_,T),V(un,U),V(XS,S),Me(C))if(C.length){const D=n.exposed||(n.exposed={});C.forEach(z=>{Object.defineProperty(D,z,{get:()=>t[z],set:he=>t[z]=he,enumerable:!0})})}else n.exposed||(n.exposed={});W&&n.render===yr&&(n.render=W),b!=null&&(n.inheritAttrs=b),N&&(n.components=N),k&&(n.directives=k),S&&q_(n)}function lP(n,e,t=yr){Me(n)&&(n=Op(n));for(const s in n){const r=n[s];let i;Rt(r)?"default"in r?i=er(r.from||s,r.default,!0):i=er(r.from||s):i=er(r),Yn(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function iv(n,e,t){tr(Me(n)?n.map(s=>s.bind(e.proxy)):n.bind(e.proxy),e,t)}function X_(n,e,t,s){let r=s.includes(".")?dE(t,s):()=>t[s];if(cn(n)){const i=e[n];Ke(i)&&Wr(r,i)}else if(Ke(n))Wr(r,n.bind(t));else if(Rt(n))if(Me(n))n.forEach(i=>X_(i,e,t,s));else{const i=Ke(n.handler)?n.handler.bind(t):e[n.handler];Ke(i)&&Wr(r,i,n)}}function Z_(n){const e=n.type,{mixins:t,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=n.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!t&&!s?l=e:(l={},r.length&&r.forEach(c=>Bh(l,c,o,!0)),Bh(l,e,o)),Rt(e)&&i.set(e,l),l}function Bh(n,e,t,s=!1){const{mixins:r,extends:i}=e;i&&Bh(n,i,t,!0),r&&r.forEach(o=>Bh(n,o,t,!0));for(const o in e)if(!(s&&o==="expose")){const a=cP[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const cP={data:ov,props:av,emits:av,methods:Pl,computed:Pl,beforeCreate:ss,created:ss,beforeMount:ss,mounted:ss,beforeUpdate:ss,updated:ss,beforeDestroy:ss,beforeUnmount:ss,destroyed:ss,unmounted:ss,activated:ss,deactivated:ss,errorCaptured:ss,serverPrefetch:ss,components:Pl,directives:Pl,watch:hP,provide:ov,inject:uP};function ov(n,e){return e?n?function(){return On(Ke(n)?n.call(this,this):n,Ke(e)?e.call(this,this):e)}:e:n}function uP(n,e){return Pl(Op(n),Op(e))}function Op(n){if(Me(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function ss(n,e){return n?[...new Set([].concat(n,e))]:e}function Pl(n,e){return n?On(Object.create(null),n,e):e}function av(n,e){return n?Me(n)&&Me(e)?[...new Set([...n,...e])]:On(Object.create(null),rv(n),rv(e??{})):e}function hP(n,e){if(!n)return e;if(!e)return n;const t=On(Object.create(null),n);for(const s in e)t[s]=ss(n[s],e[s]);return t}function eE(){return{app:null,config:{isNativeTag:h_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let dP=0;function fP(n,e){return function(s,r=null){Ke(s)||(s=On({},s)),r!=null&&!Rt(r)&&(r=null);const i=eE(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:dP++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:KP,get config(){return i.config},set config(h){},use(h,...f){return o.has(h)||(h&&Ke(h.install)?(o.add(h),h.install(c,...f)):Ke(h)&&(o.add(h),h(c,...f))),c},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),c},component(h,f){return f?(i.components[h]=f,c):i.components[h]},directive(h,f){return f?(i.directives[h]=f,c):i.directives[h]},mount(h,f,p){if(!l){const m=c._ceVNode||Ge(s,r);return m.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),n(m,h,p),l=!0,c._container=h,h.__vue_app__=c,xd(m.component)}},onUnmount(h){a.push(h)},unmount(){l&&(tr(a,c._instance,16),n(null,c._container),delete c._container.__vue_app__)},provide(h,f){return i.provides[h]=f,c},runWithContext(h){const f=_a;_a=c;try{return h()}finally{_a=f}}};return c}}let _a=null;function uh(n,e){if(Jn){let t=Jn.provides;const s=Jn.parent&&Jn.parent.provides;s===t&&(t=Jn.provides=Object.create(s)),t[n]=e}}function er(n,e,t=!1){const s=AE();if(s||_a){let r=_a?_a._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&n in r)return r[n];if(arguments.length>1)return t&&Ke(e)?e.call(s&&s.proxy):e}}const tE={},nE=()=>Object.create(tE),sE=n=>Object.getPrototypeOf(n)===tE;function pP(n,e,t,s=!1){const r={},i=nE();n.propsDefaults=Object.create(null),rE(n,e,r,i);for(const o in n.propsOptions[0])o in r||(r[o]=void 0);t?n.props=s?r:D_(r):n.type.props?n.props=r:n.props=i,n.attrs=i}function gP(n,e,t,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=n,a=vt(r),[l]=n.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=n.vnode.dynamicProps;for(let f=0;f<h.length;f++){let p=h[f];if(Pd(n.emitsOptions,p))continue;const m=e[p];if(l)if(_t(i,p))m!==i[p]&&(i[p]=m,c=!0);else{const _=Gs(p);r[_]=Lp(l,a,_,m,n,!1)}else m!==i[p]&&(i[p]=m,c=!0)}}}else{rE(n,e,r,i)&&(c=!0);let h;for(const f in a)(!e||!_t(e,f)&&((h=Zi(f))===f||!_t(e,h)))&&(l?t&&(t[f]!==void 0||t[h]!==void 0)&&(r[f]=Lp(l,a,f,void 0,n,!0)):delete r[f]);if(i!==a)for(const f in i)(!e||!_t(e,f))&&(delete i[f],c=!0)}c&&Br(n.attrs,"set","")}function rE(n,e,t,s){const[r,i]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(Bl(l))continue;const c=e[l];let h;r&&_t(r,h=Gs(l))?!i||!i.includes(h)?t[h]=c:(a||(a={}))[h]=c:Pd(n.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(i){const l=vt(t),c=a||kt;for(let h=0;h<i.length;h++){const f=i[h];t[f]=Lp(r,l,f,c[f],n,!_t(c,f))}}return o}function Lp(n,e,t,s,r,i){const o=n[t];if(o!=null){const a=_t(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ke(l)){const{propsDefaults:c}=r;if(t in c)s=c[t];else{const h=xc(r);s=c[t]=l.call(null,e),h()}}else s=l;r.ce&&r.ce._setProp(t,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===Zi(t))&&(s=!0))}return s}const mP=new WeakMap;function iE(n,e,t=!1){const s=t?mP:e.propsCache,r=s.get(n);if(r)return r;const i=n.props,o={},a=[];let l=!1;if(!Ke(n)){const h=f=>{l=!0;const[p,m]=iE(f,e,!0);On(o,p),m&&a.push(...m)};!t&&e.mixins.length&&e.mixins.forEach(h),n.extends&&h(n.extends),n.mixins&&n.mixins.forEach(h)}if(!i&&!l)return Rt(n)&&s.set(n,ya),ya;if(Me(i))for(let h=0;h<i.length;h++){const f=Gs(i[h]);lv(f)&&(o[f]=kt)}else if(i)for(const h in i){const f=Gs(h);if(lv(f)){const p=i[h],m=o[f]=Me(p)||Ke(p)?{type:p}:On({},p),_=m.type;let v=!1,A=!0;if(Me(_))for(let w=0;w<_.length;++w){const T=_[w],P=Ke(T)&&T.name;if(P==="Boolean"){v=!0;break}else P==="String"&&(A=!1)}else v=Ke(_)&&_.name==="Boolean";m[0]=v,m[1]=A,(v||_t(m,"default"))&&a.push(f)}}const c=[o,a];return Rt(n)&&s.set(n,c),c}function lv(n){return n[0]!=="$"&&!Bl(n)}const Zg=n=>n==="_"||n==="_ctx"||n==="$stable",em=n=>Me(n)?n.map(fr):[fr(n)],yP=(n,e,t)=>{if(e._n)return e;const s=$_((...r)=>em(e(...r)),t);return s._c=!1,s},oE=(n,e,t)=>{const s=n._ctx;for(const r in n){if(Zg(r))continue;const i=n[r];if(Ke(i))e[r]=yP(r,i,s);else if(i!=null){const o=em(i);e[r]=()=>o}}},aE=(n,e)=>{const t=em(e);n.slots.default=()=>t},lE=(n,e,t)=>{for(const s in e)(t||!Zg(s))&&(n[s]=e[s])},vP=(n,e,t)=>{const s=n.slots=nE();if(n.vnode.shapeFlag&32){const r=e._;r?(lE(s,e,t),t&&g_(s,"_",r,!0)):oE(e,s)}else e&&aE(n,e)},AP=(n,e,t)=>{const{vnode:s,slots:r}=n;let i=!0,o=kt;if(s.shapeFlag&32){const a=e._;a?t&&a===1?i=!1:lE(r,e,t):(i=!e.$stable,oE(e,r)),o=e}else e&&(aE(n,e),o={default:1});if(i)for(const a in r)!Zg(a)&&o[a]==null&&delete r[a]},Ps=OP;function wP(n){return _P(n)}function _P(n,e){const t=bd();t.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:h,parentNode:f,nextSibling:p,setScopeId:m=yr,insertStaticContent:_}=n,v=(O,L,G,te=null,j=null,F=null,Q=void 0,ee=null,ae=!!L.dynamicChildren)=>{if(O===L)return;O&&!yo(O,L)&&(te=Z(O),Ve(O,j,F,!0),O=null),L.patchFlag===-2&&(ae=!1,L.dynamicChildren=null);const{type:le,ref:xe,shapeFlag:ge}=L;switch(le){case Rd:A(O,L,G,te);break;case as:w(O,L,G,te);break;case hh:O==null&&T(L,G,te,Q);break;case Re:N(O,L,G,te,j,F,Q,ee,ae);break;default:ge&1?W(O,L,G,te,j,F,Q,ee,ae):ge&6?k(O,L,G,te,j,F,Q,ee,ae):(ge&64||ge&128)&&le.process(O,L,G,te,j,F,Q,ee,ae,we)}xe!=null&&j?Ul(xe,O&&O.ref,F,L||O,!L):xe==null&&O&&O.ref!=null&&Ul(O.ref,null,F,O,!0)},A=(O,L,G,te)=>{if(O==null)s(L.el=a(L.children),G,te);else{const j=L.el=O.el;L.children!==O.children&&c(j,L.children)}},w=(O,L,G,te)=>{O==null?s(L.el=l(L.children||""),G,te):L.el=O.el},T=(O,L,G,te)=>{[O.el,O.anchor]=_(O.children,L,G,te,O.el,O.anchor)},P=({el:O,anchor:L},G,te)=>{let j;for(;O&&O!==L;)j=p(O),s(O,G,te),O=j;s(L,G,te)},U=({el:O,anchor:L})=>{let G;for(;O&&O!==L;)G=p(O),r(O),O=G;r(L)},W=(O,L,G,te,j,F,Q,ee,ae)=>{L.type==="svg"?Q="svg":L.type==="math"&&(Q="mathml"),O==null?q(L,G,te,j,F,Q,ee,ae):S(O,L,j,F,Q,ee,ae)},q=(O,L,G,te,j,F,Q,ee)=>{let ae,le;const{props:xe,shapeFlag:ge,transition:Ee,dirs:Be}=O;if(ae=O.el=o(O.type,F,xe&&xe.is,xe),ge&8?h(ae,O.children):ge&16&&I(O.children,ae,null,te,j,Lf(O,F),Q,ee),Be&&ao(O,null,te,"created"),x(ae,O,O.scopeId,Q,te),xe){for(const $e in xe)$e!=="value"&&!Bl($e)&&i(ae,$e,null,xe[$e],F,te);"value"in xe&&i(ae,"value",null,xe.value,F),(le=xe.onVnodeBeforeMount)&&cr(le,te,O)}Be&&ao(O,null,te,"beforeMount");const nt=EP(j,Ee);nt&&Ee.beforeEnter(ae),s(ae,L,G),((le=xe&&xe.onVnodeMounted)||nt||Be)&&Ps(()=>{le&&cr(le,te,O),nt&&Ee.enter(ae),Be&&ao(O,null,te,"mounted")},j)},x=(O,L,G,te,j)=>{if(G&&m(O,G),te)for(let F=0;F<te.length;F++)m(O,te[F]);if(j){let F=j.subTree;if(L===F||pE(F.type)&&(F.ssContent===L||F.ssFallback===L)){const Q=j.vnode;x(O,Q,Q.scopeId,Q.slotScopeIds,j.parent)}}},I=(O,L,G,te,j,F,Q,ee,ae=0)=>{for(let le=ae;le<O.length;le++){const xe=O[le]=ee?Si(O[le]):fr(O[le]);v(null,xe,L,G,te,j,F,Q,ee)}},S=(O,L,G,te,j,F,Q)=>{const ee=L.el=O.el;let{patchFlag:ae,dynamicChildren:le,dirs:xe}=L;ae|=O.patchFlag&16;const ge=O.props||kt,Ee=L.props||kt;let Be;if(G&&lo(G,!1),(Be=Ee.onVnodeBeforeUpdate)&&cr(Be,G,L,O),xe&&ao(L,O,G,"beforeUpdate"),G&&lo(G,!0),(ge.innerHTML&&Ee.innerHTML==null||ge.textContent&&Ee.textContent==null)&&h(ee,""),le?C(O.dynamicChildren,le,ee,G,te,Lf(L,j),F):Q||z(O,L,ee,null,G,te,Lf(L,j),F,!1),ae>0){if(ae&16)b(ee,ge,Ee,G,j);else if(ae&2&&ge.class!==Ee.class&&i(ee,"class",null,Ee.class,j),ae&4&&i(ee,"style",ge.style,Ee.style,j),ae&8){const nt=L.dynamicProps;for(let $e=0;$e<nt.length;$e++){const st=nt[$e],it=ge[st],dn=Ee[st];(dn!==it||st==="value")&&i(ee,st,it,dn,j,G)}}ae&1&&O.children!==L.children&&h(ee,L.children)}else!Q&&le==null&&b(ee,ge,Ee,G,j);((Be=Ee.onVnodeUpdated)||xe)&&Ps(()=>{Be&&cr(Be,G,L,O),xe&&ao(L,O,G,"updated")},te)},C=(O,L,G,te,j,F,Q)=>{for(let ee=0;ee<L.length;ee++){const ae=O[ee],le=L[ee],xe=ae.el&&(ae.type===Re||!yo(ae,le)||ae.shapeFlag&198)?f(ae.el):G;v(ae,le,xe,null,te,j,F,Q,!0)}},b=(O,L,G,te,j)=>{if(L!==G){if(L!==kt)for(const F in L)!Bl(F)&&!(F in G)&&i(O,F,L[F],null,j,te);for(const F in G){if(Bl(F))continue;const Q=G[F],ee=L[F];Q!==ee&&F!=="value"&&i(O,F,ee,Q,j,te)}"value"in G&&i(O,"value",L.value,G.value,j)}},N=(O,L,G,te,j,F,Q,ee,ae)=>{const le=L.el=O?O.el:a(""),xe=L.anchor=O?O.anchor:a("");let{patchFlag:ge,dynamicChildren:Ee,slotScopeIds:Be}=L;Be&&(ee=ee?ee.concat(Be):Be),O==null?(s(le,G,te),s(xe,G,te),I(L.children||[],G,xe,j,F,Q,ee,ae)):ge>0&&ge&64&&Ee&&O.dynamicChildren?(C(O.dynamicChildren,Ee,G,j,F,Q,ee),(L.key!=null||j&&L===j.subTree)&&cE(O,L,!0)):z(O,L,G,xe,j,F,Q,ee,ae)},k=(O,L,G,te,j,F,Q,ee,ae)=>{L.slotScopeIds=ee,O==null?L.shapeFlag&512?j.ctx.activate(L,G,te,Q,ae):Se(L,G,te,j,F,Q,ae):ne(O,L,ae)},Se=(O,L,G,te,j,F,Q)=>{const ee=O.component=$P(O,te,j);if(Td(O)&&(ee.ctx.renderer=we),HP(ee,!1,Q),ee.asyncDep){if(j&&j.registerDep(ee,V,Q),!O.el){const ae=ee.subTree=Ge(as);w(null,ae,L,G),O.placeholder=ae.el}}else V(ee,O,L,G,j,F,Q)},ne=(O,L,G)=>{const te=L.component=O.component;if(NP(O,L,G))if(te.asyncDep&&!te.asyncResolved){D(te,L,G);return}else te.next=L,te.update();else L.el=O.el,te.vnode=L},V=(O,L,G,te,j,F,Q)=>{const ee=()=>{if(O.isMounted){let{next:ge,bu:Ee,u:Be,parent:nt,vnode:$e}=O;{const ns=uE(O);if(ns){ge&&(ge.el=$e.el,D(O,ge,Q)),ns.asyncDep.then(()=>{O.isUnmounted||ee()});return}}let st=ge,it;lo(O,!1),ge?(ge.el=$e.el,D(O,ge,Q)):ge=$e,Ee&&ch(Ee),(it=ge.props&&ge.props.onVnodeBeforeUpdate)&&cr(it,nt,ge,$e),lo(O,!0);const dn=uv(O),ts=O.subTree;O.subTree=dn,v(ts,dn,f(ts.el),Z(ts),O,j,F),ge.el=dn.el,st===null&&DP(O,dn.el),Be&&Ps(Be,j),(it=ge.props&&ge.props.onVnodeUpdated)&&Ps(()=>cr(it,nt,ge,$e),j)}else{let ge;const{el:Ee,props:Be}=L,{bm:nt,m:$e,parent:st,root:it,type:dn}=O,ts=Vl(L);lo(O,!1),nt&&ch(nt),!ts&&(ge=Be&&Be.onVnodeBeforeMount)&&cr(ge,st,L),lo(O,!0);{it.ce&&it.ce._def.shadowRoot!==!1&&it.ce._injectChildStyle(dn);const ns=O.subTree=uv(O);v(null,ns,G,te,O,j,F),L.el=ns.el}if($e&&Ps($e,j),!ts&&(ge=Be&&Be.onVnodeMounted)){const ns=L;Ps(()=>cr(ge,st,ns),j)}(L.shapeFlag&256||st&&Vl(st.vnode)&&st.vnode.shapeFlag&256)&&O.a&&Ps(O.a,j),O.isMounted=!0,L=G=te=null}};O.scope.on();const ae=O.effect=new A_(ee);O.scope.off();const le=O.update=ae.run.bind(ae),xe=O.job=ae.runIfDirty.bind(ae);xe.i=O,xe.id=O.uid,ae.scheduler=()=>Xg(xe),lo(O,!0),le()},D=(O,L,G)=>{L.component=O;const te=O.vnode.props;O.vnode=L,O.next=null,gP(O,L.props,te,G),AP(O,L.children,G),Yr(),ev(O),Xr()},z=(O,L,G,te,j,F,Q,ee,ae=!1)=>{const le=O&&O.children,xe=O?O.shapeFlag:0,ge=L.children,{patchFlag:Ee,shapeFlag:Be}=L;if(Ee>0){if(Ee&128){ke(le,ge,G,te,j,F,Q,ee,ae);return}else if(Ee&256){he(le,ge,G,te,j,F,Q,ee,ae);return}}Be&8?(xe&16&&yt(le,j,F),ge!==le&&h(G,ge)):xe&16?Be&16?ke(le,ge,G,te,j,F,Q,ee,ae):yt(le,j,F,!0):(xe&8&&h(G,""),Be&16&&I(ge,G,te,j,F,Q,ee,ae))},he=(O,L,G,te,j,F,Q,ee,ae)=>{O=O||ya,L=L||ya;const le=O.length,xe=L.length,ge=Math.min(le,xe);let Ee;for(Ee=0;Ee<ge;Ee++){const Be=L[Ee]=ae?Si(L[Ee]):fr(L[Ee]);v(O[Ee],Be,G,null,j,F,Q,ee,ae)}le>xe?yt(O,j,F,!0,!1,ge):I(L,G,te,j,F,Q,ee,ae,ge)},ke=(O,L,G,te,j,F,Q,ee,ae)=>{let le=0;const xe=L.length;let ge=O.length-1,Ee=xe-1;for(;le<=ge&&le<=Ee;){const Be=O[le],nt=L[le]=ae?Si(L[le]):fr(L[le]);if(yo(Be,nt))v(Be,nt,G,null,j,F,Q,ee,ae);else break;le++}for(;le<=ge&&le<=Ee;){const Be=O[ge],nt=L[Ee]=ae?Si(L[Ee]):fr(L[Ee]);if(yo(Be,nt))v(Be,nt,G,null,j,F,Q,ee,ae);else break;ge--,Ee--}if(le>ge){if(le<=Ee){const Be=Ee+1,nt=Be<xe?L[Be].el:te;for(;le<=Ee;)v(null,L[le]=ae?Si(L[le]):fr(L[le]),G,nt,j,F,Q,ee,ae),le++}}else if(le>Ee)for(;le<=ge;)Ve(O[le],j,F,!0),le++;else{const Be=le,nt=le,$e=new Map;for(le=nt;le<=Ee;le++){const wn=L[le]=ae?Si(L[le]):fr(L[le]);wn.key!=null&&$e.set(wn.key,le)}let st,it=0;const dn=Ee-nt+1;let ts=!1,ns=0;const ps=new Array(dn);for(le=0;le<dn;le++)ps[le]=0;for(le=Be;le<=ge;le++){const wn=O[le];if(it>=dn){Ve(wn,j,F,!0);continue}let fn;if(wn.key!=null)fn=$e.get(wn.key);else for(st=nt;st<=Ee;st++)if(ps[st-nt]===0&&yo(wn,L[st])){fn=st;break}fn===void 0?Ve(wn,j,F,!0):(ps[fn-nt]=le+1,fn>=ns?ns=fn:ts=!0,v(wn,L[fn],G,null,j,F,Q,ee,ae),it++)}const js=ts?bP(ps):ya;for(st=js.length-1,le=dn-1;le>=0;le--){const wn=nt+le,fn=L[wn],hi=L[wn+1],Nt=wn+1<xe?hi.el||hi.placeholder:te;ps[le]===0?v(null,fn,G,Nt,j,F,Q,ee,ae):ts&&(st<0||le!==js[st]?Te(fn,G,Nt,2):st--)}}},Te=(O,L,G,te,j=null)=>{const{el:F,type:Q,transition:ee,children:ae,shapeFlag:le}=O;if(le&6){Te(O.component.subTree,L,G,te);return}if(le&128){O.suspense.move(L,G,te);return}if(le&64){Q.move(O,L,G,we);return}if(Q===Re){s(F,L,G);for(let ge=0;ge<ae.length;ge++)Te(ae[ge],L,G,te);s(O.anchor,L,G);return}if(Q===hh){P(O,L,G);return}if(te!==2&&le&1&&ee)if(te===0)ee.beforeEnter(F),s(F,L,G),Ps(()=>ee.enter(F),j);else{const{leave:ge,delayLeave:Ee,afterLeave:Be}=ee,nt=()=>{O.ctx.isUnmounted?r(F):s(F,L,G)},$e=()=>{F._isLeaving&&F[Or](!0),ge(F,()=>{nt(),Be&&Be()})};Ee?Ee(F,nt,$e):$e()}else s(F,L,G)},Ve=(O,L,G,te=!1,j=!1)=>{const{type:F,props:Q,ref:ee,children:ae,dynamicChildren:le,shapeFlag:xe,patchFlag:ge,dirs:Ee,cacheIndex:Be}=O;if(ge===-2&&(j=!1),ee!=null&&(Yr(),Ul(ee,null,G,O,!0),Xr()),Be!=null&&(L.renderCache[Be]=void 0),xe&256){L.ctx.deactivate(O);return}const nt=xe&1&&Ee,$e=!Vl(O);let st;if($e&&(st=Q&&Q.onVnodeBeforeUnmount)&&cr(st,L,O),xe&6)pt(O.component,G,te);else{if(xe&128){O.suspense.unmount(G,te);return}nt&&ao(O,null,L,"beforeUnmount"),xe&64?O.type.remove(O,L,G,we,te):le&&!le.hasOnce&&(F!==Re||ge>0&&ge&64)?yt(le,L,G,!1,!0):(F===Re&&ge&384||!j&&xe&16)&&yt(ae,L,G),te&&ze(O)}($e&&(st=Q&&Q.onVnodeUnmounted)||nt)&&Ps(()=>{st&&cr(st,L,O),nt&&ao(O,null,L,"unmounted")},G)},ze=O=>{const{type:L,el:G,anchor:te,transition:j}=O;if(L===Re){ft(G,te);return}if(L===hh){U(O);return}const F=()=>{r(G),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(O.shapeFlag&1&&j&&!j.persisted){const{leave:Q,delayLeave:ee}=j,ae=()=>Q(G,F);ee?ee(O.el,F,ae):ae()}else F()},ft=(O,L)=>{let G;for(;O!==L;)G=p(O),r(O),O=G;r(L)},pt=(O,L,G)=>{const{bum:te,scope:j,job:F,subTree:Q,um:ee,m:ae,a:le}=O;cv(ae),cv(le),te&&ch(te),j.stop(),F&&(F.flags|=8,Ve(Q,O,L,G)),ee&&Ps(ee,L),Ps(()=>{O.isUnmounted=!0},L)},yt=(O,L,G,te=!1,j=!1,F=0)=>{for(let Q=F;Q<O.length;Q++)Ve(O[Q],L,G,te,j)},Z=O=>{if(O.shapeFlag&6)return Z(O.component.subTree);if(O.shapeFlag&128)return O.suspense.next();const L=p(O.anchor||O.el),G=L&&L[HS];return G?p(G):L};let pe=!1;const ue=(O,L,G)=>{O==null?L._vnode&&Ve(L._vnode,null,null,!0):v(L._vnode||null,O,L,null,null,null,G),L._vnode=O,pe||(pe=!0,ev(),F_(),pe=!1)},we={p:v,um:Ve,m:Te,r:ze,mt:Se,mc:I,pc:z,pbc:C,n:Z,o:n};return{render:ue,hydrate:void 0,createApp:fP(ue)}}function Lf({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function lo({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function EP(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function cE(n,e,t=!1){const s=n.children,r=e.children;if(Me(s)&&Me(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Si(r[i]),a.el=o.el),!t&&a.patchFlag!==-2&&cE(o,a)),a.type===Rd&&a.patchFlag!==-1&&(a.el=o.el),a.type===as&&!a.el&&(a.el=o.el)}}function bP(n){const e=n.slice(),t=[0];let s,r,i,o,a;const l=n.length;for(s=0;s<l;s++){const c=n[s];if(c!==0){if(r=t[t.length-1],n[r]<c){e[s]=r,t.push(s);continue}for(i=0,o=t.length-1;i<o;)a=i+o>>1,n[t[a]]<c?i=a+1:o=a;c<n[t[i]]&&(i>0&&(e[s]=t[i-1]),t[i]=s)}}for(i=t.length,o=t[i-1];i-- >0;)t[i]=o,o=e[o];return t}function uE(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:uE(e)}function cv(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const IP=Symbol.for("v-scx"),CP=()=>er(IP);function Wr(n,e,t){return hE(n,e,t)}function hE(n,e,t=kt){const{immediate:s,deep:r,flush:i,once:o}=t,a=On({},t),l=e&&s||!e&&i!=="post";let c;if(rc){if(i==="sync"){const m=CP();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=yr,m.resume=yr,m.pause=yr,m}}const h=Jn;a.call=(m,_,v)=>tr(m,h,_,v);let f=!1;i==="post"?a.scheduler=m=>{Ps(m,h&&h.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(m,_)=>{_?m():Xg(m)}),a.augmentJob=m=>{e&&(m.flags|=4),f&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=FS(n,e,a);return rc&&(c?c.push(p):l&&p()),p}function TP(n,e,t){const s=this.proxy,r=cn(n)?n.includes(".")?dE(s,n):()=>s[n]:n.bind(s,s);let i;Ke(e)?i=e:(i=e.handler,t=e);const o=xc(this),a=hE(r,i.bind(s),t);return o(),a}function dE(n,e){const t=e.split(".");return()=>{let s=n;for(let r=0;r<t.length&&s;r++)s=s[t[r]];return s}}const SP=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${Gs(e)}Modifiers`]||n[`${Zi(e)}Modifiers`];function PP(n,e,...t){if(n.isUnmounted)return;const s=n.vnode.props||kt;let r=t;const i=e.startsWith("update:"),o=i&&SP(s,e.slice(7));o&&(o.trim&&(r=t.map(h=>cn(h)?h.trim():h)),o.number&&(r=t.map(xh)));let a,l=s[a=Pf(e)]||s[a=Pf(Gs(e))];!l&&i&&(l=s[a=Pf(Zi(e))]),l&&tr(l,n,6,r);const c=s[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,tr(c,n,6,r)}}const RP=new WeakMap;function fE(n,e,t=!1){const s=t?RP:e.emitsCache,r=s.get(n);if(r!==void 0)return r;const i=n.emits;let o={},a=!1;if(!Ke(n)){const l=c=>{const h=fE(c,e,!0);h&&(a=!0,On(o,h))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!i&&!a?(Rt(n)&&s.set(n,null),null):(Me(i)?i.forEach(l=>o[l]=null):On(o,i),Rt(n)&&s.set(n,o),o)}function Pd(n,e){return!n||!wd(e)?!1:(e=e.slice(2).replace(/Once$/,""),_t(n,e[0].toLowerCase()+e.slice(1))||_t(n,Zi(e))||_t(n,e))}function uv(n){const{type:e,vnode:t,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:h,props:f,data:p,setupState:m,ctx:_,inheritAttrs:v}=n,A=Oh(n);let w,T;try{if(t.shapeFlag&4){const U=r||s,W=U;w=fr(c.call(W,U,h,f,m,p,_)),T=a}else{const U=e;w=fr(U.length>1?U(f,{attrs:a,slots:o,emit:l}):U(f,null)),T=e.props?a:xP(a)}}catch(U){Hl.length=0,Cd(U,n,1),w=Ge(as)}let P=w;if(T&&v!==!1){const U=Object.keys(T),{shapeFlag:W}=P;U.length&&W&7&&(i&&U.some(Vg)&&(T=kP(T,i)),P=Hi(P,T,!1,!0))}return t.dirs&&(P=Hi(P,null,!1,!0),P.dirs=P.dirs?P.dirs.concat(t.dirs):t.dirs),t.transition&&nc(P,t.transition),w=P,Oh(A),w}const xP=n=>{let e;for(const t in n)(t==="class"||t==="style"||wd(t))&&((e||(e={}))[t]=n[t]);return e},kP=(n,e)=>{const t={};for(const s in n)(!Vg(s)||!(s.slice(9)in e))&&(t[s]=n[s]);return t};function NP(n,e,t){const{props:s,children:r,component:i}=n,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return s?hv(s,o,c):!!o;if(l&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const p=h[f];if(o[p]!==s[p]&&!Pd(c,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?hv(s,o,c):!0:!!o;return!1}function hv(n,e,t){const s=Object.keys(e);if(s.length!==Object.keys(n).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==n[i]&&!Pd(t,i))return!0}return!1}function DP({vnode:n,parent:e},t){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===n&&(s.el=n.el),s===n)(n=e.vnode).el=t,e=e.parent;else break}}const pE=n=>n.__isSuspense;function OP(n,e){e&&e.pendingBranch?Me(n)?e.effects.push(...n):e.effects.push(n):$S(n)}const Re=Symbol.for("v-fgt"),Rd=Symbol.for("v-txt"),as=Symbol.for("v-cmt"),hh=Symbol.for("v-stc"),Hl=[];let Ns=null;function B(n=!1){Hl.push(Ns=n?null:[])}function LP(){Hl.pop(),Ns=Hl[Hl.length-1]||null}let sc=1;function Mh(n,e=!1){sc+=n,n<0&&Ns&&e&&(Ns.hasOnce=!0)}function gE(n){return n.dynamicChildren=sc>0?Ns||ya:null,LP(),sc>0&&Ns&&Ns.push(n),n}function M(n,e,t,s,r,i){return gE(d(n,e,t,s,r,i,!0))}function mE(n,e,t,s,r){return gE(Ge(n,e,t,s,r,!0))}function Fh(n){return n?n.__v_isVNode===!0:!1}function yo(n,e){return n.type===e.type&&n.key===e.key}const yE=({key:n})=>n??null,dh=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?cn(n)||Yn(n)||Ke(n)?{i:ks,r:n,k:e,f:!!t}:n:null);function d(n,e=null,t=null,s=0,r=null,i=n===Re?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&yE(e),ref:e&&dh(e),scopeId:V_,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:ks};return a?(tm(l,t),i&128&&n.normalize(l)):t&&(l.shapeFlag|=cn(t)?8:16),sc>0&&!o&&Ns&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Ns.push(l),l}const Ge=BP;function BP(n,e=null,t=null,s=0,r=null,i=!1){if((!n||n===rP)&&(n=as),Fh(n)){const a=Hi(n,e,!0);return t&&tm(a,t),sc>0&&!i&&Ns&&(a.shapeFlag&6?Ns[Ns.indexOf(n)]=a:Ns.push(a)),a.patchFlag=-2,a}if(WP(n)&&(n=n.__vccOpts),e){e=MP(e);let{class:a,style:l}=e;a&&!cn(a)&&(e.class=Ne(a)),Rt(l)&&(Jg(l)&&!Me(l)&&(l=On({},l)),e.style=Ct(l))}const o=cn(n)?1:pE(n)?128:H_(n)?64:Rt(n)?4:Ke(n)?2:0;return d(n,e,t,s,r,o,i,!0)}function MP(n){return n?Jg(n)||sE(n)?On({},n):n:null}function Hi(n,e,t=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=n,c=e?FP(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&yE(c),ref:e&&e.ref?t&&i?Me(i)?i.concat(dh(e)):[i,dh(e)]:dh(e):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Re?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Hi(n.ssContent),ssFallback:n.ssFallback&&Hi(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&s&&nc(h,l.clone(h)),h}function Da(n=" ",e=0){return Ge(Rd,null,n,e)}function vE(n,e){const t=Ge(hh,null,n);return t.staticCount=e,t}function ce(n="",e=!1){return e?(B(),mE(as,null,n)):Ge(as,null,n)}function fr(n){return n==null||typeof n=="boolean"?Ge(as):Me(n)?Ge(Re,null,n.slice()):Fh(n)?Si(n):Ge(Rd,null,String(n))}function Si(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Hi(n)}function tm(n,e){let t=0;const{shapeFlag:s}=n;if(e==null)e=null;else if(Me(e))t=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),tm(n,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!sE(e)?e._ctx=ks:r===3&&ks&&(ks.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Ke(e)?(e={default:e,_ctx:ks},t=32):(e=String(e),s&64?(t=16,e=[Da(e)]):t=8);n.children=e,n.shapeFlag|=t}function FP(...n){const e={};for(let t=0;t<n.length;t++){const s=n[t];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Ne([e.class,s.class]));else if(r==="style")e.style=Ct([e.style,s.style]);else if(wd(r)){const i=e[r],o=s[r];o&&i!==o&&!(Me(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function cr(n,e,t,s=null){tr(n,e,7,[t,s])}const UP=eE();let VP=0;function $P(n,e,t){const s=n.type,r=(e?e.appContext:n.appContext)||UP,i={uid:VP++,vnode:n,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new hS(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:iE(s,r),emitsOptions:fE(s,r),emit:null,emitted:null,propsDefaults:kt,inheritAttrs:s.inheritAttrs,ctx:kt,data:kt,props:kt,attrs:kt,slots:kt,refs:kt,setupState:kt,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=PP.bind(null,i),n.ce&&n.ce(i),i}let Jn=null;const AE=()=>Jn||ks;let Uh,Bp;{const n=bd(),e=(t,s)=>{let r;return(r=n[t])||(r=n[t]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Uh=e("__VUE_INSTANCE_SETTERS__",t=>Jn=t),Bp=e("__VUE_SSR_SETTERS__",t=>rc=t)}const xc=n=>{const e=Jn;return Uh(n),n.scope.on(),()=>{n.scope.off(),Uh(e)}},dv=()=>{Jn&&Jn.scope.off(),Uh(null)};function wE(n){return n.vnode.shapeFlag&4}let rc=!1;function HP(n,e=!1,t=!1){e&&Bp(e);const{props:s,children:r}=n.vnode,i=wE(n);pP(n,s,i,e),vP(n,r,t||e);const o=i?GP(n,e):void 0;return e&&Bp(!1),o}function GP(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,oP);const{setup:s}=t;if(s){Yr();const r=n.setupContext=s.length>1?jP(n):null,i=xc(n),o=Rc(s,n,0,[n.props,r]),a=d_(o);if(Xr(),i(),(a||n.sp)&&!Vl(n)&&q_(n),a){if(o.then(dv,dv),e)return o.then(l=>{fv(n,l)}).catch(l=>{Cd(l,n,0)});n.asyncDep=o}else fv(n,o)}else _E(n)}function fv(n,e,t){Ke(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Rt(e)&&(n.setupState=L_(e)),_E(n)}function _E(n,e,t){const s=n.type;n.render||(n.render=s.render||yr);{const r=xc(n);Yr();try{aP(n)}finally{Xr(),r()}}}const QP={get(n,e){return Kn(n,"get",""),n[e]}};function jP(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,QP),slots:n.slots,emit:n.emit,expose:e}}function xd(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(L_(kS(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in $l)return $l[t](n)},has(e,t){return t in e||t in $l}})):n.proxy}function zP(n,e=!0){return Ke(n)?n.displayName||n.name:n.name||e&&n.__name}function WP(n){return Ke(n)&&"__vccOpts"in n}const de=(n,e)=>BS(n,e,rc);function nm(n,e,t){try{Mh(-1);const s=arguments.length;return s===2?Rt(e)&&!Me(e)?Fh(e)?Ge(n,null,[e]):Ge(n,e):Ge(n,null,e):(s>3?t=Array.prototype.slice.call(arguments,2):s===3&&Fh(t)&&(t=[t]),Ge(n,e,t))}finally{Mh(1)}}const KP="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Mp;const pv=typeof window<"u"&&window.trustedTypes;if(pv)try{Mp=pv.createPolicy("vue",{createHTML:n=>n})}catch{}const EE=Mp?n=>Mp.createHTML(n):n=>n,qP="http://www.w3.org/2000/svg",JP="http://www.w3.org/1998/Math/MathML",Nr=typeof document<"u"?document:null,gv=Nr&&Nr.createElement("template"),YP={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,s)=>{const r=e==="svg"?Nr.createElementNS(qP,n):e==="mathml"?Nr.createElementNS(JP,n):t?Nr.createElement(n,{is:t}):Nr.createElement(n);return n==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:n=>Nr.createTextNode(n),createComment:n=>Nr.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Nr.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,s,r,i){const o=t?t.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===i||!(r=r.nextSibling)););else{gv.innerHTML=EE(s==="svg"?`<svg>${n}</svg>`:s==="mathml"?`<math>${n}</math>`:n);const a=gv.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},vi="transition",El="animation",ic=Symbol("_vtc"),bE={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},XP=On({},G_,bE),ZP=n=>(n.displayName="Transition",n.props=XP,n),eR=ZP((n,{slots:e})=>nm(jS,tR(n),e)),co=(n,e=[])=>{Me(n)?n.forEach(t=>t(...e)):n&&n(...e)},mv=n=>n?Me(n)?n.some(e=>e.length>1):n.length>1:!1;function tR(n){const e={};for(const N in n)N in bE||(e[N]=n[N]);if(n.css===!1)return e;const{name:t="v",type:s,duration:r,enterFromClass:i=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:h=a,leaveFromClass:f=`${t}-leave-from`,leaveActiveClass:p=`${t}-leave-active`,leaveToClass:m=`${t}-leave-to`}=n,_=nR(r),v=_&&_[0],A=_&&_[1],{onBeforeEnter:w,onEnter:T,onEnterCancelled:P,onLeave:U,onLeaveCancelled:W,onBeforeAppear:q=w,onAppear:x=T,onAppearCancelled:I=P}=e,S=(N,k,Se,ne)=>{N._enterCancelled=ne,uo(N,k?h:a),uo(N,k?c:o),Se&&Se()},C=(N,k)=>{N._isLeaving=!1,uo(N,f),uo(N,m),uo(N,p),k&&k()},b=N=>(k,Se)=>{const ne=N?x:T,V=()=>S(k,N,Se);co(ne,[k,V]),yv(()=>{uo(k,N?l:i),xr(k,N?h:a),mv(ne)||vv(k,s,v,V)})};return On(e,{onBeforeEnter(N){co(w,[N]),xr(N,i),xr(N,o)},onBeforeAppear(N){co(q,[N]),xr(N,l),xr(N,c)},onEnter:b(!1),onAppear:b(!0),onLeave(N,k){N._isLeaving=!0;const Se=()=>C(N,k);xr(N,f),N._enterCancelled?(xr(N,p),_v(N)):(_v(N),xr(N,p)),yv(()=>{N._isLeaving&&(uo(N,f),xr(N,m),mv(U)||vv(N,s,A,Se))}),co(U,[N,Se])},onEnterCancelled(N){S(N,!1,void 0,!0),co(P,[N])},onAppearCancelled(N){S(N,!0,void 0,!0),co(I,[N])},onLeaveCancelled(N){C(N),co(W,[N])}})}function nR(n){if(n==null)return null;if(Rt(n))return[Bf(n.enter),Bf(n.leave)];{const e=Bf(n);return[e,e]}}function Bf(n){return sS(n)}function xr(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[ic]||(n[ic]=new Set)).add(e)}function uo(n,e){e.split(/\s+/).forEach(s=>s&&n.classList.remove(s));const t=n[ic];t&&(t.delete(e),t.size||(n[ic]=void 0))}function yv(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let sR=0;function vv(n,e,t,s){const r=n._endId=++sR,i=()=>{r===n._endId&&s()};if(t!=null)return setTimeout(i,t);const{type:o,timeout:a,propCount:l}=rR(n,e);if(!o)return s();const c=o+"end";let h=0;const f=()=>{n.removeEventListener(c,p),i()},p=m=>{m.target===n&&++h>=l&&f()};setTimeout(()=>{h<l&&f()},a+1),n.addEventListener(c,p)}function rR(n,e){const t=window.getComputedStyle(n),s=_=>(t[_]||"").split(", "),r=s(`${vi}Delay`),i=s(`${vi}Duration`),o=Av(r,i),a=s(`${El}Delay`),l=s(`${El}Duration`),c=Av(a,l);let h=null,f=0,p=0;e===vi?o>0&&(h=vi,f=o,p=i.length):e===El?c>0&&(h=El,f=c,p=l.length):(f=Math.max(o,c),h=f>0?o>c?vi:El:null,p=h?h===vi?i.length:l.length:0);const m=h===vi&&/\b(?:transform|all)(?:,|$)/.test(s(`${vi}Property`).toString());return{type:h,timeout:f,propCount:p,hasTransform:m}}function Av(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,s)=>wv(t)+wv(n[s])))}function wv(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function _v(n){return(n?n.ownerDocument:document).body.offsetHeight}function iR(n,e,t){const s=n[ic];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Vh=Symbol("_vod"),IE=Symbol("_vsh"),CE={name:"show",beforeMount(n,{value:e},{transition:t}){n[Vh]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):bl(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:s}){!e!=!t&&(s?e?(s.beforeEnter(n),bl(n,!0),s.enter(n)):s.leave(n,()=>{bl(n,!1)}):bl(n,e))},beforeUnmount(n,{value:e}){bl(n,e)}};function bl(n,e){n.style.display=e?n[Vh]:"none",n[IE]=!e}const oR=Symbol(""),aR=/(?:^|;)\s*display\s*:/;function lR(n,e,t){const s=n.style,r=cn(t);let i=!1;if(t&&!r){if(e)if(cn(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&fh(s,a,"")}else for(const o in e)t[o]==null&&fh(s,o,"");for(const o in t)o==="display"&&(i=!0),fh(s,o,t[o])}else if(r){if(e!==t){const o=s[oR];o&&(t+=";"+o),s.cssText=t,i=aR.test(t)}}else e&&n.removeAttribute("style");Vh in n&&(n[Vh]=i?s.display:"",n[IE]&&(s.display="none"))}const Ev=/\s*!important$/;function fh(n,e,t){if(Me(t))t.forEach(s=>fh(n,e,s));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const s=cR(n,e);Ev.test(t)?n.setProperty(Zi(s),t.replace(Ev,""),"important"):n[s]=t}}const bv=["Webkit","Moz","ms"],Mf={};function cR(n,e){const t=Mf[e];if(t)return t;let s=Gs(e);if(s!=="filter"&&s in n)return Mf[e]=s;s=Ed(s);for(let r=0;r<bv.length;r++){const i=bv[r]+s;if(i in n)return Mf[e]=i}return e}const Iv="http://www.w3.org/1999/xlink";function Cv(n,e,t,s,r,i=cS(e)){s&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(Iv,e.slice(6,e.length)):n.setAttributeNS(Iv,e,t):t==null||i&&!m_(t)?n.removeAttribute(e):n.setAttribute(e,i?"":Cr(t)?String(t):t)}function Tv(n,e,t,s,r){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?EE(t):t);return}const i=n.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=m_(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(r||e)}function Fr(n,e,t,s){n.addEventListener(e,t,s)}function uR(n,e,t,s){n.removeEventListener(e,t,s)}const Sv=Symbol("_vei");function hR(n,e,t,s,r=null){const i=n[Sv]||(n[Sv]={}),o=i[e];if(s&&o)o.value=s;else{const[a,l]=dR(e);if(s){const c=i[e]=gR(s,r);Fr(n,a,c,l)}else o&&(uR(n,a,o,l),i[e]=void 0)}}const Pv=/(?:Once|Passive|Capture)$/;function dR(n){let e;if(Pv.test(n)){e={};let s;for(;s=n.match(Pv);)n=n.slice(0,n.length-s[0].length),e[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Zi(n.slice(2)),e]}let Ff=0;const fR=Promise.resolve(),pR=()=>Ff||(fR.then(()=>Ff=0),Ff=Date.now());function gR(n,e){const t=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=t.attached)return;tr(mR(s,t.value),e,5,[s])};return t.value=n,t.attached=pR(),t}function mR(n,e){if(Me(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const Rv=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,yR=(n,e,t,s,r,i)=>{const o=r==="svg";e==="class"?iR(n,s,o):e==="style"?lR(n,t,s):wd(e)?Vg(e)||hR(n,e,t,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):vR(n,e,s,o))?(Tv(n,e,s),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Cv(n,e,s,o,i,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!cn(s))?Tv(n,Gs(e),s,i,e):(e==="true-value"?n._trueValue=s:e==="false-value"&&(n._falseValue=s),Cv(n,e,s,o))};function vR(n,e,t,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in n&&Rv(e)&&Ke(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=n.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Rv(e)&&cn(t)?!1:e in n}const Gi=n=>{const e=n.props["onUpdate:modelValue"]||!1;return Me(e)?t=>ch(e,t):e};function AR(n){n.target.composing=!0}function xv(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const $s=Symbol("_assign"),bs={created(n,{modifiers:{lazy:e,trim:t,number:s}},r){n[$s]=Gi(r);const i=s||r.props&&r.props.type==="number";Fr(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),i&&(a=xh(a)),n[$s](a)}),t&&Fr(n,"change",()=>{n.value=n.value.trim()}),e||(Fr(n,"compositionstart",AR),Fr(n,"compositionend",xv),Fr(n,"change",xv))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:s,trim:r,number:i}},o){if(n[$s]=Gi(o),n.composing)return;const a=(i||n.type==="number")&&!/^0\d/.test(n.value)?xh(n.value):n.value,l=e??"";a!==l&&(document.activeElement===n&&n.type!=="range"&&(s&&e===t||r&&n.value.trim()===l)||(n.value=l))}},wR={deep:!0,created(n,e,t){n[$s]=Gi(t),Fr(n,"change",()=>{const s=n._modelValue,r=Oa(n),i=n.checked,o=n[$s];if(Me(s)){const a=Gg(s,r),l=a!==-1;if(i&&!l)o(s.concat(r));else if(!i&&l){const c=[...s];c.splice(a,1),o(c)}}else if(Za(s)){const a=new Set(s);i?a.add(r):a.delete(r),o(a)}else o(TE(n,i))})},mounted:kv,beforeUpdate(n,e,t){n[$s]=Gi(t),kv(n,e,t)}};function kv(n,{value:e,oldValue:t},s){n._modelValue=e;let r;if(Me(e))r=Gg(e,s.props.value)>-1;else if(Za(e))r=e.has(s.props.value);else{if(e===t)return;r=Lo(e,TE(n,!0))}n.checked!==r&&(n.checked=r)}const _R={created(n,{value:e},t){n.checked=Lo(e,t.props.value),n[$s]=Gi(t),Fr(n,"change",()=>{n[$s](Oa(n))})},beforeUpdate(n,{value:e,oldValue:t},s){n[$s]=Gi(s),e!==t&&(n.checked=Lo(e,s.props.value))}},Di={deep:!0,created(n,{value:e,modifiers:{number:t}},s){const r=Za(e);Fr(n,"change",()=>{const i=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>t?xh(Oa(o)):Oa(o));n[$s](n.multiple?r?new Set(i):i:i[0]),n._assigning=!0,Yg(()=>{n._assigning=!1})}),n[$s]=Gi(s)},mounted(n,{value:e}){Nv(n,e)},beforeUpdate(n,e,t){n[$s]=Gi(t)},updated(n,{value:e}){n._assigning||Nv(n,e)}};function Nv(n,e){const t=n.multiple,s=Me(e);if(!(t&&!s&&!Za(e))){for(let r=0,i=n.options.length;r<i;r++){const o=n.options[r],a=Oa(o);if(t)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=Gg(e,a)>-1}else o.selected=e.has(a);else if(Lo(Oa(o),e)){n.selectedIndex!==r&&(n.selectedIndex=r);return}}!t&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function Oa(n){return"_value"in n?n._value:n.value}function TE(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const ER={created(n,e,t){ju(n,e,t,null,"created")},mounted(n,e,t){ju(n,e,t,null,"mounted")},beforeUpdate(n,e,t,s){ju(n,e,t,s,"beforeUpdate")},updated(n,e,t,s){ju(n,e,t,s,"updated")}};function bR(n,e){switch(n){case"SELECT":return Di;case"TEXTAREA":return bs;default:switch(e){case"checkbox":return wR;case"radio":return _R;default:return bs}}}function ju(n,e,t,s,r){const o=bR(n.tagName,t.props&&t.props.type)[r];o&&o(n,e,t,s)}const IR=["ctrl","shift","alt","meta"],CR={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>IR.some(t=>n[`${t}Key`]&&!e.includes(t))},zn=(n,e)=>{const t=n._withMods||(n._withMods={}),s=e.join(".");return t[s]||(t[s]=((r,...i)=>{for(let o=0;o<e.length;o++){const a=CR[e[o]];if(a&&a(r,e))return}return n(r,...i)}))},TR={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},SE=(n,e)=>{const t=n._withKeys||(n._withKeys={}),s=e.join(".");return t[s]||(t[s]=(r=>{if(!("key"in r))return;const i=Zi(r.key);if(e.some(o=>o===i||TR[o]===i))return n(r)}))},SR=On({patchProp:yR},YP);let Dv;function PR(){return Dv||(Dv=wP(SR))}const RR=((...n)=>{const e=PR().createApp(...n),{mount:t}=e;return e.mount=s=>{const r=kR(s);if(!r)return;const i=e._component;!Ke(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=t(r,!1,xR(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e});function xR(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function kR(n){return cn(n)?document.querySelector(n):n}/*!
 * vue-router v4.6.0
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const aa=typeof document<"u";function PE(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function NR(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&PE(n.default)}const wt=Object.assign;function Uf(n,e){const t={};for(const s in e){const r=e[s];t[s]=nr(r)?r.map(n):n(r)}return t}const Gl=()=>{},nr=Array.isArray;function Ov(n,e){const t={};for(const s in n)t[s]=s in e?e[s]:n[s];return t}const RE=/#/g,DR=/&/g,OR=/\//g,LR=/=/g,BR=/\?/g,xE=/\+/g,MR=/%5B/g,FR=/%5D/g,kE=/%5E/g,UR=/%60/g,NE=/%7B/g,VR=/%7C/g,DE=/%7D/g,$R=/%20/g;function sm(n){return n==null?"":encodeURI(""+n).replace(VR,"|").replace(MR,"[").replace(FR,"]")}function HR(n){return sm(n).replace(NE,"{").replace(DE,"}").replace(kE,"^")}function Fp(n){return sm(n).replace(xE,"%2B").replace($R,"+").replace(RE,"%23").replace(DR,"%26").replace(UR,"`").replace(NE,"{").replace(DE,"}").replace(kE,"^")}function GR(n){return Fp(n).replace(LR,"%3D")}function QR(n){return sm(n).replace(RE,"%23").replace(BR,"%3F")}function jR(n){return QR(n).replace(OR,"%2F")}function oc(n){if(n==null)return null;try{return decodeURIComponent(""+n)}catch{}return""+n}const zR=/\/$/,WR=n=>n.replace(zR,"");function Vf(n,e,t="/"){let s,r={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(s=e.slice(0,l),i=e.slice(l,a>0?a:e.length),r=n(i)),a>=0&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=YR(s??e,t),{fullPath:s+i+o,path:s,query:r,hash:oc(o)}}function KR(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function Lv(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function qR(n,e,t){const s=e.matched.length-1,r=t.matched.length-1;return s>-1&&s===r&&La(e.matched[s],t.matched[r])&&OE(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function La(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function OE(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!JR(n[t],e[t]))return!1;return!0}function JR(n,e){return nr(n)?Bv(n,e):nr(e)?Bv(e,n):n===e}function Bv(n,e){return nr(e)?n.length===e.length&&n.every((t,s)=>t===e[s]):n.length===1&&n[0]===e}function YR(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),s=n.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=t.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return t.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const Ai={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Up=(function(n){return n.pop="pop",n.push="push",n})({}),$f=(function(n){return n.back="back",n.forward="forward",n.unknown="",n})({});function XR(n){if(!n)if(aa){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),WR(n)}const ZR=/^[^#]+#/;function ex(n,e){return n.replace(ZR,"#")+e}function tx(n,e){const t=document.documentElement.getBoundingClientRect(),s=n.getBoundingClientRect();return{behavior:e.behavior,left:s.left-t.left-(e.left||0),top:s.top-t.top-(e.top||0)}}const kd=()=>({left:window.scrollX,top:window.scrollY});function nx(n){let e;if("el"in n){const t=n.el,s=typeof t=="string"&&t.startsWith("#"),r=typeof t=="string"?s?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!r)return;e=tx(r,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Mv(n,e){return(history.state?history.state.position-e:-1)+n}const Vp=new Map;function sx(n,e){Vp.set(n,e)}function rx(n){const e=Vp.get(n);return Vp.delete(n),e}function ix(n){return typeof n=="string"||n&&typeof n=="object"}function LE(n){return typeof n=="string"||typeof n=="symbol"}let Yt=(function(n){return n[n.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",n[n.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",n[n.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",n[n.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",n[n.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",n})({});const BE=Symbol("");Yt.MATCHER_NOT_FOUND+"",Yt.NAVIGATION_GUARD_REDIRECT+"",Yt.NAVIGATION_ABORTED+"",Yt.NAVIGATION_CANCELLED+"",Yt.NAVIGATION_DUPLICATED+"";function Ba(n,e){return wt(new Error,{type:n,[BE]:!0},e)}function kr(n,e){return n instanceof Error&&BE in n&&(e==null||!!(n.type&e))}const ox=["params","query","hash"];function ax(n){if(typeof n=="string")return n;if(n.path!=null)return n.path;const e={};for(const t of ox)t in n&&(e[t]=n[t]);return JSON.stringify(e,null,2)}function lx(n){const e={};if(n===""||n==="?")return e;const t=(n[0]==="?"?n.slice(1):n).split("&");for(let s=0;s<t.length;++s){const r=t[s].replace(xE," "),i=r.indexOf("="),o=oc(i<0?r:r.slice(0,i)),a=i<0?null:oc(r.slice(i+1));if(o in e){let l=e[o];nr(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function Fv(n){let e="";for(let t in n){const s=n[t];if(t=GR(t),s==null){s!==void 0&&(e+=(e.length?"&":"")+t);continue}(nr(s)?s.map(r=>r&&Fp(r)):[s&&Fp(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+t,r!=null&&(e+="="+r))})}return e}function cx(n){const e={};for(const t in n){const s=n[t];s!==void 0&&(e[t]=nr(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const ux=Symbol(""),Uv=Symbol(""),Nd=Symbol(""),rm=Symbol(""),$p=Symbol("");function Il(){let n=[];function e(s){return n.push(s),()=>{const r=n.indexOf(s);r>-1&&n.splice(r,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function Pi(n,e,t,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const c=p=>{p===!1?l(Ba(Yt.NAVIGATION_ABORTED,{from:t,to:e})):p instanceof Error?l(p):ix(p)?l(Ba(Yt.NAVIGATION_GUARD_REDIRECT,{from:e,to:p})):(o&&s.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>n.call(s&&s.instances[r],e,t,c));let f=Promise.resolve(h);n.length<3&&(f=f.then(c)),f.catch(p=>l(p))})}function Hf(n,e,t,s,r=i=>i()){const i=[];for(const o of n)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(PE(l)){const c=(l.__vccOpts||l)[e];c&&i.push(Pi(c,t,s,o,a,r))}else{let c=l();i.push(()=>c.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=NR(h)?h.default:h;o.mods[a]=h,o.components[a]=f;const p=(f.__vccOpts||f)[e];return p&&Pi(p,t,s,o,a,r)()}))}}return i}function hx(n,e){const t=[],s=[],r=[],i=Math.max(e.matched.length,n.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(n.matched.find(c=>La(c,a))?s.push(a):t.push(a));const l=n.matched[o];l&&(e.matched.find(c=>La(c,l))||r.push(l))}return[t,s,r]}/*!
 * vue-router v4.6.0
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let dx=()=>location.protocol+"//"+location.host;function ME(n,e){const{pathname:t,search:s,hash:r}=e,i=n.indexOf("#");if(i>-1){let o=r.includes(n.slice(i))?n.slice(i).length:1,a=r.slice(o);return a[0]!=="/"&&(a="/"+a),Lv(a,"")}return Lv(t,n)+s+r}function fx(n,e,t,s){let r=[],i=[],o=null;const a=({state:p})=>{const m=ME(n,location),_=t.value,v=e.value;let A=0;if(p){if(t.value=m,e.value=p,o&&o===_){o=null;return}A=v?p.position-v.position:0}else s(m);r.forEach(w=>{w(t.value,_,{delta:A,type:Up.pop,direction:A?A>0?$f.forward:$f.back:$f.unknown})})};function l(){o=t.value}function c(p){r.push(p);const m=()=>{const _=r.indexOf(p);_>-1&&r.splice(_,1)};return i.push(m),m}function h(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(wt({},p.state,{scroll:kd()}),"")}}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:l,listen:c,destroy:f}}function Vv(n,e,t,s=!1,r=!1){return{back:n,current:e,forward:t,replaced:s,position:window.history.length,scroll:r?kd():null}}function px(n){const{history:e,location:t}=window,s={value:ME(n,t)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,h){const f=n.indexOf("#"),p=f>-1?(t.host&&document.querySelector("base")?n:n.slice(f))+l:dx()+n+l;try{e[h?"replaceState":"pushState"](c,"",p),r.value=c}catch(m){console.error(m),t[h?"replace":"assign"](p)}}function o(l,c){i(l,wt({},e.state,Vv(r.value.back,l,r.value.forward,!0),c,{position:r.value.position}),!0),s.value=l}function a(l,c){const h=wt({},r.value,e.state,{forward:l,scroll:kd()});i(h.current,h,!0),i(l,wt({},Vv(s.value,l,null),{position:h.position+1},c),!1),s.value=l}return{location:s,state:r,push:a,replace:o}}function gx(n){n=XR(n);const e=px(n),t=fx(n,e.state,e.location,e.replace);function s(i,o=!0){o||t.pauseListeners(),history.go(i)}const r=wt({location:"",base:n,go:s,createHref:ex.bind(null,n)},e,t);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function mx(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),gx(n)}let Eo=(function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.Group=2]="Group",n})({});var En=(function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.ParamRegExp=2]="ParamRegExp",n[n.ParamRegExpEnd=3]="ParamRegExpEnd",n[n.EscapeNext=4]="EscapeNext",n})(En||{});const yx={type:Eo.Static,value:""},vx=/[a-zA-Z0-9_]/;function Ax(n){if(!n)return[[]];if(n==="/")return[[yx]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(m){throw new Error(`ERR (${t})/"${c}": ${m}`)}let t=En.Static,s=t;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,c="",h="";function f(){c&&(t===En.Static?i.push({type:Eo.Static,value:c}):t===En.Param||t===En.ParamRegExp||t===En.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Eo.Param,value:c,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function p(){c+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==En.ParamRegExp){s=t,t=En.EscapeNext;continue}switch(t){case En.Static:l==="/"?(c&&f(),o()):l===":"?(f(),t=En.Param):p();break;case En.EscapeNext:p(),t=s;break;case En.Param:l==="("?t=En.ParamRegExp:vx.test(l)?p():(f(),t=En.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case En.ParamRegExp:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:t=En.ParamRegExpEnd:h+=l;break;case En.ParamRegExpEnd:f(),t=En.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return t===En.ParamRegExp&&e(`Unfinished custom RegExp for param "${c}"`),f(),o(),r}const $v="[^/]+?",wx={sensitive:!1,strict:!1,start:!0,end:!0};var rs=(function(n){return n[n._multiplier=10]="_multiplier",n[n.Root=90]="Root",n[n.Segment=40]="Segment",n[n.SubSegment=30]="SubSegment",n[n.Static=40]="Static",n[n.Dynamic=20]="Dynamic",n[n.BonusCustomRegExp=10]="BonusCustomRegExp",n[n.BonusWildcard=-50]="BonusWildcard",n[n.BonusRepeatable=-20]="BonusRepeatable",n[n.BonusOptional=-8]="BonusOptional",n[n.BonusStrict=.7000000000000001]="BonusStrict",n[n.BonusCaseSensitive=.25]="BonusCaseSensitive",n})(rs||{});const _x=/[.+*?^${}()[\]/\\]/g;function Ex(n,e){const t=wt({},wx,e),s=[];let r=t.start?"^":"";const i=[];for(const c of n){const h=c.length?[]:[rs.Root];t.strict&&!c.length&&(r+="/");for(let f=0;f<c.length;f++){const p=c[f];let m=rs.Segment+(t.sensitive?rs.BonusCaseSensitive:0);if(p.type===Eo.Static)f||(r+="/"),r+=p.value.replace(_x,"\\$&"),m+=rs.Static;else if(p.type===Eo.Param){const{value:_,repeatable:v,optional:A,regexp:w}=p;i.push({name:_,repeatable:v,optional:A});const T=w||$v;if(T!==$v){m+=rs.BonusCustomRegExp;try{`${T}`}catch(U){throw new Error(`Invalid custom RegExp for param "${_}" (${T}): `+U.message)}}let P=v?`((?:${T})(?:/(?:${T}))*)`:`(${T})`;f||(P=A&&c.length<2?`(?:/${P})`:"/"+P),A&&(P+="?"),r+=P,m+=rs.Dynamic,A&&(m+=rs.BonusOptional),v&&(m+=rs.BonusRepeatable),T===".*"&&(m+=rs.BonusWildcard)}h.push(m)}s.push(h)}if(t.strict&&t.end){const c=s.length-1;s[c][s[c].length-1]+=rs.BonusStrict}t.strict||(r+="/?"),t.end?r+="$":t.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,t.sensitive?"":"i");function a(c){const h=c.match(o),f={};if(!h)return null;for(let p=1;p<h.length;p++){const m=h[p]||"",_=i[p-1];f[_.name]=m&&_.repeatable?m.split("/"):m}return f}function l(c){let h="",f=!1;for(const p of n){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const m of p)if(m.type===Eo.Static)h+=m.value;else if(m.type===Eo.Param){const{value:_,repeatable:v,optional:A}=m,w=_ in c?c[_]:"";if(nr(w)&&!v)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const T=nr(w)?w.join("/"):w;if(!T)if(A)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${_}"`);h+=T}}return h||"/"}return{re:o,score:s,keys:i,parse:a,stringify:l}}function bx(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=e[t]-n[t];if(s)return s;t++}return n.length<e.length?n.length===1&&n[0]===rs.Static+rs.Segment?-1:1:n.length>e.length?e.length===1&&e[0]===rs.Static+rs.Segment?1:-1:0}function FE(n,e){let t=0;const s=n.score,r=e.score;for(;t<s.length&&t<r.length;){const i=bx(s[t],r[t]);if(i)return i;t++}if(Math.abs(r.length-s.length)===1){if(Hv(s))return 1;if(Hv(r))return-1}return r.length-s.length}function Hv(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const Ix={strict:!1,end:!0,sensitive:!1};function Cx(n,e,t){const s=Ex(Ax(n.path),t),r=wt(s,{record:n,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function Tx(n,e){const t=[],s=new Map;e=Ov(Ix,e);function r(f){return s.get(f)}function i(f,p,m){const _=!m,v=Qv(f);v.aliasOf=m&&m.record;const A=Ov(e,f),w=[v];if("alias"in f){const U=typeof f.alias=="string"?[f.alias]:f.alias;for(const W of U)w.push(Qv(wt({},v,{components:m?m.record.components:v.components,path:W,aliasOf:m?m.record:v})))}let T,P;for(const U of w){const{path:W}=U;if(p&&W[0]!=="/"){const q=p.record.path,x=q[q.length-1]==="/"?"":"/";U.path=p.record.path+(W&&x+W)}if(T=Cx(U,p,A),m?m.alias.push(T):(P=P||T,P!==T&&P.alias.push(T),_&&f.name&&!jv(T)&&o(f.name)),UE(T)&&l(T),v.children){const q=v.children;for(let x=0;x<q.length;x++)i(q[x],T,m&&m.children[x])}m=m||T}return P?()=>{o(P)}:Gl}function o(f){if(LE(f)){const p=s.get(f);p&&(s.delete(f),t.splice(t.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=t.indexOf(f);p>-1&&(t.splice(p,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return t}function l(f){const p=Rx(f,t);t.splice(p,0,f),f.record.name&&!jv(f)&&s.set(f.record.name,f)}function c(f,p){let m,_={},v,A;if("name"in f&&f.name){if(m=s.get(f.name),!m)throw Ba(Yt.MATCHER_NOT_FOUND,{location:f});A=m.record.name,_=wt(Gv(p.params,m.keys.filter(P=>!P.optional).concat(m.parent?m.parent.keys.filter(P=>P.optional):[]).map(P=>P.name)),f.params&&Gv(f.params,m.keys.map(P=>P.name))),v=m.stringify(_)}else if(f.path!=null)v=f.path,m=t.find(P=>P.re.test(v)),m&&(_=m.parse(v),A=m.record.name);else{if(m=p.name?s.get(p.name):t.find(P=>P.re.test(p.path)),!m)throw Ba(Yt.MATCHER_NOT_FOUND,{location:f,currentLocation:p});A=m.record.name,_=wt({},p.params,f.params),v=m.stringify(_)}const w=[];let T=m;for(;T;)w.unshift(T.record),T=T.parent;return{name:A,path:v,params:_,matched:w,meta:Px(w)}}n.forEach(f=>i(f));function h(){t.length=0,s.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:r}}function Gv(n,e){const t={};for(const s of e)s in n&&(t[s]=n[s]);return t}function Qv(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:Sx(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Sx(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const s in n.components)e[s]=typeof t=="object"?t[s]:t;return e}function jv(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function Px(n){return n.reduce((e,t)=>wt(e,t.meta),{})}function Rx(n,e){let t=0,s=e.length;for(;t!==s;){const i=t+s>>1;FE(n,e[i])<0?s=i:t=i+1}const r=xx(n);return r&&(s=e.lastIndexOf(r,s-1)),s}function xx(n){let e=n;for(;e=e.parent;)if(UE(e)&&FE(n,e)===0)return e}function UE({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function zv(n){const e=er(Nd),t=er(rm),s=de(()=>{const l=Oe(n.to);return e.resolve(l)}),r=de(()=>{const{matched:l}=s.value,{length:c}=l,h=l[c-1],f=t.matched;if(!h||!f.length)return-1;const p=f.findIndex(La.bind(null,h));if(p>-1)return p;const m=Wv(l[c-2]);return c>1&&Wv(h)===m&&f[f.length-1].path!==m?f.findIndex(La.bind(null,l[c-2])):p}),i=de(()=>r.value>-1&&Lx(t.params,s.value.params)),o=de(()=>r.value>-1&&r.value===t.matched.length-1&&OE(t.params,s.value.params));function a(l={}){if(Ox(l)){const c=e[Oe(n.replace)?"replace":"push"](Oe(n.to)).catch(Gl);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:de(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function kx(n){return n.length===1?n[0]:n}const Nx=K_({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:zv,setup(n,{slots:e}){const t=Pc(zv(n)),{options:s}=er(Nd),r=de(()=>({[Kv(n.activeClass,s.linkActiveClass,"router-link-active")]:t.isActive,[Kv(n.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const i=e.default&&kx(e.default(t));return n.custom?i:nm("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:r.value},i)}}}),Dx=Nx;function Ox(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function Lx(n,e){for(const t in e){const s=e[t],r=n[t];if(typeof s=="string"){if(s!==r)return!1}else if(!nr(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Wv(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const Kv=(n,e,t)=>n??e??t,Bx=K_({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const s=er($p),r=de(()=>n.route||s.value),i=er(Uv,0),o=de(()=>{let c=Oe(i);const{matched:h}=r.value;let f;for(;(f=h[c])&&!f.components;)c++;return c}),a=de(()=>r.value.matched[o.value]);uh(Uv,de(()=>o.value+1)),uh(ux,a),uh($p,r);const l=$();return Wr(()=>[l.value,a.value,n.name],([c,h,f],[p,m,_])=>{h&&(h.instances[f]=c,m&&m!==h&&c&&c===p&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),c&&h&&(!m||!La(h,m)||!p)&&(h.enterCallbacks[f]||[]).forEach(v=>v(c))},{flush:"post"}),()=>{const c=r.value,h=n.name,f=a.value,p=f&&f.components[h];if(!p)return qv(t.default,{Component:p,route:c});const m=f.props[h],_=m?m===!0?c.params:typeof m=="function"?m(c):m:null,A=nm(p,wt({},_,e,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(f.instances[h]=null)},ref:l}));return qv(t.default,{Component:A,route:c})||A}}});function qv(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const Mx=Bx;function Fx(n){const e=Tx(n.routes,n),t=n.parseQuery||lx,s=n.stringifyQuery||Fv,r=n.history,i=Il(),o=Il(),a=Il(),l=NS(Ai);let c=Ai;aa&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Uf.bind(null,Z=>""+Z),f=Uf.bind(null,jR),p=Uf.bind(null,oc);function m(Z,pe){let ue,we;return LE(Z)?(ue=e.getRecordMatcher(Z),we=pe):we=Z,e.addRoute(we,ue)}function _(Z){const pe=e.getRecordMatcher(Z);pe&&e.removeRoute(pe)}function v(){return e.getRoutes().map(Z=>Z.record)}function A(Z){return!!e.getRecordMatcher(Z)}function w(Z,pe){if(pe=wt({},pe||l.value),typeof Z=="string"){const G=Vf(t,Z,pe.path),te=e.resolve({path:G.path},pe),j=r.createHref(G.fullPath);return wt(G,te,{params:p(te.params),hash:oc(G.hash),redirectedFrom:void 0,href:j})}let ue;if(Z.path!=null)ue=wt({},Z,{path:Vf(t,Z.path,pe.path).path});else{const G=wt({},Z.params);for(const te in G)G[te]==null&&delete G[te];ue=wt({},Z,{params:f(G)}),pe.params=f(pe.params)}const we=e.resolve(ue,pe),Qe=Z.hash||"";we.params=h(p(we.params));const O=KR(s,wt({},Z,{hash:HR(Qe),path:we.path})),L=r.createHref(O);return wt({fullPath:O,hash:Qe,query:s===Fv?cx(Z.query):Z.query||{}},we,{redirectedFrom:void 0,href:L})}function T(Z){return typeof Z=="string"?Vf(t,Z,l.value.path):wt({},Z)}function P(Z,pe){if(c!==Z)return Ba(Yt.NAVIGATION_CANCELLED,{from:pe,to:Z})}function U(Z){return x(Z)}function W(Z){return U(wt(T(Z),{replace:!0}))}function q(Z,pe){const ue=Z.matched[Z.matched.length-1];if(ue&&ue.redirect){const{redirect:we}=ue;let Qe=typeof we=="function"?we(Z,pe):we;return typeof Qe=="string"&&(Qe=Qe.includes("?")||Qe.includes("#")?Qe=T(Qe):{path:Qe},Qe.params={}),wt({query:Z.query,hash:Z.hash,params:Qe.path!=null?{}:Z.params},Qe)}}function x(Z,pe){const ue=c=w(Z),we=l.value,Qe=Z.state,O=Z.force,L=Z.replace===!0,G=q(ue,we);if(G)return x(wt(T(G),{state:typeof G=="object"?wt({},Qe,G.state):Qe,force:O,replace:L}),pe||ue);const te=ue;te.redirectedFrom=pe;let j;return!O&&qR(s,we,ue)&&(j=Ba(Yt.NAVIGATION_DUPLICATED,{to:te,from:we}),Te(we,we,!0,!1)),(j?Promise.resolve(j):C(te,we)).catch(F=>kr(F)?kr(F,Yt.NAVIGATION_GUARD_REDIRECT)?F:ke(F):z(F,te,we)).then(F=>{if(F){if(kr(F,Yt.NAVIGATION_GUARD_REDIRECT))return x(wt({replace:L},T(F.to),{state:typeof F.to=="object"?wt({},Qe,F.to.state):Qe,force:O}),pe||te)}else F=N(te,we,!0,L,Qe);return b(te,we,F),F})}function I(Z,pe){const ue=P(Z,pe);return ue?Promise.reject(ue):Promise.resolve()}function S(Z){const pe=ft.values().next().value;return pe&&typeof pe.runWithContext=="function"?pe.runWithContext(Z):Z()}function C(Z,pe){let ue;const[we,Qe,O]=hx(Z,pe);ue=Hf(we.reverse(),"beforeRouteLeave",Z,pe);for(const G of we)G.leaveGuards.forEach(te=>{ue.push(Pi(te,Z,pe))});const L=I.bind(null,Z,pe);return ue.push(L),yt(ue).then(()=>{ue=[];for(const G of i.list())ue.push(Pi(G,Z,pe));return ue.push(L),yt(ue)}).then(()=>{ue=Hf(Qe,"beforeRouteUpdate",Z,pe);for(const G of Qe)G.updateGuards.forEach(te=>{ue.push(Pi(te,Z,pe))});return ue.push(L),yt(ue)}).then(()=>{ue=[];for(const G of O)if(G.beforeEnter)if(nr(G.beforeEnter))for(const te of G.beforeEnter)ue.push(Pi(te,Z,pe));else ue.push(Pi(G.beforeEnter,Z,pe));return ue.push(L),yt(ue)}).then(()=>(Z.matched.forEach(G=>G.enterCallbacks={}),ue=Hf(O,"beforeRouteEnter",Z,pe,S),ue.push(L),yt(ue))).then(()=>{ue=[];for(const G of o.list())ue.push(Pi(G,Z,pe));return ue.push(L),yt(ue)}).catch(G=>kr(G,Yt.NAVIGATION_CANCELLED)?G:Promise.reject(G))}function b(Z,pe,ue){a.list().forEach(we=>S(()=>we(Z,pe,ue)))}function N(Z,pe,ue,we,Qe){const O=P(Z,pe);if(O)return O;const L=pe===Ai,G=aa?history.state:{};ue&&(we||L?r.replace(Z.fullPath,wt({scroll:L&&G&&G.scroll},Qe)):r.push(Z.fullPath,Qe)),l.value=Z,Te(Z,pe,ue,L),ke()}let k;function Se(){k||(k=r.listen((Z,pe,ue)=>{if(!pt.listening)return;const we=w(Z),Qe=q(we,pt.currentRoute.value);if(Qe){x(wt(Qe,{replace:!0,force:!0}),we).catch(Gl);return}c=we;const O=l.value;aa&&sx(Mv(O.fullPath,ue.delta),kd()),C(we,O).catch(L=>kr(L,Yt.NAVIGATION_ABORTED|Yt.NAVIGATION_CANCELLED)?L:kr(L,Yt.NAVIGATION_GUARD_REDIRECT)?(x(wt(T(L.to),{force:!0}),we).then(G=>{kr(G,Yt.NAVIGATION_ABORTED|Yt.NAVIGATION_DUPLICATED)&&!ue.delta&&ue.type===Up.pop&&r.go(-1,!1)}).catch(Gl),Promise.reject()):(ue.delta&&r.go(-ue.delta,!1),z(L,we,O))).then(L=>{L=L||N(we,O,!1),L&&(ue.delta&&!kr(L,Yt.NAVIGATION_CANCELLED)?r.go(-ue.delta,!1):ue.type===Up.pop&&kr(L,Yt.NAVIGATION_ABORTED|Yt.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),b(we,O,L)}).catch(Gl)}))}let ne=Il(),V=Il(),D;function z(Z,pe,ue){ke(Z);const we=V.list();return we.length?we.forEach(Qe=>Qe(Z,pe,ue)):console.error(Z),Promise.reject(Z)}function he(){return D&&l.value!==Ai?Promise.resolve():new Promise((Z,pe)=>{ne.add([Z,pe])})}function ke(Z){return D||(D=!Z,Se(),ne.list().forEach(([pe,ue])=>Z?ue(Z):pe()),ne.reset()),Z}function Te(Z,pe,ue,we){const{scrollBehavior:Qe}=n;if(!aa||!Qe)return Promise.resolve();const O=!ue&&rx(Mv(Z.fullPath,0))||(we||!ue)&&history.state&&history.state.scroll||null;return Yg().then(()=>Qe(Z,pe,O)).then(L=>L&&nx(L)).catch(L=>z(L,Z,pe))}const Ve=Z=>r.go(Z);let ze;const ft=new Set,pt={currentRoute:l,listening:!0,addRoute:m,removeRoute:_,clearRoutes:e.clearRoutes,hasRoute:A,getRoutes:v,resolve:w,options:n,push:U,replace:W,go:Ve,back:()=>Ve(-1),forward:()=>Ve(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:V.add,isReady:he,install(Z){Z.component("RouterLink",Dx),Z.component("RouterView",Mx),Z.config.globalProperties.$router=pt,Object.defineProperty(Z.config.globalProperties,"$route",{enumerable:!0,get:()=>Oe(l)}),aa&&!ze&&l.value===Ai&&(ze=!0,U(r.location).catch(we=>{}));const pe={};for(const we in Ai)Object.defineProperty(pe,we,{get:()=>l.value[we],enumerable:!0});Z.provide(Nd,pt),Z.provide(rm,D_(pe)),Z.provide($p,l);const ue=Z.unmount;ft.add(Z),Z.unmount=function(){ft.delete(Z),ft.size<1&&(c=Ai,k&&k(),k=null,l.value=Ai,ze=!1,D=!1),ue()}}};function yt(Z){return Z.reduce((pe,ue)=>pe.then(()=>S(ue)),Promise.resolve())}return pt}function Cn(){return er(Nd)}function VE(n){return er(rm)}const Ux="modulepreload",Vx=function(n){return"/tdl/"+n},Jv={},ph=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){let l=function(c){return Promise.all(c.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");r=l(t.map(c=>{if(c=Vx(c),c in Jv)return;Jv[c]=!0;const h=c.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":Ux,h||(p.as="script"),p.crossOrigin="",p.href=c,a&&p.setAttribute("nonce",a),document.head.appendChild(p),h)return new Promise((m,_)=>{p.addEventListener("load",m),p.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},Zr=()=>JSON.parse(localStorage.getItem("users")||"[]"),At=()=>{const n=localStorage.getItem("currentUser");if(n)try{return JSON.parse(n)}catch(t){console.error("localStorage    :",t)}const e=sessionStorage.getItem("currentUser");if(e)try{return JSON.parse(e)}catch(t){console.error("sessionStorage    :",t)}return null},im=n=>Zr().find(t=>t.id===n||t.walletAddress===n),$E=n=>{const e=Zr(),t=im(n);if(t)return t;const r=(o=>{const a=o.toString().split("").reduce((f,p)=>(f<<5)-f+p.charCodeAt(0),0),l="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let c="",h=Math.abs(a);for(let f=0;f<6;f++)c+=l[h%l.length],h=Math.floor(h/l.length);return c})(n),i={id:n,walletAddress:n,loginType:"wallet",inviteCode:r,createdAt:new Date().toISOString(),referrals:[],gameData:{level:1,coins:0,totalCoin:0,catFragments:50,nftCount:0,miningLevel:1,huntingLevel:1,explorationLevel:1,productionLevel:1,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}};return e.push(i),localStorage.setItem("users",JSON.stringify(e)),i},ac=async(n,e)=>{const t=At(),s=Zr(),r=s.findIndex(i=>i.id===n);return r!==-1?(s[r].gameData={...s[r].gameData,...e},localStorage.setItem("users",JSON.stringify(s)),t&&t.id===n&&(t.gameData={...t.gameData,...e},sessionStorage.setItem("currentUser",JSON.stringify(t))),!0):!1},HE=()=>{sessionStorage.removeItem("currentUser")},GE=()=>{const n=localStorage.getItem("appLanguage");return!n||n===""?(localStorage.setItem("appLanguage","English"),"English"):n},Cs=()=>{const n=GE();return{ko:{home:"",game:"",exchange:"",quest:"",inventory:"",factory:"",mining:"",hunting:"",exploration:"",production:"",back:" ",settings:"",notification:"",login:"",signup:"",email:"",password:"",loginButton:"",signupButton:"",walletConnect:" ",createCat:" ",catFragments:" ",coin:"",point:"",energy:"",level:"",complete:"",confirm:"",cancel:"",close:"",success:"",error:"",loading:" ...",insufficient:"",required:"",optional:"",daily:"",weekly:"",monthly:"",quest:"",reward:"",receive:"",received:"",inProgress:" ",completed:"",buy:"",sell:"",shop:"",profile:"",attendance:"",nft:"NFT",inventory:"",factory:"",exchange:"",settings:"",logout:"",language:"",sound:"",vibration:"",totalPoints:" ",totalCoins:" ",createCatSuccess:"  !",newCatAdded:"   !",enterEmail:" ",enterPassword:" ",enterAllFields:"  ",loginError:"   ",invalidCredentials:"    ",walletNotInstalled:"MetaMask   ",installMetaMask:"MetaMask ?",walletConnectFailed:"  ",walletConnectError:"    ",insufficientCoins:" ",insufficientFragments:"  ",insufficientPoints:" ",insufficientEnergy:" ",purchaseSuccess:" !",purchaseFailed:" ",tradeSuccess:" !",tradeFailed:" ",createSuccess:" !",createFailed:" ",rewardReceived:" ",alreadyReceived:"  ",questNotCompleted:"  ",loginRequired:" ",copySuccess:"",saveSuccess:"",saveFailed:" ",common:"",rare:"",epic:"",legendary:"",stars:"",stats:"",exp:"",maxExp:" ",levelUp:"",levelUpCost:" ",select:"",selected:"",filter:"",sort:"",search:"",newest:"",oldest:"",byLevel:"",byStars:"",byRarity:"",byName:"",all:"",miningEfficiency:" ",huntingDamage:" ",explorationReward:" ",productionSpeed:" ",strength:"",health:"",intelligence:"",dexterity:"",courage:"",luck:"",earned:"",pointsEarned:"point !",fragmentsEarned:" ",fragmentsEarnedCount:" !",miningComplete:" !",huntingComplete:" !",explorationComplete:" !",productionComplete:" !",miningCatList:"  ",huntingCatList:"  ",explorationCatList:"  ",productionCatList:"  ",levelUp:"!",progress:"",miningProgress:" ",huntingProgress:" ",explorationProgress:" ",productionProgress:" ",miningSuccess:" !",oreFound:" !",moneyEarned:"!",digMore:" !",monsterKilled:" !",expEarned:" !",goldEarned:" !",newAreaFound:"  !",treasureFound:" !",adventureSuccess:" !",mysteriousDiscovery:" !",craftComplete:" !",itemCreated:" !",skillImproved:" !",perfectWork:" !",success:"!",good:"!",complete:"!",amazing:"!",selectCat:" ",removeCat:" ",ownedPoints:" ",ownedCoins:" ",exchangeRate:"",buyCoinAmount:"  ",sellCoinAmount:"  ",requiredPoints:" ",pointsToReceive:" ",buyButton:"",sellButton:"",exampleAmount:": 1",coinBuy:"Coin ",coinSell:"Coin ",pointUsed:" ",pointReceived:" ",inProgress:"",completed:"",receive:"",rewardReceived:"  !",earnedReward:" .",emptyInventory:"Inventory is empty",totalItems:"Total",items:"items",searchAndFilter:"Search & Filter",searchPlaceholder:"Search by NFT name or ID...",starRating:"Star Rating",levelFilter:"Level",rarityFilter:"Rarity",sortBy:"Sort By",stars:"Stars",levelHighToLow:"Level (High to Low)",starsHighToLow:"Stars (High to Low)",rarityHighToLow:"Rarity (High to Low)",nameOrder:"Name Order",reset:"Reset",apply:"Apply",stats:"Stats",imageId:"Image ID",createdAt:"Created At",levelUpButton:"Level Up",selectButton:"Select",doubleClickDetail:"Double-click for details",noNFTs:"No NFTs",createCatInFactory:"Create cats in the Factory!",selectedCharacter:"Selected Character",cat:"Cat",userSettings:" ",walletConnection:" ",connected:"",address:"",balance:"",depositFromWallet:" ",disconnect:" ",walletNotConnected:"  ",walletConnectDesc:"NFT    ",connecting:" ...",attendance:"",doAttendanceCheck:" ",selectDepositMethod:"  ",selectExchangeToDeposit:"  ",goToPhantomWallet:"  ",goToUpbitExchange:"  ",copyWalletAddressAndDeposit:"    ",copyWalletAddress:"  ",walletConnected:" !",disconnectWalletConfirm:"  ?",walletAddressCopied:"  !",copyFailed:" ",refreshBalance:" ",alreadyCheckedIn:"   !",checkInComplete:" !",wallet:"",energy100:" 100",energy500:" 500",energy1000:" 1000",energy2000:" 2000",energyRecover:"",energyRecovered:"",purchaseComplete:" !",currentEnergy:"",loginRequired:" .",insufficientPoints:" .",insufficientCoins:" .",purchaseFailed:" .  .",buy:"",back:" ",mining:"",miningLevel:" ",miningStart:" ",miningInProgress:" ...",ownedResources:" ",stone:"",iron:"",gold:"",diamond:"",hunting:"",playerInfo:" ",health:"",attack:"",exp:"",monsterSelection:" ",huntingStart:" ",huntingInProgress:" ...",exploration:"",explorationLevel:" ",explorationArea:" ",undiscovered:"",exploring:" ",explorationStart:" ",explorationInProgress:" ...",explorationRewards:" ",production:"",productionLevel:" ",materialInventory:" ",recipe:" ",productionStart:" ",productionInProgress:" ...",notification:"",markAllRead:" ",noNotifications:" .",attendance:"",attendanceCheck:"",day:"Day",attendanceComplete:" !",pointsEarned:" !",alreadyCheckedToday:"   !   .",alreadyChecked:"  .",nextOrderOnly:"   .",marketplace:"",inviteFriends:" ",inviteCode:" ",copyInviteCode:"  ",shareKakao:" ",inviteDescription:"   !",inviteReward:" ",inviteRewardDesc:" 1   100 ",newUserReward:"  : 50 ",totalInvites:" ",invites:"",codeCopied:"  !",shareSuccess:"  !",shareFailed:"  .",inviteStats:" ",shareLink:" ",copyLink:" ",linkCopied:" !",shareNative:"",myNFTs:" NFT",myListings:" ",onSale:" ",totalVolume:" ",itemsCount:"",noNFTsInWallet:"NFT ",allRarity:" ",allPrice:" ",under1000Coins:"1,000  ",midPriceRange:"1,000 - 5,000 ",over5000Coins:"5,000  ",oldest:"",priceLow:" ",priceHigh:" ",levelHigh:" ",starsHigh:"  ",price:"",buy:"",noNFTsOnSale:"  NFT ",myNFTsCount:" NFT",ownedCoins:" ",sell:"",noNFTsAvailableForSale:"  NFT ",mySalesList:"  ",salePrice:" ",cancelSale:" ",noNFTsOnSaleList:"  NFT ",confirmCancelSale:"  ?",enterValidPrice:"  .",loginRequired:" .",nftListedOnMarketplace:"NFT  !",saleCancelled:" .",insufficientCoinsForPurchase:" .",nftPurchased:"NFT !",coinsPaid:" ",sellNFT:"NFT ",starsRating:"",sellPriceLabel:"  ()",enterPrice:" ",currentOwnedCoins:"  ",cancel:"",registerSale:" ",buyNFT:"NFT ",insufficientCoinsWarning:" !",imageId:" ID",send:"",sendFeatureComingSoon:"   .",buyFeatureComingSoon:"   .",receive:"",receiveFeatureComingSoon:"   .",searchNFT:"",searchPlaceholderNFT:"NFT   ID ...",reset:"",apply:""},en:{home:"Home",game:"Game",exchange:"Exchange",quest:"Quest",inventory:"Inventory",factory:"Factory",mining:"Mining",hunting:"Hunting",exploration:"Exploration",production:"Production",back:" Back",settings:"Settings",notification:"Notification",login:"Log in",signup:"Sign Up",email:"Email",password:"Password",loginButton:"Log in",signupButton:"Sign Up",walletConnect:"Connect Wallet",createCat:"Create Cat",catFragments:"Cat Fragments",coin:"Coin",point:"Point",energy:"Energy",level:"Level",complete:"Complete",confirm:"Confirm",cancel:"Cancel",close:"Close",success:"Success",error:"Error",loading:"Loading...",insufficient:"Insufficient",required:"Required",optional:"Optional",daily:"Daily",weekly:"Weekly",monthly:"Monthly",quest:"Quest",reward:"Reward",receive:"Receive",received:"Received",inProgress:"In Progress",completed:"Completed",buy:"Buy",sell:"Sell",shop:"Shop",profile:"Profile",attendance:"Attendance",nft:"NFT",inventory:"Inventory",factory:"Factory",exchange:"Exchange",settings:"Settings",logout:"Logout",language:"Language",sound:"Sound",vibration:"Vibration",totalPoints:"Total Points",totalCoins:"Total Coins",createCatSuccess:"Cat Created Successfully!",newCatAdded:"A new cat has been added to your inventory!",enterEmail:"Please enter your email",enterPassword:"Please enter your password",enterAllFields:"Please enter all fields",loginError:"An error occurred during login",invalidCredentials:"Email or password is incorrect",walletNotInstalled:"MetaMask is not installed",installMetaMask:"Would you like to install MetaMask?",walletConnectFailed:"Failed to connect wallet",walletConnectError:"An error occurred while connecting wallet",insufficientCoins:"Insufficient coins",insufficientFragments:"Insufficient cat fragments",insufficientPoints:"Insufficient points",insufficientEnergy:"Insufficient energy",purchaseSuccess:"Purchase successful!",purchaseFailed:"Purchase failed",tradeSuccess:"Trade successful!",tradeFailed:"Trade failed",createSuccess:"Creation successful!",createFailed:"Creation failed",rewardReceived:"Reward received",alreadyReceived:"Reward already received",questNotCompleted:"Quest not completed",loginRequired:"Login required",copySuccess:"Copied successfully",saveSuccess:"Saved successfully",saveFailed:"Failed to save",common:"Common",rare:"Rare",epic:"Epic",legendary:"Legendary",stars:"Stars",stats:"Stats",exp:"EXP",maxExp:"Max EXP",levelUp:"Level Up",levelUpCost:"Level Up Cost",select:"Select",selected:"Selected",filter:"Filter",sort:"Sort",search:"Search",newest:"Newest",oldest:"Oldest",byLevel:"By Level",byStars:"By Stars",byRarity:"By Rarity",byName:"By Name",all:"All",miningEfficiency:"Mining Efficiency",huntingDamage:"Hunting Damage",explorationReward:"Exploration Reward",productionSpeed:"Production Speed",strength:"Strength",health:"Health",intelligence:"Intelligence",dexterity:"Dexterity",courage:"Courage",luck:"Luck",earned:"Earned",pointsEarned:"points earned!",fragmentsEarned:"Cat Fragments",fragmentsEarnedCount:"earned!",miningComplete:"Mining Complete!",huntingComplete:"Hunting Complete!",explorationComplete:"Exploration Complete!",productionComplete:"Production Complete!",miningCatList:"Mining Cats",huntingCatList:"Hunting Cats",explorationCatList:"Exploration Cats",productionCatList:"Production Cats",levelUp:"Level Up!",progress:"Progress",miningProgress:"Mining Progress",huntingProgress:"Hunting Progress",explorationProgress:"Exploration Progress",productionProgress:"Production Progress",miningSuccess:"Mining Success!",oreFound:"Ore Found!",moneyEarned:"Money Earned!",digMore:"Dig More!",monsterKilled:"Monster Killed!",expEarned:"EXP Earned!",goldEarned:"Gold Earned!",newAreaFound:"New Area Found!",treasureFound:"Treasure Found!",adventureSuccess:"Adventure Success!",mysteriousDiscovery:"Mysterious Discovery!",craftComplete:"Craft Complete!",itemCreated:"Item Created!",skillImproved:"Skill Improved!",perfectWork:"Perfect Work!",success:"Success!",good:"Good!",complete:"Complete!",amazing:"Amazing!",selectCat:"Select Cat",removeCat:"Remove Cat",ownedPoints:"Owned Points",ownedCoins:"Owned Coins",exchangeRate:"Exchange Rate",buyCoinAmount:"Amount of Coins to Buy",sellCoinAmount:"Amount of Coins to Sell",requiredPoints:"Required Points",pointsToReceive:"Points to Receive",buyButton:"Buy",sellButton:"Sell",exampleAmount:"Ex: 1",coinBuy:"Buy Coin",coinSell:"Sell Coin",pointUsed:"Points Used",pointReceived:"Points Received",inProgress:"In Progress",completed:"Completed",receive:"Claim Reward",rewardReceived:"Reward Received!",earnedReward:"earned.",emptyInventory:"Inventory is empty",totalItems:"Total",items:"items",searchAndFilter:"Search & Filter",searchPlaceholder:"Search by NFT name or ID...",starRating:"Star Rating",levelFilter:"Level",rarityFilter:"Rarity",sortBy:"Sort By",stars:"Stars",levelHighToLow:"Level (High to Low)",starsHighToLow:"Stars (High to Low)",rarityHighToLow:"Rarity (High to Low)",nameOrder:"Name Order",reset:"Reset",apply:"Apply",stats:"Stats",imageId:"Image ID",createdAt:"Created At",levelUpButton:"Level Up",selectButton:"Select",doubleClickDetail:"Double-click for details",noNFTs:"No NFTs",createCatInFactory:"Create cats in the Factory!",selectedCharacter:"Selected Character",cat:"Cat",userSettings:"User Settings",walletConnection:"Wallet Connection",connected:"Connected",address:"Address",balance:"Balance",depositFromWallet:"Deposit from Wallet",disconnect:"Disconnect",walletNotConnected:"Wallet is not connected",walletConnectDesc:"Please connect your wallet to enjoy NFT games",connecting:"Connecting...",attendance:"Attendance Check",doAttendanceCheck:"Do Attendance Check",selectDepositMethod:"Select Deposit Method",selectExchangeToDeposit:"Please select an exchange to deposit",goToPhantomWallet:"Go to Phantom Wallet",goToUpbitExchange:"Go to Upbit Exchange",copyWalletAddressAndDeposit:"Copy wallet address and deposit at exchange",copyWalletAddress:"Copy Wallet Address",walletConnected:"Wallet connected!",disconnectWalletConfirm:"Are you sure you want to disconnect your wallet?",walletAddressCopied:"Wallet address copied!",copyFailed:"Copy failed",refreshBalance:"Refresh Balance",alreadyCheckedIn:"You have already checked in today!",checkInComplete:"Check-in complete! You received",wallet:"Wallet",marketplace:"Marketplace",myNFTs:"My NFTs",myListings:"My Sales",onSale:"On Sale",totalVolume:"Total Volume",itemsCount:"items",noNFTsInWallet:"No NFTs",allRarity:"All Rarity",allPrice:"All Price",under1000Coins:"Under 1,000 Coins",midPriceRange:"1,000 - 5,000 Coins",over5000Coins:"Over 5,000 Coins",oldest:"Oldest",priceLow:"Price Low",priceHigh:"Price High",levelHigh:"Level High",starsHigh:"Stars High",price:"Price",buy:"Buy",noNFTsOnSale:"No NFTs on sale",myNFTsCount:"My NFTs",ownedCoins:"Owned Coins",sell:"Sell",noNFTsAvailableForSale:"No NFTs available for sale",mySalesList:"My Sales List",salePrice:"Sale Price",cancelSale:"Cancel Sale",noNFTsOnSaleList:"No NFTs on sale",confirmCancelSale:"Are you sure you want to cancel the sale?",enterValidPrice:"Please enter a valid price.",loginRequired:"Login required.",nftListedOnMarketplace:"NFT listed on marketplace!",saleCancelled:"Sale cancelled.",insufficientCoinsForPurchase:"Insufficient coins.",nftPurchased:"NFT purchased!",coinsPaid:"coins paid",sellNFT:"Sell NFT",starsRating:"Stars",sellPriceLabel:"Sale Price (Coins)",enterPrice:"Enter price",currentOwnedCoins:"Current Owned Coins",cancel:"Cancel",registerSale:"Register Sale",buyNFT:"Buy NFT",insufficientCoinsWarning:"Insufficient coins!",imageId:"Image ID",send:"Send",sendFeatureComingSoon:"Send feature is coming soon.",buyFeatureComingSoon:"Buy feature is coming soon.",receive:"Receive",receiveFeatureComingSoon:"Receive feature is coming soon.",searchNFT:"Search",searchPlaceholderNFT:"Search by NFT name or ID...",reset:"Reset",apply:"Apply",energy100:"Energy 100",energy500:"Energy 500",energy1000:"Energy 1000",energy2000:"Energy 2000",energyRecover:"Recovers",energyRecovered:"energy recovered",purchaseComplete:"Purchase complete!",currentEnergy:"Current",loginRequired:"Login required.",insufficientPoints:"Insufficient points.",insufficientCoins:"Insufficient coins.",purchaseFailed:"Purchase failed. Please try again.",buy:"Buy",back:" Back",mining:"Mining",miningLevel:"Mining Level",miningStart:"Start Mining",miningInProgress:"Mining...",ownedResources:"Owned Resources",stone:"Stone",iron:"Iron",gold:"Gold",diamond:"Diamond",hunting:"Hunting",playerInfo:"Player Info",health:"Health",attack:"Attack",exp:"EXP",monsterSelection:"Monster Selection",huntingStart:"Start Hunting",huntingInProgress:"Hunting...",exploration:"Exploration",explorationLevel:"Exploration Level",explorationArea:"Exploration Area",undiscovered:"Undiscovered",exploring:"Exploring",explorationStart:"Start Exploration",explorationInProgress:"Exploring...",explorationRewards:"Exploration Rewards",production:"Production",productionLevel:"Production Level",materialInventory:"Material Inventory",recipe:"Recipe",productionStart:"Start Production",productionInProgress:"Producing...",notification:"Notification",markAllRead:"Mark All Read",noNotifications:"No notifications.",attendance:"Attendance",attendanceCheck:"Attendance Check",day:"Day",attendanceComplete:"Attendance complete!",pointsEarned:"points earned!",alreadyCheckedToday:"Already checked in today! Please try again tomorrow.",alreadyChecked:"Already checked.",nextOrderOnly:"Only the next order can be checked.",inviteFriends:"Invite Friends",inviteCode:"Invite Code",copyInviteCode:"Copy Invite Code",shareKakao:"Share via KakaoTalk",inviteDescription:"Invite friends and get rewards!",inviteReward:"Invite Reward",inviteRewardDesc:"100 Points per friend invited",newUserReward:"New User Reward: 50 Points",totalInvites:"Total Invites",invites:"friends",codeCopied:"Invite code copied!",shareSuccess:"Shared via KakaoTalk successfully!",shareFailed:"Failed to share via KakaoTalk.",inviteStats:"Invite Statistics",shareLink:"Share Link",copyLink:"Copy Link",linkCopied:"Link copied!",shareNative:"Share"}}[n===""?"ko":"en"]},$x=Object.freeze(Object.defineProperty({__proto__:null,createWalletUser:$E,getAllUsers:Zr,getCurrentLanguage:GE,getCurrentUser:At,getI18nTexts:Cs,getUserByWalletAddress:im,logoutUser:HE,updateUserGameData:ac},Symbol.toStringTag,{value:"Module"})),Hx="6.15.0";function Gx(n,e,t){const s=e.split("|").map(i=>i.trim());for(let i=0;i<s.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof n===e)return}const r=new Error(`invalid value for type ${e}`);throw r.code="INVALID_ARGUMENT",r.argument=`value.${t}`,r.value=n,r}async function is(n){const e=Object.keys(n);return(await Promise.all(e.map(s=>Promise.resolve(n[s])))).reduce((s,r,i)=>(s[e[i]]=r,s),{})}function Fe(n,e,t){for(let s in e){let r=e[s];const i=t?t[s]:null;i&&Gx(r,i,s),Object.defineProperty(n,s,{enumerable:!0,value:r,writable:!1})}}function fa(n,e){if(n==null)return"null";if(e==null&&(e=new Set),typeof n=="object"){if(e.has(n))return"[Circular]";e.add(n)}if(Array.isArray(n))return"[ "+n.map(t=>fa(t,e)).join(", ")+" ]";if(n instanceof Uint8Array){const t="0123456789abcdef";let s="0x";for(let r=0;r<n.length;r++)s+=t[n[r]>>4],s+=t[n[r]&15];return s}if(typeof n=="object"&&typeof n.toJSON=="function")return fa(n.toJSON(),e);switch(typeof n){case"boolean":case"number":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"string":return JSON.stringify(n);case"object":{const t=Object.keys(n);return t.sort(),"{ "+t.map(s=>`${fa(s,e)}: ${fa(n[s],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Un(n,e){return n&&n.code===e}function om(n){return Un(n,"CALL_EXCEPTION")}function Gt(n,e,t){let s=n;{const i=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${fa(t)}`);for(const o in t){if(o==="shortMessage")continue;const a=t[o];i.push(o+"="+fa(a))}}i.push(`code=${e}`),i.push(`version=${Hx}`),i.length&&(n+=" ("+i.join(", ")+")")}let r;switch(e){case"INVALID_ARGUMENT":r=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":r=new RangeError(n);break;default:r=new Error(n)}return Fe(r,{code:e}),t&&Object.assign(r,t),r.shortMessage==null&&Fe(r,{shortMessage:s}),r}function oe(n,e,t,s){if(!n)throw Gt(e,t,s)}function H(n,e,t,s){oe(n,e,"INVALID_ARGUMENT",{argument:t,value:s})}function QE(n,e,t){t==null&&(t=""),t&&(t=": "+t),oe(n>=e,"missing argument"+t,"MISSING_ARGUMENT",{count:n,expectedCount:e}),oe(n<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:n,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((n,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");n.push(e)}catch{}return n},[]);function kc(n,e,t){if(t==null&&(t=""),n!==e){let s=t,r="new";t&&(s+=".",r+=" "+t),oe(!1,`private constructor; use ${s}from* methods`,"UNSUPPORTED_OPERATION",{operation:r})}}function jE(n,e,t){if(n instanceof Uint8Array)return t?new Uint8Array(n):n;if(typeof n=="string"&&n.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const s=new Uint8Array((n.length-2)/2);let r=2;for(let i=0;i<s.length;i++)s[i]=parseInt(n.substring(r,r+2),16),r+=2;return s}H(!1,"invalid BytesLike value",e||"value",n)}function rt(n,e){return jE(n,e,!1)}function ls(n,e){return jE(n,e,!0)}function Bt(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&n.length!==2+2*e||e===!0&&n.length%2!==0)}function am(n){return Bt(n,!0)||n instanceof Uint8Array}const Yv="0123456789abcdef";function ye(n){const e=rt(n);let t="0x";for(let s=0;s<e.length;s++){const r=e[s];t+=Yv[(r&240)>>4]+Yv[r&15]}return t}function nn(n){return"0x"+n.map(e=>ye(e).substring(2)).join("")}function Ea(n){return Bt(n,!0)?(n.length-2)/2:rt(n).length}function Xt(n,e,t){const s=rt(n);return t!=null&&t>s.length&&oe(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:s,length:s.length,offset:t}),ye(s.slice(e??0,t??s.length))}function zE(n,e,t){const s=rt(n);oe(e>=s.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(s),length:e,offset:e+1});const r=new Uint8Array(e);return r.fill(0),t?r.set(s,e-s.length):r.set(s,0),ye(r)}function ei(n,e){return zE(n,e,!0)}function Qx(n,e){return zE(n,e,!1)}const Dd=BigInt(0),Ys=BigInt(1),pa=9007199254740991;function $h(n,e){const t=Od(n,"value"),s=BigInt(tt(e,"width"));if(oe(t>>s===Dd,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:n}),t>>s-Ys){const r=(Ys<<s)-Ys;return-((~t&r)+Ys)}return t}function WE(n,e){let t=Ie(n,"value");const s=BigInt(tt(e,"width")),r=Ys<<s-Ys;if(t<Dd){t=-t,oe(t<=r,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});const i=(Ys<<s)-Ys;return(~t&i)+Ys}else oe(t<r,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});return t}function bo(n,e){const t=Od(n,"value"),s=BigInt(tt(e,"bits"));return t&(Ys<<s)-Ys}function Ie(n,e){switch(typeof n){case"bigint":return n;case"number":return H(Number.isInteger(n),"underflow",e||"value",n),H(n>=-pa&&n<=pa,"overflow",e||"value",n),BigInt(n);case"string":try{if(n==="")throw new Error("empty string");return n[0]==="-"&&n[1]!=="-"?-BigInt(n.substring(1)):BigInt(n)}catch(t){H(!1,`invalid BigNumberish string: ${t.message}`,e||"value",n)}}H(!1,"invalid BigNumberish value",e||"value",n)}function Od(n,e){const t=Ie(n,e);return oe(t>=Dd,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n}),t}const Xv="0123456789abcdef";function Ld(n){if(n instanceof Uint8Array){let e="0x0";for(const t of n)e+=Xv[t>>4],e+=Xv[t&15];return BigInt(e)}return Ie(n)}function tt(n,e){switch(typeof n){case"bigint":return H(n>=-pa&&n<=pa,"overflow",e||"value",n),Number(n);case"number":return H(Number.isInteger(n),"underflow",e||"value",n),H(n>=-pa&&n<=pa,"overflow",e||"value",n),n;case"string":try{if(n==="")throw new Error("empty string");return tt(BigInt(n),e)}catch(t){H(!1,`invalid numeric string: ${t.message}`,e||"value",n)}}H(!1,"invalid numeric value",e||"value",n)}function jx(n){return tt(Ld(n))}function Qi(n,e){let s=Od(n,"value").toString(16);if(e==null)s.length%2&&(s="0"+s);else{const r=tt(e,"width");for(oe(r*2>=s.length,`value exceeds width (${r} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});s.length<r*2;)s="0"+s}return"0x"+s}function bn(n){const e=Od(n,"value");if(e===Dd)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const s=new Uint8Array(t.length/2);for(let r=0;r<s.length;r++){const i=r*2;s[r]=parseInt(t.substring(i,i+2),16)}return s}function Js(n){let e=ye(am(n)?n:bn(n)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const Zv="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const e0=BigInt(58);function zx(n){const e=rt(n);let t=Ld(e),s="";for(;t;)s=Zv[Number(t%e0)]+s,t/=e0;for(let r=0;r<e.length&&!e[r];r++)s=Zv[0]+s;return s}function Wx(n){n=atob(n);const e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return rt(e)}function Kx(n){const e=rt(n);let t="";for(let s=0;s<e.length;s++)t+=String.fromCharCode(e[s]);return btoa(t)}class KE{filter;emitter;#e;constructor(e,t,s){this.#e=t,Fe(this,{emitter:e,filter:s})}async removeListener(){this.#e!=null&&await this.emitter.off(this.filter,this.#e)}}function qx(n,e,t,s,r){H(!1,`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function qE(n,e,t,s,r){if(n==="BAD_PREFIX"||n==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)i++;return i}return n==="OVERRUN"?t.length-e-1:0}function Jx(n,e,t,s,r){return n==="OVERLONG"?(H(typeof r=="number","invalid bad code point for replacement","badCodepoint",r),s.push(r),0):(s.push(65533),qE(n,e,t))}const Yx=Object.freeze({error:qx,ignore:qE,replace:Jx});function Xx(n,e){e==null&&(e=Yx.error);const t=rt(n,"bytes"),s=[];let r=0;for(;r<t.length;){const i=t[r++];if(i>>7===0){s.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?r+=e("UNEXPECTED_CONTINUE",r-1,t,s):r+=e("BAD_PREFIX",r-1,t,s);continue}if(r-1+o>=t.length){r+=e("OVERRUN",r-1,t,s);continue}let l=i&(1<<8-o-1)-1;for(let c=0;c<o;c++){let h=t[r];if((h&192)!=128){r+=e("MISSING_CONTINUE",r,t,s),l=null;break}l=l<<6|h&63,r++}if(l!==null){if(l>1114111){r+=e("OUT_OF_RANGE",r-1-o,t,s,l);continue}if(l>=55296&&l<=57343){r+=e("UTF16_SURROGATE",r-1-o,t,s,l);continue}if(l<=a){r+=e("OVERLONG",r-1-o,t,s,l);continue}s.push(l)}}return s}function Kr(n,e){H(typeof n=="string","invalid string value","str",n);let t=[];for(let s=0;s<n.length;s++){const r=n.charCodeAt(s);if(r<128)t.push(r);else if(r<2048)t.push(r>>6|192),t.push(r&63|128);else if((r&64512)==55296){s++;const i=n.charCodeAt(s);H(s<n.length&&(i&64512)===56320,"invalid surrogate pair","str",n);const o=65536+((r&1023)<<10)+(i&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(r>>12|224),t.push(r>>6&63|128),t.push(r&63|128)}return new Uint8Array(t)}function Zx(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Hh(n,e){return Zx(Xx(n,e))}function JE(n){async function e(t,s){oe(s==null||!s.cancelled,"request cancelled before sending","CANCELLED");const r=t.url.split(":")[0].toLowerCase();oe(r==="http"||r==="https",`unsupported protocol ${r}`,"UNSUPPORTED_OPERATION",{info:{protocol:r},operation:"request"}),oe(r==="https"||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=Gt("request timeout","TIMEOUT"),o.abort()},t.timeout);s&&s.addListener(()=>{i=Gt("request cancelled","CANCELLED"),o.abort()});const l=Object.assign({},n,{method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:o.signal});let c;try{c=await fetch(t.url,l)}catch(m){throw clearTimeout(a),i||m}clearTimeout(a);const h={};c.headers.forEach((m,_)=>{h[_.toLowerCase()]=m});const f=await c.arrayBuffer(),p=f==null?null:new Uint8Array(f);return{statusCode:c.status,statusMessage:c.statusText,headers:h,body:p}}return e}const ek=12,tk=250;let t0=JE();const nk=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),sk=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Gf=!1;async function YE(n,e){try{const t=n.match(nk);if(!t)throw new Error("invalid data");return new Bi(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?Wx(t[3]):ik(t[3]))}catch{return new Bi(599,"BAD REQUEST (invalid data: URI)",{},null,new ti(n))}}function XE(n){async function e(t,s){try{const r=t.match(sk);if(!r)throw new Error("invalid link");return new ti(`${n}${r[2]}`)}catch{return new Bi(599,"BAD REQUEST (invalid IPFS URI)",{},null,new ti(t))}}return e}const zu={data:YE,ipfs:XE("https://gateway.ipfs.io/ipfs/")},ZE=new WeakMap;class rk{#e;#t;constructor(e){this.#e=[],this.#t=!1,ZE.set(e,()=>{if(!this.#t){this.#t=!0;for(const t of this.#e)setTimeout(()=>{t()},0);this.#e=[]}})}addListener(e){oe(!this.#t,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#e.push(e)}get cancelled(){return this.#t}checkSignal(){oe(!this.cancelled,"cancelled","CANCELLED",{})}}function Wu(n){if(n==null)throw new Error("missing signal; should not happen");return n.checkSignal(),n}class ti{#e;#t;#n;#s;#r;#o;#i;#a;#h;#c;#p;#g;#l;#u;#d;get url(){return this.#o}set url(e){this.#o=String(e)}get body(){return this.#i==null?null:new Uint8Array(this.#i)}set body(e){if(e==null)this.#i=void 0,this.#a=void 0;else if(typeof e=="string")this.#i=Kr(e),this.#a="text/plain";else if(e instanceof Uint8Array)this.#i=e,this.#a="application/octet-stream";else if(typeof e=="object")this.#i=Kr(JSON.stringify(e)),this.#a="application/json";else throw new Error("invalid body")}hasBody(){return this.#i!=null}get method(){return this.#s?this.#s:this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),this.#s=String(e).toUpperCase()}get headers(){const e=Object.assign({},this.#n);return this.#h&&(e.authorization=`Basic ${Kx(Kr(this.#h))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&this.#a&&(e["content-type"]=this.#a),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){this.#n[String(e).toLowerCase()]=String(t)}clearHeaders(){this.#n={}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let s=0;return{next:()=>{if(s<t.length){const r=t[s++];return{value:[r,e[r]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#h||null}setCredentials(e,t){H(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#h=`${e}:${t}`}get allowGzip(){return this.#t}set allowGzip(e){this.#t=!!e}get allowInsecureAuthentication(){return!!this.#e}set allowInsecureAuthentication(e){this.#e=!!e}get timeout(){return this.#r}set timeout(e){H(e>=0,"timeout must be non-zero","timeout",e),this.#r=e}get preflightFunc(){return this.#c||null}set preflightFunc(e){this.#c=e}get processFunc(){return this.#p||null}set processFunc(e){this.#p=e}get retryFunc(){return this.#g||null}set retryFunc(e){this.#g=e}get getUrlFunc(){return this.#d||t0}set getUrlFunc(e){this.#d=e}constructor(e){this.#o=String(e),this.#e=!1,this.#t=!0,this.#n={},this.#s="",this.#r=3e5,this.#u={slotInterval:tk,maxAttempts:ek},this.#d=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#i?ye(this.#i):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(this.#u.slotInterval=e.slotInterval),e.maxAttempts!=null&&(this.#u.maxAttempts=e.maxAttempts)}async#f(e,t,s,r,i){if(e>=this.#u.maxAttempts)return i.makeServerError("exceeded maximum retry limit");oe(n0()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:r}),s>0&&await ok(s);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in zu){const h=await zu[a](o.url,Wu(r.#l));if(h instanceof Bi){let f=h;if(this.processFunc){Wu(r.#l);try{f=await this.processFunc(o,f)}catch(p){(p.throttle==null||typeof p.stall!="number")&&f.makeServerError("error in post-processing function",p).assertOk()}}return f}o=h}this.preflightFunc&&(o=await this.preflightFunc(o));const l=await this.getUrlFunc(o,Wu(r.#l));let c=new Bi(l.statusCode,l.statusMessage,l.headers,l.body,r);if(c.statusCode===301||c.statusCode===302){try{const h=c.headers.location||"";return o.redirect(h).#f(e+1,t,0,r,c)}catch{}return c}else if(c.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,c,e))){const h=c.headers["retry-after"];let f=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof h=="string"&&h.match(/^[1-9][0-9]*$/)&&(f=parseInt(h)),o.clone().#f(e+1,t,f,r,c)}if(this.processFunc){Wu(r.#l);try{c=await this.processFunc(o,c)}catch(h){(h.throttle==null||typeof h.stall!="number")&&c.makeServerError("error in post-processing function",h).assertOk();let f=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return h.stall>=0&&(f=h.stall),o.clone().#f(e+1,t,f,r,c)}}return c}send(){return oe(this.#l==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#l=new rk(this),this.#f(0,n0()+this.timeout,0,this,new Bi(0,"",{},null,this))}cancel(){oe(this.#l!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=ZE.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),s=e.split(":")[0].toLowerCase();oe(this.method==="GET"&&(t!=="https"||s!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const r=new ti(e);return r.method="GET",r.allowGzip=this.allowGzip,r.timeout=this.timeout,r.#n=Object.assign({},this.#n),this.#i&&(r.#i=new Uint8Array(this.#i)),r.#a=this.#a,r}clone(){const e=new ti(this.url);return e.#s=this.#s,this.#i&&(e.#i=this.#i),e.#a=this.#a,e.#n=Object.assign({},this.#n),e.#h=this.#h,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#c=this.#c,e.#p=this.#p,e.#g=this.#g,e.#u=Object.assign({},this.#u),e.#d=this.#d,e}static lockConfig(){Gf=!0}static getGateway(e){return zu[e.toLowerCase()]||null}static registerGateway(e,t){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(Gf)throw new Error("gateways locked");zu[e]=t}static registerGetUrl(e){if(Gf)throw new Error("gateways locked");t0=e}static createGetUrlFunc(e){return JE(e)}static createDataGateway(){return YE}static createIpfsGatewayFunc(e){return XE(e)}}class Bi{#e;#t;#n;#s;#r;#o;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#s?ye(this.#s):"null"}>`}get statusCode(){return this.#e}get statusMessage(){return this.#t}get headers(){return Object.assign({},this.#n)}get body(){return this.#s==null?null:new Uint8Array(this.#s)}get bodyText(){try{return this.#s==null?"":Hh(this.#s)}catch{oe(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{oe(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let s=0;return{next:()=>{if(s<t.length){const r=t[s++];return{value:[r,e[r]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,t,s,r,i){this.#e=e,this.#t=t,this.#n=Object.keys(s).reduce((o,a)=>(o[a.toLowerCase()]=String(s[a]),o),{}),this.#s=r==null?null:new Uint8Array(r),this.#r=i||null,this.#o={message:""}}makeServerError(e,t){let s;e?s=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,s=`CLIENT ESCALATED SERVER ERROR (${e})`);const r=new Bi(599,s,this.headers,this.body,this.#r||void 0);return r.#o={message:e,error:t},r}throwThrottleError(e,t){t==null?t=-1:H(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const s=new Error(e||"throttling requests");throw Fe(s,{stall:t,throttle:!0}),s}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return this.#s!=null}get request(){return this.#r}ok(){return this.#o.message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=this.#o;e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let s=null;this.request&&(s=this.request.url);let r=null;try{this.#s&&(r=Hh(this.#s))}catch{}oe(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:s,responseBody:r,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function n0(){return new Date().getTime()}function ik(n){return Kr(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function ok(n){return new Promise(e=>setTimeout(e,n))}const ak=BigInt(-1),zs=BigInt(0),ga=BigInt(1),lk=BigInt(5),sa={};let ba="0000";for(;ba.length<80;)ba+=ba;function ho(n){let e=ba;for(;e.length<n;)e+=e;return BigInt("1"+e.substring(0,n))}function Cl(n,e,t){const s=BigInt(e.width);if(e.signed){const r=ga<<s-ga;oe(t==null||n>=-r&&n<r,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n>zs?n=$h(bo(n,s),s):n=-$h(bo(-n,s),s)}else{const r=ga<<s;oe(t==null||n>=0&&n<r,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n=(n%r+r)%r&r-ga}return n}function Qf(n){typeof n=="number"&&(n=`fixed128x${n}`);let e=!0,t=128,s=18;if(typeof n=="string"){if(n!=="fixed")if(n==="ufixed")e=!1;else{const i=n.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);H(i,"invalid fixed format","format",n),e=i[1]!=="u",t=parseInt(i[2]),s=parseInt(i[3])}}else if(n){const i=n,o=(a,l,c)=>i[a]==null?c:(H(typeof i[a]===l,"invalid fixed format ("+a+" not "+l+")","format."+a,i[a]),i[a]);e=o("signed","boolean",e),t=o("width","number",t),s=o("decimals","number",s)}H(t%8===0,"invalid FixedNumber width (not byte aligned)","format.width",t),H(s<=80,"invalid FixedNumber decimals (too large)","format.decimals",s);const r=(e?"":"u")+"fixed"+String(t)+"x"+String(s);return{signed:e,width:t,decimals:s,name:r}}function ck(n,e){let t="";n<zs&&(t="-",n*=ak);let s=n.toString();if(e===0)return t+s;for(;s.length<=e;)s=ba+s;const r=s.length-e;for(s=s.substring(0,r)+"."+s.substring(r);s[0]==="0"&&s[1]!==".";)s=s.substring(1);for(;s[s.length-1]==="0"&&s[s.length-2]!==".";)s=s.substring(0,s.length-1);return t+s}class Ri{format;#e;#t;#n;_value;constructor(e,t,s){kc(e,sa,"FixedNumber"),this.#t=t,this.#e=s;const r=ck(t,s.decimals);Fe(this,{format:s.name,_value:r}),this.#n=ho(s.decimals)}get signed(){return this.#e.signed}get width(){return this.#e.width}get decimals(){return this.#e.decimals}get value(){return this.#t}#s(e){H(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#r(e,t){return e=Cl(e,this.#e,t),new Ri(sa,e,this.#e)}#o(e,t){return this.#s(e),this.#r(this.#t+e.#t,t)}addUnsafe(e){return this.#o(e)}add(e){return this.#o(e,"add")}#i(e,t){return this.#s(e),this.#r(this.#t-e.#t,t)}subUnsafe(e){return this.#i(e)}sub(e){return this.#i(e,"sub")}#a(e,t){return this.#s(e),this.#r(this.#t*e.#t/this.#n,t)}mulUnsafe(e){return this.#a(e)}mul(e){return this.#a(e,"mul")}mulSignal(e){this.#s(e);const t=this.#t*e.#t;return oe(t%this.#n===zs,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#r(t/this.#n,"mulSignal")}#h(e,t){return oe(e.#t!==zs,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#s(e),this.#r(this.#t*this.#n/e.#t,t)}divUnsafe(e){return this.#h(e)}div(e){return this.#h(e,"div")}divSignal(e){oe(e.#t!==zs,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#s(e);const t=this.#t*this.#n;return oe(t%e.#t===zs,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#r(t/e.#t,"divSignal")}cmp(e){let t=this.value,s=e.value;const r=this.decimals-e.decimals;return r>0?s*=ho(r):r<0&&(t*=ho(-r)),t<s?-1:t>s?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#t;return this.#t<zs&&(e-=this.#n-ga),e=this.#t/this.#n*this.#n,this.#r(e,"floor")}ceiling(){let e=this.#t;return this.#t>zs&&(e+=this.#n-ga),e=this.#t/this.#n*this.#n,this.#r(e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,s=lk*ho(t-1);let r=this.value+s;const i=ho(t);return r=r/i*i,Cl(r,this.#e,"round"),new Ri(sa,r,this.#e)}isZero(){return this.#t===zs}isNegative(){return this.#t<zs}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Ri.fromString(this.toString(),e)}static fromValue(e,t,s){const r=t==null?0:tt(t),i=Qf(s);let o=Ie(e,"value");const a=r-i.decimals;if(a>0){const l=ho(a);oe(o%l===zs,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=l}else a<0&&(o*=ho(-a));return Cl(o,i,"fromValue"),new Ri(sa,o,i)}static fromString(e,t){const s=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);H(s&&s[2].length+s[3].length>0,"invalid FixedNumber string value","value",e);const r=Qf(t);let i=s[2]||"0",o=s[3]||"";for(;o.length<r.decimals;)o+=ba;oe(o.substring(r.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,r.decimals);const a=BigInt(s[1]+i+o);return Cl(a,r,"fromString"),new Ri(sa,a,r)}static fromBytes(e,t){let s=Ld(rt(e,"value"));const r=Qf(t);return r.signed&&(s=$h(s,r.width)),Cl(s,r,"fromBytes"),new Ri(sa,s,r)}}function uk(n){let e=n.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function s0(n,e,t){let s=0;for(let r=0;r<t;r++)s=s*256+n[e+r];return s}function r0(n,e,t,s){const r=[];for(;t<e+1+s;){const i=eb(n,t);r.push(i.result),t+=i.consumed,oe(t<=e+1+s,"child data too short","BUFFER_OVERRUN",{buffer:n,length:s,offset:e})}return{consumed:1+s,result:r}}function eb(n,e){oe(n.length!==0,"data too short","BUFFER_OVERRUN",{buffer:n,length:0,offset:1});const t=s=>{oe(s<=n.length,"data short segment too short","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:s})};if(n[e]>=248){const s=n[e]-247;t(e+1+s);const r=s0(n,e+1,s);return t(e+1+s+r),r0(n,e,e+1+s,s+r)}else if(n[e]>=192){const s=n[e]-192;return t(e+1+s),r0(n,e,e+1,s)}else if(n[e]>=184){const s=n[e]-183;t(e+1+s);const r=s0(n,e+1,s);t(e+1+s+r);const i=ye(n.slice(e+1+s,e+1+s+r));return{consumed:1+s+r,result:i}}else if(n[e]>=128){const s=n[e]-128;t(e+1+s);const r=ye(n.slice(e+1,e+1+s));return{consumed:1+s,result:r}}return{consumed:1,result:uk(n[e])}}function Nc(n){const e=rt(n,"data"),t=eb(e,0);return H(t.consumed===e.length,"unexpected junk after rlp payload","data",n),t.result}function i0(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function tb(n){if(Array.isArray(n)){let s=[];if(n.forEach(function(i){s=s.concat(tb(i))}),s.length<=55)return s.unshift(192+s.length),s;const r=i0(s.length);return r.unshift(247+r.length),r.concat(s)}const e=Array.prototype.slice.call(rt(n,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=i0(e.length);return t.unshift(183+t.length),t.concat(e)}const o0="0123456789abcdef";function ji(n){let e="0x";for(const t of tb(n))e+=o0[t>>4],e+=o0[t&15];return e}function hk(n,e){let t=18;return t=tt(e,"unit"),Ri.fromValue(n,t,{decimals:t,width:512}).toString()}function nb(n){return hk(n,18)}const us=32,Hp=new Uint8Array(us),dk=["then"],Ku={},sb=new WeakMap;function vo(n){return sb.get(n)}function a0(n,e){sb.set(n,e)}function Tl(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);throw t.error=e,t}function Gp(n,e,t){return n.indexOf(null)>=0?e.map((s,r)=>s instanceof Gr?Gp(vo(s),s,t):s):n.reduce((s,r,i)=>{let o=e.getValue(r);return r in s||(t&&o instanceof Gr&&(o=Gp(vo(o),o,t)),s[r]=o),s},{})}class Gr extends Array{#e;constructor(...e){const t=e[0];let s=e[1],r=(e[2]||[]).slice(),i=!0;t!==Ku&&(s=e,r=[],i=!1),super(s.length),s.forEach((l,c)=>{this[c]=l});const o=r.reduce((l,c)=>(typeof c=="string"&&l.set(c,(l.get(c)||0)+1),l),new Map);if(a0(this,Object.freeze(s.map((l,c)=>{const h=r[c];return h!=null&&o.get(h)===1?h:null}))),this.#e=[],this.#e==null&&this.#e,!i)return;Object.freeze(this);const a=new Proxy(this,{get:(l,c,h)=>{if(typeof c=="string"){if(c.match(/^[0-9]+$/)){const p=tt(c,"%index");if(p<0||p>=this.length)throw new RangeError("out of result range");const m=l[p];return m instanceof Error&&Tl(`index ${p}`,m),m}if(dk.indexOf(c)>=0)return Reflect.get(l,c,h);const f=l[c];if(f instanceof Function)return function(...p){return f.apply(this===h?l:this,p)};if(!(c in l))return l.getValue.apply(this===h?l:this,[c])}return Reflect.get(l,c,h)}});return a0(a,vo(this)),a}toArray(e){const t=[];return this.forEach((s,r)=>{s instanceof Error&&Tl(`index ${r}`,s),e&&s instanceof Gr&&(s=s.toArray(e)),t.push(s)}),t}toObject(e){const t=vo(this);return t.reduce((s,r,i)=>(oe(r!=null,`value at index ${i} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),Gp(t,this,e)),{})}slice(e,t){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),t==null&&(t=this.length),t<0&&(t+=this.length,t<0&&(t=0)),t>this.length&&(t=this.length);const s=vo(this),r=[],i=[];for(let o=e;o<t;o++)r.push(this[o]),i.push(s[o]);return new Gr(Ku,r,i)}filter(e,t){const s=vo(this),r=[],i=[];for(let o=0;o<this.length;o++){const a=this[o];a instanceof Error&&Tl(`index ${o}`,a),e.call(t,a,o,this)&&(r.push(a),i.push(s[o]))}return new Gr(Ku,r,i)}map(e,t){const s=[];for(let r=0;r<this.length;r++){const i=this[r];i instanceof Error&&Tl(`index ${r}`,i),s.push(e.call(t,i,r,this))}return s}getValue(e){const t=vo(this).indexOf(e);if(t===-1)return;const s=this[t];return s instanceof Error&&Tl(`property ${JSON.stringify(e)}`,s.error),s}static fromItems(e,t){return new Gr(Ku,e,t)}}function l0(n){let e=bn(n);return oe(e.length<=us,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:us,offset:e.length}),e.length!==us&&(e=ls(nn([Hp.slice(e.length%us),e]))),e}class ui{name;type;localName;dynamic;constructor(e,t,s,r){Fe(this,{name:e,type:t,localName:s,dynamic:r},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){H(!1,e,this.localName,t)}}class Qp{#e;#t;constructor(){this.#e=[],this.#t=0}get data(){return nn(this.#e)}get length(){return this.#t}#n(e){return this.#e.push(e),this.#t+=e.length,e.length}appendWriter(e){return this.#n(ls(e.data))}writeBytes(e){let t=ls(e);const s=t.length%us;return s&&(t=ls(nn([t,Hp.slice(s)]))),this.#n(t)}writeValue(e){return this.#n(l0(e))}writeUpdatableValue(){const e=this.#e.length;return this.#e.push(Hp),this.#t+=us,t=>{this.#e[e]=l0(t)}}}class lm{allowLoose;#e;#t;#n;#s;#r;constructor(e,t,s){Fe(this,{allowLoose:!!t}),this.#e=ls(e),this.#n=0,this.#s=null,this.#r=s??1024,this.#t=0}get data(){return ye(this.#e)}get dataLength(){return this.#e.length}get consumed(){return this.#t}get bytes(){return new Uint8Array(this.#e)}#o(e){if(this.#s)return this.#s.#o(e);this.#n+=e,oe(this.#r<1||this.#n<=this.#r*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#r} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:ls(this.#e),offset:this.#t,length:e,info:{bytesRead:this.#n,dataLength:this.dataLength}})}#i(e,t,s){let r=Math.ceil(t/us)*us;return this.#t+r>this.#e.length&&(this.allowLoose&&s&&this.#t+t<=this.#e.length?r=t:oe(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:ls(this.#e),length:this.#e.length,offset:this.#t+r})),this.#e.slice(this.#t,this.#t+r)}subReader(e){const t=new lm(this.#e.slice(this.#t+e),this.allowLoose,this.#r);return t.#s=this,t}readBytes(e,t){let s=this.#i(0,e,!!t);return this.#o(e),this.#t+=s.length,s.slice(0,e)}readValue(){return Ld(this.readBytes(us))}readIndex(){return jx(this.readBytes(us))}}function Gh(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function cm(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function fk(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Gh(n.outputLen),Gh(n.blockLen)}function Ma(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function rb(n,e){cm(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const jf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ib=n=>n instanceof Uint8Array,pk=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),zf=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),ur=(n,e)=>n<<32-e|n>>>e,gk=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!gk)throw new Error("Non little-endian hardware is not supported");function mk(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Bd(n){if(typeof n=="string"&&(n=mk(n)),!ib(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function yk(...n){const e=new Uint8Array(n.reduce((s,r)=>s+r.length,0));let t=0;return n.forEach(s=>{if(!ib(s))throw new Error("Uint8Array expected");e.set(s,t),t+=s.length}),e}class um{clone(){return this._cloneInto()}}function hm(n){const e=s=>n().update(Bd(s)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function vk(n=32){if(jf&&typeof jf.getRandomValues=="function")return jf.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}class ob extends um{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,fk(e);const s=Bd(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(s.length>r?e.create().update(s).digest():s);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Ma(this),this.iHash.update(e),this}digestInto(e){Ma(this),cm(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:s,finished:r,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=s._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ab=(n,e,t)=>new ob(n,e).update(t).digest();ab.create=(n,e)=>new ob(n,e);function Ak(n,e,t,s){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,s);const r=BigInt(32),i=BigInt(4294967295),o=Number(t>>r&i),a=Number(t&i),l=s?4:0,c=s?0:4;n.setUint32(e+l,o,s),n.setUint32(e+c,a,s)}class lb extends um{constructor(e,t,s,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=s,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=zf(this.buffer)}update(e){Ma(this);const{view:t,buffer:s,blockLen:r}=this;e=Bd(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(r-this.pos,i-o);if(a===r){const l=zf(e);for(;r<=i-o;o+=r)this.process(l,o);continue}s.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===r&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ma(this),rb(e,this),this.finished=!0;const{buffer:t,view:s,blockLen:r,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(s,0),o=0);for(let f=o;f<r;f++)t[f]=0;Ak(s,r-8,BigInt(this.length*8),i),this.process(s,0);const a=zf(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,h=this.get();if(c>h.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<c;f++)a.setUint32(4*f,h[f],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const s=e.slice(0,t);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:s,length:r,finished:i,destroyed:o,pos:a}=this;return e.length=r,e.pos=a,e.finished=i,e.destroyed=o,r%t&&e.buffer.set(s),e}}const wk=(n,e,t)=>n&e^~n&t,_k=(n,e,t)=>n&e^n&t^e&t,Ek=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),wi=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),_i=new Uint32Array(64);class bk extends lb{constructor(){super(64,32,8,!1),this.A=wi[0]|0,this.B=wi[1]|0,this.C=wi[2]|0,this.D=wi[3]|0,this.E=wi[4]|0,this.F=wi[5]|0,this.G=wi[6]|0,this.H=wi[7]|0}get(){const{A:e,B:t,C:s,D:r,E:i,F:o,G:a,H:l}=this;return[e,t,s,r,i,o,a,l]}set(e,t,s,r,i,o,a,l){this.A=e|0,this.B=t|0,this.C=s|0,this.D=r|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,t){for(let f=0;f<16;f++,t+=4)_i[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){const p=_i[f-15],m=_i[f-2],_=ur(p,7)^ur(p,18)^p>>>3,v=ur(m,17)^ur(m,19)^m>>>10;_i[f]=v+_i[f-7]+_+_i[f-16]|0}let{A:s,B:r,C:i,D:o,E:a,F:l,G:c,H:h}=this;for(let f=0;f<64;f++){const p=ur(a,6)^ur(a,11)^ur(a,25),m=h+p+wk(a,l,c)+Ek[f]+_i[f]|0,v=(ur(s,2)^ur(s,13)^ur(s,22))+_k(s,r,i)|0;h=c,c=l,l=a,a=o+m|0,o=i,i=r,r=s,s=m+v|0}s=s+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,h=h+this.H|0,this.set(s,r,i,o,a,l,c,h)}roundClean(){_i.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const cb=hm(()=>new bk),qu=BigInt(2**32-1),jp=BigInt(32);function ub(n,e=!1){return e?{h:Number(n&qu),l:Number(n>>jp&qu)}:{h:Number(n>>jp&qu)|0,l:Number(n&qu)|0}}function hb(n,e=!1){let t=new Uint32Array(n.length),s=new Uint32Array(n.length);for(let r=0;r<n.length;r++){const{h:i,l:o}=ub(n[r],e);[t[r],s[r]]=[i,o]}return[t,s]}const Ik=(n,e)=>BigInt(n>>>0)<<jp|BigInt(e>>>0),Ck=(n,e,t)=>n>>>t,Tk=(n,e,t)=>n<<32-t|e>>>t,Sk=(n,e,t)=>n>>>t|e<<32-t,Pk=(n,e,t)=>n<<32-t|e>>>t,Rk=(n,e,t)=>n<<64-t|e>>>t-32,xk=(n,e,t)=>n>>>t-32|e<<64-t,kk=(n,e)=>e,Nk=(n,e)=>n,db=(n,e,t)=>n<<t|e>>>32-t,fb=(n,e,t)=>e<<t|n>>>32-t,pb=(n,e,t)=>e<<t-32|n>>>64-t,gb=(n,e,t)=>n<<t-32|e>>>64-t;function Dk(n,e,t,s){const r=(e>>>0)+(s>>>0);return{h:n+t+(r/2**32|0)|0,l:r|0}}const Ok=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),Lk=(n,e,t,s)=>e+t+s+(n/2**32|0)|0,Bk=(n,e,t,s)=>(n>>>0)+(e>>>0)+(t>>>0)+(s>>>0),Mk=(n,e,t,s,r)=>e+t+s+r+(n/2**32|0)|0,Fk=(n,e,t,s,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(s>>>0)+(r>>>0),Uk=(n,e,t,s,r,i)=>e+t+s+r+i+(n/2**32|0)|0,et={fromBig:ub,split:hb,toBig:Ik,shrSH:Ck,shrSL:Tk,rotrSH:Sk,rotrSL:Pk,rotrBH:Rk,rotrBL:xk,rotr32H:kk,rotr32L:Nk,rotlSH:db,rotlSL:fb,rotlBH:pb,rotlBL:gb,add:Dk,add3L:Ok,add3H:Lk,add4L:Bk,add4H:Mk,add5H:Uk,add5L:Fk},[Vk,$k]=et.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Ei=new Uint32Array(80),bi=new Uint32Array(80);class Hk extends lb{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:s,Bl:r,Ch:i,Cl:o,Dh:a,Dl:l,Eh:c,El:h,Fh:f,Fl:p,Gh:m,Gl:_,Hh:v,Hl:A}=this;return[e,t,s,r,i,o,a,l,c,h,f,p,m,_,v,A]}set(e,t,s,r,i,o,a,l,c,h,f,p,m,_,v,A){this.Ah=e|0,this.Al=t|0,this.Bh=s|0,this.Bl=r|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=h|0,this.Fh=f|0,this.Fl=p|0,this.Gh=m|0,this.Gl=_|0,this.Hh=v|0,this.Hl=A|0}process(e,t){for(let P=0;P<16;P++,t+=4)Ei[P]=e.getUint32(t),bi[P]=e.getUint32(t+=4);for(let P=16;P<80;P++){const U=Ei[P-15]|0,W=bi[P-15]|0,q=et.rotrSH(U,W,1)^et.rotrSH(U,W,8)^et.shrSH(U,W,7),x=et.rotrSL(U,W,1)^et.rotrSL(U,W,8)^et.shrSL(U,W,7),I=Ei[P-2]|0,S=bi[P-2]|0,C=et.rotrSH(I,S,19)^et.rotrBH(I,S,61)^et.shrSH(I,S,6),b=et.rotrSL(I,S,19)^et.rotrBL(I,S,61)^et.shrSL(I,S,6),N=et.add4L(x,b,bi[P-7],bi[P-16]),k=et.add4H(N,q,C,Ei[P-7],Ei[P-16]);Ei[P]=k|0,bi[P]=N|0}let{Ah:s,Al:r,Bh:i,Bl:o,Ch:a,Cl:l,Dh:c,Dl:h,Eh:f,El:p,Fh:m,Fl:_,Gh:v,Gl:A,Hh:w,Hl:T}=this;for(let P=0;P<80;P++){const U=et.rotrSH(f,p,14)^et.rotrSH(f,p,18)^et.rotrBH(f,p,41),W=et.rotrSL(f,p,14)^et.rotrSL(f,p,18)^et.rotrBL(f,p,41),q=f&m^~f&v,x=p&_^~p&A,I=et.add5L(T,W,x,$k[P],bi[P]),S=et.add5H(I,w,U,q,Vk[P],Ei[P]),C=I|0,b=et.rotrSH(s,r,28)^et.rotrBH(s,r,34)^et.rotrBH(s,r,39),N=et.rotrSL(s,r,28)^et.rotrBL(s,r,34)^et.rotrBL(s,r,39),k=s&i^s&a^i&a,Se=r&o^r&l^o&l;w=v|0,T=A|0,v=m|0,A=_|0,m=f|0,_=p|0,{h:f,l:p}=et.add(c|0,h|0,S|0,C|0),c=a|0,h=l|0,a=i|0,l=o|0,i=s|0,o=r|0;const ne=et.add3L(C,N,Se);s=et.add3H(ne,S,b,k),r=ne|0}({h:s,l:r}=et.add(this.Ah|0,this.Al|0,s|0,r|0)),{h:i,l:o}=et.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l}=et.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:h}=et.add(this.Dh|0,this.Dl|0,c|0,h|0),{h:f,l:p}=et.add(this.Eh|0,this.El|0,f|0,p|0),{h:m,l:_}=et.add(this.Fh|0,this.Fl|0,m|0,_|0),{h:v,l:A}=et.add(this.Gh|0,this.Gl|0,v|0,A|0),{h:w,l:T}=et.add(this.Hh|0,this.Hl|0,w|0,T|0),this.set(s,r,i,o,a,l,c,h,f,p,m,_,v,A,w,T)}roundClean(){Ei.fill(0),bi.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Gk=hm(()=>new Hk);function Qk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const c0=Qk();c0.crypto||c0.msCrypto;function jk(n){switch(n){case"sha256":return cb.create();case"sha512":return Gk.create()}H(!1,"invalid hashing algorithm name","algorithm",n)}const[mb,yb,vb]=[[],[],[]],zk=BigInt(0),Sl=BigInt(1),Wk=BigInt(2),Kk=BigInt(7),qk=BigInt(256),Jk=BigInt(113);for(let n=0,e=Sl,t=1,s=0;n<24;n++){[t,s]=[s,(2*t+3*s)%5],mb.push(2*(5*s+t)),yb.push((n+1)*(n+2)/2%64);let r=zk;for(let i=0;i<7;i++)e=(e<<Sl^(e>>Kk)*Jk)%qk,e&Wk&&(r^=Sl<<(Sl<<BigInt(i))-Sl);vb.push(r)}const[Yk,Xk]=hb(vb,!0),u0=(n,e,t)=>t>32?pb(n,e,t):db(n,e,t),h0=(n,e,t)=>t>32?gb(n,e,t):fb(n,e,t);function Zk(n,e=24){const t=new Uint32Array(10);for(let s=24-e;s<24;s++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=t[l],h=t[l+1],f=u0(c,h,1)^t[a],p=h0(c,h,1)^t[a+1];for(let m=0;m<50;m+=10)n[o+m]^=f,n[o+m+1]^=p}let r=n[2],i=n[3];for(let o=0;o<24;o++){const a=yb[o],l=u0(r,i,a),c=h0(r,i,a),h=mb[o];r=n[h],i=n[h+1],n[h]=l,n[h+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=n[o+a];for(let a=0;a<10;a++)n[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}n[0]^=Yk[s],n[1]^=Xk[s]}t.fill(0)}class dm extends um{constructor(e,t,s,r=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=s,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Gh(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=pk(this.state)}keccak(){Zk(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Ma(this);const{blockLen:t,state:s}=this;e=Bd(e);const r=e.length;for(let i=0;i<r;){const o=Math.min(t-this.pos,r-i);for(let a=0;a<o;a++)s[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:s,blockLen:r}=this;e[s]^=t,(t&128)!==0&&s===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){Ma(this,!1),cm(e),this.finish();const t=this.state,{blockLen:s}=this;for(let r=0,i=e.length;r<i;){this.posOut>=s&&this.keccak();const o=Math.min(s-this.posOut,i-r);e.set(t.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Gh(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(rb(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:s,outputLen:r,rounds:i,enableXOF:o}=this;return e||(e=new dm(t,s,r,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=s,e.outputLen=r,e.enableXOF=o,e.destroyed=this.destroyed,e}}const e2=(n,e,t)=>hm(()=>new dm(e,n,t)),t2=e2(1,136,256/8);let Ab=!1;const wb=function(n){return t2(n)};let _b=wb;function mn(n){const e=rt(n,"data");return ye(_b(e))}mn._=wb;mn.lock=function(){Ab=!0};mn.register=function(n){if(Ab)throw new TypeError("keccak256 is locked");_b=n};Object.freeze(mn);const Eb=function(n){return jk("sha256").update(n).digest()};let bb=Eb,Ib=!1;function el(n){const e=rt(n,"data");return ye(bb(e))}el._=Eb;el.lock=function(){Ib=!0};el.register=function(n){if(Ib)throw new Error("sha256 is locked");bb=n};Object.freeze(el);Object.freeze(el);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Cb=BigInt(0),Md=BigInt(1),n2=BigInt(2),Fd=n=>n instanceof Uint8Array,s2=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Fa(n){if(!Fd(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=s2[n[t]];return e}function Tb(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function fm(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function Ua(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let s=0;s<t.length;s++){const r=s*2,i=n.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[s]=o}return t}function xo(n){return fm(Fa(n))}function pm(n){if(!Fd(n))throw new Error("Uint8Array expected");return fm(Fa(Uint8Array.from(n).reverse()))}function Va(n,e){return Ua(n.toString(16).padStart(e*2,"0"))}function gm(n,e){return Va(n,e).reverse()}function r2(n){return Ua(Tb(n))}function Ws(n,e,t){let s;if(typeof e=="string")try{s=Ua(e)}catch(i){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${i}`)}else if(Fd(e))s=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const r=s.length;if(typeof t=="number"&&r!==t)throw new Error(`${n} expected ${t} bytes, got ${r}`);return s}function lc(...n){const e=new Uint8Array(n.reduce((s,r)=>s+r.length,0));let t=0;return n.forEach(s=>{if(!Fd(s))throw new Error("Uint8Array expected");e.set(s,t),t+=s.length}),e}function i2(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function o2(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function a2(n){let e;for(e=0;n>Cb;n>>=Md,e+=1);return e}function l2(n,e){return n>>BigInt(e)&Md}const c2=(n,e,t)=>n|(t?Md:Cb)<<BigInt(e),mm=n=>(n2<<BigInt(n-1))-Md,Wf=n=>new Uint8Array(n),d0=n=>Uint8Array.from(n);function Sb(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let s=Wf(n),r=Wf(n),i=0;const o=()=>{s.fill(1),r.fill(0),i=0},a=(...f)=>t(r,s,...f),l=(f=Wf())=>{r=a(d0([0]),f),s=a(),f.length!==0&&(r=a(d0([1]),f),s=a())},c=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){s=a();const m=s.slice();p.push(m),f+=s.length}return lc(...p)};return(f,p)=>{o(),l(f);let m;for(;!(m=p(c()));)l();return o(),m}}const u2={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Dc(n,e,t={}){const s=(r,i,o)=>{const a=u2[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const l=n[r];if(!(o&&l===void 0)&&!a(l,n))throw new Error(`Invalid param ${String(r)}=${l} (${typeof l}), expected ${i}`)};for(const[r,i]of Object.entries(e))s(r,i,!1);for(const[r,i]of Object.entries(t))s(r,i,!0);return n}const h2=Object.freeze(Object.defineProperty({__proto__:null,bitGet:l2,bitLen:a2,bitMask:mm,bitSet:c2,bytesToHex:Fa,bytesToNumberBE:xo,bytesToNumberLE:pm,concatBytes:lc,createHmacDrbg:Sb,ensureBytes:Ws,equalBytes:i2,hexToBytes:Ua,hexToNumber:fm,numberToBytesBE:Va,numberToBytesLE:gm,numberToHexUnpadded:Tb,numberToVarBytesBE:r2,utf8ToBytes:o2,validateObject:Dc},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dn=BigInt(0),an=BigInt(1),Ao=BigInt(2),d2=BigInt(3),zp=BigInt(4),f0=BigInt(5),p0=BigInt(8);BigInt(9);BigInt(16);function ws(n,e){const t=n%e;return t>=Dn?t:e+t}function f2(n,e,t){if(t<=Dn||e<Dn)throw new Error("Expected power/modulo > 0");if(t===an)return Dn;let s=an;for(;e>Dn;)e&an&&(s=s*n%t),n=n*n%t,e>>=an;return s}function Ms(n,e,t){let s=n;for(;e-- >Dn;)s*=s,s%=t;return s}function Wp(n,e){if(n===Dn||e<=Dn)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=ws(n,e),s=e,r=Dn,i=an;for(;t!==Dn;){const a=s/t,l=s%t,c=r-i*a;s=t,t=l,r=i,i=c}if(s!==an)throw new Error("invert: does not exist");return ws(r,e)}function p2(n){const e=(n-an)/Ao;let t,s,r;for(t=n-an,s=0;t%Ao===Dn;t/=Ao,s++);for(r=Ao;r<n&&f2(r,e,n)!==n-an;r++);if(s===1){const o=(n+an)/zp;return function(l,c){const h=l.pow(c,o);if(!l.eql(l.sqr(h),c))throw new Error("Cannot find square root");return h}}const i=(t+an)/Ao;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=s,h=a.pow(a.mul(a.ONE,r),t),f=a.pow(l,i),p=a.pow(l,t);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let m=1;for(let v=a.sqr(p);m<c&&!a.eql(v,a.ONE);m++)v=a.sqr(v);const _=a.pow(h,an<<BigInt(c-m-1));h=a.sqr(_),f=a.mul(f,_),p=a.mul(p,h),c=m}return f}}function g2(n){if(n%zp===d2){const e=(n+an)/zp;return function(s,r){const i=s.pow(r,e);if(!s.eql(s.sqr(i),r))throw new Error("Cannot find square root");return i}}if(n%p0===f0){const e=(n-f0)/p0;return function(s,r){const i=s.mul(r,Ao),o=s.pow(i,e),a=s.mul(r,o),l=s.mul(s.mul(a,Ao),o),c=s.mul(a,s.sub(l,s.ONE));if(!s.eql(s.sqr(c),r))throw new Error("Cannot find square root");return c}}return p2(n)}const m2=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function y2(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=m2.reduce((s,r)=>(s[r]="function",s),e);return Dc(n,t)}function v2(n,e,t){if(t<Dn)throw new Error("Expected power > 0");if(t===Dn)return n.ONE;if(t===an)return e;let s=n.ONE,r=e;for(;t>Dn;)t&an&&(s=n.mul(s,r)),r=n.sqr(r),t>>=an;return s}function A2(n,e){const t=new Array(e.length),s=e.reduce((i,o,a)=>n.is0(o)?i:(t[a]=i,n.mul(i,o)),n.ONE),r=n.inv(s);return e.reduceRight((i,o,a)=>n.is0(o)?i:(t[a]=n.mul(i,t[a]),n.mul(i,o)),r),t}function Pb(n,e){const t=e!==void 0?e:n.toString(2).length,s=Math.ceil(t/8);return{nBitLength:t,nByteLength:s}}function w2(n,e,t=!1,s={}){if(n<=Dn)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:r,nByteLength:i}=Pb(n,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=g2(n),a=Object.freeze({ORDER:n,BITS:r,BYTES:i,MASK:mm(r),ZERO:Dn,ONE:an,create:l=>ws(l,n),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return Dn<=l&&l<n},is0:l=>l===Dn,isOdd:l=>(l&an)===an,neg:l=>ws(-l,n),eql:(l,c)=>l===c,sqr:l=>ws(l*l,n),add:(l,c)=>ws(l+c,n),sub:(l,c)=>ws(l-c,n),mul:(l,c)=>ws(l*c,n),pow:(l,c)=>v2(a,l,c),div:(l,c)=>ws(l*Wp(c,n),n),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>Wp(l,n),sqrt:s.sqrt||(l=>o(a,l)),invertBatch:l=>A2(a,l),cmov:(l,c,h)=>h?c:l,toBytes:l=>t?gm(l,i):Va(l,i),fromBytes:l=>{if(l.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${l.length}`);return t?pm(l):xo(l)}});return Object.freeze(a)}function Rb(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function xb(n){const e=Rb(n);return e+Math.ceil(e/2)}function _2(n,e,t=!1){const s=n.length,r=Rb(e),i=xb(e);if(s<16||s<i||s>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${s}`);const o=t?xo(n):pm(n),a=ws(o,e-an)+an;return t?gm(a,r):Va(a,r)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const E2=BigInt(0),Kf=BigInt(1);function b2(n,e){const t=(r,i)=>{const o=i.negate();return r?o:i},s=r=>{const i=Math.ceil(e/r)+1,o=2**(r-1);return{windows:i,windowSize:o}};return{constTimeNegate:t,unsafeLadder(r,i){let o=n.ZERO,a=r;for(;i>E2;)i&Kf&&(o=o.add(a)),a=a.double(),i>>=Kf;return o},precomputeWindow(r,i){const{windows:o,windowSize:a}=s(i),l=[];let c=r,h=c;for(let f=0;f<o;f++){h=c,l.push(h);for(let p=1;p<a;p++)h=h.add(c),l.push(h);c=h.double()}return l},wNAF(r,i,o){const{windows:a,windowSize:l}=s(r);let c=n.ZERO,h=n.BASE;const f=BigInt(2**r-1),p=2**r,m=BigInt(r);for(let _=0;_<a;_++){const v=_*l;let A=Number(o&f);o>>=m,A>l&&(A-=p,o+=Kf);const w=v,T=v+Math.abs(A)-1,P=_%2!==0,U=A<0;A===0?h=h.add(t(P,i[w])):c=c.add(t(U,i[T]))}return{p:c,f:h}},wNAFCached(r,i,o,a){const l=r._WINDOW_SIZE||1;let c=i.get(r);return c||(c=this.precomputeWindow(r,l),l!==1&&i.set(r,a(c))),this.wNAF(l,c,o)}}}function kb(n){return y2(n.Fp),Dc(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Pb(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function I2(n){const e=kb(n);Dc(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:s,a:r}=e;if(t){if(!s.eql(r,s.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:C2,hexToBytes:T2}=h2,Io={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=Io;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],s=n.subarray(2,t+2);if(!t||s.length!==t)throw new e("Invalid signature integer: wrong length");if(s[0]&128)throw new e("Invalid signature integer: negative");if(s[0]===0&&!(s[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:C2(s),l:n.subarray(t+2)}},toSig(n){const{Err:e}=Io,t=typeof n=="string"?T2(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let s=t.length;if(s<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==s-2)throw new e("Invalid signature: incorrect length");const{d:r,l:i}=Io._parseInt(t.subarray(2)),{d:o,l:a}=Io._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r,s:o}},hexFromSig(n){const e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,t=c=>{const h=c.toString(16);return h.length&1?`0${h}`:h},s=e(t(n.s)),r=e(t(n.r)),i=s.length/2,o=r.length/2,a=t(i),l=t(o);return`30${t(o+i+4)}02${l}${r}02${a}${s}`}},Ur=BigInt(0),Fs=BigInt(1);BigInt(2);const g0=BigInt(3);BigInt(4);function S2(n){const e=I2(n),{Fp:t}=e,s=e.toBytes||((_,v,A)=>{const w=v.toAffine();return lc(Uint8Array.from([4]),t.toBytes(w.x),t.toBytes(w.y))}),r=e.fromBytes||(_=>{const v=_.subarray(1),A=t.fromBytes(v.subarray(0,t.BYTES)),w=t.fromBytes(v.subarray(t.BYTES,2*t.BYTES));return{x:A,y:w}});function i(_){const{a:v,b:A}=e,w=t.sqr(_),T=t.mul(w,_);return t.add(t.add(T,t.mul(_,v)),A)}if(!t.eql(t.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(_){return typeof _=="bigint"&&Ur<_&&_<e.n}function a(_){if(!o(_))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(_){const{allowedPrivateKeyLengths:v,nByteLength:A,wrapPrivateKey:w,n:T}=e;if(v&&typeof _!="bigint"){if(_ instanceof Uint8Array&&(_=Fa(_)),typeof _!="string"||!v.includes(_.length))throw new Error("Invalid key");_=_.padStart(A*2,"0")}let P;try{P=typeof _=="bigint"?_:xo(Ws("private key",_,A))}catch{throw new Error(`private key must be ${A} bytes, hex or bigint, not ${typeof _}`)}return w&&(P=ws(P,T)),a(P),P}const c=new Map;function h(_){if(!(_ instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(v,A,w){if(this.px=v,this.py=A,this.pz=w,v==null||!t.isValid(v))throw new Error("x required");if(A==null||!t.isValid(A))throw new Error("y required");if(w==null||!t.isValid(w))throw new Error("z required")}static fromAffine(v){const{x:A,y:w}=v||{};if(!v||!t.isValid(A)||!t.isValid(w))throw new Error("invalid affine point");if(v instanceof f)throw new Error("projective point not allowed");const T=P=>t.eql(P,t.ZERO);return T(A)&&T(w)?f.ZERO:new f(A,w,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){const A=t.invertBatch(v.map(w=>w.pz));return v.map((w,T)=>w.toAffine(A[T])).map(f.fromAffine)}static fromHex(v){const A=f.fromAffine(r(Ws("pointHex",v)));return A.assertValidity(),A}static fromPrivateKey(v){return f.BASE.multiply(l(v))}_setWindowSize(v){this._WINDOW_SIZE=v,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:v,y:A}=this.toAffine();if(!t.isValid(v)||!t.isValid(A))throw new Error("bad point: x or y not FE");const w=t.sqr(A),T=i(v);if(!t.eql(w,T))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:v}=this.toAffine();if(t.isOdd)return!t.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){h(v);const{px:A,py:w,pz:T}=this,{px:P,py:U,pz:W}=v,q=t.eql(t.mul(A,W),t.mul(P,T)),x=t.eql(t.mul(w,W),t.mul(U,T));return q&&x}negate(){return new f(this.px,t.neg(this.py),this.pz)}double(){const{a:v,b:A}=e,w=t.mul(A,g0),{px:T,py:P,pz:U}=this;let W=t.ZERO,q=t.ZERO,x=t.ZERO,I=t.mul(T,T),S=t.mul(P,P),C=t.mul(U,U),b=t.mul(T,P);return b=t.add(b,b),x=t.mul(T,U),x=t.add(x,x),W=t.mul(v,x),q=t.mul(w,C),q=t.add(W,q),W=t.sub(S,q),q=t.add(S,q),q=t.mul(W,q),W=t.mul(b,W),x=t.mul(w,x),C=t.mul(v,C),b=t.sub(I,C),b=t.mul(v,b),b=t.add(b,x),x=t.add(I,I),I=t.add(x,I),I=t.add(I,C),I=t.mul(I,b),q=t.add(q,I),C=t.mul(P,U),C=t.add(C,C),I=t.mul(C,b),W=t.sub(W,I),x=t.mul(C,S),x=t.add(x,x),x=t.add(x,x),new f(W,q,x)}add(v){h(v);const{px:A,py:w,pz:T}=this,{px:P,py:U,pz:W}=v;let q=t.ZERO,x=t.ZERO,I=t.ZERO;const S=e.a,C=t.mul(e.b,g0);let b=t.mul(A,P),N=t.mul(w,U),k=t.mul(T,W),Se=t.add(A,w),ne=t.add(P,U);Se=t.mul(Se,ne),ne=t.add(b,N),Se=t.sub(Se,ne),ne=t.add(A,T);let V=t.add(P,W);return ne=t.mul(ne,V),V=t.add(b,k),ne=t.sub(ne,V),V=t.add(w,T),q=t.add(U,W),V=t.mul(V,q),q=t.add(N,k),V=t.sub(V,q),I=t.mul(S,ne),q=t.mul(C,k),I=t.add(q,I),q=t.sub(N,I),I=t.add(N,I),x=t.mul(q,I),N=t.add(b,b),N=t.add(N,b),k=t.mul(S,k),ne=t.mul(C,ne),N=t.add(N,k),k=t.sub(b,k),k=t.mul(S,k),ne=t.add(ne,k),b=t.mul(N,ne),x=t.add(x,b),b=t.mul(V,ne),q=t.mul(Se,q),q=t.sub(q,b),b=t.mul(Se,N),I=t.mul(V,I),I=t.add(I,b),new f(q,x,I)}subtract(v){return this.add(v.negate())}is0(){return this.equals(f.ZERO)}wNAF(v){return m.wNAFCached(this,c,v,A=>{const w=t.invertBatch(A.map(T=>T.pz));return A.map((T,P)=>T.toAffine(w[P])).map(f.fromAffine)})}multiplyUnsafe(v){const A=f.ZERO;if(v===Ur)return A;if(a(v),v===Fs)return this;const{endo:w}=e;if(!w)return m.unsafeLadder(this,v);let{k1neg:T,k1:P,k2neg:U,k2:W}=w.splitScalar(v),q=A,x=A,I=this;for(;P>Ur||W>Ur;)P&Fs&&(q=q.add(I)),W&Fs&&(x=x.add(I)),I=I.double(),P>>=Fs,W>>=Fs;return T&&(q=q.negate()),U&&(x=x.negate()),x=new f(t.mul(x.px,w.beta),x.py,x.pz),q.add(x)}multiply(v){a(v);let A=v,w,T;const{endo:P}=e;if(P){const{k1neg:U,k1:W,k2neg:q,k2:x}=P.splitScalar(A);let{p:I,f:S}=this.wNAF(W),{p:C,f:b}=this.wNAF(x);I=m.constTimeNegate(U,I),C=m.constTimeNegate(q,C),C=new f(t.mul(C.px,P.beta),C.py,C.pz),w=I.add(C),T=S.add(b)}else{const{p:U,f:W}=this.wNAF(A);w=U,T=W}return f.normalizeZ([w,T])[0]}multiplyAndAddUnsafe(v,A,w){const T=f.BASE,P=(W,q)=>q===Ur||q===Fs||!W.equals(T)?W.multiplyUnsafe(q):W.multiply(q),U=P(this,A).add(P(v,w));return U.is0()?void 0:U}toAffine(v){const{px:A,py:w,pz:T}=this,P=this.is0();v==null&&(v=P?t.ONE:t.inv(T));const U=t.mul(A,v),W=t.mul(w,v),q=t.mul(T,v);if(P)return{x:t.ZERO,y:t.ZERO};if(!t.eql(q,t.ONE))throw new Error("invZ was invalid");return{x:U,y:W}}isTorsionFree(){const{h:v,isTorsionFree:A}=e;if(v===Fs)return!0;if(A)return A(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:v,clearCofactor:A}=e;return v===Fs?this:A?A(f,this):this.multiplyUnsafe(e.h)}toRawBytes(v=!0){return this.assertValidity(),s(f,this,v)}toHex(v=!0){return Fa(this.toRawBytes(v))}}f.BASE=new f(e.Gx,e.Gy,t.ONE),f.ZERO=new f(t.ZERO,t.ONE,t.ZERO);const p=e.nBitLength,m=b2(f,e.endo?Math.ceil(p/2):p);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:l,weierstrassEquation:i,isWithinCurveOrder:o}}function P2(n){const e=kb(n);return Dc(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function R2(n){const e=P2(n),{Fp:t,n:s}=e,r=t.BYTES+1,i=2*t.BYTES+1;function o(ne){return Ur<ne&&ne<t.ORDER}function a(ne){return ws(ne,s)}function l(ne){return Wp(ne,s)}const{ProjectivePoint:c,normPrivateKeyToScalar:h,weierstrassEquation:f,isWithinCurveOrder:p}=S2({...e,toBytes(ne,V,D){const z=V.toAffine(),he=t.toBytes(z.x),ke=lc;return D?ke(Uint8Array.from([V.hasEvenY()?2:3]),he):ke(Uint8Array.from([4]),he,t.toBytes(z.y))},fromBytes(ne){const V=ne.length,D=ne[0],z=ne.subarray(1);if(V===r&&(D===2||D===3)){const he=xo(z);if(!o(he))throw new Error("Point is not on curve");const ke=f(he);let Te=t.sqrt(ke);const Ve=(Te&Fs)===Fs;return(D&1)===1!==Ve&&(Te=t.neg(Te)),{x:he,y:Te}}else if(V===i&&D===4){const he=t.fromBytes(z.subarray(0,t.BYTES)),ke=t.fromBytes(z.subarray(t.BYTES,2*t.BYTES));return{x:he,y:ke}}else throw new Error(`Point of length ${V} was invalid. Expected ${r} compressed bytes or ${i} uncompressed bytes`)}}),m=ne=>Fa(Va(ne,e.nByteLength));function _(ne){const V=s>>Fs;return ne>V}function v(ne){return _(ne)?a(-ne):ne}const A=(ne,V,D)=>xo(ne.slice(V,D));class w{constructor(V,D,z){this.r=V,this.s=D,this.recovery=z,this.assertValidity()}static fromCompact(V){const D=e.nByteLength;return V=Ws("compactSignature",V,D*2),new w(A(V,0,D),A(V,D,2*D))}static fromDER(V){const{r:D,s:z}=Io.toSig(Ws("DER",V));return new w(D,z)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(V){return new w(this.r,this.s,V)}recoverPublicKey(V){const{r:D,s:z,recovery:he}=this,ke=x(Ws("msgHash",V));if(he==null||![0,1,2,3].includes(he))throw new Error("recovery id invalid");const Te=he===2||he===3?D+e.n:D;if(Te>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ve=(he&1)===0?"02":"03",ze=c.fromHex(Ve+m(Te)),ft=l(Te),pt=a(-ke*ft),yt=a(z*ft),Z=c.BASE.multiplyAndAddUnsafe(ze,pt,yt);if(!Z)throw new Error("point at infinify");return Z.assertValidity(),Z}hasHighS(){return _(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Ua(this.toDERHex())}toDERHex(){return Io.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ua(this.toCompactHex())}toCompactHex(){return m(this.r)+m(this.s)}}const T={isValidPrivateKey(ne){try{return h(ne),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const ne=xb(e.n);return _2(e.randomBytes(ne),e.n)},precompute(ne=8,V=c.BASE){return V._setWindowSize(ne),V.multiply(BigInt(3)),V}};function P(ne,V=!0){return c.fromPrivateKey(ne).toRawBytes(V)}function U(ne){const V=ne instanceof Uint8Array,D=typeof ne=="string",z=(V||D)&&ne.length;return V?z===r||z===i:D?z===2*r||z===2*i:ne instanceof c}function W(ne,V,D=!0){if(U(ne))throw new Error("first arg must be private key");if(!U(V))throw new Error("second arg must be public key");return c.fromHex(V).multiply(h(ne)).toRawBytes(D)}const q=e.bits2int||function(ne){const V=xo(ne),D=ne.length*8-e.nBitLength;return D>0?V>>BigInt(D):V},x=e.bits2int_modN||function(ne){return a(q(ne))},I=mm(e.nBitLength);function S(ne){if(typeof ne!="bigint")throw new Error("bigint expected");if(!(Ur<=ne&&ne<I))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Va(ne,e.nByteLength)}function C(ne,V,D=b){if(["recovered","canonical"].some(ue=>ue in D))throw new Error("sign() legacy options not supported");const{hash:z,randomBytes:he}=e;let{lowS:ke,prehash:Te,extraEntropy:Ve}=D;ke==null&&(ke=!0),ne=Ws("msgHash",ne),Te&&(ne=Ws("prehashed msgHash",z(ne)));const ze=x(ne),ft=h(V),pt=[S(ft),S(ze)];if(Ve!=null){const ue=Ve===!0?he(t.BYTES):Ve;pt.push(Ws("extraEntropy",ue))}const yt=lc(...pt),Z=ze;function pe(ue){const we=q(ue);if(!p(we))return;const Qe=l(we),O=c.BASE.multiply(we).toAffine(),L=a(O.x);if(L===Ur)return;const G=a(Qe*a(Z+L*ft));if(G===Ur)return;let te=(O.x===L?0:2)|Number(O.y&Fs),j=G;return ke&&_(G)&&(j=v(G),te^=1),new w(L,j,te)}return{seed:yt,k2sig:pe}}const b={lowS:e.lowS,prehash:!1},N={lowS:e.lowS,prehash:!1};function k(ne,V,D=b){const{seed:z,k2sig:he}=C(ne,V,D),ke=e;return Sb(ke.hash.outputLen,ke.nByteLength,ke.hmac)(z,he)}c.BASE._setWindowSize(8);function Se(ne,V,D,z=N){const he=ne;if(V=Ws("msgHash",V),D=Ws("publicKey",D),"strict"in z)throw new Error("options.strict was renamed to lowS");const{lowS:ke,prehash:Te}=z;let Ve,ze;try{if(typeof he=="string"||he instanceof Uint8Array)try{Ve=w.fromDER(he)}catch(O){if(!(O instanceof Io.Err))throw O;Ve=w.fromCompact(he)}else if(typeof he=="object"&&typeof he.r=="bigint"&&typeof he.s=="bigint"){const{r:O,s:L}=he;Ve=new w(O,L)}else throw new Error("PARSE");ze=c.fromHex(D)}catch(O){if(O.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(ke&&Ve.hasHighS())return!1;Te&&(V=e.hash(V));const{r:ft,s:pt}=Ve,yt=x(V),Z=l(pt),pe=a(yt*Z),ue=a(ft*Z),we=c.BASE.multiplyAndAddUnsafe(ze,pe,ue)?.toAffine();return we?a(we.x)===ft:!1}return{CURVE:e,getPublicKey:P,getSharedSecret:W,sign:k,verify:Se,ProjectivePoint:c,Signature:w,utils:T}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function x2(n){return{hash:n,hmac:(e,...t)=>ab(n,e,yk(...t)),randomBytes:vk}}function k2(n,e){const t=s=>R2({...n,...x2(s)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Nb=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),m0=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),N2=BigInt(1),Kp=BigInt(2),y0=(n,e)=>(n+e/Kp)/e;function D2(n){const e=Nb,t=BigInt(3),s=BigInt(6),r=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=n*n*n%e,h=c*c*n%e,f=Ms(h,t,e)*h%e,p=Ms(f,t,e)*h%e,m=Ms(p,Kp,e)*c%e,_=Ms(m,r,e)*m%e,v=Ms(_,i,e)*_%e,A=Ms(v,a,e)*v%e,w=Ms(A,l,e)*A%e,T=Ms(w,a,e)*v%e,P=Ms(T,t,e)*h%e,U=Ms(P,o,e)*_%e,W=Ms(U,s,e)*c%e,q=Ms(W,Kp,e);if(!qp.eql(qp.sqr(q),n))throw new Error("Cannot find square root");return q}const qp=w2(Nb,void 0,void 0,{sqrt:D2}),Ci=k2({a:BigInt(0),b:BigInt(7),Fp:qp,n:m0,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=m0,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),s=-N2*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,o=BigInt("0x100000000000000000000000000000000"),a=y0(i*n,e),l=y0(-s*n,e);let c=ws(n-a*t-l*r,e),h=ws(-a*s-l*i,e);const f=c>o,p=h>o;if(f&&(c=e-c),p&&(h=e-h),c>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:f,k1:c,k2neg:p,k2:h}}}},cb);BigInt(0);Ci.ProjectivePoint;const cc="0x0000000000000000000000000000000000000000",v0="0x0000000000000000000000000000000000000000000000000000000000000000",A0=BigInt(0),w0=BigInt(1),_0=BigInt(2),E0=BigInt(27),b0=BigInt(28),Ju=BigInt(35),ra={};function I0(n){return ei(bn(n),32)}class Zt{#e;#t;#n;#s;get r(){return this.#e}set r(e){H(Ea(e)===32,"invalid r","value",e),this.#e=ye(e)}get s(){return H(parseInt(this.#t.substring(0,3))<8,"non-canonical s; use ._s","s",this.#t),this.#t}set s(e){H(Ea(e)===32,"invalid s","value",e),this.#t=ye(e)}get _s(){return this.#t}isValid(){return parseInt(this.#t.substring(0,3))<8}get v(){return this.#n}set v(e){const t=tt(e,"value");H(t===27||t===28,"invalid v","v",e),this.#n=t}get networkV(){return this.#s}get legacyChainId(){const e=this.networkV;return e==null?null:Zt.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=rt(this.s);return this.yParity&&(e[0]|=128),ye(e)}get compactSerialized(){return nn([this.r,this.yParityAndS])}get serialized(){return nn([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,s,r){kc(e,ra,"Signature"),this.#e=t,this.#t=s,this.#n=r,this.#s=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Zt(ra,this.r,this._s,this.v);return this.networkV&&(e.#s=this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const t=Ie(e,"v");return t==E0||t==b0?A0:(H(t>=Ju,"invalid EIP-155 v","v",e),(t-Ju)/_0)}static getChainIdV(e,t){return Ie(e)*_0+BigInt(35+t-27)}static getNormalizedV(e){const t=Ie(e);return t===A0||t===E0?27:t===w0||t===b0?28:(H(t>=Ju,"invalid v","v",e),t&w0?27:28)}static from(e){function t(c,h){H(c,h,"signature",e)}if(e==null)return new Zt(ra,v0,v0,27);if(typeof e=="string"){const c=rt(e,"signature");if(c.length===64){const h=ye(c.slice(0,32)),f=c.slice(32,64),p=f[0]&128?28:27;return f[0]&=127,new Zt(ra,h,ye(f),p)}if(c.length===65){const h=ye(c.slice(0,32)),f=ye(c.slice(32,64)),p=Zt.getNormalizedV(c[64]);return new Zt(ra,h,f,p)}t(!1,"invalid raw signature length")}if(e instanceof Zt)return e.clone();const s=e.r;t(s!=null,"missing r");const r=I0(s),i=(function(c,h){if(c!=null)return I0(c);if(h!=null){t(Bt(h,32),"invalid yParityAndS");const f=rt(h);return f[0]&=127,ye(f)}t(!1,"missing s")})(e.s,e.yParityAndS),{networkV:o,v:a}=(function(c,h,f){if(c!=null){const p=Ie(c);return{networkV:p>=Ju?p:void 0,v:Zt.getNormalizedV(p)}}if(h!=null)return t(Bt(h,32),"invalid yParityAndS"),{v:rt(h)[0]&128?28:27};if(f!=null){switch(tt(f,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),l=new Zt(ra,r,i,a);return o&&(l.#s=o),t(e.yParity==null||tt(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}}class Vr{#e;constructor(e){H(Ea(e)===32,"invalid private key","privateKey","[REDACTED]"),this.#e=ye(e)}get privateKey(){return this.#e}get publicKey(){return Vr.computePublicKey(this.#e)}get compressedPublicKey(){return Vr.computePublicKey(this.#e,!0)}sign(e){H(Ea(e)===32,"invalid digest length","digest",e);const t=Ci.sign(ls(e),ls(this.#e),{lowS:!0});return Zt.from({r:Qi(t.r,32),s:Qi(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=Vr.computePublicKey(e);return ye(Ci.getSharedSecret(ls(this.#e),rt(t),!1))}static computePublicKey(e,t){let s=rt(e,"key");if(s.length===32){const i=Ci.getPublicKey(s,!!t);return ye(i)}if(s.length===64){const i=new Uint8Array(65);i[0]=4,i.set(s,1),s=i}const r=Ci.ProjectivePoint.fromHex(s);return ye(r.toRawBytes(t))}static recoverPublicKey(e,t){H(Ea(e)===32,"invalid digest length","digest",e);const s=Zt.from(t);let r=Ci.Signature.fromCompact(ls(nn([s.r,s.s])));r=r.addRecoveryBit(s.yParity);const i=r.recoverPublicKey(ls(e));return H(i!=null,"invalid signature for digest","signature",t),"0x"+i.toHex(!1)}static addPoints(e,t,s){const r=Ci.ProjectivePoint.fromHex(Vr.computePublicKey(e).substring(2)),i=Ci.ProjectivePoint.fromHex(Vr.computePublicKey(t).substring(2));return"0x"+r.add(i).toHex(!!s)}}const O2=BigInt(0),L2=BigInt(36);function C0(n){n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let r=0;r<40;r++)t[r]=e[r].charCodeAt(0);const s=rt(mn(t));for(let r=0;r<40;r+=2)s[r>>1]>>4>=8&&(e[r]=e[r].toUpperCase()),(s[r>>1]&15)>=8&&(e[r+1]=e[r+1].toUpperCase());return"0x"+e.join("")}const ym={};for(let n=0;n<10;n++)ym[String(n)]=String(n);for(let n=0;n<26;n++)ym[String.fromCharCode(65+n)]=String(10+n);const T0=15;function B2(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(s=>ym[s]).join("");for(;e.length>=T0;){let s=e.substring(0,T0);e=parseInt(s,10)%97+e.substring(s.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const M2=(function(){const n={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];n[t]=BigInt(e)}return n})();function F2(n){n=n.toLowerCase();let e=O2;for(let t=0;t<n.length;t++)e=e*L2+M2[n[t]];return e}function Et(n){if(H(typeof n=="string","invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/)){n.startsWith("0x")||(n="0x"+n);const e=C0(n);return H(!n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===n,"bad address checksum","address",n),e}if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){H(n.substring(2,4)===B2(n),"bad icap checksum","address",n);let e=F2(n.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return C0("0x"+e)}H(!1,"invalid address","address",n)}function U2(n){const e=Et(n.from);let s=Ie(n.nonce,"tx.nonce").toString(16);return s==="0"?s="0x":s.length%2?s="0x0"+s:s="0x"+s,Et(Xt(mn(ji([e,s])),12))}function Db(n){return n&&typeof n.getAddress=="function"}async function qf(n,e){const t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(oe(typeof n!="string","unconfigured name","UNCONFIGURED_NAME",{value:n}),H(!1,"invalid AddressLike value; did not resolve to a value address","target",n)),Et(t)}function hs(n,e){if(typeof n=="string")return n.match(/^0x[0-9a-f]{40}$/i)?Et(n):(oe(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),qf(n,e.resolveName(n)));if(Db(n))return qf(n,n.getAddress());if(n&&typeof n.then=="function")return qf(n,n);H(!1,"unsupported addressable value","target",n)}const Dr={};function be(n,e){let t=!1;return e<0&&(t=!0,e*=-1),new en(Dr,`${t?"":"u"}int${e}`,n,{signed:t,width:e})}function mt(n,e){return new en(Dr,`bytes${e||""}`,n,{size:e})}const S0=Symbol.for("_ethers_typed");class en{type;value;#e;_typedSymbol;constructor(e,t,s,r){r==null&&(r=null),kc(Dr,e,"Typed"),Fe(this,{_typedSymbol:S0,type:t,value:s}),this.#e=r,this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return this.#e}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return this.#e===!0?-1:this.#e===!1?this.value.length:null}static from(e,t){return new en(Dr,e,t)}static uint8(e){return be(e,8)}static uint16(e){return be(e,16)}static uint24(e){return be(e,24)}static uint32(e){return be(e,32)}static uint40(e){return be(e,40)}static uint48(e){return be(e,48)}static uint56(e){return be(e,56)}static uint64(e){return be(e,64)}static uint72(e){return be(e,72)}static uint80(e){return be(e,80)}static uint88(e){return be(e,88)}static uint96(e){return be(e,96)}static uint104(e){return be(e,104)}static uint112(e){return be(e,112)}static uint120(e){return be(e,120)}static uint128(e){return be(e,128)}static uint136(e){return be(e,136)}static uint144(e){return be(e,144)}static uint152(e){return be(e,152)}static uint160(e){return be(e,160)}static uint168(e){return be(e,168)}static uint176(e){return be(e,176)}static uint184(e){return be(e,184)}static uint192(e){return be(e,192)}static uint200(e){return be(e,200)}static uint208(e){return be(e,208)}static uint216(e){return be(e,216)}static uint224(e){return be(e,224)}static uint232(e){return be(e,232)}static uint240(e){return be(e,240)}static uint248(e){return be(e,248)}static uint256(e){return be(e,256)}static uint(e){return be(e,256)}static int8(e){return be(e,-8)}static int16(e){return be(e,-16)}static int24(e){return be(e,-24)}static int32(e){return be(e,-32)}static int40(e){return be(e,-40)}static int48(e){return be(e,-48)}static int56(e){return be(e,-56)}static int64(e){return be(e,-64)}static int72(e){return be(e,-72)}static int80(e){return be(e,-80)}static int88(e){return be(e,-88)}static int96(e){return be(e,-96)}static int104(e){return be(e,-104)}static int112(e){return be(e,-112)}static int120(e){return be(e,-120)}static int128(e){return be(e,-128)}static int136(e){return be(e,-136)}static int144(e){return be(e,-144)}static int152(e){return be(e,-152)}static int160(e){return be(e,-160)}static int168(e){return be(e,-168)}static int176(e){return be(e,-176)}static int184(e){return be(e,-184)}static int192(e){return be(e,-192)}static int200(e){return be(e,-200)}static int208(e){return be(e,-208)}static int216(e){return be(e,-216)}static int224(e){return be(e,-224)}static int232(e){return be(e,-232)}static int240(e){return be(e,-240)}static int248(e){return be(e,-248)}static int256(e){return be(e,-256)}static int(e){return be(e,-256)}static bytes1(e){return mt(e,1)}static bytes2(e){return mt(e,2)}static bytes3(e){return mt(e,3)}static bytes4(e){return mt(e,4)}static bytes5(e){return mt(e,5)}static bytes6(e){return mt(e,6)}static bytes7(e){return mt(e,7)}static bytes8(e){return mt(e,8)}static bytes9(e){return mt(e,9)}static bytes10(e){return mt(e,10)}static bytes11(e){return mt(e,11)}static bytes12(e){return mt(e,12)}static bytes13(e){return mt(e,13)}static bytes14(e){return mt(e,14)}static bytes15(e){return mt(e,15)}static bytes16(e){return mt(e,16)}static bytes17(e){return mt(e,17)}static bytes18(e){return mt(e,18)}static bytes19(e){return mt(e,19)}static bytes20(e){return mt(e,20)}static bytes21(e){return mt(e,21)}static bytes22(e){return mt(e,22)}static bytes23(e){return mt(e,23)}static bytes24(e){return mt(e,24)}static bytes25(e){return mt(e,25)}static bytes26(e){return mt(e,26)}static bytes27(e){return mt(e,27)}static bytes28(e){return mt(e,28)}static bytes29(e){return mt(e,29)}static bytes30(e){return mt(e,30)}static bytes31(e){return mt(e,31)}static bytes32(e){return mt(e,32)}static address(e){return new en(Dr,"address",e)}static bool(e){return new en(Dr,"bool",!!e)}static bytes(e){return new en(Dr,"bytes",e)}static string(e){return new en(Dr,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new en(Dr,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===S0}static dereference(e,t){if(en.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}}class V2 extends ui{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let s=en.dereference(t,"string");try{s=Et(s)}catch(r){return this._throwError(r.message,t)}return e.writeValue(s)}decode(e){return Et(Qi(e.readValue(),20))}}class $2 extends ui{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function Ob(n,e,t){let s=[];if(Array.isArray(t))s=t;else if(t&&typeof t=="object"){let l={};s=e.map(c=>{const h=c.localName;return oe(h,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:t}),oe(!l[h],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:t}),l[h]=!0,t[h]})}else H(!1,"invalid tuple value","tuple",t);H(e.length===s.length,"types/value length mismatch","tuple",t);let r=new Qp,i=new Qp,o=[];e.forEach((l,c)=>{let h=s[c];if(l.dynamic){let f=i.length;l.encode(i,h);let p=r.writeUpdatableValue();o.push(m=>{p(m+f)})}else l.encode(r,h)}),o.forEach(l=>{l(r.length)});let a=n.appendWriter(r);return a+=n.appendWriter(i),a}function Lb(n,e){let t=[],s=[],r=n.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=n.readIndex(),l=r.subReader(a);try{o=i.decode(l)}catch(c){if(Un(c,"BUFFER_OVERRUN"))throw c;o=c,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(n)}catch(a){if(Un(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");t.push(o),s.push(i.localName||null)}),Gr.fromItems(t,s)}class H2 extends ui{coder;length;constructor(e,t,s){const r=e.type+"["+(t>=0?t:"")+"]",i=t===-1||e.dynamic;super("array",r,s,i),Fe(this,{coder:e,length:t})}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let s=0;s<this.length;s++)t.push(e);return t}encode(e,t){const s=en.dereference(t,"array");Array.isArray(s)||this._throwError("expected array value",s);let r=this.length;r===-1&&(r=s.length,e.writeValue(s.length)),QE(s.length,r,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let o=0;o<s.length;o++)i.push(this.coder);return Ob(e,i,s)}decode(e){let t=this.length;t===-1&&(t=e.readIndex(),oe(t*us<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*us,length:e.dataLength}));let s=[];for(let r=0;r<t;r++)s.push(new $2(this.coder));return Lb(e,s)}}class G2 extends ui{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const s=en.dereference(t,"bool");return e.writeValue(s?1:0)}decode(e){return!!e.readValue()}}class Bb extends ui{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=ls(t);let s=e.writeValue(t.length);return s+=e.writeBytes(t),s}decode(e){return e.readBytes(e.readIndex(),!0)}}class Q2 extends Bb{constructor(e){super("bytes",e)}decode(e){return ye(super.decode(e))}}class j2 extends ui{size;constructor(e,t){let s="bytes"+String(e);super(s,s,t,!1),Fe(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let s=ls(en.dereference(t,this.type));return s.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(s)}decode(e){return ye(e.readBytes(this.size))}}const z2=new Uint8Array([]);class W2 extends ui{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(z2)}decode(e){return e.readBytes(0),null}}const K2=BigInt(0),q2=BigInt(1),J2=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Y2 extends ui{size;signed;constructor(e,t,s){const r=(t?"int":"uint")+e*8;super(r,r,s,!1),Fe(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let s=Ie(en.dereference(t,this.type)),r=bo(J2,us*8);if(this.signed){let i=bo(r,this.size*8-1);(s>i||s<-(i+q2))&&this._throwError("value out-of-bounds",t),s=WE(s,8*us)}else(s<K2||s>bo(r,this.size*8))&&this._throwError("value out-of-bounds",t);return e.writeValue(s)}decode(e){let t=bo(e.readValue(),this.size*8);return this.signed&&(t=$h(t,this.size*8)),t}}class X2 extends Bb{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Kr(en.dereference(t,"string")))}decode(e){return Hh(super.decode(e))}}class Yu extends ui{coders;constructor(e,t){let s=!1;const r=[];e.forEach(o=>{o.dynamic&&(s=!0),r.push(o.type)});const i="tuple("+r.join(",")+")";super("tuple",i,t,s),Fe(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(s=>{e.push(s.defaultValue())});const t=this.coders.reduce((s,r)=>{const i=r.localName;return i&&(s[i]||(s[i]=0),s[i]++),s},{});return this.coders.forEach((s,r)=>{let i=s.localName;!i||t[i]!==1||(i==="length"&&(i="_length"),e[i]==null&&(e[i]=e[r]))}),Object.freeze(e)}encode(e,t){const s=en.dereference(t,"tuple");return Ob(e,this.coders,s)}decode(e){return Lb(e,this.coders)}}function Jf(n,e){return{address:Et(n),storageKeys:e.map((t,s)=>(H(Bt(t,32),"invalid slot",`storageKeys[${s}]`,t),t.toLowerCase()))}}function jo(n){if(Array.isArray(n))return n.map((t,s)=>Array.isArray(t)?(H(t.length===2,"invalid slot set",`value[${s}]`,t),Jf(t[0],t[1])):(H(t!=null&&typeof t=="object","invalid address-slot set","value",n),Jf(t.address,t.storageKeys)));H(n!=null&&typeof n=="object","invalid access list","value",n);const e=Object.keys(n).map(t=>{const s=n[t].reduce((r,i)=>(r[i]=!0,r),{});return Jf(t,Object.keys(s).sort())});return e.sort((t,s)=>t.address.localeCompare(s.address)),e}function Mb(n){return{address:Et(n.address),nonce:Ie(n.nonce!=null?n.nonce:0),chainId:Ie(n.chainId!=null?n.chainId:0),signature:Zt.from(n.signature)}}function Z2(n){let e;return typeof n=="string"?e=Vr.computePublicKey(n,!1):e=n.publicKey,Et(mn("0x"+e.substring(4)).substring(26))}function eN(n,e){return Z2(Vr.recoverPublicKey(n,e))}const Nn=BigInt(0),tN=BigInt(2),nN=BigInt(27),sN=BigInt(28),rN=BigInt(35),iN=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Yf=4096*32;function oN(n){return{blobToKzgCommitment:s=>{if("computeBlobProof"in n){if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return rt(n.blobToKzgCommitment(ye(s)))}else if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return rt(n.blobToKzgCommitment(s));if("blobToKZGCommitment"in n&&typeof n.blobToKZGCommitment=="function")return rt(n.blobToKZGCommitment(ye(s)));H(!1,"unsupported KZG library","kzg",n)},computeBlobKzgProof:(s,r)=>{if("computeBlobProof"in n&&typeof n.computeBlobProof=="function")return rt(n.computeBlobProof(ye(s),ye(r)));if("computeBlobKzgProof"in n&&typeof n.computeBlobKzgProof=="function")return n.computeBlobKzgProof(s,r);if("computeBlobKZGProof"in n&&typeof n.computeBlobKZGProof=="function")return rt(n.computeBlobKZGProof(ye(s),ye(r)));H(!1,"unsupported KZG library","kzg",n)}}}function P0(n,e){let t=n.toString(16);for(;t.length<2;)t="0"+t;return t+=el(e).substring(4),"0x"+t}function tl(n){return n==="0x"?null:Et(n)}function Ud(n,e){try{return jo(n)}catch(t){H(!1,t.message,e,n)}}function aN(n,e){try{if(!Array.isArray(n))throw new Error("authorizationList: invalid array");const t=[];for(let s=0;s<n.length;s++){const r=n[s];if(!Array.isArray(r))throw new Error(`authorization[${s}]: invalid array`);if(r.length!==6)throw new Error(`authorization[${s}]: wrong length`);if(!r[1])throw new Error(`authorization[${s}]: null address`);t.push({address:tl(r[1]),nonce:Pt(r[2],"nonce"),chainId:Pt(r[0],"chainId"),signature:Zt.from({yParity:zo(r[3],"yParity"),r:ei(r[4],32),s:ei(r[5],32)})})}return t}catch(t){H(!1,t.message,e,n)}}function zo(n,e){return n==="0x"?0:tt(n,e)}function Pt(n,e){if(n==="0x")return Nn;const t=Ie(n,e);return H(t<=iN,"value exceeds uint size",e,t),t}function ut(n,e){const t=Ie(n,"value"),s=bn(t);return H(s.length<=32,"value too large",`tx.${e}`,t),s}function Vd(n){return jo(n).map(e=>[e.address,e.storageKeys])}function lN(n){return n.map(e=>[ut(e.chainId,"chainId"),e.address,ut(e.nonce,"nonce"),ut(e.signature.yParity,"yParity"),bn(e.signature.r),bn(e.signature.s)])}function cN(n,e){H(Array.isArray(n),`invalid ${e}`,"value",n);for(let t=0;t<n.length;t++)H(Bt(n[t],32),"invalid ${ param } hash",`value[${t}]`,n[t]);return n}function uN(n){const e=Nc(n);H(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",n);const t={type:0,nonce:zo(e[0],"nonce"),gasPrice:Pt(e[1],"gasPrice"),gasLimit:Pt(e[2],"gasLimit"),to:tl(e[3]),value:Pt(e[4],"value"),data:ye(e[5]),chainId:Nn};if(e.length===6)return t;const s=Pt(e[6],"v"),r=Pt(e[7],"r"),i=Pt(e[8],"s");if(r===Nn&&i===Nn)t.chainId=s;else{let o=(s-rN)/tN;o<Nn&&(o=Nn),t.chainId=o,H(o!==Nn||s===nN||s===sN,"non-canonical legacy v","v",e[6]),t.signature=Zt.from({r:ei(e[7],32),s:ei(e[8],32),v:s})}return t}function hN(n,e){const t=[ut(n.nonce,"nonce"),ut(n.gasPrice||0,"gasPrice"),ut(n.gasLimit,"gasLimit"),n.to||"0x",ut(n.value,"value"),n.data];let s=Nn;if(n.chainId!=Nn)s=Ie(n.chainId,"tx.chainId"),H(!e||e.networkV==null||e.legacyChainId===s,"tx.chainId/sig.v mismatch","sig",e);else if(n.signature){const i=n.signature.legacyChainId;i!=null&&(s=i)}if(!e)return s!==Nn&&(t.push(bn(s)),t.push("0x"),t.push("0x")),ji(t);let r=BigInt(27+e.yParity);return s!==Nn?r=Zt.getChainIdV(s,e.v):BigInt(e.v)!==r&&H(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(bn(r)),t.push(bn(e.r)),t.push(bn(e.s)),ji(t)}function $d(n,e){let t;try{if(t=zo(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{H(!1,"invalid yParity","yParity",e[0])}const s=ei(e[1],32),r=ei(e[2],32),i=Zt.from({r:s,s:r,yParity:t});n.signature=i}function dN(n){const e=Nc(rt(n).slice(1));H(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",ye(n));const t={type:2,chainId:Pt(e[0],"chainId"),nonce:zo(e[1],"nonce"),maxPriorityFeePerGas:Pt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Pt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Pt(e[4],"gasLimit"),to:tl(e[5]),value:Pt(e[6],"value"),data:ye(e[7]),accessList:Ud(e[8],"accessList")};return e.length===9||$d(t,e.slice(9)),t}function fN(n,e){const t=[ut(n.chainId,"chainId"),ut(n.nonce,"nonce"),ut(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ut(n.maxFeePerGas||0,"maxFeePerGas"),ut(n.gasLimit,"gasLimit"),n.to||"0x",ut(n.value,"value"),n.data,Vd(n.accessList||[])];return e&&(t.push(ut(e.yParity,"yParity")),t.push(bn(e.r)),t.push(bn(e.s))),nn(["0x02",ji(t)])}function pN(n){const e=Nc(rt(n).slice(1));H(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",ye(n));const t={type:1,chainId:Pt(e[0],"chainId"),nonce:zo(e[1],"nonce"),gasPrice:Pt(e[2],"gasPrice"),gasLimit:Pt(e[3],"gasLimit"),to:tl(e[4]),value:Pt(e[5],"value"),data:ye(e[6]),accessList:Ud(e[7],"accessList")};return e.length===8||$d(t,e.slice(8)),t}function gN(n,e){const t=[ut(n.chainId,"chainId"),ut(n.nonce,"nonce"),ut(n.gasPrice||0,"gasPrice"),ut(n.gasLimit,"gasLimit"),n.to||"0x",ut(n.value,"value"),n.data,Vd(n.accessList||[])];return e&&(t.push(ut(e.yParity,"recoveryParam")),t.push(bn(e.r)),t.push(bn(e.s))),nn(["0x01",ji(t)])}function mN(n){let e=Nc(rt(n).slice(1)),t="3",s=null;if(e.length===4&&Array.isArray(e[0])){t="3 (network format)";const i=e[1],o=e[2],a=e[3];H(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),H(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),H(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),H(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),H(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),s=[];for(let l=0;l<e[1].length;l++)s.push({data:i[l],commitment:o[l],proof:a[l]});e=e[0]}H(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${t}`,"data",ye(n));const r={type:3,chainId:Pt(e[0],"chainId"),nonce:zo(e[1],"nonce"),maxPriorityFeePerGas:Pt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Pt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Pt(e[4],"gasLimit"),to:tl(e[5]),value:Pt(e[6],"value"),data:ye(e[7]),accessList:Ud(e[8],"accessList"),maxFeePerBlobGas:Pt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};s&&(r.blobs=s),H(r.to!=null,`invalid address for transaction type: ${t}`,"data",n),H(Array.isArray(r.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",n);for(let i=0;i<r.blobVersionedHashes.length;i++)H(Bt(r.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",n);return e.length===11||$d(r,e.slice(11)),r}function yN(n,e,t){const s=[ut(n.chainId,"chainId"),ut(n.nonce,"nonce"),ut(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ut(n.maxFeePerGas||0,"maxFeePerGas"),ut(n.gasLimit,"gasLimit"),n.to||cc,ut(n.value,"value"),n.data,Vd(n.accessList||[]),ut(n.maxFeePerBlobGas||0,"maxFeePerBlobGas"),cN(n.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(s.push(ut(e.yParity,"yParity")),s.push(bn(e.r)),s.push(bn(e.s)),t)?nn(["0x03",ji([s,t.map(r=>r.data),t.map(r=>r.commitment),t.map(r=>r.proof)])]):nn(["0x03",ji(s)])}function vN(n){const e=Nc(rt(n).slice(1));H(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",ye(n));const t={type:4,chainId:Pt(e[0],"chainId"),nonce:zo(e[1],"nonce"),maxPriorityFeePerGas:Pt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Pt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Pt(e[4],"gasLimit"),to:tl(e[5]),value:Pt(e[6],"value"),data:ye(e[7]),accessList:Ud(e[8],"accessList"),authorizationList:aN(e[9],"authorizationList")};return e.length===10||$d(t,e.slice(10)),t}function AN(n,e){const t=[ut(n.chainId,"chainId"),ut(n.nonce,"nonce"),ut(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ut(n.maxFeePerGas||0,"maxFeePerGas"),ut(n.gasLimit,"gasLimit"),n.to||"0x",ut(n.value,"value"),n.data,Vd(n.accessList||[]),lN(n.authorizationList||[])];return e&&(t.push(ut(e.yParity,"yParity")),t.push(bn(e.r)),t.push(bn(e.s))),nn(["0x04",ji(t)])}class Ks{#e;#t;#n;#s;#r;#o;#i;#a;#h;#c;#p;#g;#l;#u;#d;#f;#y;get type(){return this.#e}set type(e){switch(e){case null:this.#e=null;break;case 0:case"legacy":this.#e=0;break;case 1:case"berlin":case"eip-2930":this.#e=1;break;case 2:case"london":case"eip-1559":this.#e=2;break;case 3:case"cancun":case"eip-4844":this.#e=3;break;case 4:case"pectra":case"eip-7702":this.#e=4;break;default:H(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=this.#t;return e==null&&this.type===3?cc:e}set to(e){this.#t=e==null?null:Et(e)}get nonce(){return this.#s}set nonce(e){this.#s=tt(e,"value")}get gasLimit(){return this.#r}set gasLimit(e){this.#r=Ie(e)}get gasPrice(){const e=this.#o;return e==null&&(this.type===0||this.type===1)?Nn:e}set gasPrice(e){this.#o=e==null?null:Ie(e,"gasPrice")}get maxPriorityFeePerGas(){const e=this.#i;return e??(this.type===2||this.type===3?Nn:null)}set maxPriorityFeePerGas(e){this.#i=e==null?null:Ie(e,"maxPriorityFeePerGas")}get maxFeePerGas(){const e=this.#a;return e??(this.type===2||this.type===3?Nn:null)}set maxFeePerGas(e){this.#a=e==null?null:Ie(e,"maxFeePerGas")}get data(){return this.#n}set data(e){this.#n=ye(e)}get value(){return this.#h}set value(e){this.#h=Ie(e,"value")}get chainId(){return this.#c}set chainId(e){this.#c=Ie(e)}get signature(){return this.#p||null}set signature(e){this.#p=e==null?null:Zt.from(e)}get accessList(){const e=this.#g||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){this.#g=e==null?null:jo(e)}get authorizationList(){const e=this.#y||null;return e==null&&this.type===4?[]:e}set authorizationList(e){this.#y=e==null?null:e.map(t=>Mb(t))}get maxFeePerBlobGas(){const e=this.#l;return e==null&&this.type===3?Nn:e}set maxFeePerBlobGas(e){this.#l=e==null?null:Ie(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#u;return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){H(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)H(Bt(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}this.#u=e}get blobs(){return this.#f==null?null:this.#f.map(e=>Object.assign({},e))}set blobs(e){if(e==null){this.#f=null;return}const t=[],s=[];for(let r=0;r<e.length;r++){const i=e[r];if(am(i)){oe(this.#d,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=rt(i);if(H(o.length<=Yf,"blob is too large",`blobs[${r}]`,i),o.length!==Yf){const c=new Uint8Array(Yf);c.set(o),o=c}const a=this.#d.blobToKzgCommitment(o),l=ye(this.#d.computeBlobKzgProof(o,a));t.push({data:ye(o),commitment:ye(a),proof:l}),s.push(P0(1,a))}else{const o=ye(i.commitment);t.push({data:ye(i.data),commitment:o,proof:ye(i.proof)}),s.push(P0(1,o))}}this.#f=t,this.#u=s}get kzg(){return this.#d}set kzg(e){e==null?this.#d=null:this.#d=oN(e)}constructor(){this.#e=null,this.#t=null,this.#s=0,this.#r=Nn,this.#o=null,this.#i=null,this.#a=null,this.#n="0x",this.#h=Nn,this.#c=Nn,this.#p=null,this.#g=null,this.#l=null,this.#u=null,this.#d=null,this.#f=null,this.#y=null}get hash(){return this.signature==null?null:mn(this.#m(!0,!1))}get unsignedHash(){return mn(this.unsignedSerialized)}get from(){return this.signature==null?null:eN(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:Vr.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}#m(e,t){oe(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const s=e?this.signature:null;switch(this.inferType()){case 0:return hN(this,s);case 1:return gN(this,s);case 2:return fN(this,s);case 3:return yN(this,s,t?this.blobs:null);case 4:return AN(this,s)}oe(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#m(!0,!0)}get unsignedSerialized(){return this.#m(!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,s=this.accessList!=null,r=this.#l!=null||this.#u;this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&oe(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),oe(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),oe(this.type!==0||!s,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):t?i.push(2):e?(i.push(1),s||i.push(0)):s?(i.push(1),i.push(2)):(r&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Ks.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new Ks;if(typeof e=="string"){const s=rt(e);if(s[0]>=127)return Ks.from(uN(s));switch(s[0]){case 1:return Ks.from(pN(s));case 2:return Ks.from(dN(s));case 3:return Ks.from(mN(s));case 4:return Ks.from(vN(s))}oe(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new Ks;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=Zt.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.authorizationList!=null&&(t.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(H(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),H(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(H(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),H(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}}function Bo(n){return mn(Kr(n))}var wN="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const R0=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),x0=4;function _N(n){let e=0;function t(){return n[e++]<<8|n[e++]}let s=t(),r=1,i=[0,1];for(let W=1;W<s;W++)i.push(r+=t());let o=t(),a=e;e+=o;let l=0,c=0;function h(){return l==0&&(c=c<<8|n[e++],l=8),c>>--l&1}const f=31,p=2**f,m=p>>>1,_=m>>1,v=p-1;let A=0;for(let W=0;W<f;W++)A=A<<1|h();let w=[],T=0,P=p;for(;;){let W=Math.floor(((A-T+1)*r-1)/P),q=0,x=s;for(;x-q>1;){let C=q+x>>>1;W<i[C]?x=C:q=C}if(q==0)break;w.push(q);let I=T+Math.floor(P*i[q]/r),S=T+Math.floor(P*i[q+1]/r)-1;for(;((I^S)&m)==0;)A=A<<1&v|h(),I=I<<1&v,S=S<<1&v|1;for(;I&~S&_;)A=A&m|A<<1&v>>>1|h(),I=I<<1^m,S=(S^m)<<1|m|1;T=I,P=1+S-I}let U=s-4;return w.map(W=>{switch(W-U){case 3:return U+65792+(n[a++]<<16|n[a++]<<8|n[a++]);case 2:return U+256+(n[a++]<<8|n[a++]);case 1:return U+n[a++];default:return W-1}})}function EN(n){let e=0;return()=>n[e++]}function Fb(n){return EN(_N(bN(n)))}function bN(n){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((r,i)=>e[r.charCodeAt(0)]=i);let t=n.length,s=new Uint8Array(6*t>>3);for(let r=0,i=0,o=0,a=0;r<t;r++)a=a<<6|e[n.charCodeAt(r)],o+=6,o>=8&&(s[i++]=a>>(o-=8));return s}function IN(n){return n&1?~n>>1:n>>1}function CN(n,e){let t=Array(n);for(let s=0,r=0;s<n;s++)t[s]=r+=IN(e());return t}function uc(n,e=0){let t=[];for(;;){let s=n(),r=n();if(!r)break;e+=s;for(let i=0;i<r;i++)t.push(e+i);e+=r+1}return t}function Ub(n){return hc(()=>{let e=uc(n);if(e.length)return e})}function Vb(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(TN(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(SN(t,n))}return e.flat()}function hc(n){let e=[];for(;;){let t=n(e.length);if(!t)break;e.push(t)}return e}function $b(n,e,t){let s=Array(n).fill().map(()=>[]);for(let r=0;r<e;r++)CN(n,t).forEach((i,o)=>s[o].push(i));return s}function TN(n,e){let t=1+e(),s=e(),r=hc(e);return $b(r.length,1+n,e).flatMap((o,a)=>{let[l,...c]=o;return Array(r[a]).fill().map((h,f)=>{let p=f*s;return[l+f*t,c.map(m=>m+p)]})})}function SN(n,e){let t=1+e();return $b(t,1+n,e).map(r=>[r[0],r.slice(1)])}function PN(n){let e=[],t=uc(n);return r(s([]),[]),e;function s(i){let o=n(),a=hc(()=>{let l=uc(n).map(c=>t[c]);if(l.length)return s(l)});return{S:o,B:a,Q:i}}function r({S:i,B:o},a,l){if(!(i&4&&l===a[a.length-1])){i&2&&(l=a[a.length-1]),i&1&&e.push(a);for(let c of o)for(let h of c.Q)r(c,[...a,h],l)}}}function RN(n){return n.toString(16).toUpperCase().padStart(2,"0")}function Hb(n){return`{${RN(n)}}`}function xN(n){let e=[];for(let t=0,s=n.length;t<s;){let r=n.codePointAt(t);t+=r<65536?1:2,e.push(r)}return e}function $a(n){let t=n.length;if(t<4096)return String.fromCodePoint(...n);let s=[];for(let r=0;r<t;)s.push(String.fromCodePoint(...n.slice(r,r+=4096)));return s.join("")}function kN(n,e){let t=n.length,s=t-e.length;for(let r=0;s==0&&r<t;r++)s=n[r]-e[r];return s}var NN="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const dc=44032,Qh=4352,jh=4449,zh=4519,Gb=19,Qb=21,Ha=28,Wh=Qb*Ha,DN=Gb*Wh,ON=dc+DN,LN=Qh+Gb,BN=jh+Qb,MN=zh+Ha;function Rl(n){return n>>24&255}function jb(n){return n&16777215}let Jp,k0,Yp,gh;function FN(){let n=Fb(NN);Jp=new Map(Ub(n).flatMap((e,t)=>e.map(s=>[s,t+1<<24]))),k0=new Set(uc(n)),Yp=new Map,gh=new Map;for(let[e,t]of Vb(n)){if(!k0.has(e)&&t.length==2){let[s,r]=t,i=gh.get(s);i||(i=new Map,gh.set(s,i)),i.set(r,e)}Yp.set(e,t.reverse())}}function zb(n){return n>=dc&&n<ON}function UN(n,e){if(n>=Qh&&n<LN&&e>=jh&&e<BN)return dc+(n-Qh)*Wh+(e-jh)*Ha;if(zb(n)&&e>zh&&e<MN&&(n-dc)%Ha==0)return n+(e-zh);{let t=gh.get(n);return t&&(t=t.get(e),t)?t:-1}}function Wb(n){Jp||FN();let e=[],t=[],s=!1;function r(i){let o=Jp.get(i);o&&(s=!0,i|=o),e.push(i)}for(let i of n)for(;;){if(i<128)e.push(i);else if(zb(i)){let o=i-dc,a=o/Wh|0,l=o%Wh/Ha|0,c=o%Ha;r(Qh+a),r(jh+l),c>0&&r(zh+c)}else{let o=Yp.get(i);o?t.push(...o):r(i)}if(!t.length)break;i=t.pop()}if(s&&e.length>1){let i=Rl(e[0]);for(let o=1;o<e.length;o++){let a=Rl(e[o]);if(a==0||i<=a){i=a;continue}let l=o-1;for(;;){let c=e[l+1];if(e[l+1]=e[l],e[l]=c,!l||(i=Rl(e[--l]),i<=a))break}i=Rl(e[o])}}return e}function VN(n){let e=[],t=[],s=-1,r=0;for(let i of n){let o=Rl(i),a=jb(i);if(s==-1)o==0?s=a:e.push(a);else if(r>0&&r>=o)o==0?(e.push(s,...t),t.length=0,s=a):t.push(a),r=o;else{let l=UN(s,a);l>=0?s=l:r==0&&o==0?(e.push(s),s=a):(t.push(a),r=o)}}return s>=0&&e.push(s,...t),e}function Kb(n){return Wb(n).map(jb)}function $N(n){return VN(Wb(n))}const N0=45,qb=".",Jb=65039,Yb=1,Kh=n=>Array.from(n);function fc(n,e){return n.P.has(e)||n.Q.has(e)}class HN extends Array{get is_emoji(){return!0}}let Xp,Xb,Co,Zp,Zb,Ia,Xf,la,go,D0,eg;function vm(){if(Xp)return;let n=Fb(wN);const e=()=>uc(n),t=()=>new Set(e()),s=(h,f)=>f.forEach(p=>h.add(p));Xp=new Map(Vb(n)),Xb=t(),Co=e(),Zp=new Set(e().map(h=>Co[h])),Co=new Set(Co),Zb=t(),t();let r=Ub(n),i=n();const o=()=>{let h=new Set;return e().forEach(f=>s(h,r[f])),s(h,e()),h};Ia=hc(h=>{let f=hc(n).map(p=>p+96);if(f.length){let p=h>=i;f[0]-=32,f=$a(f),p&&(f=`Restricted[${f}]`);let m=o(),_=o(),v=!n();return{N:f,P:m,Q:_,M:v,R:p}}}),Xf=t(),la=new Map;let a=e().concat(Kh(Xf)).sort((h,f)=>h-f);a.forEach((h,f)=>{let p=n(),m=a[f]=p?a[f-p]:{V:[],M:new Map};m.V.push(h),Xf.has(h)||la.set(h,m)});for(let{V:h,M:f}of new Set(la.values())){let p=[];for(let _ of h){let v=Ia.filter(w=>fc(w,_)),A=p.find(({G:w})=>v.some(T=>w.has(T)));A||(A={G:new Set,V:[]},p.push(A)),A.V.push(_),s(A.G,v)}let m=p.flatMap(_=>Kh(_.G));for(let{G:_,V:v}of p){let A=new Set(m.filter(w=>!_.has(w)));for(let w of v)f.set(w,A)}}go=new Set;let l=new Set;const c=h=>go.has(h)?l.add(h):go.add(h);for(let h of Ia){for(let f of h.P)c(f);for(let f of h.Q)c(f)}for(let h of go)!la.has(h)&&!l.has(h)&&la.set(h,Yb);s(go,Kb(go)),D0=PN(n).map(h=>HN.from(h)).sort(kN),eg=new Map;for(let h of D0){let f=[eg];for(let p of h){let m=f.map(_=>{let v=_.get(p);return v||(v=new Map,_.set(p,v)),v});p===Jb?f.push(...m):f=m}for(let p of f)p.V=h}}function Am(n){return(e1(n)?"":`${wm(Hd([n]))} `)+Hb(n)}function wm(n){return`"${n}"`}function GN(n){if(n.length>=4&&n[2]==N0&&n[3]==N0)throw new Error(`invalid label extension: "${$a(n.slice(0,4))}"`)}function QN(n){for(let t=n.lastIndexOf(95);t>0;)if(n[--t]!==95)throw new Error("underscore allowed only at start")}function jN(n){let e=n[0],t=R0.get(e);if(t)throw Ql(`leading ${t}`);let s=n.length,r=-1;for(let i=1;i<s;i++){e=n[i];let o=R0.get(e);if(o){if(r==i)throw Ql(`${t} + ${o}`);r=i+1,t=o}}if(r==s)throw Ql(`trailing ${t}`)}function Hd(n,e=1/0,t=Hb){let s=[];zN(n[0])&&s.push(""),n.length>e&&(e>>=1,n=[...n.slice(0,e),8230,...n.slice(-e)]);let r=0,i=n.length;for(let o=0;o<i;o++){let a=n[o];e1(a)&&(s.push($a(n.slice(r,o))),s.push(t(a)),r=o+1)}return s.push($a(n.slice(r,i))),s.join("")}function zN(n){return vm(),Co.has(n)}function e1(n){return vm(),Zb.has(n)}function WN(n){return YN(KN(n,$N,eD))}function KN(n,e,t){if(!n)return[];vm();let s=0;return n.split(qb).map(r=>{let i=xN(r),o={input:i,offset:s};s+=i.length+1;try{let a=o.tokens=ZN(i,e,t),l=a.length,c;if(!l)throw new Error("empty label");let h=o.output=a.flat();if(QN(h),!(o.emoji=l>1||a[0].is_emoji)&&h.every(p=>p<128))GN(h),c="ASCII";else{let p=a.flatMap(m=>m.is_emoji?[]:m);if(!p.length)c="Emoji";else{if(Co.has(h[0]))throw Ql("leading combining mark");for(let v=1;v<l;v++){let A=a[v];if(!A.is_emoji&&Co.has(A[0]))throw Ql(`emoji + combining mark: "${$a(a[v-1])} + ${Hd([A[0]])}"`)}jN(h);let m=Kh(new Set(p)),[_]=JN(m);XN(_,p),qN(_,m),c=_.N}}o.type=c}catch(a){o.error=a}return o})}function qN(n,e){let t,s=[];for(let r of e){let i=la.get(r);if(i===Yb)return;if(i){let o=i.M.get(r);if(t=t?t.filter(a=>o.has(a)):Kh(o),!t.length)return}else s.push(r)}if(t){for(let r of t)if(s.every(i=>fc(r,i)))throw new Error(`whole-script confusable: ${n.N}/${r.N}`)}}function JN(n){let e=Ia;for(let t of n){let s=e.filter(r=>fc(r,t));if(!s.length)throw Ia.some(r=>fc(r,t))?n1(e[0],t):t1(t);if(e=s,s.length==1)break}return e}function YN(n){return n.map(({input:e,error:t,output:s})=>{if(t){let r=t.message;throw new Error(n.length==1?r:`Invalid label ${wm(Hd(e,63))}: ${r}`)}return $a(s)}).join(qb)}function t1(n){return new Error(`disallowed character: ${Am(n)}`)}function n1(n,e){let t=Am(e),s=Ia.find(r=>r.P.has(e));return s&&(t=`${s.N} ${t}`),new Error(`illegal mixture: ${n.N} + ${t}`)}function Ql(n){return new Error(`illegal placement: ${n}`)}function XN(n,e){for(let t of e)if(!fc(n,t))throw n1(n,t);if(n.M){let t=Kb(e);for(let s=1,r=t.length;s<r;s++)if(Zp.has(t[s])){let i=s+1;for(let o;i<r&&Zp.has(o=t[i]);i++)for(let a=s;a<i;a++)if(t[a]==o)throw new Error(`duplicate non-spacing marks: ${Am(o)}`);if(i-s>x0)throw new Error(`excessive non-spacing marks: ${wm(Hd(t.slice(s-1,i)))} (${i-s}/${x0})`);s=i}}}function ZN(n,e,t){let s=[],r=[];for(n=n.slice().reverse();n.length;){let i=tD(n);if(i)r.length&&(s.push(e(r)),r=[]),s.push(t(i));else{let o=n.pop();if(go.has(o))r.push(o);else{let a=Xp.get(o);if(a)r.push(...a);else if(!Xb.has(o))throw t1(o)}}}return r.length&&s.push(e(r)),s}function eD(n){return n.filter(e=>e!=Jb)}function tD(n,e){let t=eg,s,r=n.length;for(;r&&(t=t.get(n[--r]),!!t);){let{V:i}=t;i&&(s=i,n.length=r)}return s}const s1=new Uint8Array(32);s1.fill(0);function O0(n){return H(n.length!==0,"invalid ENS name; empty component","comp",n),n}function r1(n){const e=Kr(nD(n)),t=[];if(n.length===0)return t;let s=0;for(let r=0;r<e.length;r++)e[r]===46&&(t.push(O0(e.slice(s,r))),s=r+1);return H(s<e.length,"invalid ENS name; empty component","name",n),t.push(O0(e.slice(s))),t}function nD(n){try{if(n.length===0)throw new Error("empty label");return WN(n)}catch(e){H(!1,`invalid ENS name (${e.message})`,"name",n)}}function tg(n){H(typeof n=="string","invalid ENS name; not a string","name",n),H(n.length,"invalid ENS name (empty label)","name",n);let e=s1;const t=r1(n);for(;t.length;)e=mn(nn([e,mn(t.pop())]));return ye(e)}function sD(n,e){const t=e;return H(t<=255,"DNS encoded label cannot exceed 255","length",t),ye(nn(r1(n).map(s=>{H(s.length<=t,`label ${JSON.stringify(n)} exceeds ${t} bytes`,"name",n);const r=new Uint8Array(s.length+1);return r.set(s,1),r[0]=r.length-1,r})))+"00"}const i1=new Uint8Array(32);i1.fill(0);const rD=BigInt(-1),o1=BigInt(0),a1=BigInt(1),iD=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function oD(n){const e=rt(n),t=e.length%32;return t?nn([e,i1.slice(t)]):ye(e)}const aD=Qi(a1,32),lD=Qi(o1,32),L0={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Zf=["name","version","chainId","verifyingContract","salt"];function B0(n){return function(e){return H(typeof e=="string",`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const cD={name:B0("name"),version:B0("version"),chainId:function(n){const e=Ie(n,"domain.chainId");return H(e>=0,"invalid chain ID","domain.chainId",n),Number.isSafeInteger(e)?Number(e):Js(e)},verifyingContract:function(n){try{return Et(n).toLowerCase()}catch{}H(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){const e=rt(n,"domain.salt");return H(e.length===32,'invalid domain value "salt"',"domain.salt",n),ye(e)}};function ep(n){{const e=n.match(/^(u?)int(\d+)$/);if(e){const t=e[1]==="",s=parseInt(e[2]);H(s%8===0&&s!==0&&s<=256&&e[2]===String(s),"invalid numeric width","type",n);const r=bo(iD,t?s-1:s),i=t?(r+a1)*rD:o1;return function(o){const a=Ie(o,"value");return H(a>=i&&a<=r,`value out-of-bounds for ${n}`,"value",a),Qi(t?WE(a,256):a,32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return H(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",n),function(s){const r=rt(s);return H(r.length===t,`invalid length for ${n}`,"value",s),oD(s)}}}switch(n){case"address":return function(e){return ei(Et(e),32)};case"bool":return function(e){return e?aD:lD};case"bytes":return function(e){return mn(e)};case"string":return function(e){return Bo(e)}}return null}function M0(n,e){return`${n}(${e.map(({name:t,type:s})=>s+" "+t).join(",")})`}function Xu(n){const e=n.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:n}}class Rs{primaryType;#e;get types(){return JSON.parse(this.#e)}#t;#n;constructor(e){this.#t=new Map,this.#n=new Map;const t=new Map,s=new Map,r=new Map,i={};Object.keys(e).forEach(l=>{i[l]=e[l].map(({name:c,type:h})=>{let{base:f,index:p}=Xu(h);return f==="int"&&!e.int&&(f="int256"),f==="uint"&&!e.uint&&(f="uint256"),{name:c,type:f+(p||"")}}),t.set(l,new Set),s.set(l,[]),r.set(l,new Set)}),this.#e=JSON.stringify(i);for(const l in i){const c=new Set;for(const h of i[l]){H(!c.has(h.name),`duplicate variable name ${JSON.stringify(h.name)} in ${JSON.stringify(l)}`,"types",e),c.add(h.name);const f=Xu(h.type).base;H(f!==l,`circular type reference to ${JSON.stringify(f)}`,"types",e),!ep(f)&&(H(s.has(f),`unknown type ${JSON.stringify(f)}`,"types",e),s.get(f).push(l),t.get(l).add(f))}}const o=Array.from(s.keys()).filter(l=>s.get(l).length===0);H(o.length!==0,"missing primary type","types",e),H(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),Fe(this,{primaryType:o[0]});function a(l,c){H(!c.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",e),c.add(l);for(const h of t.get(l))if(s.has(h)){a(h,c);for(const f of c)r.get(f).add(h)}c.delete(l)}a(this.primaryType,new Set);for(const[l,c]of r){const h=Array.from(c);h.sort(),this.#t.set(l,M0(l,i[l])+h.map(f=>M0(f,i[f])).join(""))}}getEncoder(e){let t=this.#n.get(e);return t||(t=this.#s(e),this.#n.set(e,t)),t}#s(e){{const r=ep(e);if(r)return r}const t=Xu(e).array;if(t){const r=t.prefix,i=this.getEncoder(r);return o=>{H(t.count===-1||t.count===o.length,`array length mismatch; expected length ${t.count}`,"value",o);let a=o.map(i);return this.#t.has(r)&&(a=a.map(mn)),mn(nn(a))}}const s=this.types[e];if(s){const r=Bo(this.#t.get(e));return i=>{const o=s.map(({name:a,type:l})=>{const c=this.getEncoder(l)(i[a]);return this.#t.has(l)?mn(c):c});return o.unshift(r),nn(o)}}H(!1,`unknown type: ${e}`,"type",e)}encodeType(e){const t=this.#t.get(e);return H(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return mn(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,s){if(ep(e))return s(e,t);const r=Xu(e).array;if(r)return H(r.count===-1||r.count===t.length,`array length mismatch; expected length ${r.count}`,"value",t),t.map(o=>this._visit(r.prefix,o,s));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,t[a],s),o),{});H(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Rs(e)}static getPrimaryType(e){return Rs.from(e).primaryType}static hashStruct(e,t,s){return Rs.from(t).hashStruct(e,s)}static hashDomain(e){const t=[];for(const s in e){if(e[s]==null)continue;const r=L0[s];H(r,`invalid typed-data domain key: ${JSON.stringify(s)}`,"domain",e),t.push({name:s,type:r})}return t.sort((s,r)=>Zf.indexOf(s.name)-Zf.indexOf(r.name)),Rs.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,s){return nn(["0x1901",Rs.hashDomain(e),Rs.from(t).hash(s)])}static hash(e,t,s){return mn(Rs.encode(e,t,s))}static async resolveNames(e,t,s,r){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!Bt(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=Rs.from(t);o.visit(s,(a,l)=>(a==="address"&&!Bt(l,20)&&(i[l]="0x"),l));for(const a in i)i[a]=await r(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),s=o.visit(s,(a,l)=>a==="address"&&i[l]?i[l]:l),{domain:e,value:s}}static getPayload(e,t,s){Rs.hashDomain(e);const r={},i=[];Zf.forEach(l=>{const c=e[l];c!=null&&(r[l]=cD[l](c),i.push({name:l,type:L0[l]}))});const o=Rs.from(t);t=o.types;const a=Object.assign({},t);return H(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),a.EIP712Domain=i,o.encode(s),{types:a,domain:r,primaryType:o.primaryType,message:o.visit(s,(l,c)=>{if(l.match(/^bytes(\d*)/))return ye(rt(c));if(l.match(/^u?int/))return Ie(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return H(typeof c=="string","invalid string","value",c),c}H(!1,"unsupported type","type",l)})}}}function ds(n){const e=new Set;return n.forEach(t=>e.add(t)),Object.freeze(e)}const uD="external public payable override",hD=ds(uD.split(" ")),l1="constant external internal payable private public pure view override",dD=ds(l1.split(" ")),c1="constructor error event fallback function receive struct",u1=ds(c1.split(" ")),h1="calldata memory storage payable indexed",fD=ds(h1.split(" ")),pD="tuple returns",gD=[c1,h1,pD,l1].join(" "),mD=ds(gD.split(" ")),yD={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},vD=new RegExp("^(\\s*)"),AD=new RegExp("^([0-9]+)"),wD=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),d1=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),f1=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class Qs{#e;#t;get offset(){return this.#e}get length(){return this.#t.length-this.#e}constructor(e){this.#e=0,this.#t=e.slice()}clone(){return new Qs(this.#t)}reset(){this.#e=0}#n(e=0,t=0){return new Qs(this.#t.slice(e,t).map(s=>Object.freeze(Object.assign({},s,{match:s.match-e,linkBack:s.linkBack-e,linkNext:s.linkNext-e}))))}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=this.#n(this.#e+1,e.match+1);return this.#e=e.match+1,t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=[];for(;this.#e<e.match-1;){const s=this.peek().linkNext;t.push(this.#n(this.#e+1,s)),this.#e=s}return this.#e=e.match+1,t}peek(){if(this.#e>=this.#t.length)throw new Error("out-of-bounds");return this.#t[this.#e]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return this.#e++,e}toString(){const e=[];for(let t=this.#e;t<this.#t.length;t++){const s=this.#t[t];e.push(`${s.type}:${s.text}`)}return`<TokenString ${e.join(" ")}>`}}function eo(n){const e=[],t=o=>{const a=i<n.length?JSON.stringify(n[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let s=[],r=[],i=0;for(;i<n.length;){let o=n.substring(i),a=o.match(vD);a&&(i+=a[1].length,o=n.substring(i));const l={depth:s.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(l);let c=yD[o[0]]||"";if(c){if(l.type=c,l.text=o[0],i++,c==="OPEN_PAREN")s.push(e.length-1),r.push(e.length-1);else if(c=="CLOSE_PAREN")s.length===0&&t("no matching open bracket"),l.match=s.pop(),e[l.match].match=e.length-1,l.depth--,l.linkBack=r.pop(),e[l.linkBack].linkNext=e.length-1;else if(c==="COMMA")l.linkBack=r.pop(),e[l.linkBack].linkNext=e.length-1,r.push(e.length-1);else if(c==="OPEN_BRACKET")l.type="BRACKET";else if(c==="CLOSE_BRACKET"){let h=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const f=e.pop().text;h=f+h,e[e.length-1].value=tt(f)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=h}continue}if(a=o.match(wD),a){if(l.text=a[1],i+=l.text.length,mD.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(f1)){l.type="TYPE";continue}l.type="ID";continue}if(a=o.match(AD),a){l.text=a[1],l.type="NUMBER",i+=l.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Qs(e.map(o=>Object.freeze(o)))}function F0(n,e){let t=[];for(const s in e.keys())n.has(s)&&t.push(s);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function Gd(n,e){if(e.peekKeyword(u1)){const t=e.pop().text;if(t!==n)throw new Error(`expected ${n}, got ${t}`)}return e.popType("ID")}function ni(n,e){const t=new Set;for(;;){const s=n.peekType("KEYWORD");if(s==null||e&&!e.has(s))break;if(n.pop(),t.has(s))throw new Error(`duplicate keywords: ${JSON.stringify(s)}`);t.add(s)}return Object.freeze(t)}function p1(n){let e=ni(n,dD);return F0(e,ds("constant payable nonpayable".split(" "))),F0(e,ds("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function qr(n,e){return n.popParams().map(t=>Ot.from(t,e))}function g1(n){if(n.peekType("AT")){if(n.pop(),n.peekType("NUMBER"))return Ie(n.pop().text);throw new Error("invalid gas")}return null}function Mo(n){if(n.length)throw new Error(`unexpected tokens at offset ${n.offset}: ${n.toString()}`)}const _D=new RegExp(/^(.*)\[([0-9]*)\]$/);function U0(n){const e=n.match(f1);if(H(e,"invalid type","type",n),n==="uint")return"uint256";if(n==="int")return"int256";if(e[2]){const t=parseInt(e[2]);H(t!==0&&t<=32,"invalid bytes length","type",n)}else if(e[3]){const t=parseInt(e[3]);H(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",n)}return n}const jt={},Is=Symbol.for("_ethers_internal"),V0="_ParamTypeInternal",$0="_ErrorInternal",H0="_EventInternal",G0="_ConstructorInternal",Q0="_FallbackInternal",j0="_FunctionInternal",z0="_StructInternal";class Ot{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,s,r,i,o,a,l){if(kc(e,jt,"ParamType"),Object.defineProperty(this,Is,{value:V0}),o&&(o=Object.freeze(o.slice())),r==="array"){if(a==null||l==null)throw new Error("")}else if(a!=null||l!=null)throw new Error("");if(r==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Fe(this,{name:t,type:s,baseType:r,indexed:i,components:o,arrayLength:a,arrayChildren:l})}format(e){if(e==null&&(e="sighash"),e==="json"){const s=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=s,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const r={type:this.baseType==="tuple"?"tuple":this.type,name:s};return typeof this.indexed=="boolean"&&(r.indexed=this.indexed),this.isTuple()&&(r.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(r)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(s=>s.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const s=this;return e.map(r=>s.arrayChildren.walk(r,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const s=this;return e.map((r,i)=>s.components[i].walk(r,t))}return t(this.type,e)}#e(e,t,s,r){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=t.slice();a.forEach((l,c)=>{o.#e(e,l,s,h=>{a[c]=h})}),r(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(t))a=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");a=o.map(l=>{if(!l.name)throw new Error("cannot use object value with unnamed components");if(!(l.name in t))throw new Error(`missing value for component ${l.name}`);return t[l.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((l,c)=>{o[c].#e(e,l,s,h=>{a[c]=h})}),r(a);return}const i=s(this.type,t);i.then?e.push((async function(){r(await i)})()):r(i)}async walkAsync(e,t){const s=[],r=[e];return this.#e(s,e,t,i=>{r[0]=i}),s.length&&await Promise.all(s),r[0]}static from(e,t){if(Ot.isParamType(e))return e;if(typeof e=="string")try{return Ot.from(eo(e),t)}catch{H(!1,"invalid param type","obj",e)}else if(e instanceof Qs){let a="",l="",c=null;ni(e,ds(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(l="tuple",c=e.popParams().map(v=>Ot.from(v)),a=`tuple(${c.map(v=>v.format()).join(",")})`):(a=U0(e.popType("TYPE")),l=a);let h=null,f=null;for(;e.length&&e.peekType("BRACKET");){const v=e.pop();h=new Ot(jt,"",a,l,null,c,f,h),f=v.value,a+=v.text,l="array",c=null}let p=null;if(ni(e,fD).has("indexed")){if(!t)throw new Error("");p=!0}const _=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Ot(jt,_,a,l,p,c,f,h)}const s=e.name;H(!s||typeof s=="string"&&s.match(d1),"invalid name","obj.name",s);let r=e.indexed;r!=null&&(H(t,"parameter cannot be indexed","obj.indexed",e.indexed),r=!!r);let i=e.type,o=i.match(_D);if(o){const a=parseInt(o[2]||"-1"),l=Ot.from({type:o[1],components:e.components});return new Ot(jt,s||"",i,"array",r,null,a,l)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(c=>Ot.from(c)):null;return new Ot(jt,s||"",i,"tuple",r,a,null,null)}return i=U0(e.type),new Ot(jt,s||"",i,i,r,null,null,null)}static isParamType(e){return e&&e[Is]===V0}}class Fo{type;inputs;constructor(e,t,s){kc(e,jt,"Fragment"),s=Object.freeze(s.slice()),Fe(this,{type:t,inputs:s})}static from(e){if(typeof e=="string"){try{Fo.from(JSON.parse(e))}catch{}return Fo.from(eo(e))}if(e instanceof Qs)switch(e.peekKeyword(u1)){case"constructor":return Qr.from(e);case"error":return _s.from(e);case"event":return pr.from(e);case"fallback":case"receive":return Lr.from(e);case"function":return gr.from(e);case"struct":return ko.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Qr.from(e);case"error":return _s.from(e);case"event":return pr.from(e);case"fallback":case"receive":return Lr.from(e);case"function":return gr.from(e);case"struct":return ko.from(e)}oe(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}H(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Qr.isFragment(e)}static isError(e){return _s.isFragment(e)}static isEvent(e){return pr.isFragment(e)}static isFunction(e){return gr.isFragment(e)}static isStruct(e){return ko.isFragment(e)}}class Qd extends Fo{name;constructor(e,t,s,r){super(e,t,r),H(typeof s=="string"&&s.match(d1),"invalid identifier","name",s),r=Object.freeze(r.slice()),Fe(this,{name:s})}}function pc(n,e){return"("+e.map(t=>t.format(n)).join(n==="full"?", ":",")+")"}class _s extends Qd{constructor(e,t,s){super(e,"error",t,s),Object.defineProperty(this,Is,{value:$0})}get selector(){return Bo(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+pc(e,this.inputs)),t.join(" ")}static from(e){if(_s.isFragment(e))return e;if(typeof e=="string")return _s.from(eo(e));if(e instanceof Qs){const t=Gd("error",e),s=qr(e);return Mo(e),new _s(jt,t,s)}return new _s(jt,e.name,e.inputs?e.inputs.map(Ot.from):[])}static isFragment(e){return e&&e[Is]===$0}}class pr extends Qd{anonymous;constructor(e,t,s,r){super(e,"event",t,s),Object.defineProperty(this,Is,{value:H0}),Fe(this,{anonymous:r})}get topicHash(){return Bo(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const t=[];return e!=="sighash"&&t.push("event"),t.push(this.name+pc(e,this.inputs)),e!=="sighash"&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){return t=(t||[]).map(r=>Ot.from(r)),new pr(jt,e,t,!1).topicHash}static from(e){if(pr.isFragment(e))return e;if(typeof e=="string")try{return pr.from(eo(e))}catch{H(!1,"invalid event fragment","obj",e)}else if(e instanceof Qs){const t=Gd("event",e),s=qr(e,!0),r=!!ni(e,ds(["anonymous"])).has("anonymous");return Mo(e),new pr(jt,t,s,r)}return new pr(jt,e.name,e.inputs?e.inputs.map(t=>Ot.from(t,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[Is]===H0}}class Qr extends Fo{payable;gas;constructor(e,t,s,r,i){super(e,t,s),Object.defineProperty(this,Is,{value:G0}),Fe(this,{payable:r,gas:i})}format(e){if(oe(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const t=[`constructor${pc(e,this.inputs)}`];return this.payable&&t.push("payable"),this.gas!=null&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(Qr.isFragment(e))return e;if(typeof e=="string")try{return Qr.from(eo(e))}catch{H(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof Qs){ni(e,ds(["constructor"]));const t=qr(e),s=!!ni(e,hD).has("payable"),r=g1(e);return Mo(e),new Qr(jt,"constructor",t,s,r)}return new Qr(jt,"constructor",e.inputs?e.inputs.map(Ot.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[Is]===G0}}class Lr extends Fo{payable;constructor(e,t,s){super(e,"fallback",t),Object.defineProperty(this,Is,{value:Q0}),Fe(this,{payable:s})}format(e){const t=this.inputs.length===0?"receive":"fallback";if(e==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:t,stateMutability:s})}return`${t}()${this.payable?" payable":""}`}static from(e){if(Lr.isFragment(e))return e;if(typeof e=="string")try{return Lr.from(eo(e))}catch{H(!1,"invalid fallback fragment","obj",e)}else if(e instanceof Qs){const t=e.toString(),s=e.peekKeyword(ds(["fallback","receive"]));if(H(s,"type must be fallback or receive","obj",t),e.popKeyword(ds(["fallback","receive"]))==="receive"){const a=qr(e);return H(a.length===0,"receive cannot have arguments","obj.inputs",a),ni(e,ds(["payable"])),Mo(e),new Lr(jt,[],!0)}let i=qr(e);i.length?H(i.length===1&&i[0].type==="bytes","invalid fallback inputs","obj.inputs",i.map(a=>a.format("minimal")).join(", ")):i=[Ot.from("bytes")];const o=p1(e);if(H(o==="nonpayable"||o==="payable","fallback cannot be constants","obj.stateMutability",o),ni(e,ds(["returns"])).has("returns")){const a=qr(e);H(a.length===1&&a[0].type==="bytes","invalid fallback outputs","obj.outputs",a.map(l=>l.format("minimal")).join(", "))}return Mo(e),new Lr(jt,i,o==="payable")}if(e.type==="receive")return new Lr(jt,[],!0);if(e.type==="fallback"){const t=[Ot.from("bytes")],s=e.stateMutability==="payable";return new Lr(jt,t,s)}H(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[Is]===Q0}}class gr extends Qd{constant;outputs;stateMutability;payable;gas;constructor(e,t,s,r,i,o){super(e,"function",t,r),Object.defineProperty(this,Is,{value:j0}),i=Object.freeze(i.slice()),Fe(this,{constant:s==="view"||s==="pure",gas:o,outputs:i,payable:s==="payable",stateMutability:s})}get selector(){return Bo(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(e))),outputs:this.outputs.map(s=>JSON.parse(s.format(e)))});const t=[];return e!=="sighash"&&t.push("function"),t.push(this.name+pc(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(pc(e,this.outputs))),this.gas!=null&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){return t=(t||[]).map(r=>Ot.from(r)),new gr(jt,e,"view",t,[],null).selector}static from(e){if(gr.isFragment(e))return e;if(typeof e=="string")try{return gr.from(eo(e))}catch{H(!1,"invalid function fragment","obj",e)}else if(e instanceof Qs){const s=Gd("function",e),r=qr(e),i=p1(e);let o=[];ni(e,ds(["returns"])).has("returns")&&(o=qr(e));const a=g1(e);return Mo(e),new gr(jt,s,i,r,o,a)}let t=e.stateMutability;return t==null&&(t="payable",typeof e.constant=="boolean"?(t="view",e.constant||(t="payable",typeof e.payable=="boolean"&&!e.payable&&(t="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(t="nonpayable")),new gr(jt,e.name,t,e.inputs?e.inputs.map(Ot.from):[],e.outputs?e.outputs.map(Ot.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[Is]===j0}}class ko extends Qd{constructor(e,t,s){super(e,"struct",t,s),Object.defineProperty(this,Is,{value:z0})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return ko.from(eo(e))}catch{H(!1,"invalid struct fragment","obj",e)}else if(e instanceof Qs){const t=Gd("struct",e),s=qr(e);return Mo(e),new ko(jt,t,s)}return new ko(jt,e.name,e.inputs?e.inputs.map(Ot.from):[])}static isFragment(e){return e&&e[Is]===z0}}const ir=new Map;ir.set(0,"GENERIC_PANIC");ir.set(1,"ASSERT_FALSE");ir.set(17,"OVERFLOW");ir.set(18,"DIVIDE_BY_ZERO");ir.set(33,"ENUM_RANGE_ERROR");ir.set(34,"BAD_STORAGE_DATA");ir.set(49,"STACK_UNDERFLOW");ir.set(50,"ARRAY_RANGE_ERROR");ir.set(65,"OUT_OF_MEMORY");ir.set(81,"UNINITIALIZED_FUNCTION_CALL");const ED=new RegExp(/^bytes([0-9]*)$/),bD=new RegExp(/^(u?int)([0-9]*)$/);let tp=null,W0=1024;function ID(n,e,t,s){let r="missing revert data",i=null;const o=null;let a=null;if(t){r="execution reverted";const c=rt(t);if(t=ye(t),c.length===0)r+=" (no data present; likely require(false) occurred",i="require(false)";else if(c.length%32!==4)r+=" (could not decode reason; invalid data length)";else if(ye(c.slice(0,4))==="0x08c379a0")try{i=s.decode(["string"],c.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},r+=`: ${JSON.stringify(i)}`}catch{r+=" (could not decode reason; invalid string data)"}else if(ye(c.slice(0,4))==="0x4e487b71")try{const h=Number(s.decode(["uint256"],c.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[h]},i=`Panic due to ${ir.get(h)||"UNKNOWN"}(${h})`,r+=`: ${i}`}catch{r+=" (could not decode panic code)"}else r+=" (unknown custom error)"}const l={to:e.to?Et(e.to):null,data:e.data||"0x"};return e.from&&(l.from=Et(e.from)),Gt(r,"CALL_EXCEPTION",{action:n,data:t,reason:i,transaction:l,invocation:o,revert:a})}class Ga{#e(e){if(e.isArray())return new H2(this.#e(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new Yu(e.components.map(s=>this.#e(s)),e.name);switch(e.baseType){case"address":return new V2(e.name);case"bool":return new G2(e.name);case"string":return new X2(e.name);case"bytes":return new Q2(e.name);case"":return new W2(e.name)}let t=e.type.match(bD);if(t){let s=parseInt(t[2]||"256");return H(s!==0&&s<=256&&s%8===0,"invalid "+t[1]+" bit length","param",e),new Y2(s/8,t[1]==="int",e.name)}if(t=e.type.match(ED),t){let s=parseInt(t[1]);return H(s!==0&&s<=32,"invalid bytes length","param",e),new j2(s,e.name)}H(!1,"invalid type","type",e.type)}getDefaultValue(e){const t=e.map(r=>this.#e(Ot.from(r)));return new Yu(t,"_").defaultValue()}encode(e,t){QE(t.length,e.length,"types/values length mismatch");const s=e.map(o=>this.#e(Ot.from(o))),r=new Yu(s,"_"),i=new Qp;return r.encode(i,t),i.data}decode(e,t,s){const r=e.map(o=>this.#e(Ot.from(o)));return new Yu(r,"_").decode(new lm(t,s,W0))}static _setDefaultMaxInflation(e){H(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),W0=e}static defaultAbiCoder(){return tp==null&&(tp=new Ga),tp}static getBuiltinCallException(e,t,s){return ID(e,t,s,Ga.defaultAbiCoder())}}class CD{fragment;name;signature;topic;args;constructor(e,t,s){const r=e.name,i=e.format();Fe(this,{fragment:e,name:r,signature:i,topic:t,args:s})}}class TD{fragment;name;args;signature;selector;value;constructor(e,t,s,r){const i=e.name,o=e.format();Fe(this,{fragment:e,name:i,args:s,signature:o,selector:t,value:r})}}class SD{fragment;name;args;signature;selector;constructor(e,t,s){const r=e.name,i=e.format();Fe(this,{fragment:e,name:r,args:s,signature:i,selector:t})}}class K0{hash;_isIndexed;static isIndexed(e){return!!(e&&e._isIndexed)}constructor(e){Fe(this,{hash:e,_isIndexed:!0})}}const q0={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},J0={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:n=>`reverted with reason string ${JSON.stringify(n)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:n=>{let e="unknown panic code";return n>=0&&n<=255&&q0[n.toString()]&&(e=q0[n.toString()]),`reverted with panic code 0x${n.toString(16)} (${e})`}}};class wo{fragments;deploy;fallback;receive;#e;#t;#n;#s;constructor(e){let t=[];typeof e=="string"?t=JSON.parse(e):t=e,this.#n=new Map,this.#e=new Map,this.#t=new Map;const s=[];for(const o of t)try{s.push(Fo.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}Fe(this,{fragments:Object.freeze(s)});let r=null,i=!1;this.#s=this.getAbiCoder(),this.fragments.forEach((o,a)=>{let l;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Fe(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(H(!r||o.payable!==r.payable,"conflicting fallback fragments",`fragments[${a}]`,o),r=o,i=r.payable);return;case"function":l=this.#n;break;case"event":l=this.#t;break;case"error":l=this.#e;break;default:return}const c=o.format();l.has(c)||l.set(c,o)}),this.deploy||Fe(this,{deploy:Qr.from("constructor()")}),Fe(this,{fallback:r,receive:i})}format(e){const t=e?"minimal":"full";return this.fragments.map(r=>r.format(t))}formatJson(){const e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return Ga.defaultAbiCoder()}#r(e,t,s){if(Bt(e)){const i=e.toLowerCase();for(const o of this.#n.values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of this.#n)o.split("(")[0]===e&&i.push(a);if(t){const o=t.length>0?t[t.length-1]:null;let a=t.length,l=!0;en.isTyped(o)&&o.type==="overrides"&&(l=!1,a--);for(let c=i.length-1;c>=0;c--){const h=i[c].inputs.length;h!==a&&(!l||h!==a-1)&&i.splice(c,1)}for(let c=i.length-1;c>=0;c--){const h=i[c].inputs;for(let f=0;f<t.length;f++)if(en.isTyped(t[f])){if(f>=h.length){if(t[f].type==="overrides")continue;i.splice(c,1);break}if(t[f].type!==h[f].baseType){i.splice(c,1);break}}}}if(i.length===1&&t&&t.length!==i[0].inputs.length){const o=t[t.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&s){const o=i.map(a=>JSON.stringify(a.format())).join(", ");H(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const r=this.#n.get(gr.from(e).format());return r||null}getFunctionName(e){const t=this.#r(e,null,!1);return H(t,"no matching function","key",e),t.name}hasFunction(e){return!!this.#r(e,null,!1)}getFunction(e,t){return this.#r(e,t||null,!0)}forEachFunction(e){const t=Array.from(this.#n.keys());t.sort((s,r)=>s.localeCompare(r));for(let s=0;s<t.length;s++){const r=t[s];e(this.#n.get(r),s)}}#o(e,t,s){if(Bt(e)){const i=e.toLowerCase();for(const o of this.#t.values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of this.#t)o.split("(")[0]===e&&i.push(a);if(t){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<t.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let l=0;l<t.length;l++)if(en.isTyped(t[l])&&t[l].type!==a[l].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&s){const o=i.map(a=>JSON.stringify(a.format())).join(", ");H(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const r=this.#t.get(pr.from(e).format());return r||null}getEventName(e){const t=this.#o(e,null,!1);return H(t,"no matching event","key",e),t.name}hasEvent(e){return!!this.#o(e,null,!1)}getEvent(e,t){return this.#o(e,t||null,!0)}forEachEvent(e){const t=Array.from(this.#t.keys());t.sort((s,r)=>s.localeCompare(r));for(let s=0;s<t.length;s++){const r=t[s];e(this.#t.get(r),s)}}getError(e,t){if(Bt(e)){const r=e.toLowerCase();if(J0[r])return _s.from(J0[r].signature);for(const i of this.#e.values())if(r===i.selector)return i;return null}if(e.indexOf("(")===-1){const r=[];for(const[i,o]of this.#e)i.split("(")[0]===e&&r.push(o);if(r.length===0)return e==="Error"?_s.from("error Error(string)"):e==="Panic"?_s.from("error Panic(uint256)"):null;if(r.length>1){const i=r.map(o=>JSON.stringify(o.format())).join(", ");H(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return r[0]}if(e=_s.from(e).format(),e==="Error(string)")return _s.from("error Error(string)");if(e==="Panic(uint256)")return _s.from("error Panic(uint256)");const s=this.#e.get(e);return s||null}forEachError(e){const t=Array.from(this.#e.keys());t.sort((s,r)=>s.localeCompare(r));for(let s=0;s<t.length;s++){const r=t[s];e(this.#e.get(r),s)}}_decodeParams(e,t){return this.#s.decode(e,t)}_encodeParams(e,t){return this.#s.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){const s=this.getError(e);H(s,"unknown error","fragment",e),e=s}return H(Xt(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,Xt(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){const s=this.getError(e);H(s,"unknown error","fragment",e),e=s}return nn([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){const s=this.getFunction(e);H(s,"unknown function","fragment",e),e=s}return H(Xt(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,Xt(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){const s=this.getFunction(e);H(s,"unknown function","fragment",e),e=s}return nn([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){const i=this.getFunction(e);H(i,"unknown function","fragment",e),e=i}let s="invalid length for result data";const r=ls(t);if(r.length%32===0)try{return this.#s.decode(e.outputs,r)}catch{s="could not decode result data"}oe(!1,s,"BAD_DATA",{value:ye(r),info:{method:e.name,signature:e.format()}})}makeError(e,t){const s=rt(e,"data"),r=Ga.getBuiltinCallException("call",t,s);if(r.message.startsWith("execution reverted (unknown custom error)")){const a=ye(s.slice(0,4)),l=this.getError(a);if(l)try{const c=this.#s.decode(l.inputs,s.slice(4));r.revert={name:l.name,signature:l.format(),args:c},r.reason=r.revert.signature,r.message=`execution reverted: ${r.reason}`}catch{r.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(t);return o&&(r.invocation={method:o.name,signature:o.signature,args:o.args}),r}encodeFunctionResult(e,t){if(typeof e=="string"){const s=this.getFunction(e);H(s,"unknown function","fragment",e),e=s}return ye(this.#s.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){const i=this.getEvent(e);H(i,"unknown event","eventFragment",e),e=i}oe(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const s=[];e.anonymous||s.push(e.topicHash);const r=(i,o)=>i.type==="string"?Bo(o):i.type==="bytes"?mn(ye(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=Qi(o):i.type.match(/^bytes/)?o=Qx(o,32):i.type==="address"&&this.#s.encode(["address"],[o]),ei(ye(o),32));for(t.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){H(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?s.push(null):a.baseType==="array"||a.baseType==="tuple"?H(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?s.push(i.map(l=>r(a,l))):s.push(r(a,i))});s.length&&s[s.length-1]===null;)s.pop();return s}encodeEventLog(e,t){if(typeof e=="string"){const o=this.getEvent(e);H(o,"unknown event","eventFragment",e),e=o}const s=[],r=[],i=[];return e.anonymous||s.push(e.topicHash),H(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((o,a)=>{const l=t[a];if(o.indexed)if(o.type==="string")s.push(Bo(l));else if(o.type==="bytes")s.push(mn(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");s.push(this.#s.encode([o.type],[l]))}else r.push(o),i.push(l)}),{data:this.#s.encode(r,i),topics:s}}decodeEventLog(e,t,s){if(typeof e=="string"){const m=this.getEvent(e);H(m,"unknown event","eventFragment",e),e=m}if(s!=null&&!e.anonymous){const m=e.topicHash;H(Bt(s[0],32)&&s[0].toLowerCase()===m,"fragment/topic mismatch","topics[0]",s[0]),s=s.slice(1)}const r=[],i=[],o=[];e.inputs.forEach((m,_)=>{m.indexed?m.type==="string"||m.type==="bytes"||m.baseType==="tuple"||m.baseType==="array"?(r.push(Ot.from({type:"bytes32",name:m.name})),o.push(!0)):(r.push(m),o.push(!1)):(i.push(m),o.push(!1))});const a=s!=null?this.#s.decode(r,nn(s)):null,l=this.#s.decode(i,t,!0),c=[],h=[];let f=0,p=0;return e.inputs.forEach((m,_)=>{let v=null;if(m.indexed)if(a==null)v=new K0(null);else if(o[_])v=new K0(a[p++]);else try{v=a[p++]}catch(A){v=A}else try{v=l[f++]}catch(A){v=A}c.push(v),h.push(m.name||null)}),Gr.fromItems(c,h)}parseTransaction(e){const t=rt(e.data,"tx.data"),s=Ie(e.value!=null?e.value:0,"tx.value"),r=this.getFunction(ye(t.slice(0,4)));if(!r)return null;const i=this.#s.decode(r.inputs,t.slice(4));return new TD(r,r.selector,i,s)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new CD(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=ye(e),s=this.getError(Xt(t,0,4));if(!s)return null;const r=this.#s.decode(s.inputs,Xt(t,4));return new SD(s,s.selector,r)}static from(e){return e instanceof wo?e:typeof e=="string"?new wo(JSON.parse(e)):typeof e.formatJson=="function"?new wo(e.formatJson()):typeof e.format=="function"?new wo(e.format("json")):new wo(e)}}const m1=BigInt(0);function Ca(n){return n??null}function on(n){return n==null?null:n.toString()}class Y0{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,t,s){Fe(this,{gasPrice:Ca(e),maxFeePerGas:Ca(t),maxPriorityFeePerGas:Ca(s)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:s}=this;return{_type:"FeeData",gasPrice:on(e),maxFeePerGas:on(t),maxPriorityFeePerGas:on(s)}}}function qh(n){const e={};n.to&&(e.to=n.to),n.from&&(e.from=n.from),n.data&&(e.data=ye(n.data));const t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const r of t)!(r in n)||n[r]==null||(e[r]=Ie(n[r],`request.${r}`));const s="type,nonce".split(/,/);for(const r of s)!(r in n)||n[r]==null||(e[r]=tt(n[r],`request.${r}`));return n.accessList&&(e.accessList=jo(n.accessList)),n.authorizationList&&(e.authorizationList=n.authorizationList.slice()),"blockTag"in n&&(e.blockTag=n.blockTag),"enableCcipRead"in n&&(e.enableCcipRead=!!n.enableCcipRead),"customData"in n&&(e.customData=n.customData),"blobVersionedHashes"in n&&n.blobVersionedHashes&&(e.blobVersionedHashes=n.blobVersionedHashes.slice()),"kzg"in n&&(e.kzg=n.kzg),"blobs"in n&&n.blobs&&(e.blobs=n.blobs.map(r=>am(r)?ye(r):Object.assign({},r))),e}class PD{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#e;constructor(e,t){this.#e=e.transactions.map(s=>typeof s!="string"?new Lc(s,t):s),Fe(this,{provider:t,hash:Ca(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Ca(e.prevRandao),extraData:e.extraData,baseFeePerGas:Ca(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return this.#e.map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=this.#e.slice();return e.length===0?[]:(oe(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:s,gasLimit:r,gasUsed:i,hash:o,miner:a,prevRandao:l,nonce:c,number:h,parentHash:f,parentBeaconBlockRoot:p,stateRoot:m,receiptsRoot:_,timestamp:v,transactions:A}=this;return{_type:"Block",baseFeePerGas:on(e),difficulty:on(t),extraData:s,gasLimit:on(r),gasUsed:on(i),blobGasUsed:on(this.blobGasUsed),excessBlobGas:on(this.excessBlobGas),hash:o,miner:a,prevRandao:l,nonce:c,number:h,parentHash:f,timestamp:v,parentBeaconBlockRoot:p,stateRoot:m,receiptsRoot:_,transactions:A}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#e.length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let t;if(typeof e=="number")t=this.#e[e];else{const s=e.toLowerCase();for(const r of this.#e)if(typeof r=="string"){if(r!==s)continue;t=r;break}else{if(r.hash!==s)continue;t=r;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(const s of t)if(s.hash===e)return s;H(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return RD(this)}}class Oc{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,t){this.provider=t;const s=Object.freeze(e.topics.slice());Fe(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:s,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:s,data:r,index:i,removed:o,topics:a,transactionHash:l,transactionIndex:c}=this;return{_type:"log",address:e,blockHash:t,blockNumber:s,data:r,index:i,removed:o,topics:a,transactionHash:l,transactionIndex:c}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return oe(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return oe(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return oe(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return xD(this)}}class y1{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#e;constructor(e,t){this.#e=Object.freeze(e.logs.map(r=>new Oc(r,t)));let s=m1;e.effectiveGasPrice!=null?s=e.effectiveGasPrice:e.gasPrice!=null&&(s=e.gasPrice),Fe(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:s,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return this.#e}toJSON(){const{to:e,from:t,contractAddress:s,hash:r,index:i,blockHash:o,blockNumber:a,logsBloom:l,logs:c,status:h,root:f}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:s,cumulativeGasUsed:on(this.cumulativeGasUsed),from:t,gasPrice:on(this.gasPrice),blobGasUsed:on(this.blobGasUsed),blobGasPrice:on(this.blobGasPrice),gasUsed:on(this.gasUsed),hash:r,index:i,logs:c,logsBloom:l,root:f,status:h,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return A1(this)}reorderedEvent(e){return oe(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),v1(this,e)}}class Lc{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;authorizationList;#e;constructor(e,t){this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,this.#e=-1}toJSON(){const{blockNumber:e,blockHash:t,index:s,hash:r,type:i,to:o,from:a,nonce:l,data:c,signature:h,accessList:f,blobVersionedHashes:p}=this;return{_type:"TransactionResponse",accessList:f,blockNumber:e,blockHash:t,blobVersionedHashes:p,chainId:on(this.chainId),data:c,from:a,gasLimit:on(this.gasLimit),gasPrice:on(this.gasPrice),hash:r,maxFeePerGas:on(this.maxFeePerGas),maxPriorityFeePerGas:on(this.maxPriorityFeePerGas),maxFeePerBlobGas:on(this.maxFeePerBlobGas),nonce:l,signature:h,to:o,index:s,type:i,value:on(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const s=await this.getTransaction();s&&(e=s.blockNumber)}if(e==null)return null;const t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:t,blockNumber:s}=await is({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:s-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const s=e??1,r=t??0;let i=this.#e,o=-1,a=i===-1;const l=async()=>{if(a)return null;const{blockNumber:p,nonce:m}=await is({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(m<this.nonce){i=p;return}if(a)return null;const _=await this.getTransaction();if(!(_&&_.blockNumber!=null))for(o===-1&&(o=i-3,o<this.#e&&(o=this.#e));o<=p;){if(a)return null;const v=await this.provider.getBlock(o,!0);if(v==null)return;for(const A of v)if(A===this.hash)return;for(let A=0;A<v.length;A++){const w=await v.getTransaction(A);if(w.from===this.from&&w.nonce===this.nonce){if(a)return null;const T=await this.provider.getTransactionReceipt(w.hash);if(T==null||p-T.blockNumber+1<s)return;let P="replaced";w.data===this.data&&w.to===this.to&&w.value===this.value?P="repriced":w.data==="0x"&&w.from===w.to&&w.value===m1&&(P="cancelled"),oe(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:P==="replaced"||P==="cancelled",reason:P,replacement:w.replaceableTransaction(i),hash:w.hash,receipt:T})}}o++}},c=p=>{if(p==null||p.status!==0)return p;oe(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:p.to,from:p.from,data:""},receipt:p})},h=await this.provider.getTransactionReceipt(this.hash);if(s===0)return c(h);if(h){if(s===1||await h.confirmations()>=s)return c(h)}else if(await l(),s===0)return null;return await new Promise((p,m)=>{const _=[],v=()=>{_.forEach(w=>w())};if(_.push(()=>{a=!0}),r>0){const w=setTimeout(()=>{v(),m(Gt("wait for transaction timeout","TIMEOUT"))},r);_.push(()=>{clearTimeout(w)})}const A=async w=>{if(await w.confirmations()>=s){v();try{p(c(w))}catch(T){m(T)}}};if(_.push(()=>{this.provider.off(this.hash,A)}),this.provider.on(this.hash,A),i>=0){const w=async()=>{try{await l()}catch(T){if(Un(T,"TRANSACTION_REPLACED")){v(),m(T);return}}a||this.provider.once("block",w)};_.push(()=>{this.provider.off("block",w)}),this.provider.once("block",w)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return oe(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),A1(this)}reorderedEvent(e){return oe(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),oe(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),v1(this,e)}replaceableTransaction(e){H(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new Lc(this,this.provider);return t.#e=e,t}}function RD(n){return{orphan:"drop-block",hash:n.hash,number:n.number}}function v1(n,e){return{orphan:"reorder-transaction",tx:n,other:e}}function A1(n){return{orphan:"drop-transaction",tx:n}}function xD(n){return{orphan:"drop-log",log:{transactionHash:n.transactionHash,blockHash:n.blockHash,blockNumber:n.blockNumber,address:n.address,data:n.data,topics:Object.freeze(n.topics.slice()),index:n.index}}}class _m extends Oc{interface;fragment;args;constructor(e,t,s){super(e,e.provider);const r=t.decodeEventLog(s,e.data,e.topics);Fe(this,{args:r,fragment:s,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class w1 extends Oc{error;constructor(e,t){super(e,e.provider),Fe(this,{error:t})}}class kD extends y1{#e;constructor(e,t,s){super(s,t),this.#e=e}get logs(){return super.logs.map(e=>{const t=e.topics.length?this.#e.getEvent(e.topics[0]):null;if(t)try{return new _m(e,this.#e,t)}catch(s){return new w1(e,s)}return e})}}class Em extends Lc{#e;constructor(e,t,s){super(s,t),this.#e=e}async wait(e,t){const s=await super.wait(e,t);return s==null?null:new kD(this.#e,this.provider,s)}}class _1 extends KE{log;constructor(e,t,s,r){super(e,t,s),Fe(this,{log:r})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class ND extends _1{constructor(e,t,s,r,i){super(e,t,s,new _m(i,e.interface,r));const o=e.interface.decodeEventLog(r,this.log.data,this.log.topics);Fe(this,{args:o,fragment:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const X0=BigInt(0);function E1(n){return n&&typeof n.call=="function"}function b1(n){return n&&typeof n.estimateGas=="function"}function jd(n){return n&&typeof n.resolveName=="function"}function I1(n){return n&&typeof n.sendTransaction=="function"}function C1(n){if(n!=null){if(jd(n))return n;if(n.provider)return n.provider}}class DD{#e;fragment;constructor(e,t,s){if(Fe(this,{fragment:t}),t.inputs.length<s.length)throw new Error("too many arguments");const r=Uo(e.runner,"resolveName"),i=jd(r)?r:null;this.#e=(async function(){const o=await Promise.all(t.inputs.map((a,l)=>s[l]==null?null:a.walkAsync(s[l],(h,f)=>h==="address"?Array.isArray(f)?Promise.all(f.map(p=>hs(p,i))):hs(f,i):f)));return e.interface.encodeFilterTopics(t,o)})()}getTopicFilter(){return this.#e}}function Uo(n,e){return n==null?null:typeof n[e]=="function"?n:n.provider&&typeof n.provider[e]=="function"?n.provider:null}function To(n){return n==null?null:n.provider||null}async function T1(n,e){const t=en.dereference(n,"overrides");H(typeof t=="object","invalid overrides parameter","overrides",n);const s=qh(t);return H(s.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",s.to),H(s.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",s.data),s.from&&(s.from=s.from),s}async function OD(n,e,t){const s=Uo(n,"resolveName"),r=jd(s)?s:null;return await Promise.all(e.map((i,o)=>i.walkAsync(t[o],(a,l)=>(l=en.dereference(l,a),a==="address"?hs(l,r):l))))}function LD(n){const e=async function(o){const a=await T1(o,["data"]);a.to=await n.getAddress(),a.from&&(a.from=await hs(a.from,C1(n.runner)));const l=n.interface,c=Ie(a.value||X0,"overrides.value")===X0,h=(a.data||"0x")==="0x";l.fallback&&!l.fallback.payable&&l.receive&&!h&&!c&&H(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),H(l.fallback||h,"cannot send data to receive-only contract","overrides.data",a.data);const f=l.receive||l.fallback&&l.fallback.payable;return H(f||c,"cannot send value to non-payable fallback","overrides.value",a.value),H(l.fallback||h,"cannot send data to receive-only contract","overrides.data",a.data),a},t=async function(o){const a=Uo(n.runner,"call");oe(E1(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const l=await e(o);try{return await a.call(l)}catch(c){throw om(c)&&c.data?n.interface.makeError(c.data,l):c}},s=async function(o){const a=n.runner;oe(I1(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const l=await a.sendTransaction(await e(o)),c=To(n.runner);return new Em(n.interface,c,l)},r=async function(o){const a=Uo(n.runner,"estimateGas");return oe(b1(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await s(o);return Fe(i,{_contract:n,estimateGas:r,populateTransaction:e,send:s,staticCall:t}),i}function BD(n,e){const t=function(...c){const h=n.interface.getFunction(e,c);return oe(h,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:c}}),h},s=async function(...c){const h=t(...c);let f={};if(h.inputs.length+1===c.length&&(f=await T1(c.pop()),f.from&&(f.from=await hs(f.from,C1(n.runner)))),h.inputs.length!==c.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const p=await OD(n.runner,h.inputs,c);return Object.assign({},f,await is({to:n.getAddress(),data:n.interface.encodeFunctionData(h,p)}))},r=async function(...c){const h=await a(...c);return h.length===1?h[0]:h},i=async function(...c){const h=n.runner;oe(I1(h),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const f=await h.sendTransaction(await s(...c)),p=To(n.runner);return new Em(n.interface,p,f)},o=async function(...c){const h=Uo(n.runner,"estimateGas");return oe(b1(h),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await h.estimateGas(await s(...c))},a=async function(...c){const h=Uo(n.runner,"call");oe(E1(h),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const f=await s(...c);let p="0x";try{p=await h.call(f)}catch(_){throw om(_)&&_.data?n.interface.makeError(_.data,f):_}const m=t(...c);return n.interface.decodeFunctionResult(m,p)},l=async(...c)=>t(...c).constant?await r(...c):await i(...c);return Fe(l,{name:n.interface.getFunctionName(e),_contract:n,_key:e,getFragment:t,estimateGas:o,populateTransaction:s,send:i,staticCall:r,staticCallResult:a}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{const c=n.interface.getFunction(e);return oe(c,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),c}}),l}function MD(n,e){const t=function(...r){const i=n.interface.getEvent(e,r);return oe(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:r}}),i},s=function(...r){return new DD(n,t(...r),r)};return Fe(s,{name:n.interface.getEventName(e),_contract:n,_key:e,getFragment:t}),Object.defineProperty(s,"fragment",{configurable:!1,enumerable:!0,get:()=>{const r=n.interface.getEvent(e);return oe(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),r}}),s}const Jh=Symbol.for("_ethersInternal_contract"),S1=new WeakMap;function FD(n,e){S1.set(n[Jh],e)}function xs(n){return S1.get(n[Jh])}function UD(n){return n&&typeof n=="object"&&"getTopicFilter"in n&&typeof n.getTopicFilter=="function"&&n.fragment}async function bm(n,e){let t,s=null;if(Array.isArray(e)){const i=function(o){if(Bt(o,32))return o;const a=n.interface.getEvent(o);return H(a,"unknown fragment","name",o),a.topicHash};t=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?t=[null]:typeof e=="string"?Bt(e,32)?t=[e]:(s=n.interface.getEvent(e),H(s,"unknown fragment","event",e),t=[s.topicHash]):UD(e)?t=await e.getTopicFilter():"fragment"in e?(s=e.fragment,t=[s.topicHash]):H(!1,"unknown event name","event",e);t=t.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const r=t.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:s,tag:r,topics:t}}async function xl(n,e){const{subs:t}=xs(n);return t.get((await bm(n,e)).tag)||null}async function Z0(n,e,t){const s=To(n.runner);oe(s,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:r,tag:i,topics:o}=await bm(n,t),{addr:a,subs:l}=xs(n);let c=l.get(i);if(!c){const f={address:a||n,topics:o},p=A=>{let w=r;if(w==null)try{w=n.interface.getEvent(A.topics[0])}catch{}if(w){const T=w,P=r?n.interface.decodeEventLog(r,A.data,A.topics):[];sg(n,t,P,U=>new ND(n,U,t,T,A))}else sg(n,t,[],T=>new _1(n,T,t,A))};let m=[];c={tag:i,listeners:[],start:()=>{m.length||m.push(s.on(f,p))},stop:async()=>{if(m.length==0)return;let A=m;m=[],await Promise.all(A),s.off(f,p)}},l.set(i,c)}return c}let ng=Promise.resolve();async function VD(n,e,t,s){await ng;const r=await xl(n,e);if(!r)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:o,once:a})=>{const l=Array.from(t);s&&l.push(s(a?null:o));try{o.call(n,...l)}catch{}return!a}),r.listeners.length===0&&(r.stop(),xs(n).subs.delete(r.tag)),i>0}async function sg(n,e,t,s){try{await ng}catch{}const r=VD(n,e,t,s);return ng=r,await r}const Zu=["then"];class jl{target;interface;runner;filters;[Jh];fallback;constructor(e,t,s,r){H(typeof e=="string"||Db(e),"invalid value for Contract target","target",e),s==null&&(s=null);const i=wo.from(t);Fe(this,{target:e,runner:s,interface:i}),Object.defineProperty(this,Jh,{value:{}});let o,a=null,l=null;if(r){const f=To(s);l=new Em(this.interface,f,r)}let c=new Map;if(typeof e=="string")if(Bt(e))a=e,o=Promise.resolve(e);else{const f=Uo(s,"resolveName");if(!jd(f))throw Gt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=f.resolveName(e).then(p=>{if(p==null)throw Gt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return xs(this).addr=p,p})}else o=e.getAddress().then(f=>{if(f==null)throw new Error("TODO");return xs(this).addr=f,f});FD(this,{addrPromise:o,addr:a,deployTx:l,subs:c});const h=new Proxy({},{get:(f,p,m)=>{if(typeof p=="symbol"||Zu.indexOf(p)>=0)return Reflect.get(f,p,m);try{return this.getEvent(p)}catch(_){if(!Un(_,"INVALID_ARGUMENT")||_.argument!=="key")throw _}},has:(f,p)=>Zu.indexOf(p)>=0?Reflect.has(f,p):Reflect.has(f,p)||this.interface.hasEvent(String(p))});return Fe(this,{filters:h}),Fe(this,{fallback:i.receive||i.fallback?LD(this):null}),new Proxy(this,{get:(f,p,m)=>{if(typeof p=="symbol"||p in f||Zu.indexOf(p)>=0)return Reflect.get(f,p,m);try{return f.getFunction(p)}catch(_){if(!Un(_,"INVALID_ARGUMENT")||_.argument!=="key")throw _}},has:(f,p)=>typeof p=="symbol"||p in f||Zu.indexOf(p)>=0?Reflect.has(f,p):f.interface.hasFunction(p)})}connect(e){return new jl(this.target,this.interface,e)}attach(e){return new jl(e,this.interface,this.runner)}async getAddress(){return await xs(this).addrPromise}async getDeployedCode(){const e=To(this.runner);oe(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return t==="0x"?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const s=To(this.runner);return oe(s!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((r,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return r(this);s.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return xs(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),BD(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),MD(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,s){t==null&&(t=0),s==null&&(s="latest");const{addr:r,addrPromise:i}=xs(this),o=r||await i,{fragment:a,topics:l}=await bm(this,e),c={address:o,topics:l,fromBlock:t,toBlock:s},h=To(this.runner);return oe(h,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await h.getLogs(c)).map(f=>{let p=a;if(p==null)try{p=this.interface.getEvent(f.topics[0])}catch{}if(p)try{return new _m(f,this.interface,p)}catch(m){return new w1(f,m)}return new Oc(f,h)})}async on(e,t){const s=await Z0(this,"on",e);return s.listeners.push({listener:t,once:!1}),s.start(),this}async once(e,t){const s=await Z0(this,"once",e);return s.listeners.push({listener:t,once:!0}),s.start(),this}async emit(e,...t){return await sg(this,e,t,null)}async listenerCount(e){if(e){const r=await xl(this,e);return r?r.listeners.length:0}const{subs:t}=xs(this);let s=0;for(const{listeners:r}of t.values())s+=r.length;return s}async listeners(e){if(e){const r=await xl(this,e);return r?r.listeners.map(({listener:i})=>i):[]}const{subs:t}=xs(this);let s=[];for(const{listeners:r}of t.values())s=s.concat(r.map(({listener:i})=>i));return s}async off(e,t){const s=await xl(this,e);if(!s)return this;if(t){const r=s.listeners.map(({listener:i})=>i).indexOf(t);r>=0&&s.listeners.splice(r,1)}return(t==null||s.listeners.length===0)&&(s.stop(),xs(this).subs.delete(s.tag)),this}async removeAllListeners(e){if(e){const t=await xl(this,e);if(!t)return this;t.stop(),xs(this).subs.delete(t.tag)}else{const{subs:t}=xs(this);for(const{tag:s,stop:r}of t.values())r(),t.delete(s)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends jl{constructor(r,i=null){super(r,e,i)}}return t}static from(e,t,s){return s==null&&(s=null),new this(e,t,s)}}function $D(){return jl}class zl extends $D(){}function np(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):H(!1,"unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}class HD{name;constructor(e){Fe(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const P1=new RegExp("^(ipfs)://(.*)$","i"),eA=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),P1,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class Ta{provider;address;name;#e;#t;constructor(e,t,s){Fe(this,{provider:e,address:t,name:s}),this.#e=null,this.#t=new zl(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return this.#e==null&&(this.#e=(async()=>{try{return await this.#t.supportsInterface("0x9061b923")}catch(e){if(Un(e,"CALL_EXCEPTION"))return!1;throw this.#e=null,e}})()),await this.#e}async#n(e,t){t=(t||[]).slice();const s=this.#t.interface;t.unshift(tg(this.name));let r=null;await this.supportsWildcard()&&(r=s.getFunction(e),oe(r,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[sD(this.name,255),s.encodeFunctionData(r,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const i=await this.#t[e](...t);return r?s.decodeFunctionResult(r,i)[0]:i}catch(i){if(!Un(i,"CALL_EXCEPTION"))throw i}return null}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await this.#n("addr(bytes32)");return i==null||i===cc?null:i}catch(i){if(Un(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await this.#n("addr(bytes32,uint)",[i]);if(Bt(o,20))return Et(o)}let t=null;for(const i of this.provider.plugins)if(i instanceof HD&&i.supportsCoinType(e)){t=i;break}if(t==null)return null;const s=await this.#n("addr(bytes32,uint)",[e]);if(s==null||s==="0x")return null;const r=await t.decodeAddress(e,s);if(r!=null)return r;oe(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:s}})}async getText(e){const t=await this.#n("text(bytes32,string)",[e]);return t==null||t==="0x"?null:t}async getContentHash(){const e=await this.#n("contenthash(bytes32)");if(e==null||e==="0x")return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const r=t[1]==="e3010170"?"ipfs":"ipns",i=parseInt(t[4],16);if(t[5].length===i*2)return`${r}://${zx("0x"+t[2])}`}const s=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(s&&s[1].length===64)return`bzz://${s[1]}`;oe(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(t==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let s=0;s<eA.length;s++){const r=t.match(eA[s]);if(r==null)continue;const i=r[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const o=np(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:t});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const l=(r[2]||"").split("/");if(l.length!==2)return e.push({type:`!${i}caip`,value:r[2]||""}),{url:null,linkage:e};const c=l[1],h=new zl(l[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const v=await h.ownerOf(c);if(a!==v)return e.push({type:"!owner",value:v}),{url:null,linkage:e};e.push({type:"owner",value:v})}else if(i==="erc1155"){const v=await h.balanceOf(a,c);if(!v)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:v.toString()})}let f=await h[o](c);if(f==null||f==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:f}),i==="erc1155"&&(f=f.replace("{id}",Qi(c,32).substring(2)),e.push({type:"metadata-url-expanded",value:f})),f.match(/^ipfs:/i)&&(f=np(f)),e.push({type:"metadata-url",value:f});let p={};const m=await new ti(f).send();m.assertOk();try{p=m.bodyJson}catch{try{e.push({type:"!metadata",value:m.bodyText})}catch{const w=m.body;return w&&e.push({type:"!metadata",value:ye(w)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!p)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(p)});let _=p.image;if(typeof _!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!_.match(/^(https:\/\/|data:)/i)){if(_.match(P1)==null)return e.push({type:"!imageUrl-ipfs",value:_}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:_}),_=np(_)}return e.push({type:"url",value:_}),{linkage:e,url:_}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),s=t.getPlugin("org.ethers.plugins.network.Ens");return oe(s,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),s.address}static async#s(e,t){const s=await Ta.getEnsAddress(e);try{const i=await new zl(s,["function resolver(bytes32) view returns (address)"],e).resolver(tg(t),{enableCcipRead:!0});return i===cc?null:i}catch(r){throw r}return null}static async fromName(e,t){let s=t;for(;;){if(s===""||s==="."||t!=="eth"&&s==="eth")return null;const r=await Ta.#s(e,s);if(r!=null){const i=new Ta(e,r,t);return s!==t&&!await i.supportsWildcard()?null:i}s=s.split(".").slice(1).join(".")}}}const tA=BigInt(0);function ct(n,e){return(function(t){return t==null?e:n(t)})}function gc(n,e){return(t=>{if(e&&t==null)return null;if(!Array.isArray(t))throw new Error("not an array");return t.map(s=>n(s))})}function Bc(n,e){return(t=>{const s={};for(const r in n){let i=r;if(e&&r in e&&!(i in t)){for(const o of e[r])if(o in t){i=o;break}}try{const o=n[r](t[i]);o!==void 0&&(s[r]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";oe(!1,`invalid value for value.${r} (${a})`,"BAD_DATA",{value:t})}}return s})}function GD(n){switch(n){case!0:case"true":return!0;case!1:case"false":return!1}H(!1,`invalid boolean; ${JSON.stringify(n)}`,"value",n)}function Qa(n){return H(Bt(n,!0),"invalid data","value",n),n}function Fn(n){return H(Bt(n,32),"invalid hash","value",n),n}const QD=Bc({address:Et,blockHash:Fn,blockNumber:tt,data:Qa,index:tt,removed:ct(GD,!1),topics:gc(Fn),transactionHash:Fn,transactionIndex:tt},{index:["logIndex"]});function jD(n){return QD(n)}const zD=Bc({hash:ct(Fn),parentHash:Fn,parentBeaconBlockRoot:ct(Fn,null),number:tt,timestamp:tt,nonce:ct(Qa),difficulty:Ie,gasLimit:Ie,gasUsed:Ie,stateRoot:ct(Fn,null),receiptsRoot:ct(Fn,null),blobGasUsed:ct(Ie,null),excessBlobGas:ct(Ie,null),miner:ct(Et),prevRandao:ct(Fn,null),extraData:Qa,baseFeePerGas:ct(Ie)},{prevRandao:["mixHash"]});function WD(n){const e=zD(n);return e.transactions=n.transactions.map(t=>typeof t=="string"?t:R1(t)),e}const KD=Bc({transactionIndex:tt,blockNumber:tt,transactionHash:Fn,address:Et,topics:gc(Fn),data:Qa,index:tt,blockHash:Fn},{index:["logIndex"]});function qD(n){return KD(n)}const JD=Bc({to:ct(Et,null),from:ct(Et,null),contractAddress:ct(Et,null),index:tt,root:ct(ye),gasUsed:Ie,blobGasUsed:ct(Ie,null),logsBloom:ct(Qa),blockHash:Fn,hash:Fn,logs:gc(qD),blockNumber:tt,cumulativeGasUsed:Ie,effectiveGasPrice:ct(Ie),blobGasPrice:ct(Ie,null),status:ct(tt),type:ct(tt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function YD(n){return JD(n)}function R1(n){n.to&&Ie(n.to)===tA&&(n.to="0x0000000000000000000000000000000000000000");const e=Bc({hash:Fn,index:ct(tt,void 0),type:t=>t==="0x"||t==null?0:tt(t),accessList:ct(jo,null),blobVersionedHashes:ct(gc(Fn,!0),null),authorizationList:ct(gc(t=>{let s;if(t.signature)s=t.signature;else{let r=t.yParity;r==="0x1b"?r=0:r==="0x1c"&&(r=1),s=Object.assign({},t,{yParity:r})}return{address:Et(t.address),chainId:Ie(t.chainId),nonce:Ie(t.nonce),signature:Zt.from(s)}},!1),null),blockHash:ct(Fn,null),blockNumber:ct(tt,null),transactionIndex:ct(tt,null),from:Et,gasPrice:ct(Ie),maxPriorityFeePerGas:ct(Ie),maxFeePerGas:ct(Ie),maxFeePerBlobGas:ct(Ie,null),gasLimit:Ie,to:ct(Et,null),value:Ie,nonce:tt,data:Qa,creates:ct(Et,null),chainId:ct(Ie,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(n);if(e.to==null&&e.creates==null&&(e.creates=U2(e)),(n.type===1||n.type===2)&&n.accessList==null&&(e.accessList=[]),n.signature?e.signature=Zt.from(n.signature):e.signature=Zt.from(n),e.chainId==null){const t=e.signature.legacyChainId;t!=null&&(e.chainId=t)}return e.blockHash&&Ie(e.blockHash)===tA&&(e.blockHash=null),e}const XD="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Mc{name;constructor(e){Fe(this,{name:e})}clone(){return new Mc(this.name)}}class zd extends Mc{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,t){e==null&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);const s={effectiveBlock:e};function r(i,o){let a=(t||{})[i];a==null&&(a=o),H(typeof a=="number",`invalud value for ${i}`,"costs",t),s[i]=a}r("txBase",21e3),r("txCreate",32e3),r("txDataZero",4),r("txDataNonzero",16),r("txAccessListStorageKey",1900),r("txAccessListAddress",2400),Fe(this,s)}clone(){return new zd(this.effectiveBlock,this)}}class Wd extends Mc{address;targetNetwork;constructor(e,t){super("org.ethers.plugins.network.Ens"),Fe(this,{address:e||XD,targetNetwork:t??1})}clone(){return new Wd(this.address,this.targetNetwork)}}class ZD extends Mc{#e;#t;get url(){return this.#e}get processFunc(){return this.#t}constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#e=e,this.#t=t}clone(){return this}}const sp=new Map;class Ds{#e;#t;#n;constructor(e,t){this.#e=e,this.#t=Ie(t),this.#n=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#e}set name(e){this.#e=e}get chainId(){return this.#t}set chainId(e){this.#t=Ie(e,"chainId")}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Ie(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Ie(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Ie(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(this.#n.values())}attachPlugin(e){if(this.#n.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#n.set(e.name,e.clone()),this}getPlugin(e){return this.#n.get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){const e=new Ds(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new zd;let s=t.txBase;if(e.to==null&&(s+=t.txCreate),e.data)for(let r=2;r<e.data.length;r+=2)e.data.substring(r,r+2)==="00"?s+=t.txDataZero:s+=t.txDataNonzero;if(e.accessList){const r=jo(e.accessList);for(const i in r)s+=t.txAccessListAddress+t.txAccessListStorageKey*r[i].storageKeys.length}return s}static from(e){if(eO(),e==null)return Ds.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const t=sp.get(e);if(t)return t();if(typeof e=="bigint")return new Ds("unknown",e);H(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){H(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const t=new Ds(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&t.attachPlugin(new Wd(e.ensAddress,e.ensNetwork)),t}H(!1,"invalid network","network",e)}static register(e,t){typeof e=="number"&&(e=BigInt(e));const s=sp.get(e);s&&H(!1,`conflicting network for ${JSON.stringify(s.name)}`,"nameOrChainId",e),sp.set(e,t)}}function nA(n,e){const t=String(n);if(!t.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${n}`);const s=t.split(".");if(s.length===1&&s.push(""),s.length!==2)throw new Error(`invalid gwei value: ${n}`);for(;s[1].length<e;)s[1]+="0";if(s[1].length>9){let r=BigInt(s[1].substring(0,9));s[1].substring(9).match(/^0+$/)||r++,s[1]=r.toString()}return BigInt(s[0]+s[1])}function sA(n){return new ZD(n,async(e,t,s)=>{s.setHeader("User-Agent","ethers");let r;try{const[i,o]=await Promise.all([s.send(),e()]);r=i;const a=r.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:nA(a.maxFee,9),maxPriorityFeePerGas:nA(a.maxPriorityFee,9)}}catch(i){oe(!1,`error encountered with polygon gas station (${JSON.stringify(s.url)})`,"SERVER_ERROR",{request:s,response:r,error:i})}})}let rA=!1;function eO(){if(rA)return;rA=!0;function n(e,t,s){const r=function(){const i=new Ds(e,t);return s.ensNetwork!=null&&i.attachPlugin(new Wd(null,s.ensNetwork)),i.attachPlugin(new zd),(s.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Ds.register(e,r),Ds.register(t,r),s.altNames&&s.altNames.forEach(i=>{Ds.register(i,r)})}n("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),n("ropsten",3,{ensNetwork:3}),n("rinkeby",4,{ensNetwork:4}),n("goerli",5,{ensNetwork:5}),n("kovan",42,{ensNetwork:42}),n("sepolia",11155111,{ensNetwork:11155111}),n("holesky",17e3,{ensNetwork:17e3}),n("classic",61,{}),n("classicKotti",6,{}),n("arbitrum",42161,{ensNetwork:1}),n("arbitrum-goerli",421613,{}),n("arbitrum-sepolia",421614,{}),n("base",8453,{ensNetwork:1}),n("base-goerli",84531,{}),n("base-sepolia",84532,{}),n("bnb",56,{ensNetwork:1}),n("bnbt",97,{}),n("linea",59144,{ensNetwork:1}),n("linea-goerli",59140,{}),n("linea-sepolia",59141,{}),n("matic",137,{ensNetwork:1,plugins:[sA("https://gasstation.polygon.technology/v2")]}),n("matic-amoy",80002,{}),n("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[sA("https://gasstation-testnet.polygon.technology/v2")]}),n("optimism",10,{ensNetwork:1,plugins:[]}),n("optimism-goerli",420,{}),n("optimism-sepolia",11155420,{}),n("xdai",100,{ensNetwork:1})}function rg(n){return JSON.parse(JSON.stringify(n))}class tO{#e;#t;#n;#s;constructor(e){this.#e=e,this.#t=null,this.#n=4e3,this.#s=-2}get pollingInterval(){return this.#n}set pollingInterval(e){this.#n=e}async#r(){try{const e=await this.#e.getBlockNumber();if(this.#s===-2){this.#s=e;return}if(e!==this.#s){for(let t=this.#s+1;t<=e;t++){if(this.#t==null)return;await this.#e.emit("block",t)}this.#s=e}}catch{}this.#t!=null&&(this.#t=this.#e._setTimeout(this.#r.bind(this),this.#n))}start(){this.#t||(this.#t=this.#e._setTimeout(this.#r.bind(this),this.#n),this.#r())}stop(){this.#t&&(this.#e._clearTimeout(this.#t),this.#t=null)}pause(e){this.stop(),e&&(this.#s=-2)}resume(){this.start()}}class Im{#e;#t;#n;constructor(e){this.#e=e,this.#n=!1,this.#t=t=>{this._poll(t,this.#e)}}async _poll(e,t){throw new Error("sub-classes must override this")}start(){this.#n||(this.#n=!0,this.#t(-2),this.#e.on("block",this.#t))}stop(){this.#n&&(this.#n=!1,this.#e.off("block",this.#t))}pause(e){this.stop()}resume(){this.start()}}class nO extends Im{#e;#t;constructor(e,t){super(e),this.#e=t,this.#t=-2}pause(e){e&&(this.#t=-2),super.pause(e)}async _poll(e,t){const s=await t.getBlock(this.#e);s!=null&&(this.#t===-2?this.#t=s.number:s.number>this.#t&&(t.emit(this.#e,s.number),this.#t=s.number))}}class sO extends Im{#e;constructor(e,t){super(e),this.#e=rg(t)}async _poll(e,t){throw new Error("@TODO")}}class rO extends Im{#e;constructor(e,t){super(e),this.#e=t}async _poll(e,t){const s=await t.getTransactionReceipt(this.#e);s&&t.emit(this.#e,s)}}class Cm{#e;#t;#n;#s;#r;constructor(e,t){this.#e=e,this.#t=rg(t),this.#n=this.#o.bind(this),this.#s=!1,this.#r=-2}async#o(e){if(this.#r===-2)return;const t=rg(this.#t);t.fromBlock=this.#r+1,t.toBlock=e;const s=await this.#e.getLogs(t);if(s.length===0){this.#r<e-60&&(this.#r=e-60);return}for(const r of s)this.#e.emit(this.#t,r),this.#r=r.blockNumber}start(){this.#s||(this.#s=!0,this.#r===-2&&this.#e.getBlockNumber().then(e=>{this.#r=e}),this.#e.on("block",this.#n))}stop(){this.#s&&(this.#s=!1,this.#e.off("block",this.#n))}pause(e){this.stop(),e&&(this.#r=-2)}resume(){this.start()}}const iO=BigInt(2),oO=10;function eh(n){return n&&typeof n.then=="function"}function mh(n,e){return n+":"+JSON.stringify(e,(t,s)=>{if(s==null)return"null";if(typeof s=="bigint")return`bigint:${s.toString()}`;if(typeof s=="string")return s.toLowerCase();if(typeof s=="object"&&!Array.isArray(s)){const r=Object.keys(s);return r.sort(),r.reduce((i,o)=>(i[o]=s[o],i),{})}return s})}class x1{name;constructor(e){Fe(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function aO(n){return JSON.parse(JSON.stringify(n))}function ig(n){return n=Array.from(new Set(n).values()),n.sort(),n}async function rp(n,e){if(n==null)throw new Error("invalid event");if(Array.isArray(n)&&(n={topics:n}),typeof n=="string")switch(n){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:n,tag:n}}if(Bt(n,32)){const t=n.toLowerCase();return{type:"transaction",tag:mh("tx",{hash:t}),hash:t}}if(n.orphan){const t=n;return{type:"orphan",tag:mh("orphan",t),filter:aO(t)}}if(n.address||n.topics){const t=n,s={topics:(t.topics||[]).map(r=>r==null?null:Array.isArray(r)?ig(r.map(i=>i.toLowerCase())):r.toLowerCase())};if(t.address){const r=[],i=[],o=a=>{Bt(a)?r.push(a):i.push((async()=>{r.push(await hs(a,e))})())};Array.isArray(t.address)?t.address.forEach(o):o(t.address),i.length&&await Promise.all(i),s.address=ig(r.map(a=>a.toLowerCase()))}return{filter:s,tag:mh("event",s),type:"event"}}H(!1,"unknown ProviderEvent","event",n)}function ip(){return new Date().getTime()}const lO={cacheTimeout:250,pollingInterval:4e3};class cO{#e;#t;#n;#s;#r;#o;#i;#a;#h;#c;#p;#g;constructor(e,t){if(this.#g=Object.assign({},lO,t||{}),e==="any")this.#o=!0,this.#r=null;else if(e){const s=Ds.from(e);this.#o=!1,this.#r=Promise.resolve(s),setTimeout(()=>{this.emit("network",s,null)},0)}else this.#o=!1,this.#r=null;this.#a=-1,this.#i=new Map,this.#e=new Map,this.#t=new Map,this.#n=null,this.#s=!1,this.#h=1,this.#c=new Map,this.#p=!1}get pollingInterval(){return this.#g.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#t.values())}attachPlugin(e){if(this.#t.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#t.set(e.name,e.connect(this)),this}getPlugin(e){return this.#t.get(e)||null}get disableCcipRead(){return this.#p}set disableCcipRead(e){this.#p=!!e}async#l(e){const t=this.#g.cacheTimeout;if(t<0)return await this._perform(e);const s=mh(e.method,e);let r=this.#i.get(s);return r||(r=this._perform(e),this.#i.set(s,r),setTimeout(()=>{this.#i.get(s)===r&&this.#i.delete(s)},t)),await r}async ccipReadFetch(e,t,s){if(this.disableCcipRead||s.length===0||e.to==null)return null;const r=e.to.toLowerCase(),i=t.toLowerCase(),o=[];for(let a=0;a<s.length;a++){const l=s[a],c=l.replace("{sender}",r).replace("{data}",i),h=new ti(c);l.indexOf("{data}")===-1&&(h.body={data:i,sender:r}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:h,index:a,urls:s});let f="unknown error",p;try{p=await h.send()}catch(m){o.push(m.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:h,result:{error:m}});continue}try{const m=p.bodyJson;if(m.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:h,result:m}),m.data;m.message&&(f=m.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:h,result:m})}catch{}oe(p.statusCode<400||p.statusCode>=500,`response not found during CCIP fetch: ${f}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:l,errorMessage:f}}),o.push(f)}oe(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:s,errorMessages:o}})}_wrapBlock(e,t){return new PD(WD(e),this)}_wrapLog(e,t){return new Oc(jD(e),this)}_wrapTransactionReceipt(e,t){return new y1(YD(e),this)}_wrapTransactionResponse(e,t){return new Lc(R1(e),this)}_detectNetwork(){oe(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){oe(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=tt(await this.#l({method:"getBlockNumber"}),"%response");return this.#a>=0&&(this.#a=e),e}_getAddress(e){return hs(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(Bt(e))return Bt(e,32)?e:Js(e);if(typeof e=="bigint"&&(e=tt(e,"blockTag")),typeof e=="number")return e>=0?Js(e):this.#a>=0?Js(this.#a+e):this.getBlockNumber().then(t=>Js(t+e));H(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const t=(e.topics||[]).map(l=>l==null?null:Array.isArray(l)?ig(l.map(c=>c.toLowerCase())):l.toLowerCase()),s="blockHash"in e?e.blockHash:void 0,r=(l,c,h)=>{let f;switch(l.length){case 0:break;case 1:f=l[0];break;default:l.sort(),f=l}if(s&&(c!=null||h!=null))throw new Error("invalid filter");const p={};return f&&(p.address=f),t.length&&(p.topics=t),c&&(p.fromBlock=c),h&&(p.toBlock=h),s&&(p.blockHash=s),p};let i=[];if(e.address)if(Array.isArray(e.address))for(const l of e.address)i.push(this._getAddress(l));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(l=>typeof l!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(l=>r(l[0],l[1],l[2])):r(i,o,a)}_getTransactionRequest(e){const t=qh(e),s=[];if(["to","from"].forEach(r=>{if(t[r]==null)return;const i=hs(t[r],this);eh(i)?s.push((async function(){t[r]=await i})()):t[r]=i}),t.blockTag!=null){const r=this._getBlockTag(t.blockTag);eh(r)?s.push((async function(){t.blockTag=await r})()):t.blockTag=r}return s.length?(async function(){return await Promise.all(s),t})():t}async getNetwork(){if(this.#r==null){const r=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw this.#r===r&&(this.#r=null),i}})();return this.#r=r,(await r).clone()}const e=this.#r,[t,s]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==s.chainId&&(this.#o?(this.emit("network",s,t),this.#r===e&&(this.#r=Promise.resolve(s))):oe(!1,`network changed: ${t.chainId} => ${s.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:r,gasPrice:i,priorityFee:o}=await is({_block:this.#y("latest",!1),gasPrice:(async()=>{try{const h=await this.#l({method:"getGasPrice"});return Ie(h,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const h=await this.#l({method:"getPriorityFee"});return Ie(h,"%response")}catch{}return null})()});let a=null,l=null;const c=this._wrapBlock(r,e);return c&&c.baseFeePerGas&&(l=o??BigInt("1000000000"),a=c.baseFeePerGas*iO+l),new Y0(i,a,l)},s=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(s){const r=new ti(s.url),i=await s.processFunc(t,this,r);return new Y0(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return eh(t)&&(t=await t),Ie(await this.#l({method:"estimateGas",transaction:t}),"%response")}async#u(e,t,s){oe(s<oO,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const r=qh(e);try{return ye(await this._perform({method:"call",transaction:r,blockTag:t}))}catch(i){if(!this.disableCcipRead&&om(i)&&i.data&&s>=0&&t==="latest"&&r.to!=null&&Xt(i.data,0,4)==="0x556f1830"){const o=i.data,a=await hs(r.to,this);let l;try{l=pO(Xt(i.data,4))}catch(f){oe(!1,f.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:r,info:{data:o}})}oe(l.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:r,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:l.errorArgs}});const c=await this.ccipReadFetch(r,l.calldata,l.urls);oe(c!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:r,info:{data:i.data,errorArgs:l.errorArgs}});const h={to:a,data:nn([l.selector,fO([c,l.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:h});try{const f=await this.#u(h,t,s+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},h),result:f}),f}catch(f){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},h),error:f}),f}}throw i}}async#d(e){const{value:t}=await is({network:this.getNetwork(),value:e});return t}async call(e){const{tx:t,blockTag:s}=await is({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#d(this.#u(t,s,e.enableCcipRead?0:-1))}async#f(e,t,s){let r=this._getAddress(t),i=this._getBlockTag(s);return(typeof r!="string"||typeof i!="string")&&([r,i]=await Promise.all([r,i])),await this.#d(this.#l(Object.assign(e,{address:r,blockTag:i})))}async getBalance(e,t){return Ie(await this.#f({method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return tt(await this.#f({method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return ye(await this.#f({method:"getCode"},e,t))}async getStorage(e,t,s){const r=Ie(t,"position");return ye(await this.#f({method:"getStorage",position:r},e,s))}async broadcastTransaction(e){const{blockNumber:t,hash:s,network:r}=await is({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=Ks.from(e);if(i.hash!==s)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,r).replaceableTransaction(t)}async#y(e,t){if(Bt(e,32))return await this.#l({method:"getBlock",blockHash:e,includeTransactions:t});let s=this._getBlockTag(e);return typeof s!="string"&&(s=await s),await this.#l({method:"getBlock",blockTag:s,includeTransactions:t})}async getBlock(e,t){const{network:s,params:r}=await is({network:this.getNetwork(),params:this.#y(e,!!t)});return r==null?null:this._wrapBlock(r,s)}async getTransaction(e){const{network:t,params:s}=await is({network:this.getNetwork(),params:this.#l({method:"getTransaction",hash:e})});return s==null?null:this._wrapTransactionResponse(s,t)}async getTransactionReceipt(e){const{network:t,params:s}=await is({network:this.getNetwork(),params:this.#l({method:"getTransactionReceipt",hash:e})});if(s==null)return null;if(s.gasPrice==null&&s.effectiveGasPrice==null){const r=await this.#l({method:"getTransaction",hash:e});if(r==null)throw new Error("report this; could not find tx or effectiveGasPrice");s.effectiveGasPrice=r.gasPrice}return this._wrapTransactionReceipt(s,t)}async getTransactionResult(e){const{result:t}=await is({network:this.getNetwork(),result:this.#l({method:"getTransactionResult",hash:e})});return t==null?null:ye(t)}async getLogs(e){let t=this._getFilter(e);eh(t)&&(t=await t);const{network:s,params:r}=await is({network:this.getNetwork(),params:this.#l({method:"getLogs",filter:t})});return r.map(i=>this._wrapLog(i,s))}_getProvider(e){oe(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await Ta.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=Et(e);const t=tg(e.substring(2).toLowerCase()+".addr.reverse");try{const s=await Ta.getEnsAddress(this),i=await new zl(s,["function resolver(bytes32) view returns (address)"],this).resolver(t);if(i==null||i===cc)return null;const a=await new zl(i,["function name(bytes32) view returns (string)"],this).name(t);return await this.resolveName(a)!==e?null:a}catch(s){if(Un(s,"BAD_DATA")&&s.value==="0x"||Un(s,"CALL_EXCEPTION"))return null;throw s}return null}async waitForTransaction(e,t,s){const r=t??1;return r===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const l=(async c=>{try{const h=await this.getTransactionReceipt(e);if(h!=null&&c-h.blockNumber+1>=r){i(h),a&&(clearTimeout(a),a=null);return}}catch(h){console.log("EEE",h)}this.once("block",l)});s!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",l),o(Gt("timeout","TIMEOUT",{reason:"timeout"})))},s)),l(await this.getBlockNumber())})}async waitForBlock(e){oe(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=this.#c.get(e);t&&(t.timer&&clearTimeout(t.timer),this.#c.delete(e))}_setTimeout(e,t){t==null&&(t=0);const s=this.#h++,r=()=>{this.#c.delete(s),e()};if(this.paused)this.#c.set(s,{timer:null,func:r,time:t});else{const i=setTimeout(r,t);this.#c.set(s,{timer:i,func:r,time:ip()})}return s}_forEachSubscriber(e){for(const t of this.#e.values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new x1(e.type);case"block":{const t=new tO(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new nO(this,e.type);case"event":return new Cm(this,e.filter);case"transaction":return new rO(this,e.hash);case"orphan":return new sO(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const s of this.#e.values())if(s.subscriber===e){s.started&&s.subscriber.stop(),s.subscriber=t,s.started&&t.start(),this.#n!=null&&t.pause(this.#n);break}}async#m(e,t){let s=await rp(e,this);return s.type==="event"&&t&&t.length>0&&t[0].removed===!0&&(s=await rp({orphan:"drop-log",log:t[0]},this)),this.#e.get(s.tag)||null}async#v(e){const t=await rp(e,this),s=t.tag;let r=this.#e.get(s);return r||(r={subscriber:this._getSubscriber(t),tag:s,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#e.set(s,r)),r}async on(e,t){const s=await this.#v(e);return s.listeners.push({listener:t,once:!1}),s.started||(s.subscriber.start(),s.started=!0,this.#n!=null&&s.subscriber.pause(this.#n)),this}async once(e,t){const s=await this.#v(e);return s.listeners.push({listener:t,once:!0}),s.started||(s.subscriber.start(),s.started=!0,this.#n!=null&&s.subscriber.pause(this.#n)),this}async emit(e,...t){const s=await this.#m(e,t);if(!s||s.listeners.length===0)return!1;const r=s.listeners.length;return s.listeners=s.listeners.filter(({listener:i,once:o})=>{const a=new KE(this,o?null:i,e);try{i.call(this,...t,a)}catch{}return!o}),s.listeners.length===0&&(s.started&&s.subscriber.stop(),this.#e.delete(s.tag)),r>0}async listenerCount(e){if(e){const s=await this.#m(e);return s?s.listeners.length:0}let t=0;for(const{listeners:s}of this.#e.values())t+=s.length;return t}async listeners(e){if(e){const s=await this.#m(e);return s?s.listeners.map(({listener:r})=>r):[]}let t=[];for(const{listeners:s}of this.#e.values())t=t.concat(s.map(({listener:r})=>r));return t}async off(e,t){const s=await this.#m(e);if(!s)return this;if(t){const r=s.listeners.map(({listener:i})=>i).indexOf(t);r>=0&&s.listeners.splice(r,1)}return(!t||s.listeners.length===0)&&(s.started&&s.subscriber.stop(),this.#e.delete(s.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:s,subscriber:r}=await this.#v(e);s&&r.stop(),this.#e.delete(t)}else for(const[t,{started:s,subscriber:r}]of this.#e)s&&r.stop(),this.#e.delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return this.#s}destroy(){this.removeAllListeners();for(const e of this.#c.keys())this._clearTimeout(e);this.#s=!0}get paused(){return this.#n!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#a=-1,this.#n!=null){if(this.#n==!!e)return;oe(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),this.#n=!!e;for(const t of this.#c.values())t.timer&&clearTimeout(t.timer),t.time=ip()-t.time}resume(){if(this.#n!=null){this._forEachSubscriber(e=>e.resume()),this.#n=null;for(const e of this.#c.values()){let t=e.time;t<0&&(t=0),e.time=ip(),setTimeout(e.func,t)}}}}function uO(n,e){try{const t=og(n,e);if(t)return Hh(t)}catch{}return null}function og(n,e){if(n==="0x")return null;try{const t=tt(Xt(n,e,e+32)),s=tt(Xt(n,t,t+32));return Xt(n,t+32,t+32+s)}catch{}return null}function iA(n){const e=bn(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function hO(n){if(n.length%32===0)return n;const e=new Uint8Array(Math.ceil(n.length/32)*32);return e.set(n),e}const dO=new Uint8Array([]);function fO(n){const e=[];let t=0;for(let s=0;s<n.length;s++)e.push(dO),t+=32;for(let s=0;s<n.length;s++){const r=rt(n[s]);e[s]=iA(t),e.push(iA(r.length)),e.push(hO(r)),t+=32+Math.ceil(r.length/32)*32}return nn(e)}const oA="0x0000000000000000000000000000000000000000000000000000000000000000";function pO(n){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};oe(Ea(n)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const t=Xt(n,0,32);oe(Xt(t,0,12)===Xt(oA,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Xt(t,12);try{const s=[],r=tt(Xt(n,32,64)),i=tt(Xt(n,r,r+32)),o=Xt(n,r+32);for(let a=0;a<i;a++){const l=uO(o,a*32);if(l==null)throw new Error("abort");s.push(l)}e.urls=s}catch{oe(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const s=og(n,64);if(s==null)throw new Error("abort");e.calldata=s}catch{oe(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}oe(Xt(n,100,128)===Xt(oA,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Xt(n,96,100);try{const s=og(n,128);if(s==null)throw new Error("abort");e.extraData=s}catch{oe(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(s=>e[s]),e}function fo(n,e){if(n.provider)return n.provider;oe(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function aA(n,e){let t=qh(e);if(t.to!=null&&(t.to=hs(t.to,n)),t.from!=null){const s=t.from;t.from=Promise.all([n.getAddress(),hs(s,n)]).then(([r,i])=>(H(r.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),r))}else t.from=n.getAddress();return await is(t)}class gO{provider;constructor(e){Fe(this,{provider:e||null})}async getNonce(e){return fo(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await aA(this,e)}async populateTransaction(e){const t=fo(this,"populateTransaction"),s=await aA(this,e);s.nonce==null&&(s.nonce=await this.getNonce("pending")),s.gasLimit==null&&(s.gasLimit=await this.estimateGas(s));const r=await this.provider.getNetwork();if(s.chainId!=null){const o=Ie(s.chainId);H(o===r.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else s.chainId=r.chainId;const i=s.maxFeePerGas!=null||s.maxPriorityFeePerGas!=null;if(s.gasPrice!=null&&(s.type===2||i)?H(!1,"eip-1559 transaction do not support gasPrice","tx",e):(s.type===0||s.type===1)&&i&&H(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(s.type===2||s.type==null)&&s.maxFeePerGas!=null&&s.maxPriorityFeePerGas!=null)s.type=2;else if(s.type===0||s.type===1){const o=await t.getFeeData();oe(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),s.gasPrice==null&&(s.gasPrice=o.gasPrice)}else{const o=await t.getFeeData();if(s.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(s.authorizationList&&s.authorizationList.length?s.type=4:s.type=2,s.gasPrice!=null){const a=s.gasPrice;delete s.gasPrice,s.maxFeePerGas=a,s.maxPriorityFeePerGas=a}else s.maxFeePerGas==null&&(s.maxFeePerGas=o.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(oe(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),s.gasPrice==null&&(s.gasPrice=o.gasPrice),s.type=0):oe(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(s.type===2||s.type===3||s.type===4)&&(s.maxFeePerGas==null&&(s.maxFeePerGas=o.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await is(s)}async populateAuthorization(e){const t=Object.assign({},e);return t.chainId==null&&(t.chainId=(await fo(this,"getNetwork").getNetwork()).chainId),t.nonce==null&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return fo(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return fo(this,"call").call(await this.populateCall(e))}async resolveName(e){return await fo(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=fo(this,"sendTransaction"),s=await this.populateTransaction(e);delete s.from;const r=Ks.from(s);return await t.broadcastTransaction(await this.signTransaction(r))}authorize(e){oe(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function mO(n){return JSON.parse(JSON.stringify(n))}class k1{#e;#t;#n;#s;#r;#o;constructor(e){this.#e=e,this.#t=null,this.#n=this.#i.bind(this),this.#s=!1,this.#r=null,this.#o=!1}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}async#i(e){try{this.#t==null&&(this.#t=this._subscribe(this.#e));let t=null;try{t=await this.#t}catch(i){if(!Un(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(t==null){this.#t=null,this.#e._recoverSubscriber(this,this._recover(this.#e));return}const s=await this.#e.getNetwork();if(this.#r||(this.#r=s),this.#r.chainId!==s.chainId)throw new Error("chaid changed");if(this.#o)return;const r=await this.#e.send("eth_getFilterChanges",[t]);await this._emitResults(this.#e,r)}catch(t){console.log("@TODO",t)}this.#e.once("block",this.#n)}#a(){const e=this.#t;e&&(this.#t=null,e.then(t=>{this.#e.destroyed||this.#e.send("eth_uninstallFilter",[t])}))}start(){this.#s||(this.#s=!0,this.#i(-2))}stop(){this.#s&&(this.#s=!1,this.#o=!0,this.#a(),this.#e.off("block",this.#n))}pause(e){e&&this.#a(),this.#e.off("block",this.#n)}resume(){this.start()}}class yO extends k1{#e;constructor(e,t){super(e),this.#e=mO(t)}_recover(e){return new Cm(e,this.#e)}async _subscribe(e){return await e.send("eth_newFilter",[this.#e])}async _emitResults(e,t){for(const s of t)e.emit(this.#e,e._wrapLog(s,e._network))}}class vO extends k1{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const s of t)e.emit("pending",s)}}const AO="bigint,boolean,function,number,string,symbol".split(/,/g);function yh(n){if(n==null||AO.indexOf(typeof n)>=0||typeof n.getAddress=="function")return n;if(Array.isArray(n))return n.map(yh);if(typeof n=="object")return Object.keys(n).reduce((e,t)=>(e[t]=n[t],e),{});throw new Error(`should not happen: ${n} (${typeof n})`)}function wO(n){return new Promise(e=>{setTimeout(e,n)})}function ia(n){return n&&n.toLowerCase()}function lA(n){return n&&typeof n.pollingInterval=="number"}const N1={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class op extends gO{address;constructor(e,t){super(e),t=Et(t),Fe(this,{address:t})}connect(e){oe(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const t=yh(e),s=[];if(t.from){const i=t.from;s.push((async()=>{const o=await hs(i,this.provider);H(o!=null&&o.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=o})())}else t.from=this.address;if(t.gasLimit==null&&s.push((async()=>{t.gasLimit=await this.provider.estimateGas({...t,from:this.address})})()),t.to!=null){const i=t.to;s.push((async()=>{t.to=await hs(i,this.provider)})())}s.length&&await Promise.all(s);const r=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[r])}async sendTransaction(e){const t=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(e);return await new Promise((r,i)=>{const o=[1e3,100];let a=0;const l=async()=>{try{const c=await this.provider.getTransaction(s);if(c!=null){r(c.replaceableTransaction(t));return}}catch(c){if(Un(c,"CANCELLED")||Un(c,"BAD_DATA")||Un(c,"NETWORK_ERROR")||Un(c,"UNSUPPORTED_OPERATION")){c.info==null&&(c.info={}),c.info.sendTransactionHash=s,i(c);return}if(Un(c,"INVALID_ARGUMENT")&&(a++,c.info==null&&(c.info={}),c.info.sendTransactionHash=s,a>10)){i(c);return}this.provider.emit("error",Gt("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:c}))}this.provider._setTimeout(()=>{l()},o.pop()||4e3)};l()})}async signTransaction(e){const t=yh(e);if(t.from){const r=await hs(t.from,this.provider);H(r!=null&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=r}else t.from=this.address;const s=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[s])}async signMessage(e){const t=typeof e=="string"?Kr(e):e;return await this.provider.send("personal_sign",[ye(t),this.address.toLowerCase()])}async signTypedData(e,t,s){const r=yh(s),i=await Rs.resolveNames(e,t,r,async o=>{const a=await hs(o);return H(a!=null,"TypedData does not support null address","value",o),a});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Rs.getPayload(i.domain,t,i.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const t=typeof e=="string"?Kr(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),ye(t)])}}class _O extends cO{#e;#t;#n;#s;#r;#o;#i;#a(){if(this.#s)return;const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");this.#s=setTimeout(()=>{this.#s=null;const t=this.#n;for(this.#n=[];t.length;){const s=[t.shift()];for(;t.length&&s.length!==this.#e.batchMaxCount;)if(s.push(t.shift()),JSON.stringify(s.map(i=>i.payload)).length>this.#e.batchMaxSize){t.unshift(s.pop());break}(async()=>{const r=s.length===1?s[0].payload:s.map(i=>i.payload);this.emit("debug",{action:"sendRpcPayload",payload:r});try{const i=await this._send(r);this.emit("debug",{action:"receiveRpcResult",result:i});for(const{resolve:o,reject:a,payload:l}of s){if(this.destroyed){a(Gt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const c=i.filter(h=>h.id===l.id)[0];if(c==null){const h=Gt("missing response for request","BAD_DATA",{value:i,info:{payload:l}});this.emit("error",h),a(h);continue}if("error"in c){a(this.getRpcError(l,c));continue}o(c.result)}}catch(i){this.emit("debug",{action:"receiveRpcError",error:i});for(const{reject:o}of s)o(i)}})()}},e)}constructor(e,t){super(e,t),this.#t=1,this.#e=Object.assign({},N1,t||{}),this.#n=[],this.#s=null,this.#o=null,this.#i=null;{let r=null;const i=new Promise(o=>{r=o});this.#r={promise:i,resolve:r}}const s=this._getOption("staticNetwork");typeof s=="boolean"?(H(!s||e!=="any","staticNetwork cannot be used on special network 'any'","options",t),s&&e!=null&&(this.#o=Ds.from(e))):s&&(H(e==null||s.matches(e),"staticNetwork MUST match network object","options",t),this.#o=s)}_getOption(e){return this.#e[e]}get _network(){return oe(this.#o,"network is not available yet","NETWORK_ERROR"),this.#o}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let s=e.transaction;if(s&&s.type!=null&&Ie(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const r=await this.getFeeData();r.maxFeePerGas==null&&r.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},s,{type:void 0})}))}}const t=this.getRpcRequest(e);return t!=null?await this.send(t.method,t.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)if(e===!0){if(this.#o)return this.#o}else return e;return this.#i?await this.#i:this.ready?(this.#i=(async()=>{try{const t=Ds.from(Ie(await this.send("eth_chainId",[])));return this.#i=null,t}catch(t){throw this.#i=null,t}})(),await this.#i):(this.#i=(async()=>{const t={id:this.#t++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:t});let s;try{s=(await this._send(t))[0],this.#i=null}catch(r){throw this.#i=null,this.emit("debug",{action:"receiveRpcError",error:r}),r}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Ds.from(Ie(s.result));throw this.getRpcError(t,s)})(),await this.#i)}_start(){this.#r==null||this.#r.resolve==null||(this.#r.resolve(),this.#r=null,(async()=>{for(;this.#o==null&&!this.destroyed;)try{this.#o=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Gt("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await wO(1e3)}this.#a()})())}async _waitUntilReady(){if(this.#r!=null)return await this.#r.promise}_getSubscriber(e){return e.type==="pending"?new vO(this):e.type==="event"?this._getOption("polling")?new Cm(this,e.filter):new yO(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new x1("orphan"):super._getSubscriber(e)}get ready(){return this.#r==null}getRpcTransaction(e){const t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(e[s]==null)return;let r=s;s==="gasLimit"&&(r="gas"),t[r]=Js(Ie(e[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{e[s]!=null&&(t[s]=ye(e[s]))}),e.accessList&&(t.accessList=jo(e.accessList)),e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.map(s=>s.toLowerCase())),e.authorizationList&&(t.authorizationList=e.authorizationList.map(s=>{const r=Mb(s);return{address:r.address,nonce:Js(r.nonce),chainId:Js(r.chainId),yParity:Js(r.signature.yParity),r:Js(r.signature.r),s:Js(r.signature.s)}})),t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[ia(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[ia(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[ia(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[ia(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(ia):e.filter.address=ia(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){const{method:s}=e,{error:r}=t;if(s==="eth_estimateGas"&&r.message){const a=r.message;if(!a.match(/revert/i)&&a.match(/insufficient funds/i))return Gt("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:r}});if(a.match(/nonce/i)&&a.match(/too low/i))return Gt("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:r}})}if(s==="eth_call"||s==="eth_estimateGas"){const a=ag(r),l=Ga.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",e.params[0],a?a.data:null);return l.info={error:r,payload:e},l}const i=JSON.stringify(bO(r));if(typeof r.message=="string"&&r.message.match(/user denied|ethers-user-denied/i))return Gt("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:e,error:r}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const a=e.params[0];if(i.match(/insufficient funds|base fee exceeds gas limit/i))return Gt("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:a,info:{error:r}});if(i.match(/nonce/i)&&i.match(/too low/i))return Gt("nonce has already been used","NONCE_EXPIRED",{transaction:a,info:{error:r}});if(i.match(/replacement transaction/i)&&i.match(/underpriced/i))return Gt("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:a,info:{error:r}});if(i.match(/only replay-protected/i))return Gt("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:a,info:{error:r}}})}let o=!!i.match(/the method .* does not exist/i);return o||r&&r.details&&r.details.startsWith("Unauthorized method:")&&(o=!0),o?Gt("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:r,payload:e}}):Gt("could not coalesce error","UNKNOWN_ERROR",{error:r,payload:e})}send(e,t){if(this.destroyed)return Promise.reject(Gt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const s=this.#t++,r=new Promise((i,o)=>{this.#n.push({resolve:i,reject:o,payload:{method:e,params:t,id:s,jsonrpc:"2.0"}})});return this.#a(),r}async getSigner(e){e==null&&(e=0);const t=this.send("eth_accounts",[]);if(typeof e=="number"){const r=await t;if(e>=r.length)throw new Error("no such account");return new op(this,r[e])}const{accounts:s}=await is({network:this.getNetwork(),accounts:t});e=Et(e);for(const r of s)if(Et(r)===e)return new op(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(t=>new op(this,t))}destroy(){this.#s&&(clearTimeout(this.#s),this.#s=null);for(const{payload:e,reject:t}of this.#n)t(Gt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#n=[],super.destroy()}}class EO extends _O{#e;constructor(e,t){super(e,t);let s=this._getOption("pollingInterval");s==null&&(s=N1.pollingInterval),this.#e=s}_getSubscriber(e){const t=super._getSubscriber(e);return lA(t)&&(t.pollingInterval=this.#e),t}get pollingInterval(){return this.#e}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");this.#e=e,this._forEachSubscriber(t=>{lA(t)&&(t.pollingInterval=this.#e)})}}function ag(n){if(n==null)return null;if(typeof n.message=="string"&&n.message.match(/revert/i)&&Bt(n.data))return{message:n.message,data:n.data};if(typeof n=="object"){for(const e in n){const t=ag(n[e]);if(t)return t}return null}if(typeof n=="string")try{return ag(JSON.parse(n))}catch{}return null}function lg(n,e){if(n!=null){if(typeof n.message=="string"&&e.push(n.message),typeof n=="object")for(const t in n)lg(n[t],e);if(typeof n=="string")try{return lg(JSON.parse(n),e)}catch{}}}function bO(n){const e=[];return lg(n,e),e}class _o extends EO{#e;#t;constructor(e,t,s){const r=Object.assign({},s??{},{batchMaxCount:1});H(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(t,r),this.#t=null,s&&s.providerInfo&&(this.#t=s.providerInfo),this.#e=async(i,o)=>{const a={method:i,params:o};this.emit("debug",{action:"sendEip1193Request",payload:a});try{const l=await e.request(a);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const c=new Error(l.message);throw c.code=l.code,c.data=l.data,c.payload=a,this.emit("debug",{action:"receiveEip1193Error",error:c}),c}}}get providerInfo(){return this.#t}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){H(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const t=await this.#e(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){switch(t=JSON.parse(JSON.stringify(t)),t.error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`;break}return super.getRpcError(e,t)}async hasSigner(e){e==null&&(e=0);const t=await this.send("eth_accounts",[]);return typeof e=="number"?t.length>e:(e=e.toLowerCase(),t.filter(s=>s.toLowerCase()===e).length!==0)}async getSigner(e){if(e==null&&(e=0),!await this.hasSigner(e))try{await this.#e("eth_requestAccounts",[])}catch(t){const s=t.payload;throw this.getRpcError(s,{id:s.id,error:t})}return await super.getSigner(e)}static async discover(e){if(e==null&&(e={}),e.provider)return new _o(e.provider);const t=e.window?e.window:typeof window<"u"?window:null;if(t==null)return null;const s=e.anyProvider;if(s&&t.ethereum)return new _o(t.ethereum);if(!("addEventListener"in t&&"dispatchEvent"in t&&"removeEventListener"in t))return null;const r=e.timeout?e.timeout:300;return r===0?null:await new Promise((i,o)=>{let a=[];const l=f=>{a.push(f.detail),s&&c()},c=()=>{if(clearTimeout(h),a.length)if(e&&e.filter){const f=e.filter(a.map(p=>Object.assign({},p.info)));if(f==null)i(null);else if(f instanceof _o)i(f);else{let p=null;if(f.uuid&&(p=a.filter(_=>f.uuid===_.info.uuid)[0]),p){const{provider:m,info:_}=p;i(new _o(m,void 0,{providerInfo:_}))}else o(Gt("filter returned unknown info","UNSUPPORTED_OPERATION",{value:f}))}}else{const{provider:f,info:p}=a[0];i(new _o(f,void 0,{providerInfo:p}))}else i(null);t.removeEventListener("eip6963:announceProvider",l)},h=setTimeout(()=>{c()},r);t.addEventListener("eip6963:announceProvider",l),t.dispatchEvent(new Event("eip6963:requestProvider"))})}}const Tm=()=>typeof window<"u"&&window.ethereum?new _o(window.ethereum):null,Fc=()=>typeof window<"u"&&typeof window.ethereum<"u",IO=async()=>{try{if(!Fc())return{success:!1,error:"MetaMask   . MetaMask .",needInstall:!0};const n=Tm();if(!n)return{success:!1,error:" Provider   ."};const e=await window.ethereum.request({method:"eth_requestAccounts"});if(e&&e.length>0){const t=e[0],s=await n.getBalance(t),r=nb(s);return{success:!0,address:t,balance:r,provider:n}}return{success:!1,error:"  ."}}catch(n){return console.error("  :",n),n.code===4001?{success:!1,error:"  ."}:{success:!1,error:n.message||"    ."}}},CO=async()=>{try{if(!Fc()||!Tm())return null;const e=await window.ethereum.request({method:"eth_accounts"});return e&&e.length>0?e[0]:null}catch(n){return console.error("   :",n),null}},D1=async n=>{try{const e=Tm();if(!e)return"0";const t=await e.getBalance(n);return nb(t)}catch(e){return console.error("   :",e),"0"}},TO=async()=>{try{const n=await CO();if(!n)return{connected:!1,address:null};const e=await D1(n);return{connected:!0,address:n,balance:e}}catch(n){return console.error("    :",n),{connected:!1,address:null}}},SO=n=>Fc()?(window.ethereum.on("accountsChanged",n),()=>{window.ethereum.removeListener&&window.ethereum.removeListener("accountsChanged",n)}):null,PO=n=>Fc()?(window.ethereum.on("chainChanged",n),()=>{window.ethereum.removeListener&&window.ethereum.removeListener("chainChanged",n)}):null,vh=n=>{let e;return typeof n=="string"?e=parseInt(n,10):typeof n=="number"?e=n:e=parseInt(n,10),isNaN(e)||e===null||e===void 0?"0":(e=Math.floor(e),e>=1e9?(e/1e9).toFixed(1).replace(/\.0$/,"")+"B":e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e4?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString())},Ae=Pc({isLoggedIn:!1,loginType:null,walletAddress:"",userBalance:"0 ETH",isWalletConnected:!1,walletProvider:null,isLoading:!1,currentUser:null,coins:0,totalCoin:0,catFragments:50,level:1,nftCount:0,miningLevel:1,huntingLevel:1,explorationLevel:1,productionLevel:1,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}),hn=()=>{const n=()=>{const P=At();P?(Ae.currentUser=P,Ae.isLoggedIn=!0,e(P.gameData||{})):(Ae.currentUser=null,Ae.isLoggedIn=!1)},e=P=>{Ae.coins=P.coins||0,Ae.totalCoin=P.totalCoin||0,Ae.catFragments=P.catFragments||50,Ae.level=P.level||1,Ae.nftCount=P.nftCount||0,Ae.miningLevel=P.miningLevel||1,Ae.huntingLevel=P.huntingLevel||1,Ae.explorationLevel=P.explorationLevel||1,Ae.productionLevel=P.productionLevel||1;const U=W=>{const q=(W||[]).slice(0,4);return q.length===4?q:[...q,...Array(4-q.length).fill(null)]};Ae.miningCats=U(P.miningCats),Ae.huntingCats=U(P.huntingCats),Ae.explorationCats=U(P.explorationCats),Ae.productionCats=U(P.productionCats),Ae.inventory=P.inventory||[]},t=async P=>{if(!Ae.currentUser)return console.warn("  ."),!1;try{return await ac(Ae.currentUser.id,P)?(e({...Ae.currentUser.gameData,...P}),Ae.currentUser&&(Ae.currentUser.gameData={...Ae.currentUser.gameData,...P},localStorage.setItem("currentUser",JSON.stringify(Ae.currentUser)),sessionStorage.setItem("currentUser",JSON.stringify(Ae.currentUser))),window.dispatchEvent(new CustomEvent("userDataUpdated")),!0):!1}catch(U){return console.error("   :",U),!1}},s=async P=>await t({coins:P}),r=async P=>await t({totalCoin:P}),i=async P=>await t({catFragments:P}),o=async P=>await t({level:P}),a=async P=>await t(P),l=async()=>{try{Ae.isLoading=!0;const P=await IO();return P.success?(Ae.isWalletConnected=!0,Ae.walletAddress=P.address,Ae.userBalance=`${parseFloat(P.balance).toFixed(4)} ETH`,Ae.walletProvider=P.provider,Ae.loginType="wallet",await c(P.address,P.balance),{success:!0,address:P.address,balance:P.balance}):P}catch(P){return console.error("  :",P),{success:!1,error:P.message||"    ."}}finally{Ae.isLoading=!1}},c=async(P,U)=>{let W=im(P);W||(W=$E(P)),localStorage.setItem("currentUser",JSON.stringify(W)),sessionStorage.setItem("currentUser",JSON.stringify(W)),Ae.currentUser=W,Ae.isLoggedIn=!0,Ae.loginType="wallet",e(W.gameData||{})},h=()=>{Ae.isWalletConnected=!1,Ae.walletAddress="",Ae.userBalance="0 ETH",Ae.walletProvider=null,Ae.loginType=null;const P=At();P&&P.loginType==="wallet"&&(localStorage.removeItem("currentUser"),sessionStorage.removeItem("currentUser")),A()},f=async()=>{if(Ae.walletAddress)try{const P=await D1(Ae.walletAddress);Ae.userBalance=`${parseFloat(P).toFixed(4)} ETH`}catch(P){console.error("   :",P)}},p=async()=>{try{const P=At();if(!P||P.loginType!=="wallet")return{connected:!1};const U=await TO();return U.connected&&U.address===P.walletAddress?(Ae.isWalletConnected=!0,Ae.walletAddress=U.address,Ae.userBalance=`${parseFloat(U.balance).toFixed(4)} ETH`,await c(U.address,U.balance)):h(),U}catch(P){return console.error("   :",P),{connected:!1}}},m=()=>{const P=SO(W=>{W&&W.length>0?c(W[0]):h()}),U=PO(()=>{});return()=>{P&&P(),U&&U()}},_=(P,U)=>{Ae.isLoggedIn=!0,Ae.walletAddress=P,Ae.userBalance=U,Ae.loginType=P.startsWith("0x")?"wallet":"email",n()},v=P=>{Ae.isLoading=P},A=()=>{Ae.isLoggedIn=!1,Ae.loginType=null,Ae.walletAddress="",Ae.userBalance="0 ETH",Ae.isWalletConnected=!1,Ae.walletProvider=null,Ae.currentUser=null,Ae.coins=0,Ae.totalCoin=0,Ae.catFragments=50,Ae.level=1,Ae.nftCount=0,localStorage.removeItem("currentUser"),sessionStorage.removeItem("currentUser")},w=de(()=>vh(Ae.coins)),T=de(()=>vh(Ae.totalCoin));return{state:RO(Ae),formattedCoins:w,formattedTotalCoin:T,loadCurrentUser:n,syncGameData:e,updateGameData:t,updateCoins:s,updateTotalCoin:r,updateCatFragments:i,updateLevel:o,updateMultiple:a,setWalletConnected:_,connectWalletToApp:l,disconnectWalletFromApp:h,updateWalletBalance:f,checkWalletStatus:p,setupWalletListeners:m,setUserData:P=>{Ae.nftCount=P.nftCount||0,Ae.gameLevel=P.gameLevel||1},setLoading:v,logout:A,formatNumber:vh}},RO=n=>new Proxy(n,{get(e,t){return e[t]},set(){return console.warn("   .  ."),!1}}),xO=()=>{};var cA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},kO=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const r=n[t++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=n[t++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=n[t++],o=n[t++],a=n[t++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=n[t++],o=n[t++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},L1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const i=n[r],o=r+1<n.length,a=o?n[r+1]:0,l=r+2<n.length,c=l?n[r+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),s.push(t[h],t[f],t[p],t[m])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(O1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):kO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const i=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;const c=r<n.length?t[n.charAt(r)]:64;++r;const f=r<n.length?t[n.charAt(r)]:64;if(++r,i==null||a==null||c==null||f==null)throw new NO;const p=i<<2|a>>4;if(s.push(p),c!==64){const m=a<<4&240|c>>2;if(s.push(m),f!==64){const _=c<<6&192|f;s.push(_)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class NO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DO=function(n){const e=O1(n);return L1.encodeByteArray(e,!0)},Yh=function(n){return DO(n).replace(/\./g,"")},B1=function(n){try{return L1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=()=>OO().__FIREBASE_DEFAULTS__,BO=()=>{if(typeof process>"u"||typeof cA>"u")return;const n=cA.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},MO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&B1(n[1]);return e&&JSON.parse(e)},Kd=()=>{try{return xO()||LO()||BO()||MO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},M1=n=>Kd()?.emulatorHosts?.[n],FO=n=>{const e=M1(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},F1=()=>Kd()?.config,U1=n=>Kd()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function V1(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",r=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Yh(JSON.stringify(t)),Yh(JSON.stringify(o)),""].join(".")}const Wl={};function $O(){const n={prod:[],emulator:[]};for(const e of Object.keys(Wl))Wl[e]?n.emulator.push(e):n.prod.push(e);return n}function HO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let uA=!1;function $1(n,e){if(typeof window>"u"||typeof document>"u"||!nl(window.location.host)||Wl[n]===e||Wl[n]||uA)return;Wl[n]=e;function t(p){return`__firebase__banner__${p}`}const s="__firebase__banner",i=$O().prod.length>0;function o(){const p=document.getElementById(s);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{uA=!0,o()},p}function h(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=HO(s),m=t("text"),_=document.getElementById(m)||document.createElement("span"),v=t("learnmore"),A=document.getElementById(v)||document.createElement("a"),w=t("preprendIcon"),T=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const P=p.element;a(P),h(A,v);const U=c();l(T,w),P.append(T,_,A,U),document.body.appendChild(P)}i?(_.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xn())}function QO(){const n=Kd()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function H1(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function zO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WO(){const n=Xn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function KO(){return!QO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function G1(){try{return typeof indexedDB=="object"}catch{return!1}}function Q1(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(t){e(t)}})}function qO(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO="FirebaseError";class or extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=JO,Object.setPrototypeOf(this,or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wo.prototype.create)}}class Wo{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?YO(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new or(r,a,s)}}function YO(n,e){return n.replace(XO,(t,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const XO=/\{\$([^}]+)}/g;function ZO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function zi(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const r of t){if(!s.includes(r))return!1;const i=n[r],o=e[r];if(hA(i)&&hA(o)){if(!zi(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!t.includes(r))return!1;return!0}function hA(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function eL(n,e){const t=new tL(n,e);return t.subscribe.bind(t)}class tL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let r;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");nL(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:s},r.next===void 0&&(r.next=ap),r.error===void 0&&(r.error=ap),r.complete===void 0&&(r.complete=ap);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ap(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=1e3,rL=2,iL=14400*1e3,oL=.5;function dA(n,e=sL,t=rL){const s=e*Math.pow(t,n),r=Math.round(oL*s*(Math.random()-.5)*2);return Math.min(iL,s+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(n){return n&&n._delegate?n._delegate:n}class sr{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new UO;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cL(e))try{this.getOrInitializeService({instanceIdentifier:mo})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mo){return this.instances.has(e)}getOptions(e=mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const r of s)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:lL(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=mo){return this.component?this.component.multipleInstances?e:mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lL(n){return n===mo?void 0:n}function cL(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new aL(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ot||(ot={}));const hL={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},dL=ot.INFO,fL={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},pL=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),r=fL[e];if(r)console[r](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qd{constructor(e){this.name=e,this._logLevel=dL,this._logHandler=pL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...e),this._logHandler(this,ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...e),this._logHandler(this,ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...e),this._logHandler(this,ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...e),this._logHandler(this,ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...e),this._logHandler(this,ot.ERROR,...e)}}const gL=(n,e)=>e.some(t=>n instanceof t);let fA,pA;function mL(){return fA||(fA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yL(){return pA||(pA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const j1=new WeakMap,cg=new WeakMap,z1=new WeakMap,lp=new WeakMap,Sm=new WeakMap;function vL(n){const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{t(Mi(n.result)),r()},o=()=>{s(n.error),r()};n.addEventListener("success",i),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&j1.set(t,n)}).catch(()=>{}),Sm.set(e,n),e}function AL(n){if(cg.has(n))return;const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});cg.set(n,e)}let ug={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return cg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||z1.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Mi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function wL(n){ug=n(ug)}function _L(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(cp(this),e,...t);return z1.set(s,e.sort?e.sort():[e]),Mi(s)}:yL().includes(n)?function(...e){return n.apply(cp(this),e),Mi(j1.get(this))}:function(...e){return Mi(n.apply(cp(this),e))}}function EL(n){return typeof n=="function"?_L(n):(n instanceof IDBTransaction&&AL(n),gL(n,mL())?new Proxy(n,ug):n)}function Mi(n){if(n instanceof IDBRequest)return vL(n);if(lp.has(n))return lp.get(n);const e=EL(n);return e!==n&&(lp.set(n,e),Sm.set(e,n)),e}const cp=n=>Sm.get(n);function W1(n,e,{blocked:t,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(n,e),a=Mi(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Mi(o.result),l.oldVersion,l.newVersion,Mi(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const bL=["get","getKey","getAll","getAllKeys","count"],IL=["put","add","delete","clear"],up=new Map;function gA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(up.get(e))return up.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,r=IL.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(r||bL.includes(t)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),r&&l.done]))[0]};return up.set(e,i),i}wL(n=>({...n,get:(e,t,s)=>gA(e,t)||n.get(e,t,s),has:(e,t)=>!!gA(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(TL(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function TL(n){return n.getComponent()?.type==="VERSION"}const hg="@firebase/app",mA="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si=new qd("@firebase/app"),SL="@firebase/app-compat",PL="@firebase/analytics-compat",RL="@firebase/analytics",xL="@firebase/app-check-compat",kL="@firebase/app-check",NL="@firebase/auth",DL="@firebase/auth-compat",OL="@firebase/database",LL="@firebase/data-connect",BL="@firebase/database-compat",ML="@firebase/functions",FL="@firebase/functions-compat",UL="@firebase/installations",VL="@firebase/installations-compat",$L="@firebase/messaging",HL="@firebase/messaging-compat",GL="@firebase/performance",QL="@firebase/performance-compat",jL="@firebase/remote-config",zL="@firebase/remote-config-compat",WL="@firebase/storage",KL="@firebase/storage-compat",qL="@firebase/firestore",JL="@firebase/ai",YL="@firebase/firestore-compat",XL="firebase",ZL="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="[DEFAULT]",eB={[hg]:"fire-core",[SL]:"fire-core-compat",[RL]:"fire-analytics",[PL]:"fire-analytics-compat",[kL]:"fire-app-check",[xL]:"fire-app-check-compat",[NL]:"fire-auth",[DL]:"fire-auth-compat",[OL]:"fire-rtdb",[LL]:"fire-data-connect",[BL]:"fire-rtdb-compat",[ML]:"fire-fn",[FL]:"fire-fn-compat",[UL]:"fire-iid",[VL]:"fire-iid-compat",[$L]:"fire-fcm",[HL]:"fire-fcm-compat",[GL]:"fire-perf",[QL]:"fire-perf-compat",[jL]:"fire-rc",[zL]:"fire-rc-compat",[WL]:"fire-gcs",[KL]:"fire-gcs-compat",[qL]:"fire-fst",[YL]:"fire-fst-compat",[JL]:"fire-vertex","fire-js":"fire-js",[XL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=new Map,tB=new Map,fg=new Map;function yA(n,e){try{n.container.addComponent(e)}catch(t){si.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Tr(n){const e=n.name;if(fg.has(e))return si.debug(`There were multiple attempts to register component ${e}.`),!1;fg.set(e,n);for(const t of mc.values())yA(t,n);for(const t of tB.values())yA(t,n);return!0}function Ko(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function mr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fi=new Wo("app","Firebase",nB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new sr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=ZL;function K1(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:dg,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Fi.create("bad-app-name",{appName:String(r)});if(t||(t=F1()),!t)throw Fi.create("no-options");const i=mc.get(r);if(i){if(zi(t,i.options)&&zi(s,i.config))return i;throw Fi.create("duplicate-app",{appName:r})}const o=new uL(r);for(const l of fg.values())o.addComponent(l);const a=new sB(t,s,o);return mc.set(r,a),a}function yc(n=dg){const e=mc.get(n);if(!e&&n===dg&&F1())return K1();if(!e)throw Fi.create("no-app",{appName:n});return e}function vA(){return Array.from(mc.values())}function Hs(n,e,t){let s=eB[n]??n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),si.warn(o.join(" "));return}Tr(new sr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rB="firebase-heartbeat-database",iB=1,vc="firebase-heartbeat-store";let hp=null;function q1(){return hp||(hp=W1(rB,iB,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(vc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Fi.create("idb-open",{originalErrorMessage:n.message})})),hp}async function oB(n){try{const t=(await q1()).transaction(vc),s=await t.objectStore(vc).get(J1(n));return await t.done,s}catch(e){if(e instanceof or)si.warn(e.message);else{const t=Fi.create("idb-get",{originalErrorMessage:e?.message});si.warn(t.message)}}}async function AA(n,e){try{const s=(await q1()).transaction(vc,"readwrite");await s.objectStore(vc).put(e,J1(n)),await s.done}catch(t){if(t instanceof or)si.warn(t.message);else{const s=Fi.create("idb-set",{originalErrorMessage:t?.message});si.warn(s.message)}}}function J1(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB=1024,lB=30;class cB{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hB(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=wA();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>lB){const r=dB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){si.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=wA(),{heartbeatsToSend:t,unsentEntries:s}=uB(this._heartbeatsCache.heartbeats),r=Yh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return si.warn(e),""}}}function wA(){return new Date().toISOString().substring(0,10)}function uB(n,e=aB){const t=[];let s=n.slice();for(const r of n){const i=t.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),_A(t)>e){i.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),_A(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class hB{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return G1()?Q1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await oB(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return AA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return AA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function _A(n){return Yh(JSON.stringify({version:2,heartbeats:n})).length}function dB(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fB(n){Tr(new sr("platform-logger",e=>new CL(e),"PRIVATE")),Tr(new sr("heartbeat",e=>new cB(e),"PRIVATE")),Hs(hg,mA,n),Hs(hg,mA,"esm2020"),Hs("fire-js","")}fB("");var pB="firebase",gB="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hs(pB,gB,"app");function Y1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mB=Y1,X1=new Wo("auth","Firebase",Y1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh=new qd("@firebase/auth");function yB(n,...e){Xh.logLevel<=ot.WARN&&Xh.warn(`Auth (${sl}): ${n}`,...e)}function Ah(n,...e){Xh.logLevel<=ot.ERROR&&Xh.error(`Auth (${sl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(n,...e){throw Pm(n,...e)}function vr(n,...e){return Pm(n,...e)}function Z1(n,e,t){const s={...mB(),[e]:t};return new Wo("auth","Firebase",s).create(e,{appName:n.name})}function No(n){return Z1(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pm(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return X1.create(n,...e)}function He(n,e,...t){if(!n)throw Pm(e,...t)}function jr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ah(e),new Error(e)}function ii(n,e){n||jr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(){return typeof self<"u"&&self.location?.href||""}function vB(){return EA()==="http:"||EA()==="https:"}function EA(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vB()||H1()||"connection"in navigator)?navigator.onLine:!0}function wB(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t){this.shortDelay=e,this.longDelay=t,ii(t>e,"Short delay should be less than long delay!"),this.isMobile=GO()||zO()}get(){return AB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(n,e){ii(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bB=new Vc(3e4,6e4);function xm(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function rl(n,e,t,s,r={}){return tI(n,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=Uc({key:n.config.apiKey,...o}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c={method:e,headers:l,...i};return jO()||(c.referrerPolicy="no-referrer"),n.emulatorConfig&&nl(n.emulatorConfig.host)&&(c.credentials="include"),eI.fetch()(await nI(n,n.config.apiHost,t,a),c)})}async function tI(n,e,t){n._canInitEmulator=!1;const s={..._B,...e};try{const r=new CB(n),i=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw th(n,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw th(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw th(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw th(n,"user-disabled",o);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Z1(n,h,c);ri(n,h)}}catch(r){if(r instanceof or)throw r;ri(n,"network-request-failed",{message:String(r)})}}async function IB(n,e,t,s,r={}){const i=await rl(n,e,t,s,r);return"mfaPendingCredential"in i&&ri(n,"multi-factor-auth-required",{_serverResponse:i}),i}async function nI(n,e,t,s){const r=`${e}${t}?${s}`,i=n,o=i.config.emulator?Rm(n.config,r):`${n.config.apiScheme}://${r}`;return EB.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class CB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(vr(this.auth,"network-request-failed")),bB.get())})}}function th(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const r=vr(n,e,s);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TB(n,e){return rl(n,"POST","/v1/accounts:delete",e)}async function Zh(n,e){return rl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SB(n,e=!1){const t=An(n),s=await t.getIdToken(e),r=km(s);He(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:Kl(dp(r.auth_time)),issuedAtTime:Kl(dp(r.iat)),expirationTime:Kl(dp(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function dp(n){return Number(n)*1e3}function km(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Ah("JWT malformed, contained fewer than 3 sections"),null;try{const r=B1(t);return r?JSON.parse(r):(Ah("Failed to decode base64 JWT payload"),null)}catch(r){return Ah("Caught error parsing JWT payload as JSON",r?.toString()),null}}function bA(n){const e=km(n);return He(e,"internal-error"),He(typeof e.exp<"u","internal-error"),He(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof or&&PB(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function PB({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kl(this.lastLoginAt),this.creationTime=Kl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ed(n){const e=n.auth,t=await n.getIdToken(),s=await Ac(n,Zh(e,{idToken:t}));He(s?.users.length,e,"internal-error");const r=s.users[0];n._notifyReloadListener(r);const i=r.providerUserInfo?.length?sI(r.providerUserInfo):[],o=kB(n.providerData,i),a=n.isAnonymous,l=!(n.email&&r.passwordHash)&&!o?.length,c=a?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new gg(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(n,h)}async function xB(n){const e=An(n);await ed(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kB(n,e){return[...n.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function sI(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NB(n,e){const t=await tI(n,{},async()=>{const s=Uc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=n.config,o=await nI(n,r,"/v1/token",`key=${i}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return n.emulatorConfig&&nl(n.emulatorConfig.host)&&(l.credentials="include"),eI.fetch()(o,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function DB(n,e){return rl(n,"POST","/v2/accounts:revokeToken",xm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken<"u","internal-error"),He(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){He(e.length!==0,"internal-error");const t=bA(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(He(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:r,expiresIn:i}=await NB(e,t);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:r,expirationTime:i}=t,o=new Sa;return s&&(He(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(He(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(He(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sa,this.toJSON())}_performRefresh(){return jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(n,e){He(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Xs{constructor({uid:e,auth:t,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new RB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new gg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Ac(this,this.stsTokenManager.getToken(this.auth,e));return He(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return SB(this,e)}reload(){return xB(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await ed(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mr(this.auth.app))return Promise.reject(No(this.auth));const e=await this.getIdToken();return await Ac(this,TB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,r=t.email??void 0,i=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,l=t._redirectEventId??void 0,c=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:m,providerData:_,stsTokenManager:v}=t;He(f&&v,e,"internal-error");const A=Sa.fromJSON(this.name,v);He(typeof f=="string",e,"internal-error"),Ii(s,e.name),Ii(r,e.name),He(typeof p=="boolean",e,"internal-error"),He(typeof m=="boolean",e,"internal-error"),Ii(i,e.name),Ii(o,e.name),Ii(a,e.name),Ii(l,e.name),Ii(c,e.name),Ii(h,e.name);const w=new Xs({uid:f,auth:e,email:r,emailVerified:p,displayName:s,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:A,createdAt:c,lastLoginAt:h});return _&&Array.isArray(_)&&(w.providerData=_.map(T=>({...T}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,t,s=!1){const r=new Sa;r.updateFromServerResponse(t);const i=new Xs({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await ed(i),i}static async _fromGetAccountInfoResponse(e,t,s){const r=t.users[0];He(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?sI(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,a=new Sa;a.updateFromIdToken(s);const l=new Xs({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new gg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=new Map;function zr(n){ii(n instanceof Function,"Expected a class definition");let e=IA.get(n);return e?(ii(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,IA.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}rI.type="NONE";const CA=rI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(n,e,t){return`firebase:${n}:${e}:${t}`}class Pa{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=wh(this.userKey,r.apiKey,i),this.fullPersistenceKey=wh("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Zh(this.auth,{idToken:e}).catch(()=>{});return t?Xs._fromGetAccountInfoResponse(this.auth,t,e):null}return Xs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Pa(zr(CA),e,s);const r=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=r[0]||zr(CA);const o=wh(s,e.config.apiKey,e.name);let a=null;for(const c of t)try{const h=await c._get(o);if(h){let f;if(typeof h=="string"){const p=await Zh(e,{idToken:h}).catch(()=>{});if(!p)break;f=await Xs._fromGetAccountInfoResponse(e,p,h)}else f=Xs._fromJSON(e,h);c!==i&&(a=f),i=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Pa(i,e,s):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Pa(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uI(e))return"Blackberry";if(hI(e))return"Webos";if(oI(e))return"Safari";if((e.includes("chrome/")||aI(e))&&!e.includes("edge/"))return"Chrome";if(cI(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if(s?.length===2)return s[1]}return"Other"}function iI(n=Xn()){return/firefox\//i.test(n)}function oI(n=Xn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aI(n=Xn()){return/crios\//i.test(n)}function lI(n=Xn()){return/iemobile/i.test(n)}function cI(n=Xn()){return/android/i.test(n)}function uI(n=Xn()){return/blackberry/i.test(n)}function hI(n=Xn()){return/webos/i.test(n)}function Nm(n=Xn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function OB(n=Xn()){return Nm(n)&&!!window.navigator?.standalone}function LB(){return WO()&&document.documentMode===10}function dI(n=Xn()){return Nm(n)||cI(n)||hI(n)||uI(n)||/windows phone/i.test(n)||lI(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(n,e=[]){let t;switch(n){case"Browser":t=TA(Xn());break;case"Worker":t=`${TA(Xn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${sl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});s.onAbort=t,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MB(n,e={}){return rl(n,"GET","/v2/passwordPolicy",xm(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FB=6;class UB{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??FB,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(e,t,s,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new SA(this),this.idTokenSubscription=new SA(this),this.beforeStateQueue=new BB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=X1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=zr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Pa.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Zh(this,{idToken:e}),s=await Xs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(mr(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(s=a.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return He(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ed(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mr(this.app))return Promise.reject(No(this));const t=e?An(e):null;return t&&He(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&He(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mr(this.app)?Promise.reject(No(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mr(this.app)?Promise.reject(No(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MB(this),t=new UB(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wo("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await DB(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&zr(e)||this._popupRedirectResolver;He(t,this,"argument-error"),this.redirectPersistenceManager=await Pa.create(this,[zr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,r){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,s,r);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(mr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&yB(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Jd(n){return An(n)}class SA{constructor(e){this.auth=e,this.observer=null,this.addObserver=eL(t=>this.observer=t)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $B(n){Dm=n}function HB(n){return Dm.loadJS(n)}function GB(){return Dm.gapiScript}function QB(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jB(n,e){const t=Ko(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),i=t.getOptions();if(zi(i,e??{}))return r;ri(r,"already-initialized")}return t.initialize({options:e})}function zB(n,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(zr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e?.popupRedirectResolver)}function WB(n,e,t){const s=Jd(n);He(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=pI(e),{host:o,port:a}=KB(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){He(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),He(zi(c,s.config.emulator)&&zi(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=c,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,nl(o)?(V1(`${i}//${o}${l}`),$1("Auth",!0)):qB()}function pI(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function KB(n){const e=pI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:PA(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:PA(o)}}}function PA(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function qB(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return jr("not implemented")}_getIdTokenResponse(e){return jr("not implemented")}_linkToIdToken(e,t){return jr("not implemented")}_getReauthenticationResolver(e){return jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ra(n,e){return IB(n,"POST","/v1/accounts:signInWithIdp",xm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JB="http://localhost";class Vo extends gI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Vo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ri("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=t;if(!s||!r)return null;const o=new Vo(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Ra(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Ra(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ra(e,t)}buildRequest(){const e={requestUri:JB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Uc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends mI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends $c{constructor(){super("facebook.com")}static credential(e){return Vo._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xi.credential(e.oauthAccessToken)}catch{return null}}}xi.FACEBOOK_SIGN_IN_METHOD="facebook.com";xi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends $c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Vo._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return $r.credential(t,s)}catch{return null}}}$r.GOOGLE_SIGN_IN_METHOD="google.com";$r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends $c{constructor(){super("github.com")}static credential(e){return Vo._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.GITHUB_SIGN_IN_METHOD="github.com";ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends $c{constructor(){super("twitter.com")}static credential(e,t){return Vo._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ni.credential(t,s)}catch{return null}}}Ni.TWITTER_SIGN_IN_METHOD="twitter.com";Ni.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,r=!1){const i=await Xs._fromIdTokenResponse(e,s,r),o=RA(s);return new ja({user:i,providerId:o,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const r=RA(s);return new ja({user:e,providerId:r,_tokenResponse:s,operationType:t})}}function RA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td extends or{constructor(e,t,s,r){super(t.code,t.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,td.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,r){return new td(e,t,s,r)}}function yI(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?td._fromErrorAndOperation(n,i,e,s):i})}async function YB(n,e,t=!1){const s=await Ac(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ja._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XB(n,e,t=!1){const{auth:s}=n;if(mr(s.app))return Promise.reject(No(s));const r="reauthenticate";try{const i=await Ac(n,yI(s,r,e,n),t);He(i.idToken,s,"internal-error");const o=km(i.idToken);He(o,s,"internal-error");const{sub:a}=o;return He(n.uid===a,s,"user-mismatch"),ja._forOperation(n,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&ri(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZB(n,e,t=!1){if(mr(n.app))return Promise.reject(No(n));const s="signIn",r=await yI(n,s,e),i=await ja._fromIdTokenResponse(n,s,r);return t||await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(n,e){return An(n).setPersistence(e)}function tM(n,e,t,s){return An(n).onIdTokenChanged(e,t,s)}function nM(n,e,t){return An(n).beforeAuthStateChanged(e,t)}function vY(n,e,t,s){return An(n).onAuthStateChanged(e,t,s)}const nd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(nd,"1"),this.storage.removeItem(nd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=1e3,rM=10;class AI extends vI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),r=this.localCache[t];s!==r&&e(t,r,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!t&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);LB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,rM):r()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},sM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}AI.type="LOCAL";const wI=AI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I extends vI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}_I.type="SESSION";const EI=_I;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const s=new Yd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async c=>c(t.origin,i)),l=await iM(a);t.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Om("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(){return window}function aM(n){Ar().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(){return typeof Ar().WorkerGlobalScope<"u"&&typeof Ar().importScripts=="function"}async function lM(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cM(){return navigator?.serviceWorker?.controller||null}function uM(){return bI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="firebaseLocalStorageDb",hM=1,sd="firebaseLocalStorage",CI="fbase_key";class Hc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Xd(n,e){return n.transaction([sd],e?"readwrite":"readonly").objectStore(sd)}function dM(){const n=indexedDB.deleteDatabase(II);return new Hc(n).toPromise()}function mg(){const n=indexedDB.open(II,hM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(sd,{keyPath:CI})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(sd)?e(s):(s.close(),await dM(),e(await mg()))})})}async function xA(n,e,t){const s=Xd(n,!0).put({[CI]:e,value:t});return new Hc(s).toPromise()}async function fM(n,e){const t=Xd(n,!1).get(e),s=await new Hc(t).toPromise();return s===void 0?null:s.value}function kA(n,e){const t=Xd(n,!0).delete(e);return new Hc(t).toPromise()}const pM=800,gM=3;class TI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>gM)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yd._getInstance(uM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await lM(),!this.activeServiceWorker)return;this.sender=new oM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mg();return await xA(e,nd,"1"),await kA(e,nd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>xA(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>fM(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>kA(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=Xd(r,!1).getAll();return new Hc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}TI.type="LOCAL";const mM=TI;new Vc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(n,e){return e?zr(e):(He(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm extends gI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ra(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ra(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ra(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function vM(n){return ZB(n.auth,new Lm(n),n.bypassAuthState)}function AM(n){const{auth:e,user:t}=n;return He(t,e,"internal-error"),XB(t,new Lm(n),n.bypassAuthState)}async function wM(n){const{auth:e,user:t}=n;return He(t,e,"internal-error"),YB(t,new Lm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,t,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vM;case"linkViaPopup":case"linkViaRedirect":return wM;case"reauthViaPopup":case"reauthViaRedirect":return AM;default:ri(this.auth,"internal-error")}}resolve(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M=new Vc(2e3,1e4);class ma extends SI{constructor(e,t,s,r,i){super(e,t,r,i),this.provider=s,this.authWindow=null,this.pollId=null,ma.currentPopupAction&&ma.currentPopupAction.cancel(),ma.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return He(e,this.auth,"internal-error"),e}async onExecution(){ii(this.filter.length===1,"Popup operations only handle one event");const e=Om();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(vr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(vr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ma.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_M.get())};e()}}ma.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM="pendingRedirect",_h=new Map;class bM extends SI{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=_h.get(this.auth._key());if(!e){try{const s=await IM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}_h.set(this.auth._key(),e)}return this.bypassAuthState||_h.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IM(n,e){const t=SM(e),s=TM(n);if(!await s._isAvailable())return!1;const r=await s._get(t)==="true";return await s._remove(t),r}function CM(n,e){_h.set(n._key(),e)}function TM(n){return zr(n._redirectPersistence)}function SM(n){return wh(EM,n.config.apiKey,n.name)}async function PM(n,e){return await Jd(n)._initializationPromise,PI(n,e,!1)}async function PI(n,e,t=!1){if(mr(n.app))return Promise.reject(No(n));const s=Jd(n),r=yM(s,e),o=await new bM(s,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=600*1e3;class xM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!RI(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(vr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RM&&this.cachedEventUids.clear(),this.cachedEventUids.has(NA(e))}saveEventToCache(e){this.cachedEventUids.add(NA(e)),this.lastProcessedEventTime=Date.now()}}function NA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function RI({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function kM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NM(n,e={}){return rl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OM=/^https?/;async function LM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await NM(n);for(const t of e)try{if(BM(t))return}catch{}ri(n,"unauthorized-domain")}function BM(n){const e=pg(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===s}if(!OM.test(t))return!1;if(DM.test(n))return s===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM=new Vc(3e4,6e4);function DA(){const n=Ar().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function FM(n){return new Promise((e,t)=>{function s(){DA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{DA(),t(vr(n,"network-request-failed"))},timeout:MM.get()})}if(Ar().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ar().gapi?.load)s();else{const r=QB("iframefcb");return Ar()[r]=()=>{gapi.load?s():t(vr(n,"network-request-failed"))},HB(`${GB()}?onload=${r}`).catch(i=>t(i))}}).catch(e=>{throw Eh=null,e})}let Eh=null;function UM(n){return Eh=Eh||FM(n),Eh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=new Vc(5e3,15e3),$M="__/auth/iframe",HM="emulator/auth/iframe",GM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jM(n){const e=n.config;He(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Rm(e,HM):`https://${n.config.authDomain}/${$M}`,s={apiKey:e.apiKey,appName:n.name,v:sl},r=QM.get(n.config.apiHost);r&&(s.eid=r);const i=n._getFrameworks();return i.length&&(s.fw=i.join(",")),`${t}?${Uc(s).slice(1)}`}async function zM(n){const e=await UM(n),t=Ar().gapi;return He(t,n,"internal-error"),e.open({where:document.body,url:jM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GM,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=vr(n,"network-request-failed"),a=Ar().setTimeout(()=>{i(o)},VM.get());function l(){Ar().clearTimeout(a),r(s)}s.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KM=500,qM=600,JM="_blank",YM="http://localhost";class OA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XM(n,e,t,s=KM,r=qM){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...WM,width:s.toString(),height:r.toString(),top:i,left:o},c=Xn().toLowerCase();t&&(a=aI(c)?JM:t),iI(c)&&(e=e||YM,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[m,_])=>`${p}${m}=${_},`,"");if(OB(c)&&a!=="_self")return ZM(e||"",a),new OA(null);const f=window.open(e||"",a,h);He(f,n,"popup-blocked");try{f.focus()}catch{}return new OA(f)}function ZM(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF="__/auth/handler",tF="emulator/auth/handler",nF=encodeURIComponent("fac");async function LA(n,e,t,s,r,i){He(n.config.authDomain,n,"auth-domain-config-required"),He(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:sl,eventId:r};if(e instanceof mI){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",ZO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof $c){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await n._getAppCheckToken(),c=l?`#${nF}=${encodeURIComponent(l)}`:"";return`${sF(n)}?${Uc(a).slice(1)}${c}`}function sF({config:n}){return n.emulator?Rm(n,tF):`https://${n.authDomain}/${eF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="webStorageSupport";class rF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=EI,this._completeRedirectFn=PI,this._overrideRedirectResult=CM}async _openPopup(e,t,s,r){ii(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await LA(e,t,s,pg(),r);return XM(e,i,Om())}async _openRedirect(e,t,s,r){await this._originValidation(e);const i=await LA(e,t,s,pg(),r);return aM(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:i}=this.eventManagers[t];return r?Promise.resolve(r):(ii(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await zM(e),s=new xM(e);return t.register("authEvent",r=>(He(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(fp,{type:fp},r=>{const i=r?.[0]?.[fp];i!==void 0&&t(!!i),ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=LM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return dI()||oI()||Nm()}}const iF=rF;var BA="@firebase/auth",MA="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aF(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lF(n){Tr(new sr("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;He(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fI(n)},c=new VB(s,r,i,l);return zB(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Tr(new sr("auth-internal",e=>{const t=Jd(e.getProvider("auth").getImmediate());return(s=>new oF(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hs(BA,MA,aF(n)),Hs(BA,MA,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF=300,uF=U1("authIdTokenMaxAge")||cF;let FA=null;const hF=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>uF)return;const r=t?.token;FA!==r&&(FA=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function dF(n=yc()){const e=Ko(n,"auth");if(e.isInitialized())return e.getImmediate();const t=jB(n,{popupRedirectResolver:iF,persistence:[mM,wI,EI]}),s=U1("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=hF(i.toString());nM(t,o,()=>o(t.currentUser)),tM(t,a=>o(a))}}const r=M1("auth");return r&&WB(t,`http://${r}`),t}function fF(){return document.getElementsByTagName("head")?.[0]??document}$B({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=r=>{const i=vr("internal-error");i.customData=r,t(i)},s.type="text/javascript",s.charset="UTF-8",fF().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lF("Browser");var UA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ui,xI;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,I){function S(){}S.prototype=I.prototype,x.F=I.prototype,x.prototype=new S,x.prototype.constructor=x,x.D=function(C,b,N){for(var k=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)k[Se-2]=arguments[Se];return I.prototype[b].apply(C,k)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(x,I,S){S||(S=0);const C=Array(16);if(typeof I=="string")for(var b=0;b<16;++b)C[b]=I.charCodeAt(S++)|I.charCodeAt(S++)<<8|I.charCodeAt(S++)<<16|I.charCodeAt(S++)<<24;else for(b=0;b<16;++b)C[b]=I[S++]|I[S++]<<8|I[S++]<<16|I[S++]<<24;I=x.g[0],S=x.g[1],b=x.g[2];let N=x.g[3],k;k=I+(N^S&(b^N))+C[0]+3614090360&4294967295,I=S+(k<<7&4294967295|k>>>25),k=N+(b^I&(S^b))+C[1]+3905402710&4294967295,N=I+(k<<12&4294967295|k>>>20),k=b+(S^N&(I^S))+C[2]+606105819&4294967295,b=N+(k<<17&4294967295|k>>>15),k=S+(I^b&(N^I))+C[3]+3250441966&4294967295,S=b+(k<<22&4294967295|k>>>10),k=I+(N^S&(b^N))+C[4]+4118548399&4294967295,I=S+(k<<7&4294967295|k>>>25),k=N+(b^I&(S^b))+C[5]+1200080426&4294967295,N=I+(k<<12&4294967295|k>>>20),k=b+(S^N&(I^S))+C[6]+2821735955&4294967295,b=N+(k<<17&4294967295|k>>>15),k=S+(I^b&(N^I))+C[7]+4249261313&4294967295,S=b+(k<<22&4294967295|k>>>10),k=I+(N^S&(b^N))+C[8]+1770035416&4294967295,I=S+(k<<7&4294967295|k>>>25),k=N+(b^I&(S^b))+C[9]+2336552879&4294967295,N=I+(k<<12&4294967295|k>>>20),k=b+(S^N&(I^S))+C[10]+4294925233&4294967295,b=N+(k<<17&4294967295|k>>>15),k=S+(I^b&(N^I))+C[11]+2304563134&4294967295,S=b+(k<<22&4294967295|k>>>10),k=I+(N^S&(b^N))+C[12]+1804603682&4294967295,I=S+(k<<7&4294967295|k>>>25),k=N+(b^I&(S^b))+C[13]+4254626195&4294967295,N=I+(k<<12&4294967295|k>>>20),k=b+(S^N&(I^S))+C[14]+2792965006&4294967295,b=N+(k<<17&4294967295|k>>>15),k=S+(I^b&(N^I))+C[15]+1236535329&4294967295,S=b+(k<<22&4294967295|k>>>10),k=I+(b^N&(S^b))+C[1]+4129170786&4294967295,I=S+(k<<5&4294967295|k>>>27),k=N+(S^b&(I^S))+C[6]+3225465664&4294967295,N=I+(k<<9&4294967295|k>>>23),k=b+(I^S&(N^I))+C[11]+643717713&4294967295,b=N+(k<<14&4294967295|k>>>18),k=S+(N^I&(b^N))+C[0]+3921069994&4294967295,S=b+(k<<20&4294967295|k>>>12),k=I+(b^N&(S^b))+C[5]+3593408605&4294967295,I=S+(k<<5&4294967295|k>>>27),k=N+(S^b&(I^S))+C[10]+38016083&4294967295,N=I+(k<<9&4294967295|k>>>23),k=b+(I^S&(N^I))+C[15]+3634488961&4294967295,b=N+(k<<14&4294967295|k>>>18),k=S+(N^I&(b^N))+C[4]+3889429448&4294967295,S=b+(k<<20&4294967295|k>>>12),k=I+(b^N&(S^b))+C[9]+568446438&4294967295,I=S+(k<<5&4294967295|k>>>27),k=N+(S^b&(I^S))+C[14]+3275163606&4294967295,N=I+(k<<9&4294967295|k>>>23),k=b+(I^S&(N^I))+C[3]+4107603335&4294967295,b=N+(k<<14&4294967295|k>>>18),k=S+(N^I&(b^N))+C[8]+1163531501&4294967295,S=b+(k<<20&4294967295|k>>>12),k=I+(b^N&(S^b))+C[13]+2850285829&4294967295,I=S+(k<<5&4294967295|k>>>27),k=N+(S^b&(I^S))+C[2]+4243563512&4294967295,N=I+(k<<9&4294967295|k>>>23),k=b+(I^S&(N^I))+C[7]+1735328473&4294967295,b=N+(k<<14&4294967295|k>>>18),k=S+(N^I&(b^N))+C[12]+2368359562&4294967295,S=b+(k<<20&4294967295|k>>>12),k=I+(S^b^N)+C[5]+4294588738&4294967295,I=S+(k<<4&4294967295|k>>>28),k=N+(I^S^b)+C[8]+2272392833&4294967295,N=I+(k<<11&4294967295|k>>>21),k=b+(N^I^S)+C[11]+1839030562&4294967295,b=N+(k<<16&4294967295|k>>>16),k=S+(b^N^I)+C[14]+4259657740&4294967295,S=b+(k<<23&4294967295|k>>>9),k=I+(S^b^N)+C[1]+2763975236&4294967295,I=S+(k<<4&4294967295|k>>>28),k=N+(I^S^b)+C[4]+1272893353&4294967295,N=I+(k<<11&4294967295|k>>>21),k=b+(N^I^S)+C[7]+4139469664&4294967295,b=N+(k<<16&4294967295|k>>>16),k=S+(b^N^I)+C[10]+3200236656&4294967295,S=b+(k<<23&4294967295|k>>>9),k=I+(S^b^N)+C[13]+681279174&4294967295,I=S+(k<<4&4294967295|k>>>28),k=N+(I^S^b)+C[0]+3936430074&4294967295,N=I+(k<<11&4294967295|k>>>21),k=b+(N^I^S)+C[3]+3572445317&4294967295,b=N+(k<<16&4294967295|k>>>16),k=S+(b^N^I)+C[6]+76029189&4294967295,S=b+(k<<23&4294967295|k>>>9),k=I+(S^b^N)+C[9]+3654602809&4294967295,I=S+(k<<4&4294967295|k>>>28),k=N+(I^S^b)+C[12]+3873151461&4294967295,N=I+(k<<11&4294967295|k>>>21),k=b+(N^I^S)+C[15]+530742520&4294967295,b=N+(k<<16&4294967295|k>>>16),k=S+(b^N^I)+C[2]+3299628645&4294967295,S=b+(k<<23&4294967295|k>>>9),k=I+(b^(S|~N))+C[0]+4096336452&4294967295,I=S+(k<<6&4294967295|k>>>26),k=N+(S^(I|~b))+C[7]+1126891415&4294967295,N=I+(k<<10&4294967295|k>>>22),k=b+(I^(N|~S))+C[14]+2878612391&4294967295,b=N+(k<<15&4294967295|k>>>17),k=S+(N^(b|~I))+C[5]+4237533241&4294967295,S=b+(k<<21&4294967295|k>>>11),k=I+(b^(S|~N))+C[12]+1700485571&4294967295,I=S+(k<<6&4294967295|k>>>26),k=N+(S^(I|~b))+C[3]+2399980690&4294967295,N=I+(k<<10&4294967295|k>>>22),k=b+(I^(N|~S))+C[10]+4293915773&4294967295,b=N+(k<<15&4294967295|k>>>17),k=S+(N^(b|~I))+C[1]+2240044497&4294967295,S=b+(k<<21&4294967295|k>>>11),k=I+(b^(S|~N))+C[8]+1873313359&4294967295,I=S+(k<<6&4294967295|k>>>26),k=N+(S^(I|~b))+C[15]+4264355552&4294967295,N=I+(k<<10&4294967295|k>>>22),k=b+(I^(N|~S))+C[6]+2734768916&4294967295,b=N+(k<<15&4294967295|k>>>17),k=S+(N^(b|~I))+C[13]+1309151649&4294967295,S=b+(k<<21&4294967295|k>>>11),k=I+(b^(S|~N))+C[4]+4149444226&4294967295,I=S+(k<<6&4294967295|k>>>26),k=N+(S^(I|~b))+C[11]+3174756917&4294967295,N=I+(k<<10&4294967295|k>>>22),k=b+(I^(N|~S))+C[2]+718787259&4294967295,b=N+(k<<15&4294967295|k>>>17),k=S+(N^(b|~I))+C[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(b+(k<<21&4294967295|k>>>11))&4294967295,x.g[2]=x.g[2]+b&4294967295,x.g[3]=x.g[3]+N&4294967295}s.prototype.v=function(x,I){I===void 0&&(I=x.length);const S=I-this.blockSize,C=this.C;let b=this.h,N=0;for(;N<I;){if(b==0)for(;N<=S;)r(this,x,N),N+=this.blockSize;if(typeof x=="string"){for(;N<I;)if(C[b++]=x.charCodeAt(N++),b==this.blockSize){r(this,C),b=0;break}}else for(;N<I;)if(C[b++]=x[N++],b==this.blockSize){r(this,C),b=0;break}}this.h=b,this.o+=I},s.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;I=this.o*8;for(var S=x.length-8;S<x.length;++S)x[S]=I&255,I/=256;for(this.v(x),x=Array(16),I=0,S=0;S<4;++S)for(let C=0;C<32;C+=8)x[I++]=this.g[S]>>>C&255;return x};function i(x,I){var S=a;return Object.prototype.hasOwnProperty.call(S,x)?S[x]:S[x]=I(x)}function o(x,I){this.h=I;const S=[];let C=!0;for(let b=x.length-1;b>=0;b--){const N=x[b]|0;C&&N==I||(S[b]=N,C=!1)}this.g=S}var a={};function l(x){return-128<=x&&x<128?i(x,function(I){return new o([I|0],I<0?-1:0)}):new o([x|0],x<0?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return f;if(x<0)return A(c(-x));const I=[];let S=1;for(let C=0;x>=S;C++)I[C]=x/S|0,S*=4294967296;return new o(I,0)}function h(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return A(h(x.substring(1),I));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=c(Math.pow(I,8));let C=f;for(let N=0;N<x.length;N+=8){var b=Math.min(8,x.length-N);const k=parseInt(x.substring(N,N+b),I);b<8?(b=c(Math.pow(I,b)),C=C.j(b).add(c(k))):(C=C.j(S),C=C.add(c(k)))}return C}var f=l(0),p=l(1),m=l(16777216);n=o.prototype,n.m=function(){if(v(this))return-A(this).m();let x=0,I=1;for(let S=0;S<this.g.length;S++){const C=this.i(S);x+=(C>=0?C:4294967296+C)*I,I*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(_(this))return"0";if(v(this))return"-"+A(this).toString(x);const I=c(Math.pow(x,6));var S=this;let C="";for(;;){const b=U(S,I).g;S=w(S,b.j(I));let N=((S.g.length>0?S.g[0]:S.h)>>>0).toString(x);if(S=b,_(S))return N+C;for(;N.length<6;)N="0"+N;C=N+C}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function _(x){if(x.h!=0)return!1;for(let I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function v(x){return x.h==-1}n.l=function(x){return x=w(this,x),v(x)?-1:_(x)?0:1};function A(x){const I=x.g.length,S=[];for(let C=0;C<I;C++)S[C]=~x.g[C];return new o(S,~x.h).add(p)}n.abs=function(){return v(this)?A(this):this},n.add=function(x){const I=Math.max(this.g.length,x.g.length),S=[];let C=0;for(let b=0;b<=I;b++){let N=C+(this.i(b)&65535)+(x.i(b)&65535),k=(N>>>16)+(this.i(b)>>>16)+(x.i(b)>>>16);C=k>>>16,N&=65535,k&=65535,S[b]=k<<16|N}return new o(S,S[S.length-1]&-2147483648?-1:0)};function w(x,I){return x.add(A(I))}n.j=function(x){if(_(this)||_(x))return f;if(v(this))return v(x)?A(this).j(A(x)):A(A(this).j(x));if(v(x))return A(this.j(A(x)));if(this.l(m)<0&&x.l(m)<0)return c(this.m()*x.m());const I=this.g.length+x.g.length,S=[];for(var C=0;C<2*I;C++)S[C]=0;for(C=0;C<this.g.length;C++)for(let b=0;b<x.g.length;b++){const N=this.i(C)>>>16,k=this.i(C)&65535,Se=x.i(b)>>>16,ne=x.i(b)&65535;S[2*C+2*b]+=k*ne,T(S,2*C+2*b),S[2*C+2*b+1]+=N*ne,T(S,2*C+2*b+1),S[2*C+2*b+1]+=k*Se,T(S,2*C+2*b+1),S[2*C+2*b+2]+=N*Se,T(S,2*C+2*b+2)}for(x=0;x<I;x++)S[x]=S[2*x+1]<<16|S[2*x];for(x=I;x<2*I;x++)S[x]=0;return new o(S,0)};function T(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function P(x,I){this.g=x,this.h=I}function U(x,I){if(_(I))throw Error("division by zero");if(_(x))return new P(f,f);if(v(x))return I=U(A(x),I),new P(A(I.g),A(I.h));if(v(I))return I=U(x,A(I)),new P(A(I.g),I.h);if(x.g.length>30){if(v(x)||v(I))throw Error("slowDivide_ only works with positive integers.");for(var S=p,C=I;C.l(x)<=0;)S=W(S),C=W(C);var b=q(S,1),N=q(C,1);for(C=q(C,2),S=q(S,2);!_(C);){var k=N.add(C);k.l(x)<=0&&(b=b.add(S),N=k),C=q(C,1),S=q(S,1)}return I=w(x,b.j(I)),new P(b,I)}for(b=f;x.l(I)>=0;){for(S=Math.max(1,Math.floor(x.m()/I.m())),C=Math.ceil(Math.log(S)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),N=c(S),k=N.j(I);v(k)||k.l(x)>0;)S-=C,N=c(S),k=N.j(I);_(N)&&(N=p),b=b.add(N),x=w(x,k)}return new P(b,x)}n.B=function(x){return U(this,x).h},n.and=function(x){const I=Math.max(this.g.length,x.g.length),S=[];for(let C=0;C<I;C++)S[C]=this.i(C)&x.i(C);return new o(S,this.h&x.h)},n.or=function(x){const I=Math.max(this.g.length,x.g.length),S=[];for(let C=0;C<I;C++)S[C]=this.i(C)|x.i(C);return new o(S,this.h|x.h)},n.xor=function(x){const I=Math.max(this.g.length,x.g.length),S=[];for(let C=0;C<I;C++)S[C]=this.i(C)^x.i(C);return new o(S,this.h^x.h)};function W(x){const I=x.g.length+1,S=[];for(let C=0;C<I;C++)S[C]=x.i(C)<<1|x.i(C-1)>>>31;return new o(S,x.h)}function q(x,I){const S=I>>5;I%=32;const C=x.g.length-S,b=[];for(let N=0;N<C;N++)b[N]=I>0?x.i(N+S)>>>I|x.i(N+S+1)<<32-I:x.i(N+S);return new o(b,x.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,xI=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Ui=o}).apply(typeof UA<"u"?UA:typeof self<"u"?self:typeof window<"u"?window:{});var nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kI,kl,NI,bh,yg,DI,OI,LI;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof nh=="object"&&nh];for(var g=0;g<u.length;++g){var y=u[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=t(this);function r(u,g){if(g)e:{var y=s;u=u.split(".");for(var R=0;R<u.length-1;R++){var K=u[R];if(!(K in y))break e;y=y[K]}u=u[u.length-1],R=y[u],g=g(R),g!=R&&g!=null&&e(y,u,{configurable:!0,writable:!0,value:g})}}r("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(u){return u||function(g){var y=[],R;for(R in g)Object.prototype.hasOwnProperty.call(g,R)&&y.push([R,g[R]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function l(u,g,y){return u.call.apply(u.bind,arguments)}function c(u,g,y){return c=l,c.apply(null,arguments)}function h(u,g){var y=Array.prototype.slice.call(arguments,1);return function(){var R=y.slice();return R.push.apply(R,arguments),u.apply(this,R)}}function f(u,g){function y(){}y.prototype=g.prototype,u.Z=g.prototype,u.prototype=new y,u.prototype.constructor=u,u.Ob=function(R,K,Y){for(var fe=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)fe[Ze-2]=arguments[Ze];return g.prototype[K].apply(R,fe)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function m(u){const g=u.length;if(g>0){const y=Array(g);for(let R=0;R<g;R++)y[R]=u[R];return y}return[]}function _(u,g){for(let R=1;R<arguments.length;R++){const K=arguments[R];var y=typeof K;if(y=y!="object"?y:K?Array.isArray(K)?"array":y:"null",y=="array"||y=="object"&&typeof K.length=="number"){y=u.length||0;const Y=K.length||0;u.length=y+Y;for(let fe=0;fe<Y;fe++)u[y+fe]=K[fe]}else u.push(K)}}class v{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function A(u){o.setTimeout(()=>{throw u},0)}function w(){var u=x;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class T{constructor(){this.h=this.g=null}add(g,y){const R=P.get();R.set(g,y),this.h?this.h.next=R:this.g=R,this.h=R}}var P=new v(()=>new U,u=>u.reset());class U{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let W,q=!1,x=new T,I=()=>{const u=Promise.resolve(void 0);W=()=>{u.then(S)}};function S(){for(var u;u=w();){try{u.h.call(u.g)}catch(y){A(y)}var g=P;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}q=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var N=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};o.addEventListener("test",y,g),o.removeEventListener("test",y,g)}catch{}return u})();function k(u){return/^[\s\xa0]*$/.test(u)}function Se(u,g){b.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}f(Se,b),Se.prototype.init=function(u,g){const y=this.type=u.type,R=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(y=="mouseover"?g=u.fromElement:y=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Se.Z.h.call(this)},Se.prototype.h=function(){Se.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ne="closure_listenable_"+(Math.random()*1e6|0),V=0;function D(u,g,y,R,K){this.listener=u,this.proxy=null,this.src=g,this.type=y,this.capture=!!R,this.ha=K,this.key=++V,this.da=this.fa=!1}function z(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function he(u,g,y){for(const R in u)g.call(y,u[R],R,u)}function ke(u,g){for(const y in u)g.call(void 0,u[y],y,u)}function Te(u){const g={};for(const y in u)g[y]=u[y];return g}const Ve="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ze(u,g){let y,R;for(let K=1;K<arguments.length;K++){R=arguments[K];for(y in R)u[y]=R[y];for(let Y=0;Y<Ve.length;Y++)y=Ve[Y],Object.prototype.hasOwnProperty.call(R,y)&&(u[y]=R[y])}}function ft(u){this.src=u,this.g={},this.h=0}ft.prototype.add=function(u,g,y,R,K){const Y=u.toString();u=this.g[Y],u||(u=this.g[Y]=[],this.h++);const fe=yt(u,g,R,K);return fe>-1?(g=u[fe],y||(g.fa=!1)):(g=new D(g,this.src,Y,!!R,K),g.fa=y,u.push(g)),g};function pt(u,g){const y=g.type;if(y in u.g){var R=u.g[y],K=Array.prototype.indexOf.call(R,g,void 0),Y;(Y=K>=0)&&Array.prototype.splice.call(R,K,1),Y&&(z(g),u.g[y].length==0&&(delete u.g[y],u.h--))}}function yt(u,g,y,R){for(let K=0;K<u.length;++K){const Y=u[K];if(!Y.da&&Y.listener==g&&Y.capture==!!y&&Y.ha==R)return K}return-1}var Z="closure_lm_"+(Math.random()*1e6|0),pe={};function ue(u,g,y,R,K){if(Array.isArray(g)){for(let Y=0;Y<g.length;Y++)ue(u,g[Y],y,R,K);return null}return y=Q(y),u&&u[ne]?u.J(g,y,a(R)?!!R.capture:!1,K):we(u,g,y,!1,R,K)}function we(u,g,y,R,K,Y){if(!g)throw Error("Invalid event type");const fe=a(K)?!!K.capture:!!K;let Ze=j(u);if(Ze||(u[Z]=Ze=new ft(u)),y=Ze.add(g,y,R,fe,Y),y.proxy)return y;if(R=Qe(),y.proxy=R,R.src=u,R.listener=y,u.addEventListener)N||(K=fe),K===void 0&&(K=!1),u.addEventListener(g.toString(),R,K);else if(u.attachEvent)u.attachEvent(G(g.toString()),R);else if(u.addListener&&u.removeListener)u.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Qe(){function u(y){return g.call(u.src,u.listener,y)}const g=te;return u}function O(u,g,y,R,K){if(Array.isArray(g))for(var Y=0;Y<g.length;Y++)O(u,g[Y],y,R,K);else R=a(R)?!!R.capture:!!R,y=Q(y),u&&u[ne]?(u=u.i,Y=String(g).toString(),Y in u.g&&(g=u.g[Y],y=yt(g,y,R,K),y>-1&&(z(g[y]),Array.prototype.splice.call(g,y,1),g.length==0&&(delete u.g[Y],u.h--)))):u&&(u=j(u))&&(g=u.g[g.toString()],u=-1,g&&(u=yt(g,y,R,K)),(y=u>-1?g[u]:null)&&L(y))}function L(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[ne])pt(g.i,u);else{var y=u.type,R=u.proxy;g.removeEventListener?g.removeEventListener(y,R,u.capture):g.detachEvent?g.detachEvent(G(y),R):g.addListener&&g.removeListener&&g.removeListener(R),(y=j(g))?(pt(y,u),y.h==0&&(y.src=null,g[Z]=null)):z(u)}}}function G(u){return u in pe?pe[u]:pe[u]="on"+u}function te(u,g){if(u.da)u=!0;else{g=new Se(g,this);const y=u.listener,R=u.ha||u.src;u.fa&&L(u),u=y.call(R,g)}return u}function j(u){return u=u[Z],u instanceof ft?u:null}var F="__closure_events_fn_"+(Math.random()*1e9>>>0);function Q(u){return typeof u=="function"?u:(u[F]||(u[F]=function(g){return u.handleEvent(g)}),u[F])}function ee(){C.call(this),this.i=new ft(this),this.M=this,this.G=null}f(ee,C),ee.prototype[ne]=!0,ee.prototype.removeEventListener=function(u,g,y,R){O(this,u,g,y,R)};function ae(u,g){var y,R=u.G;if(R)for(y=[];R;R=R.G)y.push(R);if(u=u.M,R=g.type||g,typeof g=="string")g=new b(g,u);else if(g instanceof b)g.target=g.target||u;else{var K=g;g=new b(R,u),ze(g,K)}K=!0;let Y,fe;if(y)for(fe=y.length-1;fe>=0;fe--)Y=g.g=y[fe],K=le(Y,R,!0,g)&&K;if(Y=g.g=u,K=le(Y,R,!0,g)&&K,K=le(Y,R,!1,g)&&K,y)for(fe=0;fe<y.length;fe++)Y=g.g=y[fe],K=le(Y,R,!1,g)&&K}ee.prototype.N=function(){if(ee.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const y=u.g[g];for(let R=0;R<y.length;R++)z(y[R]);delete u.g[g],u.h--}}this.G=null},ee.prototype.J=function(u,g,y,R){return this.i.add(String(u),g,!1,y,R)},ee.prototype.K=function(u,g,y,R){return this.i.add(String(u),g,!0,y,R)};function le(u,g,y,R){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let K=!0;for(let Y=0;Y<g.length;++Y){const fe=g[Y];if(fe&&!fe.da&&fe.capture==y){const Ze=fe.listener,_n=fe.ha||fe.src;fe.fa&&pt(u.i,fe),K=Ze.call(_n,R)!==!1&&K}}return K&&!R.defaultPrevented}function xe(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(u,g||0)}function ge(u){u.g=xe(()=>{u.g=null,u.i&&(u.i=!1,ge(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Ee extends C{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ge(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Be(u){C.call(this),this.h=u,this.g={}}f(Be,C);var nt=[];function $e(u){he(u.g,function(g,y){this.g.hasOwnProperty(y)&&L(g)},u),u.g={}}Be.prototype.N=function(){Be.Z.N.call(this),$e(this)},Be.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var st=o.JSON.stringify,it=o.JSON.parse,dn=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function ts(){}function ns(){}var ps={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function js(){b.call(this,"d")}f(js,b);function wn(){b.call(this,"c")}f(wn,b);var fn={},hi=null;function Nt(){return hi=hi||new ee}fn.Ia="serverreachability";function sn(u){b.call(this,fn.Ia,u)}f(sn,b);function Vt(u){const g=Nt();ae(g,new sn(g))}fn.STAT_EVENT="statevent";function Tn(u,g){b.call(this,fn.STAT_EVENT,u),this.stat=g}f(Tn,b);function $t(u){const g=Nt();ae(g,new Tn(g,u))}fn.Ja="timingevent";function Hn(u,g){b.call(this,fn.Ja,u),this.size=g}f(Hn,b);function Kt(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function di(){this.g=!0}di.prototype.ua=function(){this.g=!1};function wf(u,g,y,R,K,Y){u.info(function(){if(u.g)if(Y){var fe="",Ze=Y.split("&");for(let xt=0;xt<Ze.length;xt++){var _n=Ze[xt].split("=");if(_n.length>1){const xn=_n[0];_n=_n[1];const lr=xn.split("_");fe=lr.length>=2&&lr[1]=="type"?fe+(xn+"="+_n+"&"):fe+(xn+"=redacted&")}}}else fe=null;else fe=Y;return"XMLHTTP REQ ("+R+") [attempt "+K+"]: "+g+`
`+y+`
`+fe})}function J(u,g,y,R,K,Y,fe){u.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+K+"]: "+g+`
`+y+`
`+Y+" "+fe})}function se(u,g,y,R){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+me(u,y)+(R?" "+R:"")})}function X(u,g){u.info(function(){return"TIMEOUT: "+g})}di.prototype.info=function(){};function me(u,g){if(!u.g)return g;if(!g)return null;try{const Y=JSON.parse(g);if(Y){for(u=0;u<Y.length;u++)if(Array.isArray(Y[u])){var y=Y[u];if(!(y.length<2)){var R=y[1];if(Array.isArray(R)&&!(R.length<1)){var K=R[0];if(K!="noop"&&K!="stop"&&K!="close")for(let fe=1;fe<R.length;fe++)R[fe]=""}}}}return st(Y)}catch{return g}}var Pe={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Je={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},We;function Ce(){}f(Ce,ts),Ce.prototype.g=function(){return new XMLHttpRequest},We=new Ce;function ht(u){return encodeURIComponent(String(u))}function Ln(u){var g=1;u=u.split(":");const y=[];for(;g>0&&u.length;)y.push(u.shift()),g--;return u.length&&y.push(u.join(":")),y}function Ht(u,g,y,R){this.j=u,this.i=g,this.l=y,this.S=R||1,this.V=new Be(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new gs}function gs(){this.i=null,this.g="",this.h=!1}var ms={},Qt={};function Sn(u,g,y){u.M=1,u.A=Du(ar(g)),u.u=y,u.R=!0,pn(u,null)}function pn(u,g){u.F=Date.now(),Gn(u),u.B=ar(u.A);var y=u.B,R=u.S;Array.isArray(R)||(R=[String(R)]),Py(y.i,"t",R),u.C=0,y=u.j.L,u.h=new gs,u.g=zy(u.j,y?g:null,!u.u),u.P>0&&(u.O=new Ee(c(u.Y,u,u.g),u.P)),g=u.V,y=u.g,R=u.ba;var K="readystatechange";Array.isArray(K)||(K&&(nt[0]=K.toString()),K=nt);for(let Y=0;Y<K.length;Y++){const fe=ue(y,K[Y],R||g.handleEvent,!1,g.h||g);if(!fe)break;g.g[fe.key]=fe}g=u.J?Te(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Vt(),wf(u.i,u.v,u.B,u.l,u.S,u.u)}Ht.prototype.ba=function(u){u=u.target;const g=this.O;g&&gi(u)==3?g.j():this.Y(u)},Ht.prototype.Y=function(u){try{if(u==this.g)e:{const Ze=gi(this.g),_n=this.g.ya(),xt=this.g.ca();if(!(Ze<3)&&(Ze!=3||this.g&&(this.h.h||this.g.la()||Ly(this.g)))){this.K||Ze!=4||_n==7||(_n==8||xt<=0?Vt(3):Vt(2)),ys(this);var g=this.g.ca();this.X=g;var y=Tt(this);if(this.o=g==200,J(this.i,this.v,this.B,this.l,this.S,Ze,g),this.o){if(this.U&&!this.L){t:{if(this.g){var R,K=this.g;if((R=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(R)){var Y=R;break t}}Y=null}if(u=Y)se(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Pn(this,u);else{this.o=!1,this.m=3,$t(12),St(this),qt(this);break e}}if(this.R){u=!0;let xn;for(;!this.K&&this.C<y.length;)if(xn=gt(this,y),xn==Qt){Ze==4&&(this.m=4,$t(14),u=!1),se(this.i,this.l,null,"[Incomplete Response]");break}else if(xn==ms){this.m=4,$t(15),se(this.i,this.l,y,"[Invalid Chunk]"),u=!1;break}else se(this.i,this.l,xn,null),Pn(this,xn);if(De(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ze!=4||y.length!=0||this.h.h||(this.m=1,$t(16),u=!1),this.o=this.o&&u,!u)se(this.i,this.l,y,"[Invalid Chunked Response]"),St(this),qt(this);else if(y.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),Tf(fe),fe.P=!0,$t(11))}}else se(this.i,this.l,y,null),Pn(this,y);Ze==4&&St(this),this.o&&!this.K&&(Ze==4?Hy(this.j,this):(this.o=!1,Gn(this)))}else YT(this.g),g==400&&y.indexOf("Unknown SID")>0?(this.m=3,$t(12)):(this.m=0,$t(13)),St(this),qt(this)}}}catch{}finally{}};function Tt(u){if(!De(u))return u.g.la();const g=Ly(u.g);if(g==="")return"";let y="";const R=g.length,K=gi(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return St(u),qt(u),"";u.h.i=new o.TextDecoder}for(let Y=0;Y<R;Y++)u.h.h=!0,y+=u.h.i.decode(g[Y],{stream:!(K&&Y==R-1)});return g.length=0,u.h.g+=y,u.C=0,u.h.g}function De(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function gt(u,g){var y=u.C,R=g.indexOf(`
`,y);return R==-1?Qt:(y=Number(g.substring(y,R)),isNaN(y)?ms:(R+=1,R+y>g.length?Qt:(g=g.slice(R,R+y),u.C=R+y,g)))}Ht.prototype.cancel=function(){this.K=!0,St(this)};function Gn(u){u.T=Date.now()+u.H,Qn(u,u.H)}function Qn(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Kt(c(u.aa,u),g)}function ys(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Ht.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(X(this.i,this.B),this.M!=2&&(Vt(),$t(17)),St(this),this.m=2,qt(this)):Qn(this,this.T-u)};function qt(u){u.j.I==0||u.K||Hy(u.j,u)}function St(u){ys(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,$e(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Pn(u,g){try{var y=u.j;if(y.I!=0&&(y.g==u||Zo(y.h,u))){if(!u.L&&Zo(y.h,u)&&y.I==3){try{var R=y.Ba.g.parse(g)}catch{R=null}if(Array.isArray(R)&&R.length==3){var K=R;if(K[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<u.F)Fu(y),Bu(y);else break e;Cf(y),$t(18)}}else y.xa=K[1],0<y.xa-y.K&&K[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=Kt(c(y.Va,y),6e3));Xo(y.h)<=1&&y.ta&&(y.ta=void 0)}else io(y,11)}else if((u.L||y.g==u)&&Fu(y),!k(g))for(K=y.Ba.g.parse(g),g=0;g<K.length;g++){let xt=K[g];const xn=xt[0];if(!(xn<=y.K))if(y.K=xn,xt=xt[1],y.I==2)if(xt[0]=="c"){y.M=xt[1],y.ba=xt[2];const lr=xt[3];lr!=null&&(y.ka=lr,y.j.info("VER="+y.ka));const oo=xt[4];oo!=null&&(y.za=oo,y.j.info("SVER="+y.za));const mi=xt[5];mi!=null&&typeof mi=="number"&&mi>0&&(R=1.5*mi,y.O=R,y.j.info("backChannelRequestTimeoutMs_="+R)),R=y;const yi=u.g;if(yi){const Vu=yi.g?yi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vu){var Y=R.h;Y.g||Vu.indexOf("spdy")==-1&&Vu.indexOf("quic")==-1&&Vu.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(so(Y,Y.h),Y.h=null))}if(R.G){const Sf=yi.g?yi.g.getResponseHeader("X-HTTP-Session-Id"):null;Sf&&(R.wa=Sf,Ft(R.J,R.G,Sf))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-u.F,y.j.info("Handshake RTT: "+y.T+"ms")),R=y;var fe=u;if(R.na=jy(R,R.L?R.ba:null,R.W),fe.L){ul(R.h,fe);var Ze=fe,_n=R.O;_n&&(Ze.H=_n),Ze.D&&(ys(Ze),Gn(Ze)),R.g=fe}else Vy(R);y.i.length>0&&Mu(y)}else xt[0]!="stop"&&xt[0]!="close"||io(y,7);else y.I==3&&(xt[0]=="stop"||xt[0]=="close"?xt[0]=="stop"?io(y,7):If(y):xt[0]!="noop"&&y.l&&y.l.qa(xt),y.A=0)}}Vt(4)}catch{}}var Rn=class{constructor(u,g){this.g=u,this.map=g}};function Ts(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Pr(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Xo(u){return u.h?1:u.g?u.g.size:0}function Zo(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function so(u,g){u.g?u.g.add(g):u.h=g}function ul(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Ts.prototype.cancel=function(){if(this.i=hl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function hl(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const y of u.g.values())g=g.concat(y.G);return g}return m(u.i)}var Nu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function UT(u,g){if(u){u=u.split("&");for(let y=0;y<u.length;y++){const R=u[y].indexOf("=");let K,Y=null;R>=0?(K=u[y].substring(0,R),Y=u[y].substring(R+1)):K=u[y],g(K,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function fi(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof fi?(this.l=u.l,dl(this,u.j),this.o=u.o,this.g=u.g,fl(this,u.u),this.h=u.h,_f(this,Ry(u.i)),this.m=u.m):u&&(g=String(u).match(Nu))?(this.l=!1,dl(this,g[1]||"",!0),this.o=pl(g[2]||""),this.g=pl(g[3]||"",!0),fl(this,g[4]),this.h=pl(g[5]||"",!0),_f(this,g[6]||"",!0),this.m=pl(g[7]||"")):(this.l=!1,this.i=new ml(null,this.l))}fi.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(gl(g,Iy,!0),":");var y=this.g;return(y||g=="file")&&(u.push("//"),(g=this.o)&&u.push(gl(g,Iy,!0),"@"),u.push(ht(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&u.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(gl(y,y.charAt(0)=="/"?HT:$T,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",gl(y,QT)),u.join("")},fi.prototype.resolve=function(u){const g=ar(this);let y=!!u.j;y?dl(g,u.j):y=!!u.o,y?g.o=u.o:y=!!u.g,y?g.g=u.g:y=u.u!=null;var R=u.h;if(y)fl(g,u.u);else if(y=!!u.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var K=g.h.lastIndexOf("/");K!=-1&&(R=g.h.slice(0,K+1)+R)}if(K=R,K==".."||K==".")R="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){R=K.lastIndexOf("/",0)==0,K=K.split("/");const Y=[];for(let fe=0;fe<K.length;){const Ze=K[fe++];Ze=="."?R&&fe==K.length&&Y.push(""):Ze==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),R&&fe==K.length&&Y.push("")):(Y.push(Ze),R=!0)}R=Y.join("/")}else R=K}return y?g.h=R:y=u.i.toString()!=="",y?_f(g,Ry(u.i)):y=!!u.m,y&&(g.m=u.m),g};function ar(u){return new fi(u)}function dl(u,g,y){u.j=y?pl(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function fl(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function _f(u,g,y){g instanceof ml?(u.i=g,jT(u.i,u.l)):(y||(g=gl(g,GT)),u.i=new ml(g,u.l))}function Ft(u,g,y){u.i.set(g,y)}function Du(u){return Ft(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function pl(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function gl(u,g,y){return typeof u=="string"?(u=encodeURI(u).replace(g,VT),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function VT(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Iy=/[#\/\?@]/g,$T=/[#\?:]/g,HT=/[#\?]/g,GT=/[#\?@]/g,QT=/#/g;function ml(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function ro(u){u.g||(u.g=new Map,u.h=0,u.i&&UT(u.i,function(g,y){u.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}n=ml.prototype,n.add=function(u,g){ro(this),this.i=null,u=ea(this,u);let y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(g),this.h+=1,this};function Cy(u,g){ro(u),g=ea(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Ty(u,g){return ro(u),g=ea(u,g),u.g.has(g)}n.forEach=function(u,g){ro(this),this.g.forEach(function(y,R){y.forEach(function(K){u.call(g,K,R,this)},this)},this)};function Sy(u,g){ro(u);let y=[];if(typeof g=="string")Ty(u,g)&&(y=y.concat(u.g.get(ea(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)y=y.concat(u[g]);return y}n.set=function(u,g){return ro(this),this.i=null,u=ea(this,u),Ty(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},n.get=function(u,g){return u?(u=Sy(this,u),u.length>0?String(u[0]):g):g};function Py(u,g,y){Cy(u,g),y.length>0&&(u.i=null,u.g.set(ea(u,g),m(y)),u.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let R=0;R<g.length;R++){var y=g[R];const K=ht(y);y=Sy(this,y);for(let Y=0;Y<y.length;Y++){let fe=K;y[Y]!==""&&(fe+="="+ht(y[Y])),u.push(fe)}}return this.i=u.join("&")};function Ry(u){const g=new ml;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function ea(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function jT(u,g){g&&!u.j&&(ro(u),u.i=null,u.g.forEach(function(y,R){const K=R.toLowerCase();R!=K&&(Cy(this,R),Py(this,K,y))},u)),u.j=g}function zT(u,g){const y=new di;if(o.Image){const R=new Image;R.onload=h(pi,y,"TestLoadImage: loaded",!0,g,R),R.onerror=h(pi,y,"TestLoadImage: error",!1,g,R),R.onabort=h(pi,y,"TestLoadImage: abort",!1,g,R),R.ontimeout=h(pi,y,"TestLoadImage: timeout",!1,g,R),o.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=u}else g(!1)}function WT(u,g){const y=new di,R=new AbortController,K=setTimeout(()=>{R.abort(),pi(y,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:R.signal}).then(Y=>{clearTimeout(K),Y.ok?pi(y,"TestPingServer: ok",!0,g):pi(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(K),pi(y,"TestPingServer: error",!1,g)})}function pi(u,g,y,R,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),R(y)}catch{}}function KT(){this.g=new dn}function Ef(u){this.i=u.Sb||null,this.h=u.ab||!1}f(Ef,ts),Ef.prototype.g=function(){return new Ou(this.i,this.h)};function Ou(u,g){ee.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Ou,ee),n=Ou.prototype,n.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,vl(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,yl(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,vl(this)),this.g&&(this.readyState=3,vl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;xy(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function xy(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?yl(this):vl(this),this.readyState==3&&xy(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,yl(this))},n.Na=function(u){this.g&&(this.response=u,yl(this))},n.ga=function(){this.g&&yl(this)};function yl(u){u.readyState=4,u.l=null,u.j=null,u.B=null,vl(u)}n.setRequestHeader=function(u,g){this.A.append(u,g)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=g.next();return u.join(`\r
`)};function vl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ou.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ky(u){let g="";return he(u,function(y,R){g+=R,g+=":",g+=y,g+=`\r
`}),g}function bf(u,g,y){e:{for(R in y){var R=!1;break e}R=!0}R||(y=ky(y),typeof u=="string"?y!=null&&ht(y):Ft(u,g,y))}function Jt(u){ee.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Jt,ee);var qT=/^https?$/i,JT=["POST","PUT"];n=Jt.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,g,y,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():We.g(),this.g.onreadystatechange=p(c(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(Y){Ny(this,Y);return}if(u=y||"",y=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var K in R)y.set(K,R[K]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Y of R.keys())y.set(Y,R.get(Y));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(y.keys()).find(Y=>Y.toLowerCase()=="content-type"),K=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(JT,g,void 0)>=0)||R||K||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,fe]of y)this.g.setRequestHeader(Y,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Y){Ny(this,Y)}};function Ny(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Dy(u),Lu(u)}function Dy(u){u.A||(u.A=!0,ae(u,"complete"),ae(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ae(this,"complete"),ae(this,"abort"),Lu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lu(this,!0)),Jt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Oy(this):this.Xa())},n.Xa=function(){Oy(this)};function Oy(u){if(u.h&&typeof i<"u"){if(u.v&&gi(u)==4)setTimeout(u.Ca.bind(u),0);else if(ae(u,"readystatechange"),gi(u)==4){u.h=!1;try{const Y=u.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var R;if(R=Y===0){let fe=String(u.D).match(Nu)[1]||null;!fe&&o.self&&o.self.location&&(fe=o.self.location.protocol.slice(0,-1)),R=!qT.test(fe?fe.toLowerCase():"")}y=R}if(y)ae(u,"complete"),ae(u,"success");else{u.o=6;try{var K=gi(u)>2?u.g.statusText:""}catch{K=""}u.l=K+" ["+u.ca()+"]",Dy(u)}}finally{Lu(u)}}}}function Lu(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const y=u.g;u.g=null,g||ae(u,"ready");try{y.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function gi(u){return u.g?u.g.readyState:0}n.ca=function(){try{return gi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),it(g)}};function Ly(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function YT(u){const g={};u=(u.g&&gi(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<u.length;R++){if(k(u[R]))continue;var y=Ln(u[R]);const K=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const Y=g[K]||[];g[K]=Y,Y.push(y)}ke(g,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Al(u,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||g}function By(u){this.za=0,this.i=[],this.j=new di,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Al("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Al("baseRetryDelayMs",5e3,u),this.Za=Al("retryDelaySeedMs",1e4,u),this.Ta=Al("forwardChannelMaxRetries",2,u),this.va=Al("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Ts(u&&u.concurrentRequestLimit),this.Ba=new KT,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=By.prototype,n.ka=8,n.I=1,n.connect=function(u,g,y,R){$t(0),this.W=u,this.H=g||{},y&&R!==void 0&&(this.H.OSID=y,this.H.OAID=R),this.F=this.X,this.J=jy(this,null,this.W),Mu(this)};function If(u){if(My(u),u.I==3){var g=u.V++,y=ar(u.J);if(Ft(y,"SID",u.M),Ft(y,"RID",g),Ft(y,"TYPE","terminate"),wl(u,y),g=new Ht(u,u.j,g),g.M=2,g.A=Du(ar(y)),y=!1,o.navigator&&o.navigator.sendBeacon)try{y=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!y&&o.Image&&(new Image().src=g.A,y=!0),y||(g.g=zy(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Gn(g)}Qy(u)}function Bu(u){u.g&&(Tf(u),u.g.cancel(),u.g=null)}function My(u){Bu(u),u.v&&(o.clearTimeout(u.v),u.v=null),Fu(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Mu(u){if(!Pr(u.h)&&!u.m){u.m=!0;var g=u.Ea;W||I(),q||(W(),q=!0),x.add(g,u),u.D=0}}function XT(u,g){return Xo(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Kt(c(u.Ea,u,g),Gy(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const K=new Ht(this,this.j,u);let Y=this.o;if(this.U&&(Y?(Y=Te(Y),ze(Y,this.U)):Y=this.U),this.u!==null||this.R||(K.J=Y,Y=null),this.S)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var R=this.i[y];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(g+=R,g>4096){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=Uy(this,K,g),y=ar(this.J),Ft(y,"RID",u),Ft(y,"CVER",22),this.G&&Ft(y,"X-HTTP-Session-Id",this.G),wl(this,y),Y&&(this.R?g="headers="+ht(ky(Y))+"&"+g:this.u&&bf(y,this.u,Y)),so(this.h,K),this.Ra&&Ft(y,"TYPE","init"),this.S?(Ft(y,"$req",g),Ft(y,"SID","null"),K.U=!0,Sn(K,y,null)):Sn(K,y,g),this.I=2}}else this.I==3&&(u?Fy(this,u):this.i.length==0||Pr(this.h)||Fy(this))};function Fy(u,g){var y;g?y=g.l:y=u.V++;const R=ar(u.J);Ft(R,"SID",u.M),Ft(R,"RID",y),Ft(R,"AID",u.K),wl(u,R),u.u&&u.o&&bf(R,u.u,u.o),y=new Ht(u,u.j,y,u.D+1),u.u===null&&(y.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Uy(u,y,1e3),y.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),so(u.h,y),Sn(y,R,g)}function wl(u,g){u.H&&he(u.H,function(y,R){Ft(g,R,y)}),u.l&&he({},function(y,R){Ft(g,R,y)})}function Uy(u,g,y){y=Math.min(u.i.length,y);const R=u.l?c(u.l.Ka,u.l,u):null;e:{var K=u.i;let Ze=-1;for(;;){const _n=["count="+y];Ze==-1?y>0?(Ze=K[0].g,_n.push("ofs="+Ze)):Ze=0:_n.push("ofs="+Ze);let xt=!0;for(let xn=0;xn<y;xn++){var Y=K[xn].g;const lr=K[xn].map;if(Y-=Ze,Y<0)Ze=Math.max(0,K[xn].g-100),xt=!1;else try{Y="req"+Y+"_"||"";try{var fe=lr instanceof Map?lr:Object.entries(lr);for(const[oo,mi]of fe){let yi=mi;a(mi)&&(yi=st(mi)),_n.push(Y+oo+"="+encodeURIComponent(yi))}}catch(oo){throw _n.push(Y+"type="+encodeURIComponent("_badmap")),oo}}catch{R&&R(lr)}}if(xt){fe=_n.join("&");break e}}fe=void 0}return u=u.i.splice(0,y),g.G=u,fe}function Vy(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;W||I(),q||(W(),q=!0),x.add(g,u),u.A=0}}function Cf(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Kt(c(u.Da,u),Gy(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,$y(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Kt(c(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,$t(10),Bu(this),$y(this))};function Tf(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function $y(u){u.g=new Ht(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=ar(u.na);Ft(g,"RID","rpc"),Ft(g,"SID",u.M),Ft(g,"AID",u.K),Ft(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ft(g,"TO",u.ia),Ft(g,"TYPE","xmlhttp"),wl(u,g),u.u&&u.o&&bf(g,u.u,u.o),u.O&&(u.g.H=u.O);var y=u.g;u=u.ba,y.M=1,y.A=Du(ar(g)),y.u=null,y.R=!0,pn(y,u)}n.Va=function(){this.C!=null&&(this.C=null,Bu(this),Cf(this),$t(19))};function Fu(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function Hy(u,g){var y=null;if(u.g==g){Fu(u),Tf(u),u.g=null;var R=2}else if(Zo(u.h,g))y=g.G,ul(u.h,g),R=1;else return;if(u.I!=0){if(g.o)if(R==1){y=g.u?g.u.length:0,g=Date.now()-g.F;var K=u.D;R=Nt(),ae(R,new Hn(R,y)),Mu(u)}else Vy(u);else if(K=g.m,K==3||K==0&&g.X>0||!(R==1&&XT(u,g)||R==2&&Cf(u)))switch(y&&y.length>0&&(g=u.h,g.i=g.i.concat(y)),K){case 1:io(u,5);break;case 4:io(u,10);break;case 3:io(u,6);break;default:io(u,2)}}}function Gy(u,g){let y=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(y*=2),y*g}function io(u,g){if(u.j.info("Error code "+g),g==2){var y=c(u.bb,u),R=u.Ua;const K=!R;R=new fi(R||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||dl(R,"https"),Du(R),K?zT(R.toString(),y):WT(R.toString(),y)}else $t(2);u.I=0,u.l&&u.l.pa(g),Qy(u),My(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function Qy(u){if(u.I=0,u.ja=[],u.l){const g=hl(u.h);(g.length!=0||u.i.length!=0)&&(_(u.ja,g),_(u.ja,u.i),u.h.i.length=0,m(u.i),u.i.length=0),u.l.oa()}}function jy(u,g,y){var R=y instanceof fi?ar(y):new fi(y);if(R.g!="")g&&(R.g=g+"."+R.g),fl(R,R.u);else{var K=o.location;R=K.protocol,g=g?g+"."+K.hostname:K.hostname,K=+K.port;const Y=new fi(null);R&&dl(Y,R),g&&(Y.g=g),K&&fl(Y,K),y&&(Y.h=y),R=Y}return y=u.G,g=u.wa,y&&g&&Ft(R,y,g),Ft(R,"VER",u.ka),wl(u,R),R}function zy(u,g,y){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new Jt(new Ef({ab:y})):new Jt(u.ma),g.Fa(u.L),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wy(){}n=Wy.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Uu(){}Uu.prototype.g=function(u,g){return new Ss(u,g)};function Ss(u,g){ee.call(this),this.g=new By(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!k(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!k(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new ta(this)}f(Ss,ee),Ss.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ss.prototype.close=function(){If(this.g)},Ss.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.v&&(y={},y.__data__=st(u),u=y);g.i.push(new Rn(g.Ya++,u)),g.I==3&&Mu(g)},Ss.prototype.N=function(){this.g.l=null,delete this.j,If(this.g),delete this.g,Ss.Z.N.call(this)};function Ky(u){js.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const y in g){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}f(Ky,js);function qy(){wn.call(this),this.status=1}f(qy,wn);function ta(u){this.g=u}f(ta,Wy),ta.prototype.ra=function(){ae(this.g,"a")},ta.prototype.qa=function(u){ae(this.g,new Ky(u))},ta.prototype.pa=function(u){ae(this.g,new qy)},ta.prototype.oa=function(){ae(this.g,"b")},Uu.prototype.createWebChannel=Uu.prototype.g,Ss.prototype.send=Ss.prototype.o,Ss.prototype.open=Ss.prototype.m,Ss.prototype.close=Ss.prototype.close,LI=function(){return new Uu},OI=function(){return Nt()},DI=fn,yg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Pe.NO_ERROR=0,Pe.TIMEOUT=8,Pe.HTTP_ERROR=6,bh=Pe,Je.COMPLETE="complete",NI=Je,ns.EventType=ps,ps.OPEN="a",ps.CLOSE="b",ps.ERROR="c",ps.MESSAGE="d",ee.prototype.listen=ee.prototype.J,kl=ns,Jt.prototype.listenOnce=Jt.prototype.K,Jt.prototype.getLastError=Jt.prototype.Ha,Jt.prototype.getLastErrorCode=Jt.prototype.ya,Jt.prototype.getStatus=Jt.prototype.ca,Jt.prototype.getResponseJson=Jt.prototype.La,Jt.prototype.getResponseText=Jt.prototype.la,Jt.prototype.send=Jt.prototype.ea,Jt.prototype.setWithCredentials=Jt.prototype.Fa,kI=Jt}).apply(typeof nh<"u"?nh:typeof self<"u"?self:typeof window<"u"?window:{});const VA="@firebase/firestore",$A="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wn.UNAUTHENTICATED=new Wn(null),Wn.GOOGLE_CREDENTIALS=new Wn("google-credentials-uid"),Wn.FIRST_PARTY=new Wn("first-party-uid"),Wn.MOCK_USER=new Wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let il="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=new qd("@firebase/firestore");function ca(){return $o.logLevel}function _e(n,...e){if($o.logLevel<=ot.DEBUG){const t=e.map(Bm);$o.debug(`Firestore (${il}): ${n}`,...t)}}function oi(n,...e){if($o.logLevel<=ot.ERROR){const t=e.map(Bm);$o.error(`Firestore (${il}): ${n}`,...t)}}function za(n,...e){if($o.logLevel<=ot.WARN){const t=e.map(Bm);$o.warn(`Firestore (${il}): ${n}`,...t)}}function Bm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,BI(n,s,t)}function BI(n,e,t){let s=`FIRESTORE (${il}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw oi(s),new Error(s)}function bt(n,e,t,s){let r="Unexpected state";typeof t=="string"?r=t:s=t,n||BI(e,r,s)}function qe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends or{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Wn.UNAUTHENTICATED)))}shutdown(){}}class gF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class mF{constructor(e){this.t=e,this.currentUser=Wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){bt(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,t(l)):Promise.resolve();let i=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Jr,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await r(this.currentUser)}))},a=l=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Jr)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(bt(typeof s.accessToken=="string",31837,{l:s}),new MI(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string",2055,{h:e}),new Wn(e)}}class yF{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Wn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vF{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new yF(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Wn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class HA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AF{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){bt(this.o===void 0,3512);const s=i=>{i.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,_e("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>s(i)))};const r=i=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>r(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new HA(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(bt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new HA(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wF(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=wF(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<t&&(s+=e.charAt(r[i]%62))}return s}}function at(n,e){return n<e?-1:n>e?1:0}function vg(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const r=n.charAt(s),i=e.charAt(s);if(r!==i)return pp(r)===pp(i)?at(r,i):pp(r)?1:-1}return at(n.length,e.length)}const _F=55296,EF=57343;function pp(n){const e=n.charCodeAt(0);return e>=_F&&e<=EF}function Wa(n,e,t){return n.length===e.length&&n.every(((s,r)=>t(s,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="__name__";class dr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ue(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ue(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return dr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof dr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let r=0;r<s;r++){const i=dr.compareSegments(e.get(r),t.get(r));if(i!==0)return i}return at(e.length,t.length)}static compareSegments(e,t){const s=dr.isNumericId(e),r=dr.isNumericId(t);return s&&!r?-1:!s&&r?1:s&&r?dr.extractNumericId(e).compare(dr.extractNumericId(t)):vg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ui.fromString(e.substring(4,e.length-2))}}class Lt extends dr{construct(e,t,s){return new Lt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ve(re.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((r=>r.length>0)))}return new Lt(t)}static emptyPath(){return new Lt([])}}const bF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vn extends dr{construct(e,t,s){return new Vn(e,t,s)}static isValidIdentifier(e){return bF.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===GA}static keyField(){return new Vn([GA])}static fromServerFormat(e){const t=[];let s="",r=0;const i=()=>{if(s.length===0)throw new ve(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new ve(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ve(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new ve(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vn(t)}static emptyPath(){return new Vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.path=e}static fromPath(e){return new Le(Lt.fromString(e))}static fromName(e){return new Le(Lt.fromString(e).popFirst(5))}static empty(){return new Le(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new Lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(n,e,t){if(!t)throw new ve(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function IF(n,e,t,s){if(e===!0&&s===!0)throw new ve(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function QA(n){if(!Le.isDocumentKey(n))throw new ve(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function jA(n){if(Le.isDocumentKey(n))throw new ve(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function UI(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Zd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ue(12329,{type:typeof n})}function ai(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ve(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zd(n);throw new ve(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Gc(n,e){if(!UI(n))throw new ve(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const o=n[s];if(r&&typeof o!==r){t=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){t=`Expected '${s}' field to equal '${i.value}'`;break}}if(t)throw new ve(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=-62135596800,WA=1e6;class Ut{static now(){return Ut.fromMillis(Date.now())}static fromDate(e){return Ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*WA);return new Ut(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<zA)throw new ve(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/WA}_compareTo(e){return this.seconds===e.seconds?at(this.nanoseconds,e.nanoseconds):at(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Gc(e,Ut._jsonSchema))return new Ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-zA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ut._jsonSchemaVersion="firestore/timestamp/1.0",Ut._jsonSchema={type:vn("string",Ut._jsonSchemaVersion),seconds:vn("number"),nanoseconds:vn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{static fromTimestamp(e){return new je(e)}static min(){return new je(new Ut(0,0))}static max(){return new je(new Ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc=-1;function CF(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=je.fromTimestamp(s===1e9?new Ut(t+1,0):new Ut(t,s));return new Wi(r,Le.empty(),e)}function TF(n){return new Wi(n.readTime,n.key,wc)}class Wi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Wi(je.min(),Le.empty(),wc)}static max(){return new Wi(je.max(),Le.empty(),wc)}}function SF(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Le.comparator(n.documentKey,e.documentKey),t!==0?t:at(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ol(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==PF)throw n;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(t,i).next(s,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,s)=>{t(e)}))}static reject(e){return new ie(((t,s)=>{s(e)}))}static waitFor(e){return new ie(((t,s)=>{let r=0,i=0,o=!1;e.forEach((a=>{++r,a.next((()=>{++i,o&&i===r&&t()}),(l=>s(l)))})),o=!0,i===r&&t()}))}static or(e){let t=ie.resolve(!1);for(const s of e)t=t.next((r=>r?ie.resolve(r):s()));return t}static forEach(e,t){const s=[];return e.forEach(((r,i)=>{s.push(t.call(this,r,i))})),this.waitFor(s)}static mapArray(e,t){return new ie(((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;t(e[c]).next((h=>{o[c]=h,++a,a===i&&s(o)}),(h=>r(h)))}}))}static doWhile(e,t){return new ie(((s,r)=>{const i=()=>{e()===!0?t().next((()=>{i()}),r):s()};i()}))}}function xF(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function al(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ef.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm=-1;function tf(n){return n==null}function rd(n){return n===0&&1/n==-1/0}function kF(n){return typeof n=="number"&&Number.isInteger(n)&&!rd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="";function NF(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=KA(e)),e=DF(n.get(t),e);return KA(e)}function DF(n,e){let t=e;const s=n.length;for(let r=0;r<s;r++){const i=n.charAt(r);switch(i){case"\0":t+="";break;case VI:t+="";break;default:t+=i}}return t}function KA(n){return n+VI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function to(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $I(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,t){this.comparator=e,this.root=t||Bn.EMPTY}insert(e,t){return new zt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bn.BLACK,null,null))}remove(e){return new zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return t+s.left.size;r<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sh(this.root,e,this.comparator,!1)}getReverseIterator(){return new sh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sh(this.root,e,this.comparator,!0)}}class sh{constructor(e,t,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?s(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bn{constructor(e,t,s,r,i){this.key=e,this.value=t,this.color=s??Bn.RED,this.left=r??Bn.EMPTY,this.right=i??Bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,r,i){return new Bn(e??this.key,t??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,s),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Bn.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ue(27949);return e+(this.isRed()?0:1)}}Bn.EMPTY=null,Bn.RED=!0,Bn.BLACK=!1;Bn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue(57766)}get value(){throw Ue(16141)}get color(){throw Ue(16727)}get left(){throw Ue(29726)}get right(){throw Ue(36894)}copy(e,t,s,r,i){return this}insert(e,t,s){return new Bn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.comparator=e,this.data=new zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new JA(this.data.getIterator())}getIteratorFrom(e){return new JA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof In)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new In(this.comparator);return t.data=e,t}}class JA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this.fields=e,e.sort(Vn.comparator)}static empty(){return new Os([])}unionWith(e){let t=new In(Vn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Os(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wa(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new HI("Invalid base64 string: "+i):i}})(e);return new $n(t)}static fromUint8Array(e){const t=(function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i})(e);return new $n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return at(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$n.EMPTY_BYTE_STRING=new $n("");const OF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ki(n){if(bt(!!n,39018),typeof n=="string"){let e=0;const t=OF.exec(n);if(bt(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:rn(n.seconds),nanos:rn(n.nanos)}}function rn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function qi(n){return typeof n=="string"?$n.fromBase64String(n):$n.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI="server_timestamp",QI="__type__",jI="__previous_value__",zI="__local_write_time__";function Um(n){return(n?.mapValue?.fields||{})[QI]?.stringValue===GI}function nf(n){const e=n.mapValue.fields[jI];return Um(e)?nf(e):e}function _c(n){const e=Ki(n.mapValue.fields[zI].timestampValue);return new Ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e,t,s,r,i,o,a,l,c,h){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h}}const id="(default)";class Ec{constructor(e,t){this.projectId=e,this.database=t||id}static empty(){return new Ec("","")}get isDefaultDatabase(){return this.database===id}isEqual(e){return e instanceof Ec&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="__type__",BF="__max__",rh={mapValue:{}},KI="__vector__",od="value";function Ji(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Um(n)?4:FF(n)?9007199254740991:MF(n)?10:11:Ue(28295,{value:n})}function Sr(n,e){if(n===e)return!0;const t=Ji(n);if(t!==Ji(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return _c(n).isEqual(_c(e));case 3:return(function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Ki(r.timestampValue),a=Ki(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,i){return qi(r.bytesValue).isEqual(qi(i.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,i){return rn(r.geoPointValue.latitude)===rn(i.geoPointValue.latitude)&&rn(r.geoPointValue.longitude)===rn(i.geoPointValue.longitude)})(n,e);case 2:return(function(r,i){if("integerValue"in r&&"integerValue"in i)return rn(r.integerValue)===rn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=rn(r.doubleValue),a=rn(i.doubleValue);return o===a?rd(o)===rd(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return Wa(n.arrayValue.values||[],e.arrayValue.values||[],Sr);case 10:case 11:return(function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(qA(o)!==qA(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Sr(o[l],a[l])))return!1;return!0})(n,e);default:return Ue(52216,{left:n})}}function bc(n,e){return(n.values||[]).find((t=>Sr(t,e)))!==void 0}function Ka(n,e){if(n===e)return 0;const t=Ji(n),s=Ji(e);if(t!==s)return at(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return at(n.booleanValue,e.booleanValue);case 2:return(function(i,o){const a=rn(i.integerValue||i.doubleValue),l=rn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(n,e);case 3:return YA(n.timestampValue,e.timestampValue);case 4:return YA(_c(n),_c(e));case 5:return vg(n.stringValue,e.stringValue);case 6:return(function(i,o){const a=qi(i),l=qi(o);return a.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=at(a[c],l[c]);if(h!==0)return h}return at(a.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(i,o){const a=at(rn(i.latitude),rn(o.latitude));return a!==0?a:at(rn(i.longitude),rn(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return XA(n.arrayValue,e.arrayValue);case 10:return(function(i,o){const a=i.fields||{},l=o.fields||{},c=a[od]?.arrayValue,h=l[od]?.arrayValue,f=at(c?.values?.length||0,h?.values?.length||0);return f!==0?f:XA(c,h)})(n.mapValue,e.mapValue);case 11:return(function(i,o){if(i===rh.mapValue&&o===rh.mapValue)return 0;if(i===rh.mapValue)return 1;if(o===rh.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=vg(l[f],h[f]);if(p!==0)return p;const m=Ka(a[l[f]],c[h[f]]);if(m!==0)return m}return at(l.length,h.length)})(n.mapValue,e.mapValue);default:throw Ue(23264,{he:t})}}function YA(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return at(n,e);const t=Ki(n),s=Ki(e),r=at(t.seconds,s.seconds);return r!==0?r:at(t.nanos,s.nanos)}function XA(n,e){const t=n.values||[],s=e.values||[];for(let r=0;r<t.length&&r<s.length;++r){const i=Ka(t[r],s[r]);if(i)return i}return at(t.length,s.length)}function qa(n){return Ag(n)}function Ag(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Ki(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return qi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Le.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",r=!0;for(const i of t.values||[])r?r=!1:s+=",",s+=Ag(i);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${Ag(t.fields[o])}`;return r+"}"})(n.mapValue):Ue(61005,{value:n})}function Ih(n){switch(Ji(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=nf(n);return e?16+Ih(e):16;case 5:return 2*n.stringValue.length;case 6:return qi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,i)=>r+Ih(i)),0)})(n.arrayValue);case 10:case 11:return(function(s){let r=0;return to(s.fields,((i,o)=>{r+=i.length+Ih(o)})),r})(n.mapValue);default:throw Ue(13486,{value:n})}}function ZA(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function wg(n){return!!n&&"integerValue"in n}function Vm(n){return!!n&&"arrayValue"in n}function ew(n){return!!n&&"nullValue"in n}function tw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ch(n){return!!n&&"mapValue"in n}function MF(n){return(n?.mapValue?.fields||{})[WI]?.stringValue===KI}function ql(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return to(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=ql(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ql(n.arrayValue.values[t]);return e}return{...n}}function FF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===BF}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this.value=e}static empty(){return new Es({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Ch(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ql(t)}setAll(e){let t=Vn.emptyPath(),s={},r=[];e.forEach(((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,s,r),s={},r=[],t=a.popLast()}o?s[a.lastSegment()]=ql(o):r.push(a.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,s,r)}delete(e){const t=this.field(e.popLast());Ch(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=t.mapValue.fields[e.get(s)];Ch(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,s){to(t,((r,i)=>e[r]=i));for(const r of s)delete e[r]}clone(){return new Es(ql(this.value))}}function qI(n){const e=[];return to(n.fields,((t,s)=>{const r=new Vn([t]);if(Ch(s)){const i=qI(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)})),new Os(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,t,s,r,i,o,a){this.key=e,this.documentType=t,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new qn(e,0,je.min(),je.min(),je.min(),Es.empty(),0)}static newFoundDocument(e,t,s,r){return new qn(e,1,t,je.min(),s,r,0)}static newNoDocument(e,t){return new qn(e,2,t,je.min(),je.min(),Es.empty(),0)}static newUnknownDocument(e,t){return new qn(e,3,t,je.min(),je.min(),Es.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Es.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Es.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,t){this.position=e,this.inclusive=t}}function nw(n,e,t){let s=0;for(let r=0;r<n.position.length;r++){const i=e[r],o=n.position[r];if(i.field.isKeyField()?s=Le.comparator(Le.fromName(o.referenceValue),t.key):s=Ka(o,t.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function sw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Sr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,t="asc"){this.field=e,this.dir=t}}function UF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{}class yn extends JI{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new $F(e,t,s):t==="array-contains"?new QF(e,s):t==="in"?new jF(e,s):t==="not-in"?new zF(e,s):t==="array-contains-any"?new WF(e,s):new yn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new HF(e,s):new GF(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ka(t,this.value)):t!==null&&Ji(this.value)===Ji(t)&&this.matchesComparison(Ka(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends JI{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new rr(e,t)}matches(e){return YI(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function YI(n){return n.op==="and"}function XI(n){return VF(n)&&YI(n)}function VF(n){for(const e of n.filters)if(e instanceof rr)return!1;return!0}function _g(n){if(n instanceof yn)return n.field.canonicalString()+n.op.toString()+qa(n.value);if(XI(n))return n.filters.map((e=>_g(e))).join(",");{const e=n.filters.map((t=>_g(t))).join(",");return`${n.op}(${e})`}}function ZI(n,e){return n instanceof yn?(function(s,r){return r instanceof yn&&s.op===r.op&&s.field.isEqual(r.field)&&Sr(s.value,r.value)})(n,e):n instanceof rr?(function(s,r){return r instanceof rr&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((i,o,a)=>i&&ZI(o,r.filters[a])),!0):!1})(n,e):void Ue(19439)}function eC(n){return n instanceof yn?(function(t){return`${t.field.canonicalString()} ${t.op} ${qa(t.value)}`})(n):n instanceof rr?(function(t){return t.op.toString()+" {"+t.getFilters().map(eC).join(" ,")+"}"})(n):"Filter"}class $F extends yn{constructor(e,t,s){super(e,t,s),this.key=Le.fromName(s.referenceValue)}matches(e){const t=Le.comparator(e.key,this.key);return this.matchesComparison(t)}}class HF extends yn{constructor(e,t){super(e,"in",t),this.keys=tC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class GF extends yn{constructor(e,t){super(e,"not-in",t),this.keys=tC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function tC(n,e){return(e.arrayValue?.values||[]).map((t=>Le.fromName(t.referenceValue)))}class QF extends yn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vm(t)&&bc(t.arrayValue,this.value)}}class jF extends yn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&bc(this.value.arrayValue,t)}}class zF extends yn{constructor(e,t){super(e,"not-in",t)}matches(e){if(bc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!bc(this.value.arrayValue,t)}}class WF extends yn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>bc(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e,t=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function rw(n,e=null,t=[],s=[],r=null,i=null,o=null){return new KF(n,e,t,s,r,i,o)}function $m(n){const e=qe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>_g(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(i){return i.field.canonicalString()+i.dir})(s))).join(","),tf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>qa(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>qa(s))).join(",")),e.Te=t}return e.Te}function Hm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!UF(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ZI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!sw(n.startAt,e.startAt)&&sw(n.endAt,e.endAt)}function Eg(n){return Le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,t=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function qF(n,e,t,s,r,i,o,a){return new Qc(n,e,t,s,r,i,o,a)}function Gm(n){return new Qc(n)}function iw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function nC(n){return n.collectionGroup!==null}function Jl(n){const e=qe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new In(Vn.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((c=>{c.isInequality()&&(a=a.add(c.field))}))})),a})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new ld(i,s))})),t.has(Vn.keyField().canonicalString())||e.Ie.push(new ld(Vn.keyField(),s))}return e.Ie}function wr(n){const e=qe(n);return e.Ee||(e.Ee=JF(e,Jl(n))),e.Ee}function JF(n,e){if(n.limitType==="F")return rw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const i=r.dir==="desc"?"asc":"desc";return new ld(r.field,i)}));const t=n.endAt?new ad(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new ad(n.startAt.position,n.startAt.inclusive):null;return rw(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function bg(n,e){const t=n.filters.concat([e]);return new Qc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ig(n,e,t){return new Qc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sf(n,e){return Hm(wr(n),wr(e))&&n.limitType===e.limitType}function sC(n){return`${$m(wr(n))}|lt:${n.limitType}`}function ua(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((r=>eC(r))).join(", ")}]`),tf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((r=>qa(r))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((r=>qa(r))).join(",")),`Target(${s})`})(wr(n))}; limitType=${n.limitType})`}function rf(n,e){return e.isFoundDocument()&&(function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):Le.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)})(n,e)&&(function(s,r){for(const i of Jl(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0})(n,e)&&(function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0})(n,e)&&(function(s,r){return!(s.startAt&&!(function(o,a,l){const c=nw(o,a,l);return o.inclusive?c<=0:c<0})(s.startAt,Jl(s),r)||s.endAt&&!(function(o,a,l){const c=nw(o,a,l);return o.inclusive?c>=0:c>0})(s.endAt,Jl(s),r))})(n,e)}function YF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rC(n){return(e,t)=>{let s=!1;for(const r of Jl(n)){const i=XF(r,e,t);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function XF(n,e,t){const s=n.field.isKeyField()?Le.comparator(e.key,t.key):(function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Ka(l,c):Ue(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ue(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[t]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){to(this.inner,((t,s)=>{for(const[r,i]of s)e(r,i)}))}isEmpty(){return $I(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF=new zt(Le.comparator);function li(){return ZF}const iC=new zt(Le.comparator);function Nl(...n){let e=iC;for(const t of n)e=e.insert(t.key,t);return e}function oC(n){let e=iC;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function So(){return Yl()}function aC(){return Yl()}function Yl(){return new qo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const eU=new zt(Le.comparator),tU=new In(Le.comparator);function lt(...n){let e=tU;for(const t of n)e=e.add(t);return e}const nU=new In(at);function sU(){return nU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rd(e)?"-0":e}}function lC(n){return{integerValue:""+n}}function rU(n,e){return kF(e)?lC(e):Qm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(){this._=void 0}}function iU(n,e,t){return n instanceof cd?(function(r,i){const o={fields:{[QI]:{stringValue:GI},[zI]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Um(i)&&(i=nf(i)),i&&(o.fields[jI]=i),{mapValue:o}})(t,e):n instanceof Ic?uC(n,e):n instanceof Cc?hC(n,e):(function(r,i){const o=cC(r,i),a=ow(o)+ow(r.Ae);return wg(o)&&wg(r.Ae)?lC(a):Qm(r.serializer,a)})(n,e)}function oU(n,e,t){return n instanceof Ic?uC(n,e):n instanceof Cc?hC(n,e):t}function cC(n,e){return n instanceof ud?(function(s){return wg(s)||(function(i){return!!i&&"doubleValue"in i})(s)})(e)?e:{integerValue:0}:null}class cd extends of{}class Ic extends of{constructor(e){super(),this.elements=e}}function uC(n,e){const t=dC(e);for(const s of n.elements)t.some((r=>Sr(r,s)))||t.push(s);return{arrayValue:{values:t}}}class Cc extends of{constructor(e){super(),this.elements=e}}function hC(n,e){let t=dC(e);for(const s of n.elements)t=t.filter((r=>!Sr(r,s)));return{arrayValue:{values:t}}}class ud extends of{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ow(n){return rn(n.integerValue||n.doubleValue)}function dC(n){return Vm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function aU(n,e){return n.field.isEqual(e.field)&&(function(s,r){return s instanceof Ic&&r instanceof Ic||s instanceof Cc&&r instanceof Cc?Wa(s.elements,r.elements,Sr):s instanceof ud&&r instanceof ud?Sr(s.Ae,r.Ae):s instanceof cd&&r instanceof cd})(n.transform,e.transform)}class lU{constructor(e,t){this.version=e,this.transformResults=t}}class _r{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Th(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class af{}function fC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new gC(n.key,_r.none()):new jc(n.key,n.data,_r.none());{const t=n.data,s=Es.empty();let r=new In(Vn.comparator);for(let i of e.fields)if(!r.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new no(n.key,s,new Os(r.toArray()),_r.none())}}function cU(n,e,t){n instanceof jc?(function(r,i,o){const a=r.value.clone(),l=lw(r.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof no?(function(r,i,o){if(!Th(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=lw(r.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(pC(r)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(n,e,t):(function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Xl(n,e,t,s){return n instanceof jc?(function(i,o,a,l){if(!Th(i.precondition,o))return a;const c=i.value.clone(),h=cw(i.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null})(n,e,t,s):n instanceof no?(function(i,o,a,l){if(!Th(i.precondition,o))return a;const c=cw(i.fieldTransforms,l,o),h=o.data;return h.setAll(pC(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((f=>f.field)))})(n,e,t,s):(function(i,o,a){return Th(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function uU(n,e){let t=null;for(const s of n.fieldTransforms){const r=e.data.field(s.field),i=cC(s.transform,r||null);i!=null&&(t===null&&(t=Es.empty()),t.set(s.field,i))}return t||null}function aw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Wa(s,r,((i,o)=>aU(i,o)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class jc extends af{constructor(e,t,s,r=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class no extends af{constructor(e,t,s,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function pC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function lw(n,e,t){const s=new Map;bt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const i=n[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,oU(o,a,t[r]))}return s}function cw(n,e,t){const s=new Map;for(const r of n){const i=r.transform,o=t.data.field(r.field);s.set(r.field,iU(i,o,e))}return s}class gC extends af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hU extends af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e,t,s,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&cU(i,e,s[r])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Xl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Xl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=aC();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(r.key)?null:a;const l=fC(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(je.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),lt())}isEqual(e){return this.batchId===e.batchId&&Wa(this.mutations,e.mutations,((t,s)=>aw(t,s)))&&Wa(this.baseMutations,e.baseMutations,((t,s)=>aw(t,s)))}}class jm{constructor(e,t,s,r){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=r}static from(e,t,s){bt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return eU})();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new jm(e,t,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn,dt;function gU(n){switch(n){case re.OK:return Ue(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ue(15467,{code:n})}}function mC(n){if(n===void 0)return oi("GRPC error has no .code"),re.UNKNOWN;switch(n){case gn.OK:return re.OK;case gn.CANCELLED:return re.CANCELLED;case gn.UNKNOWN:return re.UNKNOWN;case gn.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case gn.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case gn.INTERNAL:return re.INTERNAL;case gn.UNAVAILABLE:return re.UNAVAILABLE;case gn.UNAUTHENTICATED:return re.UNAUTHENTICATED;case gn.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case gn.NOT_FOUND:return re.NOT_FOUND;case gn.ALREADY_EXISTS:return re.ALREADY_EXISTS;case gn.PERMISSION_DENIED:return re.PERMISSION_DENIED;case gn.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case gn.ABORTED:return re.ABORTED;case gn.OUT_OF_RANGE:return re.OUT_OF_RANGE;case gn.UNIMPLEMENTED:return re.UNIMPLEMENTED;case gn.DATA_LOSS:return re.DATA_LOSS;default:return Ue(39323,{code:n})}}(dt=gn||(gn={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU=new Ui([4294967295,4294967295],0);function uw(n){const e=mU().encode(n),t=new xI;return t.update(e),new Uint8Array(t.digest())}function hw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ui([t,s],0),new Ui([r,i],0)]}class zm{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Dl(`Invalid padding: ${t}`);if(s<0)throw new Dl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Dl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Dl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ui.fromNumber(this.ge)}ye(e,t,s){let r=e.add(t.multiply(Ui.fromNumber(s)));return r.compare(yU)===1&&(r=new Ui([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=uw(e),[s,r]=hw(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,t,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new zm(i,r,t);return s.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const t=uw(e),[s,r]=hw(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,t,s,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const r=new Map;return r.set(e,zc.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new lf(je.min(),r,new zt(at),li(),lt())}}class zc{constructor(e,t,s,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new zc(s,t,lt(),lt(),lt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,t,s,r){this.be=e,this.removedTargetIds=t,this.key=s,this.De=r}}class yC{constructor(e,t){this.targetId=e,this.Ce=t}}class vC{constructor(e,t,s=$n.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=r}}class dw{constructor(){this.ve=0,this.Fe=fw(),this.Me=$n.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=lt(),t=lt(),s=lt();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:s=s.add(r);break;default:Ue(38017,{changeType:i})}})),new zc(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=fw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,bt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class vU{constructor(e){this.Ge=e,this.ze=new Map,this.je=li(),this.Je=ih(),this.He=ih(),this.Ye=new zt(at)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ue(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,s=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(Eg(i))if(s===0){const o=new Le(i.path);this.et(t,o,qn.newNoDocument(o,je.min()))}else bt(s===1,20013,{expectedCount:s});else{const o=this._t(t);if(o!==s){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,c)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=t;let o,a;try{o=qi(s).toUint8Array()}catch(l){if(l instanceof HI)return za("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new zm(o,r,i)}catch(l){return za(l instanceof Dl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let r=0;return s.forEach((i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(t,i,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Eg(a.target)){const l=new Le(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,qn.newNoDocument(l,e))}i.Be&&(t.set(o,i.ke()),i.qe())}}));let s=lt();this.He.forEach(((i,o)=>{let a=!0;o.forEachWhile((l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(s=s.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const r=new lf(e,t,this.Ye,this.je,s);return this.je=li(),this.Je=ih(),this.He=ih(),this.Ye=new zt(at),r}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new dw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new In(at),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new In(at),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||_e("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new dw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ih(){return new zt(Le.comparator)}function fw(){return new zt(Le.comparator)}const AU={asc:"ASCENDING",desc:"DESCENDING"},wU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_U={and:"AND",or:"OR"};class EU{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cg(n,e){return n.useProto3Json||tf(e)?e:{value:e}}function hd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function bU(n,e){return hd(n,e.toTimestamp())}function Er(n){return bt(!!n,49232),je.fromTimestamp((function(t){const s=Ki(t);return new Ut(s.seconds,s.nanos)})(n))}function Wm(n,e){return Tg(n,e).canonicalString()}function Tg(n,e){const t=(function(r){return new Lt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function wC(n){const e=Lt.fromString(n);return bt(CC(e),10190,{key:e.toString()}),e}function Sg(n,e){return Wm(n.databaseId,e.path)}function gp(n,e){const t=wC(e);if(t.get(1)!==n.databaseId.projectId)throw new ve(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ve(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Le(EC(t))}function _C(n,e){return Wm(n.databaseId,e)}function IU(n){const e=wC(n);return e.length===4?Lt.emptyPath():EC(e)}function Pg(n){return new Lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function EC(n){return bt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function pw(n,e,t){return{name:Sg(n,e),fields:t.value.mapValue.fields}}function CU(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ue(39313,{state:c})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=(function(c,h){return c.useProto3Json?(bt(h===void 0||typeof h=="string",58123),$n.fromBase64String(h||"")):(bt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),$n.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(c){const h=c.code===void 0?re.UNKNOWN:mC(c.code);return new ve(h,c.message||"")})(o);t=new vC(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=gp(n,s.document.name),i=Er(s.document.updateTime),o=s.document.createTime?Er(s.document.createTime):je.min(),a=new Es({mapValue:{fields:s.document.fields}}),l=qn.newFoundDocument(r,i,o,a),c=s.targetIds||[],h=s.removedTargetIds||[];t=new Sh(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=gp(n,s.document),i=s.readTime?Er(s.readTime):je.min(),o=qn.newNoDocument(r,i),a=s.removedTargetIds||[];t=new Sh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=gp(n,s.document),i=s.removedTargetIds||[];t=new Sh([],i,r,null)}else{if(!("filter"in e))return Ue(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new pU(r,i),a=s.targetId;t=new yC(a,o)}}return t}function TU(n,e){let t;if(e instanceof jc)t={update:pw(n,e.key,e.value)};else if(e instanceof gC)t={delete:Sg(n,e.key)};else if(e instanceof no)t={update:pw(n,e.key,e.data),updateMask:LU(e.fieldMask)};else{if(!(e instanceof hU))return Ue(16599,{Vt:e.type});t={verify:Sg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(i,o){const a=o.transform;if(a instanceof cd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ic)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Cc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ud)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Ue(20930,{transform:o.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(r,i){return i.updateTime!==void 0?{updateTime:bU(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ue(27497)})(n,e.precondition)),t}function SU(n,e){return n&&n.length>0?(bt(e!==void 0,14353),n.map((t=>(function(r,i){let o=r.updateTime?Er(r.updateTime):Er(i);return o.isEqual(je.min())&&(o=Er(i)),new lU(o,r.transformResults||[])})(t,e)))):[]}function PU(n,e){return{documents:[_C(n,e.path)]}}function RU(n,e){const t={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=_C(n,r);const i=(function(c){if(c.length!==0)return IC(rr.create(c,"and"))})(e.filters);i&&(t.structuredQuery.where=i);const o=(function(c){if(c.length!==0)return c.map((h=>(function(p){return{field:ha(p.field),direction:NU(p.dir)}})(h)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=Cg(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(c){return{before:c.inclusive,values:c.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(c){return{before:!c.inclusive,values:c.position}})(e.endAt)),{ft:t,parent:r}}function xU(n){let e=IU(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let r=null;if(s>0){bt(s===1,65062);const h=t.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];t.where&&(i=(function(f){const p=bC(f);return p instanceof rr&&XI(p)?p.getFilters():[p]})(t.where));let o=[];t.orderBy&&(o=(function(f){return f.map((p=>(function(_){return new ld(da(_.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(p)))})(t.orderBy));let a=null;t.limit&&(a=(function(f){let p;return p=typeof f=="object"?f.value:f,tf(p)?null:p})(t.limit));let l=null;t.startAt&&(l=(function(f){const p=!!f.before,m=f.values||[];return new ad(m,p)})(t.startAt));let c=null;return t.endAt&&(c=(function(f){const p=!f.before,m=f.values||[];return new ad(m,p)})(t.endAt)),qF(e,r,o,i,a,"F",l,c)}function kU(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function bC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=da(t.unaryFilter.field);return yn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=da(t.unaryFilter.field);return yn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=da(t.unaryFilter.field);return yn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=da(t.unaryFilter.field);return yn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ue(61313);default:return Ue(60726)}})(n):n.fieldFilter!==void 0?(function(t){return yn.create(da(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ue(58110);default:return Ue(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return rr.create(t.compositeFilter.filters.map((s=>bC(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ue(1026)}})(t.compositeFilter.op))})(n):Ue(30097,{filter:n})}function NU(n){return AU[n]}function DU(n){return wU[n]}function OU(n){return _U[n]}function ha(n){return{fieldPath:n.canonicalString()}}function da(n){return Vn.fromServerFormat(n.fieldPath)}function IC(n){return n instanceof yn?(function(t){if(t.op==="=="){if(tw(t.value))return{unaryFilter:{field:ha(t.field),op:"IS_NAN"}};if(ew(t.value))return{unaryFilter:{field:ha(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(tw(t.value))return{unaryFilter:{field:ha(t.field),op:"IS_NOT_NAN"}};if(ew(t.value))return{unaryFilter:{field:ha(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ha(t.field),op:DU(t.op),value:t.value}}})(n):n instanceof rr?(function(t){const s=t.getFilters().map((r=>IC(r)));return s.length===1?s[0]:{compositeFilter:{op:OU(t.op),filters:s}}})(n):Ue(54877,{filter:n})}function LU(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function CC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,t,s,r,i=je.min(),o=je.min(),a=$n.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Oi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e){this.yt=e}}function MU(n){const e=xU({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ig(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(){this.Cn=new UU}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Wi.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Wi.min())}updateCollectionGroup(e,t,s){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class UU{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t]||new In(Lt.comparator),i=!r.has(s);return this.index[t]=r.add(s),i}has(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t];return r&&r.has(s)}getEntries(e){return(this.index[e]||new In(Lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TC=41943040;class As{static withCacheSize(e){return new As(e,As.DEFAULT_COLLECTION_PERCENTILE,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */As.DEFAULT_COLLECTION_PERCENTILE=10,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,As.DEFAULT=new As(TC,As.DEFAULT_COLLECTION_PERCENTILE,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),As.DISABLED=new As(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ja(0)}static cr(){return new Ja(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw="LruGarbageCollector",VU=1048576;function yw([n,e],[t,s]){const r=at(n,t);return r===0?at(e,s):r}class $U{constructor(e){this.Ir=e,this.buffer=new In(yw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();yw(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class HU{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){_e(mw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){al(t)?_e(mw,"Ignoring IndexedDB error during garbage collection: ",t):await ol(t)}await this.Vr(3e5)}))}}class GU{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(ef.ce);const s=new $U(t);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(gw)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,r,i,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,o=Date.now(),this.nthSequenceNumber(e,r)))).next((f=>(s=f,a=Date.now(),this.removeTargets(e,s,t)))).next((f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,s)))).next((f=>(c=Date.now(),ca()<=ot.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:f}))))}}function QU(n,e){return new GU(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(){this.changes=new qo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ie.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(e,t,s,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(s!==null&&Xl(s.mutation,r,Os.empty(),Ut.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,lt()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=lt()){const r=So();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,s).next((i=>{let o=Nl();return i.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const s=So();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,lt())))}populateOverlays(e,t,s){const r=[];return s.forEach((i=>{t.has(i)||r.push(i)})),this.documentOverlayCache.getOverlays(e,r).next((i=>{i.forEach(((o,a)=>{t.set(o,a)}))}))}computeViews(e,t,s,r){let i=li();const o=Yl(),a=(function(){return Yl()})();return t.forEach(((l,c)=>{const h=s.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof no)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Xl(h.mutation,c,h.mutation.getFieldMask(),Ut.now())):o.set(c.key,Os.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((c,h)=>o.set(c,h))),t.forEach(((c,h)=>a.set(c,new zU(h,o.get(c)??null)))),a)))}recalculateAndSaveOverlays(e,t){const s=Yl();let r=new zt(((o,a)=>o-a)),i=lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const a of o)a.keys().forEach((l=>{const c=t.get(l);if(c===null)return;let h=s.get(l)||Os.empty();h=a.applyToLocalView(c,h),s.set(l,h);const f=(r.get(a.batchId)||lt()).add(l);r=r.insert(a.batchId,f)}))})).next((()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,f=aC();h.forEach((p=>{if(!i.has(p)){const m=fC(t.get(p),s.get(p));m!==null&&f.set(p,m),i=i.add(p)}})),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return ie.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,r){return(function(o){return Le.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,r):this.getDocumentsMatchingCollectionQuery(e,t,s,r)}getNextDocuments(e,t,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,r-i.size):ie.resolve(So());let a=wc,l=i;return o.next((c=>ie.forEach(c,((h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?ie.resolve():this.remoteDocumentCache.getEntry(e,h).next((p=>{l=l.insert(h,p)}))))).next((()=>this.populateOverlays(e,c,i))).next((()=>this.computeViews(e,l,c,lt()))).next((h=>({batchId:a,changes:oC(h)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Le(t)).next((s=>{let r=Nl();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,r){const i=t.collectionGroup;let o=Nl();return this.indexManager.getCollectionParents(e,i).next((a=>ie.forEach(a,(l=>{const c=(function(f,p){return new Qc(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(t,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,s,r).next((h=>{h.forEach(((f,p)=>{o=o.insert(f,p)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,i,r)))).next((o=>{i.forEach(((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,qn.newInvalidDocument(h)))}));let a=Nl();return o.forEach(((l,c)=>{const h=i.get(l);h!==void 0&&Xl(h.mutation,c,Os.empty(),Ut.now()),rf(t,c)&&(a=a.insert(l,c))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Er(r.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:MU(r.bundledQuery),readTime:Er(r.readTime)}})(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(){this.overlays=new zt(Le.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const s=So();return ie.forEach(t,(r=>this.getOverlay(e,r).next((i=>{i!==null&&s.set(r,i)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((r,i)=>{this.St(e,t,i)})),ie.resolve()}removeOverlaysForBatchId(e,t,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(s)),ie.resolve()}getOverlaysForCollection(e,t,s){const r=So(),i=t.length+1,o=new Le(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return ie.resolve(r)}getOverlaysForCollectionGroup(e,t,s,r){let i=new zt(((c,h)=>c-h));const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>s){let h=i.get(c.largestBatchId);h===null&&(h=So(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=So(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((c,h)=>a.set(c,h))),!(a.size()>=r)););return ie.resolve(a)}St(e,t,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new fU(t,s));let i=this.qr.get(t);i===void 0&&(i=lt(),this.qr.set(t,i)),this.qr.set(t,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(){this.sessionToken=$n.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(){this.Qr=new In(kn.$r),this.Ur=new In(kn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new kn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new kn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Le(new Lt([])),s=new kn(t,e),r=new kn(t,e+1),i=[];return this.Ur.forEachInRange([s,r],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Le(new Lt([])),s=new kn(t,e),r=new kn(t,e+1);let i=lt();return this.Ur.forEachInRange([s,r],(o=>{i=i.add(o.key)})),i}containsKey(e){const t=new kn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class kn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Le.comparator(e.key,t.key)||at(e.Yr,t.Yr)}static Kr(e,t){return at(e.Yr,t.Yr)||Le.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new In(kn.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new dU(i,t,s,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new kn(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ie.resolve(o)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,r=this.ei(s),i=r<0?0:r;return ie.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Fm:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new kn(t,0),r=new kn(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],(o=>{const a=this.Xr(o.Yr);i.push(a)})),ie.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new In(at);return t.forEach((r=>{const i=new kn(r,0),o=new kn(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(a=>{s=s.add(a.Yr)}))})),ie.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,r=s.length+1;let i=s;Le.isDocumentKey(i)||(i=i.child(""));const o=new kn(new Le(i),0);let a=new In(at);return this.Zr.forEachWhile((l=>{const c=l.key.path;return!!s.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.Yr)),!0)}),o),ie.resolve(this.ti(a))}ti(e){const t=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){bt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ie.forEach(t.mutations,(r=>{const i=new kn(r.key,t.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new kn(t,0),r=this.Zr.firstAfterOrEqual(s);return ie.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(e){this.ri=e,this.docs=(function(){return new zt(Le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ie.resolve(s?s.document.mutableCopy():qn.newInvalidDocument(t))}getEntries(e,t){let s=li();return t.forEach((r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():qn.newInvalidDocument(r))})),ie.resolve(s)}getDocumentsMatchingQuery(e,t,s,r){let i=li();const o=t.path,a=new Le(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||SF(TF(h),s)<=0||(r.has(h.key)||rf(t,h))&&(i=i.insert(h.key,h.mutableCopy()))}return ie.resolve(i)}getAllFromCollectionGroup(e,t,s,r){Ue(9500)}ii(e,t){return ie.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new ZU(this)}getSize(e){return ie.resolve(this.size)}}class ZU extends jU{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e){this.persistence=e,this.si=new qo((t=>$m(t)),Hm),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.oi=0,this._i=new Km,this.targetCount=0,this.ai=Ja.ur()}forEachTarget(e,t){return this.si.forEach(((s,r)=>t(r))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ja(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,s){let r=0;const i=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=t&&s.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),ie.waitFor(i).next((()=>r))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return ie.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),ie.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((o=>{i.push(r.markPotentiallyOrphaned(e,o))})),ie.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return ie.resolve(s)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,t){this.ui={},this.overlays={},this.ci=new ef(0),this.li=!1,this.li=!0,this.hi=new JU,this.referenceDelegate=e(this),this.Pi=new e4(this),this.indexManager=new FU,this.remoteDocumentCache=(function(r){return new XU(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new BU(t),this.Ii=new KU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qU,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new YU(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){_e("MemoryPersistence","Starting transaction:",e);const r=new t4(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((i=>this.referenceDelegate.di(r).next((()=>i)))).toPromise().then((i=>(r.raiseOnCommittedEvent(),i)))}Ai(e,t){return ie.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class t4 extends RF{constructor(e){super(),this.currentSequenceNumber=e}}class qm{constructor(e){this.persistence=e,this.Ri=new Km,this.Vi=null}static mi(e){return new qm(e)}get fi(){if(this.Vi)return this.Vi;throw Ue(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),ie.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((i=>this.fi.add(i.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(s=>{const r=Le.fromPath(s);return this.gi(e,r).next((i=>{i||t.removeEntry(r,je.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class dd{constructor(e,t){this.persistence=e,this.pi=new qo((s=>NF(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=QU(this,t)}static mi(e,t){return new dd(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((r=>s+r))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return ie.forEach(this.pi,((s,r)=>this.br(e,s,r).next((i=>i?ie.resolve():t(r)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(o=>this.br(e,o,t).next((a=>{a||(s++,i.removeEntry(o,je.min()))})))).next((()=>i.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ih(e.data.value)),t}br(e,t,s){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return ie.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,t,s,r){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=r}static As(e,t){let s=lt(),r=lt();for(const i of t.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Jm(e,t.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return KO()?8:xF(Xn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,r){const i={result:null};return this.ys(e,t).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,t,r,s).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new n4;return this.Ss(e,t,o).next((a=>{if(i.result=a,this.Vs)return this.bs(e,t,o,a.size)}))})).next((()=>i.result))}bs(e,t,s,r){return s.documentReadCount<this.fs?(ca()<=ot.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",ua(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(ca()<=ot.DEBUG&&_e("QueryEngine","Query:",ua(t),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(ca()<=ot.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",ua(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wr(t))):ie.resolve())}ys(e,t){if(iw(t))return ie.resolve(null);let s=wr(t);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=Ig(t,null,"F"),s=wr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((i=>{const o=lt(...i);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,s).next((l=>{const c=this.Ds(t,a);return this.Cs(t,c,o,l.readTime)?this.ys(e,Ig(t,null,"F")):this.vs(e,c,t,l)}))))})))))}ws(e,t,s,r){return iw(t)||r.isEqual(je.min())?ie.resolve(null):this.ps.getDocuments(e,s).next((i=>{const o=this.Ds(t,i);return this.Cs(t,o,s,r)?ie.resolve(null):(ca()<=ot.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ua(t)),this.vs(e,o,t,CF(r,wc)).next((a=>a)))}))}Ds(e,t){let s=new In(rC(e));return t.forEach(((r,i)=>{rf(e,i)&&(s=s.add(i))})),s}Cs(e,t,s,r){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,s){return ca()<=ot.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",ua(t)),this.ps.getDocumentsMatchingQuery(e,t,Wi.min(),s)}vs(e,t,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((i=>(t.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="LocalStore",r4=3e8;class i4{constructor(e,t,s,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new zt(at),this.xs=new qo((i=>$m(i)),Hm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WU(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function o4(n,e,t,s){return new i4(n,e,t,s)}async function PC(n,e){const t=qe(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return t.mutationQueue.getAllMutationBatches(s).next((i=>(r=i,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((i=>{const o=[],a=[];let l=lt();for(const c of r){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(s,l).next((c=>({Ls:c,removedBatchIds:o,addedBatchIds:a})))}))}))}function a4(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),i=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,c,h){const f=c.batch,p=f.keys();let m=ie.resolve();return p.forEach((_=>{m=m.next((()=>h.getEntry(l,_))).next((v=>{const A=c.docVersions.get(_);bt(A!==null,48541),v.version.compareTo(A)<0&&(f.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),h.addEntry(v)))}))})),m.next((()=>a.mutationQueue.removeMutationBatch(l,f)))})(t,s,e,i).next((()=>i.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(a){let l=lt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l})(e)))).next((()=>t.localDocuments.getDocuments(s,r)))}))}function RC(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function l4(n,e){const t=qe(n),s=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const a=[];e.targetChanges.forEach(((h,f)=>{const p=r.get(f);if(!p)return;a.push(t.Pi.removeMatchingKeys(i,h.removedDocuments,f).next((()=>t.Pi.addMatchingKeys(i,h.addedDocuments,f))));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken($n.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,s)),r=r.insert(f,m),(function(v,A,w){return v.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=r4?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0})(p,m,h)&&a.push(t.Pi.updateTargetData(i,m))}));let l=li(),c=lt();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(i,h))})),a.push(c4(i,o,e.documentUpdates).next((h=>{l=h.ks,c=h.qs}))),!s.isEqual(je.min())){const h=t.Pi.getLastRemoteSnapshotVersion(i).next((f=>t.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s)));a.push(h)}return ie.waitFor(a).next((()=>o.apply(i))).next((()=>t.localDocuments.getLocalViewOfDocuments(i,l,c))).next((()=>l))})).then((i=>(t.Ms=r,i)))}function c4(n,e,t){let s=lt(),r=lt();return t.forEach((i=>s=s.add(i))),e.getEntries(n,s).next((i=>{let o=li();return t.forEach(((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(je.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):_e(Ym,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)})),{ks:o,qs:r}}))}function u4(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Fm),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function h4(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return t.Pi.getTargetData(s,e).next((i=>i?(r=i,ie.resolve(r)):t.Pi.allocateTargetId(s).next((o=>(r=new Oi(e,o,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=t.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Rg(n,e,t){const s=qe(n),r=s.Ms.get(e),i=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",i,(o=>s.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!al(o))throw o;_e(Ym,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function vw(n,e,t){const s=qe(n);let r=je.min(),i=lt();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,c,h){const f=qe(l),p=f.xs.get(h);return p!==void 0?ie.resolve(f.Ms.get(p)):f.Pi.getTargetData(c,h)})(s,o,wr(e)).next((a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{i=l}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,e,t?r:je.min(),t?i:lt()))).next((a=>(d4(s,YF(e),a),{documents:a,Qs:i})))))}function d4(n,e,t){let s=n.Os.get(e)||je.min();t.forEach(((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)})),n.Os.set(e,s)}class Aw{constructor(){this.activeTargetIds=sU()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class f4{constructor(){this.Mo=new Aw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Aw,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="ConnectivityMonitor";class _w{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){_e(ww,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){_e(ww,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oh=null;function xg(){return oh===null?oh=(function(){return 268435456+Math.round(2147483648*Math.random())})():oh++,"0x"+oh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="RestConnection",g4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class m4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===id?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,t,s,r,i){const o=xg(),a=this.zo(e,t.toUriEncodedString());_e(mp,`Sending RPC '${e}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,i);const{host:c}=new URL(a),h=nl(c);return this.Jo(e,a,l,s,h).then((f=>(_e(mp,`Received RPC '${e}' ${o}: `,f),f)),(f=>{throw za(mp,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",s),f}))}Ho(e,t,s,r,i,o){return this.Go(e,t,s,r,i)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+il})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,i)=>e[i]=r)),s&&s.headers.forEach(((r,i)=>e[i]=r))}zo(e,t){const s=g4[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="WebChannelConnection";class v4 extends m4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,r,i){const o=xg();return new Promise(((a,l)=>{const c=new kI;c.setWithCredentials(!0),c.listenOnce(NI.COMPLETE,(()=>{try{switch(c.getLastErrorCode()){case bh.NO_ERROR:const f=c.getResponseJson();_e(jn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case bh.TIMEOUT:_e(jn,`RPC '${e}' ${o} timed out`),l(new ve(re.DEADLINE_EXCEEDED,"Request time out"));break;case bh.HTTP_ERROR:const p=c.getStatus();if(_e(jn,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=m?.error;if(_&&_.status&&_.message){const v=(function(w){const T=w.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(T)>=0?T:re.UNKNOWN})(_.status);l(new ve(v,_.message))}else l(new ve(re.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new ve(re.UNAVAILABLE,"Connection failed."));break;default:Ue(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{_e(jn,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(r);_e(jn,`RPC '${e}' ${o} sending request:`,r),c.send(t,"POST",h,s,15)}))}T_(e,t,s){const r=xg(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=LI(),a=OI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,s),l.encodeInitMessageHeaders=!0;const h=i.join("");_e(jn,`Creating RPC '${e}' stream ${r}: ${h}`,l);const f=o.createWebChannel(h,l);this.I_(f);let p=!1,m=!1;const _=new y4({Yo:A=>{m?_e(jn,`Not sending because RPC '${e}' stream ${r} is closed:`,A):(p||(_e(jn,`Opening RPC '${e}' stream ${r} transport.`),f.open(),p=!0),_e(jn,`RPC '${e}' stream ${r} sending:`,A),f.send(A))},Zo:()=>f.close()}),v=(A,w,T)=>{A.listen(w,(P=>{try{T(P)}catch(U){setTimeout((()=>{throw U}),0)}}))};return v(f,kl.EventType.OPEN,(()=>{m||(_e(jn,`RPC '${e}' stream ${r} transport opened.`),_.o_())})),v(f,kl.EventType.CLOSE,(()=>{m||(m=!0,_e(jn,`RPC '${e}' stream ${r} transport closed`),_.a_(),this.E_(f))})),v(f,kl.EventType.ERROR,(A=>{m||(m=!0,za(jn,`RPC '${e}' stream ${r} transport errored. Name:`,A.name,"Message:",A.message),_.a_(new ve(re.UNAVAILABLE,"The operation could not be completed")))})),v(f,kl.EventType.MESSAGE,(A=>{if(!m){const w=A.data[0];bt(!!w,16349);const T=w,P=T?.error||T[0]?.error;if(P){_e(jn,`RPC '${e}' stream ${r} received error:`,P);const U=P.status;let W=(function(I){const S=gn[I];if(S!==void 0)return mC(S)})(U),q=P.message;W===void 0&&(W=re.INTERNAL,q="Unknown error status: "+U+" with message "+P.message),m=!0,_.a_(new ve(W,q)),f.close()}else _e(jn,`RPC '${e}' stream ${r} received:`,w),_.u_(w)}})),v(a,DI.STAT_EVENT,(A=>{A.stat===yg.PROXY?_e(jn,`RPC '${e}' stream ${r} detected buffering proxy`):A.stat===yg.NOPROXY&&_e(jn,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{_.__()}),0),_}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function yp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(n){return new EU(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,t,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-s);r>0&&_e("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="PersistentStream";class kC{constructor(e,t,s,r,i,o,a,l){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new xC(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(oi(t.toString()),oi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===t&&this.G_(s,r)}),(s=>{e((()=>{const r=new ve(re.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return _e(Ew,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(_e(Ew,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class A4 extends kC{constructor(e,t,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,r,o),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=CU(this.serializer,e),s=(function(i){if(!("targetChange"in i))return je.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?je.min():o.readTime?Er(o.readTime):je.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Pg(this.serializer),t.addTarget=(function(i,o){let a;const l=o.target;if(a=Eg(l)?{documents:PU(i,l)}:{query:RU(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=AC(i,o.resumeToken);const c=Cg(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(je.min())>0){a.readTime=hd(i,o.snapshotVersion.toTimestamp());const c=Cg(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a})(this.serializer,e);const s=kU(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Pg(this.serializer),t.removeTarget=e,this.q_(t)}}class w4 extends kC{constructor(e,t,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return bt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,bt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){bt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=SU(e.writeResults,e.commitTime),s=Er(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Pg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>TU(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{}class E4 extends _4{constructor(e,t,s,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ve(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,Tg(t,s),r,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ve(re.UNKNOWN,i.toString())}))}Ho(e,t,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,Tg(t,s),r,o,a,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ve(re.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class b4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(oi(t),this.aa=!1):_e("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="RemoteStore";class I4{constructor(e,t,s,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{Jo(this)&&(_e(Ho,"Restarting streams for network reachability change."),await(async function(l){const c=qe(l);c.Ea.add(4),await Wc(c),c.Ra.set("Unknown"),c.Ea.delete(4),await uf(c)})(this))}))})),this.Ra=new b4(s,r)}}async function uf(n){if(Jo(n))for(const e of n.da)await e(!0)}async function Wc(n){for(const e of n.da)await e(!1)}function NC(n,e){const t=qe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ty(t)?ey(t):ll(t).O_()&&Zm(t,e))}function Xm(n,e){const t=qe(n),s=ll(t);t.Ia.delete(e),s.O_()&&DC(t,e),t.Ia.size===0&&(s.O_()?s.L_():Jo(t)&&t.Ra.set("Unknown"))}function Zm(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ll(n).Y_(e)}function DC(n,e){n.Va.Ue(e),ll(n).Z_(e)}function ey(n){n.Va=new vU({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ll(n).start(),n.Ra.ua()}function ty(n){return Jo(n)&&!ll(n).x_()&&n.Ia.size>0}function Jo(n){return qe(n).Ea.size===0}function OC(n){n.Va=void 0}async function C4(n){n.Ra.set("Online")}async function T4(n){n.Ia.forEach(((e,t)=>{Zm(n,e)}))}async function S4(n,e){OC(n),ty(n)?(n.Ra.ha(e),ey(n)):n.Ra.set("Unknown")}async function P4(n,e,t){if(n.Ra.set("Online"),e instanceof vC&&e.state===2&&e.cause)try{await(async function(r,i){const o=i.cause;for(const a of i.targetIds)r.Ia.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ia.delete(a),r.Va.removeTarget(a))})(n,e)}catch(s){_e(Ho,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await fd(n,s)}else if(e instanceof Sh?n.Va.Ze(e):e instanceof yC?n.Va.st(e):n.Va.tt(e),!t.isEqual(je.min()))try{const s=await RC(n.localStore);t.compareTo(s)>=0&&await(function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach(((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(c);h&&i.Ia.set(c,h.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,c)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken($n.EMPTY_BYTE_STRING,h.snapshotVersion)),DC(i,l);const f=new Oi(h.target,l,c,h.sequenceNumber);Zm(i,f)})),i.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(s){_e(Ho,"Failed to raise snapshot:",s),await fd(n,s)}}async function fd(n,e,t){if(!al(e))throw e;n.Ea.add(1),await Wc(n),n.Ra.set("Offline"),t||(t=()=>RC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{_e(Ho,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await uf(n)}))}function LC(n,e){return e().catch((t=>fd(n,t,e)))}async function hf(n){const e=qe(n),t=Yi(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Fm;for(;R4(e);)try{const r=await u4(e.localStore,s);if(r===null){e.Ta.length===0&&t.L_();break}s=r.batchId,x4(e,r)}catch(r){await fd(e,r)}BC(e)&&MC(e)}function R4(n){return Jo(n)&&n.Ta.length<10}function x4(n,e){n.Ta.push(e);const t=Yi(n);t.O_()&&t.X_&&t.ea(e.mutations)}function BC(n){return Jo(n)&&!Yi(n).x_()&&n.Ta.length>0}function MC(n){Yi(n).start()}async function k4(n){Yi(n).ra()}async function N4(n){const e=Yi(n);for(const t of n.Ta)e.ea(t.mutations)}async function D4(n,e,t){const s=n.Ta.shift(),r=jm.from(s,e,t);await LC(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await hf(n)}async function O4(n,e){e&&Yi(n).X_&&await(async function(s,r){if((function(o){return gU(o)&&o!==re.ABORTED})(r.code)){const i=s.Ta.shift();Yi(s).B_(),await LC(s,(()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r))),await hf(s)}})(n,e),BC(n)&&MC(n)}async function bw(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),_e(Ho,"RemoteStore received new credentials");const s=Jo(t);t.Ea.add(3),await Wc(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await uf(t)}async function L4(n,e){const t=qe(n);e?(t.Ea.delete(2),await uf(t)):e||(t.Ea.add(2),await Wc(t),t.Ra.set("Unknown"))}function ll(n){return n.ma||(n.ma=(function(t,s,r){const i=qe(t);return i.sa(),new A4(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(n.datastore,n.asyncQueue,{Xo:C4.bind(null,n),t_:T4.bind(null,n),r_:S4.bind(null,n),H_:P4.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),ty(n)?ey(n):n.Ra.set("Unknown")):(await n.ma.stop(),OC(n))}))),n.ma}function Yi(n){return n.fa||(n.fa=(function(t,s,r){const i=qe(t);return i.sa(),new w4(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:k4.bind(null,n),r_:O4.bind(null,n),ta:N4.bind(null,n),na:D4.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await hf(n)):(await n.fa.stop(),n.Ta.length>0&&(_e(Ho,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,t,s,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,r,i){const o=Date.now()+s,a=new ny(e,t,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sy(n,e){if(oi("AsyncQueue",`${e}: ${n}`),al(n))return new ve(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{static emptySet(e){return new xa(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Le.comparator(t.key,s.key):(t,s)=>Le.comparator(t.key,s.key),this.keyedMap=Nl(),this.sortedSet=new zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new xa;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(){this.ga=new zt(Le.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ue(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Ya{constructor(e,t,s,r,i,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,s,r,i){const o=[];return t.forEach((a=>{o.push({type:0,doc:a})})),new Ya(e,t,xa.emptySet(t),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==s[r].type||!t[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class M4{constructor(){this.queries=Cw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const r=qe(t),i=r.queries;r.queries=Cw(),i.forEach(((o,a)=>{for(const l of a.Sa)l.onError(s)}))})(this,new ve(re.ABORTED,"Firestore shutting down"))}}function Cw(){return new qo((n=>sC(n)),sf)}async function FC(n,e){const t=qe(n);let s=3;const r=e.query;let i=t.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new B4,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await t.onListen(r,!0);break;case 1:i.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){const a=sy(o,`Initialization of query '${ua(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,i),i.Sa.push(e),e.va(t.onlineState),i.wa&&e.Fa(i.wa)&&ry(t)}async function UC(n,e){const t=qe(n),s=e.query;let r=3;const i=t.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function F4(n,e){const t=qe(n);let s=!1;for(const r of e){const i=r.query,o=t.queries.get(i);if(o){for(const a of o.Sa)a.Fa(r)&&(s=!0);o.wa=r}}s&&ry(t)}function U4(n,e,t){const s=qe(n),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(t);s.queries.delete(e)}function ry(n){n.Ca.forEach((e=>{e.next()}))}var kg,Tw;(Tw=kg||(kg={})).Ma="default",Tw.Cache="cache";class VC{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Ya(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ya.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==kg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.key=e}}class HC{constructor(e){this.key=e}}class V4{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=lt(),this.mutatedKeys=lt(),this.eu=rC(e),this.tu=new xa(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new Iw,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((h,f)=>{const p=r.get(h),m=rf(this.query,f)?f:null,_=!!p&&this.mutatedKeys.has(p.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let A=!1;p&&m?p.data.isEqual(m.data)?_!==v&&(s.track({type:3,doc:m}),A=!0):this.su(p,m)||(s.track({type:2,doc:m}),A=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(a=!0)):!p&&m?(s.track({type:0,doc:m}),A=!0):p&&!m&&(s.track({type:1,doc:p}),A=!0,(l||c)&&(a=!0)),A&&(m?(o=o.add(m),i=v?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,f)=>(function(m,_){const v=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue(20277,{Rt:A})}};return v(m)-v(_)})(h.type,f.type)||this.eu(h.doc,f.doc))),this.ou(s),r=r??!1;const a=t&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Ya(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Iw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=lt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new HC(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new $C(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=lt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ya.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const iy="SyncEngine";class $4{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class H4{constructor(e){this.key=e,this.hu=!1}}class G4{constructor(e,t,s,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new qo((a=>sC(a)),sf),this.Iu=new Map,this.Eu=new Set,this.du=new zt(Le.comparator),this.Au=new Map,this.Ru=new Km,this.Vu={},this.mu=new Map,this.fu=Ja.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Q4(n,e,t=!0){const s=KC(n);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await GC(s,e,t,!0),r}async function j4(n,e){const t=KC(n);await GC(t,e,!0,!1)}async function GC(n,e,t,s){const r=await h4(n.localStore,wr(e)),i=r.targetId,o=n.sharedClientState.addLocalQueryTarget(i,t);let a;return s&&(a=await z4(n,e,i,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&NC(n.remoteStore,r),a}async function z4(n,e,t,s,r){n.pu=(f,p,m)=>(async function(v,A,w,T){let P=A.view.ru(w);P.Cs&&(P=await vw(v.localStore,A.query,!1).then((({documents:x})=>A.view.ru(x,P))));const U=T&&T.targetChanges.get(A.targetId),W=T&&T.targetMismatches.get(A.targetId)!=null,q=A.view.applyChanges(P,v.isPrimaryClient,U,W);return Pw(v,A.targetId,q.au),q.snapshot})(n,f,p,m);const i=await vw(n.localStore,e,!0),o=new V4(e,i.Qs),a=o.ru(i.documents),l=zc.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",r),c=o.applyChanges(a,n.isPrimaryClient,l);Pw(n,t,c.au);const h=new $4(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),c.snapshot}async function W4(n,e,t){const s=qe(n),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter((o=>!sf(o,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Rg(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),t&&Xm(s.remoteStore,r.targetId),Ng(s,r.targetId)})).catch(ol)):(Ng(s,r.targetId),await Rg(s.localStore,r.targetId,!0))}async function K4(n,e){const t=qe(n),s=t.Tu.get(e),r=t.Iu.get(s.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Xm(t.remoteStore,s.targetId))}async function q4(n,e,t){const s=n3(n);try{const r=await(function(o,a){const l=qe(o),c=Ut.now(),h=a.reduce(((m,_)=>m.add(_.key)),lt());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",(m=>{let _=li(),v=lt();return l.Ns.getEntries(m,h).next((A=>{_=A,_.forEach(((w,T)=>{T.isValidDocument()||(v=v.add(w))}))})).next((()=>l.localDocuments.getOverlayedDocuments(m,_))).next((A=>{f=A;const w=[];for(const T of a){const P=uU(T,f.get(T.key).overlayedDocument);P!=null&&w.push(new no(T.key,P,qI(P.value.mapValue),_r.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,w,a)})).next((A=>{p=A;const w=A.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(m,A.batchId,w)}))})).then((()=>({batchId:p.batchId,changes:oC(f)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new zt(at)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c})(s,r.batchId,t),await Kc(s,r.changes),await hf(s.remoteStore)}catch(r){const i=sy(r,"Failed to persist write");t.reject(i)}}async function QC(n,e){const t=qe(n);try{const s=await l4(t.localStore,e);e.targetChanges.forEach(((r,i)=>{const o=t.Au.get(i);o&&(bt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?bt(o.hu,14607):r.removedDocuments.size>0&&(bt(o.hu,42227),o.hu=!1))})),await Kc(t,s,e)}catch(s){await ol(s)}}function Sw(n,e,t){const s=qe(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const r=[];s.Tu.forEach(((i,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)})),(function(o,a){const l=qe(o);l.onlineState=a;let c=!1;l.queries.forEach(((h,f)=>{for(const p of f.Sa)p.va(a)&&(c=!0)})),c&&ry(l)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function J4(n,e,t){const s=qe(n);s.sharedClientState.updateQueryState(e,"rejected",t);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new zt(Le.comparator);o=o.insert(i,qn.newNoDocument(i,je.min()));const a=lt().add(i),l=new lf(je.min(),new Map,new zt(at),o,a);await QC(s,l),s.du=s.du.remove(i),s.Au.delete(e),oy(s)}else await Rg(s.localStore,e,!1).then((()=>Ng(s,e,t))).catch(ol)}async function Y4(n,e){const t=qe(n),s=e.batch.batchId;try{const r=await a4(t.localStore,e);zC(t,s,null),jC(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Kc(t,r)}catch(r){await ol(r)}}async function X4(n,e,t){const s=qe(n);try{const r=await(function(o,a){const l=qe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next((f=>(bt(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(c,f)))).next((()=>l.mutationQueue.performConsistencyCheck(c))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h))).next((()=>l.localDocuments.getDocuments(c,h)))}))})(s.localStore,e);zC(s,e,t),jC(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Kc(s,r)}catch(r){await ol(r)}}function jC(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function zC(n,e,t){const s=qe(n);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(t?i.reject(t):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Ng(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||WC(n,s)}))}function WC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Xm(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),oy(n))}function Pw(n,e,t){for(const s of t)s instanceof $C?(n.Ru.addReference(s.key,e),Z4(n,s)):s instanceof HC?(_e(iy,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||WC(n,s.key)):Ue(19791,{wu:s})}function Z4(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(_e(iy,"New document in limbo: "+t),n.Eu.add(s),oy(n))}function oy(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Le(Lt.fromString(e)),s=n.fu.next();n.Au.set(s,new H4(t)),n.du=n.du.insert(t,s),NC(n.remoteStore,new Oi(wr(Gm(t.path)),s,"TargetPurposeLimboResolution",ef.ce))}}async function Kc(n,e,t){const s=qe(n),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((a,l)=>{o.push(s.pu(l,e,t).then((c=>{if((c||t)&&s.isPrimaryClient){const h=c?!c.fromCache:t?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){r.push(c);const h=Jm.As(l.targetId,c);i.push(h)}})))})),await Promise.all(o),s.Pu.H_(r),await(async function(l,c){const h=qe(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>ie.forEach(c,(p=>ie.forEach(p.Es,(m=>h.persistence.referenceDelegate.addReference(f,p.targetId,m))).next((()=>ie.forEach(p.ds,(m=>h.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))))))}catch(f){if(!al(f))throw f;_e(Ym,"Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=h.Ms.get(p),_=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(_);h.Ms=h.Ms.insert(p,v)}}})(s.localStore,i))}async function e3(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){_e(iy,"User change. New user:",e.toKey());const s=await PC(t.localStore,e);t.currentUser=e,(function(i,o){i.mu.forEach((a=>{a.forEach((l=>{l.reject(new ve(re.CANCELLED,o))}))})),i.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Kc(t,s.Ls)}}function t3(n,e){const t=qe(n),s=t.Au.get(e);if(s&&s.hu)return lt().add(s.key);{let r=lt();const i=t.Iu.get(e);if(!i)return r;for(const o of i){const a=t.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function KC(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=QC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=t3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=J4.bind(null,e),e.Pu.H_=F4.bind(null,e.eventManager),e.Pu.yu=U4.bind(null,e.eventManager),e}function n3(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Y4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=X4.bind(null,e),e}class pd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return o4(this.persistence,new s4,e.initialUser,this.serializer)}Cu(e){return new SC(qm.mi,this.serializer)}Du(e){return new f4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pd.provider={build:()=>new pd};class s3 extends pd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){bt(this.persistence.referenceDelegate instanceof dd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new HU(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?As.withCacheSize(this.cacheSizeBytes):As.DEFAULT;return new SC((s=>dd.mi(s,t)),this.serializer)}}class Dg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Sw(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=e3.bind(null,this.syncEngine),await L4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new M4})()}createDatastore(e){const t=cf(e.databaseInfo.databaseId),s=(function(i){return new v4(i)})(e.databaseInfo);return(function(i,o,a,l){return new E4(i,o,a,l)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,r,i,o,a){return new I4(s,r,i,o,a)})(this.localStore,this.datastore,e.asyncQueue,(t=>Sw(this.syncEngine,t,0)),(function(){return _w.v()?new _w:new p4})())}createSyncEngine(e,t){return(function(r,i,o,a,l,c,h){const f=new G4(r,i,o,a,l,c);return h&&(f.gu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=qe(t);_e(Ho,"RemoteStore shutting down."),s.Ea.add(5),await Wc(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Dg.provider={build:()=>new Dg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):oi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi="FirestoreClient";class r3{constructor(e,t,s,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=r,this.user=Wn.UNAUTHENTICATED,this.clientId=Mm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,(async o=>{_e(Xi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(_e(Xi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=sy(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function vp(n,e){n.asyncQueue.verifyOperationInProgress(),_e(Xi,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async r=>{s.isEqual(r)||(await PC(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Rw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await i3(n);_e(Xi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>bw(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,r)=>bw(e.remoteStore,r))),n._onlineComponents=e}async function i3(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){_e(Xi,"Using user provided OfflineComponentProvider");try{await vp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===re.FAILED_PRECONDITION||r.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;za("Error using user provided cache. Falling back to memory cache: "+t),await vp(n,new pd)}}else _e(Xi,"Using default OfflineComponentProvider"),await vp(n,new s3(void 0));return n._offlineComponents}async function JC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(_e(Xi,"Using user provided OnlineComponentProvider"),await Rw(n,n._uninitializedComponentsProvider._online)):(_e(Xi,"Using default OnlineComponentProvider"),await Rw(n,new Dg))),n._onlineComponents}function o3(n){return JC(n).then((e=>e.syncEngine))}async function YC(n){const e=await JC(n),t=e.eventManager;return t.onListen=Q4.bind(null,e.syncEngine),t.onUnlisten=W4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=j4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=K4.bind(null,e.syncEngine),t}function a3(n,e,t={}){const s=new Jr;return n.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,l,c){const h=new qC({next:p=>{h.Nu(),o.enqueueAndForget((()=>UC(i,f)));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new ve(re.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new ve(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new VC(Gm(a.path),h,{includeMetadataChanges:!0,qa:!0});return FC(i,f)})(await YC(n),n.asyncQueue,e,t,s))),s.promise}function l3(n,e,t={}){const s=new Jr;return n.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,l,c){const h=new qC({next:p=>{h.Nu(),o.enqueueAndForget((()=>UC(i,f))),p.fromCache&&l.source==="server"?c.reject(new ve(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new VC(a,h,{includeMetadataChanges:!0,qa:!0});return FC(i,f)})(await YC(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="firestore.googleapis.com",kw=!0;class Nw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZC,this.ssl=kw}else this.host=e.host,this.ssl=e.ssl??kw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VU)throw new ve(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XC(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ve(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ve(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ve(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class df{constructor(e,t,s,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new pF;switch(s.type){case"firstParty":return new vF(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ve(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=xw.get(t);s&&(_e("ComponentProvider","Removing Datastore"),xw.delete(t),s.terminate())})(this),Promise.resolve()}}function c3(n,e,t,s={}){n=ai(n,df);const r=nl(e),i=n._getSettings(),o={...i,emulatorOptions:n._getEmulatorOptions()},a=`${e}:${t}`;r&&(V1(`https://${a}`),$1("Firestore",!0)),i.host!==ZC&&i.host!==a&&za("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:r,emulatorOptions:s};if(!zi(l,o)&&(n._setSettings(l),s.mockUserToken)){let c,h;if(typeof s.mockUserToken=="string")c=s.mockUserToken,h=Wn.MOCK_USER;else{c=VO(s.mockUserToken,n._app?.options.projectId);const f=s.mockUserToken.sub||s.mockUserToken.user_id;if(!f)throw new ve(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Wn(f)}n._authCredentials=new gF(new MI(c,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new cl(this.firestore,e,this._query)}}class ln{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}toJSON(){return{type:ln._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Gc(t,ln._jsonSchema))return new ln(e,s||null,new Le(Lt.fromString(t.referencePath)))}}ln._jsonSchemaVersion="firestore/documentReference/1.0",ln._jsonSchema={type:vn("string",ln._jsonSchemaVersion),referencePath:vn("string")};class Vi extends cl{constructor(e,t,s){super(e,t,Gm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new Le(e))}withConverter(e){return new Vi(this.firestore,e,this._path)}}function u3(n,e,...t){if(n=An(n),FI("collection","path",e),n instanceof df){const s=Lt.fromString(e,...t);return jA(s),new Vi(n,null,s)}{if(!(n instanceof ln||n instanceof Vi))throw new ve(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Lt.fromString(e,...t));return jA(s),new Vi(n.firestore,null,s)}}function Do(n,e,...t){if(n=An(n),arguments.length===1&&(e=Mm.newId()),FI("doc","path",e),n instanceof df){const s=Lt.fromString(e,...t);return QA(s),new ln(n,null,new Le(s))}{if(!(n instanceof ln||n instanceof Vi))throw new ve(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Lt.fromString(e,...t));return QA(s),new ln(n.firestore,n instanceof Vi?n.converter:null,new Le(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="AsyncQueue";class Ow{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new xC(this,"async_queue_retry"),this._c=()=>{const s=yp();s&&_e(Dw,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=yp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=yp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Jr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!al(e))throw e;_e(Dw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,oi("INTERNAL UNHANDLED ERROR: ",Lw(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=ny.createAndSchedule(this,e,t,s,(i=>this.hc(i)));return this.tc.push(r),r}uc(){this.nc&&Ue(47125,{Pc:Lw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Lw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class qc extends df{constructor(e,t,s,r){super(e,t,s,r),this.type="firestore",this._queue=new Ow,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ow(e),this._firestoreClient=void 0,await e}}}function h3(n,e){const t=typeof n=="object"?n:yc(),s=typeof n=="string"?n:id,r=Ko(t,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=FO("firestore");i&&c3(r,...i)}return r}function ay(n){if(n._terminated)throw new ve(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||d3(n),n._firestoreClient}function d3(n){const e=n._freezeSettings(),t=(function(r,i,o,a){return new LF(r,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,XC(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new r3(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Us($n.fromBase64String(e))}catch(t){throw new ve(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Us($n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Us._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Gc(e,Us._jsonSchema))return Us.fromBase64String(e.bytes)}}Us._jsonSchemaVersion="firestore/bytes/1.0",Us._jsonSchema={type:vn("string",Us._jsonSchemaVersion),bytes:vn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return at(this._lat,e._lat)||at(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:br._jsonSchemaVersion}}static fromJSON(e){if(Gc(e,br._jsonSchema))return new br(e.latitude,e.longitude)}}br._jsonSchemaVersion="firestore/geoPoint/1.0",br._jsonSchema={type:vn("string",br._jsonSchemaVersion),latitude:vn("number"),longitude:vn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ir._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Gc(e,Ir._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ir(e.vectorValues);throw new ve(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ir._jsonSchemaVersion="firestore/vectorValue/1.0",Ir._jsonSchema={type:vn("string",Ir._jsonSchemaVersion),vectorValues:vn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3=/^__.*__$/;class p3{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new no(e,this.data,this.fieldMask,t,this.fieldTransforms):new jc(e,this.data,t,this.fieldTransforms)}}class eT{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new no(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue(40011,{Ac:n})}}class cy{constructor(e,t,s,r,i,o){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new cy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return gd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(tT(this.Ac)&&f3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class g3{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||cf(e)}Cc(e,t,s,r=!1){return new cy({Ac:e,methodName:t,Dc:s,path:Vn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uy(n){const e=n._freezeSettings(),t=cf(n._databaseId);return new g3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function m3(n,e,t,s,r,i={}){const o=n.Cc(i.merge||i.mergeFields?2:0,e,t,r);hy("Data must be an object, but it was:",o,s);const a=nT(s,o);let l,c;if(i.merge)l=new Os(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=Og(e,f,t);if(!o.contains(p))throw new ve(re.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);rT(h,p)||h.push(p)}l=new Os(h),c=o.fieldTransforms.filter((f=>l.covers(f.field)))}else l=null,c=o.fieldTransforms;return new p3(new Es(a),l,c)}class pf extends ly{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pf}}function y3(n,e,t,s){const r=n.Cc(1,e,t);hy("Data must be an object, but it was:",r,s);const i=[],o=Es.empty();to(s,((l,c)=>{const h=dy(e,l,t);c=An(c);const f=r.yc(h);if(c instanceof pf)i.push(h);else{const p=Jc(c,f);p!=null&&(i.push(h),o.set(h,p))}}));const a=new Os(i);return new eT(o,a,r.fieldTransforms)}function v3(n,e,t,s,r,i){const o=n.Cc(1,e,t),a=[Og(e,s,t)],l=[r];if(i.length%2!=0)throw new ve(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Og(e,i[p])),l.push(i[p+1]);const c=[],h=Es.empty();for(let p=a.length-1;p>=0;--p)if(!rT(c,a[p])){const m=a[p];let _=l[p];_=An(_);const v=o.yc(m);if(_ instanceof pf)c.push(m);else{const A=Jc(_,v);A!=null&&(c.push(m),h.set(m,A))}}const f=new Os(c);return new eT(h,f,o.fieldTransforms)}function A3(n,e,t,s=!1){return Jc(t,n.Cc(s?4:3,e))}function Jc(n,e){if(sT(n=An(n)))return hy("Unsupported field value:",e,n),nT(n,e);if(n instanceof ly)return(function(s,r){if(!tT(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const i=[];let o=0;for(const a of s){let l=Jc(a,r.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(n,e)}return(function(s,r){if((s=An(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return rU(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Ut.fromDate(s);return{timestampValue:hd(r.serializer,i)}}if(s instanceof Ut){const i=new Ut(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:hd(r.serializer,i)}}if(s instanceof br)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Us)return{bytesValue:AC(r.serializer,s._byteString)};if(s instanceof ln){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Wm(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Ir)return(function(o,a){return{mapValue:{fields:{[WI]:{stringValue:KI},[od]:{arrayValue:{values:o.toArray().map((c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return Qm(a.serializer,c)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${Zd(s)}`)})(n,e)}function nT(n,e){const t={};return $I(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):to(n,((s,r)=>{const i=Jc(r,e.mc(s));i!=null&&(t[s]=i)})),{mapValue:{fields:t}}}function sT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ut||n instanceof br||n instanceof Us||n instanceof ln||n instanceof ly||n instanceof Ir)}function hy(n,e,t){if(!sT(t)||!UI(t)){const s=Zd(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function Og(n,e,t){if((e=An(e))instanceof ff)return e._internalPath;if(typeof e=="string")return dy(n,e);throw gd("Field path arguments must be of type string or ",n,!1,void 0,t)}const w3=new RegExp("[~\\*/\\[\\]]");function dy(n,e,t){if(e.search(w3)>=0)throw gd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ff(...e.split("."))._internalPath}catch{throw gd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gd(n,e,t,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new ve(re.INVALID_ARGUMENT,a+n+l)}function rT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,t,s,r,i){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class _3 extends iT{data(){return super.data()}}function fy(n,e){return typeof e=="string"?dy(n,e):e instanceof ff?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E3(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ve(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class py{}class b3 extends py{}function I3(n,e,...t){let s=[];e instanceof py&&s.push(e),s=s.concat(t),(function(i){const o=i.filter((l=>l instanceof gy)).length,a=i.filter((l=>l instanceof gf)).length;if(o>1||o>0&&a>0)throw new ve(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const r of s)n=r._apply(n);return n}class gf extends b3{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new gf(e,t,s)}_apply(e){const t=this._parse(e);return oT(e._query,t),new cl(e.firestore,e.converter,bg(e._query,t))}_parse(e){const t=uy(e.firestore);return(function(i,o,a,l,c,h,f){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ve(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Mw(f,h);const _=[];for(const v of f)_.push(Bw(l,i,v));p={arrayValue:{values:_}}}else p=Bw(l,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Mw(f,h),p=A3(a,o,f,h==="in"||h==="not-in");return yn.create(c,h,p)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function C3(n,e,t){const s=e,r=fy("where",n);return gf._create(r,s,t)}class gy extends py{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new gy(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:rr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,i){let o=r;const a=i.getFlattenedFilters();for(const l of a)oT(o,l),o=bg(o,l)})(e._query,t),new cl(e.firestore,e.converter,bg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Bw(n,e,t){if(typeof(t=An(t))=="string"){if(t==="")throw new ve(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nC(e)&&t.indexOf("/")!==-1)throw new ve(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Lt.fromString(t));if(!Le.isDocumentKey(s))throw new ve(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return ZA(n,new Le(s))}if(t instanceof ln)return ZA(n,t._key);throw new ve(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zd(t)}.`)}function Mw(n,e){if(!Array.isArray(n)||n.length===0)throw new ve(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oT(n,e){const t=(function(r,i){for(const o of r)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ve(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class T3{convertValue(e,t="none"){switch(Ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return to(e,((r,i)=>{s[r]=this.convertValue(i,t)})),s}convertVectorValue(e){const t=e.fields?.[od].arrayValue?.values?.map((s=>rn(s.doubleValue)));return new Ir(t)}convertGeoPoint(e){return new br(rn(e.latitude),rn(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=nf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(_c(e));default:return null}}convertTimestamp(e){const t=Ki(e);return new Ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Lt.fromString(e);bt(CC(s),9688,{name:e});const r=new Ec(s.get(1),s.get(3)),i=new Le(s.popFirst(5));return r.isEqual(t)||oi(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S3(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class Ol{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Oo extends iT{constructor(e,t,s,r,i,o){super(e,t,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ph(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(fy("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Oo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Oo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Oo._jsonSchema={type:vn("string",Oo._jsonSchemaVersion),bundleSource:vn("string","DocumentSnapshot"),bundleName:vn("string"),bundle:vn("string")};class Ph extends Oo{data(e={}){return super.data(e)}}class ka{constructor(e,t,s,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ol(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Ph(this._firestore,this._userDataWriter,s.key,s,new Ol(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((a=>{const l=new Ph(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Ol(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((a=>i||a.type!==3)).map((a=>{const l=new Ph(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Ol(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:P3(a.type),doc:l,oldIndex:c,newIndex:h}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ka._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Mm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],r=[];return this.docs.forEach((i=>{i._document!==null&&(t.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function P3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(n){n=ai(n,ln);const e=ai(n.firestore,qc);return a3(ay(e),n._key).then((t=>k3(e,n,t)))}ka._jsonSchemaVersion="firestore/querySnapshot/1.0",ka._jsonSchema={type:vn("string",ka._jsonSchemaVersion),bundleSource:vn("string","QuerySnapshot"),bundleName:vn("string"),bundle:vn("string")};class aT extends T3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Us(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,t)}}function R3(n){n=ai(n,cl);const e=ai(n.firestore,qc),t=ay(e),s=new aT(e);return E3(n._query),l3(t,n._query).then((r=>new ka(e,s,n,r)))}function x3(n,e,t){n=ai(n,ln);const s=ai(n.firestore,qc),r=S3(n.converter,e);return lT(s,[m3(uy(s),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,_r.none())])}function Lg(n,e,t,...s){n=ai(n,ln);const r=ai(n.firestore,qc),i=uy(r);let o;return o=typeof(e=An(e))=="string"||e instanceof ff?v3(i,"updateDoc",n._key,e,t,s):y3(i,"updateDoc",n._key,e),lT(r,[o.toMutation(n._key,_r.exists(!0))])}function lT(n,e){return(function(s,r){const i=new Jr;return s.asyncQueue.enqueueAndForget((async()=>q4(await o3(s),r,i))),i.promise})(ay(n),e)}function k3(n,e,t){const s=t.docs.get(e._key),r=new aT(n);return new Oo(n,r,e._key,s,new Ol(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){il=r})(sl),Tr(new sr("firestore",((s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),a=new qc(new mF(s.getProvider("auth-internal")),new AF(o,s.getProvider("app-check-internal")),(function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ve(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ec(c.options.projectId,h)})(o,r),o);return i={useFetchStreams:t,...i},a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),Hs(VA,$A,e),Hs(VA,$A,"esm2020")})();const cT="@firebase/installations",my="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=1e4,hT=`w:${my}`,dT="FIS_v2",N3="https://firebaseinstallations.googleapis.com/v1",D3=3600*1e3,O3="installations",L3="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Go=new Wo(O3,L3,B3);function fT(n){return n instanceof or&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT({projectId:n}){return`${N3}/projects/${n}/installations`}function gT(n){return{token:n.token,requestStatus:2,expiresIn:F3(n.expiresIn),creationTime:Date.now()}}async function mT(n,e){const s=(await e.json()).error;return Go.create("request-failed",{requestName:n,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function yT({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function M3(n,{refreshToken:e}){const t=yT(n);return t.append("Authorization",U3(e)),t}async function vT(n){const e=await n();return e.status>=500&&e.status<600?n():e}function F3(n){return Number(n.replace("s","000"))}function U3(n){return`${dT} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V3({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const s=pT(n),r=yT(n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={fid:t,authVersion:dT,appId:n.appId,sdkVersion:hT},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await vT(()=>fetch(s,a));if(l.ok){const c=await l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:gT(c.authToken)}}else throw await mT("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3=/^[cdef][\w-]{21}$/,Bg="";function G3(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=Q3(n);return H3.test(t)?t:Bg}catch{return Bg}}function Q3(n){return $3(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=new Map;function _T(n,e){const t=mf(n);ET(t,e),j3(t,e)}function ET(n,e){const t=wT.get(n);if(t)for(const s of t)s(e)}function j3(n,e){const t=z3();t&&t.postMessage({key:n,fid:e}),W3()}let Po=null;function z3(){return!Po&&"BroadcastChannel"in self&&(Po=new BroadcastChannel("[Firebase] FID Change"),Po.onmessage=n=>{ET(n.data.key,n.data.fid)}),Po}function W3(){wT.size===0&&Po&&(Po.close(),Po=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3="firebase-installations-database",q3=1,Qo="firebase-installations-store";let Ap=null;function yy(){return Ap||(Ap=W1(K3,q3,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Qo)}}})),Ap}async function md(n,e){const t=mf(n),r=(await yy()).transaction(Qo,"readwrite"),i=r.objectStore(Qo),o=await i.get(t);return await i.put(e,t),await r.done,(!o||o.fid!==e.fid)&&_T(n,e.fid),e}async function bT(n){const e=mf(n),s=(await yy()).transaction(Qo,"readwrite");await s.objectStore(Qo).delete(e),await s.done}async function yf(n,e){const t=mf(n),r=(await yy()).transaction(Qo,"readwrite"),i=r.objectStore(Qo),o=await i.get(t),a=e(o);return a===void 0?await i.delete(t):await i.put(a,t),await r.done,a&&(!o||o.fid!==a.fid)&&_T(n,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vy(n){let e;const t=await yf(n.appConfig,s=>{const r=J3(s),i=Y3(n,r);return e=i.registrationPromise,i.installationEntry});return t.fid===Bg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function J3(n){const e=n||{fid:G3(),registrationStatus:0};return IT(e)}function Y3(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Go.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=X3(n,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Z3(n)}:{installationEntry:e}}async function X3(n,e){try{const t=await V3(n,e);return md(n.appConfig,t)}catch(t){throw fT(t)&&t.customData.serverCode===409?await bT(n.appConfig):await md(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function Z3(n){let e=await Fw(n.appConfig);for(;e.registrationStatus===1;)await AT(100),e=await Fw(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await vy(n);return s||t}return e}function Fw(n){return yf(n,e=>{if(!e)throw Go.create("installation-not-found");return IT(e)})}function IT(n){return eV(n)?{fid:n.fid,registrationStatus:0}:n}function eV(n){return n.registrationStatus===1&&n.registrationTime+uT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tV({appConfig:n,heartbeatServiceProvider:e},t){const s=nV(n,t),r=M3(n,t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={installation:{sdkVersion:hT,appId:n.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await vT(()=>fetch(s,a));if(l.ok){const c=await l.json();return gT(c)}else throw await mT("Generate Auth Token",l)}function nV(n,{fid:e}){return`${pT(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ay(n,e=!1){let t;const s=await yf(n.appConfig,i=>{if(!CT(i))throw Go.create("not-registered");const o=i.authToken;if(!e&&iV(o))return i;if(o.requestStatus===1)return t=sV(n,e),i;{if(!navigator.onLine)throw Go.create("app-offline");const a=aV(i);return t=rV(n,a),a}});return t?await t:s.authToken}async function sV(n,e){let t=await Uw(n.appConfig);for(;t.authToken.requestStatus===1;)await AT(100),t=await Uw(n.appConfig);const s=t.authToken;return s.requestStatus===0?Ay(n,e):s}function Uw(n){return yf(n,e=>{if(!CT(e))throw Go.create("not-registered");const t=e.authToken;return lV(t)?{...e,authToken:{requestStatus:0}}:e})}async function rV(n,e){try{const t=await tV(n,e),s={...e,authToken:t};return await md(n.appConfig,s),t}catch(t){if(fT(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await bT(n.appConfig);else{const s={...e,authToken:{requestStatus:0}};await md(n.appConfig,s)}throw t}}function CT(n){return n!==void 0&&n.registrationStatus===2}function iV(n){return n.requestStatus===2&&!oV(n)}function oV(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+D3}function aV(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function lV(n){return n.requestStatus===1&&n.requestTime+uT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cV(n){const e=n,{installationEntry:t,registrationPromise:s}=await vy(e);return s?s.catch(console.error):Ay(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uV(n,e=!1){const t=n;return await hV(t),(await Ay(t,e)).token}async function hV(n){const{registrationPromise:e}=await vy(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(n){if(!n||!n.options)throw wp("App Configuration");if(!n.name)throw wp("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw wp(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function wp(n){return Go.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="installations",fV="installations-internal",pV=n=>{const e=n.getProvider("app").getImmediate(),t=dV(e),s=Ko(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},gV=n=>{const e=n.getProvider("app").getImmediate(),t=Ko(e,TT).getImmediate();return{getId:()=>cV(t),getToken:r=>uV(t,r)}};function mV(){Tr(new sr(TT,pV,"PUBLIC")),Tr(new sr(fV,gV,"PRIVATE"))}mV();Hs(cT,my);Hs(cT,my,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd="analytics",yV="firebase_id",vV="origin",AV=60*1e3,wV="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",wy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new qd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ls=new Wo("analytics","Analytics",_V);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EV(n){if(!n.startsWith(wy)){const e=Ls.create("invalid-gtag-resource",{gtagURL:n});return fs.warn(e.message),""}return n}function ST(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function bV(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function IV(n,e){const t=bV("firebase-js-sdk-policy",{createScriptURL:EV}),s=document.createElement("script"),r=`${wy}?l=${n}&id=${e}`;s.src=t?t?.createScriptURL(r):r,s.async=!0,document.head.appendChild(s)}function CV(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function TV(n,e,t,s,r,i){const o=s[r];try{if(o)await e[o];else{const l=(await ST(t)).find(c=>c.measurementId===r);l&&await e[l.appId]}}catch(a){fs.error(a)}n("config",r,i)}async function SV(n,e,t,s,r){try{let i=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=await ST(t);for(const l of o){const c=a.find(f=>f.measurementId===l),h=c&&e[c.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),n("event",s,r||{})}catch(i){fs.error(i)}}function PV(n,e,t,s){async function r(i,...o){try{if(i==="event"){const[a,l]=o;await SV(n,e,t,a,l)}else if(i==="config"){const[a,l]=o;await TV(n,e,t,s,a,l)}else if(i==="consent"){const[a,l]=o;n("consent",a,l)}else if(i==="get"){const[a,l,c]=o;n("get",a,l,c)}else if(i==="set"){const[a]=o;n("set",a)}else n(i,...o)}catch(a){fs.error(a)}}return r}function RV(n,e,t,s,r){let i=function(...o){window[s].push(arguments)};return window[r]&&typeof window[r]=="function"&&(i=window[r]),window[r]=PV(i,n,e,t),{gtagCore:i,wrappedGtag:window[r]}}function xV(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(wy)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=30,NV=1e3;class DV{constructor(e={},t=NV){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const PT=new DV;function OV(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function LV(n){const{appId:e,apiKey:t}=n,s={method:"GET",headers:OV(t)},r=wV.replace("{app-id}",e),i=await fetch(r,s);if(i.status!==200&&i.status!==304){let o="";try{const a=await i.json();a.error?.message&&(o=a.error.message)}catch{}throw Ls.create("config-fetch-failed",{httpStatus:i.status,responseMessage:o})}return i.json()}async function BV(n,e=PT,t){const{appId:s,apiKey:r,measurementId:i}=n.options;if(!s)throw Ls.create("no-app-id");if(!r){if(i)return{measurementId:i,appId:s};throw Ls.create("no-api-key")}const o=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new UV;return setTimeout(async()=>{a.abort()},AV),RT({appId:s,apiKey:r,measurementId:i},o,a,e)}async function RT(n,{throttleEndTimeMillis:e,backoffCount:t},s,r=PT){const{appId:i,measurementId:o}=n;try{await MV(s,e)}catch(a){if(o)return fs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${a?.message}]`),{appId:i,measurementId:o};throw a}try{const a=await LV(n);return r.deleteThrottleMetadata(i),a}catch(a){const l=a;if(!FV(l)){if(r.deleteThrottleMetadata(i),o)return fs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:i,measurementId:o};throw a}const c=Number(l?.customData?.httpStatus)===503?dA(t,r.intervalMillis,kV):dA(t,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+c,backoffCount:t+1};return r.setThrottleMetadata(i,h),fs.debug(`Calling attemptFetch again in ${c} millis`),RT(n,h,s,r)}}function MV(n,e){return new Promise((t,s)=>{const r=Math.max(e-Date.now(),0),i=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(i),s(Ls.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function FV(n){if(!(n instanceof or)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class UV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function VV(n,e,t,s,r){if(r&&r.global){n("event",t,s);return}else{const i=await e,o={...s,send_to:i};n("event",t,o)}}async function $V(n,e,t,s){if(s&&s.global){const r={};for(const i of Object.keys(t))r[`user_properties.${i}`]=t[i];return n("set",r),Promise.resolve()}else{const r=await e;n("config",r,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HV(){if(G1())try{await Q1()}catch(n){return fs.warn(Ls.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return fs.warn(Ls.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function GV(n,e,t,s,r,i,o){const a=BV(n);a.then(p=>{t[p.measurementId]=p.appId,n.options.measurementId&&p.measurementId!==n.options.measurementId&&fs.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>fs.error(p)),e.push(a);const l=HV().then(p=>{if(p)return s.getId()}),[c,h]=await Promise.all([a,l]);xV(i)||IV(i,c.measurementId),r("js",new Date);const f=o?.config??{};return f[vV]="firebase",f.update=!0,h!=null&&(f[yV]=h),r("config",c.measurementId,f),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e){this.app=e}_delete(){return delete Na[this.app.options.appId],Promise.resolve()}}let Na={},Vw=[];const $w={};let _p="dataLayer",jV="gtag",Hw,_y,Gw=!1;function zV(){const n=[];if(H1()&&n.push("This is a browser extension environment."),qO()||n.push("Cookies are not available."),n.length>0){const e=n.map((s,r)=>`(${r+1}) ${s}`).join(" "),t=Ls.create("invalid-analytics-context",{errorInfo:e});fs.warn(t.message)}}function WV(n,e,t){zV();const s=n.options.appId;if(!s)throw Ls.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)fs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ls.create("no-api-key");if(Na[s]!=null)throw Ls.create("already-exists",{id:s});if(!Gw){CV(_p);const{wrappedGtag:i,gtagCore:o}=RV(Na,Vw,$w,_p,jV);_y=i,Hw=o,Gw=!0}return Na[s]=GV(n,Vw,$w,e,Hw,_p,t),new QV(n)}function KV(n=yc()){n=An(n);const e=Ko(n,yd);return e.isInitialized()?e.getImmediate():qV(n)}function qV(n,e={}){const t=Ko(n,yd);if(t.isInitialized()){const r=t.getImmediate();if(zi(e,t.getOptions()))return r;throw Ls.create("already-initialized")}return t.initialize({options:e})}function JV(n,e,t){n=An(n),$V(_y,Na[n.app.options.appId],e,t).catch(s=>fs.error(s))}function YV(n,e,t,s){n=An(n),VV(_y,Na[n.app.options.appId],e,t,s).catch(r=>fs.error(r))}const Qw="@firebase/analytics",jw="0.10.19";function XV(){Tr(new sr(yd,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return WV(s,r,t)},"PUBLIC")),Tr(new sr("analytics-internal",n,"PRIVATE")),Hs(Qw,jw),Hs(Qw,jw,"esm2020");function n(e){try{const t=e.getProvider(yd).getImmediate();return{logEvent:(s,r,i)=>YV(t,s,r,i),setUserProperties:(s,r)=>JV(t,s,r)}}catch(t){throw Ls.create("interop-component-reg-failed",{reason:t})}}}XV();const Ll={apiKey:"AIzaSyCwvJ8cUWLZPZ26i1deIAXnoLuzToIcB70",authDomain:"tuldung.firebaseapp.com",projectId:"tuldung",storageBucket:"tuldung.firebasestorage.app",messagingSenderId:"1086524417813",appId:"1:1086524417813:web:8199da4b7cebcaffc86b1c",measurementId:"G-EGV6XDKG9R"},ZV=n=>{const t=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"].filter(s=>!n[s]);return t.length>0?(console.error("=== Firebase   ==="),console.error(" :",t),console.error("   . .env  ."),console.error(" :    ! (npm run dev)"),!1):!0};let qs=null;ZV(Ll)||console.error("Firebase   .");try{Ll.apiKey&&Ll.authDomain&&Ll.projectId?vA().length>0?qs=yc():qs=K1(Ll):(console.warn(" Firebase    . Firebase    ."),console.warn(" .env  Firebase     ."),qs=null)}catch(n){if(console.error("Firebase    :",n),n.code==="app/duplicate-app"||n.message?.includes("duplicate"))try{qs=yc()}catch(e){console.error("    :",e);const t=vA();t.length>0?qs=t[0]:(console.error("Firebase    ."),qs=null)}else console.error("Firebase  :",n.message),qs=null}let It=null,cs=null;if(qs)try{It=dF(qs),cs=h3(qs),It&&eM(It,wI).then(()=>{}).catch(n=>{console.error("Firebase Auth   :",n)})}catch(n){console.error(" Firebase Auth/Firestore  :",n)}else console.error(" Firebase   . auth db   .");let xT=null;if(typeof window<"u")try{xT=KV(qs)}catch(n){n.code==="analytics/already-initialized"||n.message?.includes("already")?console.log("Analytics  ."):console.warn("Analytics  :",n.message||n)}new $r;const kT=async(n,e={})=>{const t=Do(cs,"users",n.uid);if(!(await Xa(t)).exists()){const r=i=>{const o=i.toString().split("").reduce((h,f)=>(h<<5)-h+f.charCodeAt(0),0),a="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let l="",c=Math.abs(o);for(let h=0;h<6;h++)l+=a[c%a.length],c=Math.floor(c/a.length);return l};await x3(t,{email:n.email,displayName:n.displayName||e.name||n.email?.split("@")[0],photoURL:n.photoURL,phone:e.phone||"",createdAt:new Date().toISOString(),inviteCode:e.inviteCode||r(n.uid),referrals:e.referrals||[],referredBy:e.referredBy||null,referredAt:e.referredAt||null,referralStats:e.referralStats||{totalReferrals:0,rewardsReceived:0},...e,gameData:{level:1,coins:0,totalCoin:0,catFragments:50,nftCount:0,miningLevel:1,huntingLevel:1,explorationLevel:1,productionLevel:1,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}})}};let Ep=!1;const e6=async()=>{if(Ep)return It.currentUser?{success:!0,user:It.currentUser}:{success:!1,error:" "};try{console.log("handleRedirectResult  - getRedirectResult  ...");const n=await PM(It);if(console.log("getRedirectResult :",n?" ":"null"),Ep=!0,n&&n.user){const e=n.user;return console.log("  -  :",e.email,e.uid),await kT(e),console.log("Firestore  "),{success:!0,user:e}}return It.currentUser?(console.log("   Firebase   :",It.currentUser.email),{success:!0,user:It.currentUser}):(console.log("  "),{success:!1,error:"  ."})}catch(n){return Ep=!0,console.error("   :",n),It.currentUser?(console.log("  Firebase   :",It.currentUser.email),{success:!0,user:It.currentUser}):{success:!1,error:n.message}}},Mg=async n=>{try{const e=Do(cs,"users",n),t=await Xa(e);return t.exists()?t.data():null}catch(e){return console.error("   :",e),null}},t6=Object.freeze(Object.defineProperty({__proto__:null,get analytics(){return xT},get auth(){return It},get db(){return cs},getUserGameData:Mg,handleRedirectResult:e6,saveUserToFirestore:kT},Symbol.toStringTag,{value:"Module"})),n6={__name:"App",setup(n){const e=Cn(),t=hn();Mt(async()=>{try{const{handleGoogleRedirect:l}=await ph(async()=>{const{handleGoogleRedirect:h}=await import("./firebaseAuth-CSfOe6mF.js");return{handleGoogleRedirect:h}},[]),c=await l();if(c&&c.success&&c.user){console.log("App.vue: Google  :",c.user.email);let h=null;try{const f=localStorage.getItem("currentUser");f&&(h=JSON.parse(f))}catch{try{const p=sessionStorage.getItem("currentUser");p&&(h=JSON.parse(p))}catch(p){console.error("   :",p)}}(!h||!h.id)&&(localStorage.setItem("currentUser",JSON.stringify(c.user)),sessionStorage.setItem("currentUser",JSON.stringify(c.user)),console.log("App.vue:   ")),t.loadCurrentUser(),(e.currentRoute.value.path==="/login"||e.currentRoute.value.path==="/signup")&&(console.log("App.vue:    "),e.push("/home"));return}}catch{}if(t.loadCurrentUser(),It&&It.currentUser&&!At())try{const{getUserGameData:l}=await ph(async()=>{const{getUserGameData:p}=await Promise.resolve().then(()=>t6);return{getUserGameData:p}},void 0),{convertFirebaseUserToAppUser:c}=await ph(async()=>{const{convertFirebaseUserToAppUser:p}=await import("./firebaseAuth-CSfOe6mF.js");return{convertFirebaseUserToAppUser:p}},[]),h=await l(It.currentUser.uid),f=c(It.currentUser,h?.gameData);localStorage.setItem("currentUser",JSON.stringify(f)),sessionStorage.setItem("currentUser",JSON.stringify(f)),t.loadCurrentUser(),console.log("App.vue: Firebase Auth    :",f.email)}catch(l){console.error("App.vue:   :",l)}const a=At();if(a&&a.loginType==="wallet"&&a.walletAddress)try{const l=await t.checkWalletStatus();l.connected&&console.log("App.vue:    :",l.address),t.setupWalletListeners()}catch(l){console.error("App.vue:    :",l)}});const s=$(null),r=$(!1),i=()=>{const a=localStorage.getItem("soundEnabled");return a!==null?a==="true":!0},o=()=>{s.value&&(i()?r.value||s.value.play().then(()=>{r.value=!0}).catch(()=>{}):(s.value.pause(),r.value=!1))};return Mt(()=>{try{s.value=new Audio,s.value.src=new URL("@/assets/audio/bgm.mp3",import.meta.url).href,s.value.loop=!0,s.value.volume=.5,o();const a=()=>{s.value&&i()&&!r.value&&s.value.play().then(()=>{r.value=!0}).catch(()=>{})};document.addEventListener("click",a,{once:!0}),document.addEventListener("touchstart",a,{once:!0}),window.addEventListener("soundSettingChanged",o)}catch{console.log("BGM    .")}}),un(()=>{s.value&&(s.value.pause(),s.value=null),window.removeEventListener("soundSettingChanged",o)}),(a,l)=>{const c=sP("router-view");return B(),mE(c)}}},s6="/tdl/assets/tdl_splashLogo-b8p6ictM.png",r6="/tdl/assets/tdl_splash_bg-B78B8oeM.png",Wt=(n,e)=>{const t=n.__vccOpts||n;for(const[s,r]of e)t[s]=r;return t},i6={class:"loading-screen"},o6={class:"loading-bar-container"},a6={class:"loading-bar-track"},l6={__name:"LoadingScreen",setup(n){const e=Cn();hn();const t=$(0);return Mt(()=>{const i=.5333333333333333,o=setInterval(()=>{t.value+=i,t.value>=100&&(t.value=100,clearInterval(o),setTimeout(()=>{e.push("/main")},200))},16)}),(s,r)=>(B(),M("div",i6,[r[0]||(r[0]=d("div",{class:"logo-top"},[d("img",{src:s6,alt:"TDL Logo",class:"splash-logo"})],-1)),d("div",o6,[d("div",a6,[d("div",{class:"loading-bar-fill",style:Ct({width:t.value+"%"})},null,4)])]),r[1]||(r[1]=d("div",{class:"splash-bg"},[d("img",{src:r6,alt:"Splash Background",class:"splash-bg-image"})],-1))]))}},c6=Wt(l6,[["__scopeId","data-v-8511a0e0"]]),Yc="/tdl/assets/cat1-B_B8VE2s.png",Xc="/tdl/assets/cat10-B8AgbljH.png",Zc="/tdl/assets/cat11-0fJ86MBw.png",eu="/tdl/assets/cat12-9jWhGICw.png",tu="/tdl/assets/cat13-CHa4qUOi.png",nu="/tdl/assets/cat14-CLrryeLM.png",su="/tdl/assets/cat15-CCtjZj8M.png",ru="/tdl/assets/cat16-CPcR6OS6.png",iu="/tdl/assets/cat17-EO7rjjtM.png",ou="/tdl/assets/cat18-BGDiOePY.png",au="/tdl/assets/cat19-DxCDtOnA.png",lu="/tdl/assets/cat2-0Y4nM6HW.png",cu="/tdl/assets/cat20-Bz9cd08a.png",uu="/tdl/assets/cat21-ECTsze2s.png",hu="/tdl/assets/cat22-BvGXhyri.png",du="/tdl/assets/cat23-DqU2B_M0.png",fu="/tdl/assets/cat24-7cWYLYDN.png",pu="/tdl/assets/cat25-Cy0mQl6B.png",gu="/tdl/assets/cat26-Bk4tHCwE.png",mu="/tdl/assets/cat27-CvtmCEXM.png",yu="/tdl/assets/cat28-B9s1wmgo.png",vu="/tdl/assets/cat29-D_79HmBj.png",Au="/tdl/assets/cat3-Dp7OJMB9.png",wu="/tdl/assets/cat30-Cx-HRp0m.png",_u="/tdl/assets/cat4-DHiuXgwB.png",Eu="/tdl/assets/cat5-BvXrfJAO.png",bu="/tdl/assets/cat6-DZOiQoo1.png",Iu="/tdl/assets/cat7-CeDKF7mR.png",Cu="/tdl/assets/cat8-mjRhb3fS.png",Tu="/tdl/assets/cat9-Bzb-Egme.png",Su="/tdl/assets/catPoint-t6vwZH27.png",Pu="/tdl/assets/catPointPlus-CFF9Ua2B.png",Ru="/tdl/assets/catProfile01-gY0Djz81.png",xu="/tdl/assets/catProfile02-Cesbpkj5.png",ku="/tdl/assets/cat_ico-Csdt_Q01.png";async function vf(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(s)).map(o=>o.toString(16).padStart(2,"0")).join("")}async function u6(n,e){return await vf(n)===e}const h6="/tdl/assets/urerTown-BuaGLkQ2.png",d6={class:"login-screen"},f6={class:"login-title"},p6={class:"urer-town-container"},g6=["src"],m6={class:"cat-character-wrapper"},y6=["src"],v6={class:"input-group"},A6={class:"input-container"},w6=["placeholder"],_6={class:"input-group"},E6={class:"input-container"},b6=["placeholder"],I6=["disabled"],C6={key:0,class:"btn-content loginBt"},T6={key:1,class:"btn-content"},S6={key:2,class:"btn-content"},P6={class:"signup-link"},R6={__name:"LoginScreen",setup(n){de(()=>!!It);const e=Cn(),t=hn(),{setWalletConnected:s,setLoading:r}=t,i=$(!1),o=$(!1);$(!1),$("");const a=$(""),l=de(()=>Cs()),c=()=>{e.push("/signup")},h=$(""),f=$(""),p=async _=>{if(_.preventDefault(),!h.value.trim()||!f.value.trim()){alert("Please enter both email and password.");return}i.value=!0,r(!0);const v=JSON.parse(localStorage.getItem("users")||"[]"),A=v.find(w=>w.email===h.value);setTimeout(async()=>{if(i.value=!1,A){let w=!1;try{if(A.password&&A.password.length<64){if(w=A.password===f.value,w){const T=await vf(f.value);A.password=T;const P=v.findIndex(U=>U.id===A.id);P!==-1&&(v[P]=A,localStorage.setItem("users",JSON.stringify(v)))}}else w=await u6(f.value,A.password)}catch(T){console.error("Password verification error:",T),r(!1),alert("An error occurred during login. Please try again.");return}if(w){o.value=!0;const{password:T,...P}=A;localStorage.setItem("currentUser",JSON.stringify(P)),sessionStorage.setItem("currentUser",JSON.stringify(P)),s(A.email,`${A.gameData?.coins||0} coins`),r(!1),setTimeout(()=>{e.push("/home")},1e3)}else r(!1),alert("Email or password is incorrect.")}else r(!1),alert("Email or password is incorrect.")},2e3)},m=()=>{e.push("/forgot-password")};return Mt(()=>{r(!1);const _=Math.floor(Math.random()*30)+1;try{a.value=new URL(Object.assign({"../assets/img/cat1.png":Yc,"../assets/img/cat10.png":Xc,"../assets/img/cat11.png":Zc,"../assets/img/cat12.png":eu,"../assets/img/cat13.png":tu,"../assets/img/cat14.png":nu,"../assets/img/cat15.png":su,"../assets/img/cat16.png":ru,"../assets/img/cat17.png":iu,"../assets/img/cat18.png":ou,"../assets/img/cat19.png":au,"../assets/img/cat2.png":lu,"../assets/img/cat20.png":cu,"../assets/img/cat21.png":uu,"../assets/img/cat22.png":hu,"../assets/img/cat23.png":du,"../assets/img/cat24.png":fu,"../assets/img/cat25.png":pu,"../assets/img/cat26.png":gu,"../assets/img/cat27.png":mu,"../assets/img/cat28.png":yu,"../assets/img/cat29.png":vu,"../assets/img/cat3.png":Au,"../assets/img/cat30.png":wu,"../assets/img/cat4.png":_u,"../assets/img/cat5.png":Eu,"../assets/img/cat6.png":bu,"../assets/img/cat7.png":Iu,"../assets/img/cat8.png":Cu,"../assets/img/cat9.png":Tu,"../assets/img/catPoint.png":Su,"../assets/img/catPointPlus.png":Pu,"../assets/img/catProfile01.png":Ru,"../assets/img/catProfile02.png":xu,"../assets/img/cat_ico.png":ku})[`../assets/img/cat${_}.png`],import.meta.url).href}catch(T){console.error("   :",T);try{a.value=new URL("/tdl/assets/cat1-B_B8VE2s.png",import.meta.url).href}catch(P){console.error("   :",P)}}const v=At(),A=v?.loginType==="guest"||v?.email?.includes("@guest.com")||v?.email==="guest@tdl.com";if(v&&v.id&&!A){e.push("/home");return}const w=document.querySelector(".loginCont");w&&(w.style.opacity="0",w.style.transform="translateY(30px)",setTimeout(()=>{w.style.transition="all 0.6s ease",w.style.opacity="1",w.style.transform="translateY(0)"},100))}),(_,v)=>(B(),M("div",d6,[d("h1",f6,E(l.value.login),1),d("div",p6,[d("img",{src:Oe(h6),alt:"Urer Town",class:"urer-town-image"},null,8,g6),d("div",m6,[d("img",{src:a.value,alt:"Cat Character",class:"cat-character-image"},null,8,y6)])]),d("form",{onSubmit:p,class:"login-form"},[d("div",v6,[d("div",A6,[v[2]||(v[2]=d("span",{class:"input-text-label"},"Email",-1)),tn(d("input",{type:"email","onUpdate:modelValue":v[0]||(v[0]=A=>h.value=A),class:"input-field",placeholder:l.value.enterEmail,required:""},null,8,w6),[[bs,h.value]])])]),d("div",_6,[d("div",E6,[v[3]||(v[3]=d("span",{class:"input-text-label"},"Password",-1)),tn(d("input",{type:"password","onUpdate:modelValue":v[1]||(v[1]=A=>f.value=A),class:"input-field",placeholder:l.value.enterPassword,required:""},null,8,b6),[[bs,f.value]])])]),d("button",{type:"submit",disabled:i.value||o.value,class:Ne(["login-button",{connecting:i.value,connected:o.value}])},[!i.value&&!o.value?(B(),M("div",C6,E(l.value.loginButton),1)):ce("",!0),i.value?(B(),M("div",T6,[v[4]||(v[4]=d("div",{class:"spinner-small"},null,-1)),Da(" "+E(l.value.loading),1)])):ce("",!0),o.value?(B(),M("div",S6,[v[5]||(v[5]=d("svg",{class:"check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[d("path",{d:"M20 6L9 17l-5-5"})],-1)),Da(" "+E(l.value.success)+"! ",1)])):ce("",!0)],10,I6)],32),ce("",!0),ce("",!0),d("div",P6,[d("button",{onClick:c,class:"signup-btn"},E(l.value.signupButton),1),v[7]||(v[7]=d("span",{class:"link-separator"},"|",-1)),d("button",{onClick:m,class:"forgot-password-btn"}," Forgot password? ")])]))}},x6=Wt(R6,[["__scopeId","data-v-49244d9a"]]),ah=n=>{const e=n.toString().split("").reduce((i,o)=>(i<<5)-i+o.charCodeAt(0),0),t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let s="",r=Math.abs(e);for(let i=0;i<6;i++)s+=t[r%t.length],r=Math.floor(r/t.length);return s},Rh=async n=>{if(!n)return ah(n||"default");const e=Zr(),t=e.find(s=>s.id===n);if(t&&t.inviteCode)return t.inviteCode;if(cs)try{const s=Do(cs,"users",n),r=await Xa(s);if(r.exists()){const i=r.data();if(i.inviteCode)return i.inviteCode;const o=ah(n);return await Lg(s,{inviteCode:o}),o}}catch(s){console.error("getOrCreateInviteCode Firestore :",s)}if(t){const s=ah(n);return t.inviteCode=s,localStorage.setItem("users",JSON.stringify(e)),s}return ah(n)},k6=async n=>{if(!n)return null;const t=Zr().find(s=>s.inviteCode===n);if(t)return t;if(!cs)return null;try{const s=u3(cs,"users"),r=I3(s,C3("inviteCode","==",n)),i=await R3(r);if(!i.empty){const o=i.docs[0],a=o.data();return{id:o.id,...a}}return null}catch(s){return console.error("getUserByInviteCode Firestore :",s),null}},N6=async(n,e)=>{if(!e)return{success:!1,error:"  ."};if(!n)return{success:!1,error:" ID ."};const t=await k6(e);if(!t)return{success:!1,error:"   ."};if(t.id===n)return{success:!1,error:"    ."};let s=null;if(cs)try{const f=Do(cs,"users",n),p=await Xa(f);if(p.exists()&&(s={id:p.id,...p.data()},s.referredBy))return{success:!1,error:"  ."}}catch(f){console.error("processInviteCode:    :",f)}if(!s&&(s=Zr().find(p=>p.id===n),s&&s.referredBy))return{success:!1,error:"  ."};if(cs)try{if(s){const m=Do(cs,"users",n);await Lg(m,{referredBy:t.id,referredAt:new Date().toISOString()})}const f=Do(cs,"users",t.id),p=await Xa(f);if(p.exists()){const m=p.data(),_=m.referrals||[];_.includes(n)||_.push(n),await Lg(f,{referrals:_,referralStats:{totalReferrals:_.length,rewardsReceived:m.referralStats?.rewardsReceived||0}})}}catch(f){console.error("processInviteCode: Firestore  :",f)}const r=Zr(),i=r.find(f=>f.id===n);i&&(i.referredBy=t.id,i.referredAt=new Date().toISOString(),localStorage.setItem("users",JSON.stringify(r)));const o=r.find(f=>f.id===t.id);o&&(o.referrals||(o.referrals=[]),o.referrals.includes(n)||o.referrals.push(n),o.referralStats={totalReferrals:o.referrals.length,rewardsReceived:o.referralStats?.rewardsReceived||0},localStorage.setItem("users",JSON.stringify(r)));const a=hn(),l=100,c=(t.gameData?.coins||0)+l;await ac(t.id,{coins:c});const h=50;if(s){const f=(s.gameData?.coins||0)+h;await ac(n,{coins:f}),a.state.currentUser?.id===n&&await a.updateCoins(f)}return a.state.currentUser?.id===t.id&&await a.updateCoins(c),window.dispatchEvent(new CustomEvent("userDataUpdated")),{success:!0,inviter:t.displayName||t.name||t.email,inviterReward:l,newUserReward:h}},zw=async n=>{if(!n)return{inviteCode:null,totalReferrals:0,referrals:[],referralStats:{totalReferrals:0,rewardsReceived:0}};if(cs)try{const s=Do(cs,"users",n),r=await Xa(s);if(r.exists()){const i=r.data();return{inviteCode:i.inviteCode||await Rh(n),totalReferrals:i.referrals?.length||0,referrals:i.referrals||[],referralStats:i.referralStats||{totalReferrals:0,rewardsReceived:0}}}}catch(s){console.error("getReferralStats Firestore :",s)}const t=Zr().find(s=>s.id===n);return t?{inviteCode:t.inviteCode||await Rh(n),totalReferrals:t.referrals?.length||0,referrals:t.referrals||[],referralStats:t.referralStats||{totalReferrals:0,rewardsReceived:0}}:{inviteCode:await Rh(n),totalReferrals:0,referrals:[],referralStats:{totalReferrals:0,rewardsReceived:0}}},D6={class:"signup-screen"},O6={class:"input-group"},L6={class:"input-container"},B6={class:"input-group"},M6={class:"input-container"},F6=["type"],U6={class:"input-group"},V6={class:"input-container"},$6={__name:"SignupScreen",setup(n){const e=Cn(),t=VE(),s=$({name:"",email:"",password:""}),r=$(null);Mt(()=>{t.query.ref&&(r.value=t.query.ref)});const i=$(!1),o=()=>{e.go(-1)},a=async l=>{if(l.preventDefault(),!s.value.name.trim()||!s.value.email.trim()||!s.value.password.trim()){alert("Please fill in all fields.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.value.email)){alert("Please enter a valid email address.");return}if(s.value.password.length<6){alert("Password must be at least 6 characters long.");return}const h=JSON.parse(localStorage.getItem("users")||"[]");if(h.some(_=>_.email===s.value.email)){alert("This email is already registered.");return}let p;try{p=await vf(s.value.password)}catch(_){console.error("Password hashing error:",_),alert("An error occurred during signup. Please try again.");return}const m={id:Date.now(),name:s.value.name,email:s.value.email,password:p,createdAt:new Date().toISOString(),gameData:{level:1,coins:0,totalCoin:0,catFragments:50,nftCount:0,miningLevel:1,huntingLevel:1,explorationLevel:1,productionLevel:1,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}};if(h.push(m),localStorage.setItem("users",JSON.stringify(h)),r.value)try{const _=await N6(m.id,r.value);_.success?alert(`Signup completed successfully!
You have signed up with an invitation from ${_.inviter}!
Invitation reward: You received ${_.newUserReward} points!`):alert(`Signup completed successfully!
${_.error}`)}catch(_){console.error("Invitation code processing error:",_),alert("Signup completed successfully!")}else alert("Signup completed successfully!");e.push("/login")};return(l,c)=>(B(),M("div",D6,[d("button",{class:"back-button",onClick:o}," < Back "),d("form",{onSubmit:a,class:"signup-form"},[d("div",O6,[d("div",L6,[c[3]||(c[3]=d("span",{class:"input-text-label"},"Name",-1)),tn(d("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=h=>s.value.name=h),class:"input-field",placeholder:"Enter your name",required:""},null,512),[[bs,s.value.name]])])]),d("div",B6,[d("div",M6,[c[6]||(c[6]=d("span",{class:"input-text-label"},"Password",-1)),tn(d("input",{type:i.value?"text":"password","onUpdate:modelValue":c[1]||(c[1]=h=>s.value.password=h),class:"input-field",placeholder:"Enter your password",required:""},null,8,F6),[[ER,s.value.password]]),ce("",!0)])]),d("div",U6,[d("div",V6,[c[7]||(c[7]=d("span",{class:"input-text-label"},"Email",-1)),tn(d("input",{type:"email","onUpdate:modelValue":c[2]||(c[2]=h=>s.value.email=h),class:"input-field",placeholder:"Enter your email",required:""},null,512),[[bs,s.value.email]])])]),c[8]||(c[8]=d("button",{type:"submit",class:"signup-button"}," Create an account ",-1))],32)]))}},H6=Wt($6,[["__scopeId","data-v-530a0596"]]);function G6(n){const e=Date.now(),t=Math.random().toString(36).substring(2,15);return btoa(`${n}:${e}:${t}`).replace(/[+/=]/g,"")}function Q6(n,e){const t=JSON.parse(localStorage.getItem("resetTokens")||"{}");t[e]={email:n,createdAt:Date.now(),expiresAt:Date.now()+1440*60*1e3},localStorage.setItem("resetTokens",JSON.stringify(t))}function Ww(n){const e=JSON.parse(localStorage.getItem("resetTokens")||"{}"),t=e[n];return t?Date.now()>t.expiresAt?(delete e[n],localStorage.setItem("resetTokens",JSON.stringify(e)),null):t:null}function j6(n){const e=JSON.parse(localStorage.getItem("resetTokens")||"{}");delete e[n],localStorage.setItem("resetTokens",JSON.stringify(e))}function z6(n){return`${window.location.origin+window.location.pathname}#/reset-password?token=${n}`}const W6="/tdl/assets/cat9-Bzb-Egme.png",K6={class:"forgot-password-screen"},q6={class:"cat-character-container"},J6=["src"],Y6={class:"input-group"},X6={class:"input-container"},Z6=["disabled"],e5=["disabled"],t5={key:0,class:"reset-link-container"},n5={class:"reset-link-content"},s5={class:"reset-link-wrapper"},r5=["href"],i5={key:0,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o5={key:1,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},a5={__name:"ForgotPasswordPage",setup(n){const e=Cn(),t=$(""),s=$(!1),r=$(""),i=$(!1),o=$(!1),a=()=>{e.go(-1)},l=async h=>{if(h.preventDefault(),!t.value.trim()){alert("Please enter your email address.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.value)){alert("Please enter a valid email address.");return}s.value=!0;try{if(!JSON.parse(localStorage.getItem("users")||"[]").find(A=>A.email===t.value)){alert("Email address not found."),s.value=!1;return}const _=G6(t.value);Q6(t.value,_);const v=z6(_);r.value=v,alert("Password reset link has been sent to your email address."),e.push("/login")}catch(p){console.error("Password reset link generation error:",p),alert("An error occurred while generating reset link. Please try again.")}finally{s.value=!1}},c=async()=>{try{await navigator.clipboard.writeText(r.value),o.value=!0,setTimeout(()=>{o.value=!1},2e3)}catch(h){console.error("Failed to copy link:",h);const f=document.createElement("textarea");f.value=r.value,f.style.position="fixed",f.style.opacity="0",document.body.appendChild(f),f.select();try{document.execCommand("copy"),o.value=!0,setTimeout(()=>{o.value=!1},2e3)}catch(p){console.error("Fallback copy failed:",p)}document.body.removeChild(f)}};return(h,f)=>(B(),M("div",K6,[d("button",{class:"back-button",onClick:a}," < Back "),f[5]||(f[5]=d("h1",{class:"forgot-password-title"},"Reset password",-1)),d("div",q6,[d("img",{src:Oe(W6),alt:"Cat Character",class:"cat-character-image"},null,8,J6)]),d("form",{onSubmit:l,class:"forgot-password-form"},[d("div",Y6,[d("div",X6,[f[1]||(f[1]=d("span",{class:"input-text-label"},"Email",-1)),tn(d("input",{type:"email","onUpdate:modelValue":f[0]||(f[0]=p=>t.value=p),class:"input-field",placeholder:"Enter your email",required:"",disabled:s.value},null,8,Z6),[[bs,t.value]])])]),d("button",{type:"submit",class:"reset-button",disabled:s.value},E(s.value?"Sending...":"Reset password"),9,e5),i.value&&r.value?(B(),M("div",t5,[f[4]||(f[4]=vE('<div class="reset-link-header" data-v-fd9c9e74><svg class="link-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-fd9c9e74><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" data-v-fd9c9e74></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" data-v-fd9c9e74></path></svg><p class="reset-link-label" data-v-fd9c9e74>Reset link (development mode)</p></div>',1)),d("div",n5,[d("div",s5,[d("a",{href:r.value,class:"reset-link",target:"_blank"},E(r.value),9,r5)]),d("button",{onClick:c,class:Ne(["copy-button",{copied:o.value}])},[o.value?(B(),M("svg",o5,[...f[3]||(f[3]=[d("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(B(),M("svg",i5,[...f[2]||(f[2]=[d("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},null,-1),d("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},null,-1)])])),d("span",null,E(o.value?"Copied!":"Copy"),1)],2)])])):ce("",!0)],32)]))}},l5=Wt(a5,[["__scopeId","data-v-fd9c9e74"]]),c5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAz4SURBVHgB7d3ddRRXFobhIyJgMpAzwBGgicDjCOwQyMA4AiYDk8FMBmIiMI5AygBn0FMFjQ3or3+q6uy9z/OsVUtccK3vrVPVrdYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAjXDQA7tjtds+nH1fT9XK65n9ffvNfbqfr/XT9cXFx8a4BADnNoz9dP0/X9e44N9P123RdNgAgj2m8X03Xh935/iMEACC4eaxPuOM/xOsGAMSz+3Tcv8Rd/0Nudk4DACCO+Q59t40bEQAAAWw4/iIAACLoMP5fRsDzBgBsq+P4f/amAQDbCTD+n101AGB9uzjjP7tuAMC6drHG/7OrBgCsYxdz/GdOAejOHwMCStp9+ia+X1pc/7i4uPizQSfPGkAxCcZ/9kODjgQAUEqS8Z9dNehIAABlJBr/2YsGHQkAoIRk4z/zrYB05SVAIL2E4//RxaRBJ04AgNSyjj/0JgCAtIw/nE4AACkVGP/bBh0JACCdInf+tw06EgBAKoWO/d836EgAAGkUe+b/rkFHPoICpFDwhT9/C4CunAAA4RUc/7fGn96cAAChFf2o3/dTAHgHgK6cAABhFR3/t8afCJwAACEV/pKf76YAuG3QmRMAIJzC4//a+BOFEwAglMLj/99p/H9sEIQAAMIoPP7zM/9/evOfSAQAEILxh20JAKA74w/bEwBAV8Yf+hAAQDfGH/oRAEAXxh/6EgDA5ow/9CcAgE0Zf4hBAACbMf4QhwAANmH8IRYBAKzO+EM8AgBYlfGHmAQAsBrjD3EJAGAVxh9iEwDA4ow/xCcAgEUZf8hBAACLMf6QhwAAFmH8IRcBAJzN+EM+AgA4i/GHnAQAcDLjD3kJAOAkxh9yEwDA0Yw/5CcAgKMYf6hBAAAHM/5QhwAADmL8oRYBADzJ+EM9AgB4lPGHmgQA8CDjD3UJAOBexh9qEwDAHcYf6hMAwFeMP4xBAAB/Mf4wDgEAfGT8YSwCADD+MCABAIMz/jAmAQADM/4wLgEAgzL+MDYBAAMy/oAAgMEYf2AmAGAgxh/4TADAIIw/8CUBAAMw/sC3BAAUZ/yB+wgAKMz4Aw8RAFCU8QceIwCgIOMPPEUAQDHGHziEAIBCjD9wKAEARRh/4BgCAAow/sCxBAAkZ/yBUwgASMz4A6cSAJCU8QfOIQAgIeMPnEsAQDLGH1iCAIBEjD+wFAEASRh/YEkCABIw/sDSBAAEZ/yBNQgACMz4A2sRABCU8QfWJAAgIOMPrE0AQDDGH9iCAIBAjD+wFQEAQRh/YEsCAAIw/sDWBAB0ZvyBHgQAdGT8gV4EAHRi/IGeBAB0YPyB3gQAbMz4AxEIANiQ8QeiEACwEeMPRCIAYAPGH4hGAMDKjD8QkQCAFRl/ICoBACsx/kBkAgBWYPyB6AQALMz4AxkIAFiQ8QeyEACwEOMPZCIAYAHGH8hGAMCZjD+QkQCAMxh/ICsBACcy/kBmAgBOYPyB7AQAHMn4AxUIADiC8QeqEABwIOMPVCIA4ADGH6hGAMATjD9QkQCARxh/oCoBAA8w/kBlAgDuYfyB6gQAfMP4AyMQAPAF4w+MQgDAnvEHRiIAoBl/YDwCgOEZf2BEAoChGX9gVAKAYRl/YGQCgCEZf2B0AoDhGH8AAcBgjD/AJwKAYRh/gL8JAIZg/AG+JgAoz/gD3CUAKM34A9xPAFCW8Qd4mACgJOMP8DgBQDnGH+BpAoBSjD/AYQQAZRh/gMMJAEow/gDHEQCkZ/wBjicASM34A5xGAJCW8Qc4nQAgJeMPcB4BQDrGH+B8AoBUjD/AMgQAaRh/gOUIAFIw/gDLEgCEZ/wBlicACM34A6xDABCW8QdYjwAgJOMPsC4BQDjGH2B9AoBQpvF/Nf140+ox/kAoAoAwpvG/nH7ctHqMPxDOswZxXLd6jD8QkgAghP1z/8tWi/EHwhIAdLc/+v+p1WL8gdAEABFctVp3/8YfCM9LgHQ3nQDML/5dthqMP5CCEwC6msb/RTP+AJsTAPT2stVg/IFUBAC9XbX8jD+QjgCgt8uWm/EHUhIA9HbZ8jL+QFo+BUBXu0nLyfgDqTkBAIABCQB6y3oHPX988Xo6wHjeABISAPSW+QhdBABpCQB6e99yEwFASgKA3t61/EQAkI4AoLc/Wg0iAEjFxwDpzh8DAtieEwAieNvqcBIApOAEgO72YzmfAlQaTScBQGhOAOhuP5L/brU4CQBCcwJACPuh/L3VeRfgMycBQEhOAAhhP5A/ttxfDHQfJwFASAKAMKYImO+Wf231iAAgHAFAKFMEzO8CvG71iAAgFO8AENI0lL+0miHgnQAgBAFAWCIAYD0CgNBEAMA6BADhiQCA5QkAUhABAMsSAKQhAgCWIwBIRQQALEMAkI4IADifACAlEQBwHgFAWiIA4HQCgNREAMBpBADpiQCA4wkAShABAMcRAJQhAgAOJwAoRQQAHEYAUI4IAHiaAKAkEQDwOAFAWSIA4GECgNJEAMD9BADliQCAuwQAQxABAF8TAAxDBAD8TQAwFBEA8IkAYDgiAEAAMCgRAIxOADAsEQCMTAAwNBEAjEoAMDwRAIxIAEATAcB4BADsiQBgJAIAviACgFEIAPiGCABGIADgHiIAqE4AwANEAFCZAIBHiACgKgEATxABQEUCAA4gAoBqBAAcSAQAlQgAOIIIAKoQAHAkEQBUIADgBCIAyE4AwIlEAJCZAIAziAAgKwEAZxIBQEYCABYgAoBsBAAsRAQAmQgAWJAIALIQALAwEQBkIABgBSIAiE4AwEpEABCZAIAViQAgKgEAKxMBQEQCADYgAoBoBABsRAQAkQgA2JAIAKIQALAxEQBEIACgAxEA9CYAoBMRAPQkAKAjEQD0IgCgMxEA9CAAIAARAGxNAEAQIgDYkgCAQEQAsBUBAMGIAGALAgACEgHA2gQABCUCgDUJAAhMBABrEQAQnAgA1iAAIAERACxNAEASIgBYkgCAREQAsBQBAMmIAGAJAgASEgHAuQQAJCUCgHMIAEhMBACnEgCQnAgATiEAoAARABxLAEARIgA4hgCAQkQAcCgBAMWIAOAQAgAKEgHAUwQAFCUCgMcIAChMBAAPEQBQnAgA7iMAYAAiAPiWAIBBiADgSwIABiICgM8EAAxGBAAzAQADEgGAAIBBiQAYmwCAgYkAGJcAgMGJABiTAABEAAxIAAAfiQAYiwAA/iICYBwCAPiKCIAxCADgDhEA9QkA4F4iAGoTAMCDRADUJQCAR4kAqEkAAE8SAVCPAAAOIgKgFgEAHEwEQB0CADiKCIAaBABwNBEA+QkA4CQiAHITAMDJRADkJQCAs4gAyEkAAGcTAZCPAAAWIQIgFwEALEYEQB4CAFiUCIAcBACwOBEA8QkAYBUiAGITAMBqRADEJQCAVYkAiEkAAKsTARCPAAA2IQIgFgEAbEYEQBwCANiUCIAYBACwOREA/QkAoAsRAH0JAKAbEQD9CACgKxEAfQgAoDsRANsTAEAIIgC2JQCAMEQAbOdZAwhiGshfW80AeDFdvzUIRAAAoRSOgH9NJxyvGgThEQAQUtHHAfMjgO+nyLlt0JkTACCkoicBz5tHAQQhAICwikbA1XS6cdWgMwEAhFY0An5q0Jl3AIAUir0TML8L8J2PBdKTEwAghWInAfO7AC8bdCQAgDSKRcBVg44EAJBKoQh40aAjAQCkUyQCLht05CVAIK3sLwZOIeN3MN04AQDSKvy1wbA6AQCkJgLgNAIASC9pBNw26EgAACUkjIDbBh0JAKCMZBFw26AjAQCUkigC3jUAYFnzRwR3sV02AGB5u7gRcN2gM48AgLICPw542wCAde1inQTcNABgG7s4EfBDAwC2s+sfAW8aALC9jhFwM13PGwDQR4cIuNn52B8A9LdhBNwYfwAIZBrmV9P1Ybee340/AAQ0D/T+Ln1pb3ae+QNAbNNY/7xQCFxP18sGAOSxD4Hr3XE+7O/4DT9pXDQA7tgf38+D/mJ/fXmc/+f+ej9fFxcX/2sAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABU9n/G+xQHTFSybwAAAABJRU5ErkJggg==",u5={class:"reset-password-screen"},h5={class:"email-info"},d5={class:"input-group"},f5={class:"input-container"},p5=["disabled"],g5={class:"input-group"},m5={class:"input-container"},y5=["disabled"],v5=["disabled"],A5={key:1,class:"loading-container"},w5={__name:"ResetPasswordPage",setup(n){const e=Cn(),t=VE(),s=$(""),r=$(""),i=$(!1),o=$(""),a=$(!1),l=$("");Mt(()=>{if(o.value=t.query.token||"",!o.value){alert("Invalid reset link. Please request a new password reset."),e.push("/forgot-password");return}const f=Ww(o.value);if(!f){alert("Reset link has expired or is invalid. Please request a new password reset."),e.push("/forgot-password");return}a.value=!0,l.value=f.email});const c=()=>{e.push("/login")},h=async f=>{if(f.preventDefault(),!s.value.trim()||!r.value.trim()){alert("Please enter new password and confirm it.");return}if(s.value!==r.value){alert("Passwords do not match.");return}if(s.value.length<6){alert("Password must be at least 6 characters long.");return}i.value=!0;try{const p=Ww(o.value);if(!p){alert("Reset link has expired. Please request a new password reset."),e.push("/forgot-password");return}const m=JSON.parse(localStorage.getItem("users")||"[]"),_=m.findIndex(A=>A.email===p.email);if(_===-1){alert("User not found."),i.value=!1;return}const v=await vf(s.value);m[_].password=v,localStorage.setItem("users",JSON.stringify(m)),j6(o.value),alert("Password has been reset successfully. Please login with your new password."),e.push("/login")}catch(p){console.error("Password reset error:",p),alert("An error occurred while resetting password. Please try again.")}finally{i.value=!1}};return(f,p)=>(B(),M("div",u5,[d("button",{class:"back-button",onClick:c},[...p[2]||(p[2]=[d("img",{src:c5,alt:"back-button",width:"20px"},null,-1)])]),p[6]||(p[6]=d("h1",{class:"reset-password-title"},"Reset Password",-1)),a.value?(B(),M("form",{key:0,onSubmit:h,class:"reset-password-form"},[d("p",h5,"Reset password for: "+E(l.value),1),d("div",d5,[d("div",f5,[p[3]||(p[3]=d("span",{class:"input-text-label"},"password",-1)),tn(d("input",{type:"password","onUpdate:modelValue":p[0]||(p[0]=m=>s.value=m),class:"input-field",placeholder:"Enter new password",required:"",disabled:i.value},null,8,p5),[[bs,s.value]])])]),d("div",g5,[d("div",m5,[p[4]||(p[4]=d("span",{class:"input-text-label"},"password",-1)),tn(d("input",{type:"password","onUpdate:modelValue":p[1]||(p[1]=m=>r.value=m),class:"input-field",placeholder:"Confirm new password",required:"",disabled:i.value},null,8,y5),[[bs,r.value]])])]),d("button",{type:"submit",class:"reset-button",disabled:i.value},E(i.value?"Resetting...":"Reset Password"),9,v5)],32)):(B(),M("div",A5,[...p[5]||(p[5]=[d("p",null,"Validating reset link...",-1)])]))]))}},_5=Wt(w5,[["__scopeId","data-v-3509f8b7"]]),E5="/tdl/assets/tul1-CuZ0qR5D.png",b5="/tdl/assets/tul2-Cj7OkHg6.png",I5="/tdl/assets/tul3-CaPMxBJ-.png",C5="/tdl/assets/tul5-CQc-0WLd.png",T5="/tdl/assets/tul6-COB-AGqQ.png",S5="/tdl/assets/energyIcon-BrO4HZx-.png",Fg="/tdl/assets/pointIcon-Cel8s0wp.png",vd="/tdl/assets/coinIcon-NUhL-dlJ.png",NT="/tdl/assets/catPoint-t6vwZH27.png",P5="/tdl/assets/shopIcon-Cs4Crcae.png",R5="/tdl/assets/setting-CxNpDL9x.png",Kw=4e3,DT=(n,e={value:Kw})=>{const t=new Date().toDateString(),s=localStorage.getItem("energyLastDate"),r=localStorage.getItem("currentEnergy"),i=typeof e.value=="number"?e.value:parseInt(e.value,10)||Kw;if(s!==t)n.value=i,localStorage.setItem("energyLastDate",t),localStorage.setItem("currentEnergy",i.toString());else if(r){const o=parseInt(r,10)||0;n.value=Math.max(0,Math.min(o,i))}else n.value=i,localStorage.setItem("energyLastDate",t),localStorage.setItem("currentEnergy",i.toString());typeof n.value!="number"&&(n.value=parseInt(n.value,10)||0)},x5={class:"headerCont"},k5={class:"headerBar"},N5={class:"resourceValue"},D5={class:"resourceValue"},O5={class:"resourceValue"},L5={class:"resourceValue"},B5={key:0,class:"rightIconButtons"},M5={__name:"Header",props:{hideRightIcons:{type:Boolean,default:!1}},setup(n){const e=$(localStorage.getItem("appLanguage")||"English");de(()=>Cs());const t=Cn(),s=hn(),r=de(()=>s.state.coins),i=de(()=>s.state.totalCoin),o=de(()=>s.state.catFragments),l=$((()=>{const w=localStorage.getItem("currentEnergy");if(w){const T=parseInt(w,10);return isNaN(T)?4e3:T}return 4e3})()),c=$(4e3),h=()=>{DT(l,c),typeof l.value!="number"&&(l.value=parseInt(l.value,10)||0)},f=de(()=>{let w=l.value;if(typeof w=="string"?w=parseInt(w,10):typeof w!="number"&&(w=Number(w)),isNaN(w)||w===null||w===void 0)return"0";const T=Math.floor(w);return A(T)});$(!1);const p=()=>{t.push("/settings")},m=()=>{t.push("/shop")},_=()=>{t.push("/nft")};let v=null;Mt(()=>{s.loadCurrentUser(),h(),v=setInterval(()=>{const T=localStorage.getItem("appLanguage")||"English";T!==e.value&&(e.value=T),h()},500);const w=()=>{s.loadCurrentUser(),h()};window.addEventListener("userDataUpdated",w),un(()=>{window.removeEventListener("userDataUpdated",w),v&&clearInterval(v)})});const A=s.formatNumber;return(w,T)=>(B(),M("header",null,[d("div",x5,[d("div",k5,[d("button",{class:"resourceItem energyItem",onClick:m},[T[0]||(T[0]=d("img",{src:S5,alt:"",class:"resourceIcon"},null,-1)),d("span",N5,E(f.value),1)]),d("button",{class:"resourceItem",onClick:m},[T[1]||(T[1]=d("img",{src:Fg,alt:"",class:"resourceIcon"},null,-1)),d("span",D5,E(Oe(A)(r.value)),1)]),d("button",{class:"resourceItem",onClick:m},[T[2]||(T[2]=d("img",{src:vd,alt:"",class:"resourceIcon"},null,-1)),d("span",O5,E(Oe(A)(i.value)),1)]),d("button",{class:"resourceItem",onClick:m},[T[3]||(T[3]=d("img",{src:NT,alt:"",class:"resourceIcon"},null,-1)),d("span",L5,E(Oe(A)(o.value)),1)])]),n.hideRightIcons?ce("",!0):(B(),M("div",B5,[d("button",{class:"iconButton nftButton",onClick:_,title:"NFT"},[...T[4]||(T[4]=[d("img",{src:P5,alt:"NFT",class:"icon-img"},null,-1)])]),d("button",{class:"iconButton settingsButton",onClick:p,title:""},[...T[5]||(T[5]=[d("div",{class:"iconCircle settingsIconCircle"},[d("img",{src:R5,alt:"",class:"icon-img"})],-1)])]),ce("",!0)]))])]))}},Zn=Wt(M5,[["__scopeId","data-v-b3f306da"]]),qw="/tdl/assets/tabIcon1-BMQwD5kb.png",Jw="/tdl/assets/tabIcon2-Ba9ZXsKV.png",Yw="/tdl/assets/tabIcon3-C85F2_hQ.png",Xw="/tdl/assets/tabIcon4-Dfn0WYn7.png",Zw="/tdl/assets/optionButton-k0xsRNG2.png",F5={class:"footerCont"},U5={class:"footerBar"},V5=["onClick"],$5={class:"tabContent"},H5=["src","alt"],G5={key:1,class:"tabEmoji"},Q5={__name:"Footer",setup(n){const e=Cn(),t=$("home"),s=$(localStorage.getItem("appLanguage")||"English"),r=de(()=>Cs()),i=h=>{h.key==="appLanguage"&&(s.value=h.newValue||"English")},o=()=>{switch(e.currentRoute.value.path){case"/main":t.value="game";break;case"/home":t.value="home";break;case"/exchange":t.value="exchange";break;case"/inventory":t.value="inventory";break;case"/factory":t.value="factory";break;case"/settings":t.value="settings";break;default:t.value="home"}};let a=null;Mt(()=>{o(),window.addEventListener("storage",i),a=setInterval(()=>{const h=localStorage.getItem("appLanguage")||"English";h!==s.value&&(s.value=h)},100)}),un(()=>{window.removeEventListener("storage",i),a&&clearInterval(a)}),Wr(()=>e.currentRoute.value.path,()=>{o()}),Wr(s,()=>{});const l=de(()=>[{id:"game",img:qw,imgActive:qw,label:r.value.game},{id:"inventory",img:Jw,imgActive:Jw,label:r.value.inventory},{id:"home",img:Yw,imgActive:Yw,label:r.value.home},{id:"exchange",img:Xw,imgActive:Xw,label:r.value.exchange},{id:"settings",img:Zw,imgActive:Zw,label:r.value.settings||"Settings"}]),c=h=>{switch(t.value=h,h){case"home":e.push("/home");break;case"game":e.push("/main");break;case"inventory":e.push("/inventory");break;case"exchange":e.push("/exchange");break;case"settings":e.push("/settings");break;case"factory":e.push("/factory");break}};return(h,f)=>(B(),M("footer",null,[d("div",F5,[d("div",U5,[(B(!0),M(Re,null,Xe(l.value,p=>(B(),M("div",{key:p.id,class:Ne(["tabItem",{active:t.value===p.id}]),onClick:m=>c(p.id)},[d("div",$5,[p.img?(B(),M("img",{key:0,src:t.value===p.id?p.imgActive:p.img,alt:p.label,class:"tabIcon"},null,8,H5)):ce("",!0),p.emoji?(B(),M("span",G5,E(p.emoji),1)):ce("",!0)])],10,V5))),128))])])]))}},es=Wt(Q5,[["__scopeId","data-v-ef77f498"]]);function Hr(n){return(n+1)*100}function j5(n){if(!n)return!1;const e=n.exp||0,t=n.maxExp||Hr(n.level||1);return e>=t}function bp(n){return n*50}function z5(n){if(!n||!n.rarity)return 5;const e={common:1,rare:1.1,epic:1.2,legendary:1.3},t=5,s=e[n.rarity]||1;return Math.floor(t*s)}function Ad(n){return n&&{...n,exp:n.exp!==void 0?n.exp:0,maxExp:n.maxExp!==void 0?n.maxExp:Hr(n.level||1)}}const W5="/tdl/assets/mainTab1-2-yTW8RB.png",K5="/tdl/assets/mainTab1_off-CYH0tU-A.png",q5="/tdl/assets/mainTab2-DYAFv8pb.png",J5="/tdl/assets/mainTab2_off-Cd7YzEgp.png",Y5="/tdl/assets/mainTab3-SUKPiFtY.png",X5="/tdl/assets/mainTab3_off-BBdSbCVr.png",Z5="/tdl/assets/mainTab4-wBIEQHF7.png",e8="/tdl/assets/mainTab4_off-BKjmP7bC.png",lh="/tdl/assets/plusMini-HInupkEh.png",t8="/tdl/assets/energyMini-BWyfGT5k.png",n8={class:"mainScreen"},s8={class:"mainContent"},r8={class:"modeTabs"},i8=["src"],o8={class:"modeTabLevel"},a8=["src"],l8={class:"modeTabLevel"},c8=["src"],u8={class:"modeTabLevel"},h8=["src"],d8={class:"modeTabLevel"},f8={class:"clickerArea"},p8={class:"totalPointsDisplay"},g8={class:"pointAnimations"},m8={class:"clickerAndEnergyContainer"},y8={class:"energySection"},v8=["src"],A8={class:"energyBar"},w8={class:"energyText"},_8={class:"clickerButtonContainer"},E8={key:1,class:"completeMessageContainer"},b8={class:"completeMessageText"},I8={class:"rewardInfo"},C8={class:"rewardItem"},T8={key:0,class:"rewardItem"},S8={key:1,class:"completeMessageContainer"},P8={class:"completeMessageText"},R8={class:"rewardInfo"},x8={class:"rewardItem"},k8={key:0,class:"rewardItem"},N8={key:1,class:"completeMessageContainer"},D8={class:"completeMessageText"},O8={class:"rewardInfo"},L8={class:"rewardItem"},B8={key:0,class:"rewardItem"},M8={key:1,class:"completeMessageContainer"},F8={class:"completeMessageText"},U8={class:"rewardInfo"},V8={class:"rewardItem"},$8={key:0,class:"rewardItem"},H8={class:"catsSection"},G8={class:"catsListScroll"},Q8=["onClick"],j8={key:0,class:"catImage"},z8=["src"],W8={key:1,class:"emptySlotContent"},K8=["src"],q8=["onClick"],J8={key:0,class:"catImage"},Y8=["src"],X8={key:1,class:"emptySlotContent"},Z8=["src"],e9=["onClick"],t9={key:0,class:"catImage"},n9=["src"],s9={key:1,class:"emptySlotContent"},r9=["src"],i9=["onClick"],o9={key:0,class:"catImage"},a9=["src"],l9={key:1,class:"emptySlotContent"},c9=["src"],u9={class:"speechBubbles"},h9={class:"catEmojis"},d9=["src","onError"],f9={class:"catSelectPopupHeader"},p9={class:"catSelectPopupBody"},g9={key:0,class:"removeCatSection"},m9={class:"availableCatsGrid"},y9=["onClick"],v9={class:"availableCatImage"},A9=["src"],w9={class:"availableCatInfo"},_9={class:"availableCatName"},E9={class:"availableCatLevel"},b9={class:"availableCatStars"},I9={__name:"MainScreen",setup(n){const e=hn(),t=de(()=>Cs()),s=Cn(),r=$(null),i=$("mining"),o=de(()=>e.state.coins),a=de(()=>e.state.coins),l=de(()=>e.state.totalCoin),c=de(()=>e.state.catFragments),h=de(()=>i.value==="mining"?w.value:i.value==="hunting"?k.value:i.value==="exploration"?x.value:i.value==="production"?he.value:0),f=async J=>{try{await e.updateCoins(J)||console.error("  ")}catch(se){console.error("    :",se)}},p=async J=>{try{await e.updateCatFragments(J)||console.error("   ")}catch(se){console.error("     :",se)}},m=$([]),_=$([]),v=$([]),A=$(null),w=$(0),T=$(0),P=$(1),U=$(!1),W=$(!0),q=$({points:0,fragments:0}),x=$(0),I=$(0),S=$(1),C=$(!1),b=$(!0),N=$({points:0,fragments:0}),k=$(0),Se=$(0),ne=$(1),V=$(!1),D=$(!0),z=$({points:0,fragments:0}),he=$(0),ke=$(0),Te=$(1),Ve=$(!1),ze=$(!0),ft=$({points:0,fragments:0}),pt=J=>Math.pow(2,J-1),yt=(J,se)=>!J||!Array.isArray(J)?0:J.reduce((X,me)=>me&&me[se]?X+(me[se]||0):X,0),Z=()=>yt($e.value,"miningEfficiency"),pe=()=>yt(Nt.value,"huntingDamage"),ue=()=>yt(sn.value,"explorationReward"),we=()=>yt(Vt.value,"productionSpeed"),Qe=async(J,se)=>{if(!J||J.length===0)return;const X=At();if(!X)return;const me=X.gameData?.inventory||[],Pe=J.filter(We=>We!==null).map(We=>We.id);if(Pe.length===0)return;const Je=me.map(We=>{if(Pe.includes(We.id)){const Ce=Ad(We),ht=(Ce.exp||0)+se,Ln=Ce.level||1,Ht=Hr(Ln);return{...Ce,exp:ht,maxExp:Ht}}return Ad(We)});try{await e.updateGameData({inventory:Je})}catch(We){console.error("NFT   :",We)}},O=J=>{i.value=J},L=()=>{s.currentRoute.value.path==="/main"&&i.value==="main"&&(i.value="mining")};Mt(()=>{if(r.value=At(),!r.value){const se={id:"guest_"+Date.now(),email:"guest@tdl.com",name:"Guest",loginType:"guest",gameData:{level:1,coins:0,totalCoin:0,catFragments:50,nftCount:0,miningLevel:1,huntingLevel:1,explorationLevel:1,productionLevel:1,planetLevel:1,planetEnergy:0,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}};localStorage.setItem("currentUser",JSON.stringify(se)),sessionStorage.setItem("currentUser",JSON.stringify(se)),r.value=se}if(e.loadCurrentUser(),r.value){P.value=r.value.gameData?.miningLevel||1,T.value=r.value.gameData?.miningTotalClicks||0,ne.value=r.value.gameData?.huntingLevel||1,Se.value=r.value.gameData?.huntingTotalClicks||0,S.value=r.value.gameData?.explorationLevel||1,I.value=r.value.gameData?.explorationTotalClicks||0,Te.value=r.value.gameData?.productionLevel||1,ke.value=r.value.gameData?.productionTotalClicks||0,le.value=r.value.gameData?.planetLevel||1,ee.value=r.value.gameData?.planetEnergy||0;const se=X=>{const me=(X||[]).slice(0,4);return me.length===4?me:[...me,...Array(4-me.length).fill(null)]};r.value.gameData?.miningCats!==void 0&&($e.value=se(r.value.gameData.miningCats)),r.value.gameData?.huntingCats!==void 0&&(Nt.value=se(r.value.gameData.huntingCats)),r.value.gameData?.explorationCats!==void 0&&(sn.value=se(r.value.gameData.explorationCats)),r.value.gameData?.productionCats!==void 0&&(Vt.value=se(r.value.gameData.productionCats))}DT(j,F),Wr(()=>s.currentRoute.value.path,()=>{L()});try{A.value=new Audio,A.value.src=new URL("/tdl/assets/clickbgm-BvbCQtA-.mp3",import.meta.url).href,A.value.volume=.3}catch{}const J=()=>{!G()&&A.value&&(A.value.pause(),A.value.currentTime=0)};window.addEventListener("soundSettingChanged",J),Kt("mining"),Kt("hunting"),Kt("exploration"),Kt("production"),un(()=>{wf(),window.removeEventListener("soundSettingChanged",J)})});const G=()=>{const J=localStorage.getItem("soundEnabled");return J!==null?J==="true":!0},te=async J=>{if(A.value&&G()&&(A.value.currentTime=0,A.value.play().catch(()=>{})),j.value<Q.value){alert(" !");return}if(ge()){if(J==="mining"){if(w.value++,T.value++,T.value>=P.value*1e3){P.value++;const se={id:Date.now(),text:`${t.value.mining} ${t.value.levelUp} Lv.${P.value}`,x:Math.random()*(Math.min(window.innerWidth||500,500)-220-40)+20,y:Math.random()*(window.innerHeight||500)+100};if(m.value.push(se),setTimeout(()=>{const X=m.value.findIndex(me=>me.id===se.id);X>-1&&m.value.splice(X,1)},3e3),r.value)try{await e.updateGameData({miningLevel:P.value,miningTotalClicks:T.value})}catch(X){console.error("   :",X)}}if(w.value>=10){const X=pt(P.value),me=Z()/100,Pe=Math.floor(100*X*(1+me)),Je=o.value+Pe;await f(Je),w.value=0,U.value=!0,W.value=!1,await xe();const We=Math.random();let Ce=0;We<.3?Ce=1:We<.4&&(Ce=2),q.value={points:Pe,fragments:Ce};const ht={id:Date.now(),points:Pe,x:50,y:20};if(v.value.push(ht),setTimeout(()=>{const De=v.value.findIndex(gt=>gt.id===ht.id);De>-1&&v.value.splice(De,1)},2e3),Ce>0){const De=c.value+Ce;c.value=De,await p(De);for(let gt=0;gt<Ce;gt++){const Gn=Math.floor(Math.random()*6)+1,Qn=Math.min(window.innerWidth||500,500),ys=window.innerHeight||800,qt=60,St=30,Pn={id:Date.now()+gt,x:Math.random()*(Qn-qt-St*2)+St,y:Math.random()*(ys-qt-St*2-200)+100,imageId:Gn};_.value.push(Pn),setTimeout(()=>{const Rn=_.value.findIndex(Ts=>Ts.id===Pn.id);Rn>-1&&_.value.splice(Rn,1)},2e3)}}if(r.value)try{await e.updateGameData({miningTotalClicks:T.value,miningLevel:P.value})}catch(De){console.error("   :",De)}const Ln=Math.min(window.innerWidth||500,500),Ht=window.innerHeight||800,gs=220,ms=Ce>0?80:60,Qt=20,Sn=Math.round(Z());let pn=`${t.value.miningComplete}
${Pe.toLocaleString()} ${t.value.pointsEarned}`;Sn>0&&(pn+=`
(NFT Bonus: +${Sn}%)`),Ce>0&&(pn+=`
${t.value.fragmentsEarned} ${Ce} ${t.value.fragmentsEarnedCount}`);const Tt={id:Date.now(),text:pn,x:Math.random()*(Ln-gs-Qt*2)+Qt,y:Math.random()*(Ht-ms-Qt*2-200)+100};m.value.push(Tt),setTimeout(()=>{const De=m.value.findIndex(gt=>gt.id===Tt.id);De>-1&&m.value.splice(De,1)},3e3),setTimeout(()=>{U.value=!1,W.value=!0,q.value={points:0,fragments:0}},1500)}else{const se=Math.min(window.innerWidth||500,500),X=window.innerHeight||800,me=220,Pe=60,Je=20,We={id:Date.now(),text:`${t.value.miningProgress}: ${w.value}/10`,x:Math.random()*(se-me-Je*2)+Je,y:Math.random()*(X-Pe-Je*2-200)+100};m.value.push(We),setTimeout(()=>{const Ce=m.value.findIndex(ht=>ht.id===We.id);Ce>-1&&m.value.splice(Ce,1)},2e3)}}else if(J==="exploration"){if(x.value++,I.value++,I.value>=S.value*1e3){S.value++;const se={id:Date.now(),text:`${t.value.exploration} ${t.value.levelUp} Lv.${S.value}`,x:Math.random()*(Math.min(window.innerWidth||500,500)-220-40)+20,y:Math.random()*(window.innerHeight||500)+100};if(m.value.push(se),setTimeout(()=>{const X=m.value.findIndex(me=>me.id===se.id);X>-1&&m.value.splice(X,1)},3e3),r.value)try{await e.updateGameData({explorationLevel:S.value,explorationTotalClicks:I.value})}catch(X){console.error("   :",X)}}if(x.value>=10){const X=pt(S.value),me=ue()/100,Pe=Math.floor(100*X*(1+me)),Je=o.value+Pe;await f(Je),x.value=0,C.value=!0,b.value=!1,await xe();const We=Math.random();let Ce=0;We<.3?Ce=1:We<.4&&(Ce=2),N.value={points:Pe,fragments:Ce};const ht={id:Date.now(),points:Pe,x:50,y:20};if(v.value.push(ht),setTimeout(()=>{const De=v.value.findIndex(gt=>gt.id===ht.id);De>-1&&v.value.splice(De,1)},2e3),await Qe(sn.value,10),Ce>0){const De=c.value+Ce;c.value=De,await p(De);for(let gt=0;gt<Ce;gt++){const Gn=Math.floor(Math.random()*6)+1,Qn=Math.min(window.innerWidth||500,500),ys=window.innerHeight||800,qt=60,St=30,Pn={id:Date.now()+gt,x:Math.random()*(Qn-qt-St*2)+St,y:Math.random()*(ys-qt-St*2-200)+100,imageId:Gn};_.value.push(Pn),setTimeout(()=>{const Rn=_.value.findIndex(Ts=>Ts.id===Pn.id);Rn>-1&&_.value.splice(Rn,1)},2e3)}}if(r.value)try{await e.updateGameData({explorationTotalClicks:I.value,explorationLevel:S.value})}catch(De){console.error("   :",De)}const Ln=Math.min(window.innerWidth||500,500),Ht=window.innerHeight||800,gs=220,ms=Ce>0?80:60,Qt=20,Sn=Math.round(ue());let pn=`${t.value.explorationComplete}
${Pe.toLocaleString()} ${t.value.pointsEarned}`;Sn>0&&(pn+=`
(NFT Bonus: +${Sn}%)`),Ce>0&&(pn+=`
${t.value.fragmentsEarned} ${Ce} ${t.value.fragmentsEarnedCount}`);const Tt={id:Date.now(),text:pn,x:Math.random()*(Ln-gs-Qt*2)+Qt,y:Math.random()*(Ht-ms-Qt*2-200)+100};m.value.push(Tt),setTimeout(()=>{const De=m.value.findIndex(gt=>gt.id===Tt.id);De>-1&&m.value.splice(De,1)},3e3),setTimeout(()=>{C.value=!1,b.value=!0,N.value={points:0,fragments:0}},1500)}else{const se=Math.min(window.innerWidth||500,500),X=window.innerHeight||800,me=220,Pe=60,Je=20,We={id:Date.now(),text:`${t.value.explorationProgress}: ${x.value}/10`,x:Math.random()*(se-me-Je*2)+Je,y:Math.random()*(X-Pe-Je*2-200)+100};m.value.push(We),setTimeout(()=>{const Ce=m.value.findIndex(ht=>ht.id===We.id);Ce>-1&&m.value.splice(Ce,1)},2e3)}}else if(J==="hunting"){if(k.value++,Se.value++,Se.value>=ne.value*1e3){ne.value++;const se={id:Date.now(),text:`${t.value.hunting} ${t.value.levelUp} Lv.${ne.value}`,x:Math.random()*(Math.min(window.innerWidth||500,500)-220-40)+20,y:Math.random()*(window.innerHeight||500)+100};if(m.value.push(se),setTimeout(()=>{const X=m.value.findIndex(me=>me.id===se.id);X>-1&&m.value.splice(X,1)},3e3),r.value)try{await e.updateGameData({huntingLevel:ne.value,huntingTotalClicks:Se.value})}catch(X){console.error("   :",X)}}if(k.value>=10){const X=pt(ne.value),me=pe()/100,Pe=Math.floor(100*X*(1+me)),Je=o.value+Pe;await f(Je),k.value=0,V.value=!0,D.value=!1,await xe();const We=Math.random();let Ce=0;We<.3?Ce=1:We<.4&&(Ce=2),z.value={points:Pe,fragments:Ce};const ht={id:Date.now(),points:Pe,x:50,y:20};if(v.value.push(ht),setTimeout(()=>{const Tt=v.value.findIndex(De=>De.id===ht.id);Tt>-1&&v.value.splice(Tt,1)},2e3),await Qe(Nt.value,10),Ce>0){const Tt=c.value+Ce;c.value=Tt,await p(Tt);for(let De=0;De<Ce;De++){const gt=Math.floor(Math.random()*6)+1,Gn=Math.min(window.innerWidth||500,500),Qn=window.innerHeight||800,ys=60,qt=30,St={id:Date.now()+De,x:Math.random()*(Gn-ys-qt*2)+qt,y:Math.random()*(Qn-ys-qt*2-200)+100,imageId:gt};_.value.push(St),setTimeout(()=>{const Pn=_.value.findIndex(Rn=>Rn.id===St.id);Pn>-1&&_.value.splice(Pn,1)},2e3)}}if(r.value)try{await e.updateGameData({huntingTotalClicks:Se.value,huntingLevel:ne.value})}catch(Tt){console.error("   :",Tt)}const Ln=Math.min(window.innerWidth||500,500),Ht=window.innerHeight||800,gs=220,ms=Ce>0?80:60,Qt=20;let Sn=`${t.value.huntingComplete}
${Pe.toLocaleString()} ${t.value.pointsEarned}`;Ce>0&&(Sn+=`
${t.value.fragmentsEarned} ${Ce} ${t.value.fragmentsEarnedCount}`);const pn={id:Date.now(),text:Sn,x:Math.random()*(Ln-gs-Qt*2)+Qt,y:Math.random()*(Ht-ms-Qt*2-200)+100};m.value.push(pn),setTimeout(()=>{const Tt=m.value.findIndex(De=>De.id===pn.id);Tt>-1&&m.value.splice(Tt,1)},3e3),setTimeout(()=>{V.value=!1,D.value=!0,z.value={points:0,fragments:0}},1500)}else{const se=Math.min(window.innerWidth||500,500),X=window.innerHeight||800,me=220,Pe=60,Je=20,We={id:Date.now(),text:`${t.value.huntingProgress}: ${k.value}/10`,x:Math.random()*(se-me-Je*2)+Je,y:Math.random()*(X-Pe-Je*2-200)+100};m.value.push(We),setTimeout(()=>{const Ce=m.value.findIndex(ht=>ht.id===We.id);Ce>-1&&m.value.splice(Ce,1)},2e3)}}else if(J==="production"){if(he.value++,ke.value++,ke.value>=Te.value*1e3){Te.value++;const se={id:Date.now(),text:`${t.value.production} ${t.value.levelUp} Lv.${Te.value}`,x:Math.random()*(Math.min(window.innerWidth||500,500)-220-40)+20,y:Math.random()*(window.innerHeight||500)+100};if(m.value.push(se),setTimeout(()=>{const X=m.value.findIndex(me=>me.id===se.id);X>-1&&m.value.splice(X,1)},3e3),r.value)try{await e.updateGameData({productionLevel:Te.value,productionTotalClicks:ke.value})}catch(X){console.error("   :",X)}}if(he.value>=10){const X=pt(Te.value),me=we()/100,Pe=Math.floor(100*X*(1+me)),Je=o.value+Pe;await f(Je),he.value=0,Ve.value=!0,ze.value=!1,await xe();const We=Math.random();let Ce=0;We<.3?Ce=1:We<.4&&(Ce=2),ft.value={points:Pe,fragments:Ce};const ht={id:Date.now(),points:Pe,x:50,y:20};if(v.value.push(ht),setTimeout(()=>{const De=v.value.findIndex(gt=>gt.id===ht.id);De>-1&&v.value.splice(De,1)},2e3),await Qe(Vt.value,10),Ce>0){const De=c.value+Ce;c.value=De,await p(De);for(let gt=0;gt<Ce;gt++){const Gn=Math.floor(Math.random()*6)+1,Qn=Math.min(window.innerWidth||500,500),ys=window.innerHeight||800,qt=60,St=30,Pn={id:Date.now()+gt,x:Math.random()*(Qn-qt-St*2)+St,y:Math.random()*(ys-qt-St*2-200)+100,imageId:Gn};_.value.push(Pn),setTimeout(()=>{const Rn=_.value.findIndex(Ts=>Ts.id===Pn.id);Rn>-1&&_.value.splice(Rn,1)},2e3)}}if(r.value)try{await e.updateGameData({productionTotalClicks:ke.value,productionLevel:Te.value})}catch(De){console.error("   :",De)}const Ln=Math.min(window.innerWidth||500,500),Ht=window.innerHeight||800,gs=220,ms=Ce>0?80:60,Qt=20,Sn=Math.round(we());let pn=`${t.value.productionComplete}
${Pe.toLocaleString()} ${t.value.pointsEarned}`;Sn>0&&(pn+=`
(NFT Bonus: +${Sn}%)`),Ce>0&&(pn+=`
${t.value.fragmentsEarned} ${Ce} ${t.value.fragmentsEarnedCount}`);const Tt={id:Date.now(),text:pn,x:Math.random()*(Ln-gs-Qt*2)+Qt,y:Math.random()*(Ht-ms-Qt*2-200)+100};m.value.push(Tt),setTimeout(()=>{const De=m.value.findIndex(gt=>gt.id===Tt.id);De>-1&&m.value.splice(De,1)},3e3),setTimeout(()=>{Ve.value=!1,ze.value=!0,ft.value={points:0,fragments:0}},1500)}else{const se=Math.min(window.innerWidth||500,500),X=window.innerHeight||800,me=220,Pe=60,Je=20,We={id:Date.now(),text:`${t.value.productionProgress}: ${he.value}/10`,x:Math.random()*(se-me-Je*2)+Je,y:Math.random()*(X-Pe-Je*2-200)+100};m.value.push(We),setTimeout(()=>{const Ce=m.value.findIndex(ht=>ht.id===We.id);Ce>-1&&m.value.splice(Ce,1)},2e3)}}}};$(0),$(!1),$({stone:0,iron:0,gold:0,diamond:0});const j=$(4e3),F=$(4e3),Q=$(1),ee=$(0),ae=$(2e3),le=$(1),xe=async()=>{if(ee.value=Math.min(ae.value,ee.value+50),ee.value>=ae.value){if(i.value==="mining"?P.value++:i.value==="hunting"?ne.value++:i.value==="exploration"?S.value++:i.value==="production"&&Te.value++,ee.value=0,r.value)try{const J={planetEnergy:ee.value,miningLevel:P.value,huntingLevel:ne.value,explorationLevel:S.value,productionLevel:Te.value};await e.updateGameData(J)}catch(J){console.error("   :",J)}}else if(r.value)try{await e.updateGameData({planetEnergy:ee.value})}catch(J){console.error("   :",J)}},ge=(J=Q.value)=>j.value>=J?(j.value=Math.max(0,j.value-J),localStorage.setItem("currentEnergy",j.value.toString()),localStorage.setItem("energyLastDate",new Date().toDateString()),!0):!1,Ee=J=>{try{return new URL(Object.assign({"../assets/img/cat1.png":Yc,"../assets/img/cat10.png":Xc,"../assets/img/cat11.png":Zc,"../assets/img/cat12.png":eu,"../assets/img/cat13.png":tu,"../assets/img/cat14.png":nu,"../assets/img/cat15.png":su,"../assets/img/cat16.png":ru,"../assets/img/cat17.png":iu,"../assets/img/cat18.png":ou,"../assets/img/cat19.png":au,"../assets/img/cat2.png":lu,"../assets/img/cat20.png":cu,"../assets/img/cat21.png":uu,"../assets/img/cat22.png":hu,"../assets/img/cat23.png":du,"../assets/img/cat24.png":fu,"../assets/img/cat25.png":pu,"../assets/img/cat26.png":gu,"../assets/img/cat27.png":mu,"../assets/img/cat28.png":yu,"../assets/img/cat29.png":vu,"../assets/img/cat3.png":Au,"../assets/img/cat30.png":wu,"../assets/img/cat4.png":_u,"../assets/img/cat5.png":Eu,"../assets/img/cat6.png":bu,"../assets/img/cat7.png":Iu,"../assets/img/cat8.png":Cu,"../assets/img/cat9.png":Tu,"../assets/img/catPoint.png":Su,"../assets/img/catPointPlus.png":Pu,"../assets/img/catProfile01.png":Ru,"../assets/img/catProfile02.png":xu,"../assets/img/cat_ico.png":ku})[`../assets/img/cat${J}.png`],import.meta.url).href}catch{return`/src/assets/img/cat${J}.png`}},Be=J=>{try{return new URL(Object.assign({"../assets/img/tul1.png":E5,"../assets/img/tul2.png":b5,"../assets/img/tul3.png":I5,"../assets/img/tul5.png":C5,"../assets/img/tul6.png":T5})[`../assets/img/tul${J}.png`],import.meta.url).href}catch{return`/src/assets/img/tul${J}.png`}},nt=J=>{const se=_.value.findIndex(X=>X.id===J);se>-1&&_.value.splice(se,1)},$e=$([null,null,null,null]),st=$(!1),it=$(-1),dn=$([]),ts=()=>{const J=new Set;return $e.value.forEach(se=>{se&&se.id&&J.add(se.id)}),Nt.value.forEach(se=>{se&&se.id&&J.add(se.id)}),sn.value.forEach(se=>{se&&se.id&&J.add(se.id)}),Vt.value.forEach(se=>{se&&se.id&&J.add(se.id)}),J},ns=()=>{const J=At();if(J){const se=J.gameData?.inventory||[],X=ts(),me=ps();me&&me.id&&X.delete(me.id),dn.value=se.filter(Pe=>!X.has(Pe.id))}else dn.value=[]},ps=()=>{const J=Tn.value,se=it.value;if(se<0||se>=4)return null;let X=null;return J==="mining"?X=$e.value:J==="hunting"?X=Nt.value:J==="exploration"?X=sn.value:J==="production"&&(X=Vt.value),X&&X[se]?X[se]:null},js=(J,se,X)=>{Tn.value=se,ns(),it.value=J,st.value=!0},wn=async J=>{if(it.value>=0&&it.value<4){const se={id:J.id,level:J.level||1,stars:J.stars||1,imageId:J.imageId||J.id,name:J.name,miningEfficiency:J.miningEfficiency||0,huntingDamage:J.huntingDamage||0,explorationReward:J.explorationReward||0,productionSpeed:J.productionSpeed||0,rarity:J.rarity||null};let X=[];Tn.value==="mining"?X=$e.value:Tn.value==="hunting"?X=Nt.value:Tn.value==="exploration"?X=sn.value:Tn.value==="production"&&(X=Vt.value);const me=X.findIndex((Je,We)=>Je&&Je.id===J.id&&We!==it.value);if(me!==-1){X[me]=null;const Je=Tn.value,We=`${Je}_${me}_${J.id}`;Hn.value[Je][We]&&delete Hn.value[Je][We]}if(Tn.value==="mining"?($e.value[it.value]=se,Kt("mining")):Tn.value==="hunting"?(Nt.value[it.value]=se,Kt("hunting")):Tn.value==="exploration"?(sn.value[it.value]=se,Kt("exploration")):Tn.value==="production"&&(Vt.value[it.value]=se,Kt("production")),At())try{await e.updateGameData({miningCats:$e.value,huntingCats:Nt.value,explorationCats:sn.value,productionCats:Vt.value})}catch(Je){console.error("   :",Je)}}st.value=!1,it.value=-1,Tn.value="mining"},fn=async()=>{if(it.value>=0&&it.value<4){const J=Tn.value;let se=[];J==="mining"?se=$e.value:J==="hunting"?se=Nt.value:J==="exploration"?se=sn.value:J==="production"&&(se=Vt.value);const X=se[it.value];if(J==="mining"?($e.value[it.value]=null,Kt("mining")):J==="hunting"?(Nt.value[it.value]=null,Kt("hunting")):J==="exploration"?(sn.value[it.value]=null,Kt("exploration")):J==="production"&&(Vt.value[it.value]=null,Kt("production")),X&&X.id){const Pe=`${J}_${it.value}_${X.id}`;Hn.value[J][Pe]&&delete Hn.value[J][Pe]}if(At())try{await e.updateGameData({miningCats:$e.value,huntingCats:Nt.value,explorationCats:sn.value,productionCats:Vt.value})}catch(Pe){console.error("   :",Pe)}}st.value=!1,it.value=-1,Tn.value="mining"},hi=()=>{st.value=!1,it.value=-1,Tn.value="mining"},Nt=$([null,null,null,null]),sn=$([null,null,null,null]),Vt=$([null,null,null,null]),Tn=$("mining"),$t=$({mining:null,hunting:null,exploration:null,production:null}),Hn=$({mining:{},hunting:{},exploration:{},production:{}}),Kt=J=>{$t.value[J]&&(clearInterval($t.value[J]),$t.value[J]=null);let se=[];J==="mining"?se=$e.value:J==="hunting"?se=Nt.value:J==="exploration"?se=sn.value:J==="production"&&(se=Vt.value);const X=se.filter(me=>me!==null);X.length!==0&&(X.forEach((me,Pe)=>{const Je=`${J}_${Pe}_${me.id}`;Hn.value[J][Je]||(Hn.value[J][Je]=0)}),$t.value[J]=setInterval(async()=>{let me=[];J==="mining"?me=$e.value:J==="hunting"?me=Nt.value:J==="exploration"?me=sn.value:J==="production"&&(me=Vt.value);const Pe=me.filter(ht=>ht!==null);if(Pe.length===0){di(J);return}const We={mining:t.value.mining,hunting:t.value.hunting,exploration:t.value.exploration,production:t.value.production}[J]||"";let Ce=[];J==="mining"?Ce=$e.value:J==="hunting"?Ce=Nt.value:J==="exploration"?Ce=sn.value:J==="production"&&(Ce=Vt.value);for(const ht of Pe){const Ln=Ce.findIndex(De=>De&&De.id===ht.id);if(Ln===-1)continue;const Ht=`${J}_${Ln}_${ht.id}`;Hn.value[J][Ht]||(Hn.value[J][Ht]=0),Hn.value[J][Ht]+=1;const gs=Hn.value[J][Ht],ms=Math.min(window.innerWidth||500,500),Qt=window.innerHeight||800,Sn=220,pn=60,Tt=20;if(gs>=10){let De=1;J==="mining"?De=P.value:J==="hunting"?De=ne.value:J==="exploration"?De=S.value:J==="production"&&(De=Te.value);const gt=100,Gn=pt(De);let Qn=0;J==="mining"?Qn=Z()/100:J==="hunting"?Qn=pe()/100:J==="exploration"?Qn=ue()/100:J==="production"&&(Qn=we()/100);const ys=Math.floor(gt*Gn*(1+Qn)),qt=o.value+ys;o.value=qt,a.value=qt,await f(qt),Hn.value[J][Ht]=0;let St=[];J==="mining"?St=$e.value:J==="hunting"?St=Nt.value:J==="exploration"?St=sn.value:J==="production"&&(St=Vt.value),await Qe(St,10),await consumePlanetEnergy();const Pn=Math.random();let Rn=0;if(Pn<.3?Rn=1:Pn<.4&&(Rn=2),Rn>0){const Ts=c.value+Rn;if(await p(Ts),i.value===J)for(let Pr=0;Pr<Rn;Pr++){const Xo=Math.floor(Math.random()*6)+1,Zo=60,so=30,ul={id:Date.now()+Pr+Ln*1e3,x:Math.random()*(ms-Zo-so*2)+so,y:Math.random()*(Qt-Zo-so*2-200)+100,imageId:Xo};_.value.push(ul),setTimeout(()=>{const hl=_.value.findIndex(Nu=>Nu.id===ul.id);hl>-1&&_.value.splice(hl,1)},2e3)}}if(i.value===J){const Ts={id:Date.now()+Ln+ht.id*1e4,text:`${We} ${t.value.complete}! 100 ${t.value.coin} ${t.value.earned}!`,x:Math.random()*(ms-Sn-Tt*2)+Tt,y:Math.random()*(Qt-pn-Tt*2-200)+100};m.value.push(Ts),setTimeout(()=>{const Pr=m.value.findIndex(Xo=>Xo.id===Ts.id);Pr>-1&&m.value.splice(Pr,1)},3e3)}}else if(i.value===J){const De={id:Date.now()+Ln+ht.id*1e3+gs*100,text:`${We} ${t.value.progress}: ${gs}/10`,x:Math.random()*(ms-Sn-Tt*2)+Tt,y:Math.random()*(Qt-pn-Tt*2-200)+100};m.value.push(De),setTimeout(()=>{const gt=m.value.findIndex(Gn=>Gn.id===De.id);gt>-1&&m.value.splice(gt,1)},2e3)}}},1e3))},di=J=>{$t.value[J]&&(clearInterval($t.value[J]),$t.value[J]=null)},wf=()=>{Object.keys($t.value).forEach(J=>{di(J)})};return Wr(o,J=>{a.value=J}),Wr([$e,Nt,sn,Vt],()=>{["mining","hunting","exploration","production"].forEach(se=>{let X=[];se==="mining"?X=$e.value:se==="hunting"?X=Nt.value:se==="exploration"?X=sn.value:se==="production"&&(X=Vt.value);const me=X.map((Pe,Je)=>Pe?`${se}_${Je}_${Pe.id}`:null).filter(Pe=>Pe!==null);Object.keys(Hn.value[se]).forEach(Pe=>{me.includes(Pe)||delete Hn.value[se][Pe]})}),Kt("mining"),Kt("hunting"),Kt("exploration"),Kt("production")},{deep:!0}),$(0),$(!1),$([{name:"",level:1,hp:100,maxHp:100,exp:10,gold:5},{name:"",level:2,hp:150,maxHp:150,exp:20,gold:10},{name:"",level:3,hp:200,maxHp:200,exp:35,gold:20}]),$(null),$({level:1,exp:0,maxExp:100,hp:100,maxHp:100,attack:20}),$(0),$(!1),$(null),$([{name:" ",level:1,difficulty:"",rewards:["","",""],description:"      .",discovered:!0},{name:" ",level:2,difficulty:"",rewards:[" ","",""],description:"    .",discovered:!1},{name:" ",level:3,difficulty:"",rewards:[" "," "," "],description:"    .",discovered:!1}]),$({wood:0,fruit:0,herb:0,artifact:0,magicStone:0,gem:0,dragonScale:0,manaCrystal:0,rareGem:0}),$(0),$(!1),$(null),$({wood:10,stone:5,iron:3,gold:1,diamond:0,herb:8,fruit:12}),$([{id:"woodenSword",name:" ",level:1,materials:{wood:5,stone:2},result:{woodenSword:1},time:30,description:"  ."},{id:"ironSword",name:" ",level:2,materials:{wood:3,iron:5,stone:3},result:{ironSword:1},time:60,description:"  ."},{id:"healthPotion",name:" ",level:1,materials:{herb:3,fruit:2},result:{healthPotion:1},time:20,description:"  ."}]),$({woodenSword:0,ironSword:0,healthPotion:0}),(J,se)=>(B(),M("div",n8,[Ge(Zn,{coinCount:o.value,currentEnergy:j.value,maxEnergy:F.value,totalCoin:l.value,catCount:J.catCount},null,8,["coinCount","currentEnergy","maxEnergy","totalCoin","catCount"]),d("main",s8,[d("div",r8,[d("button",{class:Ne(["modeTab",{active:i.value==="mining"}]),onClick:se[0]||(se[0]=X=>O("mining"))},[d("img",{src:i.value==="mining"?Oe(W5):Oe(K5),alt:"Mining",class:"modeTabIcon"},null,8,i8),d("span",o8,"Lv."+E(P.value),1)],2),d("button",{class:Ne(["modeTab",{active:i.value==="hunting"}]),onClick:se[1]||(se[1]=X=>O("hunting"))},[d("img",{src:i.value==="hunting"?Oe(q5):Oe(J5),alt:"Hunting",class:"modeTabIcon"},null,8,a8),d("span",l8,"Lv."+E(ne.value),1)],2),d("button",{class:Ne(["modeTab",{active:i.value==="exploration"}]),onClick:se[2]||(se[2]=X=>O("exploration"))},[d("img",{src:i.value==="exploration"?Oe(Y5):Oe(X5),alt:"Exploration",class:"modeTabIcon"},null,8,c8),d("span",u8,"Lv."+E(S.value),1)],2),d("button",{class:Ne(["modeTab",{active:i.value==="production"}]),onClick:se[3]||(se[3]=X=>O("production"))},[d("img",{src:i.value==="production"?Oe(Z5):Oe(e8),alt:"Production",class:"modeTabIcon"},null,8,h8),d("span",d8,"Lv."+E(Te.value),1)],2)]),d("div",f8,[d("div",p8,E(h.value),1),d("div",g8,[(B(!0),M(Re,null,Xe(v.value,X=>(B(),M("div",{key:X.id,class:"pointAnimation",style:Ct({left:X.x+"%",top:X.y+"%"})}," +"+E(Oe(vh)(X.points)),5))),128))]),d("div",m8,[d("div",y8,[d("img",{src:Oe(t8),alt:"Energy",class:"energyIcon"},null,8,v8),d("div",A8,[d("div",{class:"energyFill",style:Ct({height:ee.value/ae.value*100+"%"})},null,4)]),d("span",w8,E(ee.value.toLocaleString())+"/"+E(ae.value.toLocaleString()),1)]),d("div",_8,[i.value==="mining"?(B(),M(Re,{key:0},[W.value&&!U.value?(B(),M("button",{key:0,onClick:se[4]||(se[4]=X=>te("mining")),class:Ne(["clickerBtn miningBtn",{"mining-active":w.value>0}])},null,2)):ce("",!0),U.value?(B(),M("div",E8,[d("div",b8,E(t.value.miningComplete),1),d("div",I8,[d("div",C8,E(q.value.points.toLocaleString())+" "+E(t.value.pointsEarned),1),q.value.fragments>0?(B(),M("div",T8,E(t.value.fragmentsEarned)+" "+E(q.value.fragments)+" "+E(t.value.fragmentsEarnedCount),1)):ce("",!0)])])):ce("",!0)],64)):ce("",!0),i.value==="hunting"?(B(),M(Re,{key:1},[D.value&&!V.value?(B(),M("button",{key:0,onClick:se[5]||(se[5]=X=>te("hunting")),class:Ne(["clickerBtn huntingBtn",{"hunting-active":k.value>0}])},null,2)):ce("",!0),V.value?(B(),M("div",S8,[d("div",P8,E(t.value.huntingComplete),1),d("div",R8,[d("div",x8,E(z.value.points.toLocaleString())+" "+E(t.value.pointsEarned),1),z.value.fragments>0?(B(),M("div",k8,E(t.value.fragmentsEarned)+" "+E(z.value.fragments)+" "+E(t.value.fragmentsEarnedCount),1)):ce("",!0)])])):ce("",!0)],64)):ce("",!0),i.value==="exploration"?(B(),M(Re,{key:2},[b.value&&!C.value?(B(),M("button",{key:0,onClick:se[6]||(se[6]=X=>te("exploration")),class:Ne(["clickerBtn explorationBtn",{"exploration-active":x.value>0}])},null,2)):ce("",!0),C.value?(B(),M("div",N8,[d("div",D8,E(t.value.explorationComplete),1),d("div",O8,[d("div",L8,E(N.value.points.toLocaleString())+" "+E(t.value.pointsEarned),1),N.value.fragments>0?(B(),M("div",B8,E(t.value.fragmentsEarned)+" "+E(N.value.fragments)+" "+E(t.value.fragmentsEarnedCount),1)):ce("",!0)])])):ce("",!0)],64)):ce("",!0),i.value==="production"?(B(),M(Re,{key:3},[ze.value&&!Ve.value?(B(),M("button",{key:0,onClick:se[7]||(se[7]=X=>te("production")),class:Ne(["clickerBtn productionBtn",{"production-active":he.value>0}])},null,2)):ce("",!0),Ve.value?(B(),M("div",M8,[d("div",F8,E(t.value.productionComplete),1),d("div",U8,[d("div",V8,E(ft.value.points.toLocaleString())+" "+E(t.value.pointsEarned),1),ft.value.fragments>0?(B(),M("div",$8,E(t.value.fragmentsEarned)+" "+E(ft.value.fragments)+" "+E(t.value.fragmentsEarnedCount),1)):ce("",!0)])])):ce("",!0)],64)):ce("",!0)])])]),d("div",H8,[d("div",G8,[i.value==="mining"?(B(!0),M(Re,{key:0},Xe($e.value,(X,me)=>(B(),M("div",{key:me,class:Ne(["catCard",{emptySlot:!X,working:X&&i.value==="mining"}]),onClick:Pe=>js(me,"mining")},[X?(B(),M("div",j8,[d("img",{src:Ee(X.imageId),alt:"Cat"},null,8,z8)])):ce("",!0),X?ce("",!0):(B(),M("div",W8,[d("img",{src:Oe(lh),alt:"+",class:"emptySlotIcon"},null,8,K8)]))],10,Q8))),128)):ce("",!0),i.value==="hunting"?(B(!0),M(Re,{key:1},Xe(Nt.value,(X,me)=>(B(),M("div",{key:me,class:Ne(["catCard",{emptySlot:!X,working:X&&i.value==="hunting"}]),onClick:Pe=>js(me,"hunting")},[X?(B(),M("div",J8,[d("img",{src:Ee(X.imageId),alt:"Cat"},null,8,Y8)])):ce("",!0),X?ce("",!0):(B(),M("div",X8,[d("img",{src:Oe(lh),alt:"+",class:"emptySlotIcon"},null,8,Z8)]))],10,q8))),128)):ce("",!0),i.value==="exploration"?(B(!0),M(Re,{key:2},Xe(sn.value,(X,me)=>(B(),M("div",{key:me,class:Ne(["catCard",{emptySlot:!X,working:X&&i.value==="exploration"}]),onClick:Pe=>js(me,"exploration")},[X?(B(),M("div",t9,[d("img",{src:Ee(X.imageId),alt:"Cat"},null,8,n9)])):ce("",!0),X?ce("",!0):(B(),M("div",s9,[d("img",{src:Oe(lh),alt:"+",class:"emptySlotIcon"},null,8,r9)]))],10,e9))),128)):ce("",!0),i.value==="production"?(B(!0),M(Re,{key:3},Xe(Vt.value,(X,me)=>(B(),M("div",{key:me,class:Ne(["catCard",{emptySlot:!X,working:X&&i.value==="production"}]),onClick:Pe=>js(me,"production")},[X?(B(),M("div",o9,[d("img",{src:Ee(X.imageId),alt:"Cat"},null,8,a9)])):ce("",!0),X?ce("",!0):(B(),M("div",l9,[d("img",{src:Oe(lh),alt:"+",class:"emptySlotIcon"},null,8,c9)]))],10,i9))),128)):ce("",!0)])])]),Ge(es),d("div",u9,[(B(!0),M(Re,null,Xe(m.value,X=>(B(),M("div",{key:X.id,class:"speechBubble",style:Ct({left:X.x+"px",top:X.y+"px",transform:"translateX(-50%)"})},E(X.text),5))),128))]),d("div",h9,[(B(!0),M(Re,null,Xe(_.value,X=>(B(),M("div",{key:X.id,class:"catEmoji",style:Ct({left:X.x+"px",top:X.y+"px"})},[d("img",{src:Be(X.imageId),alt:"",class:"tulImage",onError:me=>nt(X.id)},null,40,d9)],4))),128))]),st.value?(B(),M("div",{key:0,class:"catSelectPopupOverlay",onClick:hi},[d("div",{class:"catSelectPopupContent",onClick:se[8]||(se[8]=zn(()=>{},["stop"]))},[d("div",f9,[d("h3",null,E(t.value.selectCat),1),d("button",{class:"closePopupBtn",onClick:hi},"")]),d("div",p9,[ps()?(B(),M("div",g9,[d("button",{class:"removeCatBtn",onClick:fn},E(t.value.removeCat),1)])):ce("",!0),d("div",m9,[(B(!0),M(Re,null,Xe(dn.value,X=>(B(),M("div",{key:X.id,class:"availableCatCard",onClick:me=>wn(X)},[d("div",v9,[d("img",{src:Ee(X.imageId||X.id),alt:"Cat"},null,8,A9)]),d("div",w9,[d("div",_9,E(X.name),1),d("div",E9,"Lv "+E(String(X.level||1).padStart(2,"0")),1),d("div",b9,[(B(!0),M(Re,null,Xe(X.stars||1,me=>(B(),M("span",{key:me,class:"star"},""))),128))])])],8,y9))),128))])])])])):ce("",!0)]))}},C9=Wt(I9,[["__scopeId","data-v-c8e48d72"]]),T9={class:"miningPage"},S9={class:"mainContent"},P9={class:"miningContainer"},R9={class:"pageHeader"},x9={class:"levelInfo"},k9={class:"miningProgress"},N9={class:"progressBar"},D9={class:"progressText"},O9=["disabled"],L9={key:0},B9={key:1},M9={class:"resources"},F9={class:"resourceList"},U9={class:"resourceItem"},V9={class:"resourceItem"},$9={class:"resourceItem"},H9={class:"resourceItem"},G9={__name:"MiningPage",setup(n){const e=Cn(),t=hn(),s=de(()=>t.state.coins),r=de(()=>Cs());Mt(()=>{t.loadCurrentUser();const h=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",h),un(()=>{window.removeEventListener("userDataUpdated",h)})});const i=$(1),o=$(0),a=$(!1),l=$({stone:0,iron:0,gold:0,diamond:0}),c=()=>{if(a.value)return;a.value=!0,o.value=0;const h=setInterval(()=>{if(o.value+=10,o.value>=100){clearInterval(h),a.value=!1,o.value=0;const f=Math.random();f<.4?l.value.stone++:f<.7?l.value.iron++:f<.9?l.value.gold++:l.value.diamond++}},200)};return(h,f)=>(B(),M("div",T9,[Ge(Zn,{coinCount:s.value},null,8,["coinCount"]),d("main",S9,[d("div",P9,[d("div",R9,[d("button",{class:"backBtn",onClick:f[0]||(f[0]=p=>Oe(e).push("/main"))},E(r.value.back),1),d("h2",null," "+E(r.value.mining),1)]),d("div",x9,[d("span",null,E(r.value.miningLevel)+": "+E(i.value),1)]),d("div",k9,[d("div",N9,[d("div",{class:"progressFill",style:Ct({width:o.value+"%"})},null,4)]),d("span",D9,E(o.value)+"%",1)]),d("button",{class:Ne(["miningBtn",{mining:a.value}]),onClick:c,disabled:a.value},[a.value?(B(),M("span",B9," "+E(r.value.miningInProgress),1)):(B(),M("span",L9," "+E(r.value.miningStart),1))],10,O9),d("div",M9,[d("h3",null,E(r.value.ownedResources),1),d("div",F9,[d("div",U9,[d("span",null," "+E(r.value.stone),1),d("span",null,E(l.value.stone),1)]),d("div",V9,[d("span",null," "+E(r.value.iron),1),d("span",null,E(l.value.iron),1)]),d("div",$9,[d("span",null," "+E(r.value.gold),1),d("span",null,E(l.value.gold),1)]),d("div",H9,[d("span",null," "+E(r.value.diamond),1),d("span",null,E(l.value.diamond),1)])])])])]),Ge(es)]))}},Q9=Wt(G9,[["__scopeId","data-v-cea6a28a"]]),j9={class:"huntingPage"},z9={class:"mainContent"},W9={class:"huntingContainer"},K9={class:"pageHeader"},q9={class:"playerStats"},J9={class:"statsGrid"},Y9={class:"statItem"},X9={class:"statItem"},Z9={class:"statItem"},e$={class:"statItem"},t$={class:"monsterSelection"},n$={class:"monsterList"},s$=["onClick"],r$={class:"monsterInfo"},i$={class:"monsterName"},o$={class:"monsterLevel"},a$={class:"monsterRewards"},l$={key:0,class:"currentMonster"},c$={class:"monsterHp"},u$={class:"hpBar"},h$={class:"hpText"},d$={class:"huntingProgress"},f$={class:"progressBar"},p$={class:"progressText"},g$=["disabled"],m$={key:0},y$={key:1},v$={__name:"HuntingPage",setup(n){const e=Cn(),t=hn(),s=de(()=>t.state.coins);Mt(()=>{t.loadCurrentUser();const f=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",f),un(()=>{window.removeEventListener("userDataUpdated",f)})}),$(1);const r=$(0),i=$(!1),o=$([{name:"",level:1,hp:100,maxHp:100,exp:10,gold:5},{name:"",level:2,hp:150,maxHp:150,exp:20,gold:10},{name:"",level:3,hp:200,maxHp:200,exp:35,gold:20}]),a=$(null),l=$({level:1,exp:0,maxExp:100,hp:100,maxHp:100,attack:20}),c=f=>{a.value={...f}},h=()=>{if(!a.value||i.value)return;i.value=!0,r.value=0;const f=setInterval(()=>{const p=Math.floor(Math.random()*l.value.attack)+10;a.value.hp-=p,a.value.hp<=0?(clearInterval(f),i.value=!1,r.value=100,l.value.exp+=a.value.exp,l.value.hp=l.value.maxHp,l.value.exp>=l.value.maxExp&&(l.value.level++,l.value.exp=0,l.value.maxExp=Math.floor(l.value.maxExp*1.5),l.value.attack+=5,l.value.maxHp+=20,l.value.hp=l.value.maxHp),setTimeout(()=>{a.value=null,r.value=0},2e3)):r.value=(a.value.maxHp-a.value.hp)/a.value.maxHp*100},500)};return(f,p)=>(B(),M("div",j9,[Ge(Zn,{coinCount:s.value},null,8,["coinCount"]),d("main",z9,[d("div",W9,[d("div",K9,[d("button",{class:"backBtn",onClick:p[0]||(p[0]=m=>Oe(e).push("/main"))}," "),p[1]||(p[1]=d("h2",null," ",-1))]),d("div",q9,[p[6]||(p[6]=d("h3",null," ",-1)),d("div",J9,[d("div",Y9,[p[2]||(p[2]=d("span",null,"",-1)),d("span",null,E(l.value.level),1)]),d("div",X9,[p[3]||(p[3]=d("span",null,"",-1)),d("span",null,E(l.value.hp)+"/"+E(l.value.maxHp),1)]),d("div",Z9,[p[4]||(p[4]=d("span",null,"",-1)),d("span",null,E(l.value.attack),1)]),d("div",e$,[p[5]||(p[5]=d("span",null,"",-1)),d("span",null,E(l.value.exp)+"/"+E(l.value.maxExp),1)])])]),d("div",t$,[p[7]||(p[7]=d("h3",null," ",-1)),d("div",n$,[(B(!0),M(Re,null,Xe(o.value,m=>(B(),M("div",{key:m.name,class:Ne(["monsterCard",{selected:a.value?.name===m.name}]),onClick:_=>c(m)},[d("div",r$,[d("span",i$,E(m.name),1),d("span",o$,"Lv."+E(m.level),1)]),d("div",a$,[d("span",null,"EXP: "+E(m.exp),1),d("span",null,"Gold: "+E(m.gold),1)])],10,s$))),128))])]),a.value?(B(),M("div",l$,[d("h3",null,E(a.value.name)+" (Lv."+E(a.value.level)+")",1),d("div",c$,[d("div",u$,[d("div",{class:"hpFill",style:Ct({width:a.value.hp/a.value.maxHp*100+"%"})},null,4)]),d("span",h$,E(a.value.hp)+"/"+E(a.value.maxHp),1)]),d("div",d$,[d("div",f$,[d("div",{class:"progressFill",style:Ct({width:r.value+"%"})},null,4)]),d("span",p$,E(Math.floor(r.value))+"%",1)]),d("button",{class:Ne(["huntingBtn",{hunting:i.value}]),onClick:h,disabled:i.value},[i.value?(B(),M("span",y$,"  ...")):(B(),M("span",m$,"  "))],10,g$)])):ce("",!0)])]),Ge(es)]))}},A$=Wt(v$,[["__scopeId","data-v-a71dac33"]]),w$={class:"explorationPage"},_$={class:"mainContent"},E$={class:"explorationContainer"},b$={class:"pageHeader"},I$={class:"levelInfo"},C$={class:"locationSelection"},T$={class:"locationList"},S$=["onClick"],P$={class:"locationInfo"},R$={class:"locationHeader"},x$={class:"locationName"},k$={class:"locationLevel"},N$={class:"locationDifficulty"},D$={class:"locationDescription"},O$={class:"locationRewards"},L$={key:0,class:"undiscoveredOverlay"},B$={key:0,class:"currentExploration"},M$={class:"explorationProgress"},F$={class:"progressBar"},U$={class:"progressText"},V$=["disabled"],$$={key:0},H$={key:1},G$={class:"explorationRewards"},Q$={class:"rewardsGrid"},j$={class:"rewardIcon"},z$={class:"rewardAmount"},W$={__name:"ExplorationPage",setup(n){const e=Cn(),t=hn(),s=de(()=>t.state.coins);Mt(()=>{t.loadCurrentUser();const p=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",p),un(()=>{window.removeEventListener("userDataUpdated",p)})});const r=$(1),i=$(0),o=$(!1),a=$(null);$([]);const l=$([{name:" ",level:1,difficulty:"",rewards:["","",""],description:"      .",discovered:!0},{name:" ",level:2,difficulty:"",rewards:[" ","",""],description:"    .",discovered:!1},{name:" ",level:3,difficulty:"",rewards:[" "," "," "],description:"    .",discovered:!1},{name:" ",level:4,difficulty:" ",rewards:[""," "," "],description:"    .",discovered:!1}]),c=$({wood:0,fruit:0,herb:0,artifact:0,magicStone:0,gem:0,dragonScale:0,manaCrystal:0,rareGem:0,skyStone:0,mysteriousEnergy:0,legendaryItem:0}),h=p=>{p.discovered&&(a.value=p)},f=()=>{if(!a.value||o.value)return;o.value=!0,i.value=0;const p=setInterval(()=>{if(i.value+=5,i.value>=100){clearInterval(p),o.value=!1,i.value=0;const m=Math.floor(Math.random()*a.value.rewards.length),_=a.value.rewards[m],v={:"wood",:"fruit",:"herb"," ":"artifact",:"magicStone",:"gem"," ":"dragonScale"," ":"manaCrystal"," ":"rareGem",:"skyStone"," ":"mysteriousEnergy"," ":"legendaryItem"};if(v[_]&&c.value[v[_]]++,Math.random()<.3){const A=l.value.find(w=>!w.discovered);A&&(A.discovered=!0)}r.value++,setTimeout(()=>{a.value=null},2e3)}},300)};return(p,m)=>(B(),M("div",w$,[Ge(Zn,{coinCount:s.value},null,8,["coinCount"]),d("main",_$,[d("div",E$,[d("div",b$,[d("button",{class:"backBtn",onClick:m[0]||(m[0]=_=>Oe(e).push("/main"))}," "),m[1]||(m[1]=d("h2",null," ",-1))]),d("div",I$,[d("span",null," : "+E(r.value),1)]),d("div",C$,[m[3]||(m[3]=d("h3",null," ",-1)),d("div",T$,[(B(!0),M(Re,null,Xe(l.value,_=>(B(),M("div",{key:_.name,class:Ne(["locationCard",{selected:a.value?.name===_.name,undiscovered:!_.discovered}]),onClick:v=>h(_)},[d("div",P$,[d("div",R$,[d("span",x$,E(_.name),1),d("span",k$,"Lv."+E(_.level),1)]),d("span",N$,E(_.difficulty),1),d("p",D$,E(_.description),1),d("div",O$,[(B(!0),M(Re,null,Xe(_.rewards,v=>(B(),M("span",{key:v,class:"rewardTag"},E(v),1))),128))])]),_.discovered?ce("",!0):(B(),M("div",L$,[...m[2]||(m[2]=[d("span",null," ",-1)])]))],10,S$))),128))])]),a.value?(B(),M("div",B$,[d("h3",null,E(a.value.name)+"  ",1),d("div",M$,[d("div",F$,[d("div",{class:"progressFill",style:Ct({width:i.value+"%"})},null,4)]),d("span",U$,E(i.value)+"%",1)]),d("button",{class:Ne(["explorationBtn",{exploring:o.value}]),onClick:f,disabled:o.value},[o.value?(B(),M("span",H$,"  ...")):(B(),M("span",$$,"  "))],10,V$)])):ce("",!0),d("div",G$,[m[4]||(m[4]=d("h3",null," ",-1)),d("div",Q$,[(B(!0),M(Re,null,Xe(c.value,(_,v)=>tn((B(),M("div",{key:v,class:"rewardItem"},[d("span",j$,E(v==="wood"?"":v==="fruit"?"":v==="herb"?"":v==="artifact"?"":v==="magicStone"||v==="gem"?"":v==="dragonScale"?"":v==="manaCrystal"?"":v==="rareGem"?"":v==="skyStone"?"":v==="mysteriousEnergy"?"":v==="legendaryItem"?"":""),1),d("span",z$,E(_),1)])),[[CE,_>0]])),128))])])])]),Ge(es)]))}},K$=Wt(W$,[["__scopeId","data-v-588d2c1d"]]),q$={class:"productionPage"},J$={class:"mainContent"},Y$={class:"productionContainer"},X$={class:"pageHeader"},Z$={class:"levelInfo"},eH={class:"inventory"},tH={class:"inventoryGrid"},nH={class:"materialIcon"},sH={class:"materialName"},rH={class:"materialAmount"},iH={class:"recipes"},oH={class:"recipeList"},aH=["onClick"],lH={class:"recipeInfo"},cH={class:"recipeHeader"},uH={class:"recipeName"},hH={class:"recipeLevel"},dH={class:"recipeDescription"},fH={class:"recipeMaterials"},pH={class:"recipeTime"},gH={key:0,class:"currentProduction"},mH={class:"productionProgress"},yH={class:"progressBar"},vH={class:"progressText"},AH=["disabled"],wH={key:0},_H={key:1},EH={class:"producedItems"},bH={class:"itemsGrid"},IH={class:"itemIcon"},CH={class:"itemName"},TH={class:"itemAmount"},SH={__name:"ProductionPage",setup(n){const e=Cn(),t=hn(),s=de(()=>t.state.coins);Mt(()=>{t.loadCurrentUser();const _=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",_),un(()=>{window.removeEventListener("userDataUpdated",_)})});const r=$(1),i=$(0),o=$(!1),a=$(null),l=$({wood:10,stone:5,iron:3,gold:1,diamond:0,herb:8,fruit:12}),c=$([{id:"woodenSword",name:" ",level:1,materials:{wood:5,stone:2},result:{woodenSword:1},time:30,description:"  ."},{id:"ironSword",name:" ",level:2,materials:{wood:3,iron:5,stone:3},result:{ironSword:1},time:60,description:"  ."},{id:"goldenSword",name:" ",level:3,materials:{iron:3,gold:8,diamond:1},result:{goldenSword:1},time:120,description:"   ."},{id:"healthPotion",name:" ",level:1,materials:{herb:3,fruit:2},result:{healthPotion:1},time:20,description:"  ."},{id:"manaPotion",name:" ",level:2,materials:{herb:5,fruit:3,stone:1},result:{manaPotion:1},time:40,description:"  ."},{id:"magicRing",name:" ",level:3,materials:{gold:5,diamond:2,herb:4},result:{magicRing:1},time:90,description:"  ."}]),h=$({woodenSword:0,ironSword:0,goldenSword:0,healthPotion:0,manaPotion:0,magicRing:0}),f=_=>{Object.entries(_.materials).every(([A,w])=>l.value[A]>=w)&&_.level<=r.value&&(a.value=_)},p=()=>{if(!a.value||o.value)return;Object.entries(a.value.materials).forEach(([v,A])=>{l.value[v]-=A}),o.value=!0,i.value=0;const _=setInterval(()=>{i.value+=100/(a.value.time/.1),i.value>=100&&(clearInterval(_),o.value=!1,i.value=0,Object.entries(a.value.result).forEach(([v,A])=>{h.value[v]+=A}),Math.random()<.1&&r.value++,setTimeout(()=>{a.value=null},2e3))},100)},m=_=>Object.entries(_.materials).every(([A,w])=>l.value[A]>=w)&&_.level<=r.value;return(_,v)=>(B(),M("div",q$,[Ge(Zn,{coinCount:s.value},null,8,["coinCount"]),d("main",J$,[d("div",Y$,[d("div",X$,[d("button",{class:"backBtn",onClick:v[0]||(v[0]=A=>Oe(e).push("/main"))}," "),v[1]||(v[1]=d("h2",null," ",-1))]),d("div",Z$,[d("span",null," : "+E(r.value),1)]),d("div",eH,[v[2]||(v[2]=d("h3",null," ",-1)),d("div",tH,[(B(!0),M(Re,null,Xe(l.value,(A,w)=>(B(),M("div",{key:w,class:"inventoryItem"},[d("span",nH,E(w==="wood"?"":w==="stone"?"":w==="iron"?"":w==="gold"?"":w==="diamond"?"":w==="herb"?"":w==="fruit"?"":""),1),d("span",sH,E(w),1),d("span",rH,E(A),1)]))),128))])]),d("div",iH,[v[3]||(v[3]=d("h3",null," ",-1)),d("div",oH,[(B(!0),M(Re,null,Xe(c.value,A=>(B(),M("div",{key:A.id,class:Ne(["recipeCard",{selected:a.value?.id===A.id,disabled:!m(A)}]),onClick:w=>f(A)},[d("div",lH,[d("div",cH,[d("span",uH,E(A.name),1),d("span",hH,"Lv."+E(A.level),1)]),d("p",dH,E(A.description),1),d("div",fH,[(B(!0),M(Re,null,Xe(A.materials,(w,T)=>(B(),M("span",{key:T,class:"materialTag"},E(T)+" x"+E(w),1))),128))]),d("div",pH,[d("span",null," "+E(A.time)+"",1)])])],10,aH))),128))])]),a.value?(B(),M("div",gH,[d("h3",null,E(a.value.name)+"  ",1),d("div",mH,[d("div",yH,[d("div",{class:"progressFill",style:Ct({width:i.value+"%"})},null,4)]),d("span",vH,E(Math.floor(i.value))+"%",1)]),d("button",{class:Ne(["productionBtn",{producing:o.value}]),onClick:p,disabled:o.value},[o.value?(B(),M("span",_H,"  ...")):(B(),M("span",wH,"  "))],10,AH)])):ce("",!0),d("div",EH,[v[4]||(v[4]=d("h3",null," ",-1)),d("div",bH,[(B(!0),M(Re,null,Xe(h.value,(A,w)=>tn((B(),M("div",{key:w,class:"itemCard"},[d("span",IH,E(w==="woodenSword"?"":w==="ironSword"?"":w==="goldenSword"?"":w==="healthPotion"?"":w==="manaPotion"?"":w==="magicRing"?"":""),1),d("span",CH,E(w),1),d("span",TH,E(A),1)])),[[CE,A>0]])),128))])])])]),Ge(es)]))}},PH=Wt(SH,[["__scopeId","data-v-61ce148b"]]),e_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAB3CAYAAACwoUjjAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA1gSURBVHgB7V1pbBTXHX+za+/6PrkCJALiJAiQRUODDbQBVIUGmqgpigtKqSBNpab90EMqapIPsaJ8bEibRqIpbT9wqG0oSKmSCholIQelLYl6pClHnYai2Oaw8XrX6/XeL7/f7hv8WO+uvXj2mA0/6a+ZnZl3/N/xv97MWyEKiBUrVlT6/f4NUsrDoNdAO0FNohwBxoyNGze6R0dH74vH45fxOwyKgvw+n2/vhg0bakWZwQgEAvPRw8+CyT45EWNDQ0NPrFq1qlqUC9atW1eBHv4Oe1VmAHp/xOPxfJ/DX5QDOjo6GjCED6vhLLMw/jEOS5HEEHYGmKgHw7tisZhfTo4I6LdMI+yKtrY2Nxh+AkyMyqljFHP/a5wSwoYwxsbGFmHIXpC5IYY07+K4UNhsmBuodCPo12rI5oooGD/u9XpvE3ZhvKurywkV1YXKe+X1IzwyMvI8p4iwA5YvX96EXnodFY/L6eEKGm81jqXd26hgC3roOUjroJw+wsjnVzhWiVIFhyKElymtp9vLJi6Hw+FOWaK9TeF1KwRQn7QWlOZv4NggLIRDWABUinbzDw3DmCmshQN5dmAE3VtyujsYDN4GxvtlfsCpchpkmQqbdk+3t7fXYt49itNWkR+QUTbqT0E1othAJRgU+Drm3aDMP8bgrX2r6J4YKtIKeltaJ62zAo17ESpxbXd3tyWyKGewxeFQfFPm5lBMFzRr6abWiWIABc+D8fBvWaBe1uCjmVtwab5gwYIqDLNuVMAKyytXYJTHT2N+31WwYc4WjkQiq9DL/5fFA6Mwb0F/F8QFdcCZ6ERLn5WFH9apCGK0PblkyRKXyCcYsYSK+plMhnCLDZqo7+W1tzl/IEA+p+LWpQL2dnfeehsFtIBhrkrEZGmhDxah9UINGVdDcD2G45gsPbAT/gq6VUxxmE/aOmzBaDTa6XA4foCfpejQk4c7Mcx3QuZYUz+0YB16+UV5fUG+ggFTzwPN8tC0jRYG+WAEfAl5+mTxVdRkYKe8IqdpojJ2vQCZnJSlz7CJEdA3QFk9sYxzGsPEiWF9N07ttL7EJd+doOuL4KC1ZjHoLu3TyyZC6KyfyCxxtbQ9DbexBpbX04hP3SXst4rogqZ5BLr7HsqkqSbiIvpK9PIVaV/QIXkVHTc7HYOpPc1QbnN1dfVO9HKjsC/Yw2vBw3cnWxpKLLxhPjAARz/ZbnM5HXowam9OZVTvaToU6zEftuOcrWPvNwKSuBnT9NupvX2VaQgvNx54EKfFiT/lB+7a2tptPT098/SLJtPGiRMn2vDAF3Buy7cAsmAWBNrDE+Y2xn4d6AVZGsEBy0FNNDQ0dL+pwjhvHYx5VVRUvITzGaI8EQW9Ck9se0NDw6ADc9mJtagVuGjft3omB6fsetCX6YWxl10YAWtF+c3lVLjq6uq+euzYMZcB1/GzMEZehiKfI8ofvaB1FTU1NZ8RSe/k0wDyeTNV1qAoD0NkKhgDBRwQYn+HJdbDtRJR3oghKPIhjh86jx49GnC5XGNz5869BcdmzO24aoBEI+A39XjiqEGa99V5KhLpkc7Q0iVUZlJtxmPqnA/ESVo+PNcLM1LKMeuWsVyh1U2VF/d4PB8dOXJk35YtW04wwya3271y3rx59Tt27LgVmFlfX187Y8aM5jlz5syHLe6qrKx0V1VVNfEcmUTRYsOhUMiL35WosBuNVQ2qwj0og0gUo2cIEdQQBOQs5F1N3nCdq40eWEee4eFhHxybGKRpLfKtgyVYAzvBjbycqF8E5c/FucS1SpTB91kM5geMIG8ffGU/64Qya5C+xel0UguNMX88E0AagbIbcb0Cy8kDg4ODA/v27XvnwIEDPRDcfybTt4CWgRyooIEHE02Eo3meOC5cuLCmpaWlEi0Wgy07arY0782fP79q9uzZVShYDgwMhM6fPx/Edd43mpubXaiYAUbZWOT1mh4yyzN7FIzKzs7O1sbGxgo0RgUYiTPRxYsXw2fOnPEzD1V2ol5Lly6tQ/4VyD9y+vTpUZWfRIM4mB4MR9jzyEcgGxopJ1kQVRWNE6fKLN2wuVpBJMx4j8h0PxeYja1dktnyzlYvDcwvBDpJg8SrqFndyCTJpZaxkeWefl+muTYpUkeDSD/Hp1Kva54D+UCjbNKY+sE3d6rFJL1tIQpRhg4PqAfk11uGsWJGEN3qnEsk9K2py53qN88pGcOgoLruUM+b04ONGFJHNqJp3kZUmqBKL9S9CpWeR0PlX6POHVr6mMojpI5Olc6tnjPvRdXzLnU9IJL6uR+UkEXphoN+TY+sONU9kzGR8pz5rK5SjJTrQlw7kjIN20otz7jGdFTLw9DqZT4X0/J2pJRX7nbIDdzADXyakCo9zd+65DNhqhRTeqcaHk4xrl5M1UOKpJQpM9TD0PLXn0vVDKl2hC694ynpZbpyDe1InTxXJPVxjRjXxybDpv6OqesR9Yx+zzSko1oFAqpSUl2PiHGda4hxm4B5uLT0AS1vk7GoKttUQS4xrqd1+4D3/GJcp1NP+9Q9abYuo6CLQanfMuv60GycTJbUBFs5DfT8JjNRpZi66ZpaL5nm2gDoLMhrWjVceJ+RIbNckDqkjCz56UNaWFB2urRm/hwJHMmM+A5w+DBu1CCm4GGZSOfRpPGMzGenZWPrrme6vCarl4LZ8+SzkUwnBBATI0jIFjEQQHDB2Y7AWTdNN+P222+vpT+N67FTp06NaBUw4LA7Fy9eXAef2g1/2MF88FwUDnwEy0UevbJaxa4OX5aNPCqampoqESSIMZ1KY9BXnzlzphtBA6O/vz944cKFoF4264UAfsKfPnfuXMC8x3K0c4ngglmmi0wH4WxHtm/fvmDbtm2fb21tnYnfs+hwMzrCeAuCCzW41gyGqhnqgSPvQYMEEDQIwVmnE98AqkflGVnhkm+AERDkYYCBCyrCEg0zUSAwivQIoPgZpnIgetKISjeB6Wb8Tow4REkCSDeIchmAYLkuRkFQXhBZMBLBVywiuN+IdIzoJCIuyNvLD+FAYQQzehFAGPJ6vQE0xsCePXs+unTpUpA8Cb5XefDgwe/hgbPMSCY/8GT8ii+cRhVdjWmpI+/F0tyT2jNxhZhGUZYBpkj8wi7MysrkmwNxjRLPpl7X6hXT7snUevEe82aICYTBEwz09fW9t3v37oe5wsFeaUHLv4QWWyMs+k6rFMEGAZ/vY1R8hcP7NjDcJsqYYYJBR8ga8nknGaWjX7ofcVqPVjLN9Z1RUf7gvB+FsPuHAxLtAib9KTExGlJuoCo80dbWdtqxdevWEFTBi2Lczi5XRKES37zjjjvCCeMA3U4TdC/oi2LcaSg3DEJ6PwBh9peExF6/fv0wVi5ewOmwKE/Q0zoMLfVPoQcIobSrYDo+jV4PyfICbZp+WGLtIp0To/Ym+ViWFyIQYPtvuummq58hX2OQbN68uQ8ifb8oL6E2Arv9MByVkHlhQnejZfgu5RugNmF/BDFyfwHTsxsWmde8OMH03LRp02V4QAdFMtRiZ9AheQUMP6UzTKSNTuDh2aD9eJivTdrSJkf9+WLAvdDN76beS8sQVNgVuGN7hH3N0zCE8u8XLVr0QU6p0FIN6lsIu70vSn/6HdCsTLxlHLoY2j7otmdw+j9R+LXk6YBBgz2o/1CmB7LOV1gwl3H4sUjGoO0A9vR/cHxbZHGgsjKN1qL5RmfkTWEPL8yPGNpTGzdu7BPTGZ2MKfEbRr6KJUsbjLX9Tlq1Mwa/kIdd/nNZ2kKNe6CsFxa+8mnuQvU3WXofjRMB0I9AU9qpLhff2dvZ2fkvxKDvx1wvpRfiKWsouB5DvfzCanR1dXHl40lZnP1N0oJ7NHCvBmHhsE4FPy9eiLK4zWUpfKwWhp/wHJZ+ctpHOFe7WsL97EdBL4viu59k+hwcit/09vYGRZ5BocbefksWT6gxGnKOXxnl8uWsiesNAvpWrlz5AYTa3RAe3Hyt0F8GhDDNnl+2bNmh48ePR0ShQKNFbYrqk4UFe/l9HOeJYkAmv9ybdBtri+GHBnmkaBstcj5hmK3ljnCyMKAMoSzJ136GUwN3oIP596jM/243HNYD0BzbcF78D+dQiVrQH2V+h3loeHh4F/drECUCqjFuc8n9PfNhtDDPPgQHLInQWhX0k4irncP87hbJl9itBl+a+4Pb7e4XpQb0RgOI21xbarRgLveil6e8C9VksHqFMtLR0XG2srLyAWHd95sBjKBn29vb/zQ0NBQVpQh0DD8++6W0YFcr9PAYNAN342gWpQy1fT13YJ/u5jAxMPwapLU99lvhsi/33JfTCy950XgPXo9DUSxQhbWpDZ+uR3ezsbh1ve121TFd0Jz3M+MiurThf3EkoDyxh2Tu/7ryeN43Qc0nwEQ91sT4nzmTSXPa1iNg+BmZ/H8d+/WyBgNrYkun8FpHFMLv0Jo1a/IeaS3E2rNcvXr1f8EQFwOzhWiDiHe9DsNmTJQLuEoCL+lxGhxperkXw3qXTEZDbD2sJ4B/agDm9srkv6RxjvNl9cs+n+8+taFSeTFswuPxNMnkvxxyX+FDcCTuUaGfgjH8CaOAK+b7pW9IAAAAAElFTkSuQmCC",RH={class:"exchangePage"},xH={class:"mainContent"},kH={class:"contentWrapper"},NH={class:"tabButtons"},DH={class:"tradeSection"},OH={class:"sectionTitle"},LH={class:"exchangeDisplay"},BH={class:"exchangeItem"},MH={class:"exchangeItem"},FH={class:"exchangeValue"},UH=["disabled"],VH={class:"tradeSection"},$H={class:"sectionTitle"},HH={class:"exchangeDisplay"},GH={class:"exchangeItem"},QH={class:"exchangeItem"},jH={class:"exchangeValue"},zH=["disabled"],t_=1e3,WH={__name:"ExchangePage",setup(n){const e=Cn(),t=hn(),s=de(()=>Cs()),r=$("exchange"),i=de(()=>t.state.coins),o=de(()=>t.state.totalCoin),a=$(null),l=$(""),c=$(""),h=de(()=>{if(!l.value)return 0;const A=parseFloat(l.value)||0;return Math.floor(A/t_)}),f=de(()=>{if(!c.value)return 0;const A=parseFloat(c.value)||0;return Math.floor(A*t_)}),p=()=>{const A=At();A&&(a.value=A),t.loadCurrentUser()},m=async()=>{if(!a.value){alert(s.value.loginRequired);return}if(!l.value||parseFloat(l.value)<=0){alert("Please enter the point amount.");return}const A=parseFloat(l.value),w=h.value;if(i.value<A){alert(`${s.value.insufficientPoints}
Required: ${A.toLocaleString()} Point
Owned: ${i.value.toLocaleString()} Point`);return}if(w<=0){alert("Not enough points to buy at least 1 coin.");return}const T=i.value-A,P=o.value+w;await t.updateMultiple({coins:T,totalCoin:P})?(alert(`${s.value.purchaseSuccess}
${w} ${s.value.coin} ${s.value.buy}
${s.value.pointUsed}: ${A.toLocaleString()}`),l.value=""):alert(s.value.tradeFailed)},_=async()=>{if(!a.value){alert(s.value.loginRequired);return}if(!c.value||parseFloat(c.value)<=0){alert("Please enter the coin amount.");return}const A=parseFloat(c.value),w=A;if(o.value<w){alert(`${s.value.insufficientCoins}
Required: ${A} ${s.value.coin}
Owned: ${o.value.toLocaleString()} ${s.value.coin}`);return}const T=f.value,P=i.value+T,U=o.value-w;await t.updateMultiple({coins:P,totalCoin:U})?(alert(`${s.value.tradeSuccess}
${A} ${s.value.coin} ${s.value.sell}
${s.value.pointReceived}: ${T.toLocaleString()}`),c.value=""):alert(s.value.tradeFailed)};Mt(()=>{p();const A=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",A),un(()=>{window.removeEventListener("userDataUpdated",A)})});const v=A=>{A==="exchange"?r.value="exchange":A==="catcraft"&&e.push("/factory")};return(A,w)=>(B(),M("div",RH,[Ge(Zn,{coinCount:i.value,hideRightIcons:!0},null,8,["coinCount"]),d("main",xH,[d("div",kH,[d("div",NH,[d("button",{class:Ne(["tabButton",{active:r.value==="exchange"}]),onClick:w[0]||(w[0]=T=>v("exchange"))}," Exchange ",2),d("button",{class:Ne(["tabButton",{active:r.value==="catcraft"}]),onClick:w[1]||(w[1]=T=>v("catcraft"))}," Cat craft ",2)]),d("div",DH,[d("h3",OH,E(s.value.buy)+" "+E(s.value.coin),1),d("div",LH,[d("div",BH,[w[4]||(w[4]=d("img",{src:Fg,alt:"Point",class:"exchangeIcon"},null,-1)),tn(d("input",{type:"number","onUpdate:modelValue":w[2]||(w[2]=T=>l.value=T),placeholder:"0",class:"exchangeInput",step:"1",min:"0"},null,512),[[bs,l.value]])]),w[6]||(w[6]=d("img",{src:e_,alt:"Arrow",class:"exchangeArrow"},null,-1)),d("div",MH,[w[5]||(w[5]=d("img",{src:vd,alt:"Coin",class:"exchangeIcon"},null,-1)),d("div",FH,E(h.value),1)])]),d("button",{class:"submitBtn",onClick:m,disabled:!l.value||parseFloat(l.value)<=0||h.value<=0},E(s.value.buyButton),9,UH)]),d("div",VH,[d("h3",$H,E(s.value.sell)+" "+E(s.value.coin),1),d("div",HH,[d("div",GH,[w[7]||(w[7]=d("img",{src:vd,alt:"Coin",class:"exchangeIcon"},null,-1)),tn(d("input",{type:"number","onUpdate:modelValue":w[3]||(w[3]=T=>c.value=T),placeholder:"0",class:"exchangeInput",step:"0.01",min:"0"},null,512),[[bs,c.value]])]),w[9]||(w[9]=d("img",{src:e_,alt:"Arrow",class:"exchangeArrow"},null,-1)),d("div",QH,[w[8]||(w[8]=d("img",{src:Fg,alt:"Point",class:"exchangeIcon"},null,-1)),d("div",jH,E(f.value),1)])]),d("button",{class:"submitBtn sellBtn",onClick:_,disabled:!c.value||parseFloat(c.value)<=0||f.value<=0},E(s.value.sellButton),9,zH)])])]),Ge(es)]))}},KH=Wt(WH,[["__scopeId","data-v-3a233fe4"]]),Af=()=>{const n=localStorage.getItem("questProgress");return n?JSON.parse(n):{}},OT=n=>{localStorage.setItem("questProgress",JSON.stringify(n))},Ip=n=>{const e=Af();n.forEach(t=>{delete e[t]}),OT(e)},qH=(n,e=1)=>{const t=Af();({mining:[1,9,20],hunting:[2,10,21],exploration:[3,11,22],production:[4,12,23],coinEarned:[5,13,17],levelUp:[6,14,18],nftCreated:[25,26,27],nftOwned:[28,29,30]}[n]||[]).forEach(i=>{t[i]||(t[i]=0),t[i]+=e}),OT(t),window.dispatchEvent(new CustomEvent("questProgressUpdated"))},LT=(n,e)=>{const s=Af()[n]||0;switch(n){case 5:case 13:case 17:return Math.max(s,e?.totalCoin||0);case 6:case 14:case 18:return e?.level||1;case 25:case 26:case 27:return s;case 28:case 29:case 30:const r=e?.inventory||[];return n===28?r.filter(i=>i.stars>=3).length:n===29?r.filter(i=>i.stars>=4).length:n===30?r.filter(i=>i.stars>=5).length:0;default:return s}},JH=(n,e)=>LT(n.id,e)>=n.total,YH={class:"questPage"},XH={class:"mainContent"},ZH={class:"filterTabs"},eG={class:"mainTabs"},tG={class:"questList"},nG={class:"questContent"},sG={class:"questInfo"},rG={class:"questTitle"},iG={class:"questDescription"},oG={key:0,class:"questRewards"},aG={key:0,class:"rewardItem"},lG={key:1,class:"rewardItem"},cG={key:2,class:"rewardItem"},uG=["onClick"],hG={key:1,class:"completedBadge"},dG={key:2,class:"progressBar"},fG={class:"progressText"},pG={__name:"QuestPage",setup(n){const e=hn(),t=de(()=>Cs()),s=de(()=>e.state.coins),r=$("inProgress"),i=$("daily"),o=()=>new Date().toDateString(),a=()=>{const v=localStorage.getItem("questLastDate"),A=o();return v!==A?(localStorage.setItem("questLastDate",A),localStorage.removeItem("rewardedQuests"),!0):!1},l=()=>{const v=localStorage.getItem("rewardedQuests");return v?JSON.parse(v):[]},c=v=>{localStorage.setItem("rewardedQuests",JSON.stringify(v)),localStorage.setItem("questLastDate",o())};t.value.coin,t.value.catFragments,t.value.exp;const h=$([{id:1,title:"Daily Mining 10 Times",description:"Complete 10 mining activities today",completed:!1,rewardReceived:!1,progress:0,total:10,type:"daily",reward:{coins:100,catFragments:5},actionType:"mining"},{id:2,title:"Daily Hunting 5 Times",description:"Defeat 5 monsters",completed:!1,rewardReceived:!1,progress:0,total:5,type:"daily",reward:{coins:100,catFragments:5},actionType:"hunting"},{id:3,title:"Daily Exploration 1 Time",description:"Complete 1 exploration activity",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:150,catFragments:10},actionType:"exploration"},{id:4,title:"Daily Production 3 Items",description:"Produce 3 or more items",completed:!1,rewardReceived:!1,progress:0,total:3,type:"daily",reward:{coins:120,catFragments:8},actionType:"production"},{id:5,title:"Daily Coin 1,000 Acquisition",description:"Acquire 1,000 or more coins",completed:!1,rewardReceived:!1,progress:0,total:1e3,type:"daily",reward:{coins:200,catFragments:15},actionType:"coinEarned"},{id:6,title:"Daily Level Up 1 Time",description:"Level up 1 or more levels",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:300,catFragments:20},actionType:"levelUp"},{id:7,title:"Daily Check-in",description:"Log in to the game and check daily quests",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:50,catFragments:3},actionType:"login"},{id:8,title:"Daily NFT Creation 1",description:"Create 1 cat NFT",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:500,catFragments:30},actionType:"nftCreated"},{id:9,title:"Weekly Quest: Mining Master",description:"Complete 50 mining activities in a week",completed:!1,rewardReceived:!1,progress:0,total:50,type:"weekly",reward:{coins:1e3,catFragments:50},actionType:"mining"},{id:10,title:"Weekly Quest: Hunter",description:"Defeat 100 monsters in a week",completed:!1,rewardReceived:!1,progress:0,total:100,type:"weekly",reward:{coins:2e3,catFragments:100},actionType:"hunting"},{id:11,title:"Weekly Quest: Explorer",description:"Explore 5 new areas",completed:!1,rewardReceived:!1,progress:0,total:5,type:"weekly",reward:{coins:1500,catFragments:80},actionType:"exploration"},{id:12,title:"Weekly Quest: Producer",description:"Produce 50 or more items",completed:!1,rewardReceived:!1,progress:0,total:50,type:"weekly",reward:{coins:1800,catFragments:90},actionType:"production"},{id:13,title:"Weekly Quest: Coin Collector",description:"Acquire 50,000 or more coins",completed:!1,rewardReceived:!1,progress:0,total:5e4,type:"weekly",reward:{coins:5e3,catFragments:200},actionType:"coinEarned"},{id:14,title:"Weekly Quest: Level Up 5",description:"Level up 5 or more levels",completed:!1,rewardReceived:!1,progress:0,total:5,type:"weekly",reward:{coins:3e3,catFragments:150},actionType:"levelUp"},{id:15,title:"Weekly Quest: NFT Collector",description:"Create 5 or more NFTs",completed:!1,rewardReceived:!1,progress:0,total:5,type:"weekly",reward:{coins:4e3,catFragments:250},actionType:"nftCreated"},{id:16,title:"Weekly Quest: Own Rare NFT",description:"Own 1 or more Rare grade (3-star or higher) NFTs",completed:!1,rewardReceived:!1,progress:0,total:1,type:"weekly",reward:{coins:5e3,catFragments:300},actionType:"nftOwned"},{id:17,title:"Monthly Quest: Coin King",description:"Acquire 200,000 or more coins this month",completed:!1,rewardReceived:!1,progress:0,total:2e5,type:"monthly",reward:{coins:2e4,catFragments:1e3},actionType:"coinEarned"},{id:18,title:"Monthly Quest: Extreme Level Up",description:"Level up 20 or more levels",completed:!1,rewardReceived:!1,progress:0,total:20,type:"monthly",reward:{coins:15e3,catFragments:800},actionType:"levelUp"},{id:19,title:"Monthly Quest: NFT Master",description:"Create 20 or more NFTs",completed:!1,rewardReceived:!1,progress:0,total:20,type:"monthly",reward:{coins:25e3,catFragments:1500},actionType:"nftCreated"},{id:20,title:"Monthly Quest: Master Miner",description:"Complete 500 or more mining activities",completed:!1,rewardReceived:!1,progress:0,total:500,type:"monthly",reward:{coins:1e4,catFragments:500},actionType:"mining"},{id:21,title:"Monthly Quest: Warrior",description:"Defeat 500 monsters",completed:!1,rewardReceived:!1,progress:0,total:500,type:"monthly",reward:{coins:12e3,catFragments:600},actionType:"hunting"},{id:22,title:"Monthly Quest: Great Explorer",description:"Explore 20 new areas",completed:!1,rewardReceived:!1,progress:0,total:20,type:"monthly",reward:{coins:1e4,catFragments:500},actionType:"exploration"},{id:23,title:"Monthly Quest: Perfect Producer",description:"Produce 200 various items",completed:!1,rewardReceived:!1,progress:0,total:200,type:"monthly",reward:{coins:15e3,catFragments:700},actionType:"production"},{id:24,title:"Monthly Quest: Own Epic NFT",description:"Own 1 or more Epic grade (4-star or higher) NFTs",completed:!1,rewardReceived:!1,progress:0,total:1,type:"monthly",reward:{coins:3e4,catFragments:2e3},actionType:"nftOwned"},{id:25,title:"Daily NFT Creation 1",description:"Create 1 cat NFT",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:500,catFragments:30},actionType:"nftCreated"},{id:26,title:"Weekly NFT Creation 5",description:"Create 5 cat NFTs",completed:!1,rewardReceived:!1,progress:0,total:5,type:"weekly",reward:{coins:4e3,catFragments:250},actionType:"nftCreated"},{id:27,title:"Monthly NFT Creation 20",description:"Create 20 cat NFTs",completed:!1,rewardReceived:!1,progress:0,total:20,type:"monthly",reward:{coins:25e3,catFragments:1500},actionType:"nftCreated"},{id:28,title:"Own Rare NFT",description:"Own 1 or more Rare grade (3-star or higher) NFTs",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:1e3,catFragments:50},actionType:"nftOwned"},{id:29,title:"Own Epic NFT",description:"Own 1 or more Epic grade (4-star or higher) NFTs",completed:!1,rewardReceived:!1,progress:0,total:1,type:"weekly",reward:{coins:5e3,catFragments:300},actionType:"nftOwned"},{id:30,title:"Own Legendary NFT",description:"Own 1 or more Legendary grade (5-star) NFTs",completed:!1,rewardReceived:!1,progress:0,total:1,type:"monthly",reward:{coins:5e4,catFragments:5e3},actionType:"nftOwned"}]),f=()=>{const v=At();!v||!v.gameData||h.value.forEach(A=>{const w=LT(A.id,v.gameData);A.progress=w,A.completed=JH(A,v.gameData)})},p=async v=>{const A=h.value.find(q=>q.id===v);if(!A||!A.completed||A.rewardReceived)return;const w=At();if(!w){alert(t.value.loginRequired);return}const T=A.reward||{},P={};if(T.coins&&(P.totalCoin=(w.gameData?.totalCoin||0)+T.coins),T.catFragments&&(P.catFragments=(w.gameData?.catFragments||50)+T.catFragments),T.exp){const q=w.gameData?.level||1,x=T.exp,I=Math.floor(x/100);I>0&&(P.level=q+I)}await e.updateGameData(P),A.rewardReceived=!0;const U=l();U.includes(v)||(U.push(v),c(U)),window.dispatchEvent(new CustomEvent("userDataUpdated"));const W=[];T.coins&&W.push(`${T.coins} ${t.value.coin}`),T.catFragments&&W.push(`${T.catFragments} ${t.value.catFragments}`),T.exp&&W.push(`${T.exp} ${t.value.exp}`),alert(`${t.value.rewardReceived}
You have earned ${W.join(", ")}.`)},m=de(()=>{let v=h.value.filter(A=>A.type===i.value);return r.value==="inProgress"?v=v.filter(A=>!A.completed||A.completed&&!A.rewardReceived):r.value==="completed"&&(v=v.filter(A=>A.completed&&A.rewardReceived)),v.sort((A,w)=>A.completed&&!A.rewardReceived&&(w.rewardReceived||!w.completed)?-1:(A.rewardReceived||!A.completed)&&w.completed&&!w.rewardReceived?1:0)}),_=()=>{const v=o();if(localStorage.getItem("questResetDate")!==v){const x=h.value.filter(C=>C.type==="daily").map(C=>C.id);Ip(x);const I=l();I.filter(C=>x.includes(C)).forEach(C=>{const b=I.indexOf(C);b>-1&&I.splice(b,1)}),c(I),h.value.forEach(C=>{C.type==="daily"&&(C.rewardReceived=!1,C.completed=!1,C.progress=0)}),localStorage.setItem("questResetDate",v)}const w=new Date,T=w.getDay(),P=localStorage.getItem("questWeeklyResetDate"),U=new Date(w.setDate(w.getDate()-T+1)).toDateString();if(P!==U){const x=h.value.filter(C=>C.type==="weekly").map(C=>C.id);Ip(x);const I=l();I.filter(C=>x.includes(C)).forEach(C=>{const b=I.indexOf(C);b>-1&&I.splice(b,1)}),c(I),h.value.forEach(C=>{C.type==="weekly"&&(C.rewardReceived=!1,C.completed=!1,C.progress=0)}),localStorage.setItem("questWeeklyResetDate",U)}const W=localStorage.getItem("questMonthlyResetDate"),q=new Date(w.getFullYear(),w.getMonth(),1).toDateString();if(W!==q){const x=h.value.filter(C=>C.type==="monthly").map(C=>C.id);Ip(x);const I=l();I.filter(C=>x.includes(C)).forEach(C=>{const b=I.indexOf(C);b>-1&&I.splice(b,1)}),c(I),h.value.forEach(C=>{C.type==="monthly"&&(C.rewardReceived=!1,C.completed=!1,C.progress=0)}),localStorage.setItem("questMonthlyResetDate",q)}};return Mt(()=>{e.loadCurrentUser();const v=()=>{e.loadCurrentUser()};window.addEventListener("userDataUpdated",v),un(()=>{window.removeEventListener("userDataUpdated",v)}),a(),_();const A=l();h.value.forEach(T=>{A.includes(T.id)&&(T.rewardReceived=!0)}),f();const w=h.value.find(T=>T.id===7&&T.type==="daily");if(w&&!w.completed){w.progress=1,w.completed=!0;const T=Af();T[7]=1,localStorage.setItem("questProgress",JSON.stringify(T))}window.addEventListener("questProgressUpdated",f),window.addEventListener("userDataUpdated",f)}),un(()=>{window.removeEventListener("questProgressUpdated",f),window.removeEventListener("userDataUpdated",f)}),(v,A)=>(B(),M("div",YH,[Ge(Zn,{coinCount:s.value},null,8,["coinCount"]),d("main",XH,[d("div",ZH,[d("button",{class:Ne(["filterTab",{active:i.value==="daily"}]),onClick:A[0]||(A[0]=w=>i.value="daily")}," Daily ",2),d("button",{class:Ne(["filterTab",{active:i.value==="weekly"}]),onClick:A[1]||(A[1]=w=>i.value="weekly")}," Weekly ",2),d("button",{class:Ne(["filterTab",{active:i.value==="monthly"}]),onClick:A[2]||(A[2]=w=>i.value="monthly")}," Monthly ",2)]),d("div",eG,[d("button",{class:Ne(["mainTab",{active:r.value==="inProgress"}]),onClick:A[3]||(A[3]=w=>r.value="inProgress")},E(t.value.inProgress),3),d("button",{class:Ne(["mainTab",{active:r.value==="completed"}]),onClick:A[4]||(A[4]=w=>r.value="completed")},E(t.value.completed),3)]),d("div",tG,[(B(!0),M(Re,null,Xe(m.value,w=>(B(),M("div",{key:w.id,class:"questCard"},[d("div",nG,[d("div",sG,[d("h3",rG,E(w.title),1),d("p",iG,E(w.description),1),w.reward?(B(),M("div",oG,[w.reward.coins?(B(),M("span",aG,"  "+E(w.reward.coins),1)):ce("",!0),w.reward.catFragments?(B(),M("span",lG,"  "+E(w.reward.catFragments),1)):ce("",!0),w.reward.exp?(B(),M("span",cG,"  "+E(w.reward.exp),1)):ce("",!0)])):ce("",!0)]),A[5]||(A[5]=d("div",{class:"questCharacter"},[d("div",{class:"characterImg"},"")],-1))]),w.completed&&!w.rewardReceived?(B(),M("button",{key:0,class:"rewardBtn",onClick:T=>p(w.id)},E(t.value.receive),9,uG)):w.completed&&w.rewardReceived?(B(),M("div",hG,"  "+E(t.value.completed),1)):(B(),M("div",dG,[d("div",{class:"progressFill",style:Ct({width:w.progress/w.total*100+"%"})},null,4),d("span",fG,E(w.progress)+"/"+E(w.total),1)]))]))),128))])]),Ge(es)]))}},gG=Wt(pG,[["__scopeId","data-v-ff25a02c"]]),Ye={COMMON:"common",RARE:"rare",EPIC:"epic",LEGENDARY:"legendary"},Cp={[Ye.COMMON]:.7,[Ye.RARE]:.9,[Ye.EPIC]:.98,[Ye.LEGENDARY]:1},n_={[Ye.COMMON]:{min:2,max:3},[Ye.RARE]:{min:3,max:4},[Ye.EPIC]:{min:4,max:5},[Ye.LEGENDARY]:{min:5,max:5}},s_={[Ye.COMMON]:{miningEfficiency:{min:5,max:15},huntingDamage:{min:5,max:15},explorationReward:{min:5,max:15},productionSpeed:{min:5,max:15}},[Ye.RARE]:{miningEfficiency:{min:15,max:30},huntingDamage:{min:15,max:30},explorationReward:{min:15,max:30},productionSpeed:{min:15,max:30}},[Ye.EPIC]:{miningEfficiency:{min:30,max:60},huntingDamage:{min:30,max:60},explorationReward:{min:30,max:60},productionSpeed:{min:30,max:60}},[Ye.LEGENDARY]:{miningEfficiency:{min:60,max:100},huntingDamage:{min:60,max:100},explorationReward:{min:60,max:100},productionSpeed:{min:60,max:100}}},r_={[Ye.COMMON]:{primary:"#9E9E9E",secondary:"#BDBDBD",border:"#757575",glow:"rgba(158, 158, 158, 0.3)"},[Ye.RARE]:{primary:"#2196F3",secondary:"#64B5F6",border:"#1976D2",glow:"rgba(33, 150, 243, 0.3)"},[Ye.EPIC]:{primary:"#9C27B0",secondary:"#BA68C8",border:"#7B1FA2",glow:"rgba(156, 39, 176, 0.3)"},[Ye.LEGENDARY]:{primary:"#FF9800",secondary:"#FFB74D",border:"#F57C00",glow:"rgba(255, 152, 0, 0.4)"}},i_={[Ye.COMMON]:"",[Ye.RARE]:"",[Ye.EPIC]:"",[Ye.LEGENDARY]:""},o_={[Ye.COMMON]:"Common",[Ye.RARE]:"Rare",[Ye.EPIC]:"Epic",[Ye.LEGENDARY]:"Legendary"};function mG(){const n=Math.random();return n<Cp[Ye.COMMON]?Ye.COMMON:n<Cp[Ye.RARE]?Ye.RARE:n<Cp[Ye.EPIC]?Ye.EPIC:Ye.LEGENDARY}function yG(n){const e=n_[n]||n_[Ye.COMMON];return Math.floor(Math.random()*(e.max-e.min+1))+e.min}function vG(n){const e=s_[n]||s_[Ye.COMMON],t=s=>Math.floor(Math.random()*(s.max-s.min+1))+s.min;return{miningEfficiency:t(e.miningEfficiency),huntingDamage:t(e.huntingDamage),explorationReward:t(e.explorationReward),productionSpeed:t(e.productionSpeed)}}function BT(n){if(n.rarity)return n;const e=mG(),t=n.stars||yG(e),s=vG(e);return{...n,rarity:e,stars:t,...s}}function Tc(n){if(!n)return{};const e=r_[n]||r_[Ye.COMMON];return{"--rarity-color":e.primary,"--rarity-secondary":e.secondary,"--rarity-border":e.border,"--rarity-glow":e.glow}}function Ey(n){return(localStorage.getItem("appLanguage")||"English")==="English"?o_[n]||o_[Ye.COMMON]:i_[n]||i_[Ye.COMMON]}const AG="/tdl/assets/statStar1-DQ3NLFmi.png",wG="/tdl/assets/statStar2-7A5sNtwf.png",a_="/tdl/assets/inventoryTab_off-CzoQXsFX.png",l_="/tdl/assets/inventoryTab_on-BM74KYxp.png",_G="/tdl/assets/affline-CHli_Lq2.png",EG="/tdl/assets/exline-CK0DXNtO.png",bG={class:"inventoryPage"},IG={class:"mainContent"},CG={class:"tabButtons"},TG=["src"],SG=["src"],PG={key:0,class:"topSection"},RG={class:"panelTitle"},xG={class:"levelBadge"},kG={class:"magicPanelContainer"},NG={class:"magicPanel"},DG={class:"characterBox"},OG=["src","alt"],LG={class:"profilePanel"},BG={class:"progressBars"},MG={class:"progressBar noBar"},FG={class:"value"},UG={class:"progressBar"},VG={class:"barBg"},$G=["src"],HG={class:"value"},GG={class:"progressBar noBar"},QG={class:"value"},jG={class:"progressBar"},zG={class:"barBg"},WG=["src"],KG={class:"value"},qG={key:1,class:"inventoryHeader"},JG={class:"inventoryCount"},YG={key:2,class:"inventoryGrid"},XG=["onClick","onDblclick"],ZG={key:0,class:"newBadge"},e7={class:"catNameBadge"},t7={class:"starBadge"},n7=["src"],s7={class:"levelBadge"},r7=["src","alt"],i7={key:3,class:"emptyInventory"},o7={class:"emptyText"},a7={class:"emptySubtext"},l7={key:4,class:"itemGrid"},c7={class:"searchModalHeader"},u7={class:"searchModalTitle"},h7={class:"searchModalBody"},d7={class:"searchBox"},f7=["placeholder"],p7={class:"filterControls"},g7={class:"filterGroup"},m7={class:"filterLabel"},y7={value:"all"},v7={value:"2"},A7={value:"3"},w7={value:"4"},_7={value:"5"},E7={class:"filterGroup"},b7={class:"filterLabel"},I7={value:"all"},C7={class:"filterGroup"},T7={class:"filterLabel"},S7={value:"all"},P7={value:"common"},R7={value:"rare"},x7={value:"epic"},k7={value:"legendary"},N7={class:"filterGroup"},D7={class:"filterLabel"},O7={value:"newest"},L7={value:"oldest"},B7={value:"level"},M7={value:"stars"},F7={value:"rarity"},U7={value:"name"},V7={class:"searchModalFooter"},$7={class:"modalHeader"},H7={class:"modalTitle"},G7={class:"modalBody"},Q7={class:"modalImageSection"},j7=["src"],z7={class:"modalBadges"},W7={class:"modalBadge stars"},K7={class:"modalBadge level"},q7={class:"modalStatsSection"},J7={class:"sectionTitle"},Y7={class:"modalStats"},X7={class:"modalStatLabel"},Z7={class:"modalStatBar"},eQ={class:"modalStatValue"},tQ={class:"modalInfoSection"},nQ={class:"infoRow"},sQ={class:"infoValue"},rQ={class:"infoRow"},iQ={class:"infoLabel"},oQ={class:"infoValue"},aQ={class:"infoRow"},lQ={class:"infoLabel"},cQ={class:"infoValue"},uQ={class:"expSection"},hQ={class:"expLabel"},dQ={class:"expBar"},fQ={class:"expText"},pQ={class:"modalFooter"},gQ=["disabled"],mQ={__name:"InventoryPage",setup(n){const e=hn(),t=de(()=>Cs()),s=de(()=>e.state.coins),r=$(""),i=$("all"),o=$("all"),a=$("all"),l=$("newest"),c=$(!1),h=$(null),f=$(!1),p=$("cat"),m=V=>[{name:t.value.strength,value:V[0],progress:V[0],color:"#FF6B6B"},{name:t.value.health,value:V[1],progress:V[1],color:"#FF8A80"},{name:t.value.intelligence,value:V[2],progress:V[2],color:"#9C27B0"},{name:t.value.dexterity,value:V[3],progress:V[3],color:"#FFA726"},{name:t.value.courage,value:V[4],progress:V[4],color:"#00BCD4"},{name:t.value.luck,value:V[5],progress:V[5],color:"#66BB6A"}],_=["Active","Quiet","Playful","Friendly","Independent","Affectionate","Curious","Brave"],v=V=>{if(V.stats)V.stats=V.stats.map((D,z)=>{const he=[t.value.strength,t.value.health,t.value.intelligence,t.value.dexterity,t.value.courage,t.value.luck];return{...D,name:he[z]||D.name}});else{const D=V.stars*15+Math.floor(Math.random()*20);V.stats=m([D+Math.floor(Math.random()*20),D+Math.floor(Math.random()*20),D+Math.floor(Math.random()*20),D+Math.floor(Math.random()*20),D+Math.floor(Math.random()*20),D+Math.floor(Math.random()*20)])}return V.personality||(V.personality=_[Math.floor(Math.random()*_.length)]),V.affinity===void 0&&(V.affinity=30+Math.floor(Math.random()*71)),V},A=$([]),w=de(()=>{let V=[...A.value];if(r.value.trim()){const D=r.value.toLowerCase();V=V.filter(z=>z.name.toLowerCase().includes(D)||String(z.imageId).includes(D))}return i.value!=="all"&&(V=V.filter(D=>D.stars===parseInt(i.value))),o.value!=="all"&&(o.value==="1-5"?V=V.filter(D=>D.level>=1&&D.level<=5):o.value==="6-10"?V=V.filter(D=>D.level>=6&&D.level<=10):o.value==="11+"&&(V=V.filter(D=>D.level>=11))),V=[...V].sort((D,z)=>{switch(l.value){case"newest":return(z.isNew?1:0)-(D.isNew?1:0)||z.id-D.id;case"oldest":return D.id-z.id;case"level":return z.level-D.level;case"stars":return z.stars-D.stars;case"rarity":const he={[Ye.LEGENDARY]:4,[Ye.EPIC]:3,[Ye.RARE]:2,[Ye.COMMON]:1},ke=he[D.rarity||Ye.COMMON]||0;return(he[z.rarity||Ye.COMMON]||0)-ke;case"name":return D.name.localeCompare(z.name);default:return 0}}),V});de(()=>{const V=A.value.find(D=>D.selected);return V?v(V).stats:m([33,7,29,10,11,10])});const T=de(()=>{const V=A.value.find(D=>D.selected);return V&&v(V).personality||"Active"}),P=de(()=>{const V=A.value.find(D=>D.selected);return V&&v(V).affinity||50}),U=de(()=>{const V=A.value.find(D=>D.selected);return V?V.name:"Inventory is empty"}),W=de(()=>{const V=A.value.find(D=>D.selected);return V&&V.level||1}),q=de(()=>{const V=A.value.find(D=>D.selected);if(V){const D=v(V),z=D.exp||0,he=D.maxExp||Hr(D.level||1);return{current:z,max:he,percentage:he>0?Math.min(z/he*100,100):0}}return{current:0,max:100,percentage:0}}),x=de(()=>{const V=A.value.find(D=>D.selected);if(V){const D=v(V);if(D.stats&&D.stats.length>0){const z=D.stats.reduce((he,ke)=>he+(ke.value||0),0);return Math.round(z/D.stats.length)}}return 0}),I=V=>{try{return new URL(Object.assign({"../assets/img/cat1.png":Yc,"../assets/img/cat10.png":Xc,"../assets/img/cat11.png":Zc,"../assets/img/cat12.png":eu,"../assets/img/cat13.png":tu,"../assets/img/cat14.png":nu,"../assets/img/cat15.png":su,"../assets/img/cat16.png":ru,"../assets/img/cat17.png":iu,"../assets/img/cat18.png":ou,"../assets/img/cat19.png":au,"../assets/img/cat2.png":lu,"../assets/img/cat20.png":cu,"../assets/img/cat21.png":uu,"../assets/img/cat22.png":hu,"../assets/img/cat23.png":du,"../assets/img/cat24.png":fu,"../assets/img/cat25.png":pu,"../assets/img/cat26.png":gu,"../assets/img/cat27.png":mu,"../assets/img/cat28.png":yu,"../assets/img/cat29.png":vu,"../assets/img/cat3.png":Au,"../assets/img/cat30.png":wu,"../assets/img/cat4.png":_u,"../assets/img/cat5.png":Eu,"../assets/img/cat6.png":bu,"../assets/img/cat7.png":Iu,"../assets/img/cat8.png":Cu,"../assets/img/cat9.png":Tu,"../assets/img/catPoint.png":Su,"../assets/img/catPointPlus.png":Pu,"../assets/img/catProfile01.png":Ru,"../assets/img/catProfile02.png":xu,"../assets/img/cat_ico.png":ku})[`../assets/img/cat${V}.png`],import.meta.url).href}catch{return`/src/assets/img/cat${V}.png`}},S=de(()=>{const V=A.value.find(D=>D.selected);return I(V?V.imageId||V.id:1)}),C=V=>{const D=Ad(V);h.value=v({...D}),c.value=!0},b=()=>{c.value=!1,h.value=null},N=async V=>{if(A.value.forEach(D=>D.selected=!1),V.selected=!0,V.isNew&&(V.isNew=!1,At())){const z=A.value.map(he=>({...he,isNew:he.id===V.id?!1:he.isNew}));await e.updateGameData({inventory:z})}},k=()=>{r.value="",i.value="all",o.value="all",a.value="all",l.value="newest"},Se=async()=>{if(!h.value)return;const V=bp(h.value.level||1);if(s.value<V){alert(`${t.value.insufficientCoins} (Required: ${V})`);return}const D=At();if(D){const he=(D.gameData?.inventory||[]).map(Te=>{if(Te.id===h.value.id){const ze=(Te.level||1)+1,ft=Hr(ze),pt=z5(Te),yt=(Te.miningEfficiency||0)+pt,Z=(Te.huntingDamage||0)+pt,pe=(Te.explorationReward||0)+pt,ue=(Te.productionSpeed||0)+pt;return{...Te,level:ze,exp:0,maxExp:ft,miningEfficiency:yt,huntingDamage:Z,explorationReward:pe,productionSpeed:ue}}return Te}),ke=s.value-V;try{await e.updateMultiple({coins:ke}),await e.updateGameData({inventory:he});const Te=he.find(Ve=>Ve.id===h.value.id);Te&&(h.value=v({...Te})),ne(),alert(`${t.value.levelUp} Success! Level ${newLevel}`)}catch(Te){console.error(" :",Te),alert("An error occurred during level up.")}}},ne=async()=>{const V=At();if(V){e.loadCurrentUser();const D=V.gameData?.inventory||[];if(D.length>0){const z=D.map(ke=>{const Te=ke.rarity?ke:BT(ke),Ve=v({...Te}),ze=Ad(Ve);if(!ze.exp||ze.exp===0){const ft=ze.maxExp||Hr(ze.level||1);ze.exp=Math.floor(Math.random()*ft)}return ze.personality||(ze.personality=_[Math.floor(Math.random()*_.length)]),ze.affinity===void 0&&(ze.affinity=30+Math.floor(Math.random()*71)),ze});A.value=z,At()&&z.some((Te,Ve)=>{const ze=D[Ve];return!ze.exp||ze.exp===0||!ze.personality||ze.affinity===void 0})&&await e.updateGameData({inventory:z})}else A.value=[]}else A.value=[]};return Mt(()=>{ne(),window.addEventListener("userDataUpdated",ne)}),un(()=>{window.removeEventListener("userDataUpdated",ne)}),(V,D)=>(B(),M("div",bG,[Ge(Zn,{coinCount:s.value,hideRightIcons:!0},null,8,["coinCount"]),d("main",IG,[d("div",CG,[d("button",{class:Ne(["tabButton",{active:p.value==="cat"}]),onClick:D[0]||(D[0]=z=>p.value="cat")},[d("img",{src:p.value==="cat"?Oe(l_):Oe(a_),alt:"Cat",class:"tabButtonImg"},null,8,TG),D[15]||(D[15]=d("span",{class:"tabButtonText"},"Cat",-1))],2),d("button",{class:Ne(["tabButton",{active:p.value==="item"}]),onClick:D[1]||(D[1]=z=>p.value="item")},[d("img",{src:p.value==="item"?Oe(l_):Oe(a_),alt:"Item",class:"tabButtonImg"},null,8,SG),D[16]||(D[16]=d("span",{class:"tabButtonText"},"Item",-1))],2)]),p.value==="cat"?(B(),M("div",PG,[d("div",RG,[d("span",null,E(U.value),1),d("span",xG,"Lv."+E(W.value),1)]),d("div",kG,[d("div",NG,[d("div",DG,[d("img",{src:S.value,alt:t.value.selectedCharacter,class:"selectedCharacter"},null,8,OG)])]),d("div",LG,[d("div",BG,[d("div",MG,[D[17]||(D[17]=d("div",{class:"statLabel"},"Personality:",-1)),d("span",FG,E(T.value),1)]),d("div",UG,[D[18]||(D[18]=d("div",{class:"statLabel"},"Affinity",-1)),d("div",VG,[d("div",{style:Ct({width:P.value+"%"}),class:"barFill barFillAffinity"},[d("img",{src:Oe(_G),alt:"Affinity Graph",class:"barFillImage"},null,8,$G)],4)]),d("span",HG,E(P.value)+"%",1)]),d("div",GG,[D[19]||(D[19]=d("div",{class:"statLabel"},"Ability",-1)),d("span",QG,E(x.value),1)]),d("div",jG,[D[20]||(D[20]=d("div",{class:"statLabel"},"Experience",-1)),d("div",zG,[d("div",{style:Ct({width:q.value.percentage+"%"}),class:"barFill barFillExperience"},[d("img",{src:Oe(EG),alt:"Experience Graph",class:"barFillImage"},null,8,WG)],4)]),d("span",KG,E(q.value.percentage.toFixed(0))+"%",1)])])])])])):ce("",!0),p.value==="cat"?(B(),M("div",qG,[d("div",JG,E(t.value.totalItems)+" "+E(w.value.length)+" / "+E(A.value.length)+" "+E(t.value.items),1),d("button",{class:"searchBtn",onClick:D[2]||(D[2]=z=>f.value=!0)},[D[21]||(D[21]=d("span",{class:"searchIcon"},"",-1)),d("span",null,E(t.value.search),1)])])):ce("",!0),p.value==="cat"&&w.value.length>0?(B(),M("div",YG,[(B(!0),M(Re,null,Xe(w.value,z=>(B(),M("div",{key:z.id,class:Ne(["inventoryItem",{selected:z.selected,[`rarity-${z.rarity||"common"}`]:!0}]),style:Ct(Oe(Tc)(z.rarity)),onClick:he=>N(z),onDblclick:he=>C(z)},[z.isNew?(B(),M("div",ZG,"NEW")):ce("",!0),d("div",e7,E(z.name),1),d("div",t7,[(B(),M(Re,null,Xe(5,he=>d("img",{key:he,src:he<=z.stars?Oe(AG):Oe(wG),alt:"",class:"starIcon"},null,8,n7)),64))]),d("div",s7," Lv "+E(String(z.level).padStart(2,"0")),1),d("img",{src:I(z.imageId||z.id),alt:t.value.cat,class:"itemIcon"},null,8,r7)],46,XG))),128))])):ce("",!0),p.value==="cat"&&w.value.length===0?(B(),M("div",i7,[D[22]||(D[22]=d("div",{class:"emptyIcon"},"",-1)),d("div",o7,E(t.value.noNFTs),1),d("div",a7,E(t.value.createCatInFactory),1)])):ce("",!0),p.value==="item"?(B(),M("div",l7,[(B(),M(Re,null,Xe(9,z=>d("div",{key:z,class:"itemBox"},[...D[23]||(D[23]=[d("span",{class:"noItemText"},"no item",-1)])])),64))])):ce("",!0)]),Ge(es),f.value?(B(),M("div",{key:0,class:"modalOverlay",onClick:D[12]||(D[12]=z=>f.value=!1)},[d("div",{class:"searchModal",onClick:D[11]||(D[11]=zn(()=>{},["stop"]))},[d("div",c7,[d("h3",u7,E(t.value.searchAndFilter),1),d("button",{class:"searchModalClose",onClick:D[3]||(D[3]=z=>f.value=!1)},"")]),d("div",h7,[d("div",d7,[tn(d("input",{type:"text","onUpdate:modelValue":D[4]||(D[4]=z=>r.value=z),placeholder:t.value.searchPlaceholder,class:"searchInput",onKeyup:D[5]||(D[5]=SE(z=>f.value=!1,["enter"]))},null,40,f7),[[bs,r.value]])]),d("div",p7,[d("div",g7,[d("label",m7,E(t.value.starRating),1),tn(d("select",{"onUpdate:modelValue":D[6]||(D[6]=z=>i.value=z),class:"filterSelect"},[d("option",y7,E(t.value.all),1),d("option",v7,"2 "+E(t.value.stars),1),d("option",A7,"3 "+E(t.value.stars),1),d("option",w7,"4 "+E(t.value.stars),1),d("option",_7,"5 "+E(t.value.stars),1)],512),[[Di,i.value]])]),d("div",E7,[d("label",b7,E(t.value.levelFilter),1),tn(d("select",{"onUpdate:modelValue":D[7]||(D[7]=z=>o.value=z),class:"filterSelect"},[d("option",I7,E(t.value.all),1),D[24]||(D[24]=d("option",{value:"1-5"},"1-5",-1)),D[25]||(D[25]=d("option",{value:"6-10"},"6-10",-1)),D[26]||(D[26]=d("option",{value:"11+"},"11+",-1))],512),[[Di,o.value]])]),d("div",C7,[d("label",T7,E(t.value.rarityFilter),1),tn(d("select",{"onUpdate:modelValue":D[8]||(D[8]=z=>a.value=z),class:"filterSelect"},[d("option",S7,E(t.value.all),1),d("option",P7,E(t.value.common),1),d("option",R7,E(t.value.rare),1),d("option",x7,E(t.value.epic),1),d("option",k7,E(t.value.legendary),1)],512),[[Di,a.value]])]),d("div",N7,[d("label",D7,E(t.value.sortBy),1),tn(d("select",{"onUpdate:modelValue":D[9]||(D[9]=z=>l.value=z),class:"filterSelect"},[d("option",O7,E(t.value.newest),1),d("option",L7,E(t.value.oldest),1),d("option",B7,E(t.value.levelHighToLow),1),d("option",M7,E(t.value.starsHighToLow),1),d("option",F7,E(t.value.rarityHighToLow),1),d("option",U7,E(t.value.nameOrder),1)],512),[[Di,l.value]])])]),d("div",V7,[d("button",{class:"resetFilterBtn",onClick:k},E(t.value.reset),1),d("button",{class:"applyFilterBtn",onClick:D[10]||(D[10]=z=>f.value=!1)},E(t.value.apply),1)])])])])):ce("",!0),c.value&&h.value?(B(),M("div",{key:1,class:"modalOverlay",onClick:b},[d("div",{class:"modalContent",onClick:D[14]||(D[14]=zn(()=>{},["stop"]))},[d("div",$7,[d("h3",H7,E(h.value.name),1),d("button",{class:"modalClose",onClick:b},"")]),d("div",G7,[d("div",Q7,[d("img",{src:I(h.value.imageId||h.value.id),alt:"NFT",class:"modalImage"},null,8,j7),d("div",z7,[h.value.rarity?(B(),M("div",{key:0,class:"modalBadge rarity",style:Ct(Oe(Tc)(h.value.rarity))},E(Oe(Ey)(h.value.rarity)),5)):ce("",!0),d("div",W7,[(B(),M(Re,null,Xe(5,z=>d("span",{key:z,class:"star"},E(z<=h.value.stars?"":""),1)),64))]),d("div",K7,"Lv "+E(h.value.level),1)])]),d("div",q7,[d("h4",J7,E(t.value.stats),1),d("div",Y7,[(B(!0),M(Re,null,Xe(h.value.stats,(z,he)=>(B(),M("div",{key:he,class:"modalStat"},[d("div",X7,E(z.name),1),d("div",Z7,[d("div",{style:Ct({width:z.progress+"%",backgroundColor:z.color}),class:"modalStatFill"},null,4)]),d("div",eQ,E(z.value)+"%",1)]))),128))])]),d("div",tQ,[d("div",nQ,[D[27]||(D[27]=d("span",{class:"infoLabel"},"NFT ID:",-1)),d("span",sQ,"#"+E(h.value.id),1)]),d("div",rQ,[d("span",iQ,E(t.value.imageId)+":",1),d("span",oQ,"#"+E(h.value.imageId),1)]),d("div",aQ,[d("span",lQ,E(t.value.createdAt)+":",1),d("span",cQ,E(new Date(h.value.id).toLocaleDateString()),1)])]),d("div",uQ,[d("div",hQ,E(t.value.exp),1),d("div",dQ,[d("div",{class:"expFill",style:Ct({width:Math.min((h.value.exp||0)/(h.value.maxExp||Oe(Hr)(h.value.level||1))*100,100)+"%"})},null,4)]),d("div",fQ,E(h.value.exp||0)+" / "+E(h.value.maxExp||Oe(Hr)(h.value.level||1)),1)])]),d("div",pQ,[Oe(j5)(h.value)?(B(),M("button",{key:0,class:"modalBtn levelUpBtn",onClick:Se,disabled:s.value<Oe(bp)(h.value.level||1)},E(t.value.levelUpButton)+" ("+E(Oe(bp)(h.value.level||1))+" "+E(t.value.coin)+") ",9,gQ)):ce("",!0),d("button",{class:"modalBtn selectBtn",onClick:D[13]||(D[13]=z=>{N(h.value),b()})},E(t.value.selectButton),1)])])])):ce("",!0)]))}},yQ=Wt(mQ,[["__scopeId","data-v-6e30ce10"]]),vQ="/tdl/assets/factory_cat-DD06P-8u.png",AQ={class:"factoryPage"},wQ={class:"mainContent"},_Q={class:"tabButtons"},EQ={class:"materialsSection"},bQ=["alt"],IQ={class:"materialText"},CQ={class:"materialCount"},TQ={class:"materialText"},SQ={class:"materialCount"},PQ=["disabled"],RQ=["src"],xQ={class:"popupTitle"},kQ={class:"popupMessage"},NQ={__name:"FactoryPage",setup(n){const e=Cn(),t=de(()=>Cs()),s=hn(),r=de(()=>s.state.totalCoin),i=de(()=>s.state.catFragments),o=$(100),a=$(3),l=$("catcraft"),c=$(!1),h=$(1),f=$(null);Mt(()=>{s.loadCurrentUser();const U=()=>{s.loadCurrentUser()};window.addEventListener("userDataUpdated",U),un(()=>{window.removeEventListener("userDataUpdated",U)})});const p=async()=>{if(r.value<o.value){alert(`${t.value.insufficientCoins} (Required: ${o.value})`);return}if(i.value<a.value){alert(`${t.value.insufficientFragments} (Required: ${a.value})`);return}const U=At();if(U){const W=r.value-o.value,q=i.value-a.value;h.value=A();const x=U.gameData?.inventory||[];x.length+1;const I=Hr(1),S=Math.floor(Math.random()*I),C={id:Date.now(),imageId:h.value,name:`Cat ${h.value}`,level:1,exp:S,maxExp:I,selected:!1,isNew:!0},b=BT(C);f.value=b.rarity;const N=[b,...x];await s.updateGameData({totalCoin:W,catFragments:q,inventory:N}),qH("nftCreated",1),c.value=!0}},m=de(()=>r.value>=o.value&&i.value>=a.value),_=de(()=>r.value>=o.value),v=de(()=>i.value>=a.value),A=()=>Math.floor(Math.random()*30)+1,w=U=>{try{return new URL(Object.assign({"../assets/img/cat1.png":Yc,"../assets/img/cat10.png":Xc,"../assets/img/cat11.png":Zc,"../assets/img/cat12.png":eu,"../assets/img/cat13.png":tu,"../assets/img/cat14.png":nu,"../assets/img/cat15.png":su,"../assets/img/cat16.png":ru,"../assets/img/cat17.png":iu,"../assets/img/cat18.png":ou,"../assets/img/cat19.png":au,"../assets/img/cat2.png":lu,"../assets/img/cat20.png":cu,"../assets/img/cat21.png":uu,"../assets/img/cat22.png":hu,"../assets/img/cat23.png":du,"../assets/img/cat24.png":fu,"../assets/img/cat25.png":pu,"../assets/img/cat26.png":gu,"../assets/img/cat27.png":mu,"../assets/img/cat28.png":yu,"../assets/img/cat29.png":vu,"../assets/img/cat3.png":Au,"../assets/img/cat30.png":wu,"../assets/img/cat4.png":_u,"../assets/img/cat5.png":Eu,"../assets/img/cat6.png":bu,"../assets/img/cat7.png":Iu,"../assets/img/cat8.png":Cu,"../assets/img/cat9.png":Tu,"../assets/img/catPoint.png":Su,"../assets/img/catPointPlus.png":Pu,"../assets/img/catProfile01.png":Ru,"../assets/img/catProfile02.png":xu,"../assets/img/cat_ico.png":ku})[`../assets/img/cat${U}.png`],import.meta.url).href}catch{return`/src/assets/img/cat${U}.png`}},T=()=>{c.value=!1,f.value=null},P=U=>{U==="exchange"?e.push("/exchange"):U==="catcraft"&&(l.value="catcraft")};return(U,W)=>(B(),M("div",AQ,[Ge(Zn,{catCount:i.value},null,8,["catCount"]),d("main",wQ,[d("div",_Q,[d("button",{class:Ne(["tabButton",{active:l.value==="exchange"}]),onClick:W[0]||(W[0]=q=>P("exchange"))}," Exchange ",2),d("button",{class:Ne(["tabButton",{active:l.value==="catcraft"}]),onClick:W[1]||(W[1]=q=>P("catcraft"))}," Cat craft ",2)]),W[4]||(W[4]=d("div",{class:"catSilhouette"},[d("img",{src:vQ,alt:"Cat",class:"catShape"})],-1)),d("div",EQ,[d("div",{class:Ne(["materialItem",{insufficient:!_.value}])},[d("img",{src:vd,alt:t.value.coin,class:"materialIcon"},null,8,bQ),d("span",IQ,[d("span",CQ,E(r.value),1),Da(" / "+E(o.value),1)])],2),d("div",{class:Ne(["materialItem",{insufficient:!v.value}])},[W[3]||(W[3]=d("img",{src:NT,alt:"Cat",class:"materialIcon"},null,-1)),d("span",TQ,[d("span",SQ,E(i.value),1),Da(" / "+E(a.value),1)])],2)]),d("button",{class:Ne(["createButton",{disabled:!m.value}]),onClick:p,disabled:!m.value},E(t.value.createCat),11,PQ)]),Ge(es),c.value?(B(),M("div",{key:0,class:"popupOverlay",onClick:T},[d("div",{class:Ne(["popupContent",`rarity-${f.value}`]),onClick:W[2]||(W[2]=zn(()=>{},["stop"]))},[d("div",{class:"popupCatImage",style:Ct(f.value?Oe(Tc)(f.value):{})},[d("img",{src:w(h.value),alt:""},null,8,RQ)],4),f.value?(B(),M("div",{key:0,class:"rarityBadge",style:Ct(Oe(Tc)(f.value))},E(Oe(Ey)(f.value)),5)):ce("",!0),d("h2",xQ,E(t.value.createCatSuccess),1),d("p",kQ,E(t.value.newCatAdded),1),d("button",{class:"popupCloseBtn",onClick:T},E(t.value.confirm),1)],2)])):ce("",!0)]))}},DQ=Wt(NQ,[["__scopeId","data-v-ba848801"]]),OQ={class:"settingsPage"},LQ={class:"mainContent"},BQ={class:"settingGroup"},MQ={class:"settingGroup"},FQ={class:"settingLabel"},UQ={class:"settingInputWrapper"},VQ={key:0,class:"dropdownMenu"},$Q=["onClick"],HQ={class:"settingGroup"},GQ={class:"settingLabel"},QQ={class:"settingInputWrapper"},jQ={key:0,class:"dropdownMenu"},zQ=["onClick"],WQ={class:"settingSection"},KQ={class:"sectionTitle"},qQ={key:0,class:"walletConnectedCard"},JQ={class:"walletStatusHeader"},YQ={class:"walletStatusIndicator"},XQ=["title"],ZQ={class:"walletInfo"},ej={class:"walletInfoRow"},tj={class:"walletInfoLabel"},nj={class:"walletInfoValue"},sj={class:"walletAddressText"},rj=["title"],ij={class:"walletInfoRow"},oj={class:"walletInfoLabel"},aj={class:"walletBalanceText"},lj={key:1,class:"walletNotConnectedCard"},cj={class:"walletNotConnectedText"},uj={class:"walletNotConnectedDesc"},hj=["disabled"],dj={key:0},fj={key:1},pj={key:0,class:"walletErrorMsg"},gj={key:0,class:"inviteSection"},mj={class:"inviteCard"},yj={class:"inviteTitle"},vj={class:"inviteDescription"},Aj={class:"inviteCodeSection"},wj={class:"inviteCodeLabel"},_j={class:"inviteCodeBox"},Ej={class:"inviteCode"},bj=["title"],Ij={class:"shareButtons"},Cj={class:"rewardInfo"},Tj={class:"rewardItem"},Sj={class:"rewardText"},Pj={class:"rewardTitle"},Rj={class:"rewardDesc"},xj={class:"rewardItem"},kj={class:"rewardText"},Nj={class:"rewardTitle"},Dj={class:"inviteStats"},Oj={class:"statsTitle"},Lj={class:"statsValue"},Bj={class:"statsNumber"},Mj={class:"statsLabel"},Fj={class:"settingGroup"},Uj={class:"settingLabel"},Vj={class:"settingGroup"},$j={class:"depositPopupHeader"},Hj={class:"depositPopupTitle"},Gj={class:"depositPopupContent"},Qj={class:"depositPopupDesc"},jj={class:"depositOptions"},zj={class:"depositOptionInfo"},Wj={class:"depositOptionDesc"},Kj={class:"depositOptionInfo"},qj={class:"depositOptionDesc"},Jj={class:"depositPopupFooter"},Yj={class:"depositPopupNote"},Xj={__name:"SettingsPage",setup(n){const e=Cn(),t=hn(),s=de(()=>Cs()),r=de(()=>t.state.coins),i=$(null),o=$(localStorage.getItem("appLanguage")||"English"),a=$("Busan"),l=$(!1),c=$(!1),h=$(!1);$("");const f=$(!1),p=$(""),m=de(()=>t.state.walletAddress),_=de(()=>t.state.userBalance),v=de(()=>t.state.isWalletConnected),A=$(!1),w=$(""),T=$({inviteCode:"",totalReferrals:0,referrals:[]}),P=["English",""],U=["","","",""],W=de(()=>s.value),q=V=>{o.value=V,l.value=!1,localStorage.setItem("appLanguage",V)};Mt(async()=>{const V=At();V&&(i.value=V,r.value=V.gameData?.coins||0,w.value=Rh(V.id),T.value=zw(V.id));const D=localStorage.getItem("appLanguage");D?o.value=D:(o.value="English",localStorage.setItem("appLanguage","English")),x();const z=()=>{t.loadCurrentUser(),i.value=At(),i.value&&(T.value=zw(i.value.id))};window.addEventListener("userDataUpdated",z),un(()=>{window.removeEventListener("userDataUpdated",z)})});const x=()=>{if(!i.value)return;const V=new Date().toDateString(),D=localStorage.getItem(`checkIn_${i.value.id}`);h.value=D===V},I=async()=>{try{if(f.value=!0,p.value="",!Fc()){p.value=s.value.walletNotInstalled,confirm(s.value.installMetaMask)&&window.open("https://metamask.io/download/","_blank");return}const V=await t.connectWalletToApp();V.success?(p.value="",alert(s.value.walletConnected)):(p.value=V.error||s.value.walletConnectFailed,V.needInstall&&confirm(s.value.installMetaMask)&&window.open("https://metamask.io/download/","_blank"))}catch(V){console.error("  :",V),p.value=s.value.walletConnectError}finally{f.value=!1}},S=()=>{confirm(s.value.disconnectWalletConfirm)&&(t.disconnectWalletFromApp(),e.push("/main"))},C=async()=>{if(m.value)try{await navigator.clipboard.writeText(m.value),alert(s.value.walletAddressCopied)}catch(V){console.error(" :",V),alert(s.value.copyFailed)}},b=async()=>{await t.updateWalletBalance()},N=()=>{A.value=!0},k=()=>{A.value=!1},Se=V=>{const z={phantom:{name:"Phantom",url:"https://phantom.app/",icon:"",description:s.value.goToPhantomWallet},upbit:{name:"Upbit",url:"https://upbit.com/",icon:"",description:s.value.goToUpbitExchange}}[V];if(z){const he=z.url;window.open(he,"_blank"),A.value=!1}},ne=async()=>{if(w.value)try{await navigator.clipboard.writeText(w.value),alert(s.value.codeCopied||"  .")}catch(V){console.error(" :",V),alert(" .")}};return(V,D)=>(B(),M("div",OQ,[Ge(Zn,{coinCount:r.value},null,8,["coinCount"]),d("main",LQ,[d("div",BQ,[d("button",{class:"userProfileBtn",onClick:D[0]||(D[0]=z=>Oe(e).push("/profile"))},[D[8]||(D[8]=d("span",{class:"userProfileIcon"},"",-1)),d("span",null,E(s.value.userSettings),1),D[9]||(D[9]=d("span",{class:"arrowIcon"},"",-1))])]),d("div",MQ,[d("label",FQ,E(s.value.language),1),d("div",UQ,[d("div",{class:"settingInput",onClick:D[1]||(D[1]=z=>l.value=!l.value)},[d("span",null,E(o.value),1),D[10]||(D[10]=d("span",{class:"dropdownIcon"},"",-1))]),l.value?(B(),M("div",VQ,[(B(),M(Re,null,Xe(P,z=>d("div",{key:z,class:Ne(["dropdownItem",{active:o.value===z}]),onClick:he=>q(z)},E(z),11,$Q)),64))])):ce("",!0)])]),d("div",HQ,[d("label",GQ,E(W.value.region),1),d("div",QQ,[d("div",{class:"settingInput",onClick:D[2]||(D[2]=z=>c.value=!c.value)},[d("span",null,E(a.value),1),D[11]||(D[11]=d("span",{class:"dropdownIcon"},"",-1))]),c.value?(B(),M("div",jQ,[(B(),M(Re,null,Xe(U,z=>d("div",{key:z,class:Ne(["dropdownItem",{active:a.value===z}]),onClick:he=>{a.value=z,c.value=!1}},E(z),11,zQ)),64))])):ce("",!0)])]),d("div",WQ,[d("h3",KQ,E(s.value.walletConnection),1),v.value?(B(),M("div",qQ,[d("div",JQ,[d("div",YQ,[D[12]||(D[12]=d("div",{class:"walletIndicatorDot"},null,-1)),d("span",null,E(s.value.connected),1)]),d("button",{class:"refreshBtn",onClick:b,title:s.value.refreshBalance},[...D[13]||(D[13]=[vE('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-af8e52d1><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" data-v-af8e52d1></path><path d="M21 3v5h-5" data-v-af8e52d1></path><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" data-v-af8e52d1></path><path d="M3 21v-5h5" data-v-af8e52d1></path></svg>',1)])],8,XQ)]),d("div",ZQ,[d("div",ej,[d("span",tj,E(s.value.address)+":",1),d("div",nj,[d("span",sj,E(m.value),1),d("button",{class:"walletCopyBtn",onClick:C,title:s.value.copy},[...D[14]||(D[14]=[d("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[d("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),d("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})],-1)])],8,rj)])]),d("div",ij,[d("span",oj,E(s.value.balance)+":",1),d("span",aj,E(_.value),1)])]),d("button",{class:"walletDepositBtn",onClick:N},[D[15]||(D[15]=d("svg",{class:"depositIcon",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[d("path",{d:"M12 2v20M2 12h20"})],-1)),d("span",null,E(s.value.depositFromWallet),1)]),d("button",{class:"walletDisconnectBtn",onClick:S},E(s.value.disconnect),1)])):(B(),M("div",lj,[D[16]||(D[16]=d("div",{class:"walletNotConnectedIcon"},"",-1)),d("p",cj,E(s.value.walletNotConnected),1),d("p",uj,E(s.value.walletConnectDesc),1),d("button",{class:"walletConnectBtn",onClick:I,disabled:f.value},[f.value?(B(),M("span",fj,E(s.value.connecting),1)):(B(),M("span",dj,E(s.value.connectWallet),1))],8,hj),p.value?(B(),M("div",pj,E(p.value),1)):ce("",!0)]))]),i.value?(B(),M("div",gj,[d("div",mj,[d("h2",yj,E(s.value.inviteFriends),1),d("p",vj,E(s.value.inviteDescription),1),d("div",Aj,[d("label",wj,E(s.value.inviteCode),1),d("div",_j,[d("span",Ej,E(w.value),1),d("button",{class:"copyBtn",onClick:ne,title:s.value.copyInviteCode},"  ",8,bj)])]),d("div",Ij,[d("button",{class:"shareBtn copyLinkBtn",onClick:ne},[D[17]||(D[17]=d("span",{class:"copyIcon"},"",-1)),d("span",null,E(s.value.copyLink||" "),1)])]),d("div",Cj,[d("div",Tj,[D[18]||(D[18]=d("span",{class:"rewardIcon"},"",-1)),d("div",Sj,[d("div",Pj,E(s.value.inviteReward),1),d("div",Rj,E(s.value.inviteRewardDesc),1)])]),d("div",xj,[D[19]||(D[19]=d("span",{class:"rewardIcon"},"",-1)),d("div",kj,[d("div",Nj,E(s.value.newUserReward),1)])])]),d("div",Dj,[d("h3",Oj,E(s.value.inviteStats),1),d("div",Lj,[d("span",Bj,E(T.value.totalReferrals),1),d("span",Mj,E(s.value.invites),1)])])])])):ce("",!0),d("div",Fj,[d("label",Uj,E(s.value.attendance),1),d("button",{class:"checkInBtn",onClick:D[3]||(D[3]=z=>Oe(e).push("/attendance"))},E(s.value.doAttendanceCheck),1)]),d("div",Vj,[d("button",{class:"nftBtn",onClick:D[4]||(D[4]=z=>Oe(e).push("/nft"))}," NFT ")])]),Ge(es),A.value?(B(),M("div",{key:0,class:"depositPopupOverlay",onClick:k},[d("div",{class:"depositPopup",onClick:D[7]||(D[7]=zn(()=>{},["stop"]))},[d("div",$j,[d("h3",Hj,E(s.value.selectDepositMethod),1),d("button",{class:"depositPopupClose",onClick:k},"")]),d("div",Gj,[d("p",Qj,E(s.value.selectExchangeToDeposit),1),d("div",jj,[d("button",{class:"depositOption",onClick:D[5]||(D[5]=z=>Se("phantom"))},[D[21]||(D[21]=d("div",{class:"depositOptionIcon"},"",-1)),d("div",zj,[D[20]||(D[20]=d("div",{class:"depositOptionName"},"Phantom",-1)),d("div",Wj,E(s.value.goToPhantomWallet),1)]),D[22]||(D[22]=d("div",{class:"depositOptionArrow"},"",-1))]),d("button",{class:"depositOption",onClick:D[6]||(D[6]=z=>Se("upbit"))},[D[24]||(D[24]=d("div",{class:"depositOptionIcon"},"",-1)),d("div",Kj,[D[23]||(D[23]=d("div",{class:"depositOptionName"},"Upbit",-1)),d("div",qj,E(s.value.goToUpbitExchange),1)]),D[25]||(D[25]=d("div",{class:"depositOptionArrow"},"",-1))])]),d("div",Jj,[d("p",Yj," "+E(s.value.copyWalletAddressAndDeposit),1),d("button",{class:"depositCopyAddressBtn",onClick:C},E(s.value.copyWalletAddress),1)])])])])):ce("",!0)]))}},Zj=Wt(Xj,[["__scopeId","data-v-af8e52d1"]]),ez={class:"profilePage"},tz={class:"mainContent"},nz={class:"profileHeader"},sz={class:"profileImageWrapper"},rz=["src","alt"],iz={key:1,class:"profileImagePlaceholder"},oz={class:"profileInfo"},az={class:"userName"},lz={class:"userEmail"},cz={class:"settingGroup"},uz={class:"settingLabel"},hz={class:"settingInput"},dz={class:"userId"},fz={key:0,class:"statsSection"},pz={class:"sectionTitle"},gz={class:"statsGrid"},mz={class:"statCard"},yz={class:"statInfo"},vz={class:"statLabel"},Az={class:"statValue"},wz={class:"statCard"},_z={class:"statInfo"},Ez={class:"statLabel"},bz={class:"statValue"},Iz={class:"statCard"},Cz={class:"statInfo"},Tz={class:"statLabel"},Sz={class:"statValue"},Pz={class:"statCard"},Rz={class:"statInfo"},xz={class:"statLabel"},kz={class:"statValue"},Nz={class:"logoutSection"},Dz={__name:"UserProfilePage",setup(n){const e=Cn(),t=hn(),{logout:s}=t,r=de(()=>t.state.coins),i=$(null),o=$(""),a=$(""),l=$(""),c=$(""),h=$(""),f={ko:{userProfile:" ",userID:"User ID",copySuccess:"User ID !",logout:"",logoutConfirm:"  ?",login:"",gameStats:" ",level:"",points:"",coins:"",catFragments:" ",back:" "},en:{userProfile:"User Profile",userID:"User ID",copySuccess:"User ID copied!",logout:"Logout",logoutConfirm:"Are you sure you want to logout?",login:"Login",gameStats:"Game Stats",level:"Level",points:"Points",coins:"Coins",catFragments:"Cat Fragments",back:" Back"}},p=de(()=>o.value===""?f.ko:f.en);Mt(()=>{const P=At();if(P)i.value=P,t.loadCurrentUser(),a.value=P.email||P.id||"",l.value=P.name||P.displayName||a.value.split("@")[0]||"User",c.value=P.photoURL||"",h.value=P.id||"ID"+String(Math.random()).substring(2,10);else{const q={id:"guest_"+Date.now(),email:"guest@tdl.com",name:"Guest",loginType:"guest",gameData:{level:1,coins:0,totalCoin:0,catFragments:50}};i.value=q,a.value=q.email,l.value=q.name,h.value=q.id}const U=localStorage.getItem("appLanguage");U?o.value=U:(o.value="English",localStorage.setItem("appLanguage","English"));const W=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",W),un(()=>{window.removeEventListener("userDataUpdated",W)})});const m=()=>{window.history.length>1?e.back():e.push("/settings")},_=()=>{navigator.clipboard.writeText(h.value),alert(p.value.copySuccess)},v=de(()=>i.value?.loginType==="guest"||i.value?.email?.includes("@guest.com")||i.value?.email==="guest@tdl.com"),A=()=>{console.log("   -   "),e.push("/login").then(()=>{console.log("   ")}).catch(P=>{console.error("  :",P),window.location.hash="#/login"})},w=()=>{confirm(p.value.logoutConfirm)&&(HE(),s(),e.push("/login"))},T=de(()=>i.value?{level:i.value.gameData?.level||1,points:i.value.gameData?.coins||0,coins:i.value.gameData?.totalCoin||0,catFragments:i.value.gameData?.catFragments||i.value.gameData?.catCount||0}:null);return(P,U)=>(B(),M("div",ez,[Ge(Zn,{coinCount:r.value},null,8,["coinCount"]),d("main",tz,[d("button",{class:"backBtn",onClick:m},E(p.value.back),1),d("div",nz,[d("div",sz,[c.value?(B(),M("img",{key:0,src:c.value,alt:l.value,class:"profileImage"},null,8,rz)):(B(),M("div",iz,E(l.value.charAt(0).toUpperCase()),1))]),d("div",oz,[d("h2",az,E(l.value),1),d("p",lz,E(a.value),1)])]),d("div",cz,[d("label",uz,E(p.value.userID),1),d("div",hz,[d("span",dz,E(h.value),1),d("button",{class:"copyBtn",onClick:_},"")])]),T.value?(B(),M("div",fz,[d("h3",pz,E(p.value.gameStats),1),d("div",gz,[d("div",mz,[U[0]||(U[0]=d("div",{class:"statIcon"},"",-1)),d("div",yz,[d("div",vz,E(p.value.level),1),d("div",Az,E(T.value.level),1)])]),d("div",wz,[U[1]||(U[1]=d("div",{class:"statIcon"},"",-1)),d("div",_z,[d("div",Ez,E(p.value.points),1),d("div",bz,E(T.value.points.toLocaleString()),1)])]),d("div",Iz,[U[2]||(U[2]=d("div",{class:"statIcon"},"",-1)),d("div",Cz,[d("div",Tz,E(p.value.coins),1),d("div",Sz,E(T.value.coins.toLocaleString()),1)])]),d("div",Pz,[U[3]||(U[3]=d("div",{class:"statIcon"},"",-1)),d("div",Rz,[d("div",xz,E(p.value.catFragments),1),d("div",kz,E(T.value.catFragments.toLocaleString()),1)])])])])):ce("",!0),d("div",Nz,[v.value?(B(),M("button",{key:0,class:"loginBtn",onClick:zn(A,["prevent"]),type:"button"},E(p.value.login),1)):(B(),M("button",{key:1,class:"logoutBtn",onClick:zn(w,["prevent"]),type:"button"},E(p.value.logout),1))])]),Ge(es)]))}},Oz=Wt(Dz,[["__scopeId","data-v-db05d945"]]),Lz={class:"attendancePage"},Bz={class:"mainContent"},Mz={class:"attendanceInfo"},Fz={class:"infoItem"},Uz={class:"infoValue"},Vz={class:"infoItem"},$z={class:"infoValue"},Hz={key:0,class:"attendanceMessage"},Gz={class:"attendanceGrid"},Qz=["onClick"],jz={class:"dayNumber"},zz={class:"rewardIcon"},Wz={key:0,class:"specialStar"},Kz={class:"rewardAmount"},qz={__name:"AttendancePage",setup(n){const e=hn(),t=Cn(),s=de(()=>e.state.coins),r=$(null),i=$(0),o=$([]),a=$(null),l=$(0),c=$(Array.from({length:20},(w,T)=>({day:T+1,reward:"1K",rewardType:"P",hasSpecial:[5,9,10,11,16,17].includes(T+1),isChecked:!1}))),h=(w,T)=>new Date(w).toDateString()===new Date(T).toDateString(),f=()=>{t.go(-1)},p=async w=>{if(!r.value){alert(" .");return}const T=new Date;T.toDateString();const P=T.toISOString();if(a.value&&h(a.value,P)){alert("   !   .");return}const U=c.value[w];if(U.isChecked){alert("  .");return}const W=o.value.length;if(a.value){const I=new Date(a.value),S=Math.floor((T-I)/(1e3*60*60*24));if(S>0&&w!==W){alert("   .");return}S===1?l.value+=1:S>1&&(l.value=1)}else l.value=1;U.isChecked=!0,o.value.push(U.day),i.value=o.value.length;const q=1e3,x=s.value+q;a.value=P,r.value&&(await e.updateCoins(x),await m()),alert(`Day ${U.day}  ! ${q}  !`),window.dispatchEvent(new Event("userDataUpdated"))},m=async()=>{if(r.value){const w={checkedDays:o.value,attendanceDays:i.value,consecutiveDays:l.value,lastCheckInDate:a.value,lastUpdate:new Date().toISOString()};localStorage.setItem(`attendance_${r.value.id}`,JSON.stringify(w)),await e.updateGameData({attendance:w})}},_=async()=>{if(r.value){let w=null;if(r.value.gameData?.attendance&&(w=r.value.gameData.attendance),!w){const T=localStorage.getItem(`attendance_${r.value.id}`);T&&(w=JSON.parse(T),w&&await e.updateGameData({attendance:w}))}w&&(o.value=w.checkedDays||[],i.value=w.attendanceDays||0,l.value=w.consecutiveDays||0,a.value=w.lastCheckInDate||null,o.value.forEach(T=>{const P=T-1;c.value[P]&&(c.value[P].isChecked=!0)}))}},v=de(()=>{if(!a.value)return!0;const w=new Date,T=new Date(a.value),P=w.toDateString(),U=T.toDateString();return P!==U}),A=de(()=>o.value.length);return Mt(async()=>{r.value=At(),e.loadCurrentUser(),r.value&&await _();const w=()=>{e.loadCurrentUser()};window.addEventListener("userDataUpdated",w),un(()=>{window.removeEventListener("userDataUpdated",w)})}),(w,T)=>(B(),M("div",Lz,[Ge(Zn,{coinCount:s.value},null,8,["coinCount"]),d("main",Bz,[d("button",{class:"backBtn",onClick:f}," "),T[3]||(T[3]=d("h1",{class:"pageTitle"},"",-1)),d("div",Mz,[d("div",Fz,[T[0]||(T[0]=d("span",{class:"infoLabel"}," :",-1)),d("span",Uz,E(l.value)+"",1)]),d("div",Vz,[T[1]||(T[1]=d("span",{class:"infoLabel"}," :",-1)),d("span",$z,E(i.value)+"",1)])]),v.value?ce("",!0):(B(),M("div",Hz,"   !   . ")),d("div",Gz,[(B(!0),M(Re,null,Xe(c.value,(P,U)=>(B(),M("div",{key:P.day,class:Ne(["dayCell",{checked:P.isChecked,disabled:!v.value&&!P.isChecked||U!==A.value&&!P.isChecked,nextCheckable:v.value&&U===A.value&&!P.isChecked}]),onClick:W=>v.value&&(U===A.value||P.isChecked)?p(U):null},[d("div",jz,"Day "+E(P.day),1),d("div",zz,[T[2]||(T[2]=d("div",{class:"iconCircle"},"P",-1)),P.hasSpecial&&!P.isChecked?(B(),M("span",Wz,"")):ce("",!0)]),d("div",Kz,E(P.reward),1)],10,Qz))),128))])]),Ge(es)]))}},Jz=Wt(qz,[["__scopeId","data-v-c440a219"]]),Yo=()=>{const n=localStorage.getItem("marketplace");return n?JSON.parse(n):[]},by=n=>{localStorage.setItem("marketplace",JSON.stringify(n))},Yz=(n,e,t)=>{const s=Yo(),r={id:`market_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sellerAddress:t,nftId:n.id,nftData:{...n},price:e,priceType:"COIN",listedAt:Date.now(),status:"listed"};return s.push(r),by(s),r},Xz=(n,e)=>{const t=Yo(),s=t.findIndex(i=>i.id===n&&i.status==="listed");if(s===-1)return{success:!1,error:"  NFT ."};const r=t[s];return r.sellerAddress===e?{success:!1,error:" NFT   ."}:(t[s].status="sold",t[s].soldAt=Date.now(),t[s].buyerAddress=e,by(t),{success:!0,listing:r,nftData:r.nftData})},Zz=(n,e)=>{const t=Yo(),s=t.findIndex(r=>r.id===n&&r.sellerAddress===e&&r.status==="listed");return s===-1?{success:!1,error:"  NFT ."}:(t[s].status="cancelled",t[s].cancelledAt=Date.now(),by(t),{success:!0,listing:t[s]})},eW=n=>Yo().filter(t=>t.sellerAddress===n&&t.status==="listed"),tW=()=>Yo().filter(e=>e.status==="listed"),nW=n=>Yo().some(t=>t.nftId===n&&t.status==="listed"),sW=()=>{const n=Yo(),e=n.filter(s=>s.status==="listed"),t=n.filter(s=>s.status==="sold");return{totalListings:n.length,activeListings:e.length,soldListings:t.length,totalVolume:t.reduce((s,r)=>s+(r.price||0),0)}},rW="/tdl/assets/btc-DC8WHF5v.png",iW="/tdl/assets/eth-DHgp7Wvq.png",oW="/tdl/assets/BTC_line-DiGuGbEI.png",aW="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAACJCAYAAABaWIDDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA85SURBVHgB7d1fchPHFsfxMybJw61KhbuCTN5yqRDbK0BeAXgFmBXErACxguAVYFZgswLEClBibnLf7rCCKDhVqSJGndPqNghibHXPjKZ75vupUqQYy/yxpf5Nd5/ThQAAMBBGtq7r3ZbIfFPvS5GidPeiHzfX3f2yotL/zPxNHxu9bfxkHxcynUrGCgEAoKf8gD/SAf+WDnl39COlNKqwIaDSrzvNLRgQAAAAveIHfTvY39WbXu1/fFW/DsVEFrMGZuKDwSy1YEAAAAD0gg78I73Sv60P96STQf9KMz9jsBwM7IxBJR0gAAAAsuYGfvNAbyPJkw8Gxi8nLILBVIPBTFpEAAAAZEkHfp3eNz9mPPBfpdVgQAAAAGTFrfHPx/rwBxmmRoIBAQAAkA0jN+/o0PVY0lzj71pQMHgXAHyi2tcP2dpI/mHXa+ZqS+19P+pLAaBJXPXXshQMNg7ONx0uAoAmqj19qOsoDPwJqfw37Fi/YU/b3gwCAKnSwb/Uwf+ZuIY9qMdecN4r5OS48P+w/xckrjjU2xMNAhMBgIFoacr/vKvfxHX6szOwb1/p/W8if/5eSDVzv/d/vtZf/7fIta/edwy0fQUWj7ckX/r3O9vRALCp/7BmT5CLSm/jQn5+IgDQY0a+12Vp+VGaUbkZVdHb6U/ng3wdGk5uiQsmI1kEgsK3Gc6BmWgA+F4TD1P/+Sn0h7i431UDCQBok45NY717IPXY6e5DvT/WKe/nsgZGSh1PvzzfSzcSFwxKSW/5YmYDgBHk7KHOBowFAHqigcFfB/75I5E/Dpq40m/C+2BQbPnzCLbc4+4uwG0AsOv/pSBndmfnLrMBAHJXc/BPbuC/SofBYGoDgP2HHgtyV2kI2CEEAMhVvTV/u6Hvr3uF/K+SHlhDMNgvfG3lM8l7RyMct7NTfqGHAICsuLa+8xcSzl71jwt5eSAD0FAwmOrS8bbvA2BDwFtNXcWeIHeEAABZqVHnX+n73S7vdyHBwOgSyelDu0RSXPwFsEbXfelI6etLR1J/isd2FNxmOQBADoxsPos40EcH/dc7uaz1d8XIjS3Xx8D6sPyRswAS5GtL93wYKCVOxZ4AAKmL2/RnS/tO7zP410MASJxv02xfHKWEm/oQwIsEQHLiOtGaw0JO7glq2xAkTX/QD0Xe7Lh1m2Bbbm8HAKTIHAV9uphjBv/mEAAyYMta9If+vv7w74prBRzy7D0/xQYAyXCzmyak+qzSaX8G/waxBJAZI9+WIl9E7JY1u/b0JwGABAQ2oavsTGhfavxTwQxAZtwLwC4JBM8EPHbrbQDQLT8rWQY8Zczg3zwCQIaWQkDI5r5FwydCAIAu+feguwHPeMTpp+0gAGTKhYD5btizbOKeB266AYAmzfckaOr/9KGgFQSAjBXycqJ39yXMlk6/URkAYO3Cr/7t1D+1/m0hAGROp8YeRZQI7lMZAGD9TEhPkylT/+2iCqAnjNx85jsHhjyLygAAaxHe9MeM9P3puaA1zAD0xrWYHgFUBgBYExPQ7tdMGPzbxwxAj/geAfY4zZDDhCrODADQpvCr/zffUPbXPmYAeoTKAABpCrr6P2TwXw8CQM9QGQAgJe7q3+yt/oy/KPtbEwJAD9WoDNgXAGgUV/+pYg9Aj8VVBsx3/CwCANTC2n/amAHotZjKgI0jKgMANMM8Dvhcrv7XjBmAnqtRGbBdyJQOXACi6IXEyJ4/svozuPpfN2YAes69oEzoGdqlyFsqAwDUYAI2FnP13wUCwAC4bn/zsQQpRlQGAIhh5Oae/ndrxU+v2PnfDZYABkRflDqgF6E7/e+7qgIgLX6vih1k7FHXX7uPFuXSZ9glLL+MtfFK3H6YiqZX7dOLB7vxr1zts+fjQl4SADpAABgYfWHa/QCrJnOPygB0yw/2I310SxY/v8b+f8i+lmUaCoqpfg29bdh2s1NCQXPc1X+x6ua/Stf+d5j+7wYBYGD8pkC7MacMeNrMbwqsBFgTv4nstr5N3fEDfotsIBC9FU+FQFBL4NX/vl5cHAg6QQAYICoDkCod9O10vl2m+kHir/CbUOnb48QeSmNnCQgEqwm9+tflxW8EnSEADJS+UPWqqgjc6b84oWtHgIa5q33bMc6MJE2VXzY41kDwkwaCqeADvulPyOzingaAJ4LOEAAGzMh3+oa7MZYwj/RFG3rWAHChDAb+T6kIBB8ysvk4oOc/V/8JIAAMHJUB6II/IOaBBB0Sk7TZR0sGgwoE/hyRkLJhrv4TQAAAlQFYKz9Y2ANiulzjb9tyILAzBBPpKQ1z+t4xfxHwFK7+E0EAAJUBWAt/1f84w+n+Jsw+WjKYSA/4wd++d4SEOa7+E0EAwIKRG/pC/iz0hVxRGYBV+N3hdoq4z1f9Ic4DwcQvGUwkM3GDv235exLamhwtIQDgncASnvNnURmAS+mUv90v8oO0o3INfRYDanXxpyx6COit8F0DU/XBHoKJJCwy0On36M02TX/SQQDAB6gMQFNcTf9iyv+ONGPmBvvi2N2f6lR6FTT7ZKTUP9OXm/asC7cUYe9TtQgEtlvheXOizmfafJ+GsUQFOpr+pIYAgH/QdH+oPxp3JQyVAXjHDxR2ejhwc+mFX22iP4+HIq+fhg74K311uXlrKRAkPEvQbSDwnRntDGEpwYxeJJxwkZAYAgD+If7Nm8oARDWEuYgObnMNlH8ctDHoX8YHgi03c5F0IHi3h0D/Z9JWIGigV0Ol4W173d9HXI0AgAtRGYAYPjzakrBS4nQ28H/KUiAY+SWDHAJBrfMM/Pfxrj+HYSTxKg77SRcBAJ9EZQBC1J/2N4e6rn8/9StF/7q4lUcgeHfAUXVZcyL3vbPft/mmH/SbmPmoGPzTRgDApagMwKqMbB5FbvirbEdA/Zl5LhlygeCaHTBv+yWDUpK1qJSY+dt1dzP+vlEVg3/6CAC4EpUBuEp8qZ+dsj7d7dP6cF6BoBUVg38eCABYCZUB+BQd/MfiWvsGmo8LeflQes7tp/l8pA99tUGfA0H/Al2fEQCwEioDcJEag/9ga8I/CgT29RS5ZyI11PnnhgCAlVEZgGURJ8B5b3W9/7/0gvd8INjUh3cyDQRTkbN7hfwyFWSFAIAgVAbA0iUhO1gdSTAG/6v4boU6OyAjv2SQaiCY+WUcrvozRQBAMCoDhi3yBDgZypp/0xIMBMn1akAcAgCiUBkwTPFd/hj8m/L+PAO7ZGDDwNrOM9Ap/vkxA39/EAAQjcqAYWHwT1PLBxxV+jV10JfjXPs04NMIAIhGZcBwxA/+nP/ehaUDjuwMQSmrvUbtVX3lD1/Sq/2/dNnu11eC3iIAoJbIyoBKlw92qAzIQ40Wv1Od7dkWJMHNFPyrFLn21fuPvv1df+U3kT9/Z1p/eAgAqI3KgH6LbPFbcQIckLYNAWpy9b8mdHNfqVcfgZUEWDfX4jdm8LetYBn8gZQRANAIXec9tJu9JEhxx3eSQ4L89ya0v39FH3ggDywBoFFUBvRDZItfveJ/s83gD+SBAIBGxW8YO9umlWga4lv88j0EcsISABrlNvW92ZXFVHCIz45cqRm65Fr8xvb3Z/AHckIAQOPcFPCZDQEhm8BKO3PgZhDQBdfit4jYmGkb/dDfH8gNAQCtoDIgL77Rjz3ch/7+wEAQANAaKgPyQItfYJjYBIjWURmQLlr8AsNFAEDrIisDZiJnO2wsa098xQZHOwN9wBIAWhdZGXCdyoC2GbvfIri/v8jprgDIHgEAa1GjMuCIyoDm1Wjxu0uLX6AfCABYGz+dH7ppTK9Q30bUpeNTaPELwCIAYK3cxr7gyoA9KgOaUaPFL4M/0DNsAkQnjNw8siV/EmZPAwQNZyJFtvhlMybQUwQAdMLvQH8hYeVnDEaRXIvf4kiC2Ra/dPkD+oglAHTCVwbYUrIq4GlUBkSo0eJ3n8Ef6C8CADqzVBkQoqQyYHU1W/weCIDeIgCgU346P/TMACoDVkCLXwCXIQCgc1QGNK9ei18Gf2AI2ASIZFAZ0Axa/AJYBTMASMg1e7hMJWEeGbkR2s6252jxC+BqBAAkg8qA+mjxC2BVBAAkxVUGzEOPmS2pDKDFL4AwBAAkp5CXE6EyIAgtfgGEIgAgSa4ywDwKfNYgKwN8i9+Iwf+MwR8YMKoAkDQjN5/pj+lIwgymMoAWvwBiMQOAxF2zO9MrCTOIygBa/AKogwCApC1VBoTsUO99ZQAtfgHURQBA8nxlAGcGeLT4BdAEAgCyQGWAU6PF7yMGfwDL2ASIrBi5qQN6sR/4tIeF/DyWzNVo8XtcyAld/gB8gBkAZEUHsvu2Z72EeWDk+7uSvegWv6GNlQAMAAEAGRpeZQAtfgE0jQCA7AytMoAWvwDaQABAloZSGRDZ4rdi8AdwFQIAstX3yoAaLX53GfwBXIUAgKz19cwA1+JXIoKKuVfIL1MBgCtQBohe6NOZAa7F76LcL7TL3z5d/gCsihkA9EQ/KgNo8QtgXZgBQG8Y+bYU+eKFhA2e/ljc7qfNafELYJ2YAUBvRFYG2PLAZ37NvTM6+I/0z27DSylBaPELIA4BAL0SWRmgIaA46mpjoNvtH7Pmv2jxG/p3BYAFlgDQS5FnBliV5mJdEphW0jI35W/b+5qRhNMli9c7dPkDEIsAgN6KrAzwikO9PWwjCPhDfWw4sd39YpoSVTT6AVAXAQC95QfaiHX1ZYsgcKBBoPYmQb/Of1sf7kncwG9VDP4AmkAAQK/5yoCInfX/UOntWJcHnur91J1HcNXvvWg5bGv6R/pSuxU51f/Rn4HBH0AzCADovQZDwJLCzgjYEFDp71AtfbwUd3WvA78ppTkVgz+AJhEAMAjthIC1qRj8ATSNMkAMghs87RHCZiJ5mTL4A2gDAQCDYQfRQk52bOc8yYI95Og1gz+AVrAEgEEy8t1I8+9jSXNJYOZO9Ts5FgBoCTMAGCTXMXBjO73ZgMVV/zcM/gDaxgwABs9tEPz8gb4c9qQzi70JYx34nwsArAEBAPA6CAJ2qt9e6R8y8ANYNwIA8BEfBEb68G58K+FLf4eJfl0d+F8/oZc/gK4QAIBLGCmvi3x5Sx+OfBjYknBT/Up6KyY66D9l0AeQAgIAEMjIDQ0B177yXf/KCz6l0s/SQf5sWsivrwQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADA0PwNkHeXO5vHqaMAAAAASUVORK5CYII=",lW={class:"nftPage"},cW={class:"mainContent nftWrap"},uW={class:"tabMenu"},hW={key:0,class:"walletContent"},dW={class:"walletSection"},fW={class:"walletBalance"},pW={class:"btcInfo"},gW={class:"change positive"},mW={key:0,class:"ethInfo"},yW={class:"subTabMenu"},vW={key:0,class:"itemList"},AW={class:"itemIcon"},wW={class:"itemInfo"},_W={class:"itemSymbol"},EW={class:"itemName"},bW={class:"itemChart"},IW={class:"itemPrice"},CW={class:"price"},TW={key:1,class:"nftList"},SW=["onClick"],PW={class:"nftThumbnail"},RW={class:"nftInfo"},xW={class:"nftId"},kW={class:"collectionName"},NW={class:"nftValue"},DW={class:"nftStars"},OW={class:"nftLevel"},LW={key:0,class:"emptyNFTs"},BW={class:"emptyText"},MW={key:1,class:"marketplaceContent"},FW={class:"marketplaceHeader"},UW={class:"marketplaceStats"},VW={class:"filterBar"},$W={value:"all"},HW={value:"common"},GW={value:"rare"},QW={value:"epic"},jW={value:"legendary"},zW={value:"all"},WW={value:"low"},KW={value:"mid"},qW={value:"high"},JW={value:"newest"},YW={value:"oldest"},XW={value:"priceLow"},ZW={value:"priceHigh"},eK={value:"level"},tK={value:"stars"},nK={key:0,class:"nftGrid"},sK=["onClick"],rK={class:"nftCardImage"},iK=["src"],oK={class:"nftCardBadges"},aK={class:"starBadge"},lK={class:"levelBadge"},cK={class:"nftCardInfo"},uK={class:"nftCardName"},hK={class:"nftCardPrice"},dK={class:"priceLabel"},fK={class:"priceValue"},pK=["onClick"],gK={key:1,class:"emptyMarketplace"},mK={class:"emptyText"},yK={key:2,class:"myNFTsContent"},vK={class:"sectionHeader"},AK={class:"myCoinBalance"},wK={key:0,class:"nftGrid"},_K=["onClick"],EK={class:"nftCardImage"},bK=["src"],IK={class:"nftCardBadges"},CK={class:"starBadge"},TK={class:"levelBadge"},SK={class:"nftCardInfo"},PK={class:"nftCardName"},RK=["onClick"],xK={key:1,class:"emptyMarketplace"},kK={class:"emptyText"},NK={key:3,class:"myListingsContent"},DK={class:"sectionHeader"},OK={key:0,class:"nftGrid"},LK={class:"nftCardImage"},BK=["src"],MK={class:"nftCardBadges"},FK={class:"starBadge"},UK={class:"levelBadge"},VK={class:"nftCardInfo"},$K={class:"nftCardName"},HK={class:"nftCardPrice"},GK={class:"priceLabel"},QK={class:"priceValue"},jK=["onClick"],zK={key:1,class:"emptyMarketplace"},WK={class:"emptyText"},KK={class:"modalHeader"},qK={class:"modalTitle"},JK={class:"modalBody"},YK={class:"sellNFTPreview"},XK=["src"],ZK={class:"sellNFTInfo"},eq={class:"sellNFTName"},tq={class:"sellNFTDetails"},nq={class:"sellPriceInput"},sq={class:"inputLabel"},rq=["placeholder"],iq={class:"priceHint"},oq={class:"modalFooter"},aq={class:"modalHeader"},lq={class:"modalTitle"},cq={class:"modalBody"},uq={class:"buyNFTPreview"},hq=["src"],dq={class:"buyNFTInfo"},fq={class:"buyNFTName"},pq={class:"buyNFTDetails"},gq={class:"buyPriceInfo"},mq={class:"priceRow"},yq={class:"priceLabel"},vq={class:"priceValue"},Aq={class:"priceRow"},wq={class:"priceLabel"},_q={key:0,class:"insufficientWarning"},Eq={class:"modalFooter"},bq=["disabled"],Iq={class:"modalHeader"},Cq={class:"modalTitle"},Tq={class:"modalBody"},Sq={class:"detailNFTImage"},Pq=["src"],Rq={class:"detailBadges"},xq={class:"detailStarBadge"},kq={class:"detailLevelBadge"},Nq={class:"detailInfo"},Dq={class:"detailRow"},Oq={class:"detailValue"},Lq={class:"detailRow"},Bq={class:"detailLabel"},Mq={class:"detailValue"},Fq={class:"popupHeader"},Uq={class:"popupTitle"},Vq={class:"popupBody"},$q={class:"popupMessage"},Hq={class:"popupActions"},Gq={class:"popupHeader"},Qq={class:"popupTitle"},jq={class:"popupBody"},zq={class:"popupMessage"},Wq={class:"popupActions"},Kq={class:"popupHeader"},qq={class:"popupTitle"},Jq={class:"popupBody"},Yq={class:"popupMessage"},Xq={class:"popupActions"},Zq={class:"searchModalHeader"},eJ={class:"searchModalTitle"},tJ={class:"searchModalBody"},nJ=["placeholder"],sJ={class:"searchModalFooter"},rJ={__name:"NFTPage",setup(n){const e=hn(),t=de(()=>e.state.coins),s=de(()=>e.state.totalCoin),r=$("wallet"),i=$("$ 5,323.00"),o=$("0.0000 ETH"),a=$("0.00335"),l=$("+6.54%"),c=$(!1),h=$(!1),f=$(!1),p=$([]),m=$([]),_=$([]),v=$(!1),A=$(!1),w=$(!1),T=$(null),P=$(""),U=$("all"),W=$("all"),q=$("newest"),x=$(""),I=$(!1),S=$("tokens"),C=$(null),b=de(()=>Cs()),N=j=>{try{return new URL(Object.assign({"../assets/img/cat1.png":Yc,"../assets/img/cat10.png":Xc,"../assets/img/cat11.png":Zc,"../assets/img/cat12.png":eu,"../assets/img/cat13.png":tu,"../assets/img/cat14.png":nu,"../assets/img/cat15.png":su,"../assets/img/cat16.png":ru,"../assets/img/cat17.png":iu,"../assets/img/cat18.png":ou,"../assets/img/cat19.png":au,"../assets/img/cat2.png":lu,"../assets/img/cat20.png":cu,"../assets/img/cat21.png":uu,"../assets/img/cat22.png":hu,"../assets/img/cat23.png":du,"../assets/img/cat24.png":fu,"../assets/img/cat25.png":pu,"../assets/img/cat26.png":gu,"../assets/img/cat27.png":mu,"../assets/img/cat28.png":yu,"../assets/img/cat29.png":vu,"../assets/img/cat3.png":Au,"../assets/img/cat30.png":wu,"../assets/img/cat4.png":_u,"../assets/img/cat5.png":Eu,"../assets/img/cat6.png":bu,"../assets/img/cat7.png":Iu,"../assets/img/cat8.png":Cu,"../assets/img/cat9.png":Tu,"../assets/img/catPoint.png":Su,"../assets/img/catPointPlus.png":Pu,"../assets/img/catProfile01.png":Ru,"../assets/img/catProfile02.png":xu,"../assets/img/cat_ico.png":ku})[`../assets/img/cat${j}.png`],import.meta.url).href}catch{return`/src/assets/img/cat${j}.png`}},k=()=>{p.value=tW(),C.value&&(_.value=eW(C.value.walletAddress||C.value.id),m.value=(C.value.gameData?.inventory||[]).filter(j=>!nW(j.id)))},Se=de(()=>{let j=[...p.value];if(x.value.trim()){const F=x.value.toLowerCase();j=j.filter(Q=>Q.nftData.name.toLowerCase().includes(F)||String(Q.nftData.imageId).includes(F))}return U.value!=="all"&&(j=j.filter(F=>(F.nftData.rarity||Ye.COMMON)===U.value)),W.value!=="all"&&(W.value==="low"?j=j.filter(F=>F.price<1e3):W.value==="mid"?j=j.filter(F=>F.price>=1e3&&F.price<5e3):W.value==="high"&&(j=j.filter(F=>F.price>=5e3))),j=[...j].sort((F,Q)=>{switch(q.value){case"newest":return Q.listedAt-F.listedAt;case"oldest":return F.listedAt-Q.listedAt;case"priceLow":return F.price-Q.price;case"priceHigh":return Q.price-F.price;case"level":return(Q.nftData.level||1)-(F.nftData.level||1);case"stars":return(Q.nftData.stars||0)-(F.nftData.stars||0);default:return 0}}),j}),ne=j=>{T.value=j,P.value="",v.value=!0},V=()=>{v.value=!1,T.value=null,P.value=""},D=async()=>{if(!T.value)return;const j=parseFloat(P.value);if(!j||j<=0){alert(b.value.enterValidPrice);return}if(!C.value){alert(b.value.loginRequired);return}const F=C.value.walletAddress||C.value.id;Yz(T.value,j,F);const ee=(C.value.gameData?.inventory||[]).filter(ae=>ae.id!==T.value.id);await e.updateGameData({inventory:ee}),k(),alert(`${b.value.nftListedOnMarketplace} (${b.value.price}: ${j.toLocaleString()} ${b.value.coin})`),V()},z=j=>{T.value=j,A.value=!0},he=()=>{A.value=!1,T.value=null},ke=async()=>{if(!T.value||!C.value)return;const j=T.value,F=C.value.walletAddress||C.value.id,Q=C.value.gameData?.totalCoin||0;if(Q<j.price){alert(`${b.value.insufficientCoinsForPurchase} (${b.value.required}: ${j.price.toLocaleString()}, ${b.value.ownedCoins}: ${Q.toLocaleString()})`);return}const ee=Xz(j.id,F);if(!ee.success){alert(ee.error);return}const ae=C.value.gameData?.inventory||[];ae.unshift(ee.nftData),await e.updateGameData({inventory:ae,totalCoin:Q-j.price});const{getAllUsers:le}=await ph(async()=>{const{getAllUsers:Ee}=await Promise.resolve().then(()=>$x);return{getAllUsers:Ee}},void 0),ge=le().find(Ee=>(Ee.walletAddress||Ee.id)===j.sellerAddress);if(ge){const Ee=ge.gameData?.totalCoin||0;await ac(ge.id,{totalCoin:Ee+j.price}),window.dispatchEvent(new CustomEvent("userDataUpdated"))}k(),alert(`${b.value.nftPurchased} (${j.price.toLocaleString()} ${b.value.coinsPaid})`),he()},Te=async j=>{if(!confirm(b.value.confirmCancelSale)||!C.value)return;const F=C.value.walletAddress||C.value.id,Q=Zz(j.id,F);if(!Q.success){alert(Q.error);return}const ee=C.value.gameData?.inventory||[];ee.unshift(j.nftData),await e.updateGameData({inventory:ee}),k(),alert(b.value.saleCancelled)},Ve=j=>{T.value=j,w.value=!0},ze=()=>{w.value=!1,T.value=null},ft=()=>{x.value="",U.value="all",W.value="all",q.value="newest"},pt=de(()=>sW()),yt=$([{id:1,name:"Bitcoin",symbol:"BTC",price:"36,590.00",change:"+6.21%",isPositive:!0,image:rW,lineImage:oW},{id:2,name:"Ethereum",symbol:"ETH",price:"2,590.00",change:"+5.21%",isPositive:!0,image:iW,lineImage:aW}]),Z=de(()=>C.value?(C.value.gameData?.inventory||[]).slice(0,10):[]),pe=()=>C.value?`$ ${((C.value.gameData?.totalCoin||0)*.01).toFixed(2)}`:"$ 0.00",ue=()=>{h.value=!0},we=()=>{c.value=!0},Qe=()=>{f.value=!0},O=()=>{h.value=!1},L=()=>{c.value=!1},G=()=>{f.value=!1};Mt(()=>{C.value=At(),e.loadCurrentUser(),C.value&&(i.value=pe(),e.isWalletConnected&&e.walletAddress&&(o.value=e.userBalance)),k();const j=()=>{C.value=At(),e.loadCurrentUser(),C.value&&(i.value=pe()),k()};window.addEventListener("userDataUpdated",j),un(()=>{window.removeEventListener("userDataUpdated",j)})});const te=j=>{r.value=j,k()};return(j,F)=>(B(),M("div",lW,[Ge(Zn,{coinCount:t.value},null,8,["coinCount"]),d("main",cW,[d("div",uW,[d("button",{class:Ne(["tab",{active:r.value==="wallet"}]),onClick:F[0]||(F[0]=Q=>te("wallet"))},E(b.value.wallet),3),d("button",{class:Ne(["tab",{active:r.value==="marketplace"}]),onClick:F[1]||(F[1]=Q=>te("marketplace"))},E(b.value.marketplace),3),d("button",{class:Ne(["tab",{active:r.value==="myNFTs"}]),onClick:F[2]||(F[2]=Q=>te("myNFTs"))},E(b.value.myNFTs),3),d("button",{class:Ne(["tab",{active:r.value==="myListings"}]),onClick:F[3]||(F[3]=Q=>te("myListings"))},E(b.value.myListings),3)]),r.value==="wallet"?(B(),M("div",hW,[d("div",dW,[F[23]||(F[23]=d("div",{class:"walletLabel"},"Current Wallet Balance",-1)),d("div",fW,E(i.value),1),d("div",pW,[d("span",null,"BTC : "+E(a.value),1),d("span",gW,E(l.value),1)]),o.value!=="0.0000 ETH"?(B(),M("div",mW,[d("span",null,"ETH : "+E(o.value),1)])):ce("",!0)]),d("div",{class:"actionButtons"},[d("button",{class:"actionBtn sendBtn",onClick:ue},[...F[24]||(F[24]=[d("div",{class:"btnIcon"},null,-1),d("span",{class:"btnLabel"},"Send",-1)])]),d("button",{class:"actionBtn buyBtn",onClick:we},[...F[25]||(F[25]=[d("div",{class:"btnIcon"},null,-1),d("span",{class:"btnLabel"},"Buy",-1)])]),d("button",{class:"actionBtn receiveBtn",onClick:Qe},[...F[26]||(F[26]=[d("div",{class:"btnIcon"},null,-1),d("span",{class:"btnLabel"},"Receive",-1)])])]),d("div",yW,[d("button",{class:Ne(["subTab",{active:S.value==="tokens"}]),onClick:F[4]||(F[4]=Q=>S.value="tokens")}," Tokens ",2),d("button",{class:Ne(["subTab",{active:S.value==="nfts"}]),onClick:F[5]||(F[5]=Q=>S.value="nfts")}," NFTs ",2)]),S.value==="tokens"?(B(),M("div",vW,[(B(!0),M(Re,null,Xe(yt.value,Q=>(B(),M("div",{key:Q.id,class:"item"},[d("div",AW,[d("div",{class:"iconCircle",style:Ct({backgroundImage:`url(${Q.image})`})},null,4)]),d("div",wW,[d("div",_W,E(Q.symbol),1),d("div",EW,E(Q.name),1)]),d("div",bW,[d("div",{class:"chartLine",style:Ct({backgroundImage:`url(${Q.lineImage})`})},null,4)]),d("div",IW,[d("div",CW,"$"+E(Q.price),1),d("div",{class:Ne(["change",{positive:Q.isPositive,negative:!Q.isPositive}])},E(Q.change),3)])]))),128))])):ce("",!0),S.value==="nfts"?(B(),M("div",TW,[(B(!0),M(Re,null,Xe(Z.value,Q=>(B(),M("div",{key:Q.id,class:"nftItem",onClick:ee=>Ve(Q)},[d("div",PW,[d("div",{class:"thumbnailPlaceholder",style:Ct({backgroundImage:`url(${N(Q.imageId||Q.id)})`})},null,4)]),d("div",RW,[d("div",xW,"#"+E(Q.id),1),d("div",kW,E(Q.name),1)]),d("div",NW,[d("div",DW,[(B(),M(Re,null,Xe(5,ee=>d("span",{key:ee,class:"star"},E(ee<=(Q.stars||0)?"":""),1)),64))]),d("div",OW,"Lv "+E(Q.level||1),1)])],8,SW))),128)),Z.value.length===0?(B(),M("div",LW,[F[27]||(F[27]=d("div",{class:"emptyIcon"},"",-1)),d("div",BW,E(b.value.noNFTsInWallet),1)])):ce("",!0)])):ce("",!0)])):ce("",!0),r.value==="marketplace"?(B(),M("div",MW,[d("div",FW,[d("div",UW,[d("span",null,E(b.value.onSale)+": "+E(pt.value.activeListings)+E(b.value.itemsCount),1),d("span",null,E(b.value.totalVolume)+": "+E(pt.value.totalVolume.toLocaleString())+" "+E(b.value.coin),1)]),d("button",{class:"searchBtn",onClick:F[6]||(F[6]=Q=>I.value=!0)},[F[28]||(F[28]=d("span",null,"",-1)),d("span",null,E(b.value.searchNFT),1)])]),d("div",VW,[tn(d("select",{"onUpdate:modelValue":F[7]||(F[7]=Q=>U.value=Q),class:"filterSelect"},[d("option",$W,E(b.value.allRarity),1),d("option",HW,E(b.value.common),1),d("option",GW,E(b.value.rare),1),d("option",QW,E(b.value.epic),1),d("option",jW,E(b.value.legendary),1)],512),[[Di,U.value]]),tn(d("select",{"onUpdate:modelValue":F[8]||(F[8]=Q=>W.value=Q),class:"filterSelect"},[d("option",zW,E(b.value.allPrice),1),d("option",WW,E(b.value.under1000Coins),1),d("option",KW,E(b.value.midPriceRange),1),d("option",qW,E(b.value.over5000Coins),1)],512),[[Di,W.value]]),tn(d("select",{"onUpdate:modelValue":F[9]||(F[9]=Q=>q.value=Q),class:"filterSelect"},[d("option",JW,E(b.value.newest),1),d("option",YW,E(b.value.oldest),1),d("option",XW,E(b.value.priceLow),1),d("option",ZW,E(b.value.priceHigh),1),d("option",eK,E(b.value.levelHigh),1),d("option",tK,E(b.value.starsHigh),1)],512),[[Di,q.value]])]),Se.value.length>0?(B(),M("div",nK,[(B(!0),M(Re,null,Xe(Se.value,Q=>(B(),M("div",{key:Q.id,class:"nftCard",onClick:ee=>Ve(Q.nftData)},[d("div",rK,[d("img",{src:N(Q.nftData.imageId||Q.nftData.id),alt:"NFT"},null,8,iK),d("div",oK,[d("div",aK,[(B(),M(Re,null,Xe(5,ee=>d("span",{key:ee,class:"star"},E(ee<=(Q.nftData.stars||0)?"":""),1)),64))]),d("div",lK,"Lv "+E(Q.nftData.level||1),1)])]),d("div",cK,[d("div",uK,E(Q.nftData.name),1),d("div",hK,[d("span",dK,E(b.value.price)+":",1),d("span",fK,E(Q.price.toLocaleString())+" "+E(b.value.coin),1)])]),d("button",{class:"buyBtn",onClick:zn(ee=>z(Q),["stop"])},E(b.value.buy),9,pK)],8,sK))),128))])):(B(),M("div",gK,[F[29]||(F[29]=d("div",{class:"emptyIcon"},"",-1)),d("div",mK,E(b.value.noNFTsOnSale),1)]))])):ce("",!0),r.value==="myNFTs"?(B(),M("div",yK,[d("div",vK,[d("h3",null,E(b.value.myNFTsCount)+" ("+E(m.value.length)+E(b.value.itemsCount)+")",1),d("div",AK,E(b.value.ownedCoins)+": "+E(s.value.toLocaleString()),1)]),m.value.length>0?(B(),M("div",wK,[(B(!0),M(Re,null,Xe(m.value,Q=>(B(),M("div",{key:Q.id,class:"nftCard",onClick:ee=>Ve(Q)},[d("div",EK,[d("img",{src:N(Q.imageId||Q.id),alt:"NFT"},null,8,bK),d("div",IK,[Q.rarity?(B(),M("div",{key:0,class:"rarityBadge",style:Ct(Oe(Tc)(Q.rarity))},E(Oe(Ey)(Q.rarity)),5)):ce("",!0),d("div",CK,[(B(),M(Re,null,Xe(5,ee=>d("span",{key:ee,class:"star"},E(ee<=(Q.stars||0)?"":""),1)),64))]),d("div",TK,"Lv "+E(Q.level||1),1)])]),d("div",SK,[d("div",PK,E(Q.name),1)]),d("button",{class:"sellBtn",onClick:zn(ee=>ne(Q),["stop"])},E(b.value.sell),9,RK)],8,_K))),128))])):(B(),M("div",xK,[F[30]||(F[30]=d("div",{class:"emptyIcon"},"",-1)),d("div",kK,E(b.value.noNFTsAvailableForSale),1)]))])):ce("",!0),r.value==="myListings"?(B(),M("div",NK,[d("div",DK,[d("h3",null,E(b.value.mySalesList)+" ("+E(_.value.length)+E(b.value.itemsCount)+")",1)]),_.value.length>0?(B(),M("div",OK,[(B(!0),M(Re,null,Xe(_.value,Q=>(B(),M("div",{key:Q.id,class:"nftCard"},[d("div",LK,[d("img",{src:N(Q.nftData.imageId||Q.nftData.id),alt:"NFT"},null,8,BK),d("div",MK,[d("div",FK,[(B(),M(Re,null,Xe(5,ee=>d("span",{key:ee,class:"star"},E(ee<=(Q.nftData.stars||0)?"":""),1)),64))]),d("div",UK,"Lv "+E(Q.nftData.level||1),1)])]),d("div",VK,[d("div",$K,E(Q.nftData.name),1),d("div",HK,[d("span",GK,E(b.value.salePrice)+":",1),d("span",QK,E(Q.price.toLocaleString())+" "+E(b.value.coin),1)])]),d("button",{class:"cancelBtn",onClick:ee=>Te(Q)},E(b.value.cancelSale),9,jK)]))),128))])):(B(),M("div",zK,[F[31]||(F[31]=d("div",{class:"emptyIcon"},"",-1)),d("div",WK,E(b.value.noNFTsOnSaleList),1)]))])):ce("",!0)]),Ge(es),v.value&&T.value?(B(),M("div",{key:0,class:"modalOverlay",onClick:V},[d("div",{class:"modalContent",onClick:F[11]||(F[11]=zn(()=>{},["stop"]))},[d("div",KK,[d("h3",qK,E(b.value.sellNFT),1),d("button",{class:"modalClose",onClick:V},"")]),d("div",JK,[d("div",YK,[d("img",{src:N(T.value.imageId||T.value.id),alt:"NFT",class:"sellNFTImage"},null,8,XK),d("div",ZK,[d("div",eq,E(T.value.name),1),d("div",tq,[d("span",null," "+E(T.value.stars||0)+E(b.value.starsRating),1),d("span",null,"Lv "+E(T.value.level||1),1)])])]),d("div",nq,[d("label",sq,E(b.value.sellPriceLabel),1),tn(d("input",{type:"number","onUpdate:modelValue":F[10]||(F[10]=Q=>P.value=Q),placeholder:b.value.enterPrice,class:"priceInput",min:"1"},null,8,rq),[[bs,P.value]]),d("div",iq,E(b.value.currentOwnedCoins)+": "+E(s.value.toLocaleString()),1)])]),d("div",oq,[d("button",{class:"modalBtn cancelBtn",onClick:V},E(b.value.cancel),1),d("button",{class:"modalBtn confirmBtn",onClick:D},E(b.value.registerSale),1)])])])):ce("",!0),A.value&&T.value?(B(),M("div",{key:1,class:"modalOverlay",onClick:he},[d("div",{class:"modalContent",onClick:F[12]||(F[12]=zn(()=>{},["stop"]))},[d("div",aq,[d("h3",lq,E(b.value.buyNFT),1),d("button",{class:"modalClose",onClick:he},"")]),d("div",cq,[d("div",uq,[d("img",{src:N(T.value.nftData.imageId||T.value.nftData.id),alt:"NFT",class:"buyNFTImage"},null,8,hq),d("div",dq,[d("div",fq,E(T.value.nftData.name),1),d("div",pq,[d("span",null," "+E(T.value.nftData.stars||0)+E(b.value.starsRating),1),d("span",null,"Lv "+E(T.value.nftData.level||1),1)])])]),d("div",gq,[d("div",mq,[d("span",yq,E(b.value.salePrice)+":",1),d("span",vq,E(T.value.price.toLocaleString())+" "+E(b.value.coin),1)]),d("div",Aq,[d("span",wq,E(b.value.ownedCoins)+":",1),d("span",{class:Ne(["priceValue",{insufficient:s.value<T.value.price}])},E(s.value.toLocaleString())+" "+E(b.value.coin),3)]),s.value<T.value.price?(B(),M("div",_q,E(b.value.insufficientCoinsWarning),1)):ce("",!0)])]),d("div",Eq,[d("button",{class:"modalBtn cancelBtn",onClick:he},E(b.value.cancel),1),d("button",{class:Ne(["modalBtn confirmBtn",{disabled:s.value<T.value.price}]),onClick:ke,disabled:s.value<T.value.price},E(b.value.buy),11,bq)])])])):ce("",!0),w.value&&T.value?(B(),M("div",{key:2,class:"modalOverlay",onClick:ze},[d("div",{class:"modalContent detailModal",onClick:F[13]||(F[13]=zn(()=>{},["stop"]))},[d("div",Iq,[d("h3",Cq,E(T.value.name),1),d("button",{class:"modalClose",onClick:ze},"")]),d("div",Tq,[d("div",Sq,[d("img",{src:N(T.value.imageId||T.value.id),alt:"NFT"},null,8,Pq),d("div",Rq,[d("div",xq,[(B(),M(Re,null,Xe(5,Q=>d("span",{key:Q,class:"star"},E(Q<=(T.value.stars||0)?"":""),1)),64))]),d("div",kq,"Lv "+E(T.value.level||1),1)])]),d("div",Nq,[d("div",Dq,[F[32]||(F[32]=d("span",{class:"detailLabel"},"NFT ID:",-1)),d("span",Oq,"#"+E(T.value.id),1)]),d("div",Lq,[d("span",Bq,E(b.value.imageId)+":",1),d("span",Mq,"#"+E(T.value.imageId),1)])])])])])):ce("",!0),h.value?(B(),M("div",{key:3,class:"popupOverlay",onClick:O},[d("div",{class:"popupContent",onClick:F[14]||(F[14]=zn(()=>{},["stop"]))},[d("div",Fq,[d("h2",Uq,E(b.value.send),1),d("button",{class:"closeBtn",onClick:O},"")]),d("div",Vq,[d("p",$q,E(b.value.sendFeatureComingSoon),1),d("div",Hq,[d("button",{class:"popupBtn cancelBtn",onClick:O},E(b.value.confirm),1)])])])])):ce("",!0),c.value?(B(),M("div",{key:4,class:"popupOverlay",onClick:L},[d("div",{class:"popupContent",onClick:F[15]||(F[15]=zn(()=>{},["stop"]))},[d("div",Gq,[d("h2",Qq,E(b.value.buy),1),d("button",{class:"closeBtn",onClick:L},"")]),d("div",jq,[d("p",zq,E(b.value.buyFeatureComingSoon),1),d("div",Wq,[d("button",{class:"popupBtn cancelBtn",onClick:L},E(b.value.confirm),1)])])])])):ce("",!0),f.value?(B(),M("div",{key:5,class:"popupOverlay",onClick:G},[d("div",{class:"popupContent",onClick:F[16]||(F[16]=zn(()=>{},["stop"]))},[d("div",Kq,[d("h2",qq,E(b.value.receive),1),d("button",{class:"closeBtn",onClick:G},"")]),d("div",Jq,[d("p",Yq,E(b.value.receiveFeatureComingSoon),1),d("div",Xq,[d("button",{class:"popupBtn cancelBtn",onClick:G},E(b.value.confirm),1)])])])])):ce("",!0),I.value?(B(),M("div",{key:6,class:"modalOverlay",onClick:F[22]||(F[22]=Q=>I.value=!1)},[d("div",{class:"searchModal",onClick:F[21]||(F[21]=zn(()=>{},["stop"]))},[d("div",Zq,[d("h3",eJ,E(b.value.searchNFT),1),d("button",{class:"searchModalClose",onClick:F[17]||(F[17]=Q=>I.value=!1)},"")]),d("div",tJ,[tn(d("input",{type:"text","onUpdate:modelValue":F[18]||(F[18]=Q=>x.value=Q),placeholder:b.value.searchPlaceholderNFT,class:"searchInput",onKeyup:F[19]||(F[19]=SE(Q=>I.value=!1,["enter"]))},null,40,nJ),[[bs,x.value]])]),d("div",sJ,[d("button",{class:"modalBtn resetBtn",onClick:ft},E(b.value.reset),1),d("button",{class:"modalBtn applyBtn",onClick:F[20]||(F[20]=Q=>I.value=!1)},E(b.value.apply),1)])])])):ce("",!0)]))}},iJ=Wt(rJ,[["__scopeId","data-v-001a4726"]]),oJ={class:"notificationPage"},aJ={class:"mainContent"},lJ={class:"pageHeader"},cJ={class:"notificationList"},uJ=["onClick"],hJ={class:"notificationContent"},dJ={class:"notificationTitle"},fJ={class:"notificationMessage"},pJ={class:"notificationTime"},gJ={key:0,class:"unreadDot"},mJ={key:0,class:"emptyState"},yJ={__name:"NotificationPage",setup(n){const e=Cn(),t=hn(),s=de(()=>t.state.coins),r=$([{id:1,title:"  !",message:"    .",time:"5 ",read:!1,type:"quest"},{id:2,title:"Coin  ",message:"1 Coin  .",time:"1 ",read:!1,type:"exchange"},{id:3,title:"  ",message:"   !",time:"2 ",read:!0,type:"factory"},{id:4,title:" ",message:"  100 Point .",time:"1 ",read:!0,type:"attendance"}]);Mt(()=>{t.loadCurrentUser();const c=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",c),un(()=>{window.removeEventListener("userDataUpdated",c)})});const i=c=>{c.read||(c.read=!0)},o=()=>{r.value.forEach(c=>{c.read=!0})},a=de(()=>r.value.filter(c=>!c.read).length),l=c=>{switch(i(c),c.type){case"quest":e.push("/quest");break;case"exchange":e.push("/exchange");break;case"factory":e.push("/factory");break;case"attendance":e.push("/attendance");break}};return(c,h)=>(B(),M("div",oJ,[Ge(Zn,{coinCount:s.value},null,8,["coinCount"]),d("main",aJ,[d("div",lJ,[h[0]||(h[0]=d("h1",{class:"pageTitle"},"",-1)),a.value>0?(B(),M("button",{key:0,class:"markAllReadBtn",onClick:o},"   ")):ce("",!0)]),d("div",cJ,[(B(!0),M(Re,null,Xe(r.value,f=>(B(),M("div",{key:f.id,class:Ne(["notificationItem",{unread:!f.read}]),onClick:p=>l(f)},[d("div",hJ,[d("div",dJ,E(f.title),1),d("div",fJ,E(f.message),1),d("div",pJ,E(f.time),1)]),f.read?ce("",!0):(B(),M("div",gJ))],10,uJ))),128)),r.value.length===0?(B(),M("div",mJ,[...h[1]||(h[1]=[d("p",null," .",-1)])])):ce("",!0)])]),Ge(es)]))}},vJ=Wt(yJ,[["__scopeId","data-v-0a7cfb99"]]),AJ="/tdl/assets/point_ico-CuS5zUpS.png",wJ="/tdl/assets/coin_ico-COVm5STX.png",_J={class:"shopPage"},EJ={class:"mainContent"},bJ={class:"itemList"},IJ={class:"itemInfo"},CJ={class:"itemName"},TJ={class:"itemDescription"},SJ={class:"itemPrice"},PJ={class:"priceValue"},RJ={class:"priceCurrency"},xJ={key:0,src:AJ,alt:"P",class:"currencyIcon"},kJ={key:1,src:wJ,alt:"C",class:"currencyIcon"},NJ=["disabled","onClick"],DJ={__name:"ShopPage",setup(n){const e=hn(),t=de(()=>e.state.coins),s=de(()=>e.state.totalCoin),r=de(()=>Cs()),i=de(()=>[{id:1,name:r.value.energy100,description:`${r.value.energyRecover} 100 ${r.value.energy}`,price:100,currency:"point",amount:100},{id:2,name:r.value.energy500,description:`${r.value.energyRecover} 500 ${r.value.energy}`,price:450,currency:"point",amount:500},{id:3,name:r.value.energy1000,description:`${r.value.energyRecover} 1000 ${r.value.energy}`,price:800,currency:"point",amount:1e3},{id:4,name:r.value.energy2000,description:`${r.value.energyRecover} 2000 ${r.value.energy}`,price:1500,currency:"point",amount:2e3}]),o=()=>{e.loadCurrentUser()},a=async l=>{if(!At()){alert(r.value.loginRequired);return}if(l.currency==="point"&&t.value<l.price){alert(r.value.insufficientPoints);return}if(l.currency==="coin"&&s.value<l.price){alert(r.value.insufficientCoins);return}let h=!1;if(l.currency==="point"){const _=t.value-l.price;h=await e.updateMultiple({coins:_})}else{const _=s.value-l.price;h=await e.updateMultiple({totalCoin:_})}if(!h){alert(r.value.purchaseFailed);return}const f=4e3,p=parseInt(localStorage.getItem("currentEnergy")||f.toString(),10),m=Math.min(p+l.amount,f);localStorage.setItem("currentEnergy",m.toString()),localStorage.setItem("energyLastDate",new Date().toDateString()),window.dispatchEvent(new CustomEvent("userDataUpdated")),alert(`${l.name} ${r.value.purchaseComplete} ${l.amount} ${r.value.energyRecovered}! (${r.value.currentEnergy}: ${e.formatNumber(m)}/${e.formatNumber(f)})`)};return Mt(()=>{o();const l=()=>{e.loadCurrentUser()};window.addEventListener("userDataUpdated",l),un(()=>{window.removeEventListener("userDataUpdated",l)})}),(l,c)=>(B(),M("div",_J,[Ge(Zn,{coinCount:t.value},null,8,["coinCount"]),d("main",EJ,[d("div",bJ,[(B(!0),M(Re,null,Xe(i.value,h=>(B(),M("div",{key:h.id,class:"shopItem"},[d("div",IJ,[d("h3",CJ,E(h.name),1),d("p",TJ,E(h.description),1)]),d("div",SJ,[d("span",PJ,E(h.price.toLocaleString()),1),d("span",RJ,[h.currency==="point"?(B(),M("img",xJ)):(B(),M("img",kJ))])]),d("button",{class:"buyBtn",disabled:h.currency==="point"&&t.value<h.price||h.currency==="coin"&&s.value<h.price,onClick:f=>a(h)},E(r.value.buy),9,NJ)]))),128))])]),Ge(es)]))}},OJ=Wt(DJ,[["__scopeId","data-v-21262eca"]]),c_="/tdl/assets/arrow-B-Afy2tM.png",LJ="/tdl/assets/shadow-BT4_IuPe.png",BJ="/tdl/assets/cat1-B_B8VE2s.png",MJ="/tdl/assets/cat10-B8AgbljH.png",FJ="/tdl/assets/cat20-Bz9cd08a.png",UJ="/tdl/assets/cat29-D_79HmBj.png",VJ="/tdl/assets/cat30-Cx-HRp0m.png",$J="/tdl/assets/cusionBed-Dno4HzpB.png",HJ="/tdl/assets/ballYarn-DeUmKKN5.png",GJ="/tdl/assets/cannedFood-CAb6Z8ZX.png",QJ="/tdl/assets/fishToy-67OFlkDg.png",jJ="/tdl/assets/heart-BK3AGGPn.png",zJ="/tdl/assets/affectionBar2-RPbv561I.png",WJ="/tdl/assets/affectionBar-Dx16DdEg.png",KJ={class:"homePage"},qJ={class:"mainContent"},JJ={key:0,class:"homeContent"},YJ={class:"catContainer"},XJ={class:"catWrapper"},ZJ={key:0,class:"affectionBarContainer"},eY={class:"affectionBarWrapper"},tY=["src"],nY=["src"],sY=["src"],rY={key:1,class:"loginPrompt"},iY=["onClick"],oY=["src","alt"],aY={class:"speechBubbles"},lY=["src"],cY={key:1,class:"heartPlusText"},uY={class:"foodEmojis"},hY=["src"],dY=100,fY={__name:"HomePage",setup(n){const e=hn(),t=de(()=>e.state.coins),s=de(()=>e.state.totalCoin),r=de(()=>Cs()),i=$(null),o=[BJ,MJ,FJ,UJ,VJ],a=$(0),l=$([]),c=$([]),h=$(1),f=de(()=>Math.min(h.value/dY*100,100)),p=$(null),m=$("auto"),_=$(!1),v=[{id:1,image:$J,name:"Cushion Bed"},{id:2,image:HJ,name:"Ball Yarn"},{id:3,image:GJ,name:"Canned Food"},{id:4,image:QJ,name:"Fish Toy"}],A=["!","  !","  ?","!"," ?"," !","!"," ...","  !","!","!","!","!","!","  !"],w=["Hello!","Nice weather today!","What are you doing?","This is fun!","Do you like cats?","I want to play!","I'm hungry!","I'm sleepy...","Have a great day!","Thank you!","I'm happy!","This is fun!","Hang in there!","Fighting!","Have a nice day!"],T=()=>(localStorage.getItem("appLanguage")||"English")===""?A:w,P=()=>{a.value=(a.value-1+o.length)%o.length},U=()=>{a.value=(a.value+1)%o.length},W=de(()=>o[a.value]),q=()=>{const C=T(),b=C[Math.floor(Math.random()*C.length)],N=Math.min(window.innerWidth||500,500),k=window.innerHeight||800,Se=220,ne=60,V=20,D={id:Date.now(),text:b,x:Math.random()*(N-Se-V*2)+V,y:Math.random()*(k-ne-V*2-200)+100};l.value.push(D),setTimeout(()=>{const z=l.value.findIndex(he=>he.id===D.id);z>-1&&l.value.splice(z,1)},2e3)},x=()=>{_.value=!_.value},I=async C=>{if(s.value<1){alert(" !");return}const N=s.value-1;try{await e.updateGameData({totalCoin:N})}catch(ke){console.error("  :",ke),alert("  .");return}const k=Math.min(window.innerWidth||500,500),Se=window.innerHeight||800,ne={id:Date.now(),x:k/2+(Math.random()-.5)*100,y:Se/2+(Math.random()-.5)*100,image:C.image};c.value.push(ne),setTimeout(()=>{const ke=c.value.findIndex(Te=>Te.id===ne.id);ke>-1&&c.value.splice(ke,1)},2e3),h.value++;const V=Math.min(window.innerWidth||500,500),D=window.innerHeight||800,z=20,he={id:Date.now()+1,text:"+1",heartImage:jJ,isHeartOnly:!0,x:Math.random()*(V-100-z*2)+z,y:Math.random()*(D-100-z*2-200)+100};l.value.push(he),setTimeout(()=>{const ke=l.value.findIndex(Te=>Te.id===he.id);ke>-1&&l.value.splice(ke,1)},2e3)},S=()=>{p.value&&(m.value=p.value.offsetHeight+"px")};return Mt(()=>{if(i.value=At(),i.value)e.loadCurrentUser();else{const C={id:"guest_"+Date.now(),email:"guest@tdl.com",name:"Guest",loginType:"guest",gameData:{level:1,coins:0,totalCoin:0,catFragments:50,nftCount:0,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}};localStorage.setItem("currentUser",JSON.stringify(C)),sessionStorage.setItem("currentUser",JSON.stringify(C)),i.value=C,e.loadCurrentUser()}setTimeout(()=>{S()},100)}),(C,b)=>(B(),M("div",KJ,[Ge(Zn,{coinCount:t.value,totalCoin:s.value},null,8,["coinCount","totalCoin"]),d("main",qJ,[i.value?(B(),M("div",JJ,[d("div",YJ,[d("button",{class:"arrowButton arrowLeft",onClick:P},[...b[2]||(b[2]=[d("img",{src:c_,alt:"",class:"arrowIcon"},null,-1)])]),d("div",XJ,[_.value?(B(),M("div",ZJ,[b[3]||(b[3]=d("span",{class:"levelText"},"Lv.",-1)),d("div",eY,[d("img",{ref_key:"affectionBarBgRef",ref:p,src:Oe(zJ),alt:"  ",class:"affectionBarBg",onLoad:S},null,40,tY),d("div",{class:"affectionBarFill",style:Ct({width:f.value+"%",height:m.value})},[d("img",{src:Oe(WJ),alt:" ",class:"affectionBarFillImg"},null,8,nY)],4)])])):ce("",!0),Ge(eR,{name:"slide",mode:"out-in"},{default:$_(()=>[(B(),M("div",{key:a.value,class:"catSlide"},[b[4]||(b[4]=d("img",{src:LJ,alt:"",class:"catShadow"},null,-1)),d("img",{src:W.value,alt:"",class:"catImage",onClick:q,style:{cursor:"pointer"}},null,8,sY)]))]),_:1})]),d("button",{class:"arrowButton arrowRight",onClick:U},[...b[5]||(b[5]=[d("img",{src:c_,alt:"",class:"arrowIcon"},null,-1)])])])])):(B(),M("div",rY,[d("p",null,E(r.value.loginRequired),1),d("button",{class:"loginBtn",onClick:b[0]||(b[0]=N=>C.$router.push("/login"))},E(r.value.login),1)])),i.value?(B(),M("div",{key:2,class:Ne(["actionButtons",{"gift-buttons-container":_.value}])},[_.value?(B(),M(Re,{key:1},[(B(),M(Re,null,Xe(v,N=>d("button",{key:N.id,class:"actionBtn giftBtn",onClick:k=>I(N)},[d("img",{src:N.image,alt:N.name,class:"gift-btn-image"},null,8,oY)],8,iY)),64)),d("button",{class:"actionBtn backBtn",onClick:b[1]||(b[1]=N=>_.value=!1)},"  ")],64)):(B(),M(Re,{key:0},[d("button",{class:"actionBtn talkBtn",onClick:q}," Talk "),d("button",{class:"actionBtn petBtn",onClick:x}," Give gifts ")],64))],2)):ce("",!0)]),Ge(es),d("div",aY,[(B(!0),M(Re,null,Xe(l.value,N=>(B(),M("div",{key:N.id,class:Ne(N.isHeartOnly?"heartOnly":"speechBubble"),style:Ct({left:N.x+"px",top:N.y+"px",transform:"translateX(-50%)"})},[N.isHeartOnly?(B(),M(Re,{key:1},[N.heartImage?(B(),M("img",{key:0,src:N.heartImage,alt:"",class:"heart-image"},null,8,lY)):ce("",!0),N.text?(B(),M("span",cY,E(N.text),1)):ce("",!0)],64)):(B(),M(Re,{key:0},[Da(E(N.text),1)],64))],6))),128))]),d("div",uY,[(B(!0),M(Re,null,Xe(c.value,N=>(B(),M("div",{key:N.id,class:"foodEmoji",style:Ct({left:N.x+"px",top:N.y+"px"})},[d("img",{src:N.image,alt:"",class:"tulImage"},null,8,hY)],4))),128))])]))}},pY=Wt(fY,[["__scopeId","data-v-fc726918"]]),gY=["/loading","/login","/signup","/forgot-password","/reset-password","/home","/main"],mY=[{path:"/",redirect:"/loading"},{path:"/loading",component:c6},{path:"/login",component:x6},{path:"/signup",component:H6},{path:"/forgot-password",component:l5},{path:"/reset-password",component:_5},{path:"/main",component:C9},{path:"/mining",component:Q9},{path:"/hunting",component:A$},{path:"/exploration",component:K$},{path:"/production",component:PH},{path:"/exchange",component:KH},{path:"/quest",component:gG},{path:"/inventory",component:yQ},{path:"/factory",component:DQ},{path:"/settings",component:Zj},{path:"/profile",component:Oz},{path:"/attendance",component:Jz},{path:"/nft",component:iJ},{path:"/notification",component:vJ},{path:"/shop",component:OJ},{path:"/home",component:pY}],MT=Fx({history:mx(),routes:mY}),u_=(n,e)=>({id:n.uid,email:n.email,name:n.displayName||n.email?.split("@")[0]||"",photoURL:n.photoURL,loginType:"google",gameData:e||{level:1,coins:0,totalCoin:0,catFragments:50,nftCount:0,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}});MT.beforeEach(async(n,e,t)=>{let s=At();const r=s?.loginType==="guest"||s?.email?.includes("@guest.com")||s?.email==="guest@tdl.com";let i=!!s&&!r;if(!i&&It&&It.currentUser){console.log("Router guard:    Firebase   ,  ...");try{const a=await Mg(It.currentUser.uid),l=u_(It.currentUser,a?.gameData);localStorage.setItem("currentUser",JSON.stringify(l)),sessionStorage.setItem("currentUser",JSON.stringify(l)),s=l,i=!0,console.log("Router guard: Firebase       :",l.email)}catch(a){console.error("Router guard: Firebase   :",a)}}if(!i&&!It?.currentUser&&n.path!=="/login"&&n.path!=="/signup"&&n.path!=="/loading"&&(await new Promise(a=>setTimeout(a,100)),s=At(),i=!!s,!i&&It&&It.currentUser))try{const a=await Mg(It.currentUser.uid),l=u_(It.currentUser,a?.gameData);localStorage.setItem("currentUser",JSON.stringify(l)),sessionStorage.setItem("currentUser",JSON.stringify(l)),s=l,i=!0,console.log("Router guard:   Firebase    :",l.email)}catch(a){console.error("Router guard:   Firebase   :",a)}const o=gY.includes(n.path);if(i&&(n.path==="/login"||n.path==="/signup")){console.log("Router guard: authenticated user hitting login/signup, redirecting to /home"),t("/home");return}if(r&&(n.path==="/login"||n.path==="/signup")){console.log("Router guard: guest user accessing login/signup, allowing access"),t();return}if(!i&&!o){console.log("Router guard: unauthenticated access to protected route, redirecting to /login",{to:n.path,hasLocalStorage:!!localStorage.getItem("currentUser"),hasSessionStorage:!!sessionStorage.getItem("currentUser"),hasFirebaseAuth:It&&!!It.currentUser}),t("/login");return}t()});const FT=RR(n6);FT.use(MT);FT.mount("#app");export{It as a,Mg as g,e6 as h,vY as o};
