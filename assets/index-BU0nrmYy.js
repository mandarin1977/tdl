(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function wg(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const xt={},fa=[],pr=()=>{},$w=()=>!1,Ph=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),_g=n=>n.startsWith("onUpdate:"),Dn=Object.assign,Eg=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},kT=Object.prototype.hasOwnProperty,wt=(n,e)=>kT.call(n,e),Oe=Array.isArray,pa=n=>bc(n)==="[object Map]",za=n=>bc(n)==="[object Set]",Ry=n=>bc(n)==="[object Date]",Ke=n=>typeof n=="function",ln=n=>typeof n=="string",_r=n=>typeof n=="symbol",Pt=n=>n!==null&&typeof n=="object",Hw=n=>(Pt(n)||Ke(n))&&Ke(n.then)&&Ke(n.catch),Gw=Object.prototype.toString,bc=n=>Gw.call(n),NT=n=>bc(n).slice(8,-1),Qw=n=>bc(n)==="[object Object]",bg=n=>ln(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Pl=wg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Rh=n=>{const e=Object.create(null);return(t=>e[t]||(e[t]=n(t)))},DT=/-\w/g,$s=Rh(n=>n.replace(DT,e=>e.slice(1).toUpperCase())),OT=/\B([A-Z])/g,qi=Rh(n=>n.replace(OT,"-$1").toLowerCase()),xh=Rh(n=>n.charAt(0).toUpperCase()+n.slice(1)),ff=Rh(n=>n?`on${xh(n)}`:""),ki=(n,e)=>!Object.is(n,e),Au=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},jw=(n,e,t,s=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:s,value:t})},Fu=n=>{const e=parseFloat(n);return isNaN(e)?n:e},LT=n=>{const e=ln(n)?Number(n):NaN;return isNaN(e)?n:e};let xy;const kh=()=>xy||(xy=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Tt(n){if(Oe(n)){const e={};for(let t=0;t<n.length;t++){const s=n[t],r=ln(s)?UT(s):Tt(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(ln(n)||Pt(n))return n}const BT=/;(?![^(]*\))/g,MT=/:([^]+)/,FT=/\/\*[^]*?\*\//g;function UT(n){const e={};return n.replace(FT,"").split(BT).forEach(t=>{if(t){const s=t.split(MT);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Ne(n){let e="";if(ln(n))e=n;else if(Oe(n))for(let t=0;t<n.length;t++){const s=Ne(n[t]);s&&(e+=s+" ")}else if(Pt(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const VT="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",$T=wg(VT);function zw(n){return!!n||n===""}function HT(n,e){if(n.length!==e.length)return!1;let t=!0;for(let s=0;t&&s<n.length;s++)t=Ro(n[s],e[s]);return t}function Ro(n,e){if(n===e)return!0;let t=Ry(n),s=Ry(e);if(t||s)return t&&s?n.getTime()===e.getTime():!1;if(t=_r(n),s=_r(e),t||s)return n===e;if(t=Oe(n),s=Oe(e),t||s)return t&&s?HT(n,e):!1;if(t=Pt(n),s=Pt(e),t||s){if(!t||!s)return!1;const r=Object.keys(n).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in n){const a=n.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Ro(n[o],e[o]))return!1}}return String(n)===String(e)}function Ig(n,e){return n.findIndex(t=>Ro(t,e))}const Ww=n=>!!(n&&n.__v_isRef===!0),_=n=>ln(n)?n:n==null?"":Oe(n)||Pt(n)&&(n.toString===Gw||!Ke(n.toString))?Ww(n)?_(n.value):JSON.stringify(n,Kw,2):String(n),Kw=(n,e)=>Ww(e)?Kw(n,e.value):pa(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[s,r],i)=>(t[pf(s,i)+" =>"]=r,t),{})}:za(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>pf(t))}:_r(e)?pf(e):Pt(e)&&!Oe(e)&&!Qw(e)?String(e):e,pf=(n,e="")=>{var t;return _r(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let gs;class GT{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=gs,!e&&gs&&(this.index=(gs.scopes||(gs.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=gs;try{return gs=this,e()}finally{gs=t}}}on(){++this._on===1&&(this.prevScope=gs,gs=this)}off(){this._on>0&&--this._on===0&&(gs=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,s;for(t=0,s=this.effects.length;t<s;t++)this.effects[t].stop();for(this.effects.length=0,t=0,s=this.cleanups.length;t<s;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function QT(){return gs}let Nt;const gf=new WeakSet;class qw{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,gs&&gs.active&&gs.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,gf.has(this)&&(gf.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Yw(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ky(this),Xw(this);const e=Nt,t=Ys;Nt=this,Ys=!0;try{return this.fn()}finally{Zw(this),Nt=e,Ys=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Sg(e);this.deps=this.depsTail=void 0,ky(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?gf.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){hp(this)&&this.run()}get dirty(){return hp(this)}}let Jw=0,Rl,xl;function Yw(n,e=!1){if(n.flags|=8,e){n.next=xl,xl=n;return}n.next=Rl,Rl=n}function Cg(){Jw++}function Tg(){if(--Jw>0)return;if(xl){let e=xl;for(xl=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;Rl;){let e=Rl;for(Rl=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){n||(n=s)}e=t}}if(n)throw n}function Xw(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Zw(n){let e,t=n.depsTail,s=t;for(;s;){const r=s.prevDep;s.version===-1?(s===t&&(t=r),Sg(s),jT(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}n.deps=e,n.depsTail=t}function hp(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(e_(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function e_(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===zl)||(n.globalVersion=zl,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!hp(n))))return;n.flags|=2;const e=n.dep,t=Nt,s=Ys;Nt=n,Ys=!0;try{Xw(n);const r=n.fn(n._value);(e.version===0||ki(r,n._value))&&(n.flags|=128,n._value=r,e.version++)}catch(r){throw e.version++,r}finally{Nt=t,Ys=s,Zw(n),n.flags&=-3}}function Sg(n,e=!1){const{dep:t,prevSub:s,nextSub:r}=n;if(s&&(s.nextSub=r,n.prevSub=void 0),r&&(r.prevSub=s,n.nextSub=void 0),t.subs===n&&(t.subs=s,!s&&t.computed)){t.computed.flags&=-5;for(let i=t.computed.deps;i;i=i.nextDep)Sg(i,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function jT(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let Ys=!0;const t_=[];function Kr(){t_.push(Ys),Ys=!1}function qr(){const n=t_.pop();Ys=n===void 0?!0:n}function ky(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=Nt;Nt=void 0;try{e()}finally{Nt=t}}}let zl=0;class zT{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Pg{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Nt||!Ys||Nt===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Nt)t=this.activeLink=new zT(Nt,this),Nt.deps?(t.prevDep=Nt.depsTail,Nt.depsTail.nextDep=t,Nt.depsTail=t):Nt.deps=Nt.depsTail=t,n_(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const s=t.nextDep;s.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=s),t.prevDep=Nt.depsTail,t.nextDep=void 0,Nt.depsTail.nextDep=t,Nt.depsTail=t,Nt.deps===t&&(Nt.deps=s)}return t}trigger(e){this.version++,zl++,this.notify(e)}notify(e){Cg();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Tg()}}}function n_(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)n_(s)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const dp=new WeakMap,Io=Symbol(""),fp=Symbol(""),Wl=Symbol("");function zn(n,e,t){if(Ys&&Nt){let s=dp.get(n);s||dp.set(n,s=new Map);let r=s.get(t);r||(s.set(t,r=new Pg),r.map=s,r.key=t),r.track()}}function Dr(n,e,t,s,r,i){const o=dp.get(n);if(!o){zl++;return}const a=l=>{l&&l.trigger()};if(Cg(),e==="clear")o.forEach(a);else{const l=Oe(n),c=l&&bg(t);if(l&&t==="length"){const h=Number(s);o.forEach((f,p)=>{(p==="length"||p===Wl||!_r(p)&&p>=h)&&a(f)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),c&&a(o.get(Wl)),e){case"add":l?c&&a(o.get("length")):(a(o.get(Io)),pa(n)&&a(o.get(fp)));break;case"delete":l||(a(o.get(Io)),pa(n)&&a(o.get(fp)));break;case"set":pa(n)&&a(o.get(Io));break}}Tg()}function Xo(n){const e=vt(n);return e===n?e:(zn(e,"iterate",Wl),Fs(n)?e:e.map(Bn))}function Nh(n){return zn(n=vt(n),"iterate",Wl),n}const WT={__proto__:null,[Symbol.iterator](){return mf(this,Symbol.iterator,Bn)},concat(...n){return Xo(this).concat(...n.map(e=>Oe(e)?Xo(e):e))},entries(){return mf(this,"entries",n=>(n[1]=Bn(n[1]),n))},every(n,e){return Tr(this,"every",n,e,void 0,arguments)},filter(n,e){return Tr(this,"filter",n,e,t=>t.map(Bn),arguments)},find(n,e){return Tr(this,"find",n,e,Bn,arguments)},findIndex(n,e){return Tr(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return Tr(this,"findLast",n,e,Bn,arguments)},findLastIndex(n,e){return Tr(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return Tr(this,"forEach",n,e,void 0,arguments)},includes(...n){return yf(this,"includes",n)},indexOf(...n){return yf(this,"indexOf",n)},join(n){return Xo(this).join(n)},lastIndexOf(...n){return yf(this,"lastIndexOf",n)},map(n,e){return Tr(this,"map",n,e,void 0,arguments)},pop(){return pl(this,"pop")},push(...n){return pl(this,"push",n)},reduce(n,...e){return Ny(this,"reduce",n,e)},reduceRight(n,...e){return Ny(this,"reduceRight",n,e)},shift(){return pl(this,"shift")},some(n,e){return Tr(this,"some",n,e,void 0,arguments)},splice(...n){return pl(this,"splice",n)},toReversed(){return Xo(this).toReversed()},toSorted(n){return Xo(this).toSorted(n)},toSpliced(...n){return Xo(this).toSpliced(...n)},unshift(...n){return pl(this,"unshift",n)},values(){return mf(this,"values",Bn)}};function mf(n,e,t){const s=Nh(n),r=s[e]();return s!==n&&!Fs(n)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=t(i.value)),i}),r}const KT=Array.prototype;function Tr(n,e,t,s,r,i){const o=Nh(n),a=o!==n&&!Fs(n),l=o[e];if(l!==KT[e]){const f=l.apply(n,i);return a?Bn(f):f}let c=t;o!==n&&(a?c=function(f,p){return t.call(this,Bn(f),p,n)}:t.length>2&&(c=function(f,p){return t.call(this,f,p,n)}));const h=l.call(o,c,s);return a&&r?r(h):h}function Ny(n,e,t,s){const r=Nh(n);let i=t;return r!==n&&(Fs(n)?t.length>3&&(i=function(o,a,l){return t.call(this,o,a,l,n)}):i=function(o,a,l){return t.call(this,o,Bn(a),l,n)}),r[e](i,...s)}function yf(n,e,t){const s=vt(n);zn(s,"iterate",Wl);const r=s[e](...t);return(r===-1||r===!1)&&kg(t[0])?(t[0]=vt(t[0]),s[e](...t)):r}function pl(n,e,t=[]){Kr(),Cg();const s=vt(n)[e].apply(n,t);return Tg(),qr(),s}const qT=wg("__proto__,__v_isRef,__isVue"),s_=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(_r));function JT(n){_r(n)||(n=String(n));const e=vt(this);return zn(e,"has",n),e.hasOwnProperty(n)}class r_{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,s){if(t==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!r;if(t==="__v_isReadonly")return r;if(t==="__v_isShallow")return i;if(t==="__v_raw")return s===(r?i?oS:l_:i?a_:o_).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=Oe(e);if(!r){let l;if(o&&(l=WT[t]))return l;if(t==="hasOwnProperty")return JT}const a=Reflect.get(e,t,qn(e)?e:s);if((_r(t)?s_.has(t):qT(t))||(r||zn(e,"get",t),i))return a;if(qn(a)){const l=o&&bg(t)?a:a.value;return r&&Pt(l)?gp(l):l}return Pt(a)?r?gp(a):Ic(a):a}}class i_ extends r_{constructor(e=!1){super(!1,e)}set(e,t,s,r){let i=e[t];if(!this._isShallow){const l=Mi(i);if(!Fs(s)&&!Mi(s)&&(i=vt(i),s=vt(s)),!Oe(e)&&qn(i)&&!qn(s))return l||(i.value=s),!0}const o=Oe(e)&&bg(t)?Number(t)<e.length:wt(e,t),a=Reflect.set(e,t,s,qn(e)?e:r);return e===vt(r)&&(o?ki(s,i)&&Dr(e,"set",t,s):Dr(e,"add",t,s)),a}deleteProperty(e,t){const s=wt(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&s&&Dr(e,"delete",t,void 0),r}has(e,t){const s=Reflect.has(e,t);return(!_r(t)||!s_.has(t))&&zn(e,"has",t),s}ownKeys(e){return zn(e,"iterate",Oe(e)?"length":Io),Reflect.ownKeys(e)}}class YT extends r_{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const XT=new i_,ZT=new YT,eS=new i_(!0);const pp=n=>n,Xc=n=>Reflect.getPrototypeOf(n);function tS(n,e,t){return function(...s){const r=this.__v_raw,i=vt(r),o=pa(i),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=r[n](...s),h=t?pp:e?Uu:Bn;return!e&&zn(i,"iterate",l?fp:Io),{next(){const{value:f,done:p}=c.next();return p?{value:f,done:p}:{value:a?[h(f[0]),h(f[1])]:h(f),done:p}},[Symbol.iterator](){return this}}}}function Zc(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function nS(n,e){const t={get(r){const i=this.__v_raw,o=vt(i),a=vt(r);n||(ki(r,a)&&zn(o,"get",r),zn(o,"get",a));const{has:l}=Xc(o),c=e?pp:n?Uu:Bn;if(l.call(o,r))return c(i.get(r));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!n&&zn(vt(r),"iterate",Io),r.size},has(r){const i=this.__v_raw,o=vt(i),a=vt(r);return n||(ki(r,a)&&zn(o,"has",r),zn(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,l=vt(a),c=e?pp:n?Uu:Bn;return!n&&zn(l,"iterate",Io),a.forEach((h,f)=>r.call(i,c(h),c(f),o))}};return Dn(t,n?{add:Zc("add"),set:Zc("set"),delete:Zc("delete"),clear:Zc("clear")}:{add(r){!e&&!Fs(r)&&!Mi(r)&&(r=vt(r));const i=vt(this);return Xc(i).has.call(i,r)||(i.add(r),Dr(i,"add",r,r)),this},set(r,i){!e&&!Fs(i)&&!Mi(i)&&(i=vt(i));const o=vt(this),{has:a,get:l}=Xc(o);let c=a.call(o,r);c||(r=vt(r),c=a.call(o,r));const h=l.call(o,r);return o.set(r,i),c?ki(i,h)&&Dr(o,"set",r,i):Dr(o,"add",r,i),this},delete(r){const i=vt(this),{has:o,get:a}=Xc(i);let l=o.call(i,r);l||(r=vt(r),l=o.call(i,r)),a&&a.call(i,r);const c=i.delete(r);return l&&Dr(i,"delete",r,void 0),c},clear(){const r=vt(this),i=r.size!==0,o=r.clear();return i&&Dr(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=tS(r,n,e)}),t}function Rg(n,e){const t=nS(n,e);return(s,r,i)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?s:Reflect.get(wt(t,r)&&r in s?t:s,r,i)}const sS={get:Rg(!1,!1)},rS={get:Rg(!1,!0)},iS={get:Rg(!0,!1)};const o_=new WeakMap,a_=new WeakMap,l_=new WeakMap,oS=new WeakMap;function aS(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function lS(n){return n.__v_skip||!Object.isExtensible(n)?0:aS(NT(n))}function Ic(n){return Mi(n)?n:xg(n,!1,XT,sS,o_)}function c_(n){return xg(n,!1,eS,rS,a_)}function gp(n){return xg(n,!0,ZT,iS,l_)}function xg(n,e,t,s,r){if(!Pt(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const i=lS(n);if(i===0)return n;const o=r.get(n);if(o)return o;const a=new Proxy(n,i===2?s:t);return r.set(n,a),a}function ga(n){return Mi(n)?ga(n.__v_raw):!!(n&&n.__v_isReactive)}function Mi(n){return!!(n&&n.__v_isReadonly)}function Fs(n){return!!(n&&n.__v_isShallow)}function kg(n){return n?!!n.__v_raw:!1}function vt(n){const e=n&&n.__v_raw;return e?vt(e):n}function cS(n){return!wt(n,"__v_skip")&&Object.isExtensible(n)&&jw(n,"__v_skip",!0),n}const Bn=n=>Pt(n)?Ic(n):n,Uu=n=>Pt(n)?gp(n):n;function qn(n){return n?n.__v_isRef===!0:!1}function $(n){return u_(n,!1)}function uS(n){return u_(n,!0)}function u_(n,e){return qn(n)?n:new hS(n,e)}class hS{constructor(e,t){this.dep=new Pg,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:vt(e),this._value=t?e:Bn(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,s=this.__v_isShallow||Fs(e)||Mi(e);e=s?e:vt(e),ki(e,t)&&(this._rawValue=e,this._value=s?e:Bn(e),this.dep.trigger())}}function Le(n){return qn(n)?n.value:n}const dS={get:(n,e,t)=>e==="__v_raw"?n:Le(Reflect.get(n,e,t)),set:(n,e,t,s)=>{const r=n[e];return qn(r)&&!qn(t)?(r.value=t,!0):Reflect.set(n,e,t,s)}};function h_(n){return ga(n)?n:new Proxy(n,dS)}class fS{constructor(e,t,s){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Pg(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=zl-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Nt!==this)return Yw(this,!0),!0}get value(){const e=this.dep.track();return e_(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function pS(n,e,t=!1){let s,r;return Ke(n)?s=n:(s=n.get,r=n.set),new fS(s,r,t)}const eu={},Vu=new WeakMap;let lo;function gS(n,e=!1,t=lo){if(t){let s=Vu.get(t);s||Vu.set(t,s=[]),s.push(n)}}function mS(n,e,t=xt){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=t,c=L=>r?L:Fs(L)||r===!1||r===0?Or(L,1):Or(L);let h,f,p,m,E=!1,v=!1;if(qn(n)?(f=()=>n.value,E=Fs(n)):ga(n)?(f=()=>c(n),E=!0):Oe(n)?(v=!0,E=n.some(L=>ga(L)||Fs(L)),f=()=>n.map(L=>{if(qn(L))return L.value;if(ga(L))return c(L);if(Ke(L))return l?l(L,2):L()})):Ke(n)?e?f=l?()=>l(n,2):n:f=()=>{if(p){Kr();try{p()}finally{qr()}}const L=lo;lo=h;try{return l?l(n,3,[m]):n(m)}finally{lo=L}}:f=pr,e&&r){const L=f,Q=r===!0?1/0:r;f=()=>Or(L(),Q)}const A=QT(),w=()=>{h.stop(),A&&A.active&&Eg(A.effects,h)};if(i&&e){const L=e;e=(...Q)=>{L(...Q),w()}}let P=v?new Array(n.length).fill(eu):eu;const T=L=>{if(!(!(h.flags&1)||!h.dirty&&!L))if(e){const Q=h.run();if(r||E||(v?Q.some((q,x)=>ki(q,P[x])):ki(Q,P))){p&&p();const q=lo;lo=h;try{const x=[Q,P===eu?void 0:v&&P[0]===eu?[]:P,m];P=Q,l?l(e,3,x):e(...x)}finally{lo=q}}}else h.run()};return a&&a(T),h=new qw(f),h.scheduler=o?()=>o(T,!1):T,m=L=>gS(L,!1,h),p=h.onStop=()=>{const L=Vu.get(h);if(L){if(l)l(L,4);else for(const Q of L)Q();Vu.delete(h)}},e?s?T(!0):P=h.run():o?o(T.bind(null,!0),!0):h.run(),w.pause=h.pause.bind(h),w.resume=h.resume.bind(h),w.stop=w,w}function Or(n,e=1/0,t){if(e<=0||!Pt(n)||n.__v_skip||(t=t||new Map,(t.get(n)||0)>=e))return n;if(t.set(n,e),e--,qn(n))Or(n.value,e,t);else if(Oe(n))for(let s=0;s<n.length;s++)Or(n[s],e,t);else if(za(n)||pa(n))n.forEach(s=>{Or(s,e,t)});else if(Qw(n)){for(const s in n)Or(n[s],e,t);for(const s of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,s)&&Or(n[s],e,t)}return n}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Cc(n,e,t,s){try{return s?n(...s):n()}catch(r){Dh(r,e,t)}}function Zs(n,e,t,s){if(Ke(n)){const r=Cc(n,e,t,s);return r&&Hw(r)&&r.catch(i=>{Dh(i,e,t)}),r}if(Oe(n)){const r=[];for(let i=0;i<n.length;i++)r.push(Zs(n[i],e,t,s));return r}}function Dh(n,e,t,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||xt;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const h=a.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](n,l,c)===!1)return}a=a.parent}if(i){Kr(),Cc(i,null,10,[n,l,c]),qr();return}}yS(n,t,r,s,o)}function yS(n,e,t,s=!0,r=!1){if(r)throw n;console.error(n)}const rs=[];let lr=-1;const ma=[];let _i=null,na=0;const d_=Promise.resolve();let $u=null;function Ng(n){const e=$u||d_;return n?e.then(this?n.bind(this):n):e}function vS(n){let e=lr+1,t=rs.length;for(;e<t;){const s=e+t>>>1,r=rs[s],i=Kl(r);i<n||i===n&&r.flags&2?e=s+1:t=s}return e}function Dg(n){if(!(n.flags&1)){const e=Kl(n),t=rs[rs.length-1];!t||!(n.flags&2)&&e>=Kl(t)?rs.push(n):rs.splice(vS(e),0,n),n.flags|=1,f_()}}function f_(){$u||($u=d_.then(g_))}function AS(n){Oe(n)?ma.push(...n):_i&&n.id===-1?_i.splice(na+1,0,n):n.flags&1||(ma.push(n),n.flags|=1),f_()}function Dy(n,e,t=lr+1){for(;t<rs.length;t++){const s=rs[t];if(s&&s.flags&2){if(n&&s.id!==n.uid)continue;rs.splice(t,1),t--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function p_(n){if(ma.length){const e=[...new Set(ma)].sort((t,s)=>Kl(t)-Kl(s));if(ma.length=0,_i){_i.push(...e);return}for(_i=e,na=0;na<_i.length;na++){const t=_i[na];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}_i=null,na=0}}const Kl=n=>n.id==null?n.flags&2?-1:1/0:n.id;function g_(n){try{for(lr=0;lr<rs.length;lr++){const e=rs[lr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Cc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;lr<rs.length;lr++){const e=rs[lr];e&&(e.flags&=-2)}lr=-1,rs.length=0,p_(),$u=null,(rs.length||ma.length)&&g_()}}let Ps=null,m_=null;function Hu(n){const e=Ps;return Ps=n,m_=n&&n.type.__scopeId||null,e}function y_(n,e=Ps,t){if(!e||n._n)return n;const s=(...r)=>{s._d&&ju(-1);const i=Hu(e);let o;try{o=n(...r)}finally{Hu(i),s._d&&ju(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function tn(n,e){if(Ps===null)return n;const t=Fh(Ps),s=n.dirs||(n.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=xt]=e[r];i&&(Ke(i)&&(i={mounted:i,updated:i}),i.deep&&Or(o),s.push({dir:i,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function no(n,e,t,s){const r=n.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(Kr(),Zs(l,t,8,[n.el,a,n,e]),qr())}}const wS=Symbol("_vte"),v_=n=>n.__isTeleport,kr=Symbol("_leaveCb"),tu=Symbol("_enterCb");function _S(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Lt(()=>{n.isMounted=!0}),S_(()=>{n.isUnmounting=!0}),n}const Ds=[Function,Array],A_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ds,onEnter:Ds,onAfterEnter:Ds,onEnterCancelled:Ds,onBeforeLeave:Ds,onLeave:Ds,onAfterLeave:Ds,onLeaveCancelled:Ds,onBeforeAppear:Ds,onAppear:Ds,onAfterAppear:Ds,onAppearCancelled:Ds},w_=n=>{const e=n.subTree;return e.component?w_(e.component):e},ES={name:"BaseTransition",props:A_,setup(n,{slots:e}){const t=q_(),s=_S();return()=>{const r=e.default&&b_(e.default(),!0);if(!r||!r.length)return;const i=__(r),o=vt(n),{mode:a}=o;if(s.isLeaving)return vf(i);const l=Oy(i);if(!l)return vf(i);let c=mp(l,o,s,t,f=>c=f);l.type!==is&&ql(l,c);let h=t.subTree&&Oy(t.subTree);if(h&&h.type!==is&&!ho(h,l)&&w_(t).type!==is){let f=mp(h,o,s,t);if(ql(h,f),a==="out-in"&&l.type!==is)return s.isLeaving=!0,f.afterLeave=()=>{s.isLeaving=!1,t.job.flags&8||t.update(),delete f.afterLeave,h=void 0},vf(i);a==="in-out"&&l.type!==is?f.delayLeave=(p,m,E)=>{const v=E_(s,h);v[String(h.key)]=h,p[kr]=()=>{m(),p[kr]=void 0,delete c.delayedLeave,h=void 0},c.delayedLeave=()=>{E(),delete c.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function __(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==is){e=t;break}}return e}const bS=ES;function E_(n,e){const{leavingVNodes:t}=n;let s=t.get(e.type);return s||(s=Object.create(null),t.set(e.type,s)),s}function mp(n,e,t,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:p,onLeave:m,onAfterLeave:E,onLeaveCancelled:v,onBeforeAppear:A,onAppear:w,onAfterAppear:P,onAppearCancelled:T}=e,L=String(n.key),Q=E_(t,n),q=(C,S)=>{C&&Zs(C,s,9,S)},x=(C,S)=>{const b=S[1];q(C,S),Oe(C)?C.every(N=>N.length<=1)&&b():C.length<=1&&b()},I={mode:o,persisted:a,beforeEnter(C){let S=l;if(!t.isMounted)if(i)S=A||l;else return;C[kr]&&C[kr](!0);const b=Q[L];b&&ho(n,b)&&b.el[kr]&&b.el[kr](),q(S,[C])},enter(C){let S=c,b=h,N=f;if(!t.isMounted)if(i)S=w||c,b=P||h,N=T||f;else return;let k=!1;const Ee=C[tu]=ne=>{k||(k=!0,ne?q(N,[C]):q(b,[C]),I.delayedLeave&&I.delayedLeave(),C[tu]=void 0)};S?x(S,[C,Ee]):Ee()},leave(C,S){const b=String(n.key);if(C[tu]&&C[tu](!0),t.isUnmounting)return S();q(p,[C]);let N=!1;const k=C[kr]=Ee=>{N||(N=!0,S(),Ee?q(v,[C]):q(E,[C]),C[kr]=void 0,Q[b]===n&&delete Q[b])};Q[b]=n,m?x(m,[C,k]):k()},clone(C){const S=mp(C,e,t,s,r);return r&&r(S),S}};return I}function vf(n){if(Oh(n))return n=Fi(n),n.children=null,n}function Oy(n){if(!Oh(n))return v_(n.type)&&n.children?__(n.children):n;if(n.component)return n.component.subTree;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&Ke(t.default))return t.default()}}function ql(n,e){n.shapeFlag&6&&n.component?(n.transition=e,ql(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function b_(n,e=!1,t){let s=[],r=0;for(let i=0;i<n.length;i++){let o=n[i];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:i);o.type===ke?(o.patchFlag&128&&r++,s=s.concat(b_(o.children,e,a))):(e||o.type!==is)&&s.push(a!=null?Fi(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function I_(n,e){return Ke(n)?Dn({name:n.name},e,{setup:n}):n}function C_(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}const Gu=new WeakMap;function kl(n,e,t,s,r=!1){if(Oe(n)){n.forEach((E,v)=>kl(E,e&&(Oe(e)?e[v]:e),t,s,r));return}if(Nl(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&kl(n,e,t,s.component.subTree);return}const i=s.shapeFlag&4?Fh(s.component):s.el,o=r?null:i,{i:a,r:l}=n,c=e&&e.r,h=a.refs===xt?a.refs={}:a.refs,f=a.setupState,p=vt(f),m=f===xt?$w:E=>wt(p,E);if(c!=null&&c!==l){if(Ly(e),ln(c))h[c]=null,m(c)&&(f[c]=null);else if(qn(c)){c.value=null;const E=e;E.k&&(h[E.k]=null)}}if(Ke(l))Cc(l,a,12,[o,h]);else{const E=ln(l),v=qn(l);if(E||v){const A=()=>{if(n.f){const w=E?m(l)?f[l]:h[l]:l.value;if(r)Oe(w)&&Eg(w,i);else if(Oe(w))w.includes(i)||w.push(i);else if(E)h[l]=[i],m(l)&&(f[l]=h[l]);else{const P=[i];l.value=P,n.k&&(h[n.k]=P)}}else E?(h[l]=o,m(l)&&(f[l]=o)):v&&(l.value=o,n.k&&(h[n.k]=o))};if(o){const w=()=>{A(),Gu.delete(n)};w.id=-1,Gu.set(n,w),Cs(w,t)}else Ly(n),A()}}}function Ly(n){const e=Gu.get(n);e&&(e.flags|=8,Gu.delete(n))}kh().requestIdleCallback;kh().cancelIdleCallback;const Nl=n=>!!n.type.__asyncLoader,Oh=n=>n.type.__isKeepAlive;function IS(n,e){T_(n,"a",e)}function CS(n,e){T_(n,"da",e)}function T_(n,e,t=Kn){const s=n.__wdc||(n.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(Lh(e,s,t),t){let r=t.parent;for(;r&&r.parent;)Oh(r.parent.vnode)&&TS(s,e,t,r),r=r.parent}}function TS(n,e,t,s){const r=Lh(e,n,s,!0);cn(()=>{Eg(s[e],r)},t)}function Lh(n,e,t=Kn,s=!1){if(t){const r=t[n]||(t[n]=[]),i=e.__weh||(e.__weh=(...o)=>{Kr();const a=Tc(t),l=Zs(e,t,n,o);return a(),qr(),l});return s?r.unshift(i):r.push(i),i}}const ri=n=>(e,t=Kn)=>{(!Xl||n==="sp")&&Lh(n,(...s)=>e(...s),t)},SS=ri("bm"),Lt=ri("m"),PS=ri("bu"),RS=ri("u"),S_=ri("bum"),cn=ri("um"),xS=ri("sp"),kS=ri("rtg"),NS=ri("rtc");function DS(n,e=Kn){Lh("ec",n,e)}const OS="components";function LS(n,e){return MS(OS,n,!0,e)||n}const BS=Symbol.for("v-ndc");function MS(n,e,t=!0,s=!1){const r=Ps||Kn;if(r){const i=r.type;{const a=IP(i,!1);if(a&&(a===e||a===$s(e)||a===xh($s(e))))return i}const o=By(r[n]||i[n],e)||By(r.appContext[n],e);return!o&&s?i:o}}function By(n,e){return n&&(n[e]||n[$s(e)]||n[xh($s(e))])}function Xe(n,e,t,s){let r;const i=t,o=Oe(n);if(o||ln(n)){const a=o&&ga(n);let l=!1,c=!1;a&&(l=!Fs(n),c=Mi(n),n=Nh(n)),r=new Array(n.length);for(let h=0,f=n.length;h<f;h++)r[h]=e(l?c?Uu(Bn(n[h])):Bn(n[h]):n[h],h,void 0,i)}else if(typeof n=="number"){r=new Array(n);for(let a=0;a<n;a++)r[a]=e(a+1,a,void 0,i)}else if(Pt(n))if(n[Symbol.iterator])r=Array.from(n,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(n);r=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const h=a[l];r[l]=e(n[h],h,l,i)}}else r=[];return r}const yp=n=>n?J_(n)?Fh(n):yp(n.parent):null,Dl=Dn(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>yp(n.parent),$root:n=>yp(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>R_(n),$forceUpdate:n=>n.f||(n.f=()=>{Dg(n.update)}),$nextTick:n=>n.n||(n.n=Ng.bind(n.proxy)),$watch:n=>rP.bind(n)}),Af=(n,e)=>n!==xt&&!n.__isScriptSetup&&wt(n,e),FS={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:l}=n;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return t[e];case 3:return i[e]}else{if(Af(s,e))return o[e]=1,s[e];if(r!==xt&&wt(r,e))return o[e]=2,r[e];if((c=n.propsOptions[0])&&wt(c,e))return o[e]=3,i[e];if(t!==xt&&wt(t,e))return o[e]=4,t[e];vp&&(o[e]=0)}}const h=Dl[e];let f,p;if(h)return e==="$attrs"&&zn(n.attrs,"get",""),h(n);if((f=a.__cssModules)&&(f=f[e]))return f;if(t!==xt&&wt(t,e))return o[e]=4,t[e];if(p=l.config.globalProperties,wt(p,e))return p[e]},set({_:n},e,t){const{data:s,setupState:r,ctx:i}=n;return Af(r,e)?(r[e]=t,!0):s!==xt&&wt(s,e)?(s[e]=t,!0):wt(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(i[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:s,appContext:r,propsOptions:i,type:o}},a){let l,c;return!!(t[a]||n!==xt&&a[0]!=="$"&&wt(n,a)||Af(e,a)||(l=i[0])&&wt(l,a)||wt(s,a)||wt(Dl,a)||wt(r.config.globalProperties,a)||(c=o.__cssModules)&&c[a])},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:wt(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function My(n){return Oe(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let vp=!0;function US(n){const e=R_(n),t=n.proxy,s=n.ctx;vp=!1,e.beforeCreate&&Fy(e.beforeCreate,n,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:c,created:h,beforeMount:f,mounted:p,beforeUpdate:m,updated:E,activated:v,deactivated:A,beforeDestroy:w,beforeUnmount:P,destroyed:T,unmounted:L,render:Q,renderTracked:q,renderTriggered:x,errorCaptured:I,serverPrefetch:C,expose:S,inheritAttrs:b,components:N,directives:k,filters:Ee}=e;if(c&&VS(c,s,null),o)for(const O in o){const K=o[O];Ke(K)&&(s[O]=K.bind(t))}if(r){const O=r.call(t,t);Pt(O)&&(n.data=Ic(O))}if(vp=!0,i)for(const O in i){const K=i[O],de=Ke(K)?K.bind(t,t):Ke(K.get)?K.get.bind(t,t):pr,Ue=!Ke(K)&&Ke(K.set)?K.set.bind(t):pr,Te=he({get:de,set:Ue});Object.defineProperty(s,O,{enumerable:!0,configurable:!0,get:()=>Te.value,set:Ve=>Te.value=Ve})}if(a)for(const O in a)P_(a[O],s,t,O);if(l){const O=Ke(l)?l.call(t):l;Reflect.ownKeys(O).forEach(K=>{wu(K,O[K])})}h&&Fy(h,n,"c");function V(O,K){Oe(K)?K.forEach(de=>O(de.bind(t))):K&&O(K.bind(t))}if(V(SS,f),V(Lt,p),V(PS,m),V(RS,E),V(IS,v),V(CS,A),V(DS,I),V(NS,q),V(kS,x),V(S_,P),V(cn,L),V(xS,C),Oe(S))if(S.length){const O=n.exposed||(n.exposed={});S.forEach(K=>{Object.defineProperty(O,K,{get:()=>t[K],set:de=>t[K]=de,enumerable:!0})})}else n.exposed||(n.exposed={});Q&&n.render===pr&&(n.render=Q),b!=null&&(n.inheritAttrs=b),N&&(n.components=N),k&&(n.directives=k),C&&C_(n)}function VS(n,e,t=pr){Oe(n)&&(n=Ap(n));for(const s in n){const r=n[s];let i;Pt(r)?"default"in r?i=Xs(r.from||s,r.default,!0):i=Xs(r.from||s):i=Xs(r),qn(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function Fy(n,e,t){Zs(Oe(n)?n.map(s=>s.bind(e.proxy)):n.bind(e.proxy),e,t)}function P_(n,e,t,s){let r=s.includes(".")?H_(t,s):()=>t[s];if(ln(n)){const i=e[n];Ke(i)&&Qr(r,i)}else if(Ke(n))Qr(r,n.bind(t));else if(Pt(n))if(Oe(n))n.forEach(i=>P_(i,e,t,s));else{const i=Ke(n.handler)?n.handler.bind(t):e[n.handler];Ke(i)&&Qr(r,i,n)}}function R_(n){const e=n.type,{mixins:t,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=n.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!t&&!s?l=e:(l={},r.length&&r.forEach(c=>Qu(l,c,o,!0)),Qu(l,e,o)),Pt(e)&&i.set(e,l),l}function Qu(n,e,t,s=!1){const{mixins:r,extends:i}=e;i&&Qu(n,i,t,!0),r&&r.forEach(o=>Qu(n,o,t,!0));for(const o in e)if(!(s&&o==="expose")){const a=$S[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const $S={data:Uy,props:Vy,emits:Vy,methods:_l,computed:_l,beforeCreate:ts,created:ts,beforeMount:ts,mounted:ts,beforeUpdate:ts,updated:ts,beforeDestroy:ts,beforeUnmount:ts,destroyed:ts,unmounted:ts,activated:ts,deactivated:ts,errorCaptured:ts,serverPrefetch:ts,components:_l,directives:_l,watch:GS,provide:Uy,inject:HS};function Uy(n,e){return e?n?function(){return Dn(Ke(n)?n.call(this,this):n,Ke(e)?e.call(this,this):e)}:e:n}function HS(n,e){return _l(Ap(n),Ap(e))}function Ap(n){if(Oe(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function ts(n,e){return n?[...new Set([].concat(n,e))]:e}function _l(n,e){return n?Dn(Object.create(null),n,e):e}function Vy(n,e){return n?Oe(n)&&Oe(e)?[...new Set([...n,...e])]:Dn(Object.create(null),My(n),My(e??{})):e}function GS(n,e){if(!n)return e;if(!e)return n;const t=Dn(Object.create(null),n);for(const s in e)t[s]=ts(n[s],e[s]);return t}function x_(){return{app:null,config:{isNativeTag:$w,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let QS=0;function jS(n,e){return function(s,r=null){Ke(s)||(s=Dn({},s)),r!=null&&!Pt(r)&&(r=null);const i=x_(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:QS++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:TP,get config(){return i.config},set config(h){},use(h,...f){return o.has(h)||(h&&Ke(h.install)?(o.add(h),h.install(c,...f)):Ke(h)&&(o.add(h),h(c,...f))),c},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),c},component(h,f){return f?(i.components[h]=f,c):i.components[h]},directive(h,f){return f?(i.directives[h]=f,c):i.directives[h]},mount(h,f,p){if(!l){const m=c._ceVNode||Ge(s,r);return m.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),n(m,h,p),l=!0,c._container=h,h.__vue_app__=c,Fh(m.component)}},onUnmount(h){a.push(h)},unmount(){l&&(Zs(a,c._instance,16),n(null,c._container),delete c._container.__vue_app__)},provide(h,f){return i.provides[h]=f,c},runWithContext(h){const f=ya;ya=c;try{return h()}finally{ya=f}}};return c}}let ya=null;function wu(n,e){if(Kn){let t=Kn.provides;const s=Kn.parent&&Kn.parent.provides;s===t&&(t=Kn.provides=Object.create(s)),t[n]=e}}function Xs(n,e,t=!1){const s=q_();if(s||ya){let r=ya?ya._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&n in r)return r[n];if(arguments.length>1)return t&&Ke(e)?e.call(s&&s.proxy):e}}const k_={},N_=()=>Object.create(k_),D_=n=>Object.getPrototypeOf(n)===k_;function zS(n,e,t,s=!1){const r={},i=N_();n.propsDefaults=Object.create(null),O_(n,e,r,i);for(const o in n.propsOptions[0])o in r||(r[o]=void 0);t?n.props=s?r:c_(r):n.type.props?n.props=r:n.props=i,n.attrs=i}function WS(n,e,t,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=n,a=vt(r),[l]=n.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=n.vnode.dynamicProps;for(let f=0;f<h.length;f++){let p=h[f];if(Bh(n.emitsOptions,p))continue;const m=e[p];if(l)if(wt(i,p))m!==i[p]&&(i[p]=m,c=!0);else{const E=$s(p);r[E]=wp(l,a,E,m,n,!1)}else m!==i[p]&&(i[p]=m,c=!0)}}}else{O_(n,e,r,i)&&(c=!0);let h;for(const f in a)(!e||!wt(e,f)&&((h=qi(f))===f||!wt(e,h)))&&(l?t&&(t[f]!==void 0||t[h]!==void 0)&&(r[f]=wp(l,a,f,void 0,n,!0)):delete r[f]);if(i!==a)for(const f in i)(!e||!wt(e,f))&&(delete i[f],c=!0)}c&&Dr(n.attrs,"set","")}function O_(n,e,t,s){const[r,i]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(Pl(l))continue;const c=e[l];let h;r&&wt(r,h=$s(l))?!i||!i.includes(h)?t[h]=c:(a||(a={}))[h]=c:Bh(n.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(i){const l=vt(t),c=a||xt;for(let h=0;h<i.length;h++){const f=i[h];t[f]=wp(r,l,f,c[f],n,!wt(c,f))}}return o}function wp(n,e,t,s,r,i){const o=n[t];if(o!=null){const a=wt(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ke(l)){const{propsDefaults:c}=r;if(t in c)s=c[t];else{const h=Tc(r);s=c[t]=l.call(null,e),h()}}else s=l;r.ce&&r.ce._setProp(t,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===qi(t))&&(s=!0))}return s}const KS=new WeakMap;function L_(n,e,t=!1){const s=t?KS:e.propsCache,r=s.get(n);if(r)return r;const i=n.props,o={},a=[];let l=!1;if(!Ke(n)){const h=f=>{l=!0;const[p,m]=L_(f,e,!0);Dn(o,p),m&&a.push(...m)};!t&&e.mixins.length&&e.mixins.forEach(h),n.extends&&h(n.extends),n.mixins&&n.mixins.forEach(h)}if(!i&&!l)return Pt(n)&&s.set(n,fa),fa;if(Oe(i))for(let h=0;h<i.length;h++){const f=$s(i[h]);$y(f)&&(o[f]=xt)}else if(i)for(const h in i){const f=$s(h);if($y(f)){const p=i[h],m=o[f]=Oe(p)||Ke(p)?{type:p}:Dn({},p),E=m.type;let v=!1,A=!0;if(Oe(E))for(let w=0;w<E.length;++w){const P=E[w],T=Ke(P)&&P.name;if(T==="Boolean"){v=!0;break}else T==="String"&&(A=!1)}else v=Ke(E)&&E.name==="Boolean";m[0]=v,m[1]=A,(v||wt(m,"default"))&&a.push(f)}}const c=[o,a];return Pt(n)&&s.set(n,c),c}function $y(n){return n[0]!=="$"&&!Pl(n)}const Og=n=>n==="_"||n==="_ctx"||n==="$stable",Lg=n=>Oe(n)?n.map(ur):[ur(n)],qS=(n,e,t)=>{if(e._n)return e;const s=y_((...r)=>Lg(e(...r)),t);return s._c=!1,s},B_=(n,e,t)=>{const s=n._ctx;for(const r in n){if(Og(r))continue;const i=n[r];if(Ke(i))e[r]=qS(r,i,s);else if(i!=null){const o=Lg(i);e[r]=()=>o}}},M_=(n,e)=>{const t=Lg(e);n.slots.default=()=>t},F_=(n,e,t)=>{for(const s in e)(t||!Og(s))&&(n[s]=e[s])},JS=(n,e,t)=>{const s=n.slots=N_();if(n.vnode.shapeFlag&32){const r=e._;r?(F_(s,e,t),t&&jw(s,"_",r,!0)):B_(e,s)}else e&&M_(n,e)},YS=(n,e,t)=>{const{vnode:s,slots:r}=n;let i=!0,o=xt;if(s.shapeFlag&32){const a=e._;a?t&&a===1?i=!1:F_(r,e,t):(i=!e.$stable,B_(e,r)),o=e}else e&&(M_(n,e),o={default:1});if(i)for(const a in r)!Og(a)&&o[a]==null&&delete r[a]},Cs=dP;function XS(n){return ZS(n)}function ZS(n,e){const t=kh();t.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:h,parentNode:f,nextSibling:p,setScopeId:m=pr,insertStaticContent:E}=n,v=(D,B,G,te=null,z=null,U=null,j=void 0,ee=null,oe=!!B.dynamicChildren)=>{if(D===B)return;D&&!ho(D,B)&&(te=Z(D),Ve(D,z,U,!0),D=null),B.patchFlag===-2&&(oe=!1,B.dynamicChildren=null);const{type:ae,ref:Pe,shapeFlag:ge}=B;switch(ae){case Mh:A(D,B,G,te);break;case is:w(D,B,G,te);break;case _u:D==null&&P(B,G,te,j);break;case ke:N(D,B,G,te,z,U,j,ee,oe);break;default:ge&1?Q(D,B,G,te,z,U,j,ee,oe):ge&6?k(D,B,G,te,z,U,j,ee,oe):(ge&64||ge&128)&&ae.process(D,B,G,te,z,U,j,ee,oe,ve)}Pe!=null&&z?kl(Pe,D&&D.ref,U,B||D,!B):Pe==null&&D&&D.ref!=null&&kl(D.ref,null,U,D,!0)},A=(D,B,G,te)=>{if(D==null)s(B.el=a(B.children),G,te);else{const z=B.el=D.el;B.children!==D.children&&c(z,B.children)}},w=(D,B,G,te)=>{D==null?s(B.el=l(B.children||""),G,te):B.el=D.el},P=(D,B,G,te)=>{[D.el,D.anchor]=E(D.children,B,G,te,D.el,D.anchor)},T=({el:D,anchor:B},G,te)=>{let z;for(;D&&D!==B;)z=p(D),s(D,G,te),D=z;s(B,G,te)},L=({el:D,anchor:B})=>{let G;for(;D&&D!==B;)G=p(D),r(D),D=G;r(B)},Q=(D,B,G,te,z,U,j,ee,oe)=>{B.type==="svg"?j="svg":B.type==="math"&&(j="mathml"),D==null?q(B,G,te,z,U,j,ee,oe):C(D,B,z,U,j,ee,oe)},q=(D,B,G,te,z,U,j,ee)=>{let oe,ae;const{props:Pe,shapeFlag:ge,transition:_e,dirs:De}=D;if(oe=D.el=o(D.type,U,Pe&&Pe.is,Pe),ge&8?h(oe,D.children):ge&16&&I(D.children,oe,null,te,z,wf(D,U),j,ee),De&&no(D,null,te,"created"),x(oe,D,D.scopeId,j,te),Pe){for(const $e in Pe)$e!=="value"&&!Pl($e)&&i(oe,$e,null,Pe[$e],U,te);"value"in Pe&&i(oe,"value",null,Pe.value,U),(ae=Pe.onVnodeBeforeMount)&&or(ae,te,D)}De&&no(D,null,te,"beforeMount");const nt=eP(z,_e);nt&&_e.beforeEnter(oe),s(oe,B,G),((ae=Pe&&Pe.onVnodeMounted)||nt||De)&&Cs(()=>{ae&&or(ae,te,D),nt&&_e.enter(oe),De&&no(D,null,te,"mounted")},z)},x=(D,B,G,te,z)=>{if(G&&m(D,G),te)for(let U=0;U<te.length;U++)m(D,te[U]);if(z){let U=z.subTree;if(B===U||Q_(U.type)&&(U.ssContent===B||U.ssFallback===B)){const j=z.vnode;x(D,j,j.scopeId,j.slotScopeIds,z.parent)}}},I=(D,B,G,te,z,U,j,ee,oe=0)=>{for(let ae=oe;ae<D.length;ae++){const Pe=D[ae]=ee?Ei(D[ae]):ur(D[ae]);v(null,Pe,B,G,te,z,U,j,ee)}},C=(D,B,G,te,z,U,j)=>{const ee=B.el=D.el;let{patchFlag:oe,dynamicChildren:ae,dirs:Pe}=B;oe|=D.patchFlag&16;const ge=D.props||xt,_e=B.props||xt;let De;if(G&&so(G,!1),(De=_e.onVnodeBeforeUpdate)&&or(De,G,B,D),Pe&&no(B,D,G,"beforeUpdate"),G&&so(G,!0),(ge.innerHTML&&_e.innerHTML==null||ge.textContent&&_e.textContent==null)&&h(ee,""),ae?S(D.dynamicChildren,ae,ee,G,te,wf(B,z),U):j||K(D,B,ee,null,G,te,wf(B,z),U,!1),oe>0){if(oe&16)b(ee,ge,_e,G,z);else if(oe&2&&ge.class!==_e.class&&i(ee,"class",null,_e.class,z),oe&4&&i(ee,"style",ge.style,_e.style,z),oe&8){const nt=B.dynamicProps;for(let $e=0;$e<nt.length;$e++){const st=nt[$e],it=ge[st],hn=_e[st];(hn!==it||st==="value")&&i(ee,st,it,hn,z,G)}}oe&1&&D.children!==B.children&&h(ee,B.children)}else!j&&ae==null&&b(ee,ge,_e,G,z);((De=_e.onVnodeUpdated)||Pe)&&Cs(()=>{De&&or(De,G,B,D),Pe&&no(B,D,G,"updated")},te)},S=(D,B,G,te,z,U,j)=>{for(let ee=0;ee<B.length;ee++){const oe=D[ee],ae=B[ee],Pe=oe.el&&(oe.type===ke||!ho(oe,ae)||oe.shapeFlag&198)?f(oe.el):G;v(oe,ae,Pe,null,te,z,U,j,!0)}},b=(D,B,G,te,z)=>{if(B!==G){if(B!==xt)for(const U in B)!Pl(U)&&!(U in G)&&i(D,U,B[U],null,z,te);for(const U in G){if(Pl(U))continue;const j=G[U],ee=B[U];j!==ee&&U!=="value"&&i(D,U,ee,j,z,te)}"value"in G&&i(D,"value",B.value,G.value,z)}},N=(D,B,G,te,z,U,j,ee,oe)=>{const ae=B.el=D?D.el:a(""),Pe=B.anchor=D?D.anchor:a("");let{patchFlag:ge,dynamicChildren:_e,slotScopeIds:De}=B;De&&(ee=ee?ee.concat(De):De),D==null?(s(ae,G,te),s(Pe,G,te),I(B.children||[],G,Pe,z,U,j,ee,oe)):ge>0&&ge&64&&_e&&D.dynamicChildren?(S(D.dynamicChildren,_e,G,z,U,j,ee),(B.key!=null||z&&B===z.subTree)&&U_(D,B,!0)):K(D,B,G,Pe,z,U,j,ee,oe)},k=(D,B,G,te,z,U,j,ee,oe)=>{B.slotScopeIds=ee,D==null?B.shapeFlag&512?z.ctx.activate(B,G,te,j,oe):Ee(B,G,te,z,U,j,oe):ne(D,B,oe)},Ee=(D,B,G,te,z,U,j)=>{const ee=D.component=AP(D,te,z);if(Oh(D)&&(ee.ctx.renderer=ve),wP(ee,!1,j),ee.asyncDep){if(z&&z.registerDep(ee,V,j),!D.el){const oe=ee.subTree=Ge(is);w(null,oe,B,G),D.placeholder=oe.el}}else V(ee,D,B,G,z,U,j)},ne=(D,B,G)=>{const te=B.component=D.component;if(uP(D,B,G))if(te.asyncDep&&!te.asyncResolved){O(te,B,G);return}else te.next=B,te.update();else B.el=D.el,te.vnode=B},V=(D,B,G,te,z,U,j)=>{const ee=()=>{if(D.isMounted){let{next:ge,bu:_e,u:De,parent:nt,vnode:$e}=D;{const es=V_(D);if(es){ge&&(ge.el=$e.el,O(D,ge,j)),es.asyncDep.then(()=>{D.isUnmounted||ee()});return}}let st=ge,it;so(D,!1),ge?(ge.el=$e.el,O(D,ge,j)):ge=$e,_e&&Au(_e),(it=ge.props&&ge.props.onVnodeBeforeUpdate)&&or(it,nt,ge,$e),so(D,!0);const hn=Gy(D),Zn=D.subTree;D.subTree=hn,v(Zn,hn,f(Zn.el),Z(Zn),D,z,U),ge.el=hn.el,st===null&&hP(D,hn.el),De&&Cs(De,z),(it=ge.props&&ge.props.onVnodeUpdated)&&Cs(()=>or(it,nt,ge,$e),z)}else{let ge;const{el:_e,props:De}=B,{bm:nt,m:$e,parent:st,root:it,type:hn}=D,Zn=Nl(B);so(D,!1),nt&&Au(nt),!Zn&&(ge=De&&De.onVnodeBeforeMount)&&or(ge,st,B),so(D,!0);{it.ce&&it.ce._def.shadowRoot!==!1&&it.ce._injectChildStyle(hn);const es=D.subTree=Gy(D);v(null,es,G,te,D,z,U),B.el=es.el}if($e&&Cs($e,z),!Zn&&(ge=De&&De.onVnodeMounted)){const es=B;Cs(()=>or(ge,st,es),z)}(B.shapeFlag&256||st&&Nl(st.vnode)&&st.vnode.shapeFlag&256)&&D.a&&Cs(D.a,z),D.isMounted=!0,B=G=te=null}};D.scope.on();const oe=D.effect=new qw(ee);D.scope.off();const ae=D.update=oe.run.bind(oe),Pe=D.job=oe.runIfDirty.bind(oe);Pe.i=D,Pe.id=D.uid,oe.scheduler=()=>Dg(Pe),so(D,!0),ae()},O=(D,B,G)=>{B.component=D;const te=D.vnode.props;D.vnode=B,D.next=null,WS(D,B.props,te,G),YS(D,B.children,G),Kr(),Dy(D),qr()},K=(D,B,G,te,z,U,j,ee,oe=!1)=>{const ae=D&&D.children,Pe=D?D.shapeFlag:0,ge=B.children,{patchFlag:_e,shapeFlag:De}=B;if(_e>0){if(_e&128){Ue(ae,ge,G,te,z,U,j,ee,oe);return}else if(_e&256){de(ae,ge,G,te,z,U,j,ee,oe);return}}De&8?(Pe&16&&yt(ae,z,U),ge!==ae&&h(G,ge)):Pe&16?De&16?Ue(ae,ge,G,te,z,U,j,ee,oe):yt(ae,z,U,!0):(Pe&8&&h(G,""),De&16&&I(ge,G,te,z,U,j,ee,oe))},de=(D,B,G,te,z,U,j,ee,oe)=>{D=D||fa,B=B||fa;const ae=D.length,Pe=B.length,ge=Math.min(ae,Pe);let _e;for(_e=0;_e<ge;_e++){const De=B[_e]=oe?Ei(B[_e]):ur(B[_e]);v(D[_e],De,G,null,z,U,j,ee,oe)}ae>Pe?yt(D,z,U,!0,!1,ge):I(B,G,te,z,U,j,ee,oe,ge)},Ue=(D,B,G,te,z,U,j,ee,oe)=>{let ae=0;const Pe=B.length;let ge=D.length-1,_e=Pe-1;for(;ae<=ge&&ae<=_e;){const De=D[ae],nt=B[ae]=oe?Ei(B[ae]):ur(B[ae]);if(ho(De,nt))v(De,nt,G,null,z,U,j,ee,oe);else break;ae++}for(;ae<=ge&&ae<=_e;){const De=D[ge],nt=B[_e]=oe?Ei(B[_e]):ur(B[_e]);if(ho(De,nt))v(De,nt,G,null,z,U,j,ee,oe);else break;ge--,_e--}if(ae>ge){if(ae<=_e){const De=_e+1,nt=De<Pe?B[De].el:te;for(;ae<=_e;)v(null,B[ae]=oe?Ei(B[ae]):ur(B[ae]),G,nt,z,U,j,ee,oe),ae++}}else if(ae>_e)for(;ae<=ge;)Ve(D[ae],z,U,!0),ae++;else{const De=ae,nt=ae,$e=new Map;for(ae=nt;ae<=_e;ae++){const yn=B[ae]=oe?Ei(B[ae]):ur(B[ae]);yn.key!=null&&$e.set(yn.key,ae)}let st,it=0;const hn=_e-nt+1;let Zn=!1,es=0;const hs=new Array(hn);for(ae=0;ae<hn;ae++)hs[ae]=0;for(ae=De;ae<=ge;ae++){const yn=D[ae];if(it>=hn){Ve(yn,z,U,!0);continue}let dn;if(yn.key!=null)dn=$e.get(yn.key);else for(st=nt;st<=_e;st++)if(hs[st-nt]===0&&ho(yn,B[st])){dn=st;break}dn===void 0?Ve(yn,z,U,!0):(hs[dn-nt]=ae+1,dn>=es?es=dn:Zn=!0,v(yn,B[dn],G,null,z,U,j,ee,oe),it++)}const Gs=Zn?tP(hs):fa;for(st=Gs.length-1,ae=hn-1;ae>=0;ae--){const yn=nt+ae,dn=B[yn],oi=B[yn+1],kt=yn+1<Pe?oi.el||oi.placeholder:te;hs[ae]===0?v(null,dn,G,kt,z,U,j,ee,oe):Zn&&(st<0||ae!==Gs[st]?Te(dn,G,kt,2):st--)}}},Te=(D,B,G,te,z=null)=>{const{el:U,type:j,transition:ee,children:oe,shapeFlag:ae}=D;if(ae&6){Te(D.component.subTree,B,G,te);return}if(ae&128){D.suspense.move(B,G,te);return}if(ae&64){j.move(D,B,G,ve);return}if(j===ke){s(U,B,G);for(let ge=0;ge<oe.length;ge++)Te(oe[ge],B,G,te);s(D.anchor,B,G);return}if(j===_u){T(D,B,G);return}if(te!==2&&ae&1&&ee)if(te===0)ee.beforeEnter(U),s(U,B,G),Cs(()=>ee.enter(U),z);else{const{leave:ge,delayLeave:_e,afterLeave:De}=ee,nt=()=>{D.ctx.isUnmounted?r(U):s(U,B,G)},$e=()=>{U._isLeaving&&U[kr](!0),ge(U,()=>{nt(),De&&De()})};_e?_e(U,nt,$e):$e()}else s(U,B,G)},Ve=(D,B,G,te=!1,z=!1)=>{const{type:U,props:j,ref:ee,children:oe,dynamicChildren:ae,shapeFlag:Pe,patchFlag:ge,dirs:_e,cacheIndex:De}=D;if(ge===-2&&(z=!1),ee!=null&&(Kr(),kl(ee,null,G,D,!0),qr()),De!=null&&(B.renderCache[De]=void 0),Pe&256){B.ctx.deactivate(D);return}const nt=Pe&1&&_e,$e=!Nl(D);let st;if($e&&(st=j&&j.onVnodeBeforeUnmount)&&or(st,B,D),Pe&6)pt(D.component,G,te);else{if(Pe&128){D.suspense.unmount(G,te);return}nt&&no(D,null,B,"beforeUnmount"),Pe&64?D.type.remove(D,B,G,ve,te):ae&&!ae.hasOnce&&(U!==ke||ge>0&&ge&64)?yt(ae,B,G,!1,!0):(U===ke&&ge&384||!z&&Pe&16)&&yt(oe,B,G),te&&ze(D)}($e&&(st=j&&j.onVnodeUnmounted)||nt)&&Cs(()=>{st&&or(st,B,D),nt&&no(D,null,B,"unmounted")},G)},ze=D=>{const{type:B,el:G,anchor:te,transition:z}=D;if(B===ke){ft(G,te);return}if(B===_u){L(D);return}const U=()=>{r(G),z&&!z.persisted&&z.afterLeave&&z.afterLeave()};if(D.shapeFlag&1&&z&&!z.persisted){const{leave:j,delayLeave:ee}=z,oe=()=>j(G,U);ee?ee(D.el,U,oe):oe()}else U()},ft=(D,B)=>{let G;for(;D!==B;)G=p(D),r(D),D=G;r(B)},pt=(D,B,G)=>{const{bum:te,scope:z,job:U,subTree:j,um:ee,m:oe,a:ae}=D;Hy(oe),Hy(ae),te&&Au(te),z.stop(),U&&(U.flags|=8,Ve(j,D,B,G)),ee&&Cs(ee,B),Cs(()=>{D.isUnmounted=!0},B)},yt=(D,B,G,te=!1,z=!1,U=0)=>{for(let j=U;j<D.length;j++)Ve(D[j],B,G,te,z)},Z=D=>{if(D.shapeFlag&6)return Z(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const B=p(D.anchor||D.el),G=B&&B[wS];return G?p(G):B};let pe=!1;const ce=(D,B,G)=>{D==null?B._vnode&&Ve(B._vnode,null,null,!0):v(B._vnode||null,D,B,null,null,null,G),B._vnode=D,pe||(pe=!0,Dy(),p_(),pe=!1)},ve={p:v,um:Ve,m:Te,r:ze,mt:Ee,mc:I,pc:K,pbc:S,n:Z,o:n};return{render:ce,hydrate:void 0,createApp:jS(ce)}}function wf({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function so({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function eP(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function U_(n,e,t=!1){const s=n.children,r=e.children;if(Oe(s)&&Oe(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Ei(r[i]),a.el=o.el),!t&&a.patchFlag!==-2&&U_(o,a)),a.type===Mh&&a.patchFlag!==-1&&(a.el=o.el),a.type===is&&!a.el&&(a.el=o.el)}}function tP(n){const e=n.slice(),t=[0];let s,r,i,o,a;const l=n.length;for(s=0;s<l;s++){const c=n[s];if(c!==0){if(r=t[t.length-1],n[r]<c){e[s]=r,t.push(s);continue}for(i=0,o=t.length-1;i<o;)a=i+o>>1,n[t[a]]<c?i=a+1:o=a;c<n[t[i]]&&(i>0&&(e[s]=t[i-1]),t[i]=s)}}for(i=t.length,o=t[i-1];i-- >0;)t[i]=o,o=e[o];return t}function V_(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:V_(e)}function Hy(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const nP=Symbol.for("v-scx"),sP=()=>Xs(nP);function Qr(n,e,t){return $_(n,e,t)}function $_(n,e,t=xt){const{immediate:s,deep:r,flush:i,once:o}=t,a=Dn({},t),l=e&&s||!e&&i!=="post";let c;if(Xl){if(i==="sync"){const m=sP();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=pr,m.resume=pr,m.pause=pr,m}}const h=Kn;a.call=(m,E,v)=>Zs(m,h,E,v);let f=!1;i==="post"?a.scheduler=m=>{Cs(m,h&&h.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(m,E)=>{E?m():Dg(m)}),a.augmentJob=m=>{e&&(m.flags|=4),f&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=mS(n,e,a);return Xl&&(c?c.push(p):l&&p()),p}function rP(n,e,t){const s=this.proxy,r=ln(n)?n.includes(".")?H_(s,n):()=>s[n]:n.bind(s,s);let i;Ke(e)?i=e:(i=e.handler,t=e);const o=Tc(this),a=$_(r,i.bind(s),t);return o(),a}function H_(n,e){const t=e.split(".");return()=>{let s=n;for(let r=0;r<t.length&&s;r++)s=s[t[r]];return s}}const iP=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${$s(e)}Modifiers`]||n[`${qi(e)}Modifiers`];function oP(n,e,...t){if(n.isUnmounted)return;const s=n.vnode.props||xt;let r=t;const i=e.startsWith("update:"),o=i&&iP(s,e.slice(7));o&&(o.trim&&(r=t.map(h=>ln(h)?h.trim():h)),o.number&&(r=t.map(Fu)));let a,l=s[a=ff(e)]||s[a=ff($s(e))];!l&&i&&(l=s[a=ff(qi(e))]),l&&Zs(l,n,6,r);const c=s[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Zs(c,n,6,r)}}const aP=new WeakMap;function G_(n,e,t=!1){const s=t?aP:e.emitsCache,r=s.get(n);if(r!==void 0)return r;const i=n.emits;let o={},a=!1;if(!Ke(n)){const l=c=>{const h=G_(c,e,!0);h&&(a=!0,Dn(o,h))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!i&&!a?(Pt(n)&&s.set(n,null),null):(Oe(i)?i.forEach(l=>o[l]=null):Dn(o,i),Pt(n)&&s.set(n,o),o)}function Bh(n,e){return!n||!Ph(e)?!1:(e=e.slice(2).replace(/Once$/,""),wt(n,e[0].toLowerCase()+e.slice(1))||wt(n,qi(e))||wt(n,e))}function Gy(n){const{type:e,vnode:t,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:h,props:f,data:p,setupState:m,ctx:E,inheritAttrs:v}=n,A=Hu(n);let w,P;try{if(t.shapeFlag&4){const L=r||s,Q=L;w=ur(c.call(Q,L,h,f,m,p,E)),P=a}else{const L=e;w=ur(L.length>1?L(f,{attrs:a,slots:o,emit:l}):L(f,null)),P=e.props?a:lP(a)}}catch(L){Ol.length=0,Dh(L,n,1),w=Ge(is)}let T=w;if(P&&v!==!1){const L=Object.keys(P),{shapeFlag:Q}=T;L.length&&Q&7&&(i&&L.some(_g)&&(P=cP(P,i)),T=Fi(T,P,!1,!0))}return t.dirs&&(T=Fi(T,null,!1,!0),T.dirs=T.dirs?T.dirs.concat(t.dirs):t.dirs),t.transition&&ql(T,t.transition),w=T,Hu(A),w}const lP=n=>{let e;for(const t in n)(t==="class"||t==="style"||Ph(t))&&((e||(e={}))[t]=n[t]);return e},cP=(n,e)=>{const t={};for(const s in n)(!_g(s)||!(s.slice(9)in e))&&(t[s]=n[s]);return t};function uP(n,e,t){const{props:s,children:r,component:i}=n,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return s?Qy(s,o,c):!!o;if(l&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const p=h[f];if(o[p]!==s[p]&&!Bh(c,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Qy(s,o,c):!0:!!o;return!1}function Qy(n,e,t){const s=Object.keys(e);if(s.length!==Object.keys(n).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==n[i]&&!Bh(t,i))return!0}return!1}function hP({vnode:n,parent:e},t){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===n&&(s.el=n.el),s===n)(n=e.vnode).el=t,e=e.parent;else break}}const Q_=n=>n.__isSuspense;function dP(n,e){e&&e.pendingBranch?Oe(n)?e.effects.push(...n):e.effects.push(n):AS(n)}const ke=Symbol.for("v-fgt"),Mh=Symbol.for("v-txt"),is=Symbol.for("v-cmt"),_u=Symbol.for("v-stc"),Ol=[];let Rs=null;function M(n=!1){Ol.push(Rs=n?null:[])}function fP(){Ol.pop(),Rs=Ol[Ol.length-1]||null}let Jl=1;function ju(n,e=!1){Jl+=n,n<0&&Rs&&e&&(Rs.hasOnce=!0)}function j_(n){return n.dynamicChildren=Jl>0?Rs||fa:null,fP(),Jl>0&&Rs&&Rs.push(n),n}function F(n,e,t,s,r,i){return j_(d(n,e,t,s,r,i,!0))}function z_(n,e,t,s,r){return j_(Ge(n,e,t,s,r,!0))}function zu(n){return n?n.__v_isVNode===!0:!1}function ho(n,e){return n.type===e.type&&n.key===e.key}const W_=({key:n})=>n??null,Eu=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?ln(n)||qn(n)||Ke(n)?{i:Ps,r:n,k:e,f:!!t}:n:null);function d(n,e=null,t=null,s=0,r=null,i=n===ke?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&W_(e),ref:e&&Eu(e),scopeId:m_,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Ps};return a?(Bg(l,t),i&128&&n.normalize(l)):t&&(l.shapeFlag|=ln(t)?8:16),Jl>0&&!o&&Rs&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Rs.push(l),l}const Ge=pP;function pP(n,e=null,t=null,s=0,r=null,i=!1){if((!n||n===BS)&&(n=is),zu(n)){const a=Fi(n,e,!0);return t&&Bg(a,t),Jl>0&&!i&&Rs&&(a.shapeFlag&6?Rs[Rs.indexOf(n)]=a:Rs.push(a)),a.patchFlag=-2,a}if(CP(n)&&(n=n.__vccOpts),e){e=gP(e);let{class:a,style:l}=e;a&&!ln(a)&&(e.class=Ne(a)),Pt(l)&&(kg(l)&&!Oe(l)&&(l=Dn({},l)),e.style=Tt(l))}const o=ln(n)?1:Q_(n)?128:v_(n)?64:Pt(n)?4:Ke(n)?2:0;return d(n,e,t,s,r,o,i,!0)}function gP(n){return n?kg(n)||D_(n)?Dn({},n):n:null}function Fi(n,e,t=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=n,c=e?mP(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&W_(c),ref:e&&e.ref?t&&i?Oe(i)?i.concat(Eu(e)):[i,Eu(e)]:Eu(e):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==ke?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Fi(n.ssContent),ssFallback:n.ssFallback&&Fi(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&s&&ql(h,l.clone(h)),h}function Yl(n=" ",e=0){return Ge(Mh,null,n,e)}function K_(n,e){const t=Ge(_u,null,n);return t.staticCount=e,t}function ue(n="",e=!1){return e?(M(),z_(is,null,n)):Ge(is,null,n)}function ur(n){return n==null||typeof n=="boolean"?Ge(is):Oe(n)?Ge(ke,null,n.slice()):zu(n)?Ei(n):Ge(Mh,null,String(n))}function Ei(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Fi(n)}function Bg(n,e){let t=0;const{shapeFlag:s}=n;if(e==null)e=null;else if(Oe(e))t=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Bg(n,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!D_(e)?e._ctx=Ps:r===3&&Ps&&(Ps.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Ke(e)?(e={default:e,_ctx:Ps},t=32):(e=String(e),s&64?(t=16,e=[Yl(e)]):t=8);n.children=e,n.shapeFlag|=t}function mP(...n){const e={};for(let t=0;t<n.length;t++){const s=n[t];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Ne([e.class,s.class]));else if(r==="style")e.style=Tt([e.style,s.style]);else if(Ph(r)){const i=e[r],o=s[r];o&&i!==o&&!(Oe(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function or(n,e,t,s=null){Zs(n,e,7,[t,s])}const yP=x_();let vP=0;function AP(n,e,t){const s=n.type,r=(e?e.appContext:n.appContext)||yP,i={uid:vP++,vnode:n,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new GT(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:L_(s,r),emitsOptions:G_(s,r),emit:null,emitted:null,propsDefaults:xt,inheritAttrs:s.inheritAttrs,ctx:xt,data:xt,props:xt,attrs:xt,slots:xt,refs:xt,setupState:xt,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=oP.bind(null,i),n.ce&&n.ce(i),i}let Kn=null;const q_=()=>Kn||Ps;let Wu,_p;{const n=kh(),e=(t,s)=>{let r;return(r=n[t])||(r=n[t]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Wu=e("__VUE_INSTANCE_SETTERS__",t=>Kn=t),_p=e("__VUE_SSR_SETTERS__",t=>Xl=t)}const Tc=n=>{const e=Kn;return Wu(n),n.scope.on(),()=>{n.scope.off(),Wu(e)}},jy=()=>{Kn&&Kn.scope.off(),Wu(null)};function J_(n){return n.vnode.shapeFlag&4}let Xl=!1;function wP(n,e=!1,t=!1){e&&_p(e);const{props:s,children:r}=n.vnode,i=J_(n);zS(n,s,i,e),JS(n,r,t||e);const o=i?_P(n,e):void 0;return e&&_p(!1),o}function _P(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,FS);const{setup:s}=t;if(s){Kr();const r=n.setupContext=s.length>1?bP(n):null,i=Tc(n),o=Cc(s,n,0,[n.props,r]),a=Hw(o);if(qr(),i(),(a||n.sp)&&!Nl(n)&&C_(n),a){if(o.then(jy,jy),e)return o.then(l=>{zy(n,l)}).catch(l=>{Dh(l,n,0)});n.asyncDep=o}else zy(n,o)}else Y_(n)}function zy(n,e,t){Ke(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Pt(e)&&(n.setupState=h_(e)),Y_(n)}function Y_(n,e,t){const s=n.type;n.render||(n.render=s.render||pr);{const r=Tc(n);Kr();try{US(n)}finally{qr(),r()}}}const EP={get(n,e){return zn(n,"get",""),n[e]}};function bP(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,EP),slots:n.slots,emit:n.emit,expose:e}}function Fh(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(h_(cS(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in Dl)return Dl[t](n)},has(e,t){return t in e||t in Dl}})):n.proxy}function IP(n,e=!0){return Ke(n)?n.displayName||n.name:n.name||e&&n.__name}function CP(n){return Ke(n)&&"__vccOpts"in n}const he=(n,e)=>pS(n,e,Xl);function Mg(n,e,t){try{ju(-1);const s=arguments.length;return s===2?Pt(e)&&!Oe(e)?zu(e)?Ge(n,null,[e]):Ge(n,e):Ge(n,null,e):(s>3?t=Array.prototype.slice.call(arguments,2):s===3&&zu(t)&&(t=[t]),Ge(n,e,t))}finally{ju(1)}}const TP="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ep;const Wy=typeof window<"u"&&window.trustedTypes;if(Wy)try{Ep=Wy.createPolicy("vue",{createHTML:n=>n})}catch{}const X_=Ep?n=>Ep.createHTML(n):n=>n,SP="http://www.w3.org/2000/svg",PP="http://www.w3.org/1998/Math/MathML",Rr=typeof document<"u"?document:null,Ky=Rr&&Rr.createElement("template"),RP={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,s)=>{const r=e==="svg"?Rr.createElementNS(SP,n):e==="mathml"?Rr.createElementNS(PP,n):t?Rr.createElement(n,{is:t}):Rr.createElement(n);return n==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:n=>Rr.createTextNode(n),createComment:n=>Rr.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Rr.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,s,r,i){const o=t?t.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===i||!(r=r.nextSibling)););else{Ky.innerHTML=X_(s==="svg"?`<svg>${n}</svg>`:s==="mathml"?`<math>${n}</math>`:n);const a=Ky.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},fi="transition",gl="animation",Zl=Symbol("_vtc"),Z_={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},xP=Dn({},A_,Z_),kP=n=>(n.displayName="Transition",n.props=xP,n),NP=kP((n,{slots:e})=>Mg(bS,DP(n),e)),ro=(n,e=[])=>{Oe(n)?n.forEach(t=>t(...e)):n&&n(...e)},qy=n=>n?Oe(n)?n.some(e=>e.length>1):n.length>1:!1;function DP(n){const e={};for(const N in n)N in Z_||(e[N]=n[N]);if(n.css===!1)return e;const{name:t="v",type:s,duration:r,enterFromClass:i=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:h=a,leaveFromClass:f=`${t}-leave-from`,leaveActiveClass:p=`${t}-leave-active`,leaveToClass:m=`${t}-leave-to`}=n,E=OP(r),v=E&&E[0],A=E&&E[1],{onBeforeEnter:w,onEnter:P,onEnterCancelled:T,onLeave:L,onLeaveCancelled:Q,onBeforeAppear:q=w,onAppear:x=P,onAppearCancelled:I=T}=e,C=(N,k,Ee,ne)=>{N._enterCancelled=ne,io(N,k?h:a),io(N,k?c:o),Ee&&Ee()},S=(N,k)=>{N._isLeaving=!1,io(N,f),io(N,m),io(N,p),k&&k()},b=N=>(k,Ee)=>{const ne=N?x:P,V=()=>C(k,N,Ee);ro(ne,[k,V]),Jy(()=>{io(k,N?l:i),Sr(k,N?h:a),qy(ne)||Yy(k,s,v,V)})};return Dn(e,{onBeforeEnter(N){ro(w,[N]),Sr(N,i),Sr(N,o)},onBeforeAppear(N){ro(q,[N]),Sr(N,l),Sr(N,c)},onEnter:b(!1),onAppear:b(!0),onLeave(N,k){N._isLeaving=!0;const Ee=()=>S(N,k);Sr(N,f),N._enterCancelled?(Sr(N,p),ev(N)):(ev(N),Sr(N,p)),Jy(()=>{N._isLeaving&&(io(N,f),Sr(N,m),qy(L)||Yy(N,s,A,Ee))}),ro(L,[N,Ee])},onEnterCancelled(N){C(N,!1,void 0,!0),ro(T,[N])},onAppearCancelled(N){C(N,!0,void 0,!0),ro(I,[N])},onLeaveCancelled(N){S(N),ro(Q,[N])}})}function OP(n){if(n==null)return null;if(Pt(n))return[_f(n.enter),_f(n.leave)];{const e=_f(n);return[e,e]}}function _f(n){return LT(n)}function Sr(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[Zl]||(n[Zl]=new Set)).add(e)}function io(n,e){e.split(/\s+/).forEach(s=>s&&n.classList.remove(s));const t=n[Zl];t&&(t.delete(e),t.size||(n[Zl]=void 0))}function Jy(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let LP=0;function Yy(n,e,t,s){const r=n._endId=++LP,i=()=>{r===n._endId&&s()};if(t!=null)return setTimeout(i,t);const{type:o,timeout:a,propCount:l}=BP(n,e);if(!o)return s();const c=o+"end";let h=0;const f=()=>{n.removeEventListener(c,p),i()},p=m=>{m.target===n&&++h>=l&&f()};setTimeout(()=>{h<l&&f()},a+1),n.addEventListener(c,p)}function BP(n,e){const t=window.getComputedStyle(n),s=E=>(t[E]||"").split(", "),r=s(`${fi}Delay`),i=s(`${fi}Duration`),o=Xy(r,i),a=s(`${gl}Delay`),l=s(`${gl}Duration`),c=Xy(a,l);let h=null,f=0,p=0;e===fi?o>0&&(h=fi,f=o,p=i.length):e===gl?c>0&&(h=gl,f=c,p=l.length):(f=Math.max(o,c),h=f>0?o>c?fi:gl:null,p=h?h===fi?i.length:l.length:0);const m=h===fi&&/\b(?:transform|all)(?:,|$)/.test(s(`${fi}Property`).toString());return{type:h,timeout:f,propCount:p,hasTransform:m}}function Xy(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,s)=>Zy(t)+Zy(n[s])))}function Zy(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function ev(n){return(n?n.ownerDocument:document).body.offsetHeight}function MP(n,e,t){const s=n[Zl];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Ku=Symbol("_vod"),e1=Symbol("_vsh"),t1={name:"show",beforeMount(n,{value:e},{transition:t}){n[Ku]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):ml(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:s}){!e!=!t&&(s?e?(s.beforeEnter(n),ml(n,!0),s.enter(n)):s.leave(n,()=>{ml(n,!1)}):ml(n,e))},beforeUnmount(n,{value:e}){ml(n,e)}};function ml(n,e){n.style.display=e?n[Ku]:"none",n[e1]=!e}const FP=Symbol(""),UP=/(?:^|;)\s*display\s*:/;function VP(n,e,t){const s=n.style,r=ln(t);let i=!1;if(t&&!r){if(e)if(ln(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&bu(s,a,"")}else for(const o in e)t[o]==null&&bu(s,o,"");for(const o in t)o==="display"&&(i=!0),bu(s,o,t[o])}else if(r){if(e!==t){const o=s[FP];o&&(t+=";"+o),s.cssText=t,i=UP.test(t)}}else e&&n.removeAttribute("style");Ku in n&&(n[Ku]=i?s.display:"",n[e1]&&(s.display="none"))}const tv=/\s*!important$/;function bu(n,e,t){if(Oe(t))t.forEach(s=>bu(n,e,s));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const s=$P(n,e);tv.test(t)?n.setProperty(qi(s),t.replace(tv,""),"important"):n[s]=t}}const nv=["Webkit","Moz","ms"],Ef={};function $P(n,e){const t=Ef[e];if(t)return t;let s=$s(e);if(s!=="filter"&&s in n)return Ef[e]=s;s=xh(s);for(let r=0;r<nv.length;r++){const i=nv[r]+s;if(i in n)return Ef[e]=i}return e}const sv="http://www.w3.org/1999/xlink";function rv(n,e,t,s,r,i=$T(e)){s&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(sv,e.slice(6,e.length)):n.setAttributeNS(sv,e,t):t==null||i&&!zw(t)?n.removeAttribute(e):n.setAttribute(e,i?"":_r(t)?String(t):t)}function iv(n,e,t,s,r){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?X_(t):t);return}const i=n.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=zw(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(r||e)}function Lr(n,e,t,s){n.addEventListener(e,t,s)}function HP(n,e,t,s){n.removeEventListener(e,t,s)}const ov=Symbol("_vei");function GP(n,e,t,s,r=null){const i=n[ov]||(n[ov]={}),o=i[e];if(s&&o)o.value=s;else{const[a,l]=QP(e);if(s){const c=i[e]=WP(s,r);Lr(n,a,c,l)}else o&&(HP(n,a,o,l),i[e]=void 0)}}const av=/(?:Once|Passive|Capture)$/;function QP(n){let e;if(av.test(n)){e={};let s;for(;s=n.match(av);)n=n.slice(0,n.length-s[0].length),e[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):qi(n.slice(2)),e]}let bf=0;const jP=Promise.resolve(),zP=()=>bf||(jP.then(()=>bf=0),bf=Date.now());function WP(n,e){const t=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=t.attached)return;Zs(KP(s,t.value),e,5,[s])};return t.value=n,t.attached=zP(),t}function KP(n,e){if(Oe(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const lv=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,qP=(n,e,t,s,r,i)=>{const o=r==="svg";e==="class"?MP(n,s,o):e==="style"?VP(n,t,s):Ph(e)?_g(e)||GP(n,e,t,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):JP(n,e,s,o))?(iv(n,e,s),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&rv(n,e,s,o,i,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!ln(s))?iv(n,$s(e),s,i,e):(e==="true-value"?n._trueValue=s:e==="false-value"&&(n._falseValue=s),rv(n,e,s,o))};function JP(n,e,t,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in n&&lv(e)&&Ke(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=n.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return lv(e)&&ln(t)?!1:e in n}const Ui=n=>{const e=n.props["onUpdate:modelValue"]||!1;return Oe(e)?t=>Au(e,t):e};function YP(n){n.target.composing=!0}function cv(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Us=Symbol("_assign"),Ns={created(n,{modifiers:{lazy:e,trim:t,number:s}},r){n[Us]=Ui(r);const i=s||r.props&&r.props.type==="number";Lr(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),i&&(a=Fu(a)),n[Us](a)}),t&&Lr(n,"change",()=>{n.value=n.value.trim()}),e||(Lr(n,"compositionstart",YP),Lr(n,"compositionend",cv),Lr(n,"change",cv))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:s,trim:r,number:i}},o){if(n[Us]=Ui(o),n.composing)return;const a=(i||n.type==="number")&&!/^0\d/.test(n.value)?Fu(n.value):n.value,l=e??"";a!==l&&(document.activeElement===n&&n.type!=="range"&&(s&&e===t||r&&n.value.trim()===l)||(n.value=l))}},XP={deep:!0,created(n,e,t){n[Us]=Ui(t),Lr(n,"change",()=>{const s=n._modelValue,r=Pa(n),i=n.checked,o=n[Us];if(Oe(s)){const a=Ig(s,r),l=a!==-1;if(i&&!l)o(s.concat(r));else if(!i&&l){const c=[...s];c.splice(a,1),o(c)}}else if(za(s)){const a=new Set(s);i?a.add(r):a.delete(r),o(a)}else o(n1(n,i))})},mounted:uv,beforeUpdate(n,e,t){n[Us]=Ui(t),uv(n,e,t)}};function uv(n,{value:e,oldValue:t},s){n._modelValue=e;let r;if(Oe(e))r=Ig(e,s.props.value)>-1;else if(za(e))r=e.has(s.props.value);else{if(e===t)return;r=Ro(e,n1(n,!0))}n.checked!==r&&(n.checked=r)}const ZP={created(n,{value:e},t){n.checked=Ro(e,t.props.value),n[Us]=Ui(t),Lr(n,"change",()=>{n[Us](Pa(n))})},beforeUpdate(n,{value:e,oldValue:t},s){n[Us]=Ui(s),e!==t&&(n.checked=Ro(e,s.props.value))}},Pi={deep:!0,created(n,{value:e,modifiers:{number:t}},s){const r=za(e);Lr(n,"change",()=>{const i=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>t?Fu(Pa(o)):Pa(o));n[Us](n.multiple?r?new Set(i):i:i[0]),n._assigning=!0,Ng(()=>{n._assigning=!1})}),n[Us]=Ui(s)},mounted(n,{value:e}){hv(n,e)},beforeUpdate(n,e,t){n[Us]=Ui(t)},updated(n,{value:e}){n._assigning||hv(n,e)}};function hv(n,e){const t=n.multiple,s=Oe(e);if(!(t&&!s&&!za(e))){for(let r=0,i=n.options.length;r<i;r++){const o=n.options[r],a=Pa(o);if(t)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=Ig(e,a)>-1}else o.selected=e.has(a);else if(Ro(Pa(o),e)){n.selectedIndex!==r&&(n.selectedIndex=r);return}}!t&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function Pa(n){return"_value"in n?n._value:n.value}function n1(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const s1={created(n,e,t){nu(n,e,t,null,"created")},mounted(n,e,t){nu(n,e,t,null,"mounted")},beforeUpdate(n,e,t,s){nu(n,e,t,s,"beforeUpdate")},updated(n,e,t,s){nu(n,e,t,s,"updated")}};function eR(n,e){switch(n){case"SELECT":return Pi;case"TEXTAREA":return Ns;default:switch(e){case"checkbox":return XP;case"radio":return ZP;default:return Ns}}}function nu(n,e,t,s,r){const o=eR(n.tagName,t.props&&t.props.type)[r];o&&o(n,e,t,s)}const tR=["ctrl","shift","alt","meta"],nR={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>tR.some(t=>n[`${t}Key`]&&!e.includes(t))},ms=(n,e)=>{const t=n._withMods||(n._withMods={}),s=e.join(".");return t[s]||(t[s]=((r,...i)=>{for(let o=0;o<e.length;o++){const a=nR[e[o]];if(a&&a(r,e))return}return n(r,...i)}))},sR={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},r1=(n,e)=>{const t=n._withKeys||(n._withKeys={}),s=e.join(".");return t[s]||(t[s]=(r=>{if(!("key"in r))return;const i=qi(r.key);if(e.some(o=>o===i||sR[o]===i))return n(r)}))},rR=Dn({patchProp:qP},RP);let dv;function iR(){return dv||(dv=XS(rR))}const oR=((...n)=>{const e=iR().createApp(...n),{mount:t}=e;return e.mount=s=>{const r=lR(s);if(!r)return;const i=e._component;!Ke(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=t(r,!1,aR(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e});function aR(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function lR(n){return ln(n)?document.querySelector(n):n}/*!
 * vue-router v4.6.0
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const sa=typeof document<"u";function i1(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function cR(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&i1(n.default)}const At=Object.assign;function If(n,e){const t={};for(const s in e){const r=e[s];t[s]=er(r)?r.map(n):n(r)}return t}const Ll=()=>{},er=Array.isArray;function fv(n,e){const t={};for(const s in n)t[s]=s in e?e[s]:n[s];return t}const o1=/#/g,uR=/&/g,hR=/\//g,dR=/=/g,fR=/\?/g,a1=/\+/g,pR=/%5B/g,gR=/%5D/g,l1=/%5E/g,mR=/%60/g,c1=/%7B/g,yR=/%7C/g,u1=/%7D/g,vR=/%20/g;function Fg(n){return n==null?"":encodeURI(""+n).replace(yR,"|").replace(pR,"[").replace(gR,"]")}function AR(n){return Fg(n).replace(c1,"{").replace(u1,"}").replace(l1,"^")}function bp(n){return Fg(n).replace(a1,"%2B").replace(vR,"+").replace(o1,"%23").replace(uR,"%26").replace(mR,"`").replace(c1,"{").replace(u1,"}").replace(l1,"^")}function wR(n){return bp(n).replace(dR,"%3D")}function _R(n){return Fg(n).replace(o1,"%23").replace(fR,"%3F")}function ER(n){return _R(n).replace(hR,"%2F")}function ec(n){if(n==null)return null;try{return decodeURIComponent(""+n)}catch{}return""+n}const bR=/\/$/,IR=n=>n.replace(bR,"");function Cf(n,e,t="/"){let s,r={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(s=e.slice(0,l),i=e.slice(l,a>0?a:e.length),r=n(i)),a>=0&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=PR(s??e,t),{fullPath:s+i+o,path:s,query:r,hash:ec(o)}}function CR(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function pv(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function TR(n,e,t){const s=e.matched.length-1,r=t.matched.length-1;return s>-1&&s===r&&Ra(e.matched[s],t.matched[r])&&h1(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function Ra(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function h1(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!SR(n[t],e[t]))return!1;return!0}function SR(n,e){return er(n)?gv(n,e):er(e)?gv(e,n):n===e}function gv(n,e){return er(e)?n.length===e.length&&n.every((t,s)=>t===e[s]):n.length===1&&n[0]===e}function PR(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),s=n.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=t.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return t.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const pi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Ip=(function(n){return n.pop="pop",n.push="push",n})({}),Tf=(function(n){return n.back="back",n.forward="forward",n.unknown="",n})({});function RR(n){if(!n)if(sa){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),IR(n)}const xR=/^[^#]+#/;function kR(n,e){return n.replace(xR,"#")+e}function NR(n,e){const t=document.documentElement.getBoundingClientRect(),s=n.getBoundingClientRect();return{behavior:e.behavior,left:s.left-t.left-(e.left||0),top:s.top-t.top-(e.top||0)}}const Uh=()=>({left:window.scrollX,top:window.scrollY});function DR(n){let e;if("el"in n){const t=n.el,s=typeof t=="string"&&t.startsWith("#"),r=typeof t=="string"?s?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!r)return;e=NR(r,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function mv(n,e){return(history.state?history.state.position-e:-1)+n}const Cp=new Map;function OR(n,e){Cp.set(n,e)}function LR(n){const e=Cp.get(n);return Cp.delete(n),e}function BR(n){return typeof n=="string"||n&&typeof n=="object"}function d1(n){return typeof n=="string"||typeof n=="symbol"}let Jt=(function(n){return n[n.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",n[n.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",n[n.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",n[n.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",n[n.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",n})({});const f1=Symbol("");Jt.MATCHER_NOT_FOUND+"",Jt.NAVIGATION_GUARD_REDIRECT+"",Jt.NAVIGATION_ABORTED+"",Jt.NAVIGATION_CANCELLED+"",Jt.NAVIGATION_DUPLICATED+"";function xa(n,e){return At(new Error,{type:n,[f1]:!0},e)}function Pr(n,e){return n instanceof Error&&f1 in n&&(e==null||!!(n.type&e))}const MR=["params","query","hash"];function FR(n){if(typeof n=="string")return n;if(n.path!=null)return n.path;const e={};for(const t of MR)t in n&&(e[t]=n[t]);return JSON.stringify(e,null,2)}function UR(n){const e={};if(n===""||n==="?")return e;const t=(n[0]==="?"?n.slice(1):n).split("&");for(let s=0;s<t.length;++s){const r=t[s].replace(a1," "),i=r.indexOf("="),o=ec(i<0?r:r.slice(0,i)),a=i<0?null:ec(r.slice(i+1));if(o in e){let l=e[o];er(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function yv(n){let e="";for(let t in n){const s=n[t];if(t=wR(t),s==null){s!==void 0&&(e+=(e.length?"&":"")+t);continue}(er(s)?s.map(r=>r&&bp(r)):[s&&bp(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+t,r!=null&&(e+="="+r))})}return e}function VR(n){const e={};for(const t in n){const s=n[t];s!==void 0&&(e[t]=er(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const $R=Symbol(""),vv=Symbol(""),Vh=Symbol(""),Ug=Symbol(""),Tp=Symbol("");function yl(){let n=[];function e(s){return n.push(s),()=>{const r=n.indexOf(s);r>-1&&n.splice(r,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function bi(n,e,t,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const c=p=>{p===!1?l(xa(Jt.NAVIGATION_ABORTED,{from:t,to:e})):p instanceof Error?l(p):BR(p)?l(xa(Jt.NAVIGATION_GUARD_REDIRECT,{from:e,to:p})):(o&&s.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>n.call(s&&s.instances[r],e,t,c));let f=Promise.resolve(h);n.length<3&&(f=f.then(c)),f.catch(p=>l(p))})}function Sf(n,e,t,s,r=i=>i()){const i=[];for(const o of n)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(i1(l)){const c=(l.__vccOpts||l)[e];c&&i.push(bi(c,t,s,o,a,r))}else{let c=l();i.push(()=>c.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=cR(h)?h.default:h;o.mods[a]=h,o.components[a]=f;const p=(f.__vccOpts||f)[e];return p&&bi(p,t,s,o,a,r)()}))}}return i}function HR(n,e){const t=[],s=[],r=[],i=Math.max(e.matched.length,n.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(n.matched.find(c=>Ra(c,a))?s.push(a):t.push(a));const l=n.matched[o];l&&(e.matched.find(c=>Ra(c,l))||r.push(l))}return[t,s,r]}/*!
 * vue-router v4.6.0
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let GR=()=>location.protocol+"//"+location.host;function p1(n,e){const{pathname:t,search:s,hash:r}=e,i=n.indexOf("#");if(i>-1){let o=r.includes(n.slice(i))?n.slice(i).length:1,a=r.slice(o);return a[0]!=="/"&&(a="/"+a),pv(a,"")}return pv(t,n)+s+r}function QR(n,e,t,s){let r=[],i=[],o=null;const a=({state:p})=>{const m=p1(n,location),E=t.value,v=e.value;let A=0;if(p){if(t.value=m,e.value=p,o&&o===E){o=null;return}A=v?p.position-v.position:0}else s(m);r.forEach(w=>{w(t.value,E,{delta:A,type:Ip.pop,direction:A?A>0?Tf.forward:Tf.back:Tf.unknown})})};function l(){o=t.value}function c(p){r.push(p);const m=()=>{const E=r.indexOf(p);E>-1&&r.splice(E,1)};return i.push(m),m}function h(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(At({},p.state,{scroll:Uh()}),"")}}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:l,listen:c,destroy:f}}function Av(n,e,t,s=!1,r=!1){return{back:n,current:e,forward:t,replaced:s,position:window.history.length,scroll:r?Uh():null}}function jR(n){const{history:e,location:t}=window,s={value:p1(n,t)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,h){const f=n.indexOf("#"),p=f>-1?(t.host&&document.querySelector("base")?n:n.slice(f))+l:GR()+n+l;try{e[h?"replaceState":"pushState"](c,"",p),r.value=c}catch(m){console.error(m),t[h?"replace":"assign"](p)}}function o(l,c){i(l,At({},e.state,Av(r.value.back,l,r.value.forward,!0),c,{position:r.value.position}),!0),s.value=l}function a(l,c){const h=At({},r.value,e.state,{forward:l,scroll:Uh()});i(h.current,h,!0),i(l,At({},Av(s.value,l,null),{position:h.position+1},c),!1),s.value=l}return{location:s,state:r,push:a,replace:o}}function zR(n){n=RR(n);const e=jR(n),t=QR(n,e.state,e.location,e.replace);function s(i,o=!0){o||t.pauseListeners(),history.go(i)}const r=At({location:"",base:n,go:s,createHref:kR.bind(null,n)},e,t);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function WR(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),zR(n)}let yo=(function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.Group=2]="Group",n})({});var An=(function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.ParamRegExp=2]="ParamRegExp",n[n.ParamRegExpEnd=3]="ParamRegExpEnd",n[n.EscapeNext=4]="EscapeNext",n})(An||{});const KR={type:yo.Static,value:""},qR=/[a-zA-Z0-9_]/;function JR(n){if(!n)return[[]];if(n==="/")return[[KR]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(m){throw new Error(`ERR (${t})/"${c}": ${m}`)}let t=An.Static,s=t;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,c="",h="";function f(){c&&(t===An.Static?i.push({type:yo.Static,value:c}):t===An.Param||t===An.ParamRegExp||t===An.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:yo.Param,value:c,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function p(){c+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==An.ParamRegExp){s=t,t=An.EscapeNext;continue}switch(t){case An.Static:l==="/"?(c&&f(),o()):l===":"?(f(),t=An.Param):p();break;case An.EscapeNext:p(),t=s;break;case An.Param:l==="("?t=An.ParamRegExp:qR.test(l)?p():(f(),t=An.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case An.ParamRegExp:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:t=An.ParamRegExpEnd:h+=l;break;case An.ParamRegExpEnd:f(),t=An.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return t===An.ParamRegExp&&e(`Unfinished custom RegExp for param "${c}"`),f(),o(),r}const wv="[^/]+?",YR={sensitive:!1,strict:!1,start:!0,end:!0};var ns=(function(n){return n[n._multiplier=10]="_multiplier",n[n.Root=90]="Root",n[n.Segment=40]="Segment",n[n.SubSegment=30]="SubSegment",n[n.Static=40]="Static",n[n.Dynamic=20]="Dynamic",n[n.BonusCustomRegExp=10]="BonusCustomRegExp",n[n.BonusWildcard=-50]="BonusWildcard",n[n.BonusRepeatable=-20]="BonusRepeatable",n[n.BonusOptional=-8]="BonusOptional",n[n.BonusStrict=.7000000000000001]="BonusStrict",n[n.BonusCaseSensitive=.25]="BonusCaseSensitive",n})(ns||{});const XR=/[.+*?^${}()[\]/\\]/g;function ZR(n,e){const t=At({},YR,e),s=[];let r=t.start?"^":"";const i=[];for(const c of n){const h=c.length?[]:[ns.Root];t.strict&&!c.length&&(r+="/");for(let f=0;f<c.length;f++){const p=c[f];let m=ns.Segment+(t.sensitive?ns.BonusCaseSensitive:0);if(p.type===yo.Static)f||(r+="/"),r+=p.value.replace(XR,"\\$&"),m+=ns.Static;else if(p.type===yo.Param){const{value:E,repeatable:v,optional:A,regexp:w}=p;i.push({name:E,repeatable:v,optional:A});const P=w||wv;if(P!==wv){m+=ns.BonusCustomRegExp;try{`${P}`}catch(L){throw new Error(`Invalid custom RegExp for param "${E}" (${P}): `+L.message)}}let T=v?`((?:${P})(?:/(?:${P}))*)`:`(${P})`;f||(T=A&&c.length<2?`(?:/${T})`:"/"+T),A&&(T+="?"),r+=T,m+=ns.Dynamic,A&&(m+=ns.BonusOptional),v&&(m+=ns.BonusRepeatable),P===".*"&&(m+=ns.BonusWildcard)}h.push(m)}s.push(h)}if(t.strict&&t.end){const c=s.length-1;s[c][s[c].length-1]+=ns.BonusStrict}t.strict||(r+="/?"),t.end?r+="$":t.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,t.sensitive?"":"i");function a(c){const h=c.match(o),f={};if(!h)return null;for(let p=1;p<h.length;p++){const m=h[p]||"",E=i[p-1];f[E.name]=m&&E.repeatable?m.split("/"):m}return f}function l(c){let h="",f=!1;for(const p of n){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const m of p)if(m.type===yo.Static)h+=m.value;else if(m.type===yo.Param){const{value:E,repeatable:v,optional:A}=m,w=E in c?c[E]:"";if(er(w)&&!v)throw new Error(`Provided param "${E}" is an array but it is not repeatable (* or + modifiers)`);const P=er(w)?w.join("/"):w;if(!P)if(A)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${E}"`);h+=P}}return h||"/"}return{re:o,score:s,keys:i,parse:a,stringify:l}}function ex(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=e[t]-n[t];if(s)return s;t++}return n.length<e.length?n.length===1&&n[0]===ns.Static+ns.Segment?-1:1:n.length>e.length?e.length===1&&e[0]===ns.Static+ns.Segment?1:-1:0}function g1(n,e){let t=0;const s=n.score,r=e.score;for(;t<s.length&&t<r.length;){const i=ex(s[t],r[t]);if(i)return i;t++}if(Math.abs(r.length-s.length)===1){if(_v(s))return 1;if(_v(r))return-1}return r.length-s.length}function _v(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const tx={strict:!1,end:!0,sensitive:!1};function nx(n,e,t){const s=ZR(JR(n.path),t),r=At(s,{record:n,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function sx(n,e){const t=[],s=new Map;e=fv(tx,e);function r(f){return s.get(f)}function i(f,p,m){const E=!m,v=bv(f);v.aliasOf=m&&m.record;const A=fv(e,f),w=[v];if("alias"in f){const L=typeof f.alias=="string"?[f.alias]:f.alias;for(const Q of L)w.push(bv(At({},v,{components:m?m.record.components:v.components,path:Q,aliasOf:m?m.record:v})))}let P,T;for(const L of w){const{path:Q}=L;if(p&&Q[0]!=="/"){const q=p.record.path,x=q[q.length-1]==="/"?"":"/";L.path=p.record.path+(Q&&x+Q)}if(P=nx(L,p,A),m?m.alias.push(P):(T=T||P,T!==P&&T.alias.push(P),E&&f.name&&!Iv(P)&&o(f.name)),m1(P)&&l(P),v.children){const q=v.children;for(let x=0;x<q.length;x++)i(q[x],P,m&&m.children[x])}m=m||P}return T?()=>{o(T)}:Ll}function o(f){if(d1(f)){const p=s.get(f);p&&(s.delete(f),t.splice(t.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=t.indexOf(f);p>-1&&(t.splice(p,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return t}function l(f){const p=ox(f,t);t.splice(p,0,f),f.record.name&&!Iv(f)&&s.set(f.record.name,f)}function c(f,p){let m,E={},v,A;if("name"in f&&f.name){if(m=s.get(f.name),!m)throw xa(Jt.MATCHER_NOT_FOUND,{location:f});A=m.record.name,E=At(Ev(p.params,m.keys.filter(T=>!T.optional).concat(m.parent?m.parent.keys.filter(T=>T.optional):[]).map(T=>T.name)),f.params&&Ev(f.params,m.keys.map(T=>T.name))),v=m.stringify(E)}else if(f.path!=null)v=f.path,m=t.find(T=>T.re.test(v)),m&&(E=m.parse(v),A=m.record.name);else{if(m=p.name?s.get(p.name):t.find(T=>T.re.test(p.path)),!m)throw xa(Jt.MATCHER_NOT_FOUND,{location:f,currentLocation:p});A=m.record.name,E=At({},p.params,f.params),v=m.stringify(E)}const w=[];let P=m;for(;P;)w.unshift(P.record),P=P.parent;return{name:A,path:v,params:E,matched:w,meta:ix(w)}}n.forEach(f=>i(f));function h(){t.length=0,s.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:r}}function Ev(n,e){const t={};for(const s of e)s in n&&(t[s]=n[s]);return t}function bv(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:rx(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function rx(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const s in n.components)e[s]=typeof t=="object"?t[s]:t;return e}function Iv(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function ix(n){return n.reduce((e,t)=>At(e,t.meta),{})}function ox(n,e){let t=0,s=e.length;for(;t!==s;){const i=t+s>>1;g1(n,e[i])<0?s=i:t=i+1}const r=ax(n);return r&&(s=e.lastIndexOf(r,s-1)),s}function ax(n){let e=n;for(;e=e.parent;)if(m1(e)&&g1(n,e)===0)return e}function m1({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function Cv(n){const e=Xs(Vh),t=Xs(Ug),s=he(()=>{const l=Le(n.to);return e.resolve(l)}),r=he(()=>{const{matched:l}=s.value,{length:c}=l,h=l[c-1],f=t.matched;if(!h||!f.length)return-1;const p=f.findIndex(Ra.bind(null,h));if(p>-1)return p;const m=Tv(l[c-2]);return c>1&&Tv(h)===m&&f[f.length-1].path!==m?f.findIndex(Ra.bind(null,l[c-2])):p}),i=he(()=>r.value>-1&&dx(t.params,s.value.params)),o=he(()=>r.value>-1&&r.value===t.matched.length-1&&h1(t.params,s.value.params));function a(l={}){if(hx(l)){const c=e[Le(n.replace)?"replace":"push"](Le(n.to)).catch(Ll);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:he(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function lx(n){return n.length===1?n[0]:n}const cx=I_({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Cv,setup(n,{slots:e}){const t=Ic(Cv(n)),{options:s}=Xs(Vh),r=he(()=>({[Sv(n.activeClass,s.linkActiveClass,"router-link-active")]:t.isActive,[Sv(n.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const i=e.default&&lx(e.default(t));return n.custom?i:Mg("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:r.value},i)}}}),ux=cx;function hx(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function dx(n,e){for(const t in e){const s=e[t],r=n[t];if(typeof s=="string"){if(s!==r)return!1}else if(!er(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Tv(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const Sv=(n,e,t)=>n??e??t,fx=I_({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const s=Xs(Tp),r=he(()=>n.route||s.value),i=Xs(vv,0),o=he(()=>{let c=Le(i);const{matched:h}=r.value;let f;for(;(f=h[c])&&!f.components;)c++;return c}),a=he(()=>r.value.matched[o.value]);wu(vv,he(()=>o.value+1)),wu($R,a),wu(Tp,r);const l=$();return Qr(()=>[l.value,a.value,n.name],([c,h,f],[p,m,E])=>{h&&(h.instances[f]=c,m&&m!==h&&c&&c===p&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),c&&h&&(!m||!Ra(h,m)||!p)&&(h.enterCallbacks[f]||[]).forEach(v=>v(c))},{flush:"post"}),()=>{const c=r.value,h=n.name,f=a.value,p=f&&f.components[h];if(!p)return Pv(t.default,{Component:p,route:c});const m=f.props[h],E=m?m===!0?c.params:typeof m=="function"?m(c):m:null,A=Mg(p,At({},E,e,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(f.instances[h]=null)},ref:l}));return Pv(t.default,{Component:A,route:c})||A}}});function Pv(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const px=fx;function gx(n){const e=sx(n.routes,n),t=n.parseQuery||UR,s=n.stringifyQuery||yv,r=n.history,i=yl(),o=yl(),a=yl(),l=uS(pi);let c=pi;sa&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=If.bind(null,Z=>""+Z),f=If.bind(null,ER),p=If.bind(null,ec);function m(Z,pe){let ce,ve;return d1(Z)?(ce=e.getRecordMatcher(Z),ve=pe):ve=Z,e.addRoute(ve,ce)}function E(Z){const pe=e.getRecordMatcher(Z);pe&&e.removeRoute(pe)}function v(){return e.getRoutes().map(Z=>Z.record)}function A(Z){return!!e.getRecordMatcher(Z)}function w(Z,pe){if(pe=At({},pe||l.value),typeof Z=="string"){const G=Cf(t,Z,pe.path),te=e.resolve({path:G.path},pe),z=r.createHref(G.fullPath);return At(G,te,{params:p(te.params),hash:ec(G.hash),redirectedFrom:void 0,href:z})}let ce;if(Z.path!=null)ce=At({},Z,{path:Cf(t,Z.path,pe.path).path});else{const G=At({},Z.params);for(const te in G)G[te]==null&&delete G[te];ce=At({},Z,{params:f(G)}),pe.params=f(pe.params)}const ve=e.resolve(ce,pe),Qe=Z.hash||"";ve.params=h(p(ve.params));const D=CR(s,At({},Z,{hash:AR(Qe),path:ve.path})),B=r.createHref(D);return At({fullPath:D,hash:Qe,query:s===yv?VR(Z.query):Z.query||{}},ve,{redirectedFrom:void 0,href:B})}function P(Z){return typeof Z=="string"?Cf(t,Z,l.value.path):At({},Z)}function T(Z,pe){if(c!==Z)return xa(Jt.NAVIGATION_CANCELLED,{from:pe,to:Z})}function L(Z){return x(Z)}function Q(Z){return L(At(P(Z),{replace:!0}))}function q(Z,pe){const ce=Z.matched[Z.matched.length-1];if(ce&&ce.redirect){const{redirect:ve}=ce;let Qe=typeof ve=="function"?ve(Z,pe):ve;return typeof Qe=="string"&&(Qe=Qe.includes("?")||Qe.includes("#")?Qe=P(Qe):{path:Qe},Qe.params={}),At({query:Z.query,hash:Z.hash,params:Qe.path!=null?{}:Z.params},Qe)}}function x(Z,pe){const ce=c=w(Z),ve=l.value,Qe=Z.state,D=Z.force,B=Z.replace===!0,G=q(ce,ve);if(G)return x(At(P(G),{state:typeof G=="object"?At({},Qe,G.state):Qe,force:D,replace:B}),pe||ce);const te=ce;te.redirectedFrom=pe;let z;return!D&&TR(s,ve,ce)&&(z=xa(Jt.NAVIGATION_DUPLICATED,{to:te,from:ve}),Te(ve,ve,!0,!1)),(z?Promise.resolve(z):S(te,ve)).catch(U=>Pr(U)?Pr(U,Jt.NAVIGATION_GUARD_REDIRECT)?U:Ue(U):K(U,te,ve)).then(U=>{if(U){if(Pr(U,Jt.NAVIGATION_GUARD_REDIRECT))return x(At({replace:B},P(U.to),{state:typeof U.to=="object"?At({},Qe,U.to.state):Qe,force:D}),pe||te)}else U=N(te,ve,!0,B,Qe);return b(te,ve,U),U})}function I(Z,pe){const ce=T(Z,pe);return ce?Promise.reject(ce):Promise.resolve()}function C(Z){const pe=ft.values().next().value;return pe&&typeof pe.runWithContext=="function"?pe.runWithContext(Z):Z()}function S(Z,pe){let ce;const[ve,Qe,D]=HR(Z,pe);ce=Sf(ve.reverse(),"beforeRouteLeave",Z,pe);for(const G of ve)G.leaveGuards.forEach(te=>{ce.push(bi(te,Z,pe))});const B=I.bind(null,Z,pe);return ce.push(B),yt(ce).then(()=>{ce=[];for(const G of i.list())ce.push(bi(G,Z,pe));return ce.push(B),yt(ce)}).then(()=>{ce=Sf(Qe,"beforeRouteUpdate",Z,pe);for(const G of Qe)G.updateGuards.forEach(te=>{ce.push(bi(te,Z,pe))});return ce.push(B),yt(ce)}).then(()=>{ce=[];for(const G of D)if(G.beforeEnter)if(er(G.beforeEnter))for(const te of G.beforeEnter)ce.push(bi(te,Z,pe));else ce.push(bi(G.beforeEnter,Z,pe));return ce.push(B),yt(ce)}).then(()=>(Z.matched.forEach(G=>G.enterCallbacks={}),ce=Sf(D,"beforeRouteEnter",Z,pe,C),ce.push(B),yt(ce))).then(()=>{ce=[];for(const G of o.list())ce.push(bi(G,Z,pe));return ce.push(B),yt(ce)}).catch(G=>Pr(G,Jt.NAVIGATION_CANCELLED)?G:Promise.reject(G))}function b(Z,pe,ce){a.list().forEach(ve=>C(()=>ve(Z,pe,ce)))}function N(Z,pe,ce,ve,Qe){const D=T(Z,pe);if(D)return D;const B=pe===pi,G=sa?history.state:{};ce&&(ve||B?r.replace(Z.fullPath,At({scroll:B&&G&&G.scroll},Qe)):r.push(Z.fullPath,Qe)),l.value=Z,Te(Z,pe,ce,B),Ue()}let k;function Ee(){k||(k=r.listen((Z,pe,ce)=>{if(!pt.listening)return;const ve=w(Z),Qe=q(ve,pt.currentRoute.value);if(Qe){x(At(Qe,{replace:!0,force:!0}),ve).catch(Ll);return}c=ve;const D=l.value;sa&&OR(mv(D.fullPath,ce.delta),Uh()),S(ve,D).catch(B=>Pr(B,Jt.NAVIGATION_ABORTED|Jt.NAVIGATION_CANCELLED)?B:Pr(B,Jt.NAVIGATION_GUARD_REDIRECT)?(x(At(P(B.to),{force:!0}),ve).then(G=>{Pr(G,Jt.NAVIGATION_ABORTED|Jt.NAVIGATION_DUPLICATED)&&!ce.delta&&ce.type===Ip.pop&&r.go(-1,!1)}).catch(Ll),Promise.reject()):(ce.delta&&r.go(-ce.delta,!1),K(B,ve,D))).then(B=>{B=B||N(ve,D,!1),B&&(ce.delta&&!Pr(B,Jt.NAVIGATION_CANCELLED)?r.go(-ce.delta,!1):ce.type===Ip.pop&&Pr(B,Jt.NAVIGATION_ABORTED|Jt.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),b(ve,D,B)}).catch(Ll)}))}let ne=yl(),V=yl(),O;function K(Z,pe,ce){Ue(Z);const ve=V.list();return ve.length?ve.forEach(Qe=>Qe(Z,pe,ce)):console.error(Z),Promise.reject(Z)}function de(){return O&&l.value!==pi?Promise.resolve():new Promise((Z,pe)=>{ne.add([Z,pe])})}function Ue(Z){return O||(O=!Z,Ee(),ne.list().forEach(([pe,ce])=>Z?ce(Z):pe()),ne.reset()),Z}function Te(Z,pe,ce,ve){const{scrollBehavior:Qe}=n;if(!sa||!Qe)return Promise.resolve();const D=!ce&&LR(mv(Z.fullPath,0))||(ve||!ce)&&history.state&&history.state.scroll||null;return Ng().then(()=>Qe(Z,pe,D)).then(B=>B&&DR(B)).catch(B=>K(B,Z,pe))}const Ve=Z=>r.go(Z);let ze;const ft=new Set,pt={currentRoute:l,listening:!0,addRoute:m,removeRoute:E,clearRoutes:e.clearRoutes,hasRoute:A,getRoutes:v,resolve:w,options:n,push:L,replace:Q,go:Ve,back:()=>Ve(-1),forward:()=>Ve(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:V.add,isReady:de,install(Z){Z.component("RouterLink",ux),Z.component("RouterView",px),Z.config.globalProperties.$router=pt,Object.defineProperty(Z.config.globalProperties,"$route",{enumerable:!0,get:()=>Le(l)}),sa&&!ze&&l.value===pi&&(ze=!0,L(r.location).catch(ve=>{}));const pe={};for(const ve in pi)Object.defineProperty(pe,ve,{get:()=>l.value[ve],enumerable:!0});Z.provide(Vh,pt),Z.provide(Ug,c_(pe)),Z.provide(Tp,l);const ce=Z.unmount;ft.add(Z),Z.unmount=function(){ft.delete(Z),ft.size<1&&(c=pi,k&&k(),k=null,l.value=pi,ze=!1,O=!1),ce()}}};function yt(Z){return Z.reduce((pe,ce)=>pe.then(()=>C(ce)),Promise.resolve())}return pt}function bn(){return Xs(Vh)}function y1(n){return Xs(Ug)}const mx="modulepreload",yx=function(n){return"/tdl/"+n},Rv={},v1=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){let l=function(c){return Promise.all(c.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");r=l(t.map(c=>{if(c=yx(c),c in Rv)return;Rv[c]=!0;const h=c.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":mx,h||(p.as="script"),p.crossOrigin="",p.href=c,a&&p.setAttribute("nonce",a),document.head.appendChild(p),h)return new Promise((m,E)=>{p.addEventListener("load",m),p.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},Ji=()=>JSON.parse(localStorage.getItem("users")||"[]"),_t=()=>{const n=sessionStorage.getItem("currentUser");return n?JSON.parse(n):null},Vg=n=>Ji().find(t=>t.id===n||t.walletAddress===n),A1=n=>{const e=Ji(),t=Vg(n);if(t)return t;const r=(o=>{const a=o.toString().split("").reduce((f,p)=>(f<<5)-f+p.charCodeAt(0),0),l="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let c="",h=Math.abs(a);for(let f=0;f<6;f++)c+=l[h%l.length],h=Math.floor(h/l.length);return c})(n),i={id:n,walletAddress:n,loginType:"wallet",inviteCode:r,createdAt:new Date().toISOString(),referrals:[],gameData:{level:1,coins:0,totalCoin:0,catFragments:50,nftCount:0,miningLevel:1,huntingLevel:1,explorationLevel:1,productionLevel:1,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}};return e.push(i),localStorage.setItem("users",JSON.stringify(e)),i},tc=async(n,e)=>{const t=_t(),s=Ji(),r=s.findIndex(i=>i.id===n);return r!==-1?(s[r].gameData={...s[r].gameData,...e},localStorage.setItem("users",JSON.stringify(s)),t&&t.id===n&&(t.gameData={...t.gameData,...e},sessionStorage.setItem("currentUser",JSON.stringify(t))),!0):!1},w1=()=>{sessionStorage.removeItem("currentUser")},_1=()=>{const n=localStorage.getItem("appLanguage");return!n||n===""?(localStorage.setItem("appLanguage","English"),"English"):n},Es=()=>{const n=_1();return{ko:{home:"",game:"",exchange:"",quest:"",inventory:"",factory:"",mining:"",hunting:"",exploration:"",production:"",back:" ",settings:"",notification:"",login:"",signup:"",email:"",password:"",loginButton:"",signupButton:"",walletConnect:" ",createCat:" ",catFragments:" ",coin:"",point:"",energy:"",level:"",complete:"",confirm:"",cancel:"",close:"",success:"",error:"",loading:" ...",insufficient:"",required:"",optional:"",daily:"",weekly:"",monthly:"",quest:"",reward:"",receive:"",received:"",inProgress:" ",completed:"",buy:"",sell:"",shop:"",profile:"",attendance:"",nft:"NFT",inventory:"",factory:"",exchange:"",settings:"",logout:"",language:"",sound:"",vibration:"",totalPoints:" ",totalCoins:" ",createCatSuccess:"  !",newCatAdded:"   !",enterEmail:" ",enterPassword:" ",enterAllFields:"  ",loginError:"   ",invalidCredentials:"    ",walletNotInstalled:"MetaMask   ",installMetaMask:"MetaMask ?",walletConnectFailed:"  ",walletConnectError:"    ",insufficientCoins:" ",insufficientFragments:"  ",insufficientPoints:" ",insufficientEnergy:" ",purchaseSuccess:" !",purchaseFailed:" ",tradeSuccess:" !",tradeFailed:" ",createSuccess:" !",createFailed:" ",rewardReceived:" ",alreadyReceived:"  ",questNotCompleted:"  ",loginRequired:" ",copySuccess:"",saveSuccess:"",saveFailed:" ",common:"",rare:"",epic:"",legendary:"",stars:"",stats:"",exp:"",maxExp:" ",levelUp:"",levelUpCost:" ",select:"",selected:"",filter:"",sort:"",search:"",newest:"",oldest:"",byLevel:"",byStars:"",byRarity:"",byName:"",all:"",miningEfficiency:" ",huntingDamage:" ",explorationReward:" ",productionSpeed:" ",strength:"",health:"",intelligence:"",dexterity:"",courage:"",luck:"",earned:"",pointsEarned:"point !",fragmentsEarned:" ",fragmentsEarnedCount:" !",miningComplete:" !",huntingComplete:" !",explorationComplete:" !",productionComplete:" !",miningCatList:"  ",huntingCatList:"  ",explorationCatList:"  ",productionCatList:"  ",levelUp:"!",progress:"",miningProgress:" ",huntingProgress:" ",explorationProgress:" ",productionProgress:" ",miningSuccess:" !",oreFound:" !",moneyEarned:"!",digMore:" !",monsterKilled:" !",expEarned:" !",goldEarned:" !",newAreaFound:"  !",treasureFound:" !",adventureSuccess:" !",mysteriousDiscovery:" !",craftComplete:" !",itemCreated:" !",skillImproved:" !",perfectWork:" !",success:"!",good:"!",complete:"!",amazing:"!",selectCat:" ",removeCat:" ",ownedPoints:" ",ownedCoins:" ",exchangeRate:"",buyCoinAmount:"  ",sellCoinAmount:"  ",requiredPoints:" ",pointsToReceive:" ",buyButton:"",sellButton:"",exampleAmount:": 1",coinBuy:"Coin ",coinSell:"Coin ",pointUsed:" ",pointReceived:" ",inProgress:"",completed:"",receive:"",rewardReceived:"  !",earnedReward:" .",emptyInventory:"Inventory is empty",totalItems:"Total",items:"items",searchAndFilter:"Search & Filter",searchPlaceholder:"Search by NFT name or ID...",starRating:"Star Rating",levelFilter:"Level",rarityFilter:"Rarity",sortBy:"Sort By",stars:"Stars",levelHighToLow:"Level (High to Low)",starsHighToLow:"Stars (High to Low)",rarityHighToLow:"Rarity (High to Low)",nameOrder:"Name Order",reset:"Reset",apply:"Apply",stats:"Stats",imageId:"Image ID",createdAt:"Created At",levelUpButton:"Level Up",selectButton:"Select",doubleClickDetail:"Double-click for details",noNFTs:"No NFTs",createCatInFactory:"Create cats in the Factory!",selectedCharacter:"Selected Character",cat:"Cat",userSettings:" ",walletConnection:" ",connected:"",address:"",balance:"",depositFromWallet:" ",disconnect:" ",walletNotConnected:"  ",walletConnectDesc:"NFT    ",connecting:" ...",attendance:"",doAttendanceCheck:" ",selectDepositMethod:"  ",selectExchangeToDeposit:"  ",goToPhantomWallet:"  ",goToUpbitExchange:"  ",copyWalletAddressAndDeposit:"    ",copyWalletAddress:"  ",walletConnected:" !",disconnectWalletConfirm:"  ?",walletAddressCopied:"  !",copyFailed:" ",refreshBalance:" ",alreadyCheckedIn:"   !",checkInComplete:" !",wallet:"",energy100:" 100",energy500:" 500",energy1000:" 1000",energy2000:" 2000",energyRecover:"",energyRecovered:"",purchaseComplete:" !",currentEnergy:"",loginRequired:" .",insufficientPoints:" .",insufficientCoins:" .",purchaseFailed:" .  .",buy:"",back:" ",mining:"",miningLevel:" ",miningStart:" ",miningInProgress:" ...",ownedResources:" ",stone:"",iron:"",gold:"",diamond:"",hunting:"",playerInfo:" ",health:"",attack:"",exp:"",monsterSelection:" ",huntingStart:" ",huntingInProgress:" ...",exploration:"",explorationLevel:" ",explorationArea:" ",undiscovered:"",exploring:" ",explorationStart:" ",explorationInProgress:" ...",explorationRewards:" ",production:"",productionLevel:" ",materialInventory:" ",recipe:" ",productionStart:" ",productionInProgress:" ...",notification:"",markAllRead:" ",noNotifications:" .",attendance:"",attendanceCheck:"",day:"Day",attendanceComplete:" !",pointsEarned:" !",alreadyCheckedToday:"   !   .",alreadyChecked:"  .",nextOrderOnly:"   .",marketplace:"",inviteFriends:" ",inviteCode:" ",copyInviteCode:"  ",shareKakao:" ",inviteDescription:"   !",inviteReward:" ",inviteRewardDesc:" 1   100 ",newUserReward:"  : 50 ",totalInvites:" ",invites:"",codeCopied:"  !",shareSuccess:"  !",shareFailed:"  .",inviteStats:" ",shareLink:" ",copyLink:" ",linkCopied:" !",shareNative:"",myNFTs:" NFT",myListings:" ",onSale:" ",totalVolume:" ",itemsCount:"",noNFTsInWallet:"NFT ",allRarity:" ",allPrice:" ",under1000Coins:"1,000  ",midPriceRange:"1,000 - 5,000 ",over5000Coins:"5,000  ",oldest:"",priceLow:" ",priceHigh:" ",levelHigh:" ",starsHigh:"  ",price:"",buy:"",noNFTsOnSale:"  NFT ",myNFTsCount:" NFT",ownedCoins:" ",sell:"",noNFTsAvailableForSale:"  NFT ",mySalesList:"  ",salePrice:" ",cancelSale:" ",noNFTsOnSaleList:"  NFT ",confirmCancelSale:"  ?",enterValidPrice:"  .",loginRequired:" .",nftListedOnMarketplace:"NFT  !",saleCancelled:" .",insufficientCoinsForPurchase:" .",nftPurchased:"NFT !",coinsPaid:" ",sellNFT:"NFT ",starsRating:"",sellPriceLabel:"  ()",enterPrice:" ",currentOwnedCoins:"  ",cancel:"",registerSale:" ",buyNFT:"NFT ",insufficientCoinsWarning:" !",imageId:" ID",send:"",sendFeatureComingSoon:"   .",buyFeatureComingSoon:"   .",receive:"",receiveFeatureComingSoon:"   .",searchNFT:"",searchPlaceholderNFT:"NFT   ID ...",reset:"",apply:""},en:{home:"Home",game:"Game",exchange:"Exchange",quest:"Quest",inventory:"Inventory",factory:"Factory",mining:"Mining",hunting:"Hunting",exploration:"Exploration",production:"Production",back:" Back",settings:"Settings",notification:"Notification",login:"Login",signup:"Sign Up",email:"Email",password:"Password",loginButton:"Login",signupButton:"Sign Up",walletConnect:"Connect Wallet",createCat:"Create Cat",catFragments:"Cat Fragments",coin:"Coin",point:"Point",energy:"Energy",level:"Level",complete:"Complete",confirm:"Confirm",cancel:"Cancel",close:"Close",success:"Success",error:"Error",loading:"Loading...",insufficient:"Insufficient",required:"Required",optional:"Optional",daily:"Daily",weekly:"Weekly",monthly:"Monthly",quest:"Quest",reward:"Reward",receive:"Receive",received:"Received",inProgress:"In Progress",completed:"Completed",buy:"Buy",sell:"Sell",shop:"Shop",profile:"Profile",attendance:"Attendance",nft:"NFT",inventory:"Inventory",factory:"Factory",exchange:"Exchange",settings:"Settings",logout:"Logout",language:"Language",sound:"Sound",vibration:"Vibration",totalPoints:"Total Points",totalCoins:"Total Coins",createCatSuccess:"Cat Created Successfully!",newCatAdded:"A new cat has been added to your inventory!",enterEmail:"Please enter your email",enterPassword:"Please enter your password",enterAllFields:"Please enter all fields",loginError:"An error occurred during login",invalidCredentials:"Email or password is incorrect",walletNotInstalled:"MetaMask is not installed",installMetaMask:"Would you like to install MetaMask?",walletConnectFailed:"Failed to connect wallet",walletConnectError:"An error occurred while connecting wallet",insufficientCoins:"Insufficient coins",insufficientFragments:"Insufficient cat fragments",insufficientPoints:"Insufficient points",insufficientEnergy:"Insufficient energy",purchaseSuccess:"Purchase successful!",purchaseFailed:"Purchase failed",tradeSuccess:"Trade successful!",tradeFailed:"Trade failed",createSuccess:"Creation successful!",createFailed:"Creation failed",rewardReceived:"Reward received",alreadyReceived:"Reward already received",questNotCompleted:"Quest not completed",loginRequired:"Login required",copySuccess:"Copied successfully",saveSuccess:"Saved successfully",saveFailed:"Failed to save",common:"Common",rare:"Rare",epic:"Epic",legendary:"Legendary",stars:"Stars",stats:"Stats",exp:"EXP",maxExp:"Max EXP",levelUp:"Level Up",levelUpCost:"Level Up Cost",select:"Select",selected:"Selected",filter:"Filter",sort:"Sort",search:"Search",newest:"Newest",oldest:"Oldest",byLevel:"By Level",byStars:"By Stars",byRarity:"By Rarity",byName:"By Name",all:"All",miningEfficiency:"Mining Efficiency",huntingDamage:"Hunting Damage",explorationReward:"Exploration Reward",productionSpeed:"Production Speed",strength:"Strength",health:"Health",intelligence:"Intelligence",dexterity:"Dexterity",courage:"Courage",luck:"Luck",earned:"Earned",pointsEarned:"points earned!",fragmentsEarned:"Cat Fragments",fragmentsEarnedCount:"earned!",miningComplete:"Mining Complete!",huntingComplete:"Hunting Complete!",explorationComplete:"Exploration Complete!",productionComplete:"Production Complete!",miningCatList:"Mining Cats",huntingCatList:"Hunting Cats",explorationCatList:"Exploration Cats",productionCatList:"Production Cats",levelUp:"Level Up!",progress:"Progress",miningProgress:"Mining Progress",huntingProgress:"Hunting Progress",explorationProgress:"Exploration Progress",productionProgress:"Production Progress",miningSuccess:"Mining Success!",oreFound:"Ore Found!",moneyEarned:"Money Earned!",digMore:"Dig More!",monsterKilled:"Monster Killed!",expEarned:"EXP Earned!",goldEarned:"Gold Earned!",newAreaFound:"New Area Found!",treasureFound:"Treasure Found!",adventureSuccess:"Adventure Success!",mysteriousDiscovery:"Mysterious Discovery!",craftComplete:"Craft Complete!",itemCreated:"Item Created!",skillImproved:"Skill Improved!",perfectWork:"Perfect Work!",success:"Success!",good:"Good!",complete:"Complete!",amazing:"Amazing!",selectCat:"Select Cat",removeCat:"Remove Cat",ownedPoints:"Owned Points",ownedCoins:"Owned Coins",exchangeRate:"Exchange Rate",buyCoinAmount:"Amount of Coins to Buy",sellCoinAmount:"Amount of Coins to Sell",requiredPoints:"Required Points",pointsToReceive:"Points to Receive",buyButton:"Buy",sellButton:"Sell",exampleAmount:"Ex: 1",coinBuy:"Buy Coin",coinSell:"Sell Coin",pointUsed:"Points Used",pointReceived:"Points Received",inProgress:"In Progress",completed:"Completed",receive:"Claim Reward",rewardReceived:"Reward Received!",earnedReward:"earned.",emptyInventory:"Inventory is empty",totalItems:"Total",items:"items",searchAndFilter:"Search & Filter",searchPlaceholder:"Search by NFT name or ID...",starRating:"Star Rating",levelFilter:"Level",rarityFilter:"Rarity",sortBy:"Sort By",stars:"Stars",levelHighToLow:"Level (High to Low)",starsHighToLow:"Stars (High to Low)",rarityHighToLow:"Rarity (High to Low)",nameOrder:"Name Order",reset:"Reset",apply:"Apply",stats:"Stats",imageId:"Image ID",createdAt:"Created At",levelUpButton:"Level Up",selectButton:"Select",doubleClickDetail:"Double-click for details",noNFTs:"No NFTs",createCatInFactory:"Create cats in the Factory!",selectedCharacter:"Selected Character",cat:"Cat",userSettings:"User Settings",walletConnection:"Wallet Connection",connected:"Connected",address:"Address",balance:"Balance",depositFromWallet:"Deposit from Wallet",disconnect:"Disconnect",walletNotConnected:"Wallet is not connected",walletConnectDesc:"Please connect your wallet to enjoy NFT games",connecting:"Connecting...",attendance:"Attendance Check",doAttendanceCheck:"Do Attendance Check",selectDepositMethod:"Select Deposit Method",selectExchangeToDeposit:"Please select an exchange to deposit",goToPhantomWallet:"Go to Phantom Wallet",goToUpbitExchange:"Go to Upbit Exchange",copyWalletAddressAndDeposit:"Copy wallet address and deposit at exchange",copyWalletAddress:"Copy Wallet Address",walletConnected:"Wallet connected!",disconnectWalletConfirm:"Are you sure you want to disconnect your wallet?",walletAddressCopied:"Wallet address copied!",copyFailed:"Copy failed",refreshBalance:"Refresh Balance",alreadyCheckedIn:"You have already checked in today!",checkInComplete:"Check-in complete! You received",wallet:"Wallet",marketplace:"Marketplace",myNFTs:"My NFTs",myListings:"My Sales",onSale:"On Sale",totalVolume:"Total Volume",itemsCount:"items",noNFTsInWallet:"No NFTs",allRarity:"All Rarity",allPrice:"All Price",under1000Coins:"Under 1,000 Coins",midPriceRange:"1,000 - 5,000 Coins",over5000Coins:"Over 5,000 Coins",oldest:"Oldest",priceLow:"Price Low",priceHigh:"Price High",levelHigh:"Level High",starsHigh:"Stars High",price:"Price",buy:"Buy",noNFTsOnSale:"No NFTs on sale",myNFTsCount:"My NFTs",ownedCoins:"Owned Coins",sell:"Sell",noNFTsAvailableForSale:"No NFTs available for sale",mySalesList:"My Sales List",salePrice:"Sale Price",cancelSale:"Cancel Sale",noNFTsOnSaleList:"No NFTs on sale",confirmCancelSale:"Are you sure you want to cancel the sale?",enterValidPrice:"Please enter a valid price.",loginRequired:"Login required.",nftListedOnMarketplace:"NFT listed on marketplace!",saleCancelled:"Sale cancelled.",insufficientCoinsForPurchase:"Insufficient coins.",nftPurchased:"NFT purchased!",coinsPaid:"coins paid",sellNFT:"Sell NFT",starsRating:"Stars",sellPriceLabel:"Sale Price (Coins)",enterPrice:"Enter price",currentOwnedCoins:"Current Owned Coins",cancel:"Cancel",registerSale:"Register Sale",buyNFT:"Buy NFT",insufficientCoinsWarning:"Insufficient coins!",imageId:"Image ID",send:"Send",sendFeatureComingSoon:"Send feature is coming soon.",buyFeatureComingSoon:"Buy feature is coming soon.",receive:"Receive",receiveFeatureComingSoon:"Receive feature is coming soon.",searchNFT:"Search",searchPlaceholderNFT:"Search by NFT name or ID...",reset:"Reset",apply:"Apply",energy100:"Energy 100",energy500:"Energy 500",energy1000:"Energy 1000",energy2000:"Energy 2000",energyRecover:"Recovers",energyRecovered:"energy recovered",purchaseComplete:"Purchase complete!",currentEnergy:"Current",loginRequired:"Login required.",insufficientPoints:"Insufficient points.",insufficientCoins:"Insufficient coins.",purchaseFailed:"Purchase failed. Please try again.",buy:"Buy",back:" Back",mining:"Mining",miningLevel:"Mining Level",miningStart:"Start Mining",miningInProgress:"Mining...",ownedResources:"Owned Resources",stone:"Stone",iron:"Iron",gold:"Gold",diamond:"Diamond",hunting:"Hunting",playerInfo:"Player Info",health:"Health",attack:"Attack",exp:"EXP",monsterSelection:"Monster Selection",huntingStart:"Start Hunting",huntingInProgress:"Hunting...",exploration:"Exploration",explorationLevel:"Exploration Level",explorationArea:"Exploration Area",undiscovered:"Undiscovered",exploring:"Exploring",explorationStart:"Start Exploration",explorationInProgress:"Exploring...",explorationRewards:"Exploration Rewards",production:"Production",productionLevel:"Production Level",materialInventory:"Material Inventory",recipe:"Recipe",productionStart:"Start Production",productionInProgress:"Producing...",notification:"Notification",markAllRead:"Mark All Read",noNotifications:"No notifications.",attendance:"Attendance",attendanceCheck:"Attendance Check",day:"Day",attendanceComplete:"Attendance complete!",pointsEarned:"points earned!",alreadyCheckedToday:"Already checked in today! Please try again tomorrow.",alreadyChecked:"Already checked.",nextOrderOnly:"Only the next order can be checked.",inviteFriends:"Invite Friends",inviteCode:"Invite Code",copyInviteCode:"Copy Invite Code",shareKakao:"Share via KakaoTalk",inviteDescription:"Invite friends and get rewards!",inviteReward:"Invite Reward",inviteRewardDesc:"100 Points per friend invited",newUserReward:"New User Reward: 50 Points",totalInvites:"Total Invites",invites:"friends",codeCopied:"Invite code copied!",shareSuccess:"Shared via KakaoTalk successfully!",shareFailed:"Failed to share via KakaoTalk.",inviteStats:"Invite Statistics",shareLink:"Share Link",copyLink:"Copy Link",linkCopied:"Link copied!",shareNative:"Share"}}[n===""?"ko":"en"]},vx=Object.freeze(Object.defineProperty({__proto__:null,createWalletUser:A1,getAllUsers:Ji,getCurrentLanguage:_1,getCurrentUser:_t,getI18nTexts:Es,getUserByWalletAddress:Vg,logoutUser:w1,updateUserGameData:tc},Symbol.toStringTag,{value:"Module"})),Ax="6.15.0";function wx(n,e,t){const s=e.split("|").map(i=>i.trim());for(let i=0;i<s.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof n===e)return}const r=new Error(`invalid value for type ${e}`);throw r.code="INVALID_ARGUMENT",r.argument=`value.${t}`,r.value=n,r}async function ss(n){const e=Object.keys(n);return(await Promise.all(e.map(s=>Promise.resolve(n[s])))).reduce((s,r,i)=>(s[e[i]]=r,s),{})}function Me(n,e,t){for(let s in e){let r=e[s];const i=t?t[s]:null;i&&wx(r,i,s),Object.defineProperty(n,s,{enumerable:!0,value:r,writable:!1})}}function ca(n,e){if(n==null)return"null";if(e==null&&(e=new Set),typeof n=="object"){if(e.has(n))return"[Circular]";e.add(n)}if(Array.isArray(n))return"[ "+n.map(t=>ca(t,e)).join(", ")+" ]";if(n instanceof Uint8Array){const t="0123456789abcdef";let s="0x";for(let r=0;r<n.length;r++)s+=t[n[r]>>4],s+=t[n[r]&15];return s}if(typeof n=="object"&&typeof n.toJSON=="function")return ca(n.toJSON(),e);switch(typeof n){case"boolean":case"number":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"string":return JSON.stringify(n);case"object":{const t=Object.keys(n);return t.sort(),"{ "+t.map(s=>`${ca(s,e)}: ${ca(n[s],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Fn(n,e){return n&&n.code===e}function $g(n){return Fn(n,"CALL_EXCEPTION")}function $t(n,e,t){let s=n;{const i=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${ca(t)}`);for(const o in t){if(o==="shortMessage")continue;const a=t[o];i.push(o+"="+ca(a))}}i.push(`code=${e}`),i.push(`version=${Ax}`),i.length&&(n+=" ("+i.join(", ")+")")}let r;switch(e){case"INVALID_ARGUMENT":r=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":r=new RangeError(n);break;default:r=new Error(n)}return Me(r,{code:e}),t&&Object.assign(r,t),r.shortMessage==null&&Me(r,{shortMessage:s}),r}function ie(n,e,t,s){if(!n)throw $t(e,t,s)}function H(n,e,t,s){ie(n,e,"INVALID_ARGUMENT",{argument:t,value:s})}function E1(n,e,t){t==null&&(t=""),t&&(t=": "+t),ie(n>=e,"missing argument"+t,"MISSING_ARGUMENT",{count:n,expectedCount:e}),ie(n<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:n,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((n,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");n.push(e)}catch{}return n},[]);function Sc(n,e,t){if(t==null&&(t=""),n!==e){let s=t,r="new";t&&(s+=".",r+=" "+t),ie(!1,`private constructor; use ${s}from* methods`,"UNSUPPORTED_OPERATION",{operation:r})}}function b1(n,e,t){if(n instanceof Uint8Array)return t?new Uint8Array(n):n;if(typeof n=="string"&&n.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const s=new Uint8Array((n.length-2)/2);let r=2;for(let i=0;i<s.length;i++)s[i]=parseInt(n.substring(r,r+2),16),r+=2;return s}H(!1,"invalid BytesLike value",e||"value",n)}function rt(n,e){return b1(n,e,!1)}function os(n,e){return b1(n,e,!0)}function Ot(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&n.length!==2+2*e||e===!0&&n.length%2!==0)}function Hg(n){return Ot(n,!0)||n instanceof Uint8Array}const xv="0123456789abcdef";function ye(n){const e=rt(n);let t="0x";for(let s=0;s<e.length;s++){const r=e[s];t+=xv[(r&240)>>4]+xv[r&15]}return t}function nn(n){return"0x"+n.map(e=>ye(e).substring(2)).join("")}function va(n){return Ot(n,!0)?(n.length-2)/2:rt(n).length}function Xt(n,e,t){const s=rt(n);return t!=null&&t>s.length&&ie(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:s,length:s.length,offset:t}),ye(s.slice(e??0,t??s.length))}function I1(n,e,t){const s=rt(n);ie(e>=s.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(s),length:e,offset:e+1});const r=new Uint8Array(e);return r.fill(0),t?r.set(s,e-s.length):r.set(s,0),ye(r)}function Jr(n,e){return I1(n,e,!0)}function _x(n,e){return I1(n,e,!1)}const $h=BigInt(0),Ks=BigInt(1),ua=9007199254740991;function qu(n,e){const t=Hh(n,"value"),s=BigInt(tt(e,"width"));if(ie(t>>s===$h,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:n}),t>>s-Ks){const r=(Ks<<s)-Ks;return-((~t&r)+Ks)}return t}function C1(n,e){let t=Ie(n,"value");const s=BigInt(tt(e,"width")),r=Ks<<s-Ks;if(t<$h){t=-t,ie(t<=r,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});const i=(Ks<<s)-Ks;return(~t&i)+Ks}else ie(t<r,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});return t}function vo(n,e){const t=Hh(n,"value"),s=BigInt(tt(e,"bits"));return t&(Ks<<s)-Ks}function Ie(n,e){switch(typeof n){case"bigint":return n;case"number":return H(Number.isInteger(n),"underflow",e||"value",n),H(n>=-ua&&n<=ua,"overflow",e||"value",n),BigInt(n);case"string":try{if(n==="")throw new Error("empty string");return n[0]==="-"&&n[1]!=="-"?-BigInt(n.substring(1)):BigInt(n)}catch(t){H(!1,`invalid BigNumberish string: ${t.message}`,e||"value",n)}}H(!1,"invalid BigNumberish value",e||"value",n)}function Hh(n,e){const t=Ie(n,e);return ie(t>=$h,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n}),t}const kv="0123456789abcdef";function Gh(n){if(n instanceof Uint8Array){let e="0x0";for(const t of n)e+=kv[t>>4],e+=kv[t&15];return BigInt(e)}return Ie(n)}function tt(n,e){switch(typeof n){case"bigint":return H(n>=-ua&&n<=ua,"overflow",e||"value",n),Number(n);case"number":return H(Number.isInteger(n),"underflow",e||"value",n),H(n>=-ua&&n<=ua,"overflow",e||"value",n),n;case"string":try{if(n==="")throw new Error("empty string");return tt(BigInt(n),e)}catch(t){H(!1,`invalid numeric string: ${t.message}`,e||"value",n)}}H(!1,"invalid numeric value",e||"value",n)}function Ex(n){return tt(Gh(n))}function Vi(n,e){let s=Hh(n,"value").toString(16);if(e==null)s.length%2&&(s="0"+s);else{const r=tt(e,"width");for(ie(r*2>=s.length,`value exceeds width (${r} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});s.length<r*2;)s="0"+s}return"0x"+s}function _n(n){const e=Hh(n,"value");if(e===$h)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const s=new Uint8Array(t.length/2);for(let r=0;r<s.length;r++){const i=r*2;s[r]=parseInt(t.substring(i,i+2),16)}return s}function Ws(n){let e=ye(Hg(n)?n:_n(n)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const Nv="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const Dv=BigInt(58);function bx(n){const e=rt(n);let t=Gh(e),s="";for(;t;)s=Nv[Number(t%Dv)]+s,t/=Dv;for(let r=0;r<e.length&&!e[r];r++)s=Nv[0]+s;return s}function Ix(n){n=atob(n);const e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return rt(e)}function Cx(n){const e=rt(n);let t="";for(let s=0;s<e.length;s++)t+=String.fromCharCode(e[s]);return btoa(t)}class T1{filter;emitter;#e;constructor(e,t,s){this.#e=t,Me(this,{emitter:e,filter:s})}async removeListener(){this.#e!=null&&await this.emitter.off(this.filter,this.#e)}}function Tx(n,e,t,s,r){H(!1,`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function S1(n,e,t,s,r){if(n==="BAD_PREFIX"||n==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)i++;return i}return n==="OVERRUN"?t.length-e-1:0}function Sx(n,e,t,s,r){return n==="OVERLONG"?(H(typeof r=="number","invalid bad code point for replacement","badCodepoint",r),s.push(r),0):(s.push(65533),S1(n,e,t))}const Px=Object.freeze({error:Tx,ignore:S1,replace:Sx});function Rx(n,e){e==null&&(e=Px.error);const t=rt(n,"bytes"),s=[];let r=0;for(;r<t.length;){const i=t[r++];if(i>>7===0){s.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?r+=e("UNEXPECTED_CONTINUE",r-1,t,s):r+=e("BAD_PREFIX",r-1,t,s);continue}if(r-1+o>=t.length){r+=e("OVERRUN",r-1,t,s);continue}let l=i&(1<<8-o-1)-1;for(let c=0;c<o;c++){let h=t[r];if((h&192)!=128){r+=e("MISSING_CONTINUE",r,t,s),l=null;break}l=l<<6|h&63,r++}if(l!==null){if(l>1114111){r+=e("OUT_OF_RANGE",r-1-o,t,s,l);continue}if(l>=55296&&l<=57343){r+=e("UTF16_SURROGATE",r-1-o,t,s,l);continue}if(l<=a){r+=e("OVERLONG",r-1-o,t,s,l);continue}s.push(l)}}return s}function jr(n,e){H(typeof n=="string","invalid string value","str",n);let t=[];for(let s=0;s<n.length;s++){const r=n.charCodeAt(s);if(r<128)t.push(r);else if(r<2048)t.push(r>>6|192),t.push(r&63|128);else if((r&64512)==55296){s++;const i=n.charCodeAt(s);H(s<n.length&&(i&64512)===56320,"invalid surrogate pair","str",n);const o=65536+((r&1023)<<10)+(i&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(r>>12|224),t.push(r>>6&63|128),t.push(r&63|128)}return new Uint8Array(t)}function xx(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Ju(n,e){return xx(Rx(n,e))}function P1(n){async function e(t,s){ie(s==null||!s.cancelled,"request cancelled before sending","CANCELLED");const r=t.url.split(":")[0].toLowerCase();ie(r==="http"||r==="https",`unsupported protocol ${r}`,"UNSUPPORTED_OPERATION",{info:{protocol:r},operation:"request"}),ie(r==="https"||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=$t("request timeout","TIMEOUT"),o.abort()},t.timeout);s&&s.addListener(()=>{i=$t("request cancelled","CANCELLED"),o.abort()});const l=Object.assign({},n,{method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:o.signal});let c;try{c=await fetch(t.url,l)}catch(m){throw clearTimeout(a),i||m}clearTimeout(a);const h={};c.headers.forEach((m,E)=>{h[E.toLowerCase()]=m});const f=await c.arrayBuffer(),p=f==null?null:new Uint8Array(f);return{statusCode:c.status,statusMessage:c.statusText,headers:h,body:p}}return e}const kx=12,Nx=250;let Ov=P1();const Dx=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Ox=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Pf=!1;async function R1(n,e){try{const t=n.match(Dx);if(!t)throw new Error("invalid data");return new Ni(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?Ix(t[3]):Bx(t[3]))}catch{return new Ni(599,"BAD REQUEST (invalid data: URI)",{},null,new Yr(n))}}function x1(n){async function e(t,s){try{const r=t.match(Ox);if(!r)throw new Error("invalid link");return new Yr(`${n}${r[2]}`)}catch{return new Ni(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Yr(t))}}return e}const su={data:R1,ipfs:x1("https://gateway.ipfs.io/ipfs/")},k1=new WeakMap;class Lx{#e;#t;constructor(e){this.#e=[],this.#t=!1,k1.set(e,()=>{if(!this.#t){this.#t=!0;for(const t of this.#e)setTimeout(()=>{t()},0);this.#e=[]}})}addListener(e){ie(!this.#t,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#e.push(e)}get cancelled(){return this.#t}checkSignal(){ie(!this.cancelled,"cancelled","CANCELLED",{})}}function ru(n){if(n==null)throw new Error("missing signal; should not happen");return n.checkSignal(),n}class Yr{#e;#t;#n;#s;#r;#o;#i;#a;#h;#c;#p;#g;#l;#u;#d;get url(){return this.#o}set url(e){this.#o=String(e)}get body(){return this.#i==null?null:new Uint8Array(this.#i)}set body(e){if(e==null)this.#i=void 0,this.#a=void 0;else if(typeof e=="string")this.#i=jr(e),this.#a="text/plain";else if(e instanceof Uint8Array)this.#i=e,this.#a="application/octet-stream";else if(typeof e=="object")this.#i=jr(JSON.stringify(e)),this.#a="application/json";else throw new Error("invalid body")}hasBody(){return this.#i!=null}get method(){return this.#s?this.#s:this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),this.#s=String(e).toUpperCase()}get headers(){const e=Object.assign({},this.#n);return this.#h&&(e.authorization=`Basic ${Cx(jr(this.#h))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&this.#a&&(e["content-type"]=this.#a),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){this.#n[String(e).toLowerCase()]=String(t)}clearHeaders(){this.#n={}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let s=0;return{next:()=>{if(s<t.length){const r=t[s++];return{value:[r,e[r]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#h||null}setCredentials(e,t){H(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#h=`${e}:${t}`}get allowGzip(){return this.#t}set allowGzip(e){this.#t=!!e}get allowInsecureAuthentication(){return!!this.#e}set allowInsecureAuthentication(e){this.#e=!!e}get timeout(){return this.#r}set timeout(e){H(e>=0,"timeout must be non-zero","timeout",e),this.#r=e}get preflightFunc(){return this.#c||null}set preflightFunc(e){this.#c=e}get processFunc(){return this.#p||null}set processFunc(e){this.#p=e}get retryFunc(){return this.#g||null}set retryFunc(e){this.#g=e}get getUrlFunc(){return this.#d||Ov}set getUrlFunc(e){this.#d=e}constructor(e){this.#o=String(e),this.#e=!1,this.#t=!0,this.#n={},this.#s="",this.#r=3e5,this.#u={slotInterval:Nx,maxAttempts:kx},this.#d=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#i?ye(this.#i):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(this.#u.slotInterval=e.slotInterval),e.maxAttempts!=null&&(this.#u.maxAttempts=e.maxAttempts)}async#f(e,t,s,r,i){if(e>=this.#u.maxAttempts)return i.makeServerError("exceeded maximum retry limit");ie(Lv()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:r}),s>0&&await Mx(s);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in su){const h=await su[a](o.url,ru(r.#l));if(h instanceof Ni){let f=h;if(this.processFunc){ru(r.#l);try{f=await this.processFunc(o,f)}catch(p){(p.throttle==null||typeof p.stall!="number")&&f.makeServerError("error in post-processing function",p).assertOk()}}return f}o=h}this.preflightFunc&&(o=await this.preflightFunc(o));const l=await this.getUrlFunc(o,ru(r.#l));let c=new Ni(l.statusCode,l.statusMessage,l.headers,l.body,r);if(c.statusCode===301||c.statusCode===302){try{const h=c.headers.location||"";return o.redirect(h).#f(e+1,t,0,r,c)}catch{}return c}else if(c.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,c,e))){const h=c.headers["retry-after"];let f=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof h=="string"&&h.match(/^[1-9][0-9]*$/)&&(f=parseInt(h)),o.clone().#f(e+1,t,f,r,c)}if(this.processFunc){ru(r.#l);try{c=await this.processFunc(o,c)}catch(h){(h.throttle==null||typeof h.stall!="number")&&c.makeServerError("error in post-processing function",h).assertOk();let f=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return h.stall>=0&&(f=h.stall),o.clone().#f(e+1,t,f,r,c)}}return c}send(){return ie(this.#l==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#l=new Lx(this),this.#f(0,Lv()+this.timeout,0,this,new Ni(0,"",{},null,this))}cancel(){ie(this.#l!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=k1.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),s=e.split(":")[0].toLowerCase();ie(this.method==="GET"&&(t!=="https"||s!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const r=new Yr(e);return r.method="GET",r.allowGzip=this.allowGzip,r.timeout=this.timeout,r.#n=Object.assign({},this.#n),this.#i&&(r.#i=new Uint8Array(this.#i)),r.#a=this.#a,r}clone(){const e=new Yr(this.url);return e.#s=this.#s,this.#i&&(e.#i=this.#i),e.#a=this.#a,e.#n=Object.assign({},this.#n),e.#h=this.#h,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#c=this.#c,e.#p=this.#p,e.#g=this.#g,e.#u=Object.assign({},this.#u),e.#d=this.#d,e}static lockConfig(){Pf=!0}static getGateway(e){return su[e.toLowerCase()]||null}static registerGateway(e,t){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(Pf)throw new Error("gateways locked");su[e]=t}static registerGetUrl(e){if(Pf)throw new Error("gateways locked");Ov=e}static createGetUrlFunc(e){return P1(e)}static createDataGateway(){return R1}static createIpfsGatewayFunc(e){return x1(e)}}class Ni{#e;#t;#n;#s;#r;#o;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#s?ye(this.#s):"null"}>`}get statusCode(){return this.#e}get statusMessage(){return this.#t}get headers(){return Object.assign({},this.#n)}get body(){return this.#s==null?null:new Uint8Array(this.#s)}get bodyText(){try{return this.#s==null?"":Ju(this.#s)}catch{ie(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{ie(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let s=0;return{next:()=>{if(s<t.length){const r=t[s++];return{value:[r,e[r]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,t,s,r,i){this.#e=e,this.#t=t,this.#n=Object.keys(s).reduce((o,a)=>(o[a.toLowerCase()]=String(s[a]),o),{}),this.#s=r==null?null:new Uint8Array(r),this.#r=i||null,this.#o={message:""}}makeServerError(e,t){let s;e?s=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,s=`CLIENT ESCALATED SERVER ERROR (${e})`);const r=new Ni(599,s,this.headers,this.body,this.#r||void 0);return r.#o={message:e,error:t},r}throwThrottleError(e,t){t==null?t=-1:H(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const s=new Error(e||"throttling requests");throw Me(s,{stall:t,throttle:!0}),s}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return this.#s!=null}get request(){return this.#r}ok(){return this.#o.message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=this.#o;e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let s=null;this.request&&(s=this.request.url);let r=null;try{this.#s&&(r=Ju(this.#s))}catch{}ie(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:s,responseBody:r,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function Lv(){return new Date().getTime()}function Bx(n){return jr(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function Mx(n){return new Promise(e=>setTimeout(e,n))}const Fx=BigInt(-1),Qs=BigInt(0),ha=BigInt(1),Ux=BigInt(5),Zo={};let Aa="0000";for(;Aa.length<80;)Aa+=Aa;function oo(n){let e=Aa;for(;e.length<n;)e+=e;return BigInt("1"+e.substring(0,n))}function vl(n,e,t){const s=BigInt(e.width);if(e.signed){const r=ha<<s-ha;ie(t==null||n>=-r&&n<r,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n>Qs?n=qu(vo(n,s),s):n=-qu(vo(-n,s),s)}else{const r=ha<<s;ie(t==null||n>=0&&n<r,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n=(n%r+r)%r&r-ha}return n}function Rf(n){typeof n=="number"&&(n=`fixed128x${n}`);let e=!0,t=128,s=18;if(typeof n=="string"){if(n!=="fixed")if(n==="ufixed")e=!1;else{const i=n.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);H(i,"invalid fixed format","format",n),e=i[1]!=="u",t=parseInt(i[2]),s=parseInt(i[3])}}else if(n){const i=n,o=(a,l,c)=>i[a]==null?c:(H(typeof i[a]===l,"invalid fixed format ("+a+" not "+l+")","format."+a,i[a]),i[a]);e=o("signed","boolean",e),t=o("width","number",t),s=o("decimals","number",s)}H(t%8===0,"invalid FixedNumber width (not byte aligned)","format.width",t),H(s<=80,"invalid FixedNumber decimals (too large)","format.decimals",s);const r=(e?"":"u")+"fixed"+String(t)+"x"+String(s);return{signed:e,width:t,decimals:s,name:r}}function Vx(n,e){let t="";n<Qs&&(t="-",n*=Fx);let s=n.toString();if(e===0)return t+s;for(;s.length<=e;)s=Aa+s;const r=s.length-e;for(s=s.substring(0,r)+"."+s.substring(r);s[0]==="0"&&s[1]!==".";)s=s.substring(1);for(;s[s.length-1]==="0"&&s[s.length-2]!==".";)s=s.substring(0,s.length-1);return t+s}class Ii{format;#e;#t;#n;_value;constructor(e,t,s){Sc(e,Zo,"FixedNumber"),this.#t=t,this.#e=s;const r=Vx(t,s.decimals);Me(this,{format:s.name,_value:r}),this.#n=oo(s.decimals)}get signed(){return this.#e.signed}get width(){return this.#e.width}get decimals(){return this.#e.decimals}get value(){return this.#t}#s(e){H(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#r(e,t){return e=vl(e,this.#e,t),new Ii(Zo,e,this.#e)}#o(e,t){return this.#s(e),this.#r(this.#t+e.#t,t)}addUnsafe(e){return this.#o(e)}add(e){return this.#o(e,"add")}#i(e,t){return this.#s(e),this.#r(this.#t-e.#t,t)}subUnsafe(e){return this.#i(e)}sub(e){return this.#i(e,"sub")}#a(e,t){return this.#s(e),this.#r(this.#t*e.#t/this.#n,t)}mulUnsafe(e){return this.#a(e)}mul(e){return this.#a(e,"mul")}mulSignal(e){this.#s(e);const t=this.#t*e.#t;return ie(t%this.#n===Qs,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#r(t/this.#n,"mulSignal")}#h(e,t){return ie(e.#t!==Qs,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#s(e),this.#r(this.#t*this.#n/e.#t,t)}divUnsafe(e){return this.#h(e)}div(e){return this.#h(e,"div")}divSignal(e){ie(e.#t!==Qs,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#s(e);const t=this.#t*this.#n;return ie(t%e.#t===Qs,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#r(t/e.#t,"divSignal")}cmp(e){let t=this.value,s=e.value;const r=this.decimals-e.decimals;return r>0?s*=oo(r):r<0&&(t*=oo(-r)),t<s?-1:t>s?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#t;return this.#t<Qs&&(e-=this.#n-ha),e=this.#t/this.#n*this.#n,this.#r(e,"floor")}ceiling(){let e=this.#t;return this.#t>Qs&&(e+=this.#n-ha),e=this.#t/this.#n*this.#n,this.#r(e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,s=Ux*oo(t-1);let r=this.value+s;const i=oo(t);return r=r/i*i,vl(r,this.#e,"round"),new Ii(Zo,r,this.#e)}isZero(){return this.#t===Qs}isNegative(){return this.#t<Qs}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Ii.fromString(this.toString(),e)}static fromValue(e,t,s){const r=t==null?0:tt(t),i=Rf(s);let o=Ie(e,"value");const a=r-i.decimals;if(a>0){const l=oo(a);ie(o%l===Qs,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=l}else a<0&&(o*=oo(-a));return vl(o,i,"fromValue"),new Ii(Zo,o,i)}static fromString(e,t){const s=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);H(s&&s[2].length+s[3].length>0,"invalid FixedNumber string value","value",e);const r=Rf(t);let i=s[2]||"0",o=s[3]||"";for(;o.length<r.decimals;)o+=Aa;ie(o.substring(r.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,r.decimals);const a=BigInt(s[1]+i+o);return vl(a,r,"fromString"),new Ii(Zo,a,r)}static fromBytes(e,t){let s=Gh(rt(e,"value"));const r=Rf(t);return r.signed&&(s=qu(s,r.width)),vl(s,r,"fromBytes"),new Ii(Zo,s,r)}}function $x(n){let e=n.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function Bv(n,e,t){let s=0;for(let r=0;r<t;r++)s=s*256+n[e+r];return s}function Mv(n,e,t,s){const r=[];for(;t<e+1+s;){const i=N1(n,t);r.push(i.result),t+=i.consumed,ie(t<=e+1+s,"child data too short","BUFFER_OVERRUN",{buffer:n,length:s,offset:e})}return{consumed:1+s,result:r}}function N1(n,e){ie(n.length!==0,"data too short","BUFFER_OVERRUN",{buffer:n,length:0,offset:1});const t=s=>{ie(s<=n.length,"data short segment too short","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:s})};if(n[e]>=248){const s=n[e]-247;t(e+1+s);const r=Bv(n,e+1,s);return t(e+1+s+r),Mv(n,e,e+1+s,s+r)}else if(n[e]>=192){const s=n[e]-192;return t(e+1+s),Mv(n,e,e+1,s)}else if(n[e]>=184){const s=n[e]-183;t(e+1+s);const r=Bv(n,e+1,s);t(e+1+s+r);const i=ye(n.slice(e+1+s,e+1+s+r));return{consumed:1+s+r,result:i}}else if(n[e]>=128){const s=n[e]-128;t(e+1+s);const r=ye(n.slice(e+1,e+1+s));return{consumed:1+s,result:r}}return{consumed:1,result:$x(n[e])}}function Pc(n){const e=rt(n,"data"),t=N1(e,0);return H(t.consumed===e.length,"unexpected junk after rlp payload","data",n),t.result}function Fv(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function D1(n){if(Array.isArray(n)){let s=[];if(n.forEach(function(i){s=s.concat(D1(i))}),s.length<=55)return s.unshift(192+s.length),s;const r=Fv(s.length);return r.unshift(247+r.length),r.concat(s)}const e=Array.prototype.slice.call(rt(n,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=Fv(e.length);return t.unshift(183+t.length),t.concat(e)}const Uv="0123456789abcdef";function $i(n){let e="0x";for(const t of D1(n))e+=Uv[t>>4],e+=Uv[t&15];return e}function Hx(n,e){let t=18;return t=tt(e,"unit"),Ii.fromValue(n,t,{decimals:t,width:512}).toString()}function O1(n){return Hx(n,18)}const as=32,Sp=new Uint8Array(as),Gx=["then"],iu={},L1=new WeakMap;function fo(n){return L1.get(n)}function Vv(n,e){L1.set(n,e)}function Al(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);throw t.error=e,t}function Pp(n,e,t){return n.indexOf(null)>=0?e.map((s,r)=>s instanceof Vr?Pp(fo(s),s,t):s):n.reduce((s,r,i)=>{let o=e.getValue(r);return r in s||(t&&o instanceof Vr&&(o=Pp(fo(o),o,t)),s[r]=o),s},{})}class Vr extends Array{#e;constructor(...e){const t=e[0];let s=e[1],r=(e[2]||[]).slice(),i=!0;t!==iu&&(s=e,r=[],i=!1),super(s.length),s.forEach((l,c)=>{this[c]=l});const o=r.reduce((l,c)=>(typeof c=="string"&&l.set(c,(l.get(c)||0)+1),l),new Map);if(Vv(this,Object.freeze(s.map((l,c)=>{const h=r[c];return h!=null&&o.get(h)===1?h:null}))),this.#e=[],this.#e==null&&this.#e,!i)return;Object.freeze(this);const a=new Proxy(this,{get:(l,c,h)=>{if(typeof c=="string"){if(c.match(/^[0-9]+$/)){const p=tt(c,"%index");if(p<0||p>=this.length)throw new RangeError("out of result range");const m=l[p];return m instanceof Error&&Al(`index ${p}`,m),m}if(Gx.indexOf(c)>=0)return Reflect.get(l,c,h);const f=l[c];if(f instanceof Function)return function(...p){return f.apply(this===h?l:this,p)};if(!(c in l))return l.getValue.apply(this===h?l:this,[c])}return Reflect.get(l,c,h)}});return Vv(a,fo(this)),a}toArray(e){const t=[];return this.forEach((s,r)=>{s instanceof Error&&Al(`index ${r}`,s),e&&s instanceof Vr&&(s=s.toArray(e)),t.push(s)}),t}toObject(e){const t=fo(this);return t.reduce((s,r,i)=>(ie(r!=null,`value at index ${i} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),Pp(t,this,e)),{})}slice(e,t){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),t==null&&(t=this.length),t<0&&(t+=this.length,t<0&&(t=0)),t>this.length&&(t=this.length);const s=fo(this),r=[],i=[];for(let o=e;o<t;o++)r.push(this[o]),i.push(s[o]);return new Vr(iu,r,i)}filter(e,t){const s=fo(this),r=[],i=[];for(let o=0;o<this.length;o++){const a=this[o];a instanceof Error&&Al(`index ${o}`,a),e.call(t,a,o,this)&&(r.push(a),i.push(s[o]))}return new Vr(iu,r,i)}map(e,t){const s=[];for(let r=0;r<this.length;r++){const i=this[r];i instanceof Error&&Al(`index ${r}`,i),s.push(e.call(t,i,r,this))}return s}getValue(e){const t=fo(this).indexOf(e);if(t===-1)return;const s=this[t];return s instanceof Error&&Al(`property ${JSON.stringify(e)}`,s.error),s}static fromItems(e,t){return new Vr(iu,e,t)}}function $v(n){let e=_n(n);return ie(e.length<=as,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:as,offset:e.length}),e.length!==as&&(e=os(nn([Sp.slice(e.length%as),e]))),e}class ii{name;type;localName;dynamic;constructor(e,t,s,r){Me(this,{name:e,type:t,localName:s,dynamic:r},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){H(!1,e,this.localName,t)}}class Rp{#e;#t;constructor(){this.#e=[],this.#t=0}get data(){return nn(this.#e)}get length(){return this.#t}#n(e){return this.#e.push(e),this.#t+=e.length,e.length}appendWriter(e){return this.#n(os(e.data))}writeBytes(e){let t=os(e);const s=t.length%as;return s&&(t=os(nn([t,Sp.slice(s)]))),this.#n(t)}writeValue(e){return this.#n($v(e))}writeUpdatableValue(){const e=this.#e.length;return this.#e.push(Sp),this.#t+=as,t=>{this.#e[e]=$v(t)}}}class Gg{allowLoose;#e;#t;#n;#s;#r;constructor(e,t,s){Me(this,{allowLoose:!!t}),this.#e=os(e),this.#n=0,this.#s=null,this.#r=s??1024,this.#t=0}get data(){return ye(this.#e)}get dataLength(){return this.#e.length}get consumed(){return this.#t}get bytes(){return new Uint8Array(this.#e)}#o(e){if(this.#s)return this.#s.#o(e);this.#n+=e,ie(this.#r<1||this.#n<=this.#r*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#r} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:os(this.#e),offset:this.#t,length:e,info:{bytesRead:this.#n,dataLength:this.dataLength}})}#i(e,t,s){let r=Math.ceil(t/as)*as;return this.#t+r>this.#e.length&&(this.allowLoose&&s&&this.#t+t<=this.#e.length?r=t:ie(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:os(this.#e),length:this.#e.length,offset:this.#t+r})),this.#e.slice(this.#t,this.#t+r)}subReader(e){const t=new Gg(this.#e.slice(this.#t+e),this.allowLoose,this.#r);return t.#s=this,t}readBytes(e,t){let s=this.#i(0,e,!!t);return this.#o(e),this.#t+=s.length,s.slice(0,e)}readValue(){return Gh(this.readBytes(as))}readIndex(){return Ex(this.readBytes(as))}}function Yu(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function Qg(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function Qx(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Yu(n.outputLen),Yu(n.blockLen)}function ka(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function B1(n,e){Qg(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const xf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const M1=n=>n instanceof Uint8Array,jx=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),kf=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),ar=(n,e)=>n<<32-e|n>>>e,zx=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!zx)throw new Error("Non little-endian hardware is not supported");function Wx(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Qh(n){if(typeof n=="string"&&(n=Wx(n)),!M1(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function Kx(...n){const e=new Uint8Array(n.reduce((s,r)=>s+r.length,0));let t=0;return n.forEach(s=>{if(!M1(s))throw new Error("Uint8Array expected");e.set(s,t),t+=s.length}),e}class jg{clone(){return this._cloneInto()}}function zg(n){const e=s=>n().update(Qh(s)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function qx(n=32){if(xf&&typeof xf.getRandomValues=="function")return xf.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}class F1 extends jg{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Qx(e);const s=Qh(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(s.length>r?e.create().update(s).digest():s);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return ka(this),this.iHash.update(e),this}digestInto(e){ka(this),Qg(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:s,finished:r,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=s._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const U1=(n,e,t)=>new F1(n,e).update(t).digest();U1.create=(n,e)=>new F1(n,e);function Jx(n,e,t,s){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,s);const r=BigInt(32),i=BigInt(4294967295),o=Number(t>>r&i),a=Number(t&i),l=s?4:0,c=s?0:4;n.setUint32(e+l,o,s),n.setUint32(e+c,a,s)}class V1 extends jg{constructor(e,t,s,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=s,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=kf(this.buffer)}update(e){ka(this);const{view:t,buffer:s,blockLen:r}=this;e=Qh(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(r-this.pos,i-o);if(a===r){const l=kf(e);for(;r<=i-o;o+=r)this.process(l,o);continue}s.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===r&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ka(this),B1(e,this),this.finished=!0;const{buffer:t,view:s,blockLen:r,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(s,0),o=0);for(let f=o;f<r;f++)t[f]=0;Jx(s,r-8,BigInt(this.length*8),i),this.process(s,0);const a=kf(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,h=this.get();if(c>h.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<c;f++)a.setUint32(4*f,h[f],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const s=e.slice(0,t);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:s,length:r,finished:i,destroyed:o,pos:a}=this;return e.length=r,e.pos=a,e.finished=i,e.destroyed=o,r%t&&e.buffer.set(s),e}}const Yx=(n,e,t)=>n&e^~n&t,Xx=(n,e,t)=>n&e^n&t^e&t,Zx=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),gi=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),mi=new Uint32Array(64);class e2 extends V1{constructor(){super(64,32,8,!1),this.A=gi[0]|0,this.B=gi[1]|0,this.C=gi[2]|0,this.D=gi[3]|0,this.E=gi[4]|0,this.F=gi[5]|0,this.G=gi[6]|0,this.H=gi[7]|0}get(){const{A:e,B:t,C:s,D:r,E:i,F:o,G:a,H:l}=this;return[e,t,s,r,i,o,a,l]}set(e,t,s,r,i,o,a,l){this.A=e|0,this.B=t|0,this.C=s|0,this.D=r|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,t){for(let f=0;f<16;f++,t+=4)mi[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){const p=mi[f-15],m=mi[f-2],E=ar(p,7)^ar(p,18)^p>>>3,v=ar(m,17)^ar(m,19)^m>>>10;mi[f]=v+mi[f-7]+E+mi[f-16]|0}let{A:s,B:r,C:i,D:o,E:a,F:l,G:c,H:h}=this;for(let f=0;f<64;f++){const p=ar(a,6)^ar(a,11)^ar(a,25),m=h+p+Yx(a,l,c)+Zx[f]+mi[f]|0,v=(ar(s,2)^ar(s,13)^ar(s,22))+Xx(s,r,i)|0;h=c,c=l,l=a,a=o+m|0,o=i,i=r,r=s,s=m+v|0}s=s+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,h=h+this.H|0,this.set(s,r,i,o,a,l,c,h)}roundClean(){mi.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const $1=zg(()=>new e2),ou=BigInt(2**32-1),xp=BigInt(32);function H1(n,e=!1){return e?{h:Number(n&ou),l:Number(n>>xp&ou)}:{h:Number(n>>xp&ou)|0,l:Number(n&ou)|0}}function G1(n,e=!1){let t=new Uint32Array(n.length),s=new Uint32Array(n.length);for(let r=0;r<n.length;r++){const{h:i,l:o}=H1(n[r],e);[t[r],s[r]]=[i,o]}return[t,s]}const t2=(n,e)=>BigInt(n>>>0)<<xp|BigInt(e>>>0),n2=(n,e,t)=>n>>>t,s2=(n,e,t)=>n<<32-t|e>>>t,r2=(n,e,t)=>n>>>t|e<<32-t,i2=(n,e,t)=>n<<32-t|e>>>t,o2=(n,e,t)=>n<<64-t|e>>>t-32,a2=(n,e,t)=>n>>>t-32|e<<64-t,l2=(n,e)=>e,c2=(n,e)=>n,Q1=(n,e,t)=>n<<t|e>>>32-t,j1=(n,e,t)=>e<<t|n>>>32-t,z1=(n,e,t)=>e<<t-32|n>>>64-t,W1=(n,e,t)=>n<<t-32|e>>>64-t;function u2(n,e,t,s){const r=(e>>>0)+(s>>>0);return{h:n+t+(r/2**32|0)|0,l:r|0}}const h2=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),d2=(n,e,t,s)=>e+t+s+(n/2**32|0)|0,f2=(n,e,t,s)=>(n>>>0)+(e>>>0)+(t>>>0)+(s>>>0),p2=(n,e,t,s,r)=>e+t+s+r+(n/2**32|0)|0,g2=(n,e,t,s,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(s>>>0)+(r>>>0),m2=(n,e,t,s,r,i)=>e+t+s+r+i+(n/2**32|0)|0,et={fromBig:H1,split:G1,toBig:t2,shrSH:n2,shrSL:s2,rotrSH:r2,rotrSL:i2,rotrBH:o2,rotrBL:a2,rotr32H:l2,rotr32L:c2,rotlSH:Q1,rotlSL:j1,rotlBH:z1,rotlBL:W1,add:u2,add3L:h2,add3H:d2,add4L:f2,add4H:p2,add5H:m2,add5L:g2},[y2,v2]=et.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),yi=new Uint32Array(80),vi=new Uint32Array(80);class A2 extends V1{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:s,Bl:r,Ch:i,Cl:o,Dh:a,Dl:l,Eh:c,El:h,Fh:f,Fl:p,Gh:m,Gl:E,Hh:v,Hl:A}=this;return[e,t,s,r,i,o,a,l,c,h,f,p,m,E,v,A]}set(e,t,s,r,i,o,a,l,c,h,f,p,m,E,v,A){this.Ah=e|0,this.Al=t|0,this.Bh=s|0,this.Bl=r|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=h|0,this.Fh=f|0,this.Fl=p|0,this.Gh=m|0,this.Gl=E|0,this.Hh=v|0,this.Hl=A|0}process(e,t){for(let T=0;T<16;T++,t+=4)yi[T]=e.getUint32(t),vi[T]=e.getUint32(t+=4);for(let T=16;T<80;T++){const L=yi[T-15]|0,Q=vi[T-15]|0,q=et.rotrSH(L,Q,1)^et.rotrSH(L,Q,8)^et.shrSH(L,Q,7),x=et.rotrSL(L,Q,1)^et.rotrSL(L,Q,8)^et.shrSL(L,Q,7),I=yi[T-2]|0,C=vi[T-2]|0,S=et.rotrSH(I,C,19)^et.rotrBH(I,C,61)^et.shrSH(I,C,6),b=et.rotrSL(I,C,19)^et.rotrBL(I,C,61)^et.shrSL(I,C,6),N=et.add4L(x,b,vi[T-7],vi[T-16]),k=et.add4H(N,q,S,yi[T-7],yi[T-16]);yi[T]=k|0,vi[T]=N|0}let{Ah:s,Al:r,Bh:i,Bl:o,Ch:a,Cl:l,Dh:c,Dl:h,Eh:f,El:p,Fh:m,Fl:E,Gh:v,Gl:A,Hh:w,Hl:P}=this;for(let T=0;T<80;T++){const L=et.rotrSH(f,p,14)^et.rotrSH(f,p,18)^et.rotrBH(f,p,41),Q=et.rotrSL(f,p,14)^et.rotrSL(f,p,18)^et.rotrBL(f,p,41),q=f&m^~f&v,x=p&E^~p&A,I=et.add5L(P,Q,x,v2[T],vi[T]),C=et.add5H(I,w,L,q,y2[T],yi[T]),S=I|0,b=et.rotrSH(s,r,28)^et.rotrBH(s,r,34)^et.rotrBH(s,r,39),N=et.rotrSL(s,r,28)^et.rotrBL(s,r,34)^et.rotrBL(s,r,39),k=s&i^s&a^i&a,Ee=r&o^r&l^o&l;w=v|0,P=A|0,v=m|0,A=E|0,m=f|0,E=p|0,{h:f,l:p}=et.add(c|0,h|0,C|0,S|0),c=a|0,h=l|0,a=i|0,l=o|0,i=s|0,o=r|0;const ne=et.add3L(S,N,Ee);s=et.add3H(ne,C,b,k),r=ne|0}({h:s,l:r}=et.add(this.Ah|0,this.Al|0,s|0,r|0)),{h:i,l:o}=et.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l}=et.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:h}=et.add(this.Dh|0,this.Dl|0,c|0,h|0),{h:f,l:p}=et.add(this.Eh|0,this.El|0,f|0,p|0),{h:m,l:E}=et.add(this.Fh|0,this.Fl|0,m|0,E|0),{h:v,l:A}=et.add(this.Gh|0,this.Gl|0,v|0,A|0),{h:w,l:P}=et.add(this.Hh|0,this.Hl|0,w|0,P|0),this.set(s,r,i,o,a,l,c,h,f,p,m,E,v,A,w,P)}roundClean(){yi.fill(0),vi.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const w2=zg(()=>new A2);function _2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const Hv=_2();Hv.crypto||Hv.msCrypto;function E2(n){switch(n){case"sha256":return $1.create();case"sha512":return w2.create()}H(!1,"invalid hashing algorithm name","algorithm",n)}const[K1,q1,J1]=[[],[],[]],b2=BigInt(0),wl=BigInt(1),I2=BigInt(2),C2=BigInt(7),T2=BigInt(256),S2=BigInt(113);for(let n=0,e=wl,t=1,s=0;n<24;n++){[t,s]=[s,(2*t+3*s)%5],K1.push(2*(5*s+t)),q1.push((n+1)*(n+2)/2%64);let r=b2;for(let i=0;i<7;i++)e=(e<<wl^(e>>C2)*S2)%T2,e&I2&&(r^=wl<<(wl<<BigInt(i))-wl);J1.push(r)}const[P2,R2]=G1(J1,!0),Gv=(n,e,t)=>t>32?z1(n,e,t):Q1(n,e,t),Qv=(n,e,t)=>t>32?W1(n,e,t):j1(n,e,t);function x2(n,e=24){const t=new Uint32Array(10);for(let s=24-e;s<24;s++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=t[l],h=t[l+1],f=Gv(c,h,1)^t[a],p=Qv(c,h,1)^t[a+1];for(let m=0;m<50;m+=10)n[o+m]^=f,n[o+m+1]^=p}let r=n[2],i=n[3];for(let o=0;o<24;o++){const a=q1[o],l=Gv(r,i,a),c=Qv(r,i,a),h=K1[o];r=n[h],i=n[h+1],n[h]=l,n[h+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=n[o+a];for(let a=0;a<10;a++)n[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}n[0]^=P2[s],n[1]^=R2[s]}t.fill(0)}class Wg extends jg{constructor(e,t,s,r=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=s,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Yu(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=jx(this.state)}keccak(){x2(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){ka(this);const{blockLen:t,state:s}=this;e=Qh(e);const r=e.length;for(let i=0;i<r;){const o=Math.min(t-this.pos,r-i);for(let a=0;a<o;a++)s[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:s,blockLen:r}=this;e[s]^=t,(t&128)!==0&&s===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){ka(this,!1),Qg(e),this.finish();const t=this.state,{blockLen:s}=this;for(let r=0,i=e.length;r<i;){this.posOut>=s&&this.keccak();const o=Math.min(s-this.posOut,i-r);e.set(t.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Yu(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(B1(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:s,outputLen:r,rounds:i,enableXOF:o}=this;return e||(e=new Wg(t,s,r,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=s,e.outputLen=r,e.enableXOF=o,e.destroyed=this.destroyed,e}}const k2=(n,e,t)=>zg(()=>new Wg(e,n,t)),N2=k2(1,136,256/8);let Y1=!1;const X1=function(n){return N2(n)};let Z1=X1;function gn(n){const e=rt(n,"data");return ye(Z1(e))}gn._=X1;gn.lock=function(){Y1=!0};gn.register=function(n){if(Y1)throw new TypeError("keccak256 is locked");Z1=n};Object.freeze(gn);const eE=function(n){return E2("sha256").update(n).digest()};let tE=eE,nE=!1;function Wa(n){const e=rt(n,"data");return ye(tE(e))}Wa._=eE;Wa.lock=function(){nE=!0};Wa.register=function(n){if(nE)throw new Error("sha256 is locked");tE=n};Object.freeze(Wa);Object.freeze(Wa);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const sE=BigInt(0),jh=BigInt(1),D2=BigInt(2),zh=n=>n instanceof Uint8Array,O2=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Na(n){if(!zh(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=O2[n[t]];return e}function rE(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function Kg(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function Da(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let s=0;s<t.length;s++){const r=s*2,i=n.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[s]=o}return t}function Co(n){return Kg(Na(n))}function qg(n){if(!zh(n))throw new Error("Uint8Array expected");return Kg(Na(Uint8Array.from(n).reverse()))}function Oa(n,e){return Da(n.toString(16).padStart(e*2,"0"))}function Jg(n,e){return Oa(n,e).reverse()}function L2(n){return Da(rE(n))}function js(n,e,t){let s;if(typeof e=="string")try{s=Da(e)}catch(i){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${i}`)}else if(zh(e))s=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const r=s.length;if(typeof t=="number"&&r!==t)throw new Error(`${n} expected ${t} bytes, got ${r}`);return s}function nc(...n){const e=new Uint8Array(n.reduce((s,r)=>s+r.length,0));let t=0;return n.forEach(s=>{if(!zh(s))throw new Error("Uint8Array expected");e.set(s,t),t+=s.length}),e}function B2(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function M2(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function F2(n){let e;for(e=0;n>sE;n>>=jh,e+=1);return e}function U2(n,e){return n>>BigInt(e)&jh}const V2=(n,e,t)=>n|(t?jh:sE)<<BigInt(e),Yg=n=>(D2<<BigInt(n-1))-jh,Nf=n=>new Uint8Array(n),jv=n=>Uint8Array.from(n);function iE(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let s=Nf(n),r=Nf(n),i=0;const o=()=>{s.fill(1),r.fill(0),i=0},a=(...f)=>t(r,s,...f),l=(f=Nf())=>{r=a(jv([0]),f),s=a(),f.length!==0&&(r=a(jv([1]),f),s=a())},c=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){s=a();const m=s.slice();p.push(m),f+=s.length}return nc(...p)};return(f,p)=>{o(),l(f);let m;for(;!(m=p(c()));)l();return o(),m}}const $2={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Rc(n,e,t={}){const s=(r,i,o)=>{const a=$2[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const l=n[r];if(!(o&&l===void 0)&&!a(l,n))throw new Error(`Invalid param ${String(r)}=${l} (${typeof l}), expected ${i}`)};for(const[r,i]of Object.entries(e))s(r,i,!1);for(const[r,i]of Object.entries(t))s(r,i,!0);return n}const H2=Object.freeze(Object.defineProperty({__proto__:null,bitGet:U2,bitLen:F2,bitMask:Yg,bitSet:V2,bytesToHex:Na,bytesToNumberBE:Co,bytesToNumberLE:qg,concatBytes:nc,createHmacDrbg:iE,ensureBytes:js,equalBytes:B2,hexToBytes:Da,hexToNumber:Kg,numberToBytesBE:Oa,numberToBytesLE:Jg,numberToHexUnpadded:rE,numberToVarBytesBE:L2,utf8ToBytes:M2,validateObject:Rc},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kn=BigInt(0),an=BigInt(1),po=BigInt(2),G2=BigInt(3),kp=BigInt(4),zv=BigInt(5),Wv=BigInt(8);BigInt(9);BigInt(16);function vs(n,e){const t=n%e;return t>=kn?t:e+t}function Q2(n,e,t){if(t<=kn||e<kn)throw new Error("Expected power/modulo > 0");if(t===an)return kn;let s=an;for(;e>kn;)e&an&&(s=s*n%t),n=n*n%t,e>>=an;return s}function Os(n,e,t){let s=n;for(;e-- >kn;)s*=s,s%=t;return s}function Np(n,e){if(n===kn||e<=kn)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=vs(n,e),s=e,r=kn,i=an;for(;t!==kn;){const a=s/t,l=s%t,c=r-i*a;s=t,t=l,r=i,i=c}if(s!==an)throw new Error("invert: does not exist");return vs(r,e)}function j2(n){const e=(n-an)/po;let t,s,r;for(t=n-an,s=0;t%po===kn;t/=po,s++);for(r=po;r<n&&Q2(r,e,n)!==n-an;r++);if(s===1){const o=(n+an)/kp;return function(l,c){const h=l.pow(c,o);if(!l.eql(l.sqr(h),c))throw new Error("Cannot find square root");return h}}const i=(t+an)/po;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=s,h=a.pow(a.mul(a.ONE,r),t),f=a.pow(l,i),p=a.pow(l,t);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let m=1;for(let v=a.sqr(p);m<c&&!a.eql(v,a.ONE);m++)v=a.sqr(v);const E=a.pow(h,an<<BigInt(c-m-1));h=a.sqr(E),f=a.mul(f,E),p=a.mul(p,h),c=m}return f}}function z2(n){if(n%kp===G2){const e=(n+an)/kp;return function(s,r){const i=s.pow(r,e);if(!s.eql(s.sqr(i),r))throw new Error("Cannot find square root");return i}}if(n%Wv===zv){const e=(n-zv)/Wv;return function(s,r){const i=s.mul(r,po),o=s.pow(i,e),a=s.mul(r,o),l=s.mul(s.mul(a,po),o),c=s.mul(a,s.sub(l,s.ONE));if(!s.eql(s.sqr(c),r))throw new Error("Cannot find square root");return c}}return j2(n)}const W2=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function K2(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=W2.reduce((s,r)=>(s[r]="function",s),e);return Rc(n,t)}function q2(n,e,t){if(t<kn)throw new Error("Expected power > 0");if(t===kn)return n.ONE;if(t===an)return e;let s=n.ONE,r=e;for(;t>kn;)t&an&&(s=n.mul(s,r)),r=n.sqr(r),t>>=an;return s}function J2(n,e){const t=new Array(e.length),s=e.reduce((i,o,a)=>n.is0(o)?i:(t[a]=i,n.mul(i,o)),n.ONE),r=n.inv(s);return e.reduceRight((i,o,a)=>n.is0(o)?i:(t[a]=n.mul(i,t[a]),n.mul(i,o)),r),t}function oE(n,e){const t=e!==void 0?e:n.toString(2).length,s=Math.ceil(t/8);return{nBitLength:t,nByteLength:s}}function Y2(n,e,t=!1,s={}){if(n<=kn)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:r,nByteLength:i}=oE(n,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=z2(n),a=Object.freeze({ORDER:n,BITS:r,BYTES:i,MASK:Yg(r),ZERO:kn,ONE:an,create:l=>vs(l,n),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return kn<=l&&l<n},is0:l=>l===kn,isOdd:l=>(l&an)===an,neg:l=>vs(-l,n),eql:(l,c)=>l===c,sqr:l=>vs(l*l,n),add:(l,c)=>vs(l+c,n),sub:(l,c)=>vs(l-c,n),mul:(l,c)=>vs(l*c,n),pow:(l,c)=>q2(a,l,c),div:(l,c)=>vs(l*Np(c,n),n),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>Np(l,n),sqrt:s.sqrt||(l=>o(a,l)),invertBatch:l=>J2(a,l),cmov:(l,c,h)=>h?c:l,toBytes:l=>t?Jg(l,i):Oa(l,i),fromBytes:l=>{if(l.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${l.length}`);return t?qg(l):Co(l)}});return Object.freeze(a)}function aE(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function lE(n){const e=aE(n);return e+Math.ceil(e/2)}function X2(n,e,t=!1){const s=n.length,r=aE(e),i=lE(e);if(s<16||s<i||s>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${s}`);const o=t?Co(n):qg(n),a=vs(o,e-an)+an;return t?Jg(a,r):Oa(a,r)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Z2=BigInt(0),Df=BigInt(1);function ek(n,e){const t=(r,i)=>{const o=i.negate();return r?o:i},s=r=>{const i=Math.ceil(e/r)+1,o=2**(r-1);return{windows:i,windowSize:o}};return{constTimeNegate:t,unsafeLadder(r,i){let o=n.ZERO,a=r;for(;i>Z2;)i&Df&&(o=o.add(a)),a=a.double(),i>>=Df;return o},precomputeWindow(r,i){const{windows:o,windowSize:a}=s(i),l=[];let c=r,h=c;for(let f=0;f<o;f++){h=c,l.push(h);for(let p=1;p<a;p++)h=h.add(c),l.push(h);c=h.double()}return l},wNAF(r,i,o){const{windows:a,windowSize:l}=s(r);let c=n.ZERO,h=n.BASE;const f=BigInt(2**r-1),p=2**r,m=BigInt(r);for(let E=0;E<a;E++){const v=E*l;let A=Number(o&f);o>>=m,A>l&&(A-=p,o+=Df);const w=v,P=v+Math.abs(A)-1,T=E%2!==0,L=A<0;A===0?h=h.add(t(T,i[w])):c=c.add(t(L,i[P]))}return{p:c,f:h}},wNAFCached(r,i,o,a){const l=r._WINDOW_SIZE||1;let c=i.get(r);return c||(c=this.precomputeWindow(r,l),l!==1&&i.set(r,a(c))),this.wNAF(l,c,o)}}}function cE(n){return K2(n.Fp),Rc(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...oE(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function tk(n){const e=cE(n);Rc(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:s,a:r}=e;if(t){if(!s.eql(r,s.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:nk,hexToBytes:sk}=H2,Ao={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=Ao;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],s=n.subarray(2,t+2);if(!t||s.length!==t)throw new e("Invalid signature integer: wrong length");if(s[0]&128)throw new e("Invalid signature integer: negative");if(s[0]===0&&!(s[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:nk(s),l:n.subarray(t+2)}},toSig(n){const{Err:e}=Ao,t=typeof n=="string"?sk(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let s=t.length;if(s<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==s-2)throw new e("Invalid signature: incorrect length");const{d:r,l:i}=Ao._parseInt(t.subarray(2)),{d:o,l:a}=Ao._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r,s:o}},hexFromSig(n){const e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,t=c=>{const h=c.toString(16);return h.length&1?`0${h}`:h},s=e(t(n.s)),r=e(t(n.r)),i=s.length/2,o=r.length/2,a=t(i),l=t(o);return`30${t(o+i+4)}02${l}${r}02${a}${s}`}},Br=BigInt(0),Ls=BigInt(1);BigInt(2);const Kv=BigInt(3);BigInt(4);function rk(n){const e=tk(n),{Fp:t}=e,s=e.toBytes||((E,v,A)=>{const w=v.toAffine();return nc(Uint8Array.from([4]),t.toBytes(w.x),t.toBytes(w.y))}),r=e.fromBytes||(E=>{const v=E.subarray(1),A=t.fromBytes(v.subarray(0,t.BYTES)),w=t.fromBytes(v.subarray(t.BYTES,2*t.BYTES));return{x:A,y:w}});function i(E){const{a:v,b:A}=e,w=t.sqr(E),P=t.mul(w,E);return t.add(t.add(P,t.mul(E,v)),A)}if(!t.eql(t.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(E){return typeof E=="bigint"&&Br<E&&E<e.n}function a(E){if(!o(E))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(E){const{allowedPrivateKeyLengths:v,nByteLength:A,wrapPrivateKey:w,n:P}=e;if(v&&typeof E!="bigint"){if(E instanceof Uint8Array&&(E=Na(E)),typeof E!="string"||!v.includes(E.length))throw new Error("Invalid key");E=E.padStart(A*2,"0")}let T;try{T=typeof E=="bigint"?E:Co(js("private key",E,A))}catch{throw new Error(`private key must be ${A} bytes, hex or bigint, not ${typeof E}`)}return w&&(T=vs(T,P)),a(T),T}const c=new Map;function h(E){if(!(E instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(v,A,w){if(this.px=v,this.py=A,this.pz=w,v==null||!t.isValid(v))throw new Error("x required");if(A==null||!t.isValid(A))throw new Error("y required");if(w==null||!t.isValid(w))throw new Error("z required")}static fromAffine(v){const{x:A,y:w}=v||{};if(!v||!t.isValid(A)||!t.isValid(w))throw new Error("invalid affine point");if(v instanceof f)throw new Error("projective point not allowed");const P=T=>t.eql(T,t.ZERO);return P(A)&&P(w)?f.ZERO:new f(A,w,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){const A=t.invertBatch(v.map(w=>w.pz));return v.map((w,P)=>w.toAffine(A[P])).map(f.fromAffine)}static fromHex(v){const A=f.fromAffine(r(js("pointHex",v)));return A.assertValidity(),A}static fromPrivateKey(v){return f.BASE.multiply(l(v))}_setWindowSize(v){this._WINDOW_SIZE=v,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:v,y:A}=this.toAffine();if(!t.isValid(v)||!t.isValid(A))throw new Error("bad point: x or y not FE");const w=t.sqr(A),P=i(v);if(!t.eql(w,P))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:v}=this.toAffine();if(t.isOdd)return!t.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){h(v);const{px:A,py:w,pz:P}=this,{px:T,py:L,pz:Q}=v,q=t.eql(t.mul(A,Q),t.mul(T,P)),x=t.eql(t.mul(w,Q),t.mul(L,P));return q&&x}negate(){return new f(this.px,t.neg(this.py),this.pz)}double(){const{a:v,b:A}=e,w=t.mul(A,Kv),{px:P,py:T,pz:L}=this;let Q=t.ZERO,q=t.ZERO,x=t.ZERO,I=t.mul(P,P),C=t.mul(T,T),S=t.mul(L,L),b=t.mul(P,T);return b=t.add(b,b),x=t.mul(P,L),x=t.add(x,x),Q=t.mul(v,x),q=t.mul(w,S),q=t.add(Q,q),Q=t.sub(C,q),q=t.add(C,q),q=t.mul(Q,q),Q=t.mul(b,Q),x=t.mul(w,x),S=t.mul(v,S),b=t.sub(I,S),b=t.mul(v,b),b=t.add(b,x),x=t.add(I,I),I=t.add(x,I),I=t.add(I,S),I=t.mul(I,b),q=t.add(q,I),S=t.mul(T,L),S=t.add(S,S),I=t.mul(S,b),Q=t.sub(Q,I),x=t.mul(S,C),x=t.add(x,x),x=t.add(x,x),new f(Q,q,x)}add(v){h(v);const{px:A,py:w,pz:P}=this,{px:T,py:L,pz:Q}=v;let q=t.ZERO,x=t.ZERO,I=t.ZERO;const C=e.a,S=t.mul(e.b,Kv);let b=t.mul(A,T),N=t.mul(w,L),k=t.mul(P,Q),Ee=t.add(A,w),ne=t.add(T,L);Ee=t.mul(Ee,ne),ne=t.add(b,N),Ee=t.sub(Ee,ne),ne=t.add(A,P);let V=t.add(T,Q);return ne=t.mul(ne,V),V=t.add(b,k),ne=t.sub(ne,V),V=t.add(w,P),q=t.add(L,Q),V=t.mul(V,q),q=t.add(N,k),V=t.sub(V,q),I=t.mul(C,ne),q=t.mul(S,k),I=t.add(q,I),q=t.sub(N,I),I=t.add(N,I),x=t.mul(q,I),N=t.add(b,b),N=t.add(N,b),k=t.mul(C,k),ne=t.mul(S,ne),N=t.add(N,k),k=t.sub(b,k),k=t.mul(C,k),ne=t.add(ne,k),b=t.mul(N,ne),x=t.add(x,b),b=t.mul(V,ne),q=t.mul(Ee,q),q=t.sub(q,b),b=t.mul(Ee,N),I=t.mul(V,I),I=t.add(I,b),new f(q,x,I)}subtract(v){return this.add(v.negate())}is0(){return this.equals(f.ZERO)}wNAF(v){return m.wNAFCached(this,c,v,A=>{const w=t.invertBatch(A.map(P=>P.pz));return A.map((P,T)=>P.toAffine(w[T])).map(f.fromAffine)})}multiplyUnsafe(v){const A=f.ZERO;if(v===Br)return A;if(a(v),v===Ls)return this;const{endo:w}=e;if(!w)return m.unsafeLadder(this,v);let{k1neg:P,k1:T,k2neg:L,k2:Q}=w.splitScalar(v),q=A,x=A,I=this;for(;T>Br||Q>Br;)T&Ls&&(q=q.add(I)),Q&Ls&&(x=x.add(I)),I=I.double(),T>>=Ls,Q>>=Ls;return P&&(q=q.negate()),L&&(x=x.negate()),x=new f(t.mul(x.px,w.beta),x.py,x.pz),q.add(x)}multiply(v){a(v);let A=v,w,P;const{endo:T}=e;if(T){const{k1neg:L,k1:Q,k2neg:q,k2:x}=T.splitScalar(A);let{p:I,f:C}=this.wNAF(Q),{p:S,f:b}=this.wNAF(x);I=m.constTimeNegate(L,I),S=m.constTimeNegate(q,S),S=new f(t.mul(S.px,T.beta),S.py,S.pz),w=I.add(S),P=C.add(b)}else{const{p:L,f:Q}=this.wNAF(A);w=L,P=Q}return f.normalizeZ([w,P])[0]}multiplyAndAddUnsafe(v,A,w){const P=f.BASE,T=(Q,q)=>q===Br||q===Ls||!Q.equals(P)?Q.multiplyUnsafe(q):Q.multiply(q),L=T(this,A).add(T(v,w));return L.is0()?void 0:L}toAffine(v){const{px:A,py:w,pz:P}=this,T=this.is0();v==null&&(v=T?t.ONE:t.inv(P));const L=t.mul(A,v),Q=t.mul(w,v),q=t.mul(P,v);if(T)return{x:t.ZERO,y:t.ZERO};if(!t.eql(q,t.ONE))throw new Error("invZ was invalid");return{x:L,y:Q}}isTorsionFree(){const{h:v,isTorsionFree:A}=e;if(v===Ls)return!0;if(A)return A(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:v,clearCofactor:A}=e;return v===Ls?this:A?A(f,this):this.multiplyUnsafe(e.h)}toRawBytes(v=!0){return this.assertValidity(),s(f,this,v)}toHex(v=!0){return Na(this.toRawBytes(v))}}f.BASE=new f(e.Gx,e.Gy,t.ONE),f.ZERO=new f(t.ZERO,t.ONE,t.ZERO);const p=e.nBitLength,m=ek(f,e.endo?Math.ceil(p/2):p);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:l,weierstrassEquation:i,isWithinCurveOrder:o}}function ik(n){const e=cE(n);return Rc(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function ok(n){const e=ik(n),{Fp:t,n:s}=e,r=t.BYTES+1,i=2*t.BYTES+1;function o(ne){return Br<ne&&ne<t.ORDER}function a(ne){return vs(ne,s)}function l(ne){return Np(ne,s)}const{ProjectivePoint:c,normPrivateKeyToScalar:h,weierstrassEquation:f,isWithinCurveOrder:p}=rk({...e,toBytes(ne,V,O){const K=V.toAffine(),de=t.toBytes(K.x),Ue=nc;return O?Ue(Uint8Array.from([V.hasEvenY()?2:3]),de):Ue(Uint8Array.from([4]),de,t.toBytes(K.y))},fromBytes(ne){const V=ne.length,O=ne[0],K=ne.subarray(1);if(V===r&&(O===2||O===3)){const de=Co(K);if(!o(de))throw new Error("Point is not on curve");const Ue=f(de);let Te=t.sqrt(Ue);const Ve=(Te&Ls)===Ls;return(O&1)===1!==Ve&&(Te=t.neg(Te)),{x:de,y:Te}}else if(V===i&&O===4){const de=t.fromBytes(K.subarray(0,t.BYTES)),Ue=t.fromBytes(K.subarray(t.BYTES,2*t.BYTES));return{x:de,y:Ue}}else throw new Error(`Point of length ${V} was invalid. Expected ${r} compressed bytes or ${i} uncompressed bytes`)}}),m=ne=>Na(Oa(ne,e.nByteLength));function E(ne){const V=s>>Ls;return ne>V}function v(ne){return E(ne)?a(-ne):ne}const A=(ne,V,O)=>Co(ne.slice(V,O));class w{constructor(V,O,K){this.r=V,this.s=O,this.recovery=K,this.assertValidity()}static fromCompact(V){const O=e.nByteLength;return V=js("compactSignature",V,O*2),new w(A(V,0,O),A(V,O,2*O))}static fromDER(V){const{r:O,s:K}=Ao.toSig(js("DER",V));return new w(O,K)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(V){return new w(this.r,this.s,V)}recoverPublicKey(V){const{r:O,s:K,recovery:de}=this,Ue=x(js("msgHash",V));if(de==null||![0,1,2,3].includes(de))throw new Error("recovery id invalid");const Te=de===2||de===3?O+e.n:O;if(Te>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ve=(de&1)===0?"02":"03",ze=c.fromHex(Ve+m(Te)),ft=l(Te),pt=a(-Ue*ft),yt=a(K*ft),Z=c.BASE.multiplyAndAddUnsafe(ze,pt,yt);if(!Z)throw new Error("point at infinify");return Z.assertValidity(),Z}hasHighS(){return E(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Da(this.toDERHex())}toDERHex(){return Ao.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Da(this.toCompactHex())}toCompactHex(){return m(this.r)+m(this.s)}}const P={isValidPrivateKey(ne){try{return h(ne),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const ne=lE(e.n);return X2(e.randomBytes(ne),e.n)},precompute(ne=8,V=c.BASE){return V._setWindowSize(ne),V.multiply(BigInt(3)),V}};function T(ne,V=!0){return c.fromPrivateKey(ne).toRawBytes(V)}function L(ne){const V=ne instanceof Uint8Array,O=typeof ne=="string",K=(V||O)&&ne.length;return V?K===r||K===i:O?K===2*r||K===2*i:ne instanceof c}function Q(ne,V,O=!0){if(L(ne))throw new Error("first arg must be private key");if(!L(V))throw new Error("second arg must be public key");return c.fromHex(V).multiply(h(ne)).toRawBytes(O)}const q=e.bits2int||function(ne){const V=Co(ne),O=ne.length*8-e.nBitLength;return O>0?V>>BigInt(O):V},x=e.bits2int_modN||function(ne){return a(q(ne))},I=Yg(e.nBitLength);function C(ne){if(typeof ne!="bigint")throw new Error("bigint expected");if(!(Br<=ne&&ne<I))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Oa(ne,e.nByteLength)}function S(ne,V,O=b){if(["recovered","canonical"].some(ce=>ce in O))throw new Error("sign() legacy options not supported");const{hash:K,randomBytes:de}=e;let{lowS:Ue,prehash:Te,extraEntropy:Ve}=O;Ue==null&&(Ue=!0),ne=js("msgHash",ne),Te&&(ne=js("prehashed msgHash",K(ne)));const ze=x(ne),ft=h(V),pt=[C(ft),C(ze)];if(Ve!=null){const ce=Ve===!0?de(t.BYTES):Ve;pt.push(js("extraEntropy",ce))}const yt=nc(...pt),Z=ze;function pe(ce){const ve=q(ce);if(!p(ve))return;const Qe=l(ve),D=c.BASE.multiply(ve).toAffine(),B=a(D.x);if(B===Br)return;const G=a(Qe*a(Z+B*ft));if(G===Br)return;let te=(D.x===B?0:2)|Number(D.y&Ls),z=G;return Ue&&E(G)&&(z=v(G),te^=1),new w(B,z,te)}return{seed:yt,k2sig:pe}}const b={lowS:e.lowS,prehash:!1},N={lowS:e.lowS,prehash:!1};function k(ne,V,O=b){const{seed:K,k2sig:de}=S(ne,V,O),Ue=e;return iE(Ue.hash.outputLen,Ue.nByteLength,Ue.hmac)(K,de)}c.BASE._setWindowSize(8);function Ee(ne,V,O,K=N){const de=ne;if(V=js("msgHash",V),O=js("publicKey",O),"strict"in K)throw new Error("options.strict was renamed to lowS");const{lowS:Ue,prehash:Te}=K;let Ve,ze;try{if(typeof de=="string"||de instanceof Uint8Array)try{Ve=w.fromDER(de)}catch(D){if(!(D instanceof Ao.Err))throw D;Ve=w.fromCompact(de)}else if(typeof de=="object"&&typeof de.r=="bigint"&&typeof de.s=="bigint"){const{r:D,s:B}=de;Ve=new w(D,B)}else throw new Error("PARSE");ze=c.fromHex(O)}catch(D){if(D.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Ue&&Ve.hasHighS())return!1;Te&&(V=e.hash(V));const{r:ft,s:pt}=Ve,yt=x(V),Z=l(pt),pe=a(yt*Z),ce=a(ft*Z),ve=c.BASE.multiplyAndAddUnsafe(ze,pe,ce)?.toAffine();return ve?a(ve.x)===ft:!1}return{CURVE:e,getPublicKey:T,getSharedSecret:Q,sign:k,verify:Ee,ProjectivePoint:c,Signature:w,utils:P}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ak(n){return{hash:n,hmac:(e,...t)=>U1(n,e,Kx(...t)),randomBytes:qx}}function lk(n,e){const t=s=>ok({...n,...ak(s)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const uE=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),qv=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ck=BigInt(1),Dp=BigInt(2),Jv=(n,e)=>(n+e/Dp)/e;function uk(n){const e=uE,t=BigInt(3),s=BigInt(6),r=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=n*n*n%e,h=c*c*n%e,f=Os(h,t,e)*h%e,p=Os(f,t,e)*h%e,m=Os(p,Dp,e)*c%e,E=Os(m,r,e)*m%e,v=Os(E,i,e)*E%e,A=Os(v,a,e)*v%e,w=Os(A,l,e)*A%e,P=Os(w,a,e)*v%e,T=Os(P,t,e)*h%e,L=Os(T,o,e)*E%e,Q=Os(L,s,e)*c%e,q=Os(Q,Dp,e);if(!Op.eql(Op.sqr(q),n))throw new Error("Cannot find square root");return q}const Op=Y2(uE,void 0,void 0,{sqrt:uk}),wi=lk({a:BigInt(0),b:BigInt(7),Fp:Op,n:qv,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=qv,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),s=-ck*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,o=BigInt("0x100000000000000000000000000000000"),a=Jv(i*n,e),l=Jv(-s*n,e);let c=vs(n-a*t-l*r,e),h=vs(-a*s-l*i,e);const f=c>o,p=h>o;if(f&&(c=e-c),p&&(h=e-h),c>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:f,k1:c,k2neg:p,k2:h}}}},$1);BigInt(0);wi.ProjectivePoint;const sc="0x0000000000000000000000000000000000000000",Yv="0x0000000000000000000000000000000000000000000000000000000000000000",Xv=BigInt(0),Zv=BigInt(1),e0=BigInt(2),t0=BigInt(27),n0=BigInt(28),au=BigInt(35),ea={};function s0(n){return Jr(_n(n),32)}class Zt{#e;#t;#n;#s;get r(){return this.#e}set r(e){H(va(e)===32,"invalid r","value",e),this.#e=ye(e)}get s(){return H(parseInt(this.#t.substring(0,3))<8,"non-canonical s; use ._s","s",this.#t),this.#t}set s(e){H(va(e)===32,"invalid s","value",e),this.#t=ye(e)}get _s(){return this.#t}isValid(){return parseInt(this.#t.substring(0,3))<8}get v(){return this.#n}set v(e){const t=tt(e,"value");H(t===27||t===28,"invalid v","v",e),this.#n=t}get networkV(){return this.#s}get legacyChainId(){const e=this.networkV;return e==null?null:Zt.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=rt(this.s);return this.yParity&&(e[0]|=128),ye(e)}get compactSerialized(){return nn([this.r,this.yParityAndS])}get serialized(){return nn([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,s,r){Sc(e,ea,"Signature"),this.#e=t,this.#t=s,this.#n=r,this.#s=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Zt(ea,this.r,this._s,this.v);return this.networkV&&(e.#s=this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const t=Ie(e,"v");return t==t0||t==n0?Xv:(H(t>=au,"invalid EIP-155 v","v",e),(t-au)/e0)}static getChainIdV(e,t){return Ie(e)*e0+BigInt(35+t-27)}static getNormalizedV(e){const t=Ie(e);return t===Xv||t===t0?27:t===Zv||t===n0?28:(H(t>=au,"invalid v","v",e),t&Zv?27:28)}static from(e){function t(c,h){H(c,h,"signature",e)}if(e==null)return new Zt(ea,Yv,Yv,27);if(typeof e=="string"){const c=rt(e,"signature");if(c.length===64){const h=ye(c.slice(0,32)),f=c.slice(32,64),p=f[0]&128?28:27;return f[0]&=127,new Zt(ea,h,ye(f),p)}if(c.length===65){const h=ye(c.slice(0,32)),f=ye(c.slice(32,64)),p=Zt.getNormalizedV(c[64]);return new Zt(ea,h,f,p)}t(!1,"invalid raw signature length")}if(e instanceof Zt)return e.clone();const s=e.r;t(s!=null,"missing r");const r=s0(s),i=(function(c,h){if(c!=null)return s0(c);if(h!=null){t(Ot(h,32),"invalid yParityAndS");const f=rt(h);return f[0]&=127,ye(f)}t(!1,"missing s")})(e.s,e.yParityAndS),{networkV:o,v:a}=(function(c,h,f){if(c!=null){const p=Ie(c);return{networkV:p>=au?p:void 0,v:Zt.getNormalizedV(p)}}if(h!=null)return t(Ot(h,32),"invalid yParityAndS"),{v:rt(h)[0]&128?28:27};if(f!=null){switch(tt(f,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),l=new Zt(ea,r,i,a);return o&&(l.#s=o),t(e.yParity==null||tt(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}}class Mr{#e;constructor(e){H(va(e)===32,"invalid private key","privateKey","[REDACTED]"),this.#e=ye(e)}get privateKey(){return this.#e}get publicKey(){return Mr.computePublicKey(this.#e)}get compressedPublicKey(){return Mr.computePublicKey(this.#e,!0)}sign(e){H(va(e)===32,"invalid digest length","digest",e);const t=wi.sign(os(e),os(this.#e),{lowS:!0});return Zt.from({r:Vi(t.r,32),s:Vi(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=Mr.computePublicKey(e);return ye(wi.getSharedSecret(os(this.#e),rt(t),!1))}static computePublicKey(e,t){let s=rt(e,"key");if(s.length===32){const i=wi.getPublicKey(s,!!t);return ye(i)}if(s.length===64){const i=new Uint8Array(65);i[0]=4,i.set(s,1),s=i}const r=wi.ProjectivePoint.fromHex(s);return ye(r.toRawBytes(t))}static recoverPublicKey(e,t){H(va(e)===32,"invalid digest length","digest",e);const s=Zt.from(t);let r=wi.Signature.fromCompact(os(nn([s.r,s.s])));r=r.addRecoveryBit(s.yParity);const i=r.recoverPublicKey(os(e));return H(i!=null,"invalid signature for digest","signature",t),"0x"+i.toHex(!1)}static addPoints(e,t,s){const r=wi.ProjectivePoint.fromHex(Mr.computePublicKey(e).substring(2)),i=wi.ProjectivePoint.fromHex(Mr.computePublicKey(t).substring(2));return"0x"+r.add(i).toHex(!!s)}}const hk=BigInt(0),dk=BigInt(36);function r0(n){n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let r=0;r<40;r++)t[r]=e[r].charCodeAt(0);const s=rt(gn(t));for(let r=0;r<40;r+=2)s[r>>1]>>4>=8&&(e[r]=e[r].toUpperCase()),(s[r>>1]&15)>=8&&(e[r+1]=e[r+1].toUpperCase());return"0x"+e.join("")}const Xg={};for(let n=0;n<10;n++)Xg[String(n)]=String(n);for(let n=0;n<26;n++)Xg[String.fromCharCode(65+n)]=String(10+n);const i0=15;function fk(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(s=>Xg[s]).join("");for(;e.length>=i0;){let s=e.substring(0,i0);e=parseInt(s,10)%97+e.substring(s.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const pk=(function(){const n={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];n[t]=BigInt(e)}return n})();function gk(n){n=n.toLowerCase();let e=hk;for(let t=0;t<n.length;t++)e=e*dk+pk[n[t]];return e}function Et(n){if(H(typeof n=="string","invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/)){n.startsWith("0x")||(n="0x"+n);const e=r0(n);return H(!n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===n,"bad address checksum","address",n),e}if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){H(n.substring(2,4)===fk(n),"bad icap checksum","address",n);let e=gk(n.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return r0("0x"+e)}H(!1,"invalid address","address",n)}function mk(n){const e=Et(n.from);let s=Ie(n.nonce,"tx.nonce").toString(16);return s==="0"?s="0x":s.length%2?s="0x0"+s:s="0x"+s,Et(Xt(gn($i([e,s])),12))}function hE(n){return n&&typeof n.getAddress=="function"}async function Of(n,e){const t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(ie(typeof n!="string","unconfigured name","UNCONFIGURED_NAME",{value:n}),H(!1,"invalid AddressLike value; did not resolve to a value address","target",n)),Et(t)}function ls(n,e){if(typeof n=="string")return n.match(/^0x[0-9a-f]{40}$/i)?Et(n):(ie(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Of(n,e.resolveName(n)));if(hE(n))return Of(n,n.getAddress());if(n&&typeof n.then=="function")return Of(n,n);H(!1,"unsupported addressable value","target",n)}const xr={};function be(n,e){let t=!1;return e<0&&(t=!0,e*=-1),new en(xr,`${t?"":"u"}int${e}`,n,{signed:t,width:e})}function mt(n,e){return new en(xr,`bytes${e||""}`,n,{size:e})}const o0=Symbol.for("_ethers_typed");class en{type;value;#e;_typedSymbol;constructor(e,t,s,r){r==null&&(r=null),Sc(xr,e,"Typed"),Me(this,{_typedSymbol:o0,type:t,value:s}),this.#e=r,this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return this.#e}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return this.#e===!0?-1:this.#e===!1?this.value.length:null}static from(e,t){return new en(xr,e,t)}static uint8(e){return be(e,8)}static uint16(e){return be(e,16)}static uint24(e){return be(e,24)}static uint32(e){return be(e,32)}static uint40(e){return be(e,40)}static uint48(e){return be(e,48)}static uint56(e){return be(e,56)}static uint64(e){return be(e,64)}static uint72(e){return be(e,72)}static uint80(e){return be(e,80)}static uint88(e){return be(e,88)}static uint96(e){return be(e,96)}static uint104(e){return be(e,104)}static uint112(e){return be(e,112)}static uint120(e){return be(e,120)}static uint128(e){return be(e,128)}static uint136(e){return be(e,136)}static uint144(e){return be(e,144)}static uint152(e){return be(e,152)}static uint160(e){return be(e,160)}static uint168(e){return be(e,168)}static uint176(e){return be(e,176)}static uint184(e){return be(e,184)}static uint192(e){return be(e,192)}static uint200(e){return be(e,200)}static uint208(e){return be(e,208)}static uint216(e){return be(e,216)}static uint224(e){return be(e,224)}static uint232(e){return be(e,232)}static uint240(e){return be(e,240)}static uint248(e){return be(e,248)}static uint256(e){return be(e,256)}static uint(e){return be(e,256)}static int8(e){return be(e,-8)}static int16(e){return be(e,-16)}static int24(e){return be(e,-24)}static int32(e){return be(e,-32)}static int40(e){return be(e,-40)}static int48(e){return be(e,-48)}static int56(e){return be(e,-56)}static int64(e){return be(e,-64)}static int72(e){return be(e,-72)}static int80(e){return be(e,-80)}static int88(e){return be(e,-88)}static int96(e){return be(e,-96)}static int104(e){return be(e,-104)}static int112(e){return be(e,-112)}static int120(e){return be(e,-120)}static int128(e){return be(e,-128)}static int136(e){return be(e,-136)}static int144(e){return be(e,-144)}static int152(e){return be(e,-152)}static int160(e){return be(e,-160)}static int168(e){return be(e,-168)}static int176(e){return be(e,-176)}static int184(e){return be(e,-184)}static int192(e){return be(e,-192)}static int200(e){return be(e,-200)}static int208(e){return be(e,-208)}static int216(e){return be(e,-216)}static int224(e){return be(e,-224)}static int232(e){return be(e,-232)}static int240(e){return be(e,-240)}static int248(e){return be(e,-248)}static int256(e){return be(e,-256)}static int(e){return be(e,-256)}static bytes1(e){return mt(e,1)}static bytes2(e){return mt(e,2)}static bytes3(e){return mt(e,3)}static bytes4(e){return mt(e,4)}static bytes5(e){return mt(e,5)}static bytes6(e){return mt(e,6)}static bytes7(e){return mt(e,7)}static bytes8(e){return mt(e,8)}static bytes9(e){return mt(e,9)}static bytes10(e){return mt(e,10)}static bytes11(e){return mt(e,11)}static bytes12(e){return mt(e,12)}static bytes13(e){return mt(e,13)}static bytes14(e){return mt(e,14)}static bytes15(e){return mt(e,15)}static bytes16(e){return mt(e,16)}static bytes17(e){return mt(e,17)}static bytes18(e){return mt(e,18)}static bytes19(e){return mt(e,19)}static bytes20(e){return mt(e,20)}static bytes21(e){return mt(e,21)}static bytes22(e){return mt(e,22)}static bytes23(e){return mt(e,23)}static bytes24(e){return mt(e,24)}static bytes25(e){return mt(e,25)}static bytes26(e){return mt(e,26)}static bytes27(e){return mt(e,27)}static bytes28(e){return mt(e,28)}static bytes29(e){return mt(e,29)}static bytes30(e){return mt(e,30)}static bytes31(e){return mt(e,31)}static bytes32(e){return mt(e,32)}static address(e){return new en(xr,"address",e)}static bool(e){return new en(xr,"bool",!!e)}static bytes(e){return new en(xr,"bytes",e)}static string(e){return new en(xr,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new en(xr,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===o0}static dereference(e,t){if(en.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}}class yk extends ii{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let s=en.dereference(t,"string");try{s=Et(s)}catch(r){return this._throwError(r.message,t)}return e.writeValue(s)}decode(e){return Et(Vi(e.readValue(),20))}}class vk extends ii{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function dE(n,e,t){let s=[];if(Array.isArray(t))s=t;else if(t&&typeof t=="object"){let l={};s=e.map(c=>{const h=c.localName;return ie(h,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:t}),ie(!l[h],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:t}),l[h]=!0,t[h]})}else H(!1,"invalid tuple value","tuple",t);H(e.length===s.length,"types/value length mismatch","tuple",t);let r=new Rp,i=new Rp,o=[];e.forEach((l,c)=>{let h=s[c];if(l.dynamic){let f=i.length;l.encode(i,h);let p=r.writeUpdatableValue();o.push(m=>{p(m+f)})}else l.encode(r,h)}),o.forEach(l=>{l(r.length)});let a=n.appendWriter(r);return a+=n.appendWriter(i),a}function fE(n,e){let t=[],s=[],r=n.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=n.readIndex(),l=r.subReader(a);try{o=i.decode(l)}catch(c){if(Fn(c,"BUFFER_OVERRUN"))throw c;o=c,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(n)}catch(a){if(Fn(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");t.push(o),s.push(i.localName||null)}),Vr.fromItems(t,s)}class Ak extends ii{coder;length;constructor(e,t,s){const r=e.type+"["+(t>=0?t:"")+"]",i=t===-1||e.dynamic;super("array",r,s,i),Me(this,{coder:e,length:t})}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let s=0;s<this.length;s++)t.push(e);return t}encode(e,t){const s=en.dereference(t,"array");Array.isArray(s)||this._throwError("expected array value",s);let r=this.length;r===-1&&(r=s.length,e.writeValue(s.length)),E1(s.length,r,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let o=0;o<s.length;o++)i.push(this.coder);return dE(e,i,s)}decode(e){let t=this.length;t===-1&&(t=e.readIndex(),ie(t*as<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*as,length:e.dataLength}));let s=[];for(let r=0;r<t;r++)s.push(new vk(this.coder));return fE(e,s)}}class wk extends ii{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const s=en.dereference(t,"bool");return e.writeValue(s?1:0)}decode(e){return!!e.readValue()}}class pE extends ii{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=os(t);let s=e.writeValue(t.length);return s+=e.writeBytes(t),s}decode(e){return e.readBytes(e.readIndex(),!0)}}class _k extends pE{constructor(e){super("bytes",e)}decode(e){return ye(super.decode(e))}}class Ek extends ii{size;constructor(e,t){let s="bytes"+String(e);super(s,s,t,!1),Me(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let s=os(en.dereference(t,this.type));return s.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(s)}decode(e){return ye(e.readBytes(this.size))}}const bk=new Uint8Array([]);class Ik extends ii{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(bk)}decode(e){return e.readBytes(0),null}}const Ck=BigInt(0),Tk=BigInt(1),Sk=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Pk extends ii{size;signed;constructor(e,t,s){const r=(t?"int":"uint")+e*8;super(r,r,s,!1),Me(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let s=Ie(en.dereference(t,this.type)),r=vo(Sk,as*8);if(this.signed){let i=vo(r,this.size*8-1);(s>i||s<-(i+Tk))&&this._throwError("value out-of-bounds",t),s=C1(s,8*as)}else(s<Ck||s>vo(r,this.size*8))&&this._throwError("value out-of-bounds",t);return e.writeValue(s)}decode(e){let t=vo(e.readValue(),this.size*8);return this.signed&&(t=qu(t,this.size*8)),t}}class Rk extends pE{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,jr(en.dereference(t,"string")))}decode(e){return Ju(super.decode(e))}}class lu extends ii{coders;constructor(e,t){let s=!1;const r=[];e.forEach(o=>{o.dynamic&&(s=!0),r.push(o.type)});const i="tuple("+r.join(",")+")";super("tuple",i,t,s),Me(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(s=>{e.push(s.defaultValue())});const t=this.coders.reduce((s,r)=>{const i=r.localName;return i&&(s[i]||(s[i]=0),s[i]++),s},{});return this.coders.forEach((s,r)=>{let i=s.localName;!i||t[i]!==1||(i==="length"&&(i="_length"),e[i]==null&&(e[i]=e[r]))}),Object.freeze(e)}encode(e,t){const s=en.dereference(t,"tuple");return dE(e,this.coders,s)}decode(e){return fE(e,this.coders)}}function Lf(n,e){return{address:Et(n),storageKeys:e.map((t,s)=>(H(Ot(t,32),"invalid slot",`storageKeys[${s}]`,t),t.toLowerCase()))}}function Uo(n){if(Array.isArray(n))return n.map((t,s)=>Array.isArray(t)?(H(t.length===2,"invalid slot set",`value[${s}]`,t),Lf(t[0],t[1])):(H(t!=null&&typeof t=="object","invalid address-slot set","value",n),Lf(t.address,t.storageKeys)));H(n!=null&&typeof n=="object","invalid access list","value",n);const e=Object.keys(n).map(t=>{const s=n[t].reduce((r,i)=>(r[i]=!0,r),{});return Lf(t,Object.keys(s).sort())});return e.sort((t,s)=>t.address.localeCompare(s.address)),e}function gE(n){return{address:Et(n.address),nonce:Ie(n.nonce!=null?n.nonce:0),chainId:Ie(n.chainId!=null?n.chainId:0),signature:Zt.from(n.signature)}}function xk(n){let e;return typeof n=="string"?e=Mr.computePublicKey(n,!1):e=n.publicKey,Et(gn("0x"+e.substring(4)).substring(26))}function kk(n,e){return xk(Mr.recoverPublicKey(n,e))}const xn=BigInt(0),Nk=BigInt(2),Dk=BigInt(27),Ok=BigInt(28),Lk=BigInt(35),Bk=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Bf=4096*32;function Mk(n){return{blobToKzgCommitment:s=>{if("computeBlobProof"in n){if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return rt(n.blobToKzgCommitment(ye(s)))}else if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return rt(n.blobToKzgCommitment(s));if("blobToKZGCommitment"in n&&typeof n.blobToKZGCommitment=="function")return rt(n.blobToKZGCommitment(ye(s)));H(!1,"unsupported KZG library","kzg",n)},computeBlobKzgProof:(s,r)=>{if("computeBlobProof"in n&&typeof n.computeBlobProof=="function")return rt(n.computeBlobProof(ye(s),ye(r)));if("computeBlobKzgProof"in n&&typeof n.computeBlobKzgProof=="function")return n.computeBlobKzgProof(s,r);if("computeBlobKZGProof"in n&&typeof n.computeBlobKZGProof=="function")return rt(n.computeBlobKZGProof(ye(s),ye(r)));H(!1,"unsupported KZG library","kzg",n)}}}function a0(n,e){let t=n.toString(16);for(;t.length<2;)t="0"+t;return t+=Wa(e).substring(4),"0x"+t}function Ka(n){return n==="0x"?null:Et(n)}function Wh(n,e){try{return Uo(n)}catch(t){H(!1,t.message,e,n)}}function Fk(n,e){try{if(!Array.isArray(n))throw new Error("authorizationList: invalid array");const t=[];for(let s=0;s<n.length;s++){const r=n[s];if(!Array.isArray(r))throw new Error(`authorization[${s}]: invalid array`);if(r.length!==6)throw new Error(`authorization[${s}]: wrong length`);if(!r[1])throw new Error(`authorization[${s}]: null address`);t.push({address:Ka(r[1]),nonce:St(r[2],"nonce"),chainId:St(r[0],"chainId"),signature:Zt.from({yParity:Vo(r[3],"yParity"),r:Jr(r[4],32),s:Jr(r[5],32)})})}return t}catch(t){H(!1,t.message,e,n)}}function Vo(n,e){return n==="0x"?0:tt(n,e)}function St(n,e){if(n==="0x")return xn;const t=Ie(n,e);return H(t<=Bk,"value exceeds uint size",e,t),t}function ut(n,e){const t=Ie(n,"value"),s=_n(t);return H(s.length<=32,"value too large",`tx.${e}`,t),s}function Kh(n){return Uo(n).map(e=>[e.address,e.storageKeys])}function Uk(n){return n.map(e=>[ut(e.chainId,"chainId"),e.address,ut(e.nonce,"nonce"),ut(e.signature.yParity,"yParity"),_n(e.signature.r),_n(e.signature.s)])}function Vk(n,e){H(Array.isArray(n),`invalid ${e}`,"value",n);for(let t=0;t<n.length;t++)H(Ot(n[t],32),"invalid ${ param } hash",`value[${t}]`,n[t]);return n}function $k(n){const e=Pc(n);H(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",n);const t={type:0,nonce:Vo(e[0],"nonce"),gasPrice:St(e[1],"gasPrice"),gasLimit:St(e[2],"gasLimit"),to:Ka(e[3]),value:St(e[4],"value"),data:ye(e[5]),chainId:xn};if(e.length===6)return t;const s=St(e[6],"v"),r=St(e[7],"r"),i=St(e[8],"s");if(r===xn&&i===xn)t.chainId=s;else{let o=(s-Lk)/Nk;o<xn&&(o=xn),t.chainId=o,H(o!==xn||s===Dk||s===Ok,"non-canonical legacy v","v",e[6]),t.signature=Zt.from({r:Jr(e[7],32),s:Jr(e[8],32),v:s})}return t}function Hk(n,e){const t=[ut(n.nonce,"nonce"),ut(n.gasPrice||0,"gasPrice"),ut(n.gasLimit,"gasLimit"),n.to||"0x",ut(n.value,"value"),n.data];let s=xn;if(n.chainId!=xn)s=Ie(n.chainId,"tx.chainId"),H(!e||e.networkV==null||e.legacyChainId===s,"tx.chainId/sig.v mismatch","sig",e);else if(n.signature){const i=n.signature.legacyChainId;i!=null&&(s=i)}if(!e)return s!==xn&&(t.push(_n(s)),t.push("0x"),t.push("0x")),$i(t);let r=BigInt(27+e.yParity);return s!==xn?r=Zt.getChainIdV(s,e.v):BigInt(e.v)!==r&&H(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(_n(r)),t.push(_n(e.r)),t.push(_n(e.s)),$i(t)}function qh(n,e){let t;try{if(t=Vo(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{H(!1,"invalid yParity","yParity",e[0])}const s=Jr(e[1],32),r=Jr(e[2],32),i=Zt.from({r:s,s:r,yParity:t});n.signature=i}function Gk(n){const e=Pc(rt(n).slice(1));H(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",ye(n));const t={type:2,chainId:St(e[0],"chainId"),nonce:Vo(e[1],"nonce"),maxPriorityFeePerGas:St(e[2],"maxPriorityFeePerGas"),maxFeePerGas:St(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:St(e[4],"gasLimit"),to:Ka(e[5]),value:St(e[6],"value"),data:ye(e[7]),accessList:Wh(e[8],"accessList")};return e.length===9||qh(t,e.slice(9)),t}function Qk(n,e){const t=[ut(n.chainId,"chainId"),ut(n.nonce,"nonce"),ut(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ut(n.maxFeePerGas||0,"maxFeePerGas"),ut(n.gasLimit,"gasLimit"),n.to||"0x",ut(n.value,"value"),n.data,Kh(n.accessList||[])];return e&&(t.push(ut(e.yParity,"yParity")),t.push(_n(e.r)),t.push(_n(e.s))),nn(["0x02",$i(t)])}function jk(n){const e=Pc(rt(n).slice(1));H(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",ye(n));const t={type:1,chainId:St(e[0],"chainId"),nonce:Vo(e[1],"nonce"),gasPrice:St(e[2],"gasPrice"),gasLimit:St(e[3],"gasLimit"),to:Ka(e[4]),value:St(e[5],"value"),data:ye(e[6]),accessList:Wh(e[7],"accessList")};return e.length===8||qh(t,e.slice(8)),t}function zk(n,e){const t=[ut(n.chainId,"chainId"),ut(n.nonce,"nonce"),ut(n.gasPrice||0,"gasPrice"),ut(n.gasLimit,"gasLimit"),n.to||"0x",ut(n.value,"value"),n.data,Kh(n.accessList||[])];return e&&(t.push(ut(e.yParity,"recoveryParam")),t.push(_n(e.r)),t.push(_n(e.s))),nn(["0x01",$i(t)])}function Wk(n){let e=Pc(rt(n).slice(1)),t="3",s=null;if(e.length===4&&Array.isArray(e[0])){t="3 (network format)";const i=e[1],o=e[2],a=e[3];H(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),H(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),H(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),H(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),H(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),s=[];for(let l=0;l<e[1].length;l++)s.push({data:i[l],commitment:o[l],proof:a[l]});e=e[0]}H(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${t}`,"data",ye(n));const r={type:3,chainId:St(e[0],"chainId"),nonce:Vo(e[1],"nonce"),maxPriorityFeePerGas:St(e[2],"maxPriorityFeePerGas"),maxFeePerGas:St(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:St(e[4],"gasLimit"),to:Ka(e[5]),value:St(e[6],"value"),data:ye(e[7]),accessList:Wh(e[8],"accessList"),maxFeePerBlobGas:St(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};s&&(r.blobs=s),H(r.to!=null,`invalid address for transaction type: ${t}`,"data",n),H(Array.isArray(r.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",n);for(let i=0;i<r.blobVersionedHashes.length;i++)H(Ot(r.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",n);return e.length===11||qh(r,e.slice(11)),r}function Kk(n,e,t){const s=[ut(n.chainId,"chainId"),ut(n.nonce,"nonce"),ut(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ut(n.maxFeePerGas||0,"maxFeePerGas"),ut(n.gasLimit,"gasLimit"),n.to||sc,ut(n.value,"value"),n.data,Kh(n.accessList||[]),ut(n.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Vk(n.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(s.push(ut(e.yParity,"yParity")),s.push(_n(e.r)),s.push(_n(e.s)),t)?nn(["0x03",$i([s,t.map(r=>r.data),t.map(r=>r.commitment),t.map(r=>r.proof)])]):nn(["0x03",$i(s)])}function qk(n){const e=Pc(rt(n).slice(1));H(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",ye(n));const t={type:4,chainId:St(e[0],"chainId"),nonce:Vo(e[1],"nonce"),maxPriorityFeePerGas:St(e[2],"maxPriorityFeePerGas"),maxFeePerGas:St(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:St(e[4],"gasLimit"),to:Ka(e[5]),value:St(e[6],"value"),data:ye(e[7]),accessList:Wh(e[8],"accessList"),authorizationList:Fk(e[9],"authorizationList")};return e.length===10||qh(t,e.slice(10)),t}function Jk(n,e){const t=[ut(n.chainId,"chainId"),ut(n.nonce,"nonce"),ut(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ut(n.maxFeePerGas||0,"maxFeePerGas"),ut(n.gasLimit,"gasLimit"),n.to||"0x",ut(n.value,"value"),n.data,Kh(n.accessList||[]),Uk(n.authorizationList||[])];return e&&(t.push(ut(e.yParity,"yParity")),t.push(_n(e.r)),t.push(_n(e.s))),nn(["0x04",$i(t)])}class zs{#e;#t;#n;#s;#r;#o;#i;#a;#h;#c;#p;#g;#l;#u;#d;#f;#y;get type(){return this.#e}set type(e){switch(e){case null:this.#e=null;break;case 0:case"legacy":this.#e=0;break;case 1:case"berlin":case"eip-2930":this.#e=1;break;case 2:case"london":case"eip-1559":this.#e=2;break;case 3:case"cancun":case"eip-4844":this.#e=3;break;case 4:case"pectra":case"eip-7702":this.#e=4;break;default:H(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=this.#t;return e==null&&this.type===3?sc:e}set to(e){this.#t=e==null?null:Et(e)}get nonce(){return this.#s}set nonce(e){this.#s=tt(e,"value")}get gasLimit(){return this.#r}set gasLimit(e){this.#r=Ie(e)}get gasPrice(){const e=this.#o;return e==null&&(this.type===0||this.type===1)?xn:e}set gasPrice(e){this.#o=e==null?null:Ie(e,"gasPrice")}get maxPriorityFeePerGas(){const e=this.#i;return e??(this.type===2||this.type===3?xn:null)}set maxPriorityFeePerGas(e){this.#i=e==null?null:Ie(e,"maxPriorityFeePerGas")}get maxFeePerGas(){const e=this.#a;return e??(this.type===2||this.type===3?xn:null)}set maxFeePerGas(e){this.#a=e==null?null:Ie(e,"maxFeePerGas")}get data(){return this.#n}set data(e){this.#n=ye(e)}get value(){return this.#h}set value(e){this.#h=Ie(e,"value")}get chainId(){return this.#c}set chainId(e){this.#c=Ie(e)}get signature(){return this.#p||null}set signature(e){this.#p=e==null?null:Zt.from(e)}get accessList(){const e=this.#g||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){this.#g=e==null?null:Uo(e)}get authorizationList(){const e=this.#y||null;return e==null&&this.type===4?[]:e}set authorizationList(e){this.#y=e==null?null:e.map(t=>gE(t))}get maxFeePerBlobGas(){const e=this.#l;return e==null&&this.type===3?xn:e}set maxFeePerBlobGas(e){this.#l=e==null?null:Ie(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#u;return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){H(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)H(Ot(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}this.#u=e}get blobs(){return this.#f==null?null:this.#f.map(e=>Object.assign({},e))}set blobs(e){if(e==null){this.#f=null;return}const t=[],s=[];for(let r=0;r<e.length;r++){const i=e[r];if(Hg(i)){ie(this.#d,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=rt(i);if(H(o.length<=Bf,"blob is too large",`blobs[${r}]`,i),o.length!==Bf){const c=new Uint8Array(Bf);c.set(o),o=c}const a=this.#d.blobToKzgCommitment(o),l=ye(this.#d.computeBlobKzgProof(o,a));t.push({data:ye(o),commitment:ye(a),proof:l}),s.push(a0(1,a))}else{const o=ye(i.commitment);t.push({data:ye(i.data),commitment:o,proof:ye(i.proof)}),s.push(a0(1,o))}}this.#f=t,this.#u=s}get kzg(){return this.#d}set kzg(e){e==null?this.#d=null:this.#d=Mk(e)}constructor(){this.#e=null,this.#t=null,this.#s=0,this.#r=xn,this.#o=null,this.#i=null,this.#a=null,this.#n="0x",this.#h=xn,this.#c=xn,this.#p=null,this.#g=null,this.#l=null,this.#u=null,this.#d=null,this.#f=null,this.#y=null}get hash(){return this.signature==null?null:gn(this.#m(!0,!1))}get unsignedHash(){return gn(this.unsignedSerialized)}get from(){return this.signature==null?null:kk(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:Mr.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}#m(e,t){ie(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const s=e?this.signature:null;switch(this.inferType()){case 0:return Hk(this,s);case 1:return zk(this,s);case 2:return Qk(this,s);case 3:return Kk(this,s,t?this.blobs:null);case 4:return Jk(this,s)}ie(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#m(!0,!0)}get unsignedSerialized(){return this.#m(!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,s=this.accessList!=null,r=this.#l!=null||this.#u;this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&ie(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),ie(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),ie(this.type!==0||!s,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):t?i.push(2):e?(i.push(1),s||i.push(0)):s?(i.push(1),i.push(2)):(r&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return zs.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new zs;if(typeof e=="string"){const s=rt(e);if(s[0]>=127)return zs.from($k(s));switch(s[0]){case 1:return zs.from(jk(s));case 2:return zs.from(Gk(s));case 3:return zs.from(Wk(s));case 4:return zs.from(qk(s))}ie(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new zs;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=Zt.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.authorizationList!=null&&(t.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(H(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),H(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(H(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),H(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}}function xo(n){return gn(jr(n))}var Yk="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";const l0=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),c0=4;function Xk(n){let e=0;function t(){return n[e++]<<8|n[e++]}let s=t(),r=1,i=[0,1];for(let Q=1;Q<s;Q++)i.push(r+=t());let o=t(),a=e;e+=o;let l=0,c=0;function h(){return l==0&&(c=c<<8|n[e++],l=8),c>>--l&1}const f=31,p=2**f,m=p>>>1,E=m>>1,v=p-1;let A=0;for(let Q=0;Q<f;Q++)A=A<<1|h();let w=[],P=0,T=p;for(;;){let Q=Math.floor(((A-P+1)*r-1)/T),q=0,x=s;for(;x-q>1;){let S=q+x>>>1;Q<i[S]?x=S:q=S}if(q==0)break;w.push(q);let I=P+Math.floor(T*i[q]/r),C=P+Math.floor(T*i[q+1]/r)-1;for(;((I^C)&m)==0;)A=A<<1&v|h(),I=I<<1&v,C=C<<1&v|1;for(;I&~C&E;)A=A&m|A<<1&v>>>1|h(),I=I<<1^m,C=(C^m)<<1|m|1;P=I,T=1+C-I}let L=s-4;return w.map(Q=>{switch(Q-L){case 3:return L+65792+(n[a++]<<16|n[a++]<<8|n[a++]);case 2:return L+256+(n[a++]<<8|n[a++]);case 1:return L+n[a++];default:return Q-1}})}function Zk(n){let e=0;return()=>n[e++]}function mE(n){return Zk(Xk(eN(n)))}function eN(n){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((r,i)=>e[r.charCodeAt(0)]=i);let t=n.length,s=new Uint8Array(6*t>>3);for(let r=0,i=0,o=0,a=0;r<t;r++)a=a<<6|e[n.charCodeAt(r)],o+=6,o>=8&&(s[i++]=a>>(o-=8));return s}function tN(n){return n&1?~n>>1:n>>1}function nN(n,e){let t=Array(n);for(let s=0,r=0;s<n;s++)t[s]=r+=tN(e());return t}function rc(n,e=0){let t=[];for(;;){let s=n(),r=n();if(!r)break;e+=s;for(let i=0;i<r;i++)t.push(e+i);e+=r+1}return t}function yE(n){return ic(()=>{let e=rc(n);if(e.length)return e})}function vE(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(sN(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(rN(t,n))}return e.flat()}function ic(n){let e=[];for(;;){let t=n(e.length);if(!t)break;e.push(t)}return e}function AE(n,e,t){let s=Array(n).fill().map(()=>[]);for(let r=0;r<e;r++)nN(n,t).forEach((i,o)=>s[o].push(i));return s}function sN(n,e){let t=1+e(),s=e(),r=ic(e);return AE(r.length,1+n,e).flatMap((o,a)=>{let[l,...c]=o;return Array(r[a]).fill().map((h,f)=>{let p=f*s;return[l+f*t,c.map(m=>m+p)]})})}function rN(n,e){let t=1+e();return AE(t,1+n,e).map(r=>[r[0],r.slice(1)])}function iN(n){let e=[],t=rc(n);return r(s([]),[]),e;function s(i){let o=n(),a=ic(()=>{let l=rc(n).map(c=>t[c]);if(l.length)return s(l)});return{S:o,B:a,Q:i}}function r({S:i,B:o},a,l){if(!(i&4&&l===a[a.length-1])){i&2&&(l=a[a.length-1]),i&1&&e.push(a);for(let c of o)for(let h of c.Q)r(c,[...a,h],l)}}}function oN(n){return n.toString(16).toUpperCase().padStart(2,"0")}function wE(n){return`{${oN(n)}}`}function aN(n){let e=[];for(let t=0,s=n.length;t<s;){let r=n.codePointAt(t);t+=r<65536?1:2,e.push(r)}return e}function La(n){let t=n.length;if(t<4096)return String.fromCodePoint(...n);let s=[];for(let r=0;r<t;)s.push(String.fromCodePoint(...n.slice(r,r+=4096)));return s.join("")}function lN(n,e){let t=n.length,s=t-e.length;for(let r=0;s==0&&r<t;r++)s=n[r]-e[r];return s}var cN="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";const oc=44032,Xu=4352,Zu=4449,eh=4519,_E=19,EE=21,Ba=28,th=EE*Ba,uN=_E*th,hN=oc+uN,dN=Xu+_E,fN=Zu+EE,pN=eh+Ba;function El(n){return n>>24&255}function bE(n){return n&16777215}let Lp,u0,Bp,Iu;function gN(){let n=mE(cN);Lp=new Map(yE(n).flatMap((e,t)=>e.map(s=>[s,t+1<<24]))),u0=new Set(rc(n)),Bp=new Map,Iu=new Map;for(let[e,t]of vE(n)){if(!u0.has(e)&&t.length==2){let[s,r]=t,i=Iu.get(s);i||(i=new Map,Iu.set(s,i)),i.set(r,e)}Bp.set(e,t.reverse())}}function IE(n){return n>=oc&&n<hN}function mN(n,e){if(n>=Xu&&n<dN&&e>=Zu&&e<fN)return oc+(n-Xu)*th+(e-Zu)*Ba;if(IE(n)&&e>eh&&e<pN&&(n-oc)%Ba==0)return n+(e-eh);{let t=Iu.get(n);return t&&(t=t.get(e),t)?t:-1}}function CE(n){Lp||gN();let e=[],t=[],s=!1;function r(i){let o=Lp.get(i);o&&(s=!0,i|=o),e.push(i)}for(let i of n)for(;;){if(i<128)e.push(i);else if(IE(i)){let o=i-oc,a=o/th|0,l=o%th/Ba|0,c=o%Ba;r(Xu+a),r(Zu+l),c>0&&r(eh+c)}else{let o=Bp.get(i);o?t.push(...o):r(i)}if(!t.length)break;i=t.pop()}if(s&&e.length>1){let i=El(e[0]);for(let o=1;o<e.length;o++){let a=El(e[o]);if(a==0||i<=a){i=a;continue}let l=o-1;for(;;){let c=e[l+1];if(e[l+1]=e[l],e[l]=c,!l||(i=El(e[--l]),i<=a))break}i=El(e[o])}}return e}function yN(n){let e=[],t=[],s=-1,r=0;for(let i of n){let o=El(i),a=bE(i);if(s==-1)o==0?s=a:e.push(a);else if(r>0&&r>=o)o==0?(e.push(s,...t),t.length=0,s=a):t.push(a),r=o;else{let l=mN(s,a);l>=0?s=l:r==0&&o==0?(e.push(s),s=a):(t.push(a),r=o)}}return s>=0&&e.push(s,...t),e}function TE(n){return CE(n).map(bE)}function vN(n){return yN(CE(n))}const h0=45,SE=".",PE=65039,RE=1,nh=n=>Array.from(n);function ac(n,e){return n.P.has(e)||n.Q.has(e)}class AN extends Array{get is_emoji(){return!0}}let Mp,xE,wo,Fp,kE,wa,Mf,ra,co,d0,Up;function Zg(){if(Mp)return;let n=mE(Yk);const e=()=>rc(n),t=()=>new Set(e()),s=(h,f)=>f.forEach(p=>h.add(p));Mp=new Map(vE(n)),xE=t(),wo=e(),Fp=new Set(e().map(h=>wo[h])),wo=new Set(wo),kE=t(),t();let r=yE(n),i=n();const o=()=>{let h=new Set;return e().forEach(f=>s(h,r[f])),s(h,e()),h};wa=ic(h=>{let f=ic(n).map(p=>p+96);if(f.length){let p=h>=i;f[0]-=32,f=La(f),p&&(f=`Restricted[${f}]`);let m=o(),E=o(),v=!n();return{N:f,P:m,Q:E,M:v,R:p}}}),Mf=t(),ra=new Map;let a=e().concat(nh(Mf)).sort((h,f)=>h-f);a.forEach((h,f)=>{let p=n(),m=a[f]=p?a[f-p]:{V:[],M:new Map};m.V.push(h),Mf.has(h)||ra.set(h,m)});for(let{V:h,M:f}of new Set(ra.values())){let p=[];for(let E of h){let v=wa.filter(w=>ac(w,E)),A=p.find(({G:w})=>v.some(P=>w.has(P)));A||(A={G:new Set,V:[]},p.push(A)),A.V.push(E),s(A.G,v)}let m=p.flatMap(E=>nh(E.G));for(let{G:E,V:v}of p){let A=new Set(m.filter(w=>!E.has(w)));for(let w of v)f.set(w,A)}}co=new Set;let l=new Set;const c=h=>co.has(h)?l.add(h):co.add(h);for(let h of wa){for(let f of h.P)c(f);for(let f of h.Q)c(f)}for(let h of co)!ra.has(h)&&!l.has(h)&&ra.set(h,RE);s(co,TE(co)),d0=iN(n).map(h=>AN.from(h)).sort(lN),Up=new Map;for(let h of d0){let f=[Up];for(let p of h){let m=f.map(E=>{let v=E.get(p);return v||(v=new Map,E.set(p,v)),v});p===PE?f.push(...m):f=m}for(let p of f)p.V=h}}function em(n){return(NE(n)?"":`${tm(Jh([n]))} `)+wE(n)}function tm(n){return`"${n}"`}function wN(n){if(n.length>=4&&n[2]==h0&&n[3]==h0)throw new Error(`invalid label extension: "${La(n.slice(0,4))}"`)}function _N(n){for(let t=n.lastIndexOf(95);t>0;)if(n[--t]!==95)throw new Error("underscore allowed only at start")}function EN(n){let e=n[0],t=l0.get(e);if(t)throw Bl(`leading ${t}`);let s=n.length,r=-1;for(let i=1;i<s;i++){e=n[i];let o=l0.get(e);if(o){if(r==i)throw Bl(`${t} + ${o}`);r=i+1,t=o}}if(r==s)throw Bl(`trailing ${t}`)}function Jh(n,e=1/0,t=wE){let s=[];bN(n[0])&&s.push(""),n.length>e&&(e>>=1,n=[...n.slice(0,e),8230,...n.slice(-e)]);let r=0,i=n.length;for(let o=0;o<i;o++){let a=n[o];NE(a)&&(s.push(La(n.slice(r,o))),s.push(t(a)),r=o+1)}return s.push(La(n.slice(r,i))),s.join("")}function bN(n){return Zg(),wo.has(n)}function NE(n){return Zg(),kE.has(n)}function IN(n){return PN(CN(n,vN,kN))}function CN(n,e,t){if(!n)return[];Zg();let s=0;return n.split(SE).map(r=>{let i=aN(r),o={input:i,offset:s};s+=i.length+1;try{let a=o.tokens=xN(i,e,t),l=a.length,c;if(!l)throw new Error("empty label");let h=o.output=a.flat();if(_N(h),!(o.emoji=l>1||a[0].is_emoji)&&h.every(p=>p<128))wN(h),c="ASCII";else{let p=a.flatMap(m=>m.is_emoji?[]:m);if(!p.length)c="Emoji";else{if(wo.has(h[0]))throw Bl("leading combining mark");for(let v=1;v<l;v++){let A=a[v];if(!A.is_emoji&&wo.has(A[0]))throw Bl(`emoji + combining mark: "${La(a[v-1])} + ${Jh([A[0]])}"`)}EN(h);let m=nh(new Set(p)),[E]=SN(m);RN(E,p),TN(E,m),c=E.N}}o.type=c}catch(a){o.error=a}return o})}function TN(n,e){let t,s=[];for(let r of e){let i=ra.get(r);if(i===RE)return;if(i){let o=i.M.get(r);if(t=t?t.filter(a=>o.has(a)):nh(o),!t.length)return}else s.push(r)}if(t){for(let r of t)if(s.every(i=>ac(r,i)))throw new Error(`whole-script confusable: ${n.N}/${r.N}`)}}function SN(n){let e=wa;for(let t of n){let s=e.filter(r=>ac(r,t));if(!s.length)throw wa.some(r=>ac(r,t))?OE(e[0],t):DE(t);if(e=s,s.length==1)break}return e}function PN(n){return n.map(({input:e,error:t,output:s})=>{if(t){let r=t.message;throw new Error(n.length==1?r:`Invalid label ${tm(Jh(e,63))}: ${r}`)}return La(s)}).join(SE)}function DE(n){return new Error(`disallowed character: ${em(n)}`)}function OE(n,e){let t=em(e),s=wa.find(r=>r.P.has(e));return s&&(t=`${s.N} ${t}`),new Error(`illegal mixture: ${n.N} + ${t}`)}function Bl(n){return new Error(`illegal placement: ${n}`)}function RN(n,e){for(let t of e)if(!ac(n,t))throw OE(n,t);if(n.M){let t=TE(e);for(let s=1,r=t.length;s<r;s++)if(Fp.has(t[s])){let i=s+1;for(let o;i<r&&Fp.has(o=t[i]);i++)for(let a=s;a<i;a++)if(t[a]==o)throw new Error(`duplicate non-spacing marks: ${em(o)}`);if(i-s>c0)throw new Error(`excessive non-spacing marks: ${tm(Jh(t.slice(s-1,i)))} (${i-s}/${c0})`);s=i}}}function xN(n,e,t){let s=[],r=[];for(n=n.slice().reverse();n.length;){let i=NN(n);if(i)r.length&&(s.push(e(r)),r=[]),s.push(t(i));else{let o=n.pop();if(co.has(o))r.push(o);else{let a=Mp.get(o);if(a)r.push(...a);else if(!xE.has(o))throw DE(o)}}}return r.length&&s.push(e(r)),s}function kN(n){return n.filter(e=>e!=PE)}function NN(n,e){let t=Up,s,r=n.length;for(;r&&(t=t.get(n[--r]),!!t);){let{V:i}=t;i&&(s=i,n.length=r)}return s}const LE=new Uint8Array(32);LE.fill(0);function f0(n){return H(n.length!==0,"invalid ENS name; empty component","comp",n),n}function BE(n){const e=jr(DN(n)),t=[];if(n.length===0)return t;let s=0;for(let r=0;r<e.length;r++)e[r]===46&&(t.push(f0(e.slice(s,r))),s=r+1);return H(s<e.length,"invalid ENS name; empty component","name",n),t.push(f0(e.slice(s))),t}function DN(n){try{if(n.length===0)throw new Error("empty label");return IN(n)}catch(e){H(!1,`invalid ENS name (${e.message})`,"name",n)}}function Vp(n){H(typeof n=="string","invalid ENS name; not a string","name",n),H(n.length,"invalid ENS name (empty label)","name",n);let e=LE;const t=BE(n);for(;t.length;)e=gn(nn([e,gn(t.pop())]));return ye(e)}function ON(n,e){const t=e;return H(t<=255,"DNS encoded label cannot exceed 255","length",t),ye(nn(BE(n).map(s=>{H(s.length<=t,`label ${JSON.stringify(n)} exceeds ${t} bytes`,"name",n);const r=new Uint8Array(s.length+1);return r.set(s,1),r[0]=r.length-1,r})))+"00"}const ME=new Uint8Array(32);ME.fill(0);const LN=BigInt(-1),FE=BigInt(0),UE=BigInt(1),BN=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function MN(n){const e=rt(n),t=e.length%32;return t?nn([e,ME.slice(t)]):ye(e)}const FN=Vi(UE,32),UN=Vi(FE,32),p0={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Ff=["name","version","chainId","verifyingContract","salt"];function g0(n){return function(e){return H(typeof e=="string",`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const VN={name:g0("name"),version:g0("version"),chainId:function(n){const e=Ie(n,"domain.chainId");return H(e>=0,"invalid chain ID","domain.chainId",n),Number.isSafeInteger(e)?Number(e):Ws(e)},verifyingContract:function(n){try{return Et(n).toLowerCase()}catch{}H(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){const e=rt(n,"domain.salt");return H(e.length===32,'invalid domain value "salt"',"domain.salt",n),ye(e)}};function Uf(n){{const e=n.match(/^(u?)int(\d+)$/);if(e){const t=e[1]==="",s=parseInt(e[2]);H(s%8===0&&s!==0&&s<=256&&e[2]===String(s),"invalid numeric width","type",n);const r=vo(BN,t?s-1:s),i=t?(r+UE)*LN:FE;return function(o){const a=Ie(o,"value");return H(a>=i&&a<=r,`value out-of-bounds for ${n}`,"value",a),Vi(t?C1(a,256):a,32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return H(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",n),function(s){const r=rt(s);return H(r.length===t,`invalid length for ${n}`,"value",s),MN(s)}}}switch(n){case"address":return function(e){return Jr(Et(e),32)};case"bool":return function(e){return e?FN:UN};case"bytes":return function(e){return gn(e)};case"string":return function(e){return xo(e)}}return null}function m0(n,e){return`${n}(${e.map(({name:t,type:s})=>s+" "+t).join(",")})`}function cu(n){const e=n.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:n}}class Ts{primaryType;#e;get types(){return JSON.parse(this.#e)}#t;#n;constructor(e){this.#t=new Map,this.#n=new Map;const t=new Map,s=new Map,r=new Map,i={};Object.keys(e).forEach(l=>{i[l]=e[l].map(({name:c,type:h})=>{let{base:f,index:p}=cu(h);return f==="int"&&!e.int&&(f="int256"),f==="uint"&&!e.uint&&(f="uint256"),{name:c,type:f+(p||"")}}),t.set(l,new Set),s.set(l,[]),r.set(l,new Set)}),this.#e=JSON.stringify(i);for(const l in i){const c=new Set;for(const h of i[l]){H(!c.has(h.name),`duplicate variable name ${JSON.stringify(h.name)} in ${JSON.stringify(l)}`,"types",e),c.add(h.name);const f=cu(h.type).base;H(f!==l,`circular type reference to ${JSON.stringify(f)}`,"types",e),!Uf(f)&&(H(s.has(f),`unknown type ${JSON.stringify(f)}`,"types",e),s.get(f).push(l),t.get(l).add(f))}}const o=Array.from(s.keys()).filter(l=>s.get(l).length===0);H(o.length!==0,"missing primary type","types",e),H(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),Me(this,{primaryType:o[0]});function a(l,c){H(!c.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",e),c.add(l);for(const h of t.get(l))if(s.has(h)){a(h,c);for(const f of c)r.get(f).add(h)}c.delete(l)}a(this.primaryType,new Set);for(const[l,c]of r){const h=Array.from(c);h.sort(),this.#t.set(l,m0(l,i[l])+h.map(f=>m0(f,i[f])).join(""))}}getEncoder(e){let t=this.#n.get(e);return t||(t=this.#s(e),this.#n.set(e,t)),t}#s(e){{const r=Uf(e);if(r)return r}const t=cu(e).array;if(t){const r=t.prefix,i=this.getEncoder(r);return o=>{H(t.count===-1||t.count===o.length,`array length mismatch; expected length ${t.count}`,"value",o);let a=o.map(i);return this.#t.has(r)&&(a=a.map(gn)),gn(nn(a))}}const s=this.types[e];if(s){const r=xo(this.#t.get(e));return i=>{const o=s.map(({name:a,type:l})=>{const c=this.getEncoder(l)(i[a]);return this.#t.has(l)?gn(c):c});return o.unshift(r),nn(o)}}H(!1,`unknown type: ${e}`,"type",e)}encodeType(e){const t=this.#t.get(e);return H(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return gn(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,s){if(Uf(e))return s(e,t);const r=cu(e).array;if(r)return H(r.count===-1||r.count===t.length,`array length mismatch; expected length ${r.count}`,"value",t),t.map(o=>this._visit(r.prefix,o,s));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,t[a],s),o),{});H(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Ts(e)}static getPrimaryType(e){return Ts.from(e).primaryType}static hashStruct(e,t,s){return Ts.from(t).hashStruct(e,s)}static hashDomain(e){const t=[];for(const s in e){if(e[s]==null)continue;const r=p0[s];H(r,`invalid typed-data domain key: ${JSON.stringify(s)}`,"domain",e),t.push({name:s,type:r})}return t.sort((s,r)=>Ff.indexOf(s.name)-Ff.indexOf(r.name)),Ts.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,s){return nn(["0x1901",Ts.hashDomain(e),Ts.from(t).hash(s)])}static hash(e,t,s){return gn(Ts.encode(e,t,s))}static async resolveNames(e,t,s,r){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!Ot(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=Ts.from(t);o.visit(s,(a,l)=>(a==="address"&&!Ot(l,20)&&(i[l]="0x"),l));for(const a in i)i[a]=await r(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),s=o.visit(s,(a,l)=>a==="address"&&i[l]?i[l]:l),{domain:e,value:s}}static getPayload(e,t,s){Ts.hashDomain(e);const r={},i=[];Ff.forEach(l=>{const c=e[l];c!=null&&(r[l]=VN[l](c),i.push({name:l,type:p0[l]}))});const o=Ts.from(t);t=o.types;const a=Object.assign({},t);return H(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),a.EIP712Domain=i,o.encode(s),{types:a,domain:r,primaryType:o.primaryType,message:o.visit(s,(l,c)=>{if(l.match(/^bytes(\d*)/))return ye(rt(c));if(l.match(/^u?int/))return Ie(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return H(typeof c=="string","invalid string","value",c),c}H(!1,"unsupported type","type",l)})}}}function cs(n){const e=new Set;return n.forEach(t=>e.add(t)),Object.freeze(e)}const $N="external public payable override",HN=cs($N.split(" ")),VE="constant external internal payable private public pure view override",GN=cs(VE.split(" ")),$E="constructor error event fallback function receive struct",HE=cs($E.split(" ")),GE="calldata memory storage payable indexed",QN=cs(GE.split(" ")),jN="tuple returns",zN=[$E,GE,jN,VE].join(" "),WN=cs(zN.split(" ")),KN={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},qN=new RegExp("^(\\s*)"),JN=new RegExp("^([0-9]+)"),YN=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),QE=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),jE=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class Hs{#e;#t;get offset(){return this.#e}get length(){return this.#t.length-this.#e}constructor(e){this.#e=0,this.#t=e.slice()}clone(){return new Hs(this.#t)}reset(){this.#e=0}#n(e=0,t=0){return new Hs(this.#t.slice(e,t).map(s=>Object.freeze(Object.assign({},s,{match:s.match-e,linkBack:s.linkBack-e,linkNext:s.linkNext-e}))))}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=this.#n(this.#e+1,e.match+1);return this.#e=e.match+1,t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=[];for(;this.#e<e.match-1;){const s=this.peek().linkNext;t.push(this.#n(this.#e+1,s)),this.#e=s}return this.#e=e.match+1,t}peek(){if(this.#e>=this.#t.length)throw new Error("out-of-bounds");return this.#t[this.#e]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return this.#e++,e}toString(){const e=[];for(let t=this.#e;t<this.#t.length;t++){const s=this.#t[t];e.push(`${s.type}:${s.text}`)}return`<TokenString ${e.join(" ")}>`}}function Yi(n){const e=[],t=o=>{const a=i<n.length?JSON.stringify(n[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let s=[],r=[],i=0;for(;i<n.length;){let o=n.substring(i),a=o.match(qN);a&&(i+=a[1].length,o=n.substring(i));const l={depth:s.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(l);let c=KN[o[0]]||"";if(c){if(l.type=c,l.text=o[0],i++,c==="OPEN_PAREN")s.push(e.length-1),r.push(e.length-1);else if(c=="CLOSE_PAREN")s.length===0&&t("no matching open bracket"),l.match=s.pop(),e[l.match].match=e.length-1,l.depth--,l.linkBack=r.pop(),e[l.linkBack].linkNext=e.length-1;else if(c==="COMMA")l.linkBack=r.pop(),e[l.linkBack].linkNext=e.length-1,r.push(e.length-1);else if(c==="OPEN_BRACKET")l.type="BRACKET";else if(c==="CLOSE_BRACKET"){let h=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const f=e.pop().text;h=f+h,e[e.length-1].value=tt(f)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=h}continue}if(a=o.match(YN),a){if(l.text=a[1],i+=l.text.length,WN.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(jE)){l.type="TYPE";continue}l.type="ID";continue}if(a=o.match(JN),a){l.text=a[1],l.type="NUMBER",i+=l.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Hs(e.map(o=>Object.freeze(o)))}function y0(n,e){let t=[];for(const s in e.keys())n.has(s)&&t.push(s);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function Yh(n,e){if(e.peekKeyword(HE)){const t=e.pop().text;if(t!==n)throw new Error(`expected ${n}, got ${t}`)}return e.popType("ID")}function Xr(n,e){const t=new Set;for(;;){const s=n.peekType("KEYWORD");if(s==null||e&&!e.has(s))break;if(n.pop(),t.has(s))throw new Error(`duplicate keywords: ${JSON.stringify(s)}`);t.add(s)}return Object.freeze(t)}function zE(n){let e=Xr(n,GN);return y0(e,cs("constant payable nonpayable".split(" "))),y0(e,cs("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function zr(n,e){return n.popParams().map(t=>Dt.from(t,e))}function WE(n){if(n.peekType("AT")){if(n.pop(),n.peekType("NUMBER"))return Ie(n.pop().text);throw new Error("invalid gas")}return null}function ko(n){if(n.length)throw new Error(`unexpected tokens at offset ${n.offset}: ${n.toString()}`)}const XN=new RegExp(/^(.*)\[([0-9]*)\]$/);function v0(n){const e=n.match(jE);if(H(e,"invalid type","type",n),n==="uint")return"uint256";if(n==="int")return"int256";if(e[2]){const t=parseInt(e[2]);H(t!==0&&t<=32,"invalid bytes length","type",n)}else if(e[3]){const t=parseInt(e[3]);H(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",n)}return n}const Gt={},ws=Symbol.for("_ethers_internal"),A0="_ParamTypeInternal",w0="_ErrorInternal",_0="_EventInternal",E0="_ConstructorInternal",b0="_FallbackInternal",I0="_FunctionInternal",C0="_StructInternal";class Dt{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,s,r,i,o,a,l){if(Sc(e,Gt,"ParamType"),Object.defineProperty(this,ws,{value:A0}),o&&(o=Object.freeze(o.slice())),r==="array"){if(a==null||l==null)throw new Error("")}else if(a!=null||l!=null)throw new Error("");if(r==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Me(this,{name:t,type:s,baseType:r,indexed:i,components:o,arrayLength:a,arrayChildren:l})}format(e){if(e==null&&(e="sighash"),e==="json"){const s=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=s,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const r={type:this.baseType==="tuple"?"tuple":this.type,name:s};return typeof this.indexed=="boolean"&&(r.indexed=this.indexed),this.isTuple()&&(r.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(r)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(s=>s.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const s=this;return e.map(r=>s.arrayChildren.walk(r,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const s=this;return e.map((r,i)=>s.components[i].walk(r,t))}return t(this.type,e)}#e(e,t,s,r){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=t.slice();a.forEach((l,c)=>{o.#e(e,l,s,h=>{a[c]=h})}),r(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(t))a=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");a=o.map(l=>{if(!l.name)throw new Error("cannot use object value with unnamed components");if(!(l.name in t))throw new Error(`missing value for component ${l.name}`);return t[l.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((l,c)=>{o[c].#e(e,l,s,h=>{a[c]=h})}),r(a);return}const i=s(this.type,t);i.then?e.push((async function(){r(await i)})()):r(i)}async walkAsync(e,t){const s=[],r=[e];return this.#e(s,e,t,i=>{r[0]=i}),s.length&&await Promise.all(s),r[0]}static from(e,t){if(Dt.isParamType(e))return e;if(typeof e=="string")try{return Dt.from(Yi(e),t)}catch{H(!1,"invalid param type","obj",e)}else if(e instanceof Hs){let a="",l="",c=null;Xr(e,cs(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(l="tuple",c=e.popParams().map(v=>Dt.from(v)),a=`tuple(${c.map(v=>v.format()).join(",")})`):(a=v0(e.popType("TYPE")),l=a);let h=null,f=null;for(;e.length&&e.peekType("BRACKET");){const v=e.pop();h=new Dt(Gt,"",a,l,null,c,f,h),f=v.value,a+=v.text,l="array",c=null}let p=null;if(Xr(e,QN).has("indexed")){if(!t)throw new Error("");p=!0}const E=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Dt(Gt,E,a,l,p,c,f,h)}const s=e.name;H(!s||typeof s=="string"&&s.match(QE),"invalid name","obj.name",s);let r=e.indexed;r!=null&&(H(t,"parameter cannot be indexed","obj.indexed",e.indexed),r=!!r);let i=e.type,o=i.match(XN);if(o){const a=parseInt(o[2]||"-1"),l=Dt.from({type:o[1],components:e.components});return new Dt(Gt,s||"",i,"array",r,null,a,l)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(c=>Dt.from(c)):null;return new Dt(Gt,s||"",i,"tuple",r,a,null,null)}return i=v0(e.type),new Dt(Gt,s||"",i,i,r,null,null,null)}static isParamType(e){return e&&e[ws]===A0}}class No{type;inputs;constructor(e,t,s){Sc(e,Gt,"Fragment"),s=Object.freeze(s.slice()),Me(this,{type:t,inputs:s})}static from(e){if(typeof e=="string"){try{No.from(JSON.parse(e))}catch{}return No.from(Yi(e))}if(e instanceof Hs)switch(e.peekKeyword(HE)){case"constructor":return $r.from(e);case"error":return As.from(e);case"event":return hr.from(e);case"fallback":case"receive":return Nr.from(e);case"function":return dr.from(e);case"struct":return To.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return $r.from(e);case"error":return As.from(e);case"event":return hr.from(e);case"fallback":case"receive":return Nr.from(e);case"function":return dr.from(e);case"struct":return To.from(e)}ie(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}H(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return $r.isFragment(e)}static isError(e){return As.isFragment(e)}static isEvent(e){return hr.isFragment(e)}static isFunction(e){return dr.isFragment(e)}static isStruct(e){return To.isFragment(e)}}class Xh extends No{name;constructor(e,t,s,r){super(e,t,r),H(typeof s=="string"&&s.match(QE),"invalid identifier","name",s),r=Object.freeze(r.slice()),Me(this,{name:s})}}function lc(n,e){return"("+e.map(t=>t.format(n)).join(n==="full"?", ":",")+")"}class As extends Xh{constructor(e,t,s){super(e,"error",t,s),Object.defineProperty(this,ws,{value:w0})}get selector(){return xo(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+lc(e,this.inputs)),t.join(" ")}static from(e){if(As.isFragment(e))return e;if(typeof e=="string")return As.from(Yi(e));if(e instanceof Hs){const t=Yh("error",e),s=zr(e);return ko(e),new As(Gt,t,s)}return new As(Gt,e.name,e.inputs?e.inputs.map(Dt.from):[])}static isFragment(e){return e&&e[ws]===w0}}class hr extends Xh{anonymous;constructor(e,t,s,r){super(e,"event",t,s),Object.defineProperty(this,ws,{value:_0}),Me(this,{anonymous:r})}get topicHash(){return xo(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const t=[];return e!=="sighash"&&t.push("event"),t.push(this.name+lc(e,this.inputs)),e!=="sighash"&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){return t=(t||[]).map(r=>Dt.from(r)),new hr(Gt,e,t,!1).topicHash}static from(e){if(hr.isFragment(e))return e;if(typeof e=="string")try{return hr.from(Yi(e))}catch{H(!1,"invalid event fragment","obj",e)}else if(e instanceof Hs){const t=Yh("event",e),s=zr(e,!0),r=!!Xr(e,cs(["anonymous"])).has("anonymous");return ko(e),new hr(Gt,t,s,r)}return new hr(Gt,e.name,e.inputs?e.inputs.map(t=>Dt.from(t,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[ws]===_0}}class $r extends No{payable;gas;constructor(e,t,s,r,i){super(e,t,s),Object.defineProperty(this,ws,{value:E0}),Me(this,{payable:r,gas:i})}format(e){if(ie(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const t=[`constructor${lc(e,this.inputs)}`];return this.payable&&t.push("payable"),this.gas!=null&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if($r.isFragment(e))return e;if(typeof e=="string")try{return $r.from(Yi(e))}catch{H(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof Hs){Xr(e,cs(["constructor"]));const t=zr(e),s=!!Xr(e,HN).has("payable"),r=WE(e);return ko(e),new $r(Gt,"constructor",t,s,r)}return new $r(Gt,"constructor",e.inputs?e.inputs.map(Dt.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[ws]===E0}}class Nr extends No{payable;constructor(e,t,s){super(e,"fallback",t),Object.defineProperty(this,ws,{value:b0}),Me(this,{payable:s})}format(e){const t=this.inputs.length===0?"receive":"fallback";if(e==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:t,stateMutability:s})}return`${t}()${this.payable?" payable":""}`}static from(e){if(Nr.isFragment(e))return e;if(typeof e=="string")try{return Nr.from(Yi(e))}catch{H(!1,"invalid fallback fragment","obj",e)}else if(e instanceof Hs){const t=e.toString(),s=e.peekKeyword(cs(["fallback","receive"]));if(H(s,"type must be fallback or receive","obj",t),e.popKeyword(cs(["fallback","receive"]))==="receive"){const a=zr(e);return H(a.length===0,"receive cannot have arguments","obj.inputs",a),Xr(e,cs(["payable"])),ko(e),new Nr(Gt,[],!0)}let i=zr(e);i.length?H(i.length===1&&i[0].type==="bytes","invalid fallback inputs","obj.inputs",i.map(a=>a.format("minimal")).join(", ")):i=[Dt.from("bytes")];const o=zE(e);if(H(o==="nonpayable"||o==="payable","fallback cannot be constants","obj.stateMutability",o),Xr(e,cs(["returns"])).has("returns")){const a=zr(e);H(a.length===1&&a[0].type==="bytes","invalid fallback outputs","obj.outputs",a.map(l=>l.format("minimal")).join(", "))}return ko(e),new Nr(Gt,i,o==="payable")}if(e.type==="receive")return new Nr(Gt,[],!0);if(e.type==="fallback"){const t=[Dt.from("bytes")],s=e.stateMutability==="payable";return new Nr(Gt,t,s)}H(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[ws]===b0}}class dr extends Xh{constant;outputs;stateMutability;payable;gas;constructor(e,t,s,r,i,o){super(e,"function",t,r),Object.defineProperty(this,ws,{value:I0}),i=Object.freeze(i.slice()),Me(this,{constant:s==="view"||s==="pure",gas:o,outputs:i,payable:s==="payable",stateMutability:s})}get selector(){return xo(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(e))),outputs:this.outputs.map(s=>JSON.parse(s.format(e)))});const t=[];return e!=="sighash"&&t.push("function"),t.push(this.name+lc(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(lc(e,this.outputs))),this.gas!=null&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){return t=(t||[]).map(r=>Dt.from(r)),new dr(Gt,e,"view",t,[],null).selector}static from(e){if(dr.isFragment(e))return e;if(typeof e=="string")try{return dr.from(Yi(e))}catch{H(!1,"invalid function fragment","obj",e)}else if(e instanceof Hs){const s=Yh("function",e),r=zr(e),i=zE(e);let o=[];Xr(e,cs(["returns"])).has("returns")&&(o=zr(e));const a=WE(e);return ko(e),new dr(Gt,s,i,r,o,a)}let t=e.stateMutability;return t==null&&(t="payable",typeof e.constant=="boolean"?(t="view",e.constant||(t="payable",typeof e.payable=="boolean"&&!e.payable&&(t="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(t="nonpayable")),new dr(Gt,e.name,t,e.inputs?e.inputs.map(Dt.from):[],e.outputs?e.outputs.map(Dt.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[ws]===I0}}class To extends Xh{constructor(e,t,s){super(e,"struct",t,s),Object.defineProperty(this,ws,{value:C0})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return To.from(Yi(e))}catch{H(!1,"invalid struct fragment","obj",e)}else if(e instanceof Hs){const t=Yh("struct",e),s=zr(e);return ko(e),new To(Gt,t,s)}return new To(Gt,e.name,e.inputs?e.inputs.map(Dt.from):[])}static isFragment(e){return e&&e[ws]===C0}}const nr=new Map;nr.set(0,"GENERIC_PANIC");nr.set(1,"ASSERT_FALSE");nr.set(17,"OVERFLOW");nr.set(18,"DIVIDE_BY_ZERO");nr.set(33,"ENUM_RANGE_ERROR");nr.set(34,"BAD_STORAGE_DATA");nr.set(49,"STACK_UNDERFLOW");nr.set(50,"ARRAY_RANGE_ERROR");nr.set(65,"OUT_OF_MEMORY");nr.set(81,"UNINITIALIZED_FUNCTION_CALL");const ZN=new RegExp(/^bytes([0-9]*)$/),eD=new RegExp(/^(u?int)([0-9]*)$/);let Vf=null,T0=1024;function tD(n,e,t,s){let r="missing revert data",i=null;const o=null;let a=null;if(t){r="execution reverted";const c=rt(t);if(t=ye(t),c.length===0)r+=" (no data present; likely require(false) occurred",i="require(false)";else if(c.length%32!==4)r+=" (could not decode reason; invalid data length)";else if(ye(c.slice(0,4))==="0x08c379a0")try{i=s.decode(["string"],c.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},r+=`: ${JSON.stringify(i)}`}catch{r+=" (could not decode reason; invalid string data)"}else if(ye(c.slice(0,4))==="0x4e487b71")try{const h=Number(s.decode(["uint256"],c.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[h]},i=`Panic due to ${nr.get(h)||"UNKNOWN"}(${h})`,r+=`: ${i}`}catch{r+=" (could not decode panic code)"}else r+=" (unknown custom error)"}const l={to:e.to?Et(e.to):null,data:e.data||"0x"};return e.from&&(l.from=Et(e.from)),$t(r,"CALL_EXCEPTION",{action:n,data:t,reason:i,transaction:l,invocation:o,revert:a})}class Ma{#e(e){if(e.isArray())return new Ak(this.#e(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new lu(e.components.map(s=>this.#e(s)),e.name);switch(e.baseType){case"address":return new yk(e.name);case"bool":return new wk(e.name);case"string":return new Rk(e.name);case"bytes":return new _k(e.name);case"":return new Ik(e.name)}let t=e.type.match(eD);if(t){let s=parseInt(t[2]||"256");return H(s!==0&&s<=256&&s%8===0,"invalid "+t[1]+" bit length","param",e),new Pk(s/8,t[1]==="int",e.name)}if(t=e.type.match(ZN),t){let s=parseInt(t[1]);return H(s!==0&&s<=32,"invalid bytes length","param",e),new Ek(s,e.name)}H(!1,"invalid type","type",e.type)}getDefaultValue(e){const t=e.map(r=>this.#e(Dt.from(r)));return new lu(t,"_").defaultValue()}encode(e,t){E1(t.length,e.length,"types/values length mismatch");const s=e.map(o=>this.#e(Dt.from(o))),r=new lu(s,"_"),i=new Rp;return r.encode(i,t),i.data}decode(e,t,s){const r=e.map(o=>this.#e(Dt.from(o)));return new lu(r,"_").decode(new Gg(t,s,T0))}static _setDefaultMaxInflation(e){H(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),T0=e}static defaultAbiCoder(){return Vf==null&&(Vf=new Ma),Vf}static getBuiltinCallException(e,t,s){return tD(e,t,s,Ma.defaultAbiCoder())}}class nD{fragment;name;signature;topic;args;constructor(e,t,s){const r=e.name,i=e.format();Me(this,{fragment:e,name:r,signature:i,topic:t,args:s})}}class sD{fragment;name;args;signature;selector;value;constructor(e,t,s,r){const i=e.name,o=e.format();Me(this,{fragment:e,name:i,args:s,signature:o,selector:t,value:r})}}class rD{fragment;name;args;signature;selector;constructor(e,t,s){const r=e.name,i=e.format();Me(this,{fragment:e,name:r,args:s,signature:i,selector:t})}}class S0{hash;_isIndexed;static isIndexed(e){return!!(e&&e._isIndexed)}constructor(e){Me(this,{hash:e,_isIndexed:!0})}}const P0={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},R0={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:n=>`reverted with reason string ${JSON.stringify(n)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:n=>{let e="unknown panic code";return n>=0&&n<=255&&P0[n.toString()]&&(e=P0[n.toString()]),`reverted with panic code 0x${n.toString(16)} (${e})`}}};class go{fragments;deploy;fallback;receive;#e;#t;#n;#s;constructor(e){let t=[];typeof e=="string"?t=JSON.parse(e):t=e,this.#n=new Map,this.#e=new Map,this.#t=new Map;const s=[];for(const o of t)try{s.push(No.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}Me(this,{fragments:Object.freeze(s)});let r=null,i=!1;this.#s=this.getAbiCoder(),this.fragments.forEach((o,a)=>{let l;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Me(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(H(!r||o.payable!==r.payable,"conflicting fallback fragments",`fragments[${a}]`,o),r=o,i=r.payable);return;case"function":l=this.#n;break;case"event":l=this.#t;break;case"error":l=this.#e;break;default:return}const c=o.format();l.has(c)||l.set(c,o)}),this.deploy||Me(this,{deploy:$r.from("constructor()")}),Me(this,{fallback:r,receive:i})}format(e){const t=e?"minimal":"full";return this.fragments.map(r=>r.format(t))}formatJson(){const e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return Ma.defaultAbiCoder()}#r(e,t,s){if(Ot(e)){const i=e.toLowerCase();for(const o of this.#n.values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of this.#n)o.split("(")[0]===e&&i.push(a);if(t){const o=t.length>0?t[t.length-1]:null;let a=t.length,l=!0;en.isTyped(o)&&o.type==="overrides"&&(l=!1,a--);for(let c=i.length-1;c>=0;c--){const h=i[c].inputs.length;h!==a&&(!l||h!==a-1)&&i.splice(c,1)}for(let c=i.length-1;c>=0;c--){const h=i[c].inputs;for(let f=0;f<t.length;f++)if(en.isTyped(t[f])){if(f>=h.length){if(t[f].type==="overrides")continue;i.splice(c,1);break}if(t[f].type!==h[f].baseType){i.splice(c,1);break}}}}if(i.length===1&&t&&t.length!==i[0].inputs.length){const o=t[t.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&s){const o=i.map(a=>JSON.stringify(a.format())).join(", ");H(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const r=this.#n.get(dr.from(e).format());return r||null}getFunctionName(e){const t=this.#r(e,null,!1);return H(t,"no matching function","key",e),t.name}hasFunction(e){return!!this.#r(e,null,!1)}getFunction(e,t){return this.#r(e,t||null,!0)}forEachFunction(e){const t=Array.from(this.#n.keys());t.sort((s,r)=>s.localeCompare(r));for(let s=0;s<t.length;s++){const r=t[s];e(this.#n.get(r),s)}}#o(e,t,s){if(Ot(e)){const i=e.toLowerCase();for(const o of this.#t.values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of this.#t)o.split("(")[0]===e&&i.push(a);if(t){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<t.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let l=0;l<t.length;l++)if(en.isTyped(t[l])&&t[l].type!==a[l].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&s){const o=i.map(a=>JSON.stringify(a.format())).join(", ");H(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const r=this.#t.get(hr.from(e).format());return r||null}getEventName(e){const t=this.#o(e,null,!1);return H(t,"no matching event","key",e),t.name}hasEvent(e){return!!this.#o(e,null,!1)}getEvent(e,t){return this.#o(e,t||null,!0)}forEachEvent(e){const t=Array.from(this.#t.keys());t.sort((s,r)=>s.localeCompare(r));for(let s=0;s<t.length;s++){const r=t[s];e(this.#t.get(r),s)}}getError(e,t){if(Ot(e)){const r=e.toLowerCase();if(R0[r])return As.from(R0[r].signature);for(const i of this.#e.values())if(r===i.selector)return i;return null}if(e.indexOf("(")===-1){const r=[];for(const[i,o]of this.#e)i.split("(")[0]===e&&r.push(o);if(r.length===0)return e==="Error"?As.from("error Error(string)"):e==="Panic"?As.from("error Panic(uint256)"):null;if(r.length>1){const i=r.map(o=>JSON.stringify(o.format())).join(", ");H(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return r[0]}if(e=As.from(e).format(),e==="Error(string)")return As.from("error Error(string)");if(e==="Panic(uint256)")return As.from("error Panic(uint256)");const s=this.#e.get(e);return s||null}forEachError(e){const t=Array.from(this.#e.keys());t.sort((s,r)=>s.localeCompare(r));for(let s=0;s<t.length;s++){const r=t[s];e(this.#e.get(r),s)}}_decodeParams(e,t){return this.#s.decode(e,t)}_encodeParams(e,t){return this.#s.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){const s=this.getError(e);H(s,"unknown error","fragment",e),e=s}return H(Xt(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,Xt(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){const s=this.getError(e);H(s,"unknown error","fragment",e),e=s}return nn([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){const s=this.getFunction(e);H(s,"unknown function","fragment",e),e=s}return H(Xt(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,Xt(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){const s=this.getFunction(e);H(s,"unknown function","fragment",e),e=s}return nn([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){const i=this.getFunction(e);H(i,"unknown function","fragment",e),e=i}let s="invalid length for result data";const r=os(t);if(r.length%32===0)try{return this.#s.decode(e.outputs,r)}catch{s="could not decode result data"}ie(!1,s,"BAD_DATA",{value:ye(r),info:{method:e.name,signature:e.format()}})}makeError(e,t){const s=rt(e,"data"),r=Ma.getBuiltinCallException("call",t,s);if(r.message.startsWith("execution reverted (unknown custom error)")){const a=ye(s.slice(0,4)),l=this.getError(a);if(l)try{const c=this.#s.decode(l.inputs,s.slice(4));r.revert={name:l.name,signature:l.format(),args:c},r.reason=r.revert.signature,r.message=`execution reverted: ${r.reason}`}catch{r.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(t);return o&&(r.invocation={method:o.name,signature:o.signature,args:o.args}),r}encodeFunctionResult(e,t){if(typeof e=="string"){const s=this.getFunction(e);H(s,"unknown function","fragment",e),e=s}return ye(this.#s.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){const i=this.getEvent(e);H(i,"unknown event","eventFragment",e),e=i}ie(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const s=[];e.anonymous||s.push(e.topicHash);const r=(i,o)=>i.type==="string"?xo(o):i.type==="bytes"?gn(ye(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=Vi(o):i.type.match(/^bytes/)?o=_x(o,32):i.type==="address"&&this.#s.encode(["address"],[o]),Jr(ye(o),32));for(t.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){H(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?s.push(null):a.baseType==="array"||a.baseType==="tuple"?H(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?s.push(i.map(l=>r(a,l))):s.push(r(a,i))});s.length&&s[s.length-1]===null;)s.pop();return s}encodeEventLog(e,t){if(typeof e=="string"){const o=this.getEvent(e);H(o,"unknown event","eventFragment",e),e=o}const s=[],r=[],i=[];return e.anonymous||s.push(e.topicHash),H(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((o,a)=>{const l=t[a];if(o.indexed)if(o.type==="string")s.push(xo(l));else if(o.type==="bytes")s.push(gn(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");s.push(this.#s.encode([o.type],[l]))}else r.push(o),i.push(l)}),{data:this.#s.encode(r,i),topics:s}}decodeEventLog(e,t,s){if(typeof e=="string"){const m=this.getEvent(e);H(m,"unknown event","eventFragment",e),e=m}if(s!=null&&!e.anonymous){const m=e.topicHash;H(Ot(s[0],32)&&s[0].toLowerCase()===m,"fragment/topic mismatch","topics[0]",s[0]),s=s.slice(1)}const r=[],i=[],o=[];e.inputs.forEach((m,E)=>{m.indexed?m.type==="string"||m.type==="bytes"||m.baseType==="tuple"||m.baseType==="array"?(r.push(Dt.from({type:"bytes32",name:m.name})),o.push(!0)):(r.push(m),o.push(!1)):(i.push(m),o.push(!1))});const a=s!=null?this.#s.decode(r,nn(s)):null,l=this.#s.decode(i,t,!0),c=[],h=[];let f=0,p=0;return e.inputs.forEach((m,E)=>{let v=null;if(m.indexed)if(a==null)v=new S0(null);else if(o[E])v=new S0(a[p++]);else try{v=a[p++]}catch(A){v=A}else try{v=l[f++]}catch(A){v=A}c.push(v),h.push(m.name||null)}),Vr.fromItems(c,h)}parseTransaction(e){const t=rt(e.data,"tx.data"),s=Ie(e.value!=null?e.value:0,"tx.value"),r=this.getFunction(ye(t.slice(0,4)));if(!r)return null;const i=this.#s.decode(r.inputs,t.slice(4));return new sD(r,r.selector,i,s)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new nD(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=ye(e),s=this.getError(Xt(t,0,4));if(!s)return null;const r=this.#s.decode(s.inputs,Xt(t,4));return new rD(s,s.selector,r)}static from(e){return e instanceof go?e:typeof e=="string"?new go(JSON.parse(e)):typeof e.formatJson=="function"?new go(e.formatJson()):typeof e.format=="function"?new go(e.format("json")):new go(e)}}const KE=BigInt(0);function _a(n){return n??null}function on(n){return n==null?null:n.toString()}class x0{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,t,s){Me(this,{gasPrice:_a(e),maxFeePerGas:_a(t),maxPriorityFeePerGas:_a(s)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:s}=this;return{_type:"FeeData",gasPrice:on(e),maxFeePerGas:on(t),maxPriorityFeePerGas:on(s)}}}function sh(n){const e={};n.to&&(e.to=n.to),n.from&&(e.from=n.from),n.data&&(e.data=ye(n.data));const t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const r of t)!(r in n)||n[r]==null||(e[r]=Ie(n[r],`request.${r}`));const s="type,nonce".split(/,/);for(const r of s)!(r in n)||n[r]==null||(e[r]=tt(n[r],`request.${r}`));return n.accessList&&(e.accessList=Uo(n.accessList)),n.authorizationList&&(e.authorizationList=n.authorizationList.slice()),"blockTag"in n&&(e.blockTag=n.blockTag),"enableCcipRead"in n&&(e.enableCcipRead=!!n.enableCcipRead),"customData"in n&&(e.customData=n.customData),"blobVersionedHashes"in n&&n.blobVersionedHashes&&(e.blobVersionedHashes=n.blobVersionedHashes.slice()),"kzg"in n&&(e.kzg=n.kzg),"blobs"in n&&n.blobs&&(e.blobs=n.blobs.map(r=>Hg(r)?ye(r):Object.assign({},r))),e}class iD{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#e;constructor(e,t){this.#e=e.transactions.map(s=>typeof s!="string"?new kc(s,t):s),Me(this,{provider:t,hash:_a(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:_a(e.prevRandao),extraData:e.extraData,baseFeePerGas:_a(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return this.#e.map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=this.#e.slice();return e.length===0?[]:(ie(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:s,gasLimit:r,gasUsed:i,hash:o,miner:a,prevRandao:l,nonce:c,number:h,parentHash:f,parentBeaconBlockRoot:p,stateRoot:m,receiptsRoot:E,timestamp:v,transactions:A}=this;return{_type:"Block",baseFeePerGas:on(e),difficulty:on(t),extraData:s,gasLimit:on(r),gasUsed:on(i),blobGasUsed:on(this.blobGasUsed),excessBlobGas:on(this.excessBlobGas),hash:o,miner:a,prevRandao:l,nonce:c,number:h,parentHash:f,timestamp:v,parentBeaconBlockRoot:p,stateRoot:m,receiptsRoot:E,transactions:A}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#e.length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let t;if(typeof e=="number")t=this.#e[e];else{const s=e.toLowerCase();for(const r of this.#e)if(typeof r=="string"){if(r!==s)continue;t=r;break}else{if(r.hash!==s)continue;t=r;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(const s of t)if(s.hash===e)return s;H(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return oD(this)}}class xc{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,t){this.provider=t;const s=Object.freeze(e.topics.slice());Me(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:s,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:s,data:r,index:i,removed:o,topics:a,transactionHash:l,transactionIndex:c}=this;return{_type:"log",address:e,blockHash:t,blockNumber:s,data:r,index:i,removed:o,topics:a,transactionHash:l,transactionIndex:c}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return ie(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return ie(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return ie(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return aD(this)}}class qE{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#e;constructor(e,t){this.#e=Object.freeze(e.logs.map(r=>new xc(r,t)));let s=KE;e.effectiveGasPrice!=null?s=e.effectiveGasPrice:e.gasPrice!=null&&(s=e.gasPrice),Me(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:s,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return this.#e}toJSON(){const{to:e,from:t,contractAddress:s,hash:r,index:i,blockHash:o,blockNumber:a,logsBloom:l,logs:c,status:h,root:f}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:s,cumulativeGasUsed:on(this.cumulativeGasUsed),from:t,gasPrice:on(this.gasPrice),blobGasUsed:on(this.blobGasUsed),blobGasPrice:on(this.blobGasPrice),gasUsed:on(this.gasUsed),hash:r,index:i,logs:c,logsBloom:l,root:f,status:h,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return YE(this)}reorderedEvent(e){return ie(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),JE(this,e)}}class kc{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;authorizationList;#e;constructor(e,t){this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,this.#e=-1}toJSON(){const{blockNumber:e,blockHash:t,index:s,hash:r,type:i,to:o,from:a,nonce:l,data:c,signature:h,accessList:f,blobVersionedHashes:p}=this;return{_type:"TransactionResponse",accessList:f,blockNumber:e,blockHash:t,blobVersionedHashes:p,chainId:on(this.chainId),data:c,from:a,gasLimit:on(this.gasLimit),gasPrice:on(this.gasPrice),hash:r,maxFeePerGas:on(this.maxFeePerGas),maxPriorityFeePerGas:on(this.maxPriorityFeePerGas),maxFeePerBlobGas:on(this.maxFeePerBlobGas),nonce:l,signature:h,to:o,index:s,type:i,value:on(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const s=await this.getTransaction();s&&(e=s.blockNumber)}if(e==null)return null;const t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:t,blockNumber:s}=await ss({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:s-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const s=e??1,r=t??0;let i=this.#e,o=-1,a=i===-1;const l=async()=>{if(a)return null;const{blockNumber:p,nonce:m}=await ss({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(m<this.nonce){i=p;return}if(a)return null;const E=await this.getTransaction();if(!(E&&E.blockNumber!=null))for(o===-1&&(o=i-3,o<this.#e&&(o=this.#e));o<=p;){if(a)return null;const v=await this.provider.getBlock(o,!0);if(v==null)return;for(const A of v)if(A===this.hash)return;for(let A=0;A<v.length;A++){const w=await v.getTransaction(A);if(w.from===this.from&&w.nonce===this.nonce){if(a)return null;const P=await this.provider.getTransactionReceipt(w.hash);if(P==null||p-P.blockNumber+1<s)return;let T="replaced";w.data===this.data&&w.to===this.to&&w.value===this.value?T="repriced":w.data==="0x"&&w.from===w.to&&w.value===KE&&(T="cancelled"),ie(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:T==="replaced"||T==="cancelled",reason:T,replacement:w.replaceableTransaction(i),hash:w.hash,receipt:P})}}o++}},c=p=>{if(p==null||p.status!==0)return p;ie(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:p.to,from:p.from,data:""},receipt:p})},h=await this.provider.getTransactionReceipt(this.hash);if(s===0)return c(h);if(h){if(s===1||await h.confirmations()>=s)return c(h)}else if(await l(),s===0)return null;return await new Promise((p,m)=>{const E=[],v=()=>{E.forEach(w=>w())};if(E.push(()=>{a=!0}),r>0){const w=setTimeout(()=>{v(),m($t("wait for transaction timeout","TIMEOUT"))},r);E.push(()=>{clearTimeout(w)})}const A=async w=>{if(await w.confirmations()>=s){v();try{p(c(w))}catch(P){m(P)}}};if(E.push(()=>{this.provider.off(this.hash,A)}),this.provider.on(this.hash,A),i>=0){const w=async()=>{try{await l()}catch(P){if(Fn(P,"TRANSACTION_REPLACED")){v(),m(P);return}}a||this.provider.once("block",w)};E.push(()=>{this.provider.off("block",w)}),this.provider.once("block",w)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return ie(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),YE(this)}reorderedEvent(e){return ie(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ie(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),JE(this,e)}replaceableTransaction(e){H(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new kc(this,this.provider);return t.#e=e,t}}function oD(n){return{orphan:"drop-block",hash:n.hash,number:n.number}}function JE(n,e){return{orphan:"reorder-transaction",tx:n,other:e}}function YE(n){return{orphan:"drop-transaction",tx:n}}function aD(n){return{orphan:"drop-log",log:{transactionHash:n.transactionHash,blockHash:n.blockHash,blockNumber:n.blockNumber,address:n.address,data:n.data,topics:Object.freeze(n.topics.slice()),index:n.index}}}class nm extends xc{interface;fragment;args;constructor(e,t,s){super(e,e.provider);const r=t.decodeEventLog(s,e.data,e.topics);Me(this,{args:r,fragment:s,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class XE extends xc{error;constructor(e,t){super(e,e.provider),Me(this,{error:t})}}class lD extends qE{#e;constructor(e,t,s){super(s,t),this.#e=e}get logs(){return super.logs.map(e=>{const t=e.topics.length?this.#e.getEvent(e.topics[0]):null;if(t)try{return new nm(e,this.#e,t)}catch(s){return new XE(e,s)}return e})}}class sm extends kc{#e;constructor(e,t,s){super(s,t),this.#e=e}async wait(e,t){const s=await super.wait(e,t);return s==null?null:new lD(this.#e,this.provider,s)}}class ZE extends T1{log;constructor(e,t,s,r){super(e,t,s),Me(this,{log:r})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class cD extends ZE{constructor(e,t,s,r,i){super(e,t,s,new nm(i,e.interface,r));const o=e.interface.decodeEventLog(r,this.log.data,this.log.topics);Me(this,{args:o,fragment:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const k0=BigInt(0);function eb(n){return n&&typeof n.call=="function"}function tb(n){return n&&typeof n.estimateGas=="function"}function Zh(n){return n&&typeof n.resolveName=="function"}function nb(n){return n&&typeof n.sendTransaction=="function"}function sb(n){if(n!=null){if(Zh(n))return n;if(n.provider)return n.provider}}class uD{#e;fragment;constructor(e,t,s){if(Me(this,{fragment:t}),t.inputs.length<s.length)throw new Error("too many arguments");const r=Do(e.runner,"resolveName"),i=Zh(r)?r:null;this.#e=(async function(){const o=await Promise.all(t.inputs.map((a,l)=>s[l]==null?null:a.walkAsync(s[l],(h,f)=>h==="address"?Array.isArray(f)?Promise.all(f.map(p=>ls(p,i))):ls(f,i):f)));return e.interface.encodeFilterTopics(t,o)})()}getTopicFilter(){return this.#e}}function Do(n,e){return n==null?null:typeof n[e]=="function"?n:n.provider&&typeof n.provider[e]=="function"?n.provider:null}function _o(n){return n==null?null:n.provider||null}async function rb(n,e){const t=en.dereference(n,"overrides");H(typeof t=="object","invalid overrides parameter","overrides",n);const s=sh(t);return H(s.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",s.to),H(s.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",s.data),s.from&&(s.from=s.from),s}async function hD(n,e,t){const s=Do(n,"resolveName"),r=Zh(s)?s:null;return await Promise.all(e.map((i,o)=>i.walkAsync(t[o],(a,l)=>(l=en.dereference(l,a),a==="address"?ls(l,r):l))))}function dD(n){const e=async function(o){const a=await rb(o,["data"]);a.to=await n.getAddress(),a.from&&(a.from=await ls(a.from,sb(n.runner)));const l=n.interface,c=Ie(a.value||k0,"overrides.value")===k0,h=(a.data||"0x")==="0x";l.fallback&&!l.fallback.payable&&l.receive&&!h&&!c&&H(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),H(l.fallback||h,"cannot send data to receive-only contract","overrides.data",a.data);const f=l.receive||l.fallback&&l.fallback.payable;return H(f||c,"cannot send value to non-payable fallback","overrides.value",a.value),H(l.fallback||h,"cannot send data to receive-only contract","overrides.data",a.data),a},t=async function(o){const a=Do(n.runner,"call");ie(eb(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const l=await e(o);try{return await a.call(l)}catch(c){throw $g(c)&&c.data?n.interface.makeError(c.data,l):c}},s=async function(o){const a=n.runner;ie(nb(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const l=await a.sendTransaction(await e(o)),c=_o(n.runner);return new sm(n.interface,c,l)},r=async function(o){const a=Do(n.runner,"estimateGas");return ie(tb(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await s(o);return Me(i,{_contract:n,estimateGas:r,populateTransaction:e,send:s,staticCall:t}),i}function fD(n,e){const t=function(...c){const h=n.interface.getFunction(e,c);return ie(h,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:c}}),h},s=async function(...c){const h=t(...c);let f={};if(h.inputs.length+1===c.length&&(f=await rb(c.pop()),f.from&&(f.from=await ls(f.from,sb(n.runner)))),h.inputs.length!==c.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const p=await hD(n.runner,h.inputs,c);return Object.assign({},f,await ss({to:n.getAddress(),data:n.interface.encodeFunctionData(h,p)}))},r=async function(...c){const h=await a(...c);return h.length===1?h[0]:h},i=async function(...c){const h=n.runner;ie(nb(h),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const f=await h.sendTransaction(await s(...c)),p=_o(n.runner);return new sm(n.interface,p,f)},o=async function(...c){const h=Do(n.runner,"estimateGas");return ie(tb(h),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await h.estimateGas(await s(...c))},a=async function(...c){const h=Do(n.runner,"call");ie(eb(h),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const f=await s(...c);let p="0x";try{p=await h.call(f)}catch(E){throw $g(E)&&E.data?n.interface.makeError(E.data,f):E}const m=t(...c);return n.interface.decodeFunctionResult(m,p)},l=async(...c)=>t(...c).constant?await r(...c):await i(...c);return Me(l,{name:n.interface.getFunctionName(e),_contract:n,_key:e,getFragment:t,estimateGas:o,populateTransaction:s,send:i,staticCall:r,staticCallResult:a}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{const c=n.interface.getFunction(e);return ie(c,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),c}}),l}function pD(n,e){const t=function(...r){const i=n.interface.getEvent(e,r);return ie(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:r}}),i},s=function(...r){return new uD(n,t(...r),r)};return Me(s,{name:n.interface.getEventName(e),_contract:n,_key:e,getFragment:t}),Object.defineProperty(s,"fragment",{configurable:!1,enumerable:!0,get:()=>{const r=n.interface.getEvent(e);return ie(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),r}}),s}const rh=Symbol.for("_ethersInternal_contract"),ib=new WeakMap;function gD(n,e){ib.set(n[rh],e)}function Ss(n){return ib.get(n[rh])}function mD(n){return n&&typeof n=="object"&&"getTopicFilter"in n&&typeof n.getTopicFilter=="function"&&n.fragment}async function rm(n,e){let t,s=null;if(Array.isArray(e)){const i=function(o){if(Ot(o,32))return o;const a=n.interface.getEvent(o);return H(a,"unknown fragment","name",o),a.topicHash};t=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?t=[null]:typeof e=="string"?Ot(e,32)?t=[e]:(s=n.interface.getEvent(e),H(s,"unknown fragment","event",e),t=[s.topicHash]):mD(e)?t=await e.getTopicFilter():"fragment"in e?(s=e.fragment,t=[s.topicHash]):H(!1,"unknown event name","event",e);t=t.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const r=t.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:s,tag:r,topics:t}}async function bl(n,e){const{subs:t}=Ss(n);return t.get((await rm(n,e)).tag)||null}async function N0(n,e,t){const s=_o(n.runner);ie(s,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:r,tag:i,topics:o}=await rm(n,t),{addr:a,subs:l}=Ss(n);let c=l.get(i);if(!c){const f={address:a||n,topics:o},p=A=>{let w=r;if(w==null)try{w=n.interface.getEvent(A.topics[0])}catch{}if(w){const P=w,T=r?n.interface.decodeEventLog(r,A.data,A.topics):[];Hp(n,t,T,L=>new cD(n,L,t,P,A))}else Hp(n,t,[],P=>new ZE(n,P,t,A))};let m=[];c={tag:i,listeners:[],start:()=>{m.length||m.push(s.on(f,p))},stop:async()=>{if(m.length==0)return;let A=m;m=[],await Promise.all(A),s.off(f,p)}},l.set(i,c)}return c}let $p=Promise.resolve();async function yD(n,e,t,s){await $p;const r=await bl(n,e);if(!r)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:o,once:a})=>{const l=Array.from(t);s&&l.push(s(a?null:o));try{o.call(n,...l)}catch{}return!a}),r.listeners.length===0&&(r.stop(),Ss(n).subs.delete(r.tag)),i>0}async function Hp(n,e,t,s){try{await $p}catch{}const r=yD(n,e,t,s);return $p=r,await r}const uu=["then"];class Ml{target;interface;runner;filters;[rh];fallback;constructor(e,t,s,r){H(typeof e=="string"||hE(e),"invalid value for Contract target","target",e),s==null&&(s=null);const i=go.from(t);Me(this,{target:e,runner:s,interface:i}),Object.defineProperty(this,rh,{value:{}});let o,a=null,l=null;if(r){const f=_o(s);l=new sm(this.interface,f,r)}let c=new Map;if(typeof e=="string")if(Ot(e))a=e,o=Promise.resolve(e);else{const f=Do(s,"resolveName");if(!Zh(f))throw $t("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=f.resolveName(e).then(p=>{if(p==null)throw $t("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Ss(this).addr=p,p})}else o=e.getAddress().then(f=>{if(f==null)throw new Error("TODO");return Ss(this).addr=f,f});gD(this,{addrPromise:o,addr:a,deployTx:l,subs:c});const h=new Proxy({},{get:(f,p,m)=>{if(typeof p=="symbol"||uu.indexOf(p)>=0)return Reflect.get(f,p,m);try{return this.getEvent(p)}catch(E){if(!Fn(E,"INVALID_ARGUMENT")||E.argument!=="key")throw E}},has:(f,p)=>uu.indexOf(p)>=0?Reflect.has(f,p):Reflect.has(f,p)||this.interface.hasEvent(String(p))});return Me(this,{filters:h}),Me(this,{fallback:i.receive||i.fallback?dD(this):null}),new Proxy(this,{get:(f,p,m)=>{if(typeof p=="symbol"||p in f||uu.indexOf(p)>=0)return Reflect.get(f,p,m);try{return f.getFunction(p)}catch(E){if(!Fn(E,"INVALID_ARGUMENT")||E.argument!=="key")throw E}},has:(f,p)=>typeof p=="symbol"||p in f||uu.indexOf(p)>=0?Reflect.has(f,p):f.interface.hasFunction(p)})}connect(e){return new Ml(this.target,this.interface,e)}attach(e){return new Ml(e,this.interface,this.runner)}async getAddress(){return await Ss(this).addrPromise}async getDeployedCode(){const e=_o(this.runner);ie(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return t==="0x"?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const s=_o(this.runner);return ie(s!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((r,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return r(this);s.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return Ss(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),fD(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),pD(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,s){t==null&&(t=0),s==null&&(s="latest");const{addr:r,addrPromise:i}=Ss(this),o=r||await i,{fragment:a,topics:l}=await rm(this,e),c={address:o,topics:l,fromBlock:t,toBlock:s},h=_o(this.runner);return ie(h,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await h.getLogs(c)).map(f=>{let p=a;if(p==null)try{p=this.interface.getEvent(f.topics[0])}catch{}if(p)try{return new nm(f,this.interface,p)}catch(m){return new XE(f,m)}return new xc(f,h)})}async on(e,t){const s=await N0(this,"on",e);return s.listeners.push({listener:t,once:!1}),s.start(),this}async once(e,t){const s=await N0(this,"once",e);return s.listeners.push({listener:t,once:!0}),s.start(),this}async emit(e,...t){return await Hp(this,e,t,null)}async listenerCount(e){if(e){const r=await bl(this,e);return r?r.listeners.length:0}const{subs:t}=Ss(this);let s=0;for(const{listeners:r}of t.values())s+=r.length;return s}async listeners(e){if(e){const r=await bl(this,e);return r?r.listeners.map(({listener:i})=>i):[]}const{subs:t}=Ss(this);let s=[];for(const{listeners:r}of t.values())s=s.concat(r.map(({listener:i})=>i));return s}async off(e,t){const s=await bl(this,e);if(!s)return this;if(t){const r=s.listeners.map(({listener:i})=>i).indexOf(t);r>=0&&s.listeners.splice(r,1)}return(t==null||s.listeners.length===0)&&(s.stop(),Ss(this).subs.delete(s.tag)),this}async removeAllListeners(e){if(e){const t=await bl(this,e);if(!t)return this;t.stop(),Ss(this).subs.delete(t.tag)}else{const{subs:t}=Ss(this);for(const{tag:s,stop:r}of t.values())r(),t.delete(s)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends Ml{constructor(r,i=null){super(r,e,i)}}return t}static from(e,t,s){return s==null&&(s=null),new this(e,t,s)}}function vD(){return Ml}class Fl extends vD(){}function $f(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):H(!1,"unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}class AD{name;constructor(e){Me(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const ob=new RegExp("^(ipfs)://(.*)$","i"),D0=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),ob,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class Ea{provider;address;name;#e;#t;constructor(e,t,s){Me(this,{provider:e,address:t,name:s}),this.#e=null,this.#t=new Fl(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return this.#e==null&&(this.#e=(async()=>{try{return await this.#t.supportsInterface("0x9061b923")}catch(e){if(Fn(e,"CALL_EXCEPTION"))return!1;throw this.#e=null,e}})()),await this.#e}async#n(e,t){t=(t||[]).slice();const s=this.#t.interface;t.unshift(Vp(this.name));let r=null;await this.supportsWildcard()&&(r=s.getFunction(e),ie(r,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[ON(this.name,255),s.encodeFunctionData(r,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const i=await this.#t[e](...t);return r?s.decodeFunctionResult(r,i)[0]:i}catch(i){if(!Fn(i,"CALL_EXCEPTION"))throw i}return null}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await this.#n("addr(bytes32)");return i==null||i===sc?null:i}catch(i){if(Fn(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await this.#n("addr(bytes32,uint)",[i]);if(Ot(o,20))return Et(o)}let t=null;for(const i of this.provider.plugins)if(i instanceof AD&&i.supportsCoinType(e)){t=i;break}if(t==null)return null;const s=await this.#n("addr(bytes32,uint)",[e]);if(s==null||s==="0x")return null;const r=await t.decodeAddress(e,s);if(r!=null)return r;ie(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:s}})}async getText(e){const t=await this.#n("text(bytes32,string)",[e]);return t==null||t==="0x"?null:t}async getContentHash(){const e=await this.#n("contenthash(bytes32)");if(e==null||e==="0x")return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const r=t[1]==="e3010170"?"ipfs":"ipns",i=parseInt(t[4],16);if(t[5].length===i*2)return`${r}://${bx("0x"+t[2])}`}const s=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(s&&s[1].length===64)return`bzz://${s[1]}`;ie(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(t==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let s=0;s<D0.length;s++){const r=t.match(D0[s]);if(r==null)continue;const i=r[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const o=$f(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:t});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const l=(r[2]||"").split("/");if(l.length!==2)return e.push({type:`!${i}caip`,value:r[2]||""}),{url:null,linkage:e};const c=l[1],h=new Fl(l[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const v=await h.ownerOf(c);if(a!==v)return e.push({type:"!owner",value:v}),{url:null,linkage:e};e.push({type:"owner",value:v})}else if(i==="erc1155"){const v=await h.balanceOf(a,c);if(!v)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:v.toString()})}let f=await h[o](c);if(f==null||f==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:f}),i==="erc1155"&&(f=f.replace("{id}",Vi(c,32).substring(2)),e.push({type:"metadata-url-expanded",value:f})),f.match(/^ipfs:/i)&&(f=$f(f)),e.push({type:"metadata-url",value:f});let p={};const m=await new Yr(f).send();m.assertOk();try{p=m.bodyJson}catch{try{e.push({type:"!metadata",value:m.bodyText})}catch{const w=m.body;return w&&e.push({type:"!metadata",value:ye(w)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!p)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(p)});let E=p.image;if(typeof E!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!E.match(/^(https:\/\/|data:)/i)){if(E.match(ob)==null)return e.push({type:"!imageUrl-ipfs",value:E}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:E}),E=$f(E)}return e.push({type:"url",value:E}),{linkage:e,url:E}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),s=t.getPlugin("org.ethers.plugins.network.Ens");return ie(s,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),s.address}static async#s(e,t){const s=await Ea.getEnsAddress(e);try{const i=await new Fl(s,["function resolver(bytes32) view returns (address)"],e).resolver(Vp(t),{enableCcipRead:!0});return i===sc?null:i}catch(r){throw r}return null}static async fromName(e,t){let s=t;for(;;){if(s===""||s==="."||t!=="eth"&&s==="eth")return null;const r=await Ea.#s(e,s);if(r!=null){const i=new Ea(e,r,t);return s!==t&&!await i.supportsWildcard()?null:i}s=s.split(".").slice(1).join(".")}}}const O0=BigInt(0);function ct(n,e){return(function(t){return t==null?e:n(t)})}function cc(n,e){return(t=>{if(e&&t==null)return null;if(!Array.isArray(t))throw new Error("not an array");return t.map(s=>n(s))})}function Nc(n,e){return(t=>{const s={};for(const r in n){let i=r;if(e&&r in e&&!(i in t)){for(const o of e[r])if(o in t){i=o;break}}try{const o=n[r](t[i]);o!==void 0&&(s[r]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";ie(!1,`invalid value for value.${r} (${a})`,"BAD_DATA",{value:t})}}return s})}function wD(n){switch(n){case!0:case"true":return!0;case!1:case"false":return!1}H(!1,`invalid boolean; ${JSON.stringify(n)}`,"value",n)}function Fa(n){return H(Ot(n,!0),"invalid data","value",n),n}function Mn(n){return H(Ot(n,32),"invalid hash","value",n),n}const _D=Nc({address:Et,blockHash:Mn,blockNumber:tt,data:Fa,index:tt,removed:ct(wD,!1),topics:cc(Mn),transactionHash:Mn,transactionIndex:tt},{index:["logIndex"]});function ED(n){return _D(n)}const bD=Nc({hash:ct(Mn),parentHash:Mn,parentBeaconBlockRoot:ct(Mn,null),number:tt,timestamp:tt,nonce:ct(Fa),difficulty:Ie,gasLimit:Ie,gasUsed:Ie,stateRoot:ct(Mn,null),receiptsRoot:ct(Mn,null),blobGasUsed:ct(Ie,null),excessBlobGas:ct(Ie,null),miner:ct(Et),prevRandao:ct(Mn,null),extraData:Fa,baseFeePerGas:ct(Ie)},{prevRandao:["mixHash"]});function ID(n){const e=bD(n);return e.transactions=n.transactions.map(t=>typeof t=="string"?t:ab(t)),e}const CD=Nc({transactionIndex:tt,blockNumber:tt,transactionHash:Mn,address:Et,topics:cc(Mn),data:Fa,index:tt,blockHash:Mn},{index:["logIndex"]});function TD(n){return CD(n)}const SD=Nc({to:ct(Et,null),from:ct(Et,null),contractAddress:ct(Et,null),index:tt,root:ct(ye),gasUsed:Ie,blobGasUsed:ct(Ie,null),logsBloom:ct(Fa),blockHash:Mn,hash:Mn,logs:cc(TD),blockNumber:tt,cumulativeGasUsed:Ie,effectiveGasPrice:ct(Ie),blobGasPrice:ct(Ie,null),status:ct(tt),type:ct(tt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function PD(n){return SD(n)}function ab(n){n.to&&Ie(n.to)===O0&&(n.to="0x0000000000000000000000000000000000000000");const e=Nc({hash:Mn,index:ct(tt,void 0),type:t=>t==="0x"||t==null?0:tt(t),accessList:ct(Uo,null),blobVersionedHashes:ct(cc(Mn,!0),null),authorizationList:ct(cc(t=>{let s;if(t.signature)s=t.signature;else{let r=t.yParity;r==="0x1b"?r=0:r==="0x1c"&&(r=1),s=Object.assign({},t,{yParity:r})}return{address:Et(t.address),chainId:Ie(t.chainId),nonce:Ie(t.nonce),signature:Zt.from(s)}},!1),null),blockHash:ct(Mn,null),blockNumber:ct(tt,null),transactionIndex:ct(tt,null),from:Et,gasPrice:ct(Ie),maxPriorityFeePerGas:ct(Ie),maxFeePerGas:ct(Ie),maxFeePerBlobGas:ct(Ie,null),gasLimit:Ie,to:ct(Et,null),value:Ie,nonce:tt,data:Fa,creates:ct(Et,null),chainId:ct(Ie,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(n);if(e.to==null&&e.creates==null&&(e.creates=mk(e)),(n.type===1||n.type===2)&&n.accessList==null&&(e.accessList=[]),n.signature?e.signature=Zt.from(n.signature):e.signature=Zt.from(n),e.chainId==null){const t=e.signature.legacyChainId;t!=null&&(e.chainId=t)}return e.blockHash&&Ie(e.blockHash)===O0&&(e.blockHash=null),e}const RD="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Dc{name;constructor(e){Me(this,{name:e})}clone(){return new Dc(this.name)}}class ed extends Dc{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,t){e==null&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);const s={effectiveBlock:e};function r(i,o){let a=(t||{})[i];a==null&&(a=o),H(typeof a=="number",`invalud value for ${i}`,"costs",t),s[i]=a}r("txBase",21e3),r("txCreate",32e3),r("txDataZero",4),r("txDataNonzero",16),r("txAccessListStorageKey",1900),r("txAccessListAddress",2400),Me(this,s)}clone(){return new ed(this.effectiveBlock,this)}}class td extends Dc{address;targetNetwork;constructor(e,t){super("org.ethers.plugins.network.Ens"),Me(this,{address:e||RD,targetNetwork:t??1})}clone(){return new td(this.address,this.targetNetwork)}}class xD extends Dc{#e;#t;get url(){return this.#e}get processFunc(){return this.#t}constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#e=e,this.#t=t}clone(){return this}}const Hf=new Map;class xs{#e;#t;#n;constructor(e,t){this.#e=e,this.#t=Ie(t),this.#n=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#e}set name(e){this.#e=e}get chainId(){return this.#t}set chainId(e){this.#t=Ie(e,"chainId")}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Ie(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Ie(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Ie(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(this.#n.values())}attachPlugin(e){if(this.#n.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#n.set(e.name,e.clone()),this}getPlugin(e){return this.#n.get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){const e=new xs(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new ed;let s=t.txBase;if(e.to==null&&(s+=t.txCreate),e.data)for(let r=2;r<e.data.length;r+=2)e.data.substring(r,r+2)==="00"?s+=t.txDataZero:s+=t.txDataNonzero;if(e.accessList){const r=Uo(e.accessList);for(const i in r)s+=t.txAccessListAddress+t.txAccessListStorageKey*r[i].storageKeys.length}return s}static from(e){if(kD(),e==null)return xs.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const t=Hf.get(e);if(t)return t();if(typeof e=="bigint")return new xs("unknown",e);H(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){H(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const t=new xs(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&t.attachPlugin(new td(e.ensAddress,e.ensNetwork)),t}H(!1,"invalid network","network",e)}static register(e,t){typeof e=="number"&&(e=BigInt(e));const s=Hf.get(e);s&&H(!1,`conflicting network for ${JSON.stringify(s.name)}`,"nameOrChainId",e),Hf.set(e,t)}}function L0(n,e){const t=String(n);if(!t.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${n}`);const s=t.split(".");if(s.length===1&&s.push(""),s.length!==2)throw new Error(`invalid gwei value: ${n}`);for(;s[1].length<e;)s[1]+="0";if(s[1].length>9){let r=BigInt(s[1].substring(0,9));s[1].substring(9).match(/^0+$/)||r++,s[1]=r.toString()}return BigInt(s[0]+s[1])}function B0(n){return new xD(n,async(e,t,s)=>{s.setHeader("User-Agent","ethers");let r;try{const[i,o]=await Promise.all([s.send(),e()]);r=i;const a=r.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:L0(a.maxFee,9),maxPriorityFeePerGas:L0(a.maxPriorityFee,9)}}catch(i){ie(!1,`error encountered with polygon gas station (${JSON.stringify(s.url)})`,"SERVER_ERROR",{request:s,response:r,error:i})}})}let M0=!1;function kD(){if(M0)return;M0=!0;function n(e,t,s){const r=function(){const i=new xs(e,t);return s.ensNetwork!=null&&i.attachPlugin(new td(null,s.ensNetwork)),i.attachPlugin(new ed),(s.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};xs.register(e,r),xs.register(t,r),s.altNames&&s.altNames.forEach(i=>{xs.register(i,r)})}n("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),n("ropsten",3,{ensNetwork:3}),n("rinkeby",4,{ensNetwork:4}),n("goerli",5,{ensNetwork:5}),n("kovan",42,{ensNetwork:42}),n("sepolia",11155111,{ensNetwork:11155111}),n("holesky",17e3,{ensNetwork:17e3}),n("classic",61,{}),n("classicKotti",6,{}),n("arbitrum",42161,{ensNetwork:1}),n("arbitrum-goerli",421613,{}),n("arbitrum-sepolia",421614,{}),n("base",8453,{ensNetwork:1}),n("base-goerli",84531,{}),n("base-sepolia",84532,{}),n("bnb",56,{ensNetwork:1}),n("bnbt",97,{}),n("linea",59144,{ensNetwork:1}),n("linea-goerli",59140,{}),n("linea-sepolia",59141,{}),n("matic",137,{ensNetwork:1,plugins:[B0("https://gasstation.polygon.technology/v2")]}),n("matic-amoy",80002,{}),n("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[B0("https://gasstation-testnet.polygon.technology/v2")]}),n("optimism",10,{ensNetwork:1,plugins:[]}),n("optimism-goerli",420,{}),n("optimism-sepolia",11155420,{}),n("xdai",100,{ensNetwork:1})}function Gp(n){return JSON.parse(JSON.stringify(n))}class ND{#e;#t;#n;#s;constructor(e){this.#e=e,this.#t=null,this.#n=4e3,this.#s=-2}get pollingInterval(){return this.#n}set pollingInterval(e){this.#n=e}async#r(){try{const e=await this.#e.getBlockNumber();if(this.#s===-2){this.#s=e;return}if(e!==this.#s){for(let t=this.#s+1;t<=e;t++){if(this.#t==null)return;await this.#e.emit("block",t)}this.#s=e}}catch{}this.#t!=null&&(this.#t=this.#e._setTimeout(this.#r.bind(this),this.#n))}start(){this.#t||(this.#t=this.#e._setTimeout(this.#r.bind(this),this.#n),this.#r())}stop(){this.#t&&(this.#e._clearTimeout(this.#t),this.#t=null)}pause(e){this.stop(),e&&(this.#s=-2)}resume(){this.start()}}class im{#e;#t;#n;constructor(e){this.#e=e,this.#n=!1,this.#t=t=>{this._poll(t,this.#e)}}async _poll(e,t){throw new Error("sub-classes must override this")}start(){this.#n||(this.#n=!0,this.#t(-2),this.#e.on("block",this.#t))}stop(){this.#n&&(this.#n=!1,this.#e.off("block",this.#t))}pause(e){this.stop()}resume(){this.start()}}class DD extends im{#e;#t;constructor(e,t){super(e),this.#e=t,this.#t=-2}pause(e){e&&(this.#t=-2),super.pause(e)}async _poll(e,t){const s=await t.getBlock(this.#e);s!=null&&(this.#t===-2?this.#t=s.number:s.number>this.#t&&(t.emit(this.#e,s.number),this.#t=s.number))}}class OD extends im{#e;constructor(e,t){super(e),this.#e=Gp(t)}async _poll(e,t){throw new Error("@TODO")}}class LD extends im{#e;constructor(e,t){super(e),this.#e=t}async _poll(e,t){const s=await t.getTransactionReceipt(this.#e);s&&t.emit(this.#e,s)}}class om{#e;#t;#n;#s;#r;constructor(e,t){this.#e=e,this.#t=Gp(t),this.#n=this.#o.bind(this),this.#s=!1,this.#r=-2}async#o(e){if(this.#r===-2)return;const t=Gp(this.#t);t.fromBlock=this.#r+1,t.toBlock=e;const s=await this.#e.getLogs(t);if(s.length===0){this.#r<e-60&&(this.#r=e-60);return}for(const r of s)this.#e.emit(this.#t,r),this.#r=r.blockNumber}start(){this.#s||(this.#s=!0,this.#r===-2&&this.#e.getBlockNumber().then(e=>{this.#r=e}),this.#e.on("block",this.#n))}stop(){this.#s&&(this.#s=!1,this.#e.off("block",this.#n))}pause(e){this.stop(),e&&(this.#r=-2)}resume(){this.start()}}const BD=BigInt(2),MD=10;function hu(n){return n&&typeof n.then=="function"}function Cu(n,e){return n+":"+JSON.stringify(e,(t,s)=>{if(s==null)return"null";if(typeof s=="bigint")return`bigint:${s.toString()}`;if(typeof s=="string")return s.toLowerCase();if(typeof s=="object"&&!Array.isArray(s)){const r=Object.keys(s);return r.sort(),r.reduce((i,o)=>(i[o]=s[o],i),{})}return s})}class lb{name;constructor(e){Me(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function FD(n){return JSON.parse(JSON.stringify(n))}function Qp(n){return n=Array.from(new Set(n).values()),n.sort(),n}async function Gf(n,e){if(n==null)throw new Error("invalid event");if(Array.isArray(n)&&(n={topics:n}),typeof n=="string")switch(n){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:n,tag:n}}if(Ot(n,32)){const t=n.toLowerCase();return{type:"transaction",tag:Cu("tx",{hash:t}),hash:t}}if(n.orphan){const t=n;return{type:"orphan",tag:Cu("orphan",t),filter:FD(t)}}if(n.address||n.topics){const t=n,s={topics:(t.topics||[]).map(r=>r==null?null:Array.isArray(r)?Qp(r.map(i=>i.toLowerCase())):r.toLowerCase())};if(t.address){const r=[],i=[],o=a=>{Ot(a)?r.push(a):i.push((async()=>{r.push(await ls(a,e))})())};Array.isArray(t.address)?t.address.forEach(o):o(t.address),i.length&&await Promise.all(i),s.address=Qp(r.map(a=>a.toLowerCase()))}return{filter:s,tag:Cu("event",s),type:"event"}}H(!1,"unknown ProviderEvent","event",n)}function Qf(){return new Date().getTime()}const UD={cacheTimeout:250,pollingInterval:4e3};class VD{#e;#t;#n;#s;#r;#o;#i;#a;#h;#c;#p;#g;constructor(e,t){if(this.#g=Object.assign({},UD,t||{}),e==="any")this.#o=!0,this.#r=null;else if(e){const s=xs.from(e);this.#o=!1,this.#r=Promise.resolve(s),setTimeout(()=>{this.emit("network",s,null)},0)}else this.#o=!1,this.#r=null;this.#a=-1,this.#i=new Map,this.#e=new Map,this.#t=new Map,this.#n=null,this.#s=!1,this.#h=1,this.#c=new Map,this.#p=!1}get pollingInterval(){return this.#g.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#t.values())}attachPlugin(e){if(this.#t.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#t.set(e.name,e.connect(this)),this}getPlugin(e){return this.#t.get(e)||null}get disableCcipRead(){return this.#p}set disableCcipRead(e){this.#p=!!e}async#l(e){const t=this.#g.cacheTimeout;if(t<0)return await this._perform(e);const s=Cu(e.method,e);let r=this.#i.get(s);return r||(r=this._perform(e),this.#i.set(s,r),setTimeout(()=>{this.#i.get(s)===r&&this.#i.delete(s)},t)),await r}async ccipReadFetch(e,t,s){if(this.disableCcipRead||s.length===0||e.to==null)return null;const r=e.to.toLowerCase(),i=t.toLowerCase(),o=[];for(let a=0;a<s.length;a++){const l=s[a],c=l.replace("{sender}",r).replace("{data}",i),h=new Yr(c);l.indexOf("{data}")===-1&&(h.body={data:i,sender:r}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:h,index:a,urls:s});let f="unknown error",p;try{p=await h.send()}catch(m){o.push(m.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:h,result:{error:m}});continue}try{const m=p.bodyJson;if(m.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:h,result:m}),m.data;m.message&&(f=m.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:h,result:m})}catch{}ie(p.statusCode<400||p.statusCode>=500,`response not found during CCIP fetch: ${f}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:l,errorMessage:f}}),o.push(f)}ie(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:s,errorMessages:o}})}_wrapBlock(e,t){return new iD(ID(e),this)}_wrapLog(e,t){return new xc(ED(e),this)}_wrapTransactionReceipt(e,t){return new qE(PD(e),this)}_wrapTransactionResponse(e,t){return new kc(ab(e),this)}_detectNetwork(){ie(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){ie(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=tt(await this.#l({method:"getBlockNumber"}),"%response");return this.#a>=0&&(this.#a=e),e}_getAddress(e){return ls(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(Ot(e))return Ot(e,32)?e:Ws(e);if(typeof e=="bigint"&&(e=tt(e,"blockTag")),typeof e=="number")return e>=0?Ws(e):this.#a>=0?Ws(this.#a+e):this.getBlockNumber().then(t=>Ws(t+e));H(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const t=(e.topics||[]).map(l=>l==null?null:Array.isArray(l)?Qp(l.map(c=>c.toLowerCase())):l.toLowerCase()),s="blockHash"in e?e.blockHash:void 0,r=(l,c,h)=>{let f;switch(l.length){case 0:break;case 1:f=l[0];break;default:l.sort(),f=l}if(s&&(c!=null||h!=null))throw new Error("invalid filter");const p={};return f&&(p.address=f),t.length&&(p.topics=t),c&&(p.fromBlock=c),h&&(p.toBlock=h),s&&(p.blockHash=s),p};let i=[];if(e.address)if(Array.isArray(e.address))for(const l of e.address)i.push(this._getAddress(l));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(l=>typeof l!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(l=>r(l[0],l[1],l[2])):r(i,o,a)}_getTransactionRequest(e){const t=sh(e),s=[];if(["to","from"].forEach(r=>{if(t[r]==null)return;const i=ls(t[r],this);hu(i)?s.push((async function(){t[r]=await i})()):t[r]=i}),t.blockTag!=null){const r=this._getBlockTag(t.blockTag);hu(r)?s.push((async function(){t.blockTag=await r})()):t.blockTag=r}return s.length?(async function(){return await Promise.all(s),t})():t}async getNetwork(){if(this.#r==null){const r=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw this.#r===r&&(this.#r=null),i}})();return this.#r=r,(await r).clone()}const e=this.#r,[t,s]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==s.chainId&&(this.#o?(this.emit("network",s,t),this.#r===e&&(this.#r=Promise.resolve(s))):ie(!1,`network changed: ${t.chainId} => ${s.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:r,gasPrice:i,priorityFee:o}=await ss({_block:this.#y("latest",!1),gasPrice:(async()=>{try{const h=await this.#l({method:"getGasPrice"});return Ie(h,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const h=await this.#l({method:"getPriorityFee"});return Ie(h,"%response")}catch{}return null})()});let a=null,l=null;const c=this._wrapBlock(r,e);return c&&c.baseFeePerGas&&(l=o??BigInt("1000000000"),a=c.baseFeePerGas*BD+l),new x0(i,a,l)},s=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(s){const r=new Yr(s.url),i=await s.processFunc(t,this,r);return new x0(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return hu(t)&&(t=await t),Ie(await this.#l({method:"estimateGas",transaction:t}),"%response")}async#u(e,t,s){ie(s<MD,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const r=sh(e);try{return ye(await this._perform({method:"call",transaction:r,blockTag:t}))}catch(i){if(!this.disableCcipRead&&$g(i)&&i.data&&s>=0&&t==="latest"&&r.to!=null&&Xt(i.data,0,4)==="0x556f1830"){const o=i.data,a=await ls(r.to,this);let l;try{l=jD(Xt(i.data,4))}catch(f){ie(!1,f.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:r,info:{data:o}})}ie(l.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:r,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:l.errorArgs}});const c=await this.ccipReadFetch(r,l.calldata,l.urls);ie(c!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:r,info:{data:i.data,errorArgs:l.errorArgs}});const h={to:a,data:nn([l.selector,QD([c,l.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:h});try{const f=await this.#u(h,t,s+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},h),result:f}),f}catch(f){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},h),error:f}),f}}throw i}}async#d(e){const{value:t}=await ss({network:this.getNetwork(),value:e});return t}async call(e){const{tx:t,blockTag:s}=await ss({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#d(this.#u(t,s,e.enableCcipRead?0:-1))}async#f(e,t,s){let r=this._getAddress(t),i=this._getBlockTag(s);return(typeof r!="string"||typeof i!="string")&&([r,i]=await Promise.all([r,i])),await this.#d(this.#l(Object.assign(e,{address:r,blockTag:i})))}async getBalance(e,t){return Ie(await this.#f({method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return tt(await this.#f({method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return ye(await this.#f({method:"getCode"},e,t))}async getStorage(e,t,s){const r=Ie(t,"position");return ye(await this.#f({method:"getStorage",position:r},e,s))}async broadcastTransaction(e){const{blockNumber:t,hash:s,network:r}=await ss({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=zs.from(e);if(i.hash!==s)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,r).replaceableTransaction(t)}async#y(e,t){if(Ot(e,32))return await this.#l({method:"getBlock",blockHash:e,includeTransactions:t});let s=this._getBlockTag(e);return typeof s!="string"&&(s=await s),await this.#l({method:"getBlock",blockTag:s,includeTransactions:t})}async getBlock(e,t){const{network:s,params:r}=await ss({network:this.getNetwork(),params:this.#y(e,!!t)});return r==null?null:this._wrapBlock(r,s)}async getTransaction(e){const{network:t,params:s}=await ss({network:this.getNetwork(),params:this.#l({method:"getTransaction",hash:e})});return s==null?null:this._wrapTransactionResponse(s,t)}async getTransactionReceipt(e){const{network:t,params:s}=await ss({network:this.getNetwork(),params:this.#l({method:"getTransactionReceipt",hash:e})});if(s==null)return null;if(s.gasPrice==null&&s.effectiveGasPrice==null){const r=await this.#l({method:"getTransaction",hash:e});if(r==null)throw new Error("report this; could not find tx or effectiveGasPrice");s.effectiveGasPrice=r.gasPrice}return this._wrapTransactionReceipt(s,t)}async getTransactionResult(e){const{result:t}=await ss({network:this.getNetwork(),result:this.#l({method:"getTransactionResult",hash:e})});return t==null?null:ye(t)}async getLogs(e){let t=this._getFilter(e);hu(t)&&(t=await t);const{network:s,params:r}=await ss({network:this.getNetwork(),params:this.#l({method:"getLogs",filter:t})});return r.map(i=>this._wrapLog(i,s))}_getProvider(e){ie(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await Ea.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=Et(e);const t=Vp(e.substring(2).toLowerCase()+".addr.reverse");try{const s=await Ea.getEnsAddress(this),i=await new Fl(s,["function resolver(bytes32) view returns (address)"],this).resolver(t);if(i==null||i===sc)return null;const a=await new Fl(i,["function name(bytes32) view returns (string)"],this).name(t);return await this.resolveName(a)!==e?null:a}catch(s){if(Fn(s,"BAD_DATA")&&s.value==="0x"||Fn(s,"CALL_EXCEPTION"))return null;throw s}return null}async waitForTransaction(e,t,s){const r=t??1;return r===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const l=(async c=>{try{const h=await this.getTransactionReceipt(e);if(h!=null&&c-h.blockNumber+1>=r){i(h),a&&(clearTimeout(a),a=null);return}}catch(h){console.log("EEE",h)}this.once("block",l)});s!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",l),o($t("timeout","TIMEOUT",{reason:"timeout"})))},s)),l(await this.getBlockNumber())})}async waitForBlock(e){ie(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=this.#c.get(e);t&&(t.timer&&clearTimeout(t.timer),this.#c.delete(e))}_setTimeout(e,t){t==null&&(t=0);const s=this.#h++,r=()=>{this.#c.delete(s),e()};if(this.paused)this.#c.set(s,{timer:null,func:r,time:t});else{const i=setTimeout(r,t);this.#c.set(s,{timer:i,func:r,time:Qf()})}return s}_forEachSubscriber(e){for(const t of this.#e.values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new lb(e.type);case"block":{const t=new ND(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new DD(this,e.type);case"event":return new om(this,e.filter);case"transaction":return new LD(this,e.hash);case"orphan":return new OD(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const s of this.#e.values())if(s.subscriber===e){s.started&&s.subscriber.stop(),s.subscriber=t,s.started&&t.start(),this.#n!=null&&t.pause(this.#n);break}}async#m(e,t){let s=await Gf(e,this);return s.type==="event"&&t&&t.length>0&&t[0].removed===!0&&(s=await Gf({orphan:"drop-log",log:t[0]},this)),this.#e.get(s.tag)||null}async#v(e){const t=await Gf(e,this),s=t.tag;let r=this.#e.get(s);return r||(r={subscriber:this._getSubscriber(t),tag:s,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#e.set(s,r)),r}async on(e,t){const s=await this.#v(e);return s.listeners.push({listener:t,once:!1}),s.started||(s.subscriber.start(),s.started=!0,this.#n!=null&&s.subscriber.pause(this.#n)),this}async once(e,t){const s=await this.#v(e);return s.listeners.push({listener:t,once:!0}),s.started||(s.subscriber.start(),s.started=!0,this.#n!=null&&s.subscriber.pause(this.#n)),this}async emit(e,...t){const s=await this.#m(e,t);if(!s||s.listeners.length===0)return!1;const r=s.listeners.length;return s.listeners=s.listeners.filter(({listener:i,once:o})=>{const a=new T1(this,o?null:i,e);try{i.call(this,...t,a)}catch{}return!o}),s.listeners.length===0&&(s.started&&s.subscriber.stop(),this.#e.delete(s.tag)),r>0}async listenerCount(e){if(e){const s=await this.#m(e);return s?s.listeners.length:0}let t=0;for(const{listeners:s}of this.#e.values())t+=s.length;return t}async listeners(e){if(e){const s=await this.#m(e);return s?s.listeners.map(({listener:r})=>r):[]}let t=[];for(const{listeners:s}of this.#e.values())t=t.concat(s.map(({listener:r})=>r));return t}async off(e,t){const s=await this.#m(e);if(!s)return this;if(t){const r=s.listeners.map(({listener:i})=>i).indexOf(t);r>=0&&s.listeners.splice(r,1)}return(!t||s.listeners.length===0)&&(s.started&&s.subscriber.stop(),this.#e.delete(s.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:s,subscriber:r}=await this.#v(e);s&&r.stop(),this.#e.delete(t)}else for(const[t,{started:s,subscriber:r}]of this.#e)s&&r.stop(),this.#e.delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return this.#s}destroy(){this.removeAllListeners();for(const e of this.#c.keys())this._clearTimeout(e);this.#s=!0}get paused(){return this.#n!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#a=-1,this.#n!=null){if(this.#n==!!e)return;ie(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),this.#n=!!e;for(const t of this.#c.values())t.timer&&clearTimeout(t.timer),t.time=Qf()-t.time}resume(){if(this.#n!=null){this._forEachSubscriber(e=>e.resume()),this.#n=null;for(const e of this.#c.values()){let t=e.time;t<0&&(t=0),e.time=Qf(),setTimeout(e.func,t)}}}}function $D(n,e){try{const t=jp(n,e);if(t)return Ju(t)}catch{}return null}function jp(n,e){if(n==="0x")return null;try{const t=tt(Xt(n,e,e+32)),s=tt(Xt(n,t,t+32));return Xt(n,t+32,t+32+s)}catch{}return null}function F0(n){const e=_n(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function HD(n){if(n.length%32===0)return n;const e=new Uint8Array(Math.ceil(n.length/32)*32);return e.set(n),e}const GD=new Uint8Array([]);function QD(n){const e=[];let t=0;for(let s=0;s<n.length;s++)e.push(GD),t+=32;for(let s=0;s<n.length;s++){const r=rt(n[s]);e[s]=F0(t),e.push(F0(r.length)),e.push(HD(r)),t+=32+Math.ceil(r.length/32)*32}return nn(e)}const U0="0x0000000000000000000000000000000000000000000000000000000000000000";function jD(n){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};ie(va(n)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const t=Xt(n,0,32);ie(Xt(t,0,12)===Xt(U0,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Xt(t,12);try{const s=[],r=tt(Xt(n,32,64)),i=tt(Xt(n,r,r+32)),o=Xt(n,r+32);for(let a=0;a<i;a++){const l=$D(o,a*32);if(l==null)throw new Error("abort");s.push(l)}e.urls=s}catch{ie(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const s=jp(n,64);if(s==null)throw new Error("abort");e.calldata=s}catch{ie(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}ie(Xt(n,100,128)===Xt(U0,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Xt(n,96,100);try{const s=jp(n,128);if(s==null)throw new Error("abort");e.extraData=s}catch{ie(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(s=>e[s]),e}function ao(n,e){if(n.provider)return n.provider;ie(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function V0(n,e){let t=sh(e);if(t.to!=null&&(t.to=ls(t.to,n)),t.from!=null){const s=t.from;t.from=Promise.all([n.getAddress(),ls(s,n)]).then(([r,i])=>(H(r.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),r))}else t.from=n.getAddress();return await ss(t)}class zD{provider;constructor(e){Me(this,{provider:e||null})}async getNonce(e){return ao(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await V0(this,e)}async populateTransaction(e){const t=ao(this,"populateTransaction"),s=await V0(this,e);s.nonce==null&&(s.nonce=await this.getNonce("pending")),s.gasLimit==null&&(s.gasLimit=await this.estimateGas(s));const r=await this.provider.getNetwork();if(s.chainId!=null){const o=Ie(s.chainId);H(o===r.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else s.chainId=r.chainId;const i=s.maxFeePerGas!=null||s.maxPriorityFeePerGas!=null;if(s.gasPrice!=null&&(s.type===2||i)?H(!1,"eip-1559 transaction do not support gasPrice","tx",e):(s.type===0||s.type===1)&&i&&H(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(s.type===2||s.type==null)&&s.maxFeePerGas!=null&&s.maxPriorityFeePerGas!=null)s.type=2;else if(s.type===0||s.type===1){const o=await t.getFeeData();ie(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),s.gasPrice==null&&(s.gasPrice=o.gasPrice)}else{const o=await t.getFeeData();if(s.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(s.authorizationList&&s.authorizationList.length?s.type=4:s.type=2,s.gasPrice!=null){const a=s.gasPrice;delete s.gasPrice,s.maxFeePerGas=a,s.maxPriorityFeePerGas=a}else s.maxFeePerGas==null&&(s.maxFeePerGas=o.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(ie(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),s.gasPrice==null&&(s.gasPrice=o.gasPrice),s.type=0):ie(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(s.type===2||s.type===3||s.type===4)&&(s.maxFeePerGas==null&&(s.maxFeePerGas=o.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await ss(s)}async populateAuthorization(e){const t=Object.assign({},e);return t.chainId==null&&(t.chainId=(await ao(this,"getNetwork").getNetwork()).chainId),t.nonce==null&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return ao(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return ao(this,"call").call(await this.populateCall(e))}async resolveName(e){return await ao(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=ao(this,"sendTransaction"),s=await this.populateTransaction(e);delete s.from;const r=zs.from(s);return await t.broadcastTransaction(await this.signTransaction(r))}authorize(e){ie(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function WD(n){return JSON.parse(JSON.stringify(n))}class cb{#e;#t;#n;#s;#r;#o;constructor(e){this.#e=e,this.#t=null,this.#n=this.#i.bind(this),this.#s=!1,this.#r=null,this.#o=!1}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}async#i(e){try{this.#t==null&&(this.#t=this._subscribe(this.#e));let t=null;try{t=await this.#t}catch(i){if(!Fn(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(t==null){this.#t=null,this.#e._recoverSubscriber(this,this._recover(this.#e));return}const s=await this.#e.getNetwork();if(this.#r||(this.#r=s),this.#r.chainId!==s.chainId)throw new Error("chaid changed");if(this.#o)return;const r=await this.#e.send("eth_getFilterChanges",[t]);await this._emitResults(this.#e,r)}catch(t){console.log("@TODO",t)}this.#e.once("block",this.#n)}#a(){const e=this.#t;e&&(this.#t=null,e.then(t=>{this.#e.destroyed||this.#e.send("eth_uninstallFilter",[t])}))}start(){this.#s||(this.#s=!0,this.#i(-2))}stop(){this.#s&&(this.#s=!1,this.#o=!0,this.#a(),this.#e.off("block",this.#n))}pause(e){e&&this.#a(),this.#e.off("block",this.#n)}resume(){this.start()}}class KD extends cb{#e;constructor(e,t){super(e),this.#e=WD(t)}_recover(e){return new om(e,this.#e)}async _subscribe(e){return await e.send("eth_newFilter",[this.#e])}async _emitResults(e,t){for(const s of t)e.emit(this.#e,e._wrapLog(s,e._network))}}class qD extends cb{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const s of t)e.emit("pending",s)}}const JD="bigint,boolean,function,number,string,symbol".split(/,/g);function Tu(n){if(n==null||JD.indexOf(typeof n)>=0||typeof n.getAddress=="function")return n;if(Array.isArray(n))return n.map(Tu);if(typeof n=="object")return Object.keys(n).reduce((e,t)=>(e[t]=n[t],e),{});throw new Error(`should not happen: ${n} (${typeof n})`)}function YD(n){return new Promise(e=>{setTimeout(e,n)})}function ta(n){return n&&n.toLowerCase()}function $0(n){return n&&typeof n.pollingInterval=="number"}const ub={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class jf extends zD{address;constructor(e,t){super(e),t=Et(t),Me(this,{address:t})}connect(e){ie(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const t=Tu(e),s=[];if(t.from){const i=t.from;s.push((async()=>{const o=await ls(i,this.provider);H(o!=null&&o.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=o})())}else t.from=this.address;if(t.gasLimit==null&&s.push((async()=>{t.gasLimit=await this.provider.estimateGas({...t,from:this.address})})()),t.to!=null){const i=t.to;s.push((async()=>{t.to=await ls(i,this.provider)})())}s.length&&await Promise.all(s);const r=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[r])}async sendTransaction(e){const t=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(e);return await new Promise((r,i)=>{const o=[1e3,100];let a=0;const l=async()=>{try{const c=await this.provider.getTransaction(s);if(c!=null){r(c.replaceableTransaction(t));return}}catch(c){if(Fn(c,"CANCELLED")||Fn(c,"BAD_DATA")||Fn(c,"NETWORK_ERROR")||Fn(c,"UNSUPPORTED_OPERATION")){c.info==null&&(c.info={}),c.info.sendTransactionHash=s,i(c);return}if(Fn(c,"INVALID_ARGUMENT")&&(a++,c.info==null&&(c.info={}),c.info.sendTransactionHash=s,a>10)){i(c);return}this.provider.emit("error",$t("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:c}))}this.provider._setTimeout(()=>{l()},o.pop()||4e3)};l()})}async signTransaction(e){const t=Tu(e);if(t.from){const r=await ls(t.from,this.provider);H(r!=null&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=r}else t.from=this.address;const s=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[s])}async signMessage(e){const t=typeof e=="string"?jr(e):e;return await this.provider.send("personal_sign",[ye(t),this.address.toLowerCase()])}async signTypedData(e,t,s){const r=Tu(s),i=await Ts.resolveNames(e,t,r,async o=>{const a=await ls(o);return H(a!=null,"TypedData does not support null address","value",o),a});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Ts.getPayload(i.domain,t,i.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const t=typeof e=="string"?jr(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),ye(t)])}}class XD extends VD{#e;#t;#n;#s;#r;#o;#i;#a(){if(this.#s)return;const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");this.#s=setTimeout(()=>{this.#s=null;const t=this.#n;for(this.#n=[];t.length;){const s=[t.shift()];for(;t.length&&s.length!==this.#e.batchMaxCount;)if(s.push(t.shift()),JSON.stringify(s.map(i=>i.payload)).length>this.#e.batchMaxSize){t.unshift(s.pop());break}(async()=>{const r=s.length===1?s[0].payload:s.map(i=>i.payload);this.emit("debug",{action:"sendRpcPayload",payload:r});try{const i=await this._send(r);this.emit("debug",{action:"receiveRpcResult",result:i});for(const{resolve:o,reject:a,payload:l}of s){if(this.destroyed){a($t("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const c=i.filter(h=>h.id===l.id)[0];if(c==null){const h=$t("missing response for request","BAD_DATA",{value:i,info:{payload:l}});this.emit("error",h),a(h);continue}if("error"in c){a(this.getRpcError(l,c));continue}o(c.result)}}catch(i){this.emit("debug",{action:"receiveRpcError",error:i});for(const{reject:o}of s)o(i)}})()}},e)}constructor(e,t){super(e,t),this.#t=1,this.#e=Object.assign({},ub,t||{}),this.#n=[],this.#s=null,this.#o=null,this.#i=null;{let r=null;const i=new Promise(o=>{r=o});this.#r={promise:i,resolve:r}}const s=this._getOption("staticNetwork");typeof s=="boolean"?(H(!s||e!=="any","staticNetwork cannot be used on special network 'any'","options",t),s&&e!=null&&(this.#o=xs.from(e))):s&&(H(e==null||s.matches(e),"staticNetwork MUST match network object","options",t),this.#o=s)}_getOption(e){return this.#e[e]}get _network(){return ie(this.#o,"network is not available yet","NETWORK_ERROR"),this.#o}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let s=e.transaction;if(s&&s.type!=null&&Ie(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const r=await this.getFeeData();r.maxFeePerGas==null&&r.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},s,{type:void 0})}))}}const t=this.getRpcRequest(e);return t!=null?await this.send(t.method,t.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)if(e===!0){if(this.#o)return this.#o}else return e;return this.#i?await this.#i:this.ready?(this.#i=(async()=>{try{const t=xs.from(Ie(await this.send("eth_chainId",[])));return this.#i=null,t}catch(t){throw this.#i=null,t}})(),await this.#i):(this.#i=(async()=>{const t={id:this.#t++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:t});let s;try{s=(await this._send(t))[0],this.#i=null}catch(r){throw this.#i=null,this.emit("debug",{action:"receiveRpcError",error:r}),r}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return xs.from(Ie(s.result));throw this.getRpcError(t,s)})(),await this.#i)}_start(){this.#r==null||this.#r.resolve==null||(this.#r.resolve(),this.#r=null,(async()=>{for(;this.#o==null&&!this.destroyed;)try{this.#o=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",$t("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await YD(1e3)}this.#a()})())}async _waitUntilReady(){if(this.#r!=null)return await this.#r.promise}_getSubscriber(e){return e.type==="pending"?new qD(this):e.type==="event"?this._getOption("polling")?new om(this,e.filter):new KD(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new lb("orphan"):super._getSubscriber(e)}get ready(){return this.#r==null}getRpcTransaction(e){const t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(e[s]==null)return;let r=s;s==="gasLimit"&&(r="gas"),t[r]=Ws(Ie(e[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{e[s]!=null&&(t[s]=ye(e[s]))}),e.accessList&&(t.accessList=Uo(e.accessList)),e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.map(s=>s.toLowerCase())),e.authorizationList&&(t.authorizationList=e.authorizationList.map(s=>{const r=gE(s);return{address:r.address,nonce:Ws(r.nonce),chainId:Ws(r.chainId),yParity:Ws(r.signature.yParity),r:Ws(r.signature.r),s:Ws(r.signature.s)}})),t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[ta(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[ta(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[ta(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[ta(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(ta):e.filter.address=ta(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){const{method:s}=e,{error:r}=t;if(s==="eth_estimateGas"&&r.message){const a=r.message;if(!a.match(/revert/i)&&a.match(/insufficient funds/i))return $t("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:r}});if(a.match(/nonce/i)&&a.match(/too low/i))return $t("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:r}})}if(s==="eth_call"||s==="eth_estimateGas"){const a=zp(r),l=Ma.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",e.params[0],a?a.data:null);return l.info={error:r,payload:e},l}const i=JSON.stringify(eO(r));if(typeof r.message=="string"&&r.message.match(/user denied|ethers-user-denied/i))return $t("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:e,error:r}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const a=e.params[0];if(i.match(/insufficient funds|base fee exceeds gas limit/i))return $t("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:a,info:{error:r}});if(i.match(/nonce/i)&&i.match(/too low/i))return $t("nonce has already been used","NONCE_EXPIRED",{transaction:a,info:{error:r}});if(i.match(/replacement transaction/i)&&i.match(/underpriced/i))return $t("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:a,info:{error:r}});if(i.match(/only replay-protected/i))return $t("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:a,info:{error:r}}})}let o=!!i.match(/the method .* does not exist/i);return o||r&&r.details&&r.details.startsWith("Unauthorized method:")&&(o=!0),o?$t("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:r,payload:e}}):$t("could not coalesce error","UNKNOWN_ERROR",{error:r,payload:e})}send(e,t){if(this.destroyed)return Promise.reject($t("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const s=this.#t++,r=new Promise((i,o)=>{this.#n.push({resolve:i,reject:o,payload:{method:e,params:t,id:s,jsonrpc:"2.0"}})});return this.#a(),r}async getSigner(e){e==null&&(e=0);const t=this.send("eth_accounts",[]);if(typeof e=="number"){const r=await t;if(e>=r.length)throw new Error("no such account");return new jf(this,r[e])}const{accounts:s}=await ss({network:this.getNetwork(),accounts:t});e=Et(e);for(const r of s)if(Et(r)===e)return new jf(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(t=>new jf(this,t))}destroy(){this.#s&&(clearTimeout(this.#s),this.#s=null);for(const{payload:e,reject:t}of this.#n)t($t("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#n=[],super.destroy()}}class ZD extends XD{#e;constructor(e,t){super(e,t);let s=this._getOption("pollingInterval");s==null&&(s=ub.pollingInterval),this.#e=s}_getSubscriber(e){const t=super._getSubscriber(e);return $0(t)&&(t.pollingInterval=this.#e),t}get pollingInterval(){return this.#e}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");this.#e=e,this._forEachSubscriber(t=>{$0(t)&&(t.pollingInterval=this.#e)})}}function zp(n){if(n==null)return null;if(typeof n.message=="string"&&n.message.match(/revert/i)&&Ot(n.data))return{message:n.message,data:n.data};if(typeof n=="object"){for(const e in n){const t=zp(n[e]);if(t)return t}return null}if(typeof n=="string")try{return zp(JSON.parse(n))}catch{}return null}function Wp(n,e){if(n!=null){if(typeof n.message=="string"&&e.push(n.message),typeof n=="object")for(const t in n)Wp(n[t],e);if(typeof n=="string")try{return Wp(JSON.parse(n),e)}catch{}}}function eO(n){const e=[];return Wp(n,e),e}class mo extends ZD{#e;#t;constructor(e,t,s){const r=Object.assign({},s??{},{batchMaxCount:1});H(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(t,r),this.#t=null,s&&s.providerInfo&&(this.#t=s.providerInfo),this.#e=async(i,o)=>{const a={method:i,params:o};this.emit("debug",{action:"sendEip1193Request",payload:a});try{const l=await e.request(a);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const c=new Error(l.message);throw c.code=l.code,c.data=l.data,c.payload=a,this.emit("debug",{action:"receiveEip1193Error",error:c}),c}}}get providerInfo(){return this.#t}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){H(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const t=await this.#e(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){switch(t=JSON.parse(JSON.stringify(t)),t.error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`;break}return super.getRpcError(e,t)}async hasSigner(e){e==null&&(e=0);const t=await this.send("eth_accounts",[]);return typeof e=="number"?t.length>e:(e=e.toLowerCase(),t.filter(s=>s.toLowerCase()===e).length!==0)}async getSigner(e){if(e==null&&(e=0),!await this.hasSigner(e))try{await this.#e("eth_requestAccounts",[])}catch(t){const s=t.payload;throw this.getRpcError(s,{id:s.id,error:t})}return await super.getSigner(e)}static async discover(e){if(e==null&&(e={}),e.provider)return new mo(e.provider);const t=e.window?e.window:typeof window<"u"?window:null;if(t==null)return null;const s=e.anyProvider;if(s&&t.ethereum)return new mo(t.ethereum);if(!("addEventListener"in t&&"dispatchEvent"in t&&"removeEventListener"in t))return null;const r=e.timeout?e.timeout:300;return r===0?null:await new Promise((i,o)=>{let a=[];const l=f=>{a.push(f.detail),s&&c()},c=()=>{if(clearTimeout(h),a.length)if(e&&e.filter){const f=e.filter(a.map(p=>Object.assign({},p.info)));if(f==null)i(null);else if(f instanceof mo)i(f);else{let p=null;if(f.uuid&&(p=a.filter(E=>f.uuid===E.info.uuid)[0]),p){const{provider:m,info:E}=p;i(new mo(m,void 0,{providerInfo:E}))}else o($t("filter returned unknown info","UNSUPPORTED_OPERATION",{value:f}))}}else{const{provider:f,info:p}=a[0];i(new mo(f,void 0,{providerInfo:p}))}else i(null);t.removeEventListener("eip6963:announceProvider",l)},h=setTimeout(()=>{c()},r);t.addEventListener("eip6963:announceProvider",l),t.dispatchEvent(new Event("eip6963:requestProvider"))})}}const am=()=>typeof window<"u"&&window.ethereum?new mo(window.ethereum):null,qa=()=>typeof window<"u"&&typeof window.ethereum<"u",tO=async()=>{try{if(!qa())return{success:!1,error:"MetaMask   . MetaMask .",needInstall:!0};const n=am();if(!n)return{success:!1,error:" Provider   ."};const e=await window.ethereum.request({method:"eth_requestAccounts"});if(e&&e.length>0){const t=e[0],s=await n.getBalance(t),r=O1(s);return{success:!0,address:t,balance:r,provider:n}}return{success:!1,error:"  ."}}catch(n){return console.error("  :",n),n.code===4001?{success:!1,error:"  ."}:{success:!1,error:n.message||"    ."}}},nO=async()=>{try{if(!qa()||!am())return null;const e=await window.ethereum.request({method:"eth_accounts"});return e&&e.length>0?e[0]:null}catch(n){return console.error("   :",n),null}},hb=async n=>{try{const e=am();if(!e)return"0";const t=await e.getBalance(n);return O1(t)}catch(e){return console.error("   :",e),"0"}},sO=async()=>{try{const n=await nO();if(!n)return{connected:!1,address:null};const e=await hb(n);return{connected:!0,address:n,balance:e}}catch(n){return console.error("    :",n),{connected:!1,address:null}}},rO=n=>qa()?(window.ethereum.on("accountsChanged",n),()=>{window.ethereum.removeListener&&window.ethereum.removeListener("accountsChanged",n)}):null,iO=n=>qa()?(window.ethereum.on("chainChanged",n),()=>{window.ethereum.removeListener&&window.ethereum.removeListener("chainChanged",n)}):null,Su=n=>n>=1e9?(n/1e9).toFixed(1).replace(/\.0$/,"")+"B":n>=1e6?(n/1e6).toFixed(1).replace(/\.0$/,"")+"M":n>=1e4?(n/1e3).toFixed(1).replace(/\.0$/,"")+"K":n.toLocaleString(),Ae=Ic({isLoggedIn:!1,loginType:null,walletAddress:"",userBalance:"0 ETH",isWalletConnected:!1,walletProvider:null,isLoading:!1,currentUser:null,coins:0,totalCoin:0,catFragments:50,level:1,nftCount:0,miningLevel:1,huntingLevel:1,explorationLevel:1,productionLevel:1,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}),un=()=>{const n=()=>{const T=_t();T?(Ae.currentUser=T,Ae.isLoggedIn=!0,e(T.gameData||{})):(Ae.currentUser=null,Ae.isLoggedIn=!1)},e=T=>{Ae.coins=T.coins||0,Ae.totalCoin=T.totalCoin||0,Ae.catFragments=T.catFragments||50,Ae.level=T.level||1,Ae.nftCount=T.nftCount||0,Ae.miningLevel=T.miningLevel||1,Ae.huntingLevel=T.huntingLevel||1,Ae.explorationLevel=T.explorationLevel||1,Ae.productionLevel=T.productionLevel||1;const L=Q=>{const q=(Q||[]).slice(0,4);return q.length===4?q:[...q,...Array(4-q.length).fill(null)]};Ae.miningCats=L(T.miningCats),Ae.huntingCats=L(T.huntingCats),Ae.explorationCats=L(T.explorationCats),Ae.productionCats=L(T.productionCats),Ae.inventory=T.inventory||[]},t=async T=>{if(!Ae.currentUser)return console.warn("  ."),!1;try{return await tc(Ae.currentUser.id,T)?(e({...Ae.currentUser.gameData,...T}),Ae.currentUser&&(Ae.currentUser.gameData={...Ae.currentUser.gameData,...T},sessionStorage.setItem("currentUser",JSON.stringify(Ae.currentUser))),window.dispatchEvent(new CustomEvent("userDataUpdated")),!0):!1}catch(L){return console.error("   :",L),!1}},s=async T=>await t({coins:T}),r=async T=>await t({totalCoin:T}),i=async T=>await t({catFragments:T}),o=async T=>await t({level:T}),a=async T=>await t(T),l=async()=>{try{Ae.isLoading=!0;const T=await tO();return T.success?(Ae.isWalletConnected=!0,Ae.walletAddress=T.address,Ae.userBalance=`${parseFloat(T.balance).toFixed(4)} ETH`,Ae.walletProvider=T.provider,Ae.loginType="wallet",await c(T.address,T.balance),{success:!0,address:T.address,balance:T.balance}):T}catch(T){return console.error("  :",T),{success:!1,error:T.message||"    ."}}finally{Ae.isLoading=!1}},c=async(T,L)=>{let Q=Vg(T);Q||(Q=A1(T)),sessionStorage.setItem("currentUser",JSON.stringify(Q)),Ae.currentUser=Q,Ae.isLoggedIn=!0,Ae.loginType="wallet",e(Q.gameData||{})},h=()=>{Ae.isWalletConnected=!1,Ae.walletAddress="",Ae.userBalance="0 ETH",Ae.walletProvider=null,Ae.loginType=null;const T=_t();T&&T.loginType==="wallet"&&sessionStorage.removeItem("currentUser"),A()},f=async()=>{if(Ae.walletAddress)try{const T=await hb(Ae.walletAddress);Ae.userBalance=`${parseFloat(T).toFixed(4)} ETH`}catch(T){console.error("   :",T)}},p=async()=>{try{const T=_t();if(!T||T.loginType!=="wallet")return{connected:!1};const L=await sO();return L.connected&&L.address===T.walletAddress?(Ae.isWalletConnected=!0,Ae.walletAddress=L.address,Ae.userBalance=`${parseFloat(L.balance).toFixed(4)} ETH`,await c(L.address,L.balance)):h(),L}catch(T){return console.error("   :",T),{connected:!1}}},m=()=>{const T=rO(Q=>{Q&&Q.length>0?c(Q[0]):h()}),L=iO(()=>{});return()=>{T&&T(),L&&L()}},E=(T,L)=>{Ae.isLoggedIn=!0,Ae.walletAddress=T,Ae.userBalance=L,Ae.loginType=T.startsWith("0x")?"wallet":"email",n()},v=T=>{Ae.isLoading=T},A=()=>{Ae.isLoggedIn=!1,Ae.loginType=null,Ae.walletAddress="",Ae.userBalance="0 ETH",Ae.isWalletConnected=!1,Ae.walletProvider=null,Ae.currentUser=null,Ae.coins=0,Ae.totalCoin=0,Ae.catFragments=50,Ae.level=1,Ae.nftCount=0,sessionStorage.removeItem("currentUser")},w=he(()=>Su(Ae.coins)),P=he(()=>Su(Ae.totalCoin));return{state:oO(Ae),formattedCoins:w,formattedTotalCoin:P,loadCurrentUser:n,syncGameData:e,updateGameData:t,updateCoins:s,updateTotalCoin:r,updateCatFragments:i,updateLevel:o,updateMultiple:a,setWalletConnected:E,connectWalletToApp:l,disconnectWalletFromApp:h,updateWalletBalance:f,checkWalletStatus:p,setupWalletListeners:m,setUserData:T=>{Ae.nftCount=T.nftCount||0,Ae.gameLevel=T.gameLevel||1},setLoading:v,logout:A,formatNumber:Su}},oO=n=>new Proxy(n,{get(e,t){return e[t]},set(){return console.warn("   .  ."),!1}}),aO={__name:"App",setup(n){const e=bn(),t=un();Lt(async()=>{try{const{handleGoogleRedirect:l}=await v1(async()=>{const{handleGoogleRedirect:h}=await import("./firebaseAuth-C9kiYuEw.js");return{handleGoogleRedirect:h}},[]),c=await l();if(c&&c.success&&c.user){console.log("App.vue: Google  :",c.user.email);const h=JSON.parse(sessionStorage.getItem("currentUser")||"null");(!h||!h.id)&&(sessionStorage.setItem("currentUser",JSON.stringify(c.user)),console.log("App.vue:   ")),t.loadCurrentUser(),(e.currentRoute.value.path==="/login"||e.currentRoute.value.path==="/signup")&&(console.log("App.vue:    "),e.push("/home"));return}}catch{}t.loadCurrentUser();const a=JSON.parse(sessionStorage.getItem("currentUser")||"null");if(a&&a.loginType==="wallet"&&a.walletAddress)try{const l=await t.checkWalletStatus();l.connected&&console.log("App.vue:    :",l.address),t.setupWalletListeners()}catch(l){console.error("App.vue:    :",l)}});const s=$(null),r=$(!1),i=()=>{const a=localStorage.getItem("soundEnabled");return a!==null?a==="true":!0},o=()=>{s.value&&(i()?r.value||s.value.play().then(()=>{r.value=!0}).catch(()=>{}):(s.value.pause(),r.value=!1))};return Lt(()=>{try{s.value=new Audio,s.value.src=new URL("@/assets/audio/bgm.mp3",import.meta.url).href,s.value.loop=!0,s.value.volume=.5,o();const a=()=>{s.value&&i()&&!r.value&&s.value.play().then(()=>{r.value=!0}).catch(()=>{})};document.addEventListener("click",a,{once:!0}),document.addEventListener("touchstart",a,{once:!0}),window.addEventListener("soundSettingChanged",o)}catch{console.log("BGM    .")}}),cn(()=>{s.value&&(s.value.pause(),s.value=null),window.removeEventListener("soundSettingChanged",o)}),(a,l)=>{const c=LS("router-view");return M(),z_(c)}}},lO=()=>{};var H0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},cO=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const r=n[t++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=n[t++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=n[t++],o=n[t++],a=n[t++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=n[t++],o=n[t++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},fb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const i=n[r],o=r+1<n.length,a=o?n[r+1]:0,l=r+2<n.length,c=l?n[r+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),s.push(t[h],t[f],t[p],t[m])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(db(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):cO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const i=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;const c=r<n.length?t[n.charAt(r)]:64;++r;const f=r<n.length?t[n.charAt(r)]:64;if(++r,i==null||a==null||c==null||f==null)throw new uO;const p=i<<2|a>>4;if(s.push(p),c!==64){const m=a<<4&240|c>>2;if(s.push(m),f!==64){const E=c<<6&192|f;s.push(E)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class uO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hO=function(n){const e=db(n);return fb.encodeByteArray(e,!0)},ih=function(n){return hO(n).replace(/\./g,"")},pb=function(n){try{return fb.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=()=>dO().__FIREBASE_DEFAULTS__,pO=()=>{if(typeof process>"u"||typeof H0>"u")return;const n=H0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},gO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&pb(n[1]);return e&&JSON.parse(e)},nd=()=>{try{return lO()||fO()||pO()||gO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},gb=n=>nd()?.emulatorHosts?.[n],mO=n=>{const e=gb(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},mb=()=>nd()?.config,yb=n=>nd()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vb(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",r=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ih(JSON.stringify(t)),ih(JSON.stringify(o)),""].join(".")}const Ul={};function AO(){const n={prod:[],emulator:[]};for(const e of Object.keys(Ul))Ul[e]?n.emulator.push(e):n.prod.push(e);return n}function wO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let G0=!1;function Ab(n,e){if(typeof window>"u"||typeof document>"u"||!Ja(window.location.host)||Ul[n]===e||Ul[n]||G0)return;Ul[n]=e;function t(p){return`__firebase__banner__${p}`}const s="__firebase__banner",i=AO().prod.length>0;function o(){const p=document.getElementById(s);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{G0=!0,o()},p}function h(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=wO(s),m=t("text"),E=document.getElementById(m)||document.createElement("span"),v=t("learnmore"),A=document.getElementById(v)||document.createElement("a"),w=t("preprendIcon"),P=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const T=p.element;a(T),h(A,v);const L=c();l(P,w),T.append(P,E,A,L),document.body.appendChild(T)}i?(E.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _O(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jn())}function EO(){const n=nd()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wb(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function IO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CO(){const n=Jn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function TO(){return!EO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _b(){try{return typeof indexedDB=="object"}catch{return!1}}function Eb(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(t){e(t)}})}function SO(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO="FirebaseError";class sr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=PO,Object.setPrototypeOf(this,sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$o.prototype.create)}}class $o{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?RO(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new sr(r,a,s)}}function RO(n,e){return n.replace(xO,(t,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const xO=/\{\$([^}]+)}/g;function kO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Hi(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const r of t){if(!s.includes(r))return!1;const i=n[r],o=e[r];if(Q0(i)&&Q0(o)){if(!Hi(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!t.includes(r))return!1;return!0}function Q0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function NO(n,e){const t=new DO(n,e);return t.subscribe.bind(t)}class DO{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let r;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");OO(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:s},r.next===void 0&&(r.next=zf),r.error===void 0&&(r.error=zf),r.complete===void 0&&(r.complete=zf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OO(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function zf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=1e3,BO=2,MO=14400*1e3,FO=.5;function j0(n,e=LO,t=BO){const s=e*Math.pow(t,n),r=Math.round(FO*s*(Math.random()-.5)*2);return Math.min(MO,s+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(n){return n&&n._delegate?n._delegate:n}class tr{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new yO;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($O(e))try{this.getOrInitializeService({instanceIdentifier:uo})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=uo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=uo){return this.instances.has(e)}getOptions(e=uo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const r of s)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:VO(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=uo){return this.component?this.component.multipleInstances?e:uo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VO(n){return n===uo?void 0:n}function $O(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new UO(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ot||(ot={}));const GO={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},QO=ot.INFO,jO={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},zO=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),r=jO[e];if(r)console[r](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sd{constructor(e){this.name=e,this._logLevel=QO,this._logHandler=zO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...e),this._logHandler(this,ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...e),this._logHandler(this,ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...e),this._logHandler(this,ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...e),this._logHandler(this,ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...e),this._logHandler(this,ot.ERROR,...e)}}const WO=(n,e)=>e.some(t=>n instanceof t);let z0,W0;function KO(){return z0||(z0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qO(){return W0||(W0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bb=new WeakMap,Kp=new WeakMap,Ib=new WeakMap,Wf=new WeakMap,lm=new WeakMap;function JO(n){const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{t(Di(n.result)),r()},o=()=>{s(n.error),r()};n.addEventListener("success",i),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&bb.set(t,n)}).catch(()=>{}),lm.set(e,n),e}function YO(n){if(Kp.has(n))return;const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});Kp.set(n,e)}let qp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Kp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Ib.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Di(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function XO(n){qp=n(qp)}function ZO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Kf(this),e,...t);return Ib.set(s,e.sort?e.sort():[e]),Di(s)}:qO().includes(n)?function(...e){return n.apply(Kf(this),e),Di(bb.get(this))}:function(...e){return Di(n.apply(Kf(this),e))}}function eL(n){return typeof n=="function"?ZO(n):(n instanceof IDBTransaction&&YO(n),WO(n,KO())?new Proxy(n,qp):n)}function Di(n){if(n instanceof IDBRequest)return JO(n);if(Wf.has(n))return Wf.get(n);const e=eL(n);return e!==n&&(Wf.set(n,e),lm.set(e,n)),e}const Kf=n=>lm.get(n);function Cb(n,e,{blocked:t,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(n,e),a=Di(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Di(o.result),l.oldVersion,l.newVersion,Di(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const tL=["get","getKey","getAll","getAllKeys","count"],nL=["put","add","delete","clear"],qf=new Map;function K0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(qf.get(e))return qf.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,r=nL.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(r||tL.includes(t)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),r&&l.done]))[0]};return qf.set(e,i),i}XO(n=>({...n,get:(e,t,s)=>K0(e,t)||n.get(e,t,s),has:(e,t)=>!!K0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(rL(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function rL(n){return n.getComponent()?.type==="VERSION"}const Jp="@firebase/app",q0="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new sd("@firebase/app"),iL="@firebase/app-compat",oL="@firebase/analytics-compat",aL="@firebase/analytics",lL="@firebase/app-check-compat",cL="@firebase/app-check",uL="@firebase/auth",hL="@firebase/auth-compat",dL="@firebase/database",fL="@firebase/data-connect",pL="@firebase/database-compat",gL="@firebase/functions",mL="@firebase/functions-compat",yL="@firebase/installations",vL="@firebase/installations-compat",AL="@firebase/messaging",wL="@firebase/messaging-compat",_L="@firebase/performance",EL="@firebase/performance-compat",bL="@firebase/remote-config",IL="@firebase/remote-config-compat",CL="@firebase/storage",TL="@firebase/storage-compat",SL="@firebase/firestore",PL="@firebase/ai",RL="@firebase/firestore-compat",xL="firebase",kL="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="[DEFAULT]",NL={[Jp]:"fire-core",[iL]:"fire-core-compat",[aL]:"fire-analytics",[oL]:"fire-analytics-compat",[cL]:"fire-app-check",[lL]:"fire-app-check-compat",[uL]:"fire-auth",[hL]:"fire-auth-compat",[dL]:"fire-rtdb",[fL]:"fire-data-connect",[pL]:"fire-rtdb-compat",[gL]:"fire-fn",[mL]:"fire-fn-compat",[yL]:"fire-iid",[vL]:"fire-iid-compat",[AL]:"fire-fcm",[wL]:"fire-fcm-compat",[_L]:"fire-perf",[EL]:"fire-perf-compat",[bL]:"fire-rc",[IL]:"fire-rc-compat",[CL]:"fire-gcs",[TL]:"fire-gcs-compat",[SL]:"fire-fst",[RL]:"fire-fst-compat",[PL]:"fire-vertex","fire-js":"fire-js",[xL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc=new Map,DL=new Map,Xp=new Map;function J0(n,e){try{n.container.addComponent(e)}catch(t){Zr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Er(n){const e=n.name;if(Xp.has(e))return Zr.debug(`There were multiple attempts to register component ${e}.`),!1;Xp.set(e,n);for(const t of uc.values())J0(t,n);for(const t of DL.values())J0(t,n);return!0}function Ho(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function fr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oi=new $o("app","Firebase",OL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new tr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya=kL;function Tb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Yp,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Oi.create("bad-app-name",{appName:String(r)});if(t||(t=mb()),!t)throw Oi.create("no-options");const i=uc.get(r);if(i){if(Hi(t,i.options)&&Hi(s,i.config))return i;throw Oi.create("duplicate-app",{appName:r})}const o=new HO(r);for(const l of Xp.values())o.addComponent(l);const a=new LL(t,s,o);return uc.set(r,a),a}function hc(n=Yp){const e=uc.get(n);if(!e&&n===Yp&&mb())return Tb();if(!e)throw Oi.create("no-app",{appName:n});return e}function Y0(){return Array.from(uc.values())}function Vs(n,e,t){let s=NL[n]??n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zr.warn(o.join(" "));return}Er(new tr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL="firebase-heartbeat-database",ML=1,dc="firebase-heartbeat-store";let Jf=null;function Sb(){return Jf||(Jf=Cb(BL,ML,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(dc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Oi.create("idb-open",{originalErrorMessage:n.message})})),Jf}async function FL(n){try{const t=(await Sb()).transaction(dc),s=await t.objectStore(dc).get(Pb(n));return await t.done,s}catch(e){if(e instanceof sr)Zr.warn(e.message);else{const t=Oi.create("idb-get",{originalErrorMessage:e?.message});Zr.warn(t.message)}}}async function X0(n,e){try{const s=(await Sb()).transaction(dc,"readwrite");await s.objectStore(dc).put(e,Pb(n)),await s.done}catch(t){if(t instanceof sr)Zr.warn(t.message);else{const s=Oi.create("idb-set",{originalErrorMessage:t?.message});Zr.warn(s.message)}}}function Pb(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=1024,VL=30;class $L{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new GL(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Z0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>VL){const r=QL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Zr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Z0(),{heartbeatsToSend:t,unsentEntries:s}=HL(this._heartbeatsCache.heartbeats),r=ih(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Zr.warn(e),""}}}function Z0(){return new Date().toISOString().substring(0,10)}function HL(n,e=UL){const t=[];let s=n.slice();for(const r of n){const i=t.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),eA(t)>e){i.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),eA(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class GL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _b()?Eb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await FL(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return X0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return X0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function eA(n){return ih(JSON.stringify({version:2,heartbeats:n})).length}function QL(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(n){Er(new tr("platform-logger",e=>new sL(e),"PRIVATE")),Er(new tr("heartbeat",e=>new $L(e),"PRIVATE")),Vs(Jp,q0,n),Vs(Jp,q0,"esm2020"),Vs("fire-js","")}jL("");var zL="firebase",WL="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vs(zL,WL,"app");function Rb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KL=Rb,xb=new $o("auth","Firebase",Rb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=new sd("@firebase/auth");function qL(n,...e){oh.logLevel<=ot.WARN&&oh.warn(`Auth (${Ya}): ${n}`,...e)}function Pu(n,...e){oh.logLevel<=ot.ERROR&&oh.error(`Auth (${Ya}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(n,...e){throw cm(n,...e)}function gr(n,...e){return cm(n,...e)}function kb(n,e,t){const s={...KL(),[e]:t};return new $o("auth","Firebase",s).create(e,{appName:n.name})}function So(n){return kb(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cm(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return xb.create(n,...e)}function He(n,e,...t){if(!n)throw cm(e,...t)}function Hr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Pu(e),new Error(e)}function ti(n,e){n||Hr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(){return typeof self<"u"&&self.location?.href||""}function JL(){return tA()==="http:"||tA()==="https:"}function tA(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JL()||wb()||"connection"in navigator)?navigator.onLine:!0}function XL(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t){this.shortDelay=e,this.longDelay=t,ti(t>e,"Short delay should be less than long delay!"),this.isMobile=_O()||IO()}get(){return YL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(n,e){ti(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tB=new Lc(3e4,6e4);function hm(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Xa(n,e,t,s,r={}){return Db(n,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=Oc({key:n.config.apiKey,...o}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c={method:e,headers:l,...i};return bO()||(c.referrerPolicy="no-referrer"),n.emulatorConfig&&Ja(n.emulatorConfig.host)&&(c.credentials="include"),Nb.fetch()(await Ob(n,n.config.apiHost,t,a),c)})}async function Db(n,e,t){n._canInitEmulator=!1;const s={...ZL,...e};try{const r=new sB(n),i=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw du(n,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw du(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw du(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw du(n,"user-disabled",o);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw kb(n,h,c);ei(n,h)}}catch(r){if(r instanceof sr)throw r;ei(n,"network-request-failed",{message:String(r)})}}async function nB(n,e,t,s,r={}){const i=await Xa(n,e,t,s,r);return"mfaPendingCredential"in i&&ei(n,"multi-factor-auth-required",{_serverResponse:i}),i}async function Ob(n,e,t,s){const r=`${e}${t}?${s}`,i=n,o=i.config.emulator?um(n.config,r):`${n.config.apiScheme}://${r}`;return eB.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class sB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(gr(this.auth,"network-request-failed")),tB.get())})}}function du(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const r=gr(n,e,s);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rB(n,e){return Xa(n,"POST","/v1/accounts:delete",e)}async function ah(n,e){return Xa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iB(n,e=!1){const t=_s(n),s=await t.getIdToken(e),r=dm(s);He(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:Vl(Yf(r.auth_time)),issuedAtTime:Vl(Yf(r.iat)),expirationTime:Vl(Yf(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Yf(n){return Number(n)*1e3}function dm(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Pu("JWT malformed, contained fewer than 3 sections"),null;try{const r=pb(t);return r?JSON.parse(r):(Pu("Failed to decode base64 JWT payload"),null)}catch(r){return Pu("Caught error parsing JWT payload as JSON",r?.toString()),null}}function nA(n){const e=dm(n);return He(e,"internal-error"),He(typeof e.exp<"u","internal-error"),He(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fc(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof sr&&oB(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function oB({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vl(this.lastLoginAt),this.creationTime=Vl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lh(n){const e=n.auth,t=await n.getIdToken(),s=await fc(n,ah(e,{idToken:t}));He(s?.users.length,e,"internal-error");const r=s.users[0];n._notifyReloadListener(r);const i=r.providerUserInfo?.length?Lb(r.providerUserInfo):[],o=cB(n.providerData,i),a=n.isAnonymous,l=!(n.email&&r.passwordHash)&&!o?.length,c=a?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new eg(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(n,h)}async function lB(n){const e=_s(n);await lh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cB(n,e){return[...n.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function Lb(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uB(n,e){const t=await Db(n,{},async()=>{const s=Oc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=n.config,o=await Ob(n,r,"/v1/token",`key=${i}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return n.emulatorConfig&&Ja(n.emulatorConfig.host)&&(l.credentials="include"),Nb.fetch()(o,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function hB(n,e){return Xa(n,"POST","/v2/accounts:revokeToken",hm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken<"u","internal-error"),He(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){He(e.length!==0,"internal-error");const t=nA(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(He(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:r,expiresIn:i}=await uB(e,t);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:r,expirationTime:i}=t,o=new ba;return s&&(He(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(He(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(He(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ba,this.toJSON())}_performRefresh(){return Hr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(n,e){He(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class qs{constructor({uid:e,auth:t,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new aB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new eg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await fc(this,this.stsTokenManager.getToken(this.auth,e));return He(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return iB(this,e)}reload(){return lB(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new qs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await lh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fr(this.auth.app))return Promise.reject(So(this.auth));const e=await this.getIdToken();return await fc(this,rB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,r=t.email??void 0,i=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,l=t._redirectEventId??void 0,c=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:m,providerData:E,stsTokenManager:v}=t;He(f&&v,e,"internal-error");const A=ba.fromJSON(this.name,v);He(typeof f=="string",e,"internal-error"),Ai(s,e.name),Ai(r,e.name),He(typeof p=="boolean",e,"internal-error"),He(typeof m=="boolean",e,"internal-error"),Ai(i,e.name),Ai(o,e.name),Ai(a,e.name),Ai(l,e.name),Ai(c,e.name),Ai(h,e.name);const w=new qs({uid:f,auth:e,email:r,emailVerified:p,displayName:s,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:A,createdAt:c,lastLoginAt:h});return E&&Array.isArray(E)&&(w.providerData=E.map(P=>({...P}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,t,s=!1){const r=new ba;r.updateFromServerResponse(t);const i=new qs({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await lh(i),i}static async _fromGetAccountInfoResponse(e,t,s){const r=t.users[0];He(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?Lb(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,a=new ba;a.updateFromIdToken(s);const l=new qs({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new eg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=new Map;function Gr(n){ti(n instanceof Function,"Expected a class definition");let e=sA.get(n);return e?(ti(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,sA.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Bb.type="NONE";const rA=Bb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(n,e,t){return`firebase:${n}:${e}:${t}`}class Ia{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Ru(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ru("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ah(this.auth,{idToken:e}).catch(()=>{});return t?qs._fromGetAccountInfoResponse(this.auth,t,e):null}return qs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Ia(Gr(rA),e,s);const r=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=r[0]||Gr(rA);const o=Ru(s,e.config.apiKey,e.name);let a=null;for(const c of t)try{const h=await c._get(o);if(h){let f;if(typeof h=="string"){const p=await ah(e,{idToken:h}).catch(()=>{});if(!p)break;f=await qs._fromGetAccountInfoResponse(e,p,h)}else f=qs._fromJSON(e,h);c!==i&&(a=f),i=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ia(i,e,s):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Ia(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Vb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Mb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Hb(e))return"Blackberry";if(Gb(e))return"Webos";if(Fb(e))return"Safari";if((e.includes("chrome/")||Ub(e))&&!e.includes("edge/"))return"Chrome";if($b(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if(s?.length===2)return s[1]}return"Other"}function Mb(n=Jn()){return/firefox\//i.test(n)}function Fb(n=Jn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ub(n=Jn()){return/crios\//i.test(n)}function Vb(n=Jn()){return/iemobile/i.test(n)}function $b(n=Jn()){return/android/i.test(n)}function Hb(n=Jn()){return/blackberry/i.test(n)}function Gb(n=Jn()){return/webos/i.test(n)}function fm(n=Jn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function dB(n=Jn()){return fm(n)&&!!window.navigator?.standalone}function fB(){return CO()&&document.documentMode===10}function Qb(n=Jn()){return fm(n)||$b(n)||Gb(n)||Hb(n)||/windows phone/i.test(n)||Vb(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(n,e=[]){let t;switch(n){case"Browser":t=iA(Jn());break;case"Worker":t=`${iA(Jn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ya}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});s.onAbort=t,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gB(n,e={}){return Xa(n,"GET","/v2/passwordPolicy",hm(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB=6;class yB{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??mB,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(e,t,s,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oA(this),this.idTokenSubscription=new oA(this),this.beforeStateQueue=new pB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Gr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ia.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ah(this,{idToken:e}),s=await qs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(fr(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(s=a.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return He(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await lh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fr(this.app))return Promise.reject(So(this));const t=e?_s(e):null;return t&&He(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&He(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fr(this.app)?Promise.reject(So(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fr(this.app)?Promise.reject(So(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gB(this),t=new yB(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $o("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await hB(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Gr(e)||this._popupRedirectResolver;He(t,this,"argument-error"),this.redirectPersistenceManager=await Ia.create(this,[Gr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,r){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,s,r);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(fr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&qL(`Error while retrieving App Check token: ${e.error}`),e?.token}}function rd(n){return _s(n)}class oA{constructor(e){this.auth=e,this.observer=null,this.addObserver=NO(t=>this.observer=t)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AB(n){pm=n}function wB(n){return pm.loadJS(n)}function _B(){return pm.gapiScript}function EB(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bB(n,e){const t=Ho(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),i=t.getOptions();if(Hi(i,e??{}))return r;ei(r,"already-initialized")}return t.initialize({options:e})}function IB(n,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Gr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e?.popupRedirectResolver)}function CB(n,e,t){const s=rd(n);He(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=zb(e),{host:o,port:a}=TB(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){He(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),He(Hi(c,s.config.emulator)&&Hi(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=c,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,Ja(o)?(vb(`${i}//${o}${l}`),Ab("Auth",!0)):SB()}function zb(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function TB(n){const e=zb(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:aA(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:aA(o)}}}function aA(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function SB(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Hr("not implemented")}_getIdTokenResponse(e){return Hr("not implemented")}_linkToIdToken(e,t){return Hr("not implemented")}_getReauthenticationResolver(e){return Hr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ca(n,e){return nB(n,"POST","/v1/accounts:signInWithIdp",hm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PB="http://localhost";class Oo extends Wb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ei("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=t;if(!s||!r)return null;const o=new Oo(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Ca(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Ca(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ca(e,t)}buildRequest(){const e={requestUri:PB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Oc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc extends Kb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends Bc{constructor(){super("facebook.com")}static credential(e){return Oo._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ci.credential(e.oauthAccessToken)}catch{return null}}}Ci.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ci.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends Bc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Oo._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Fr.credential(t,s)}catch{return null}}}Fr.GOOGLE_SIGN_IN_METHOD="google.com";Fr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends Bc{constructor(){super("github.com")}static credential(e){return Oo._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ti.credential(e.oauthAccessToken)}catch{return null}}}Ti.GITHUB_SIGN_IN_METHOD="github.com";Ti.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Bc{constructor(){super("twitter.com")}static credential(e,t){return Oo._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Si.credential(t,s)}catch{return null}}}Si.TWITTER_SIGN_IN_METHOD="twitter.com";Si.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,r=!1){const i=await qs._fromIdTokenResponse(e,s,r),o=lA(s);return new Ua({user:i,providerId:o,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const r=lA(s);return new Ua({user:e,providerId:r,_tokenResponse:s,operationType:t})}}function lA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch extends sr{constructor(e,t,s,r){super(t.code,t.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,ch.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,r){return new ch(e,t,s,r)}}function qb(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ch._fromErrorAndOperation(n,i,e,s):i})}async function RB(n,e,t=!1){const s=await fc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ua._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xB(n,e,t=!1){const{auth:s}=n;if(fr(s.app))return Promise.reject(So(s));const r="reauthenticate";try{const i=await fc(n,qb(s,r,e,n),t);He(i.idToken,s,"internal-error");const o=dm(i.idToken);He(o,s,"internal-error");const{sub:a}=o;return He(n.uid===a,s,"user-mismatch"),Ua._forOperation(n,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&ei(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kB(n,e,t=!1){if(fr(n.app))return Promise.reject(So(n));const s="signIn",r=await qb(n,s,e),i=await Ua._fromIdTokenResponse(n,s,r);return t||await n._updateCurrentUser(i.user),i}function NB(n,e,t,s){return _s(n).onIdTokenChanged(e,t,s)}function DB(n,e,t){return _s(n).beforeAuthStateChanged(e,t)}function MJ(n,e,t,s){return _s(n).onAuthStateChanged(e,t,s)}const uh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(uh,"1"),this.storage.removeItem(uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OB=1e3,LB=10;class Yb extends Jb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Qb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),r=this.localCache[t];s!==r&&e(t,r,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!t&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);fB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,LB):r()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},OB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Yb.type="LOCAL";const BB=Yb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb extends Jb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Xb.type="SESSION";const Zb=Xb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MB(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const s=new id(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async c=>c(t.origin,i)),l=await MB(a);t.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}id.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=gm("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(){return window}function UB(n){mr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(){return typeof mr().WorkerGlobalScope<"u"&&typeof mr().importScripts=="function"}async function VB(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $B(){return navigator?.serviceWorker?.controller||null}function HB(){return eI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="firebaseLocalStorageDb",GB=1,hh="firebaseLocalStorage",nI="fbase_key";class Mc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function od(n,e){return n.transaction([hh],e?"readwrite":"readonly").objectStore(hh)}function QB(){const n=indexedDB.deleteDatabase(tI);return new Mc(n).toPromise()}function tg(){const n=indexedDB.open(tI,GB);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(hh,{keyPath:nI})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(hh)?e(s):(s.close(),await QB(),e(await tg()))})})}async function cA(n,e,t){const s=od(n,!0).put({[nI]:e,value:t});return new Mc(s).toPromise()}async function jB(n,e){const t=od(n,!1).get(e),s=await new Mc(t).toPromise();return s===void 0?null:s.value}function uA(n,e){const t=od(n,!0).delete(e);return new Mc(t).toPromise()}const zB=800,WB=3;class sI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>WB)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=id._getInstance(HB()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await VB(),!this.activeServiceWorker)return;this.sender=new FB(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$B()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tg();return await cA(e,uh,"1"),await uA(e,uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>cA(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>jB(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>uA(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=od(r,!1).getAll();return new Mc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sI.type="LOCAL";const KB=sI;new Lc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qB(n,e){return e?Gr(e):(He(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm extends Wb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ca(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ca(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ca(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function JB(n){return kB(n.auth,new mm(n),n.bypassAuthState)}function YB(n){const{auth:e,user:t}=n;return He(t,e,"internal-error"),xB(t,new mm(n),n.bypassAuthState)}async function XB(n){const{auth:e,user:t}=n;return He(t,e,"internal-error"),RB(t,new mm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,t,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JB;case"linkViaPopup":case"linkViaRedirect":return XB;case"reauthViaPopup":case"reauthViaRedirect":return YB;default:ei(this.auth,"internal-error")}}resolve(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZB=new Lc(2e3,1e4);class da extends rI{constructor(e,t,s,r,i){super(e,t,r,i),this.provider=s,this.authWindow=null,this.pollId=null,da.currentPopupAction&&da.currentPopupAction.cancel(),da.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return He(e,this.auth,"internal-error"),e}async onExecution(){ti(this.filter.length===1,"Popup operations only handle one event");const e=gm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,da.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ZB.get())};e()}}da.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM="pendingRedirect",xu=new Map;class tM extends rI{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=xu.get(this.auth._key());if(!e){try{const s=await nM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}xu.set(this.auth._key(),e)}return this.bypassAuthState||xu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nM(n,e){const t=iM(e),s=rM(n);if(!await s._isAvailable())return!1;const r=await s._get(t)==="true";return await s._remove(t),r}function sM(n,e){xu.set(n._key(),e)}function rM(n){return Gr(n._redirectPersistence)}function iM(n){return Ru(eM,n.config.apiKey,n.name)}async function oM(n,e){return await rd(n)._initializationPromise,iI(n,e,!1)}async function iI(n,e,t=!1){if(fr(n.app))return Promise.reject(So(n));const s=rd(n),r=qB(s,e),o=await new tM(s,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=600*1e3;class lM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!oI(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(gr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aM&&this.cachedEventUids.clear(),this.cachedEventUids.has(hA(e))}saveEventToCache(e){this.cachedEventUids.add(hA(e)),this.lastProcessedEventTime=Date.now()}}function hA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function oI({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function cM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uM(n,e={}){return Xa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dM=/^https?/;async function fM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await uM(n);for(const t of e)try{if(pM(t))return}catch{}ei(n,"unauthorized-domain")}function pM(n){const e=Zp(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===s}if(!dM.test(t))return!1;if(hM.test(n))return s===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=new Lc(3e4,6e4);function dA(){const n=mr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function mM(n){return new Promise((e,t)=>{function s(){dA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dA(),t(gr(n,"network-request-failed"))},timeout:gM.get()})}if(mr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(mr().gapi?.load)s();else{const r=EB("iframefcb");return mr()[r]=()=>{gapi.load?s():t(gr(n,"network-request-failed"))},wB(`${_B()}?onload=${r}`).catch(i=>t(i))}}).catch(e=>{throw ku=null,e})}let ku=null;function yM(n){return ku=ku||mM(n),ku}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=new Lc(5e3,15e3),AM="__/auth/iframe",wM="emulator/auth/iframe",_M={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bM(n){const e=n.config;He(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?um(e,wM):`https://${n.config.authDomain}/${AM}`,s={apiKey:e.apiKey,appName:n.name,v:Ya},r=EM.get(n.config.apiHost);r&&(s.eid=r);const i=n._getFrameworks();return i.length&&(s.fw=i.join(",")),`${t}?${Oc(s).slice(1)}`}async function IM(n){const e=await yM(n),t=mr().gapi;return He(t,n,"internal-error"),e.open({where:document.body,url:bM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_M,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=gr(n,"network-request-failed"),a=mr().setTimeout(()=>{i(o)},vM.get());function l(){mr().clearTimeout(a),r(s)}s.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TM=500,SM=600,PM="_blank",RM="http://localhost";class fA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xM(n,e,t,s=TM,r=SM){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...CM,width:s.toString(),height:r.toString(),top:i,left:o},c=Jn().toLowerCase();t&&(a=Ub(c)?PM:t),Mb(c)&&(e=e||RM,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[m,E])=>`${p}${m}=${E},`,"");if(dB(c)&&a!=="_self")return kM(e||"",a),new fA(null);const f=window.open(e||"",a,h);He(f,n,"popup-blocked");try{f.focus()}catch{}return new fA(f)}function kM(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM="__/auth/handler",DM="emulator/auth/handler",OM=encodeURIComponent("fac");async function pA(n,e,t,s,r,i){He(n.config.authDomain,n,"auth-domain-config-required"),He(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Ya,eventId:r};if(e instanceof Kb){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",kO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Bc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await n._getAppCheckToken(),c=l?`#${OM}=${encodeURIComponent(l)}`:"";return`${LM(n)}?${Oc(a).slice(1)}${c}`}function LM({config:n}){return n.emulator?um(n,DM):`https://${n.authDomain}/${NM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="webStorageSupport";class BM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zb,this._completeRedirectFn=iI,this._overrideRedirectResult=sM}async _openPopup(e,t,s,r){ti(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await pA(e,t,s,Zp(),r);return xM(e,i,gm())}async _openRedirect(e,t,s,r){await this._originValidation(e);const i=await pA(e,t,s,Zp(),r);return UB(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:i}=this.eventManagers[t];return r?Promise.resolve(r):(ti(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await IM(e),s=new lM(e);return t.register("authEvent",r=>(He(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Xf,{type:Xf},r=>{const i=r?.[0]?.[Xf];i!==void 0&&t(!!i),ei(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=fM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Qb()||Fb()||fm()}}const MM=BM;var gA="@firebase/auth",mA="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VM(n){Er(new tr("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;He(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jb(n)},c=new vB(s,r,i,l);return IB(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Er(new tr("auth-internal",e=>{const t=rd(e.getProvider("auth").getImmediate());return(s=>new FM(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vs(gA,mA,UM(n)),Vs(gA,mA,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=300,HM=yb("authIdTokenMaxAge")||$M;let yA=null;const GM=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>HM)return;const r=t?.token;yA!==r&&(yA=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function QM(n=hc()){const e=Ho(n,"auth");if(e.isInitialized())return e.getImmediate();const t=bB(n,{popupRedirectResolver:MM,persistence:[KB,BB,Zb]}),s=yb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=GM(i.toString());DB(t,o,()=>o(t.currentUser)),NB(t,a=>o(a))}}const r=gb("auth");return r&&CB(t,`http://${r}`),t}function jM(){return document.getElementsByTagName("head")?.[0]??document}AB({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=r=>{const i=gr("internal-error");i.customData=r,t(i)},s.type="text/javascript",s.charset="UTF-8",jM().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VM("Browser");var vA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Li,aI;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,I){function C(){}C.prototype=I.prototype,x.F=I.prototype,x.prototype=new C,x.prototype.constructor=x,x.D=function(S,b,N){for(var k=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)k[Ee-2]=arguments[Ee];return I.prototype[b].apply(S,k)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(x,I,C){C||(C=0);const S=Array(16);if(typeof I=="string")for(var b=0;b<16;++b)S[b]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(b=0;b<16;++b)S[b]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=x.g[0],C=x.g[1],b=x.g[2];let N=x.g[3],k;k=I+(N^C&(b^N))+S[0]+3614090360&4294967295,I=C+(k<<7&4294967295|k>>>25),k=N+(b^I&(C^b))+S[1]+3905402710&4294967295,N=I+(k<<12&4294967295|k>>>20),k=b+(C^N&(I^C))+S[2]+606105819&4294967295,b=N+(k<<17&4294967295|k>>>15),k=C+(I^b&(N^I))+S[3]+3250441966&4294967295,C=b+(k<<22&4294967295|k>>>10),k=I+(N^C&(b^N))+S[4]+4118548399&4294967295,I=C+(k<<7&4294967295|k>>>25),k=N+(b^I&(C^b))+S[5]+1200080426&4294967295,N=I+(k<<12&4294967295|k>>>20),k=b+(C^N&(I^C))+S[6]+2821735955&4294967295,b=N+(k<<17&4294967295|k>>>15),k=C+(I^b&(N^I))+S[7]+4249261313&4294967295,C=b+(k<<22&4294967295|k>>>10),k=I+(N^C&(b^N))+S[8]+1770035416&4294967295,I=C+(k<<7&4294967295|k>>>25),k=N+(b^I&(C^b))+S[9]+2336552879&4294967295,N=I+(k<<12&4294967295|k>>>20),k=b+(C^N&(I^C))+S[10]+4294925233&4294967295,b=N+(k<<17&4294967295|k>>>15),k=C+(I^b&(N^I))+S[11]+2304563134&4294967295,C=b+(k<<22&4294967295|k>>>10),k=I+(N^C&(b^N))+S[12]+1804603682&4294967295,I=C+(k<<7&4294967295|k>>>25),k=N+(b^I&(C^b))+S[13]+4254626195&4294967295,N=I+(k<<12&4294967295|k>>>20),k=b+(C^N&(I^C))+S[14]+2792965006&4294967295,b=N+(k<<17&4294967295|k>>>15),k=C+(I^b&(N^I))+S[15]+1236535329&4294967295,C=b+(k<<22&4294967295|k>>>10),k=I+(b^N&(C^b))+S[1]+4129170786&4294967295,I=C+(k<<5&4294967295|k>>>27),k=N+(C^b&(I^C))+S[6]+3225465664&4294967295,N=I+(k<<9&4294967295|k>>>23),k=b+(I^C&(N^I))+S[11]+643717713&4294967295,b=N+(k<<14&4294967295|k>>>18),k=C+(N^I&(b^N))+S[0]+3921069994&4294967295,C=b+(k<<20&4294967295|k>>>12),k=I+(b^N&(C^b))+S[5]+3593408605&4294967295,I=C+(k<<5&4294967295|k>>>27),k=N+(C^b&(I^C))+S[10]+38016083&4294967295,N=I+(k<<9&4294967295|k>>>23),k=b+(I^C&(N^I))+S[15]+3634488961&4294967295,b=N+(k<<14&4294967295|k>>>18),k=C+(N^I&(b^N))+S[4]+3889429448&4294967295,C=b+(k<<20&4294967295|k>>>12),k=I+(b^N&(C^b))+S[9]+568446438&4294967295,I=C+(k<<5&4294967295|k>>>27),k=N+(C^b&(I^C))+S[14]+3275163606&4294967295,N=I+(k<<9&4294967295|k>>>23),k=b+(I^C&(N^I))+S[3]+4107603335&4294967295,b=N+(k<<14&4294967295|k>>>18),k=C+(N^I&(b^N))+S[8]+1163531501&4294967295,C=b+(k<<20&4294967295|k>>>12),k=I+(b^N&(C^b))+S[13]+2850285829&4294967295,I=C+(k<<5&4294967295|k>>>27),k=N+(C^b&(I^C))+S[2]+4243563512&4294967295,N=I+(k<<9&4294967295|k>>>23),k=b+(I^C&(N^I))+S[7]+1735328473&4294967295,b=N+(k<<14&4294967295|k>>>18),k=C+(N^I&(b^N))+S[12]+2368359562&4294967295,C=b+(k<<20&4294967295|k>>>12),k=I+(C^b^N)+S[5]+4294588738&4294967295,I=C+(k<<4&4294967295|k>>>28),k=N+(I^C^b)+S[8]+2272392833&4294967295,N=I+(k<<11&4294967295|k>>>21),k=b+(N^I^C)+S[11]+1839030562&4294967295,b=N+(k<<16&4294967295|k>>>16),k=C+(b^N^I)+S[14]+4259657740&4294967295,C=b+(k<<23&4294967295|k>>>9),k=I+(C^b^N)+S[1]+2763975236&4294967295,I=C+(k<<4&4294967295|k>>>28),k=N+(I^C^b)+S[4]+1272893353&4294967295,N=I+(k<<11&4294967295|k>>>21),k=b+(N^I^C)+S[7]+4139469664&4294967295,b=N+(k<<16&4294967295|k>>>16),k=C+(b^N^I)+S[10]+3200236656&4294967295,C=b+(k<<23&4294967295|k>>>9),k=I+(C^b^N)+S[13]+681279174&4294967295,I=C+(k<<4&4294967295|k>>>28),k=N+(I^C^b)+S[0]+3936430074&4294967295,N=I+(k<<11&4294967295|k>>>21),k=b+(N^I^C)+S[3]+3572445317&4294967295,b=N+(k<<16&4294967295|k>>>16),k=C+(b^N^I)+S[6]+76029189&4294967295,C=b+(k<<23&4294967295|k>>>9),k=I+(C^b^N)+S[9]+3654602809&4294967295,I=C+(k<<4&4294967295|k>>>28),k=N+(I^C^b)+S[12]+3873151461&4294967295,N=I+(k<<11&4294967295|k>>>21),k=b+(N^I^C)+S[15]+530742520&4294967295,b=N+(k<<16&4294967295|k>>>16),k=C+(b^N^I)+S[2]+3299628645&4294967295,C=b+(k<<23&4294967295|k>>>9),k=I+(b^(C|~N))+S[0]+4096336452&4294967295,I=C+(k<<6&4294967295|k>>>26),k=N+(C^(I|~b))+S[7]+1126891415&4294967295,N=I+(k<<10&4294967295|k>>>22),k=b+(I^(N|~C))+S[14]+2878612391&4294967295,b=N+(k<<15&4294967295|k>>>17),k=C+(N^(b|~I))+S[5]+4237533241&4294967295,C=b+(k<<21&4294967295|k>>>11),k=I+(b^(C|~N))+S[12]+1700485571&4294967295,I=C+(k<<6&4294967295|k>>>26),k=N+(C^(I|~b))+S[3]+2399980690&4294967295,N=I+(k<<10&4294967295|k>>>22),k=b+(I^(N|~C))+S[10]+4293915773&4294967295,b=N+(k<<15&4294967295|k>>>17),k=C+(N^(b|~I))+S[1]+2240044497&4294967295,C=b+(k<<21&4294967295|k>>>11),k=I+(b^(C|~N))+S[8]+1873313359&4294967295,I=C+(k<<6&4294967295|k>>>26),k=N+(C^(I|~b))+S[15]+4264355552&4294967295,N=I+(k<<10&4294967295|k>>>22),k=b+(I^(N|~C))+S[6]+2734768916&4294967295,b=N+(k<<15&4294967295|k>>>17),k=C+(N^(b|~I))+S[13]+1309151649&4294967295,C=b+(k<<21&4294967295|k>>>11),k=I+(b^(C|~N))+S[4]+4149444226&4294967295,I=C+(k<<6&4294967295|k>>>26),k=N+(C^(I|~b))+S[11]+3174756917&4294967295,N=I+(k<<10&4294967295|k>>>22),k=b+(I^(N|~C))+S[2]+718787259&4294967295,b=N+(k<<15&4294967295|k>>>17),k=C+(N^(b|~I))+S[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(b+(k<<21&4294967295|k>>>11))&4294967295,x.g[2]=x.g[2]+b&4294967295,x.g[3]=x.g[3]+N&4294967295}s.prototype.v=function(x,I){I===void 0&&(I=x.length);const C=I-this.blockSize,S=this.C;let b=this.h,N=0;for(;N<I;){if(b==0)for(;N<=C;)r(this,x,N),N+=this.blockSize;if(typeof x=="string"){for(;N<I;)if(S[b++]=x.charCodeAt(N++),b==this.blockSize){r(this,S),b=0;break}}else for(;N<I;)if(S[b++]=x[N++],b==this.blockSize){r(this,S),b=0;break}}this.h=b,this.o+=I},s.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;I=this.o*8;for(var C=x.length-8;C<x.length;++C)x[C]=I&255,I/=256;for(this.v(x),x=Array(16),I=0,C=0;C<4;++C)for(let S=0;S<32;S+=8)x[I++]=this.g[C]>>>S&255;return x};function i(x,I){var C=a;return Object.prototype.hasOwnProperty.call(C,x)?C[x]:C[x]=I(x)}function o(x,I){this.h=I;const C=[];let S=!0;for(let b=x.length-1;b>=0;b--){const N=x[b]|0;S&&N==I||(C[b]=N,S=!1)}this.g=C}var a={};function l(x){return-128<=x&&x<128?i(x,function(I){return new o([I|0],I<0?-1:0)}):new o([x|0],x<0?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return f;if(x<0)return A(c(-x));const I=[];let C=1;for(let S=0;x>=C;S++)I[S]=x/C|0,C*=4294967296;return new o(I,0)}function h(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return A(h(x.substring(1),I));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=c(Math.pow(I,8));let S=f;for(let N=0;N<x.length;N+=8){var b=Math.min(8,x.length-N);const k=parseInt(x.substring(N,N+b),I);b<8?(b=c(Math.pow(I,b)),S=S.j(b).add(c(k))):(S=S.j(C),S=S.add(c(k)))}return S}var f=l(0),p=l(1),m=l(16777216);n=o.prototype,n.m=function(){if(v(this))return-A(this).m();let x=0,I=1;for(let C=0;C<this.g.length;C++){const S=this.i(C);x+=(S>=0?S:4294967296+S)*I,I*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(E(this))return"0";if(v(this))return"-"+A(this).toString(x);const I=c(Math.pow(x,6));var C=this;let S="";for(;;){const b=L(C,I).g;C=w(C,b.j(I));let N=((C.g.length>0?C.g[0]:C.h)>>>0).toString(x);if(C=b,E(C))return N+S;for(;N.length<6;)N="0"+N;S=N+S}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function E(x){if(x.h!=0)return!1;for(let I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function v(x){return x.h==-1}n.l=function(x){return x=w(this,x),v(x)?-1:E(x)?0:1};function A(x){const I=x.g.length,C=[];for(let S=0;S<I;S++)C[S]=~x.g[S];return new o(C,~x.h).add(p)}n.abs=function(){return v(this)?A(this):this},n.add=function(x){const I=Math.max(this.g.length,x.g.length),C=[];let S=0;for(let b=0;b<=I;b++){let N=S+(this.i(b)&65535)+(x.i(b)&65535),k=(N>>>16)+(this.i(b)>>>16)+(x.i(b)>>>16);S=k>>>16,N&=65535,k&=65535,C[b]=k<<16|N}return new o(C,C[C.length-1]&-2147483648?-1:0)};function w(x,I){return x.add(A(I))}n.j=function(x){if(E(this)||E(x))return f;if(v(this))return v(x)?A(this).j(A(x)):A(A(this).j(x));if(v(x))return A(this.j(A(x)));if(this.l(m)<0&&x.l(m)<0)return c(this.m()*x.m());const I=this.g.length+x.g.length,C=[];for(var S=0;S<2*I;S++)C[S]=0;for(S=0;S<this.g.length;S++)for(let b=0;b<x.g.length;b++){const N=this.i(S)>>>16,k=this.i(S)&65535,Ee=x.i(b)>>>16,ne=x.i(b)&65535;C[2*S+2*b]+=k*ne,P(C,2*S+2*b),C[2*S+2*b+1]+=N*ne,P(C,2*S+2*b+1),C[2*S+2*b+1]+=k*Ee,P(C,2*S+2*b+1),C[2*S+2*b+2]+=N*Ee,P(C,2*S+2*b+2)}for(x=0;x<I;x++)C[x]=C[2*x+1]<<16|C[2*x];for(x=I;x<2*I;x++)C[x]=0;return new o(C,0)};function P(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function T(x,I){this.g=x,this.h=I}function L(x,I){if(E(I))throw Error("division by zero");if(E(x))return new T(f,f);if(v(x))return I=L(A(x),I),new T(A(I.g),A(I.h));if(v(I))return I=L(x,A(I)),new T(A(I.g),I.h);if(x.g.length>30){if(v(x)||v(I))throw Error("slowDivide_ only works with positive integers.");for(var C=p,S=I;S.l(x)<=0;)C=Q(C),S=Q(S);var b=q(C,1),N=q(S,1);for(S=q(S,2),C=q(C,2);!E(S);){var k=N.add(S);k.l(x)<=0&&(b=b.add(C),N=k),S=q(S,1),C=q(C,1)}return I=w(x,b.j(I)),new T(b,I)}for(b=f;x.l(I)>=0;){for(C=Math.max(1,Math.floor(x.m()/I.m())),S=Math.ceil(Math.log(C)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),N=c(C),k=N.j(I);v(k)||k.l(x)>0;)C-=S,N=c(C),k=N.j(I);E(N)&&(N=p),b=b.add(N),x=w(x,k)}return new T(b,x)}n.B=function(x){return L(this,x).h},n.and=function(x){const I=Math.max(this.g.length,x.g.length),C=[];for(let S=0;S<I;S++)C[S]=this.i(S)&x.i(S);return new o(C,this.h&x.h)},n.or=function(x){const I=Math.max(this.g.length,x.g.length),C=[];for(let S=0;S<I;S++)C[S]=this.i(S)|x.i(S);return new o(C,this.h|x.h)},n.xor=function(x){const I=Math.max(this.g.length,x.g.length),C=[];for(let S=0;S<I;S++)C[S]=this.i(S)^x.i(S);return new o(C,this.h^x.h)};function Q(x){const I=x.g.length+1,C=[];for(let S=0;S<I;S++)C[S]=x.i(S)<<1|x.i(S-1)>>>31;return new o(C,x.h)}function q(x,I){const C=I>>5;I%=32;const S=x.g.length-C,b=[];for(let N=0;N<S;N++)b[N]=I>0?x.i(N+C)>>>I|x.i(N+C+1)<<32-I:x.i(N+C);return new o(b,x.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,aI=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Li=o}).apply(typeof vA<"u"?vA:typeof self<"u"?self:typeof window<"u"?window:{});var fu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lI,Il,cI,Nu,ng,uI,hI,dI;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof fu=="object"&&fu];for(var g=0;g<u.length;++g){var y=u[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=t(this);function r(u,g){if(g)e:{var y=s;u=u.split(".");for(var R=0;R<u.length-1;R++){var W=u[R];if(!(W in y))break e;y=y[W]}u=u[u.length-1],R=y[u],g=g(R),g!=R&&g!=null&&e(y,u,{configurable:!0,writable:!0,value:g})}}r("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(u){return u||function(g){var y=[],R;for(R in g)Object.prototype.hasOwnProperty.call(g,R)&&y.push([R,g[R]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function l(u,g,y){return u.call.apply(u.bind,arguments)}function c(u,g,y){return c=l,c.apply(null,arguments)}function h(u,g){var y=Array.prototype.slice.call(arguments,1);return function(){var R=y.slice();return R.push.apply(R,arguments),u.apply(this,R)}}function f(u,g){function y(){}y.prototype=g.prototype,u.Z=g.prototype,u.prototype=new y,u.prototype.constructor=u,u.Ob=function(R,W,Y){for(var fe=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)fe[Ze-2]=arguments[Ze];return g.prototype[W].apply(R,fe)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function m(u){const g=u.length;if(g>0){const y=Array(g);for(let R=0;R<g;R++)y[R]=u[R];return y}return[]}function E(u,g){for(let R=1;R<arguments.length;R++){const W=arguments[R];var y=typeof W;if(y=y!="object"?y:W?Array.isArray(W)?"array":y:"null",y=="array"||y=="object"&&typeof W.length=="number"){y=u.length||0;const Y=W.length||0;u.length=y+Y;for(let fe=0;fe<Y;fe++)u[y+fe]=W[fe]}else u.push(W)}}class v{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function A(u){o.setTimeout(()=>{throw u},0)}function w(){var u=x;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class P{constructor(){this.h=this.g=null}add(g,y){const R=T.get();R.set(g,y),this.h?this.h.next=R:this.g=R,this.h=R}}var T=new v(()=>new L,u=>u.reset());class L{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,q=!1,x=new P,I=()=>{const u=Promise.resolve(void 0);Q=()=>{u.then(C)}};function C(){for(var u;u=w();){try{u.h.call(u.g)}catch(y){A(y)}var g=T;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}q=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var N=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};o.addEventListener("test",y,g),o.removeEventListener("test",y,g)}catch{}return u})();function k(u){return/^[\s\xa0]*$/.test(u)}function Ee(u,g){b.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}f(Ee,b),Ee.prototype.init=function(u,g){const y=this.type=u.type,R=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(y=="mouseover"?g=u.fromElement:y=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ee.Z.h.call(this)},Ee.prototype.h=function(){Ee.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ne="closure_listenable_"+(Math.random()*1e6|0),V=0;function O(u,g,y,R,W){this.listener=u,this.proxy=null,this.src=g,this.type=y,this.capture=!!R,this.ha=W,this.key=++V,this.da=this.fa=!1}function K(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function de(u,g,y){for(const R in u)g.call(y,u[R],R,u)}function Ue(u,g){for(const y in u)g.call(void 0,u[y],y,u)}function Te(u){const g={};for(const y in u)g[y]=u[y];return g}const Ve="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ze(u,g){let y,R;for(let W=1;W<arguments.length;W++){R=arguments[W];for(y in R)u[y]=R[y];for(let Y=0;Y<Ve.length;Y++)y=Ve[Y],Object.prototype.hasOwnProperty.call(R,y)&&(u[y]=R[y])}}function ft(u){this.src=u,this.g={},this.h=0}ft.prototype.add=function(u,g,y,R,W){const Y=u.toString();u=this.g[Y],u||(u=this.g[Y]=[],this.h++);const fe=yt(u,g,R,W);return fe>-1?(g=u[fe],y||(g.fa=!1)):(g=new O(g,this.src,Y,!!R,W),g.fa=y,u.push(g)),g};function pt(u,g){const y=g.type;if(y in u.g){var R=u.g[y],W=Array.prototype.indexOf.call(R,g,void 0),Y;(Y=W>=0)&&Array.prototype.splice.call(R,W,1),Y&&(K(g),u.g[y].length==0&&(delete u.g[y],u.h--))}}function yt(u,g,y,R){for(let W=0;W<u.length;++W){const Y=u[W];if(!Y.da&&Y.listener==g&&Y.capture==!!y&&Y.ha==R)return W}return-1}var Z="closure_lm_"+(Math.random()*1e6|0),pe={};function ce(u,g,y,R,W){if(Array.isArray(g)){for(let Y=0;Y<g.length;Y++)ce(u,g[Y],y,R,W);return null}return y=j(y),u&&u[ne]?u.J(g,y,a(R)?!!R.capture:!1,W):ve(u,g,y,!1,R,W)}function ve(u,g,y,R,W,Y){if(!g)throw Error("Invalid event type");const fe=a(W)?!!W.capture:!!W;let Ze=z(u);if(Ze||(u[Z]=Ze=new ft(u)),y=Ze.add(g,y,R,fe,Y),y.proxy)return y;if(R=Qe(),y.proxy=R,R.src=u,R.listener=y,u.addEventListener)N||(W=fe),W===void 0&&(W=!1),u.addEventListener(g.toString(),R,W);else if(u.attachEvent)u.attachEvent(G(g.toString()),R);else if(u.addListener&&u.removeListener)u.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Qe(){function u(y){return g.call(u.src,u.listener,y)}const g=te;return u}function D(u,g,y,R,W){if(Array.isArray(g))for(var Y=0;Y<g.length;Y++)D(u,g[Y],y,R,W);else R=a(R)?!!R.capture:!!R,y=j(y),u&&u[ne]?(u=u.i,Y=String(g).toString(),Y in u.g&&(g=u.g[Y],y=yt(g,y,R,W),y>-1&&(K(g[y]),Array.prototype.splice.call(g,y,1),g.length==0&&(delete u.g[Y],u.h--)))):u&&(u=z(u))&&(g=u.g[g.toString()],u=-1,g&&(u=yt(g,y,R,W)),(y=u>-1?g[u]:null)&&B(y))}function B(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[ne])pt(g.i,u);else{var y=u.type,R=u.proxy;g.removeEventListener?g.removeEventListener(y,R,u.capture):g.detachEvent?g.detachEvent(G(y),R):g.addListener&&g.removeListener&&g.removeListener(R),(y=z(g))?(pt(y,u),y.h==0&&(y.src=null,g[Z]=null)):K(u)}}}function G(u){return u in pe?pe[u]:pe[u]="on"+u}function te(u,g){if(u.da)u=!0;else{g=new Ee(g,this);const y=u.listener,R=u.ha||u.src;u.fa&&B(u),u=y.call(R,g)}return u}function z(u){return u=u[Z],u instanceof ft?u:null}var U="__closure_events_fn_"+(Math.random()*1e9>>>0);function j(u){return typeof u=="function"?u:(u[U]||(u[U]=function(g){return u.handleEvent(g)}),u[U])}function ee(){S.call(this),this.i=new ft(this),this.M=this,this.G=null}f(ee,S),ee.prototype[ne]=!0,ee.prototype.removeEventListener=function(u,g,y,R){D(this,u,g,y,R)};function oe(u,g){var y,R=u.G;if(R)for(y=[];R;R=R.G)y.push(R);if(u=u.M,R=g.type||g,typeof g=="string")g=new b(g,u);else if(g instanceof b)g.target=g.target||u;else{var W=g;g=new b(R,u),ze(g,W)}W=!0;let Y,fe;if(y)for(fe=y.length-1;fe>=0;fe--)Y=g.g=y[fe],W=ae(Y,R,!0,g)&&W;if(Y=g.g=u,W=ae(Y,R,!0,g)&&W,W=ae(Y,R,!1,g)&&W,y)for(fe=0;fe<y.length;fe++)Y=g.g=y[fe],W=ae(Y,R,!1,g)&&W}ee.prototype.N=function(){if(ee.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const y=u.g[g];for(let R=0;R<y.length;R++)K(y[R]);delete u.g[g],u.h--}}this.G=null},ee.prototype.J=function(u,g,y,R){return this.i.add(String(u),g,!1,y,R)},ee.prototype.K=function(u,g,y,R){return this.i.add(String(u),g,!0,y,R)};function ae(u,g,y,R){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let W=!0;for(let Y=0;Y<g.length;++Y){const fe=g[Y];if(fe&&!fe.da&&fe.capture==y){const Ze=fe.listener,vn=fe.ha||fe.src;fe.fa&&pt(u.i,fe),W=Ze.call(vn,R)!==!1&&W}}return W&&!R.defaultPrevented}function Pe(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(u,g||0)}function ge(u){u.g=Pe(()=>{u.g=null,u.i&&(u.i=!1,ge(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class _e extends S{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ge(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function De(u){S.call(this),this.h=u,this.g={}}f(De,S);var nt=[];function $e(u){de(u.g,function(g,y){this.g.hasOwnProperty(y)&&B(g)},u),u.g={}}De.prototype.N=function(){De.Z.N.call(this),$e(this)},De.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var st=o.JSON.stringify,it=o.JSON.parse,hn=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function Zn(){}function es(){}var hs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gs(){b.call(this,"d")}f(Gs,b);function yn(){b.call(this,"c")}f(yn,b);var dn={},oi=null;function kt(){return oi=oi||new ee}dn.Ia="serverreachability";function sn(u){b.call(this,dn.Ia,u)}f(sn,b);function Ft(u){const g=kt();oe(g,new sn(g))}dn.STAT_EVENT="statevent";function In(u,g){b.call(this,dn.STAT_EVENT,u),this.stat=g}f(In,b);function Ut(u){const g=kt();oe(g,new In(g,u))}dn.Ja="timingevent";function $n(u,g){b.call(this,dn.Ja,u),this.size=g}f($n,b);function Wt(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function ai(){this.g=!0}ai.prototype.ua=function(){this.g=!1};function rf(u,g,y,R,W,Y){u.info(function(){if(u.g)if(Y){var fe="",Ze=Y.split("&");for(let Rt=0;Rt<Ze.length;Rt++){var vn=Ze[Rt].split("=");if(vn.length>1){const Pn=vn[0];vn=vn[1];const ir=Pn.split("_");fe=ir.length>=2&&ir[1]=="type"?fe+(Pn+"="+vn+"&"):fe+(Pn+"=redacted&")}}}else fe=null;else fe=Y;return"XMLHTTP REQ ("+R+") [attempt "+W+"]: "+g+`
`+y+`
`+fe})}function J(u,g,y,R,W,Y,fe){u.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+W+"]: "+g+`
`+y+`
`+Y+" "+fe})}function se(u,g,y,R){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+me(u,y)+(R?" "+R:"")})}function X(u,g){u.info(function(){return"TIMEOUT: "+g})}ai.prototype.info=function(){};function me(u,g){if(!u.g)return g;if(!g)return null;try{const Y=JSON.parse(g);if(Y){for(u=0;u<Y.length;u++)if(Array.isArray(Y[u])){var y=Y[u];if(!(y.length<2)){var R=y[1];if(Array.isArray(R)&&!(R.length<1)){var W=R[0];if(W!="noop"&&W!="stop"&&W!="close")for(let fe=1;fe<R.length;fe++)R[fe]=""}}}}return st(Y)}catch{return g}}var Se={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Je={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},We;function Ce(){}f(Ce,Zn),Ce.prototype.g=function(){return new XMLHttpRequest},We=new Ce;function ht(u){return encodeURIComponent(String(u))}function On(u){var g=1;u=u.split(":");const y=[];for(;g>0&&u.length;)y.push(u.shift()),g--;return u.length&&y.push(u.join(":")),y}function Vt(u,g,y,R){this.j=u,this.i=g,this.l=y,this.S=R||1,this.V=new De(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ds}function ds(){this.i=null,this.g="",this.h=!1}var fs={},Ht={};function Cn(u,g,y){u.M=1,u.A=Qc(rr(g)),u.u=y,u.R=!0,fn(u,null)}function fn(u,g){u.F=Date.now(),Hn(u),u.B=rr(u.A);var y=u.B,R=u.S;Array.isArray(R)||(R=[String(R)]),ay(y.i,"t",R),u.C=0,y=u.j.L,u.h=new ds,u.g=Cy(u.j,y?g:null,!u.u),u.P>0&&(u.O=new _e(c(u.Y,u,u.g),u.P)),g=u.V,y=u.g,R=u.ba;var W="readystatechange";Array.isArray(W)||(W&&(nt[0]=W.toString()),W=nt);for(let Y=0;Y<W.length;Y++){const fe=ce(y,W[Y],R||g.handleEvent,!1,g.h||g);if(!fe)break;g.g[fe.key]=fe}g=u.J?Te(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Ft(),rf(u.i,u.v,u.B,u.l,u.S,u.u)}Vt.prototype.ba=function(u){u=u.target;const g=this.O;g&&ui(u)==3?g.j():this.Y(u)},Vt.prototype.Y=function(u){try{if(u==this.g)e:{const Ze=ui(this.g),vn=this.g.ya(),Rt=this.g.ca();if(!(Ze<3)&&(Ze!=3||this.g&&(this.h.h||this.g.la()||py(this.g)))){this.K||Ze!=4||vn==7||(vn==8||Rt<=0?Ft(3):Ft(2)),ps(this);var g=this.g.ca();this.X=g;var y=It(this);if(this.o=g==200,J(this.i,this.v,this.B,this.l,this.S,Ze,g),this.o){if(this.U&&!this.L){t:{if(this.g){var R,W=this.g;if((R=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(R)){var Y=R;break t}}Y=null}if(u=Y)se(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Tn(this,u);else{this.o=!1,this.m=3,Ut(12),Ct(this),Kt(this);break e}}if(this.R){u=!0;let Pn;for(;!this.K&&this.C<y.length;)if(Pn=gt(this,y),Pn==Ht){Ze==4&&(this.m=4,Ut(14),u=!1),se(this.i,this.l,null,"[Incomplete Response]");break}else if(Pn==fs){this.m=4,Ut(15),se(this.i,this.l,y,"[Invalid Chunk]"),u=!1;break}else se(this.i,this.l,Pn,null),Tn(this,Pn);if(xe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ze!=4||y.length!=0||this.h.h||(this.m=1,Ut(16),u=!1),this.o=this.o&&u,!u)se(this.i,this.l,y,"[Invalid Chunked Response]"),Ct(this),Kt(this);else if(y.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),hf(fe),fe.P=!0,Ut(11))}}else se(this.i,this.l,y,null),Tn(this,y);Ze==4&&Ct(this),this.o&&!this.K&&(Ze==4?_y(this.j,this):(this.o=!1,Hn(this)))}else RT(this.g),g==400&&y.indexOf("Unknown SID")>0?(this.m=3,Ut(12)):(this.m=0,Ut(13)),Ct(this),Kt(this)}}}catch{}finally{}};function It(u){if(!xe(u))return u.g.la();const g=py(u.g);if(g==="")return"";let y="";const R=g.length,W=ui(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Ct(u),Kt(u),"";u.h.i=new o.TextDecoder}for(let Y=0;Y<R;Y++)u.h.h=!0,y+=u.h.i.decode(g[Y],{stream:!(W&&Y==R-1)});return g.length=0,u.h.g+=y,u.C=0,u.h.g}function xe(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function gt(u,g){var y=u.C,R=g.indexOf(`
`,y);return R==-1?Ht:(y=Number(g.substring(y,R)),isNaN(y)?fs:(R+=1,R+y>g.length?Ht:(g=g.slice(R,R+y),u.C=R+y,g)))}Vt.prototype.cancel=function(){this.K=!0,Ct(this)};function Hn(u){u.T=Date.now()+u.H,Gn(u,u.H)}function Gn(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Wt(c(u.aa,u),g)}function ps(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Vt.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(X(this.i,this.B),this.M!=2&&(Ft(),Ut(17)),Ct(this),this.m=2,Kt(this)):Gn(this,this.T-u)};function Kt(u){u.j.I==0||u.K||_y(u.j,u)}function Ct(u){ps(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,$e(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Tn(u,g){try{var y=u.j;if(y.I!=0&&(y.g==u||qo(y.h,u))){if(!u.L&&qo(y.h,u)&&y.I==3){try{var R=y.Ba.g.parse(g)}catch{R=null}if(Array.isArray(R)&&R.length==3){var W=R;if(W[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<u.F)qc(y),Wc(y);else break e;uf(y),Ut(18)}}else y.xa=W[1],0<y.xa-y.K&&W[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=Wt(c(y.Va,y),6e3));Ko(y.h)<=1&&y.ta&&(y.ta=void 0)}else eo(y,11)}else if((u.L||y.g==u)&&qc(y),!k(g))for(W=y.Ba.g.parse(g),g=0;g<W.length;g++){let Rt=W[g];const Pn=Rt[0];if(!(Pn<=y.K))if(y.K=Pn,Rt=Rt[1],y.I==2)if(Rt[0]=="c"){y.M=Rt[1],y.ba=Rt[2];const ir=Rt[3];ir!=null&&(y.ka=ir,y.j.info("VER="+y.ka));const to=Rt[4];to!=null&&(y.za=to,y.j.info("SVER="+y.za));const hi=Rt[5];hi!=null&&typeof hi=="number"&&hi>0&&(R=1.5*hi,y.O=R,y.j.info("backChannelRequestTimeoutMs_="+R)),R=y;const di=u.g;if(di){const Yc=di.g?di.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yc){var Y=R.h;Y.g||Yc.indexOf("spdy")==-1&&Yc.indexOf("quic")==-1&&Yc.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Xi(Y,Y.h),Y.h=null))}if(R.G){const df=di.g?di.g.getResponseHeader("X-HTTP-Session-Id"):null;df&&(R.wa=df,Bt(R.J,R.G,df))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-u.F,y.j.info("Handshake RTT: "+y.T+"ms")),R=y;var fe=u;if(R.na=Iy(R,R.L?R.ba:null,R.W),fe.L){sl(R.h,fe);var Ze=fe,vn=R.O;vn&&(Ze.H=vn),Ze.D&&(ps(Ze),Hn(Ze)),R.g=fe}else Ay(R);y.i.length>0&&Kc(y)}else Rt[0]!="stop"&&Rt[0]!="close"||eo(y,7);else y.I==3&&(Rt[0]=="stop"||Rt[0]=="close"?Rt[0]=="stop"?eo(y,7):cf(y):Rt[0]!="noop"&&y.l&&y.l.qa(Rt),y.A=0)}}Ft(4)}catch{}}var Sn=class{constructor(u,g){this.g=u,this.map=g}};function bs(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Cr(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ko(u){return u.h?1:u.g?u.g.size:0}function qo(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Xi(u,g){u.g?u.g.add(g):u.h=g}function sl(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}bs.prototype.cancel=function(){if(this.i=rl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function rl(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const y of u.g.values())g=g.concat(y.G);return g}return m(u.i)}var Gc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yT(u,g){if(u){u=u.split("&");for(let y=0;y<u.length;y++){const R=u[y].indexOf("=");let W,Y=null;R>=0?(W=u[y].substring(0,R),Y=u[y].substring(R+1)):W=u[y],g(W,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function li(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof li?(this.l=u.l,il(this,u.j),this.o=u.o,this.g=u.g,ol(this,u.u),this.h=u.h,of(this,ly(u.i)),this.m=u.m):u&&(g=String(u).match(Gc))?(this.l=!1,il(this,g[1]||"",!0),this.o=al(g[2]||""),this.g=al(g[3]||"",!0),ol(this,g[4]),this.h=al(g[5]||"",!0),of(this,g[6]||"",!0),this.m=al(g[7]||"")):(this.l=!1,this.i=new cl(null,this.l))}li.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(ll(g,sy,!0),":");var y=this.g;return(y||g=="file")&&(u.push("//"),(g=this.o)&&u.push(ll(g,sy,!0),"@"),u.push(ht(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&u.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(ll(y,y.charAt(0)=="/"?wT:AT,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",ll(y,ET)),u.join("")},li.prototype.resolve=function(u){const g=rr(this);let y=!!u.j;y?il(g,u.j):y=!!u.o,y?g.o=u.o:y=!!u.g,y?g.g=u.g:y=u.u!=null;var R=u.h;if(y)ol(g,u.u);else if(y=!!u.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var W=g.h.lastIndexOf("/");W!=-1&&(R=g.h.slice(0,W+1)+R)}if(W=R,W==".."||W==".")R="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){R=W.lastIndexOf("/",0)==0,W=W.split("/");const Y=[];for(let fe=0;fe<W.length;){const Ze=W[fe++];Ze=="."?R&&fe==W.length&&Y.push(""):Ze==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),R&&fe==W.length&&Y.push("")):(Y.push(Ze),R=!0)}R=Y.join("/")}else R=W}return y?g.h=R:y=u.i.toString()!=="",y?of(g,ly(u.i)):y=!!u.m,y&&(g.m=u.m),g};function rr(u){return new li(u)}function il(u,g,y){u.j=y?al(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function ol(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function of(u,g,y){g instanceof cl?(u.i=g,bT(u.i,u.l)):(y||(g=ll(g,_T)),u.i=new cl(g,u.l))}function Bt(u,g,y){u.i.set(g,y)}function Qc(u){return Bt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function al(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ll(u,g,y){return typeof u=="string"?(u=encodeURI(u).replace(g,vT),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function vT(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var sy=/[#\/\?@]/g,AT=/[#\?:]/g,wT=/[#\?]/g,_T=/[#\?@]/g,ET=/#/g;function cl(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Zi(u){u.g||(u.g=new Map,u.h=0,u.i&&yT(u.i,function(g,y){u.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}n=cl.prototype,n.add=function(u,g){Zi(this),this.i=null,u=Jo(this,u);let y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(g),this.h+=1,this};function ry(u,g){Zi(u),g=Jo(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function iy(u,g){return Zi(u),g=Jo(u,g),u.g.has(g)}n.forEach=function(u,g){Zi(this),this.g.forEach(function(y,R){y.forEach(function(W){u.call(g,W,R,this)},this)},this)};function oy(u,g){Zi(u);let y=[];if(typeof g=="string")iy(u,g)&&(y=y.concat(u.g.get(Jo(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)y=y.concat(u[g]);return y}n.set=function(u,g){return Zi(this),this.i=null,u=Jo(this,u),iy(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},n.get=function(u,g){return u?(u=oy(this,u),u.length>0?String(u[0]):g):g};function ay(u,g,y){ry(u,g),y.length>0&&(u.i=null,u.g.set(Jo(u,g),m(y)),u.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let R=0;R<g.length;R++){var y=g[R];const W=ht(y);y=oy(this,y);for(let Y=0;Y<y.length;Y++){let fe=W;y[Y]!==""&&(fe+="="+ht(y[Y])),u.push(fe)}}return this.i=u.join("&")};function ly(u){const g=new cl;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Jo(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function bT(u,g){g&&!u.j&&(Zi(u),u.i=null,u.g.forEach(function(y,R){const W=R.toLowerCase();R!=W&&(ry(this,R),ay(this,W,y))},u)),u.j=g}function IT(u,g){const y=new ai;if(o.Image){const R=new Image;R.onload=h(ci,y,"TestLoadImage: loaded",!0,g,R),R.onerror=h(ci,y,"TestLoadImage: error",!1,g,R),R.onabort=h(ci,y,"TestLoadImage: abort",!1,g,R),R.ontimeout=h(ci,y,"TestLoadImage: timeout",!1,g,R),o.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=u}else g(!1)}function CT(u,g){const y=new ai,R=new AbortController,W=setTimeout(()=>{R.abort(),ci(y,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:R.signal}).then(Y=>{clearTimeout(W),Y.ok?ci(y,"TestPingServer: ok",!0,g):ci(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(W),ci(y,"TestPingServer: error",!1,g)})}function ci(u,g,y,R,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),R(y)}catch{}}function TT(){this.g=new hn}function af(u){this.i=u.Sb||null,this.h=u.ab||!1}f(af,Zn),af.prototype.g=function(){return new jc(this.i,this.h)};function jc(u,g){ee.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(jc,ee),n=jc.prototype,n.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,hl(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ul(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,hl(this)),this.g&&(this.readyState=3,hl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;cy(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function cy(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?ul(this):hl(this),this.readyState==3&&cy(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,ul(this))},n.Na=function(u){this.g&&(this.response=u,ul(this))},n.ga=function(){this.g&&ul(this)};function ul(u){u.readyState=4,u.l=null,u.j=null,u.B=null,hl(u)}n.setRequestHeader=function(u,g){this.A.append(u,g)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=g.next();return u.join(`\r
`)};function hl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(jc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function uy(u){let g="";return de(u,function(y,R){g+=R,g+=":",g+=y,g+=`\r
`}),g}function lf(u,g,y){e:{for(R in y){var R=!1;break e}R=!0}R||(y=uy(y),typeof u=="string"?y!=null&&ht(y):Bt(u,g,y))}function qt(u){ee.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(qt,ee);var ST=/^https?$/i,PT=["POST","PUT"];n=qt.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,g,y,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():We.g(),this.g.onreadystatechange=p(c(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(Y){hy(this,Y);return}if(u=y||"",y=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var W in R)y.set(W,R[W]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Y of R.keys())y.set(Y,R.get(Y));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(y.keys()).find(Y=>Y.toLowerCase()=="content-type"),W=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(PT,g,void 0)>=0)||R||W||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,fe]of y)this.g.setRequestHeader(Y,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Y){hy(this,Y)}};function hy(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,dy(u),zc(u)}function dy(u){u.A||(u.A=!0,oe(u,"complete"),oe(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,oe(this,"complete"),oe(this,"abort"),zc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zc(this,!0)),qt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?fy(this):this.Xa())},n.Xa=function(){fy(this)};function fy(u){if(u.h&&typeof i<"u"){if(u.v&&ui(u)==4)setTimeout(u.Ca.bind(u),0);else if(oe(u,"readystatechange"),ui(u)==4){u.h=!1;try{const Y=u.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var R;if(R=Y===0){let fe=String(u.D).match(Gc)[1]||null;!fe&&o.self&&o.self.location&&(fe=o.self.location.protocol.slice(0,-1)),R=!ST.test(fe?fe.toLowerCase():"")}y=R}if(y)oe(u,"complete"),oe(u,"success");else{u.o=6;try{var W=ui(u)>2?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.ca()+"]",dy(u)}}finally{zc(u)}}}}function zc(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const y=u.g;u.g=null,g||oe(u,"ready");try{y.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ui(u){return u.g?u.g.readyState:0}n.ca=function(){try{return ui(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),it(g)}};function py(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function RT(u){const g={};u=(u.g&&ui(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<u.length;R++){if(k(u[R]))continue;var y=On(u[R]);const W=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const Y=g[W]||[];g[W]=Y,Y.push(y)}Ue(g,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function dl(u,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||g}function gy(u){this.za=0,this.i=[],this.j=new ai,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=dl("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=dl("baseRetryDelayMs",5e3,u),this.Za=dl("retryDelaySeedMs",1e4,u),this.Ta=dl("forwardChannelMaxRetries",2,u),this.va=dl("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new bs(u&&u.concurrentRequestLimit),this.Ba=new TT,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=gy.prototype,n.ka=8,n.I=1,n.connect=function(u,g,y,R){Ut(0),this.W=u,this.H=g||{},y&&R!==void 0&&(this.H.OSID=y,this.H.OAID=R),this.F=this.X,this.J=Iy(this,null,this.W),Kc(this)};function cf(u){if(my(u),u.I==3){var g=u.V++,y=rr(u.J);if(Bt(y,"SID",u.M),Bt(y,"RID",g),Bt(y,"TYPE","terminate"),fl(u,y),g=new Vt(u,u.j,g),g.M=2,g.A=Qc(rr(y)),y=!1,o.navigator&&o.navigator.sendBeacon)try{y=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!y&&o.Image&&(new Image().src=g.A,y=!0),y||(g.g=Cy(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Hn(g)}by(u)}function Wc(u){u.g&&(hf(u),u.g.cancel(),u.g=null)}function my(u){Wc(u),u.v&&(o.clearTimeout(u.v),u.v=null),qc(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Kc(u){if(!Cr(u.h)&&!u.m){u.m=!0;var g=u.Ea;Q||I(),q||(Q(),q=!0),x.add(g,u),u.D=0}}function xT(u,g){return Ko(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Wt(c(u.Ea,u,g),Ey(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const W=new Vt(this,this.j,u);let Y=this.o;if(this.U&&(Y?(Y=Te(Y),ze(Y,this.U)):Y=this.U),this.u!==null||this.R||(W.J=Y,Y=null),this.S)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var R=this.i[y];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(g+=R,g>4096){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=vy(this,W,g),y=rr(this.J),Bt(y,"RID",u),Bt(y,"CVER",22),this.G&&Bt(y,"X-HTTP-Session-Id",this.G),fl(this,y),Y&&(this.R?g="headers="+ht(uy(Y))+"&"+g:this.u&&lf(y,this.u,Y)),Xi(this.h,W),this.Ra&&Bt(y,"TYPE","init"),this.S?(Bt(y,"$req",g),Bt(y,"SID","null"),W.U=!0,Cn(W,y,null)):Cn(W,y,g),this.I=2}}else this.I==3&&(u?yy(this,u):this.i.length==0||Cr(this.h)||yy(this))};function yy(u,g){var y;g?y=g.l:y=u.V++;const R=rr(u.J);Bt(R,"SID",u.M),Bt(R,"RID",y),Bt(R,"AID",u.K),fl(u,R),u.u&&u.o&&lf(R,u.u,u.o),y=new Vt(u,u.j,y,u.D+1),u.u===null&&(y.J=u.o),g&&(u.i=g.G.concat(u.i)),g=vy(u,y,1e3),y.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Xi(u.h,y),Cn(y,R,g)}function fl(u,g){u.H&&de(u.H,function(y,R){Bt(g,R,y)}),u.l&&de({},function(y,R){Bt(g,R,y)})}function vy(u,g,y){y=Math.min(u.i.length,y);const R=u.l?c(u.l.Ka,u.l,u):null;e:{var W=u.i;let Ze=-1;for(;;){const vn=["count="+y];Ze==-1?y>0?(Ze=W[0].g,vn.push("ofs="+Ze)):Ze=0:vn.push("ofs="+Ze);let Rt=!0;for(let Pn=0;Pn<y;Pn++){var Y=W[Pn].g;const ir=W[Pn].map;if(Y-=Ze,Y<0)Ze=Math.max(0,W[Pn].g-100),Rt=!1;else try{Y="req"+Y+"_"||"";try{var fe=ir instanceof Map?ir:Object.entries(ir);for(const[to,hi]of fe){let di=hi;a(hi)&&(di=st(hi)),vn.push(Y+to+"="+encodeURIComponent(di))}}catch(to){throw vn.push(Y+"type="+encodeURIComponent("_badmap")),to}}catch{R&&R(ir)}}if(Rt){fe=vn.join("&");break e}}fe=void 0}return u=u.i.splice(0,y),g.G=u,fe}function Ay(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;Q||I(),q||(Q(),q=!0),x.add(g,u),u.A=0}}function uf(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Wt(c(u.Da,u),Ey(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,wy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Wt(c(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ut(10),Wc(this),wy(this))};function hf(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function wy(u){u.g=new Vt(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=rr(u.na);Bt(g,"RID","rpc"),Bt(g,"SID",u.M),Bt(g,"AID",u.K),Bt(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Bt(g,"TO",u.ia),Bt(g,"TYPE","xmlhttp"),fl(u,g),u.u&&u.o&&lf(g,u.u,u.o),u.O&&(u.g.H=u.O);var y=u.g;u=u.ba,y.M=1,y.A=Qc(rr(g)),y.u=null,y.R=!0,fn(y,u)}n.Va=function(){this.C!=null&&(this.C=null,Wc(this),uf(this),Ut(19))};function qc(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function _y(u,g){var y=null;if(u.g==g){qc(u),hf(u),u.g=null;var R=2}else if(qo(u.h,g))y=g.G,sl(u.h,g),R=1;else return;if(u.I!=0){if(g.o)if(R==1){y=g.u?g.u.length:0,g=Date.now()-g.F;var W=u.D;R=kt(),oe(R,new $n(R,y)),Kc(u)}else Ay(u);else if(W=g.m,W==3||W==0&&g.X>0||!(R==1&&xT(u,g)||R==2&&uf(u)))switch(y&&y.length>0&&(g=u.h,g.i=g.i.concat(y)),W){case 1:eo(u,5);break;case 4:eo(u,10);break;case 3:eo(u,6);break;default:eo(u,2)}}}function Ey(u,g){let y=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(y*=2),y*g}function eo(u,g){if(u.j.info("Error code "+g),g==2){var y=c(u.bb,u),R=u.Ua;const W=!R;R=new li(R||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||il(R,"https"),Qc(R),W?IT(R.toString(),y):CT(R.toString(),y)}else Ut(2);u.I=0,u.l&&u.l.pa(g),by(u),my(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function by(u){if(u.I=0,u.ja=[],u.l){const g=rl(u.h);(g.length!=0||u.i.length!=0)&&(E(u.ja,g),E(u.ja,u.i),u.h.i.length=0,m(u.i),u.i.length=0),u.l.oa()}}function Iy(u,g,y){var R=y instanceof li?rr(y):new li(y);if(R.g!="")g&&(R.g=g+"."+R.g),ol(R,R.u);else{var W=o.location;R=W.protocol,g=g?g+"."+W.hostname:W.hostname,W=+W.port;const Y=new li(null);R&&il(Y,R),g&&(Y.g=g),W&&ol(Y,W),y&&(Y.h=y),R=Y}return y=u.G,g=u.wa,y&&g&&Bt(R,y,g),Bt(R,"VER",u.ka),fl(u,R),R}function Cy(u,g,y){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new qt(new af({ab:y})):new qt(u.ma),g.Fa(u.L),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ty(){}n=Ty.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Jc(){}Jc.prototype.g=function(u,g){return new Is(u,g)};function Is(u,g){ee.call(this),this.g=new gy(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!k(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!k(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Yo(this)}f(Is,ee),Is.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Is.prototype.close=function(){cf(this.g)},Is.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.v&&(y={},y.__data__=st(u),u=y);g.i.push(new Sn(g.Ya++,u)),g.I==3&&Kc(g)},Is.prototype.N=function(){this.g.l=null,delete this.j,cf(this.g),delete this.g,Is.Z.N.call(this)};function Sy(u){Gs.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const y in g){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}f(Sy,Gs);function Py(){yn.call(this),this.status=1}f(Py,yn);function Yo(u){this.g=u}f(Yo,Ty),Yo.prototype.ra=function(){oe(this.g,"a")},Yo.prototype.qa=function(u){oe(this.g,new Sy(u))},Yo.prototype.pa=function(u){oe(this.g,new Py)},Yo.prototype.oa=function(){oe(this.g,"b")},Jc.prototype.createWebChannel=Jc.prototype.g,Is.prototype.send=Is.prototype.o,Is.prototype.open=Is.prototype.m,Is.prototype.close=Is.prototype.close,dI=function(){return new Jc},hI=function(){return kt()},uI=dn,ng={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Se.NO_ERROR=0,Se.TIMEOUT=8,Se.HTTP_ERROR=6,Nu=Se,Je.COMPLETE="complete",cI=Je,es.EventType=hs,hs.OPEN="a",hs.CLOSE="b",hs.ERROR="c",hs.MESSAGE="d",ee.prototype.listen=ee.prototype.J,Il=es,qt.prototype.listenOnce=qt.prototype.K,qt.prototype.getLastError=qt.prototype.Ha,qt.prototype.getLastErrorCode=qt.prototype.ya,qt.prototype.getStatus=qt.prototype.ca,qt.prototype.getResponseJson=qt.prototype.La,qt.prototype.getResponseText=qt.prototype.la,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Fa,lI=qt}).apply(typeof fu<"u"?fu:typeof self<"u"?self:typeof window<"u"?window:{});const AA="@firebase/firestore",wA="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jn.UNAUTHENTICATED=new jn(null),jn.GOOGLE_CREDENTIALS=new jn("google-credentials-uid"),jn.FIRST_PARTY=new jn("first-party-uid"),jn.MOCK_USER=new jn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Za="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=new sd("@firebase/firestore");function ia(){return Lo.logLevel}function we(n,...e){if(Lo.logLevel<=ot.DEBUG){const t=e.map(ym);Lo.debug(`Firestore (${Za}): ${n}`,...t)}}function ni(n,...e){if(Lo.logLevel<=ot.ERROR){const t=e.map(ym);Lo.error(`Firestore (${Za}): ${n}`,...t)}}function Va(n,...e){if(Lo.logLevel<=ot.WARN){const t=e.map(ym);Lo.warn(`Firestore (${Za}): ${n}`,...t)}}function ym(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,fI(n,s,t)}function fI(n,e,t){let s=`FIRESTORE (${Za}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ni(s),new Error(s)}function bt(n,e,t,s){let r="Unexpected state";typeof t=="string"?r=t:s=t,n||fI(e,r,s)}function qe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends sr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(jn.UNAUTHENTICATED)))}shutdown(){}}class WM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class KM{constructor(e){this.t=e,this.currentUser=jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){bt(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,t(l)):Promise.resolve();let i=new Bi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Bi,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await r(this.currentUser)}))},a=l=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Bi)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(bt(typeof s.accessToken=="string",31837,{l:s}),new pI(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string",2055,{h:e}),new jn(e)}}class qM{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=jn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class JM{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new qM(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(jn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _A{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YM{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){bt(this.o===void 0,3512);const s=i=>{i.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,we("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>s(i)))};const r=i=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>r(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _A(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(bt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new _A(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=XM(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<t&&(s+=e.charAt(r[i]%62))}return s}}function at(n,e){return n<e?-1:n>e?1:0}function sg(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const r=n.charAt(s),i=e.charAt(s);if(r!==i)return Zf(r)===Zf(i)?at(r,i):Zf(r)?1:-1}return at(n.length,e.length)}const ZM=55296,eF=57343;function Zf(n){const e=n.charCodeAt(0);return e>=ZM&&e<=eF}function $a(n,e,t){return n.length===e.length&&n.every(((s,r)=>t(s,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="__name__";class cr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Fe(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Fe(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return cr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof cr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let r=0;r<s;r++){const i=cr.compareSegments(e.get(r),t.get(r));if(i!==0)return i}return at(e.length,t.length)}static compareSegments(e,t){const s=cr.isNumericId(e),r=cr.isNumericId(t);return s&&!r?-1:!s&&r?1:s&&r?cr.extractNumericId(e).compare(cr.extractNumericId(t)):sg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Li.fromString(e.substring(4,e.length-2))}}class Qt extends cr{construct(e,t,s){return new Qt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Re(le.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((r=>r.length>0)))}return new Qt(t)}static emptyPath(){return new Qt([])}}const tF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Un extends cr{construct(e,t,s){return new Un(e,t,s)}static isValidIdentifier(e){return tF.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Un.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===EA}static keyField(){return new Un([EA])}static fromServerFormat(e){const t=[];let s="",r=0;const i=()=>{if(s.length===0)throw new Re(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new Re(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Re(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new Re(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Un(t)}static emptyPath(){return new Un([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Qt.fromString(e))}static fromName(e){return new Be(Qt.fromString(e).popFirst(5))}static empty(){return new Be(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Qt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nF(n,e,t){if(!t)throw new Re(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sF(n,e,t,s){if(e===!0&&s===!0)throw new Re(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function bA(n){if(!Be.isDocumentKey(n))throw new Re(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gI(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Am(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Fe(12329,{type:typeof n})}function pc(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Am(n);throw new Re(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Fc(n,e){if(!gI(n))throw new Re(le.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const o=n[s];if(r&&typeof o!==r){t=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){t=`Expected '${s}' field to equal '${i.value}'`;break}}if(t)throw new Re(le.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=-62135596800,CA=1e6;class Mt{static now(){return Mt.fromMillis(Date.now())}static fromDate(e){return Mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*CA);return new Mt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<IA)throw new Re(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/CA}_compareTo(e){return this.seconds===e.seconds?at(this.nanoseconds,e.nanoseconds):at(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Fc(e,Mt._jsonSchema))return new Mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-IA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Mt._jsonSchemaVersion="firestore/timestamp/1.0",Mt._jsonSchema={type:mn("string",Mt._jsonSchemaVersion),seconds:mn("number"),nanoseconds:mn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{static fromTimestamp(e){return new je(e)}static min(){return new je(new Mt(0,0))}static max(){return new je(new Mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=-1;function rF(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=je.fromTimestamp(s===1e9?new Mt(t+1,0):new Mt(t,s));return new Gi(r,Be.empty(),e)}function iF(n){return new Gi(n.readTime,n.key,gc)}class Gi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Gi(je.min(),Be.empty(),gc)}static max(){return new Gi(je.max(),Be.empty(),gc)}}function oF(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Be.comparator(n.documentKey,e.documentKey),t!==0?t:at(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==aF)throw n;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(t,i).next(s,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,s)=>{t(e)}))}static reject(e){return new re(((t,s)=>{s(e)}))}static waitFor(e){return new re(((t,s)=>{let r=0,i=0,o=!1;e.forEach((a=>{++r,a.next((()=>{++i,o&&i===r&&t()}),(l=>s(l)))})),o=!0,i===r&&t()}))}static or(e){let t=re.resolve(!1);for(const s of e)t=t.next((r=>r?re.resolve(r):s()));return t}static forEach(e,t){const s=[];return e.forEach(((r,i)=>{s.push(t.call(this,r,i))})),this.waitFor(s)}static mapArray(e,t){return new re(((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;t(e[c]).next((h=>{o[c]=h,++a,a===i&&s(o)}),(h=>r(h)))}}))}static doWhile(e,t){return new re(((s,r)=>{const i=()=>{e()===!0?t().next((()=>{i()}),r):s()};i()}))}}function cF(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function tl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ad.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm=-1;function ld(n){return n==null}function dh(n){return n===0&&1/n==-1/0}function uF(n){return typeof n=="number"&&Number.isInteger(n)&&!dh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="";function hF(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=TA(e)),e=dF(n.get(t),e);return TA(e)}function dF(n,e){let t=e;const s=n.length;for(let r=0;r<s;r++){const i=n.charAt(r);switch(i){case"\0":t+="";break;case mI:t+="";break;default:t+=i}}return t}function TA(n){return n+mI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Go(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,t){this.comparator=e,this.root=t||Ln.EMPTY}insert(e,t){return new jt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ln.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return t+s.left.size;r<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pu(this.root,e,this.comparator,!1)}getReverseIterator(){return new pu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pu(this.root,e,this.comparator,!0)}}class pu{constructor(e,t,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?s(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ln{constructor(e,t,s,r,i){this.key=e,this.value=t,this.color=s??Ln.RED,this.left=r??Ln.EMPTY,this.right=i??Ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,r,i){return new Ln(e??this.key,t??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,s),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Ln.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}}Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1;Ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,t,s,r,i){return this}insert(e,t,s){return new Ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new PA(this.data.getIterator())}getIteratorFrom(e){return new PA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new En(this.comparator);return t.data=e,t}}class PA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this.fields=e,e.sort(Un.comparator)}static empty(){return new Js([])}unionWith(e){let t=new En(Un.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Js(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $a(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new vI("Invalid base64 string: "+i):i}})(e);return new Vn(t)}static fromUint8Array(e){const t=(function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i})(e);return new Vn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return at(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vn.EMPTY_BYTE_STRING=new Vn("");const fF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qi(n){if(bt(!!n,39018),typeof n=="string"){let e=0;const t=fF.exec(n);if(bt(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:rn(n.seconds),nanos:rn(n.nanos)}}function rn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ji(n){return typeof n=="string"?Vn.fromBase64String(n):Vn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI="server_timestamp",wI="__type__",_I="__previous_value__",EI="__local_write_time__";function _m(n){return(n?.mapValue?.fields||{})[wI]?.stringValue===AI}function cd(n){const e=n.mapValue.fields[_I];return _m(e)?cd(e):e}function mc(n){const e=Qi(n.mapValue.fields[EI].timestampValue);return new Mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e,t,s,r,i,o,a,l,c,h){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h}}const fh="(default)";class yc{constructor(e,t){this.projectId=e,this.database=t||fh}static empty(){return new yc("","")}get isDefaultDatabase(){return this.database===fh}isEqual(e){return e instanceof yc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="__type__",gF="__max__",gu={mapValue:{}},II="__vector__",ph="value";function zi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_m(n)?4:yF(n)?9007199254740991:mF(n)?10:11:Fe(28295,{value:n})}function br(n,e){if(n===e)return!0;const t=zi(n);if(t!==zi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mc(n).isEqual(mc(e));case 3:return(function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Qi(r.timestampValue),a=Qi(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,i){return ji(r.bytesValue).isEqual(ji(i.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,i){return rn(r.geoPointValue.latitude)===rn(i.geoPointValue.latitude)&&rn(r.geoPointValue.longitude)===rn(i.geoPointValue.longitude)})(n,e);case 2:return(function(r,i){if("integerValue"in r&&"integerValue"in i)return rn(r.integerValue)===rn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=rn(r.doubleValue),a=rn(i.doubleValue);return o===a?dh(o)===dh(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return $a(n.arrayValue.values||[],e.arrayValue.values||[],br);case 10:case 11:return(function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(SA(o)!==SA(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!br(o[l],a[l])))return!1;return!0})(n,e);default:return Fe(52216,{left:n})}}function vc(n,e){return(n.values||[]).find((t=>br(t,e)))!==void 0}function Ha(n,e){if(n===e)return 0;const t=zi(n),s=zi(e);if(t!==s)return at(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return at(n.booleanValue,e.booleanValue);case 2:return(function(i,o){const a=rn(i.integerValue||i.doubleValue),l=rn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(n,e);case 3:return RA(n.timestampValue,e.timestampValue);case 4:return RA(mc(n),mc(e));case 5:return sg(n.stringValue,e.stringValue);case 6:return(function(i,o){const a=ji(i),l=ji(o);return a.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=at(a[c],l[c]);if(h!==0)return h}return at(a.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(i,o){const a=at(rn(i.latitude),rn(o.latitude));return a!==0?a:at(rn(i.longitude),rn(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return xA(n.arrayValue,e.arrayValue);case 10:return(function(i,o){const a=i.fields||{},l=o.fields||{},c=a[ph]?.arrayValue,h=l[ph]?.arrayValue,f=at(c?.values?.length||0,h?.values?.length||0);return f!==0?f:xA(c,h)})(n.mapValue,e.mapValue);case 11:return(function(i,o){if(i===gu.mapValue&&o===gu.mapValue)return 0;if(i===gu.mapValue)return 1;if(o===gu.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=sg(l[f],h[f]);if(p!==0)return p;const m=Ha(a[l[f]],c[h[f]]);if(m!==0)return m}return at(l.length,h.length)})(n.mapValue,e.mapValue);default:throw Fe(23264,{he:t})}}function RA(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return at(n,e);const t=Qi(n),s=Qi(e),r=at(t.seconds,s.seconds);return r!==0?r:at(t.nanos,s.nanos)}function xA(n,e){const t=n.values||[],s=e.values||[];for(let r=0;r<t.length&&r<s.length;++r){const i=Ha(t[r],s[r]);if(i)return i}return at(t.length,s.length)}function Ga(n){return rg(n)}function rg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Qi(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ji(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Be.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",r=!0;for(const i of t.values||[])r?r=!1:s+=",",s+=rg(i);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${rg(t.fields[o])}`;return r+"}"})(n.mapValue):Fe(61005,{value:n})}function Du(n){switch(zi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cd(n);return e?16+Du(e):16;case 5:return 2*n.stringValue.length;case 6:return ji(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,i)=>r+Du(i)),0)})(n.arrayValue);case 10:case 11:return(function(s){let r=0;return Go(s.fields,((i,o)=>{r+=i.length+Du(o)})),r})(n.mapValue);default:throw Fe(13486,{value:n})}}function ig(n){return!!n&&"integerValue"in n}function Em(n){return!!n&&"arrayValue"in n}function kA(n){return!!n&&"nullValue"in n}function NA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ou(n){return!!n&&"mapValue"in n}function mF(n){return(n?.mapValue?.fields||{})[bI]?.stringValue===II}function $l(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Go(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=$l(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$l(n.arrayValue.values[t]);return e}return{...n}}function yF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===gF}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.value=e}static empty(){return new Bs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Ou(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$l(t)}setAll(e){let t=Un.emptyPath(),s={},r=[];e.forEach(((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,s,r),s={},r=[],t=a.popLast()}o?s[a.lastSegment()]=$l(o):r.push(a.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,s,r)}delete(e){const t=this.field(e.popLast());Ou(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return br(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=t.mapValue.fields[e.get(s)];Ou(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,s){Go(t,((r,i)=>e[r]=i));for(const r of s)delete e[r]}clone(){return new Bs($l(this.value))}}function CI(n){const e=[];return Go(n.fields,((t,s)=>{const r=new Un([t]);if(Ou(s)){const i=CI(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)})),new Js(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,t,s,r,i,o,a){this.key=e,this.documentType=t,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Wn(e,0,je.min(),je.min(),je.min(),Bs.empty(),0)}static newFoundDocument(e,t,s,r){return new Wn(e,1,t,je.min(),s,r,0)}static newNoDocument(e,t){return new Wn(e,2,t,je.min(),je.min(),Bs.empty(),0)}static newUnknownDocument(e,t){return new Wn(e,3,t,je.min(),je.min(),Bs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,t){this.position=e,this.inclusive=t}}function DA(n,e,t){let s=0;for(let r=0;r<n.position.length;r++){const i=e[r],o=n.position[r];if(i.field.isKeyField()?s=Be.comparator(Be.fromName(o.referenceValue),t.key):s=Ha(o,t.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function OA(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!br(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t="asc"){this.field=e,this.dir=t}}function vF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{}class wn extends TI{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new wF(e,t,s):t==="array-contains"?new bF(e,s):t==="in"?new IF(e,s):t==="not-in"?new CF(e,s):t==="array-contains-any"?new TF(e,s):new wn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new _F(e,s):new EF(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ha(t,this.value)):t!==null&&zi(this.value)===zi(t)&&this.matchesComparison(Ha(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ir extends TI{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ir(e,t)}matches(e){return SI(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function SI(n){return n.op==="and"}function PI(n){return AF(n)&&SI(n)}function AF(n){for(const e of n.filters)if(e instanceof Ir)return!1;return!0}function og(n){if(n instanceof wn)return n.field.canonicalString()+n.op.toString()+Ga(n.value);if(PI(n))return n.filters.map((e=>og(e))).join(",");{const e=n.filters.map((t=>og(t))).join(",");return`${n.op}(${e})`}}function RI(n,e){return n instanceof wn?(function(s,r){return r instanceof wn&&s.op===r.op&&s.field.isEqual(r.field)&&br(s.value,r.value)})(n,e):n instanceof Ir?(function(s,r){return r instanceof Ir&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((i,o,a)=>i&&RI(o,r.filters[a])),!0):!1})(n,e):void Fe(19439)}function xI(n){return n instanceof wn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ga(t.value)}`})(n):n instanceof Ir?(function(t){return t.op.toString()+" {"+t.getFilters().map(xI).join(" ,")+"}"})(n):"Filter"}class wF extends wn{constructor(e,t,s){super(e,t,s),this.key=Be.fromName(s.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.matchesComparison(t)}}class _F extends wn{constructor(e,t){super(e,"in",t),this.keys=kI("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class EF extends wn{constructor(e,t){super(e,"not-in",t),this.keys=kI("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function kI(n,e){return(e.arrayValue?.values||[]).map((t=>Be.fromName(t.referenceValue)))}class bF extends wn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Em(t)&&vc(t.arrayValue,this.value)}}class IF extends wn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&vc(this.value.arrayValue,t)}}class CF extends wn{constructor(e,t){super(e,"not-in",t)}matches(e){if(vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!vc(this.value.arrayValue,t)}}class TF extends wn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Em(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>vc(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SF{constructor(e,t=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function LA(n,e=null,t=[],s=[],r=null,i=null,o=null){return new SF(n,e,t,s,r,i,o)}function bm(n){const e=qe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>og(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(i){return i.field.canonicalString()+i.dir})(s))).join(","),ld(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Ga(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Ga(s))).join(",")),e.Te=t}return e.Te}function Im(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!vF(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!RI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!OA(n.startAt,e.startAt)&&OA(n.endAt,e.endAt)}function ag(n){return Be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function PF(n,e,t,s,r,i,o,a){return new ud(n,e,t,s,r,i,o,a)}function Cm(n){return new ud(n)}function BA(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function RF(n){return n.collectionGroup!==null}function Hl(n){const e=qe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new En(Un.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((c=>{c.isInequality()&&(a=a.add(c.field))}))})),a})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new mh(i,s))})),t.has(Un.keyField().canonicalString())||e.Ie.push(new mh(Un.keyField(),s))}return e.Ie}function yr(n){const e=qe(n);return e.Ee||(e.Ee=xF(e,Hl(n))),e.Ee}function xF(n,e){if(n.limitType==="F")return LA(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const i=r.dir==="desc"?"asc":"desc";return new mh(r.field,i)}));const t=n.endAt?new gh(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new gh(n.startAt.position,n.startAt.inclusive):null;return LA(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function lg(n,e,t){return new ud(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hd(n,e){return Im(yr(n),yr(e))&&n.limitType===e.limitType}function NI(n){return`${bm(yr(n))}|lt:${n.limitType}`}function oa(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((r=>xI(r))).join(", ")}]`),ld(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((r=>Ga(r))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((r=>Ga(r))).join(",")),`Target(${s})`})(yr(n))}; limitType=${n.limitType})`}function dd(n,e){return e.isFoundDocument()&&(function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):Be.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)})(n,e)&&(function(s,r){for(const i of Hl(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0})(n,e)&&(function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0})(n,e)&&(function(s,r){return!(s.startAt&&!(function(o,a,l){const c=DA(o,a,l);return o.inclusive?c<=0:c<0})(s.startAt,Hl(s),r)||s.endAt&&!(function(o,a,l){const c=DA(o,a,l);return o.inclusive?c>=0:c>0})(s.endAt,Hl(s),r))})(n,e)}function kF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function DI(n){return(e,t)=>{let s=!1;for(const r of Hl(n)){const i=NF(r,e,t);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function NF(n,e,t){const s=n.field.isKeyField()?Be.comparator(e.key,t.key):(function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Ha(l,c):Fe(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Fe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[t]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Go(this.inner,((t,s)=>{for(const[r,i]of s)e(r,i)}))}isEmpty(){return yI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF=new jt(Be.comparator);function si(){return DF}const OI=new jt(Be.comparator);function Cl(...n){let e=OI;for(const t of n)e=e.insert(t.key,t);return e}function LI(n){let e=OI;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Eo(){return Gl()}function BI(){return Gl()}function Gl(){return new Qo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const OF=new jt(Be.comparator),LF=new En(Be.comparator);function lt(...n){let e=LF;for(const t of n)e=e.add(t);return e}const BF=new En(at);function MF(){return BF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dh(e)?"-0":e}}function MI(n){return{integerValue:""+n}}function FF(n,e){return uF(e)?MI(e):Tm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(){this._=void 0}}function UF(n,e,t){return n instanceof yh?(function(r,i){const o={fields:{[wI]:{stringValue:AI},[EI]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&_m(i)&&(i=cd(i)),i&&(o.fields[_I]=i),{mapValue:o}})(t,e):n instanceof Ac?UI(n,e):n instanceof wc?VI(n,e):(function(r,i){const o=FI(r,i),a=MA(o)+MA(r.Ae);return ig(o)&&ig(r.Ae)?MI(a):Tm(r.serializer,a)})(n,e)}function VF(n,e,t){return n instanceof Ac?UI(n,e):n instanceof wc?VI(n,e):t}function FI(n,e){return n instanceof vh?(function(s){return ig(s)||(function(i){return!!i&&"doubleValue"in i})(s)})(e)?e:{integerValue:0}:null}class yh extends fd{}class Ac extends fd{constructor(e){super(),this.elements=e}}function UI(n,e){const t=$I(e);for(const s of n.elements)t.some((r=>br(r,s)))||t.push(s);return{arrayValue:{values:t}}}class wc extends fd{constructor(e){super(),this.elements=e}}function VI(n,e){let t=$I(e);for(const s of n.elements)t=t.filter((r=>!br(r,s)));return{arrayValue:{values:t}}}class vh extends fd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function MA(n){return rn(n.integerValue||n.doubleValue)}function $I(n){return Em(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function $F(n,e){return n.field.isEqual(e.field)&&(function(s,r){return s instanceof Ac&&r instanceof Ac||s instanceof wc&&r instanceof wc?$a(s.elements,r.elements,br):s instanceof vh&&r instanceof vh?br(s.Ae,r.Ae):s instanceof yh&&r instanceof yh})(n.transform,e.transform)}class HF{constructor(e,t){this.version=e,this.transformResults=t}}class Wr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wr}static exists(e){return new Wr(void 0,e)}static updateTime(e){return new Wr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class pd{}function HI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new QI(n.key,Wr.none()):new Uc(n.key,n.data,Wr.none());{const t=n.data,s=Bs.empty();let r=new En(Un.comparator);for(let i of e.fields)if(!r.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new jo(n.key,s,new Js(r.toArray()),Wr.none())}}function GF(n,e,t){n instanceof Uc?(function(r,i,o){const a=r.value.clone(),l=UA(r.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof jo?(function(r,i,o){if(!Lu(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=UA(r.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(GI(r)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(n,e,t):(function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Ql(n,e,t,s){return n instanceof Uc?(function(i,o,a,l){if(!Lu(i.precondition,o))return a;const c=i.value.clone(),h=VA(i.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null})(n,e,t,s):n instanceof jo?(function(i,o,a,l){if(!Lu(i.precondition,o))return a;const c=VA(i.fieldTransforms,l,o),h=o.data;return h.setAll(GI(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((f=>f.field)))})(n,e,t,s):(function(i,o,a){return Lu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function QF(n,e){let t=null;for(const s of n.fieldTransforms){const r=e.data.field(s.field),i=FI(s.transform,r||null);i!=null&&(t===null&&(t=Bs.empty()),t.set(s.field,i))}return t||null}function FA(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&$a(s,r,((i,o)=>$F(i,o)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Uc extends pd{constructor(e,t,s,r=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class jo extends pd{constructor(e,t,s,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function GI(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function UA(n,e,t){const s=new Map;bt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const i=n[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,VF(o,a,t[r]))}return s}function VA(n,e,t){const s=new Map;for(const r of n){const i=r.transform,o=t.data.field(r.field);s.set(r.field,UF(i,o,e))}return s}class QI extends pd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jF extends pd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(e,t,s,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&GF(i,e,s[r])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Ql(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Ql(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=BI();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(r.key)?null:a;const l=HI(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(je.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),lt())}isEqual(e){return this.batchId===e.batchId&&$a(this.mutations,e.mutations,((t,s)=>FA(t,s)))&&$a(this.baseMutations,e.baseMutations,((t,s)=>FA(t,s)))}}class Sm{constructor(e,t,s,r){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=r}static from(e,t,s){bt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return OF})();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Sm(e,t,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pn,dt;function qF(n){switch(n){case le.OK:return Fe(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return Fe(15467,{code:n})}}function jI(n){if(n===void 0)return ni("GRPC error has no .code"),le.UNKNOWN;switch(n){case pn.OK:return le.OK;case pn.CANCELLED:return le.CANCELLED;case pn.UNKNOWN:return le.UNKNOWN;case pn.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case pn.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case pn.INTERNAL:return le.INTERNAL;case pn.UNAVAILABLE:return le.UNAVAILABLE;case pn.UNAUTHENTICATED:return le.UNAUTHENTICATED;case pn.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case pn.NOT_FOUND:return le.NOT_FOUND;case pn.ALREADY_EXISTS:return le.ALREADY_EXISTS;case pn.PERMISSION_DENIED:return le.PERMISSION_DENIED;case pn.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case pn.ABORTED:return le.ABORTED;case pn.OUT_OF_RANGE:return le.OUT_OF_RANGE;case pn.UNIMPLEMENTED:return le.UNIMPLEMENTED;case pn.DATA_LOSS:return le.DATA_LOSS;default:return Fe(39323,{code:n})}}(dt=pn||(pn={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YF=new Li([4294967295,4294967295],0);function $A(n){const e=JF().encode(n),t=new aI;return t.update(e),new Uint8Array(t.digest())}function HA(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Li([t,s],0),new Li([r,i],0)]}class Pm{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Tl(`Invalid padding: ${t}`);if(s<0)throw new Tl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Tl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Tl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Li.fromNumber(this.ge)}ye(e,t,s){let r=e.add(t.multiply(Li.fromNumber(s)));return r.compare(YF)===1&&(r=new Li([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=$A(e),[s,r]=HA(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,t,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Pm(i,r,t);return s.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const t=$A(e),[s,r]=HA(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Tl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,t,s,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const r=new Map;return r.set(e,Vc.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new gd(je.min(),r,new jt(at),si(),lt())}}class Vc{constructor(e,t,s,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Vc(s,t,lt(),lt(),lt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,t,s,r){this.be=e,this.removedTargetIds=t,this.key=s,this.De=r}}class zI{constructor(e,t){this.targetId=e,this.Ce=t}}class WI{constructor(e,t,s=Vn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=r}}class GA{constructor(){this.ve=0,this.Fe=QA(),this.Me=Vn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=lt(),t=lt(),s=lt();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:s=s.add(r);break;default:Fe(38017,{changeType:i})}})),new Vc(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=QA()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,bt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class XF{constructor(e){this.Ge=e,this.ze=new Map,this.je=si(),this.Je=mu(),this.He=mu(),this.Ye=new jt(at)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Fe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,s=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(ag(i))if(s===0){const o=new Be(i.path);this.et(t,o,Wn.newNoDocument(o,je.min()))}else bt(s===1,20013,{expectedCount:s});else{const o=this._t(t);if(o!==s){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,c)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=t;let o,a;try{o=ji(s).toUint8Array()}catch(l){if(l instanceof vI)return Va("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Pm(o,r,i)}catch(l){return Va(l instanceof Tl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let r=0;return s.forEach((i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(t,i,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((i,o)=>{const a=this.ot(o);if(a){if(i.current&&ag(a.target)){const l=new Be(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Wn.newNoDocument(l,e))}i.Be&&(t.set(o,i.ke()),i.qe())}}));let s=lt();this.He.forEach(((i,o)=>{let a=!0;o.forEachWhile((l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(s=s.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const r=new gd(e,t,this.Ye,this.je,s);return this.je=si(),this.Je=mu(),this.He=mu(),this.Ye=new jt(at),r}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new GA,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new En(at),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new En(at),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||we("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new GA),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function mu(){return new jt(Be.comparator)}function QA(){return new jt(Be.comparator)}const ZF={asc:"ASCENDING",desc:"DESCENDING"},e4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},t4={and:"AND",or:"OR"};class n4{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function cg(n,e){return n.useProto3Json||ld(e)?e:{value:e}}function Ah(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function s4(n,e){return Ah(n,e.toTimestamp())}function vr(n){return bt(!!n,49232),je.fromTimestamp((function(t){const s=Qi(t);return new Mt(s.seconds,s.nanos)})(n))}function Rm(n,e){return ug(n,e).canonicalString()}function ug(n,e){const t=(function(r){return new Qt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function qI(n){const e=Qt.fromString(n);return bt(eC(e),10190,{key:e.toString()}),e}function hg(n,e){return Rm(n.databaseId,e.path)}function ep(n,e){const t=qI(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(YI(t))}function JI(n,e){return Rm(n.databaseId,e)}function r4(n){const e=qI(n);return e.length===4?Qt.emptyPath():YI(e)}function dg(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function YI(n){return bt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function jA(n,e,t){return{name:hg(n,e),fields:t.value.mapValue.fields}}function i4(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Fe(39313,{state:c})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=(function(c,h){return c.useProto3Json?(bt(h===void 0||typeof h=="string",58123),Vn.fromBase64String(h||"")):(bt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Vn.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(c){const h=c.code===void 0?le.UNKNOWN:jI(c.code);return new Re(h,c.message||"")})(o);t=new WI(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=ep(n,s.document.name),i=vr(s.document.updateTime),o=s.document.createTime?vr(s.document.createTime):je.min(),a=new Bs({mapValue:{fields:s.document.fields}}),l=Wn.newFoundDocument(r,i,o,a),c=s.targetIds||[],h=s.removedTargetIds||[];t=new Bu(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=ep(n,s.document),i=s.readTime?vr(s.readTime):je.min(),o=Wn.newNoDocument(r,i),a=s.removedTargetIds||[];t=new Bu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=ep(n,s.document),i=s.removedTargetIds||[];t=new Bu([],i,r,null)}else{if(!("filter"in e))return Fe(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new KF(r,i),a=s.targetId;t=new zI(a,o)}}return t}function o4(n,e){let t;if(e instanceof Uc)t={update:jA(n,e.key,e.value)};else if(e instanceof QI)t={delete:hg(n,e.key)};else if(e instanceof jo)t={update:jA(n,e.key,e.data),updateMask:g4(e.fieldMask)};else{if(!(e instanceof jF))return Fe(16599,{Vt:e.type});t={verify:hg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(i,o){const a=o.transform;if(a instanceof yh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ac)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof wc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof vh)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Fe(20930,{transform:o.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(r,i){return i.updateTime!==void 0?{updateTime:s4(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Fe(27497)})(n,e.precondition)),t}function a4(n,e){return n&&n.length>0?(bt(e!==void 0,14353),n.map((t=>(function(r,i){let o=r.updateTime?vr(r.updateTime):vr(i);return o.isEqual(je.min())&&(o=vr(i)),new HF(o,r.transformResults||[])})(t,e)))):[]}function l4(n,e){return{documents:[JI(n,e.path)]}}function c4(n,e){const t={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=JI(n,r);const i=(function(c){if(c.length!==0)return ZI(Ir.create(c,"and"))})(e.filters);i&&(t.structuredQuery.where=i);const o=(function(c){if(c.length!==0)return c.map((h=>(function(p){return{field:aa(p.field),direction:d4(p.dir)}})(h)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=cg(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(c){return{before:c.inclusive,values:c.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(c){return{before:!c.inclusive,values:c.position}})(e.endAt)),{ft:t,parent:r}}function u4(n){let e=r4(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let r=null;if(s>0){bt(s===1,65062);const h=t.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];t.where&&(i=(function(f){const p=XI(f);return p instanceof Ir&&PI(p)?p.getFilters():[p]})(t.where));let o=[];t.orderBy&&(o=(function(f){return f.map((p=>(function(E){return new mh(la(E.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(p)))})(t.orderBy));let a=null;t.limit&&(a=(function(f){let p;return p=typeof f=="object"?f.value:f,ld(p)?null:p})(t.limit));let l=null;t.startAt&&(l=(function(f){const p=!!f.before,m=f.values||[];return new gh(m,p)})(t.startAt));let c=null;return t.endAt&&(c=(function(f){const p=!f.before,m=f.values||[];return new gh(m,p)})(t.endAt)),PF(e,r,o,i,a,"F",l,c)}function h4(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function XI(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=la(t.unaryFilter.field);return wn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=la(t.unaryFilter.field);return wn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=la(t.unaryFilter.field);return wn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=la(t.unaryFilter.field);return wn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return wn.create(la(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ir.create(t.compositeFilter.filters.map((s=>XI(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}})(t.compositeFilter.op))})(n):Fe(30097,{filter:n})}function d4(n){return ZF[n]}function f4(n){return e4[n]}function p4(n){return t4[n]}function aa(n){return{fieldPath:n.canonicalString()}}function la(n){return Un.fromServerFormat(n.fieldPath)}function ZI(n){return n instanceof wn?(function(t){if(t.op==="=="){if(NA(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NAN"}};if(kA(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(NA(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NOT_NAN"}};if(kA(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:aa(t.field),op:f4(t.op),value:t.value}}})(n):n instanceof Ir?(function(t){const s=t.getFilters().map((r=>ZI(r)));return s.length===1?s[0]:{compositeFilter:{op:p4(t.op),filters:s}}})(n):Fe(54877,{filter:n})}function g4(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function eC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,t,s,r,i=je.min(),o=je.min(),a=Vn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ri(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e){this.yt=e}}function y4(n){const e=u4({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?lg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(){this.Cn=new A4}addToCollectionParentIndex(e,t){return this.Cn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(Gi.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(Gi.min())}updateCollectionGroup(e,t,s){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class A4{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t]||new En(Qt.comparator),i=!r.has(s);return this.index[t]=r.add(s),i}has(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t];return r&&r.has(s)}getEntries(e){return(this.index[e]||new En(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tC=41943040;class ys{static withCacheSize(e){return new ys(e,ys.DEFAULT_COLLECTION_PERCENTILE,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ys.DEFAULT_COLLECTION_PERCENTILE=10,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ys.DEFAULT=new ys(tC,ys.DEFAULT_COLLECTION_PERCENTILE,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ys.DISABLED=new ys(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Qa(0)}static cr(){return new Qa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="LruGarbageCollector",w4=1048576;function KA([n,e],[t,s]){const r=at(n,t);return r===0?at(e,s):r}class _4{constructor(e){this.Ir=e,this.buffer=new En(KA),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();KA(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class E4{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){we(WA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){tl(t)?we(WA,"Ignoring IndexedDB error during garbage collection: ",t):await el(t)}await this.Vr(3e5)}))}}class b4{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return re.resolve(ad.ce);const s=new _4(t);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(zA)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zA):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,r,i,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,o=Date.now(),this.nthSequenceNumber(e,r)))).next((f=>(s=f,a=Date.now(),this.removeTargets(e,s,t)))).next((f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,s)))).next((f=>(c=Date.now(),ia()<=ot.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:f}))))}}function I4(n,e){return new b4(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(){this.changes=new Qo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?re.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,t,s,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(s!==null&&Ql(s.mutation,r,Js.empty(),Mt.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,lt()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=lt()){const r=Eo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,s).next((i=>{let o=Cl();return i.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const s=Eo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,lt())))}populateOverlays(e,t,s){const r=[];return s.forEach((i=>{t.has(i)||r.push(i)})),this.documentOverlayCache.getOverlays(e,r).next((i=>{i.forEach(((o,a)=>{t.set(o,a)}))}))}computeViews(e,t,s,r){let i=si();const o=Gl(),a=(function(){return Gl()})();return t.forEach(((l,c)=>{const h=s.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof jo)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Ql(h.mutation,c,h.mutation.getFieldMask(),Mt.now())):o.set(c.key,Js.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((c,h)=>o.set(c,h))),t.forEach(((c,h)=>a.set(c,new T4(h,o.get(c)??null)))),a)))}recalculateAndSaveOverlays(e,t){const s=Gl();let r=new jt(((o,a)=>o-a)),i=lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const a of o)a.keys().forEach((l=>{const c=t.get(l);if(c===null)return;let h=s.get(l)||Js.empty();h=a.applyToLocalView(c,h),s.set(l,h);const f=(r.get(a.batchId)||lt()).add(l);r=r.insert(a.batchId,f)}))})).next((()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,f=BI();h.forEach((p=>{if(!i.has(p)){const m=HI(t.get(p),s.get(p));m!==null&&f.set(p,m),i=i.add(p)}})),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return re.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,r){return(function(o){return Be.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):RF(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,r):this.getDocumentsMatchingCollectionQuery(e,t,s,r)}getNextDocuments(e,t,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,r-i.size):re.resolve(Eo());let a=gc,l=i;return o.next((c=>re.forEach(c,((h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?re.resolve():this.remoteDocumentCache.getEntry(e,h).next((p=>{l=l.insert(h,p)}))))).next((()=>this.populateOverlays(e,c,i))).next((()=>this.computeViews(e,l,c,lt()))).next((h=>({batchId:a,changes:LI(h)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Be(t)).next((s=>{let r=Cl();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,r){const i=t.collectionGroup;let o=Cl();return this.indexManager.getCollectionParents(e,i).next((a=>re.forEach(a,(l=>{const c=(function(f,p){return new ud(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(t,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,s,r).next((h=>{h.forEach(((f,p)=>{o=o.insert(f,p)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,i,r)))).next((o=>{i.forEach(((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Wn.newInvalidDocument(h)))}));let a=Cl();return o.forEach(((l,c)=>{const h=i.get(l);h!==void 0&&Ql(h.mutation,c,Js.empty(),Mt.now()),dd(t,c)&&(a=a.insert(l,c))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return re.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:vr(r.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:y4(r.bundledQuery),readTime:vr(r.readTime)}})(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(){this.overlays=new jt(Be.comparator),this.qr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Eo();return re.forEach(t,(r=>this.getOverlay(e,r).next((i=>{i!==null&&s.set(r,i)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((r,i)=>{this.St(e,t,i)})),re.resolve()}removeOverlaysForBatchId(e,t,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(s)),re.resolve()}getOverlaysForCollection(e,t,s){const r=Eo(),i=t.length+1,o=new Be(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return re.resolve(r)}getOverlaysForCollectionGroup(e,t,s,r){let i=new jt(((c,h)=>c-h));const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>s){let h=i.get(c.largestBatchId);h===null&&(h=Eo(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Eo(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((c,h)=>a.set(c,h))),!(a.size()>=r)););return re.resolve(a)}St(e,t,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new WF(t,s));let i=this.qr.get(t);i===void 0&&(i=lt(),this.qr.set(t,i)),this.qr.set(t,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(){this.sessionToken=Vn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(){this.Qr=new En(Rn.$r),this.Ur=new En(Rn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Rn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Rn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Be(new Qt([])),s=new Rn(t,e),r=new Rn(t,e+1),i=[];return this.Ur.forEachInRange([s,r],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Be(new Qt([])),s=new Rn(t,e),r=new Rn(t,e+1);let i=lt();return this.Ur.forEachInRange([s,r],(o=>{i=i.add(o.key)})),i}containsKey(e){const t=new Rn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Rn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Be.comparator(e.key,t.key)||at(e.Yr,t.Yr)}static Kr(e,t){return at(e.Yr,t.Yr)||Be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new En(Rn.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new zF(i,t,s,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new Rn(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return re.resolve(o)}lookupMutationBatch(e,t){return re.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,r=this.ei(s),i=r<0?0:r;return re.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?wm:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Rn(t,0),r=new Rn(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],(o=>{const a=this.Xr(o.Yr);i.push(a)})),re.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new En(at);return t.forEach((r=>{const i=new Rn(r,0),o=new Rn(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(a=>{s=s.add(a.Yr)}))})),re.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,r=s.length+1;let i=s;Be.isDocumentKey(i)||(i=i.child(""));const o=new Rn(new Be(i),0);let a=new En(at);return this.Zr.forEachWhile((l=>{const c=l.key.path;return!!s.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.Yr)),!0)}),o),re.resolve(this.ti(a))}ti(e){const t=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){bt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return re.forEach(t.mutations,(r=>{const i=new Rn(r.key,t.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Rn(t,0),r=this.Zr.firstAfterOrEqual(s);return re.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e){this.ri=e,this.docs=(function(){return new jt(Be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return re.resolve(s?s.document.mutableCopy():Wn.newInvalidDocument(t))}getEntries(e,t){let s=si();return t.forEach((r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Wn.newInvalidDocument(r))})),re.resolve(s)}getDocumentsMatchingQuery(e,t,s,r){let i=si();const o=t.path,a=new Be(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||oF(iF(h),s)<=0||(r.has(h.key)||dd(t,h))&&(i=i.insert(h.key,h.mutableCopy()))}return re.resolve(i)}getAllFromCollectionGroup(e,t,s,r){Fe(9500)}ii(e,t){return re.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new D4(this)}getSize(e){return re.resolve(this.size)}}class D4 extends C4{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),re.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e){this.persistence=e,this.si=new Qo((t=>bm(t)),Im),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.oi=0,this._i=new xm,this.targetCount=0,this.ai=Qa.ur()}forEachTarget(e,t){return this.si.forEach(((s,r)=>t(r))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),re.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Qa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Pr(t),re.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,s){let r=0;const i=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=t&&s.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),re.waitFor(i).next((()=>r))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return re.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),re.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((o=>{i.push(r.markPotentiallyOrphaned(e,o))})),re.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return re.resolve(s)}containsKey(e,t){return re.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,t){this.ui={},this.overlays={},this.ci=new ad(0),this.li=!1,this.li=!0,this.hi=new x4,this.referenceDelegate=e(this),this.Pi=new O4(this),this.indexManager=new v4,this.remoteDocumentCache=(function(r){return new N4(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new m4(t),this.Ii=new P4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new R4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new k4(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){we("MemoryPersistence","Starting transaction:",e);const r=new L4(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((i=>this.referenceDelegate.di(r).next((()=>i)))).toPromise().then((i=>(r.raiseOnCommittedEvent(),i)))}Ai(e,t){return re.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class L4 extends lF{constructor(e){super(),this.currentSequenceNumber=e}}class km{constructor(e){this.persistence=e,this.Ri=new xm,this.Vi=null}static mi(e){return new km(e)}get fi(){if(this.Vi)return this.Vi;throw Fe(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),re.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((i=>this.fi.add(i.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,(s=>{const r=Be.fromPath(s);return this.gi(e,r).next((i=>{i||t.removeEntry(r,je.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return re.or([()=>re.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class wh{constructor(e,t){this.persistence=e,this.pi=new Qo((s=>hF(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=I4(this,t)}static mi(e,t){return new wh(e,t)}Ei(){}di(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((r=>s+r))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return re.forEach(this.pi,((s,r)=>this.br(e,s,r).next((i=>i?re.resolve():t(r)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(o=>this.br(e,o,t).next((a=>{a||(s++,i.removeEntry(o,je.min()))})))).next((()=>i.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Du(e.data.value)),t}br(e,t,s){return re.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return re.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,t,s,r){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=r}static As(e,t){let s=lt(),r=lt();for(const i of t.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Nm(e,t.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return TO()?8:cF(Jn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,r){const i={result:null};return this.ys(e,t).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,t,r,s).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new B4;return this.Ss(e,t,o).next((a=>{if(i.result=a,this.Vs)return this.bs(e,t,o,a.size)}))})).next((()=>i.result))}bs(e,t,s,r){return s.documentReadCount<this.fs?(ia()<=ot.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",oa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(ia()<=ot.DEBUG&&we("QueryEngine","Query:",oa(t),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(ia()<=ot.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",oa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yr(t))):re.resolve())}ys(e,t){if(BA(t))return re.resolve(null);let s=yr(t);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=lg(t,null,"F"),s=yr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((i=>{const o=lt(...i);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,s).next((l=>{const c=this.Ds(t,a);return this.Cs(t,c,o,l.readTime)?this.ys(e,lg(t,null,"F")):this.vs(e,c,t,l)}))))})))))}ws(e,t,s,r){return BA(t)||r.isEqual(je.min())?re.resolve(null):this.ps.getDocuments(e,s).next((i=>{const o=this.Ds(t,i);return this.Cs(t,o,s,r)?re.resolve(null):(ia()<=ot.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),oa(t)),this.vs(e,o,t,rF(r,gc)).next((a=>a)))}))}Ds(e,t){let s=new En(DI(e));return t.forEach(((r,i)=>{dd(e,i)&&(s=s.add(i))})),s}Cs(e,t,s,r){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,s){return ia()<=ot.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",oa(t)),this.ps.getDocumentsMatchingQuery(e,t,Gi.min(),s)}vs(e,t,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((i=>(t.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="LocalStore",F4=3e8;class U4{constructor(e,t,s,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new jt(at),this.xs=new Qo((i=>bm(i)),Im),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new S4(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function V4(n,e,t,s){return new U4(n,e,t,s)}async function sC(n,e){const t=qe(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return t.mutationQueue.getAllMutationBatches(s).next((i=>(r=i,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((i=>{const o=[],a=[];let l=lt();for(const c of r){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(s,l).next((c=>({Ls:c,removedBatchIds:o,addedBatchIds:a})))}))}))}function $4(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),i=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,c,h){const f=c.batch,p=f.keys();let m=re.resolve();return p.forEach((E=>{m=m.next((()=>h.getEntry(l,E))).next((v=>{const A=c.docVersions.get(E);bt(A!==null,48541),v.version.compareTo(A)<0&&(f.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),h.addEntry(v)))}))})),m.next((()=>a.mutationQueue.removeMutationBatch(l,f)))})(t,s,e,i).next((()=>i.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(a){let l=lt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l})(e)))).next((()=>t.localDocuments.getDocuments(s,r)))}))}function rC(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function H4(n,e){const t=qe(n),s=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const a=[];e.targetChanges.forEach(((h,f)=>{const p=r.get(f);if(!p)return;a.push(t.Pi.removeMatchingKeys(i,h.removedDocuments,f).next((()=>t.Pi.addMatchingKeys(i,h.addedDocuments,f))));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Vn.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,s)),r=r.insert(f,m),(function(v,A,w){return v.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=F4?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0})(p,m,h)&&a.push(t.Pi.updateTargetData(i,m))}));let l=si(),c=lt();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(i,h))})),a.push(G4(i,o,e.documentUpdates).next((h=>{l=h.ks,c=h.qs}))),!s.isEqual(je.min())){const h=t.Pi.getLastRemoteSnapshotVersion(i).next((f=>t.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s)));a.push(h)}return re.waitFor(a).next((()=>o.apply(i))).next((()=>t.localDocuments.getLocalViewOfDocuments(i,l,c))).next((()=>l))})).then((i=>(t.Ms=r,i)))}function G4(n,e,t){let s=lt(),r=lt();return t.forEach((i=>s=s.add(i))),e.getEntries(n,s).next((i=>{let o=si();return t.forEach(((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(je.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):we(Dm,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)})),{ks:o,qs:r}}))}function Q4(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=wm),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function j4(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return t.Pi.getTargetData(s,e).next((i=>i?(r=i,re.resolve(r)):t.Pi.allocateTargetId(s).next((o=>(r=new Ri(e,o,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=t.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function fg(n,e,t){const s=qe(n),r=s.Ms.get(e),i=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",i,(o=>s.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!tl(o))throw o;we(Dm,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function qA(n,e,t){const s=qe(n);let r=je.min(),i=lt();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,c,h){const f=qe(l),p=f.xs.get(h);return p!==void 0?re.resolve(f.Ms.get(p)):f.Pi.getTargetData(c,h)})(s,o,yr(e)).next((a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{i=l}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,e,t?r:je.min(),t?i:lt()))).next((a=>(z4(s,kF(e),a),{documents:a,Qs:i})))))}function z4(n,e,t){let s=n.Os.get(e)||je.min();t.forEach(((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)})),n.Os.set(e,s)}class JA{constructor(){this.activeTargetIds=MF()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class W4{constructor(){this.Mo=new JA,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new JA,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="ConnectivityMonitor";class XA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){we(YA,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){we(YA,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yu=null;function pg(){return yu===null?yu=(function(){return 268435456+Math.round(2147483648*Math.random())})():yu++,"0x"+yu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="RestConnection",q4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class J4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===fh?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,t,s,r,i){const o=pg(),a=this.zo(e,t.toUriEncodedString());we(tp,`Sending RPC '${e}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,i);const{host:c}=new URL(a),h=Ja(c);return this.Jo(e,a,l,s,h).then((f=>(we(tp,`Received RPC '${e}' ${o}: `,f),f)),(f=>{throw Va(tp,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",s),f}))}Ho(e,t,s,r,i,o){return this.Go(e,t,s,r,i)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Za})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,i)=>e[i]=r)),s&&s.headers.forEach(((r,i)=>e[i]=r))}zo(e,t){const s=q4[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="WebChannelConnection";class X4 extends J4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,r,i){const o=pg();return new Promise(((a,l)=>{const c=new lI;c.setWithCredentials(!0),c.listenOnce(cI.COMPLETE,(()=>{try{switch(c.getLastErrorCode()){case Nu.NO_ERROR:const f=c.getResponseJson();we(Qn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Nu.TIMEOUT:we(Qn,`RPC '${e}' ${o} timed out`),l(new Re(le.DEADLINE_EXCEEDED,"Request time out"));break;case Nu.HTTP_ERROR:const p=c.getStatus();if(we(Qn,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const E=m?.error;if(E&&E.status&&E.message){const v=(function(w){const P=w.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(P)>=0?P:le.UNKNOWN})(E.status);l(new Re(v,E.message))}else l(new Re(le.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Re(le.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{we(Qn,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(r);we(Qn,`RPC '${e}' ${o} sending request:`,r),c.send(t,"POST",h,s,15)}))}T_(e,t,s){const r=pg(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=dI(),a=hI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,s),l.encodeInitMessageHeaders=!0;const h=i.join("");we(Qn,`Creating RPC '${e}' stream ${r}: ${h}`,l);const f=o.createWebChannel(h,l);this.I_(f);let p=!1,m=!1;const E=new Y4({Yo:A=>{m?we(Qn,`Not sending because RPC '${e}' stream ${r} is closed:`,A):(p||(we(Qn,`Opening RPC '${e}' stream ${r} transport.`),f.open(),p=!0),we(Qn,`RPC '${e}' stream ${r} sending:`,A),f.send(A))},Zo:()=>f.close()}),v=(A,w,P)=>{A.listen(w,(T=>{try{P(T)}catch(L){setTimeout((()=>{throw L}),0)}}))};return v(f,Il.EventType.OPEN,(()=>{m||(we(Qn,`RPC '${e}' stream ${r} transport opened.`),E.o_())})),v(f,Il.EventType.CLOSE,(()=>{m||(m=!0,we(Qn,`RPC '${e}' stream ${r} transport closed`),E.a_(),this.E_(f))})),v(f,Il.EventType.ERROR,(A=>{m||(m=!0,Va(Qn,`RPC '${e}' stream ${r} transport errored. Name:`,A.name,"Message:",A.message),E.a_(new Re(le.UNAVAILABLE,"The operation could not be completed")))})),v(f,Il.EventType.MESSAGE,(A=>{if(!m){const w=A.data[0];bt(!!w,16349);const P=w,T=P?.error||P[0]?.error;if(T){we(Qn,`RPC '${e}' stream ${r} received error:`,T);const L=T.status;let Q=(function(I){const C=pn[I];if(C!==void 0)return jI(C)})(L),q=T.message;Q===void 0&&(Q=le.INTERNAL,q="Unknown error status: "+L+" with message "+T.message),m=!0,E.a_(new Re(Q,q)),f.close()}else we(Qn,`RPC '${e}' stream ${r} received:`,w),E.u_(w)}})),v(a,uI.STAT_EVENT,(A=>{A.stat===ng.PROXY?we(Qn,`RPC '${e}' stream ${r} detected buffering proxy`):A.stat===ng.NOPROXY&&we(Qn,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{E.__()}),0),E}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function np(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(n){return new n4(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,t,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-s);r>0&&we("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="PersistentStream";class oC{constructor(e,t,s,r,i,o,a,l){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new iC(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(ni(t.toString()),ni("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===t&&this.G_(s,r)}),(s=>{e((()=>{const r=new Re(le.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return we(ZA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(we(ZA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Z4 extends oC{constructor(e,t,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,r,o),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=i4(this.serializer,e),s=(function(i){if(!("targetChange"in i))return je.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?je.min():o.readTime?vr(o.readTime):je.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=dg(this.serializer),t.addTarget=(function(i,o){let a;const l=o.target;if(a=ag(l)?{documents:l4(i,l)}:{query:c4(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=KI(i,o.resumeToken);const c=cg(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(je.min())>0){a.readTime=Ah(i,o.snapshotVersion.toTimestamp());const c=cg(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a})(this.serializer,e);const s=h4(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=dg(this.serializer),t.removeTarget=e,this.q_(t)}}class eU extends oC{constructor(e,t,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return bt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,bt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){bt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=a4(e.writeResults,e.commitTime),s=vr(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=dg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>o4(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{}class nU extends tU{constructor(e,t,s,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Re(le.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,ug(t,s),r,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(le.UNKNOWN,i.toString())}))}Ho(e,t,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,ug(t,s),r,o,a,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(le.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class sU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ni(t),this.aa=!1):we("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo="RemoteStore";class rU{constructor(e,t,s,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{zo(this)&&(we(Bo,"Restarting streams for network reachability change."),await(async function(l){const c=qe(l);c.Ea.add(4),await $c(c),c.Ra.set("Unknown"),c.Ea.delete(4),await yd(c)})(this))}))})),this.Ra=new sU(s,r)}}async function yd(n){if(zo(n))for(const e of n.da)await e(!0)}async function $c(n){for(const e of n.da)await e(!1)}function aC(n,e){const t=qe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Mm(t)?Bm(t):nl(t).O_()&&Lm(t,e))}function Om(n,e){const t=qe(n),s=nl(t);t.Ia.delete(e),s.O_()&&lC(t,e),t.Ia.size===0&&(s.O_()?s.L_():zo(t)&&t.Ra.set("Unknown"))}function Lm(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}nl(n).Y_(e)}function lC(n,e){n.Va.Ue(e),nl(n).Z_(e)}function Bm(n){n.Va=new XF({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),nl(n).start(),n.Ra.ua()}function Mm(n){return zo(n)&&!nl(n).x_()&&n.Ia.size>0}function zo(n){return qe(n).Ea.size===0}function cC(n){n.Va=void 0}async function iU(n){n.Ra.set("Online")}async function oU(n){n.Ia.forEach(((e,t)=>{Lm(n,e)}))}async function aU(n,e){cC(n),Mm(n)?(n.Ra.ha(e),Bm(n)):n.Ra.set("Unknown")}async function lU(n,e,t){if(n.Ra.set("Online"),e instanceof WI&&e.state===2&&e.cause)try{await(async function(r,i){const o=i.cause;for(const a of i.targetIds)r.Ia.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ia.delete(a),r.Va.removeTarget(a))})(n,e)}catch(s){we(Bo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await _h(n,s)}else if(e instanceof Bu?n.Va.Ze(e):e instanceof zI?n.Va.st(e):n.Va.tt(e),!t.isEqual(je.min()))try{const s=await rC(n.localStore);t.compareTo(s)>=0&&await(function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach(((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(c);h&&i.Ia.set(c,h.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,c)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken(Vn.EMPTY_BYTE_STRING,h.snapshotVersion)),lC(i,l);const f=new Ri(h.target,l,c,h.sequenceNumber);Lm(i,f)})),i.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(s){we(Bo,"Failed to raise snapshot:",s),await _h(n,s)}}async function _h(n,e,t){if(!tl(e))throw e;n.Ea.add(1),await $c(n),n.Ra.set("Offline"),t||(t=()=>rC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{we(Bo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await yd(n)}))}function uC(n,e){return e().catch((t=>_h(n,t,e)))}async function vd(n){const e=qe(n),t=Wi(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wm;for(;cU(e);)try{const r=await Q4(e.localStore,s);if(r===null){e.Ta.length===0&&t.L_();break}s=r.batchId,uU(e,r)}catch(r){await _h(e,r)}hC(e)&&dC(e)}function cU(n){return zo(n)&&n.Ta.length<10}function uU(n,e){n.Ta.push(e);const t=Wi(n);t.O_()&&t.X_&&t.ea(e.mutations)}function hC(n){return zo(n)&&!Wi(n).x_()&&n.Ta.length>0}function dC(n){Wi(n).start()}async function hU(n){Wi(n).ra()}async function dU(n){const e=Wi(n);for(const t of n.Ta)e.ea(t.mutations)}async function fU(n,e,t){const s=n.Ta.shift(),r=Sm.from(s,e,t);await uC(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await vd(n)}async function pU(n,e){e&&Wi(n).X_&&await(async function(s,r){if((function(o){return qF(o)&&o!==le.ABORTED})(r.code)){const i=s.Ta.shift();Wi(s).B_(),await uC(s,(()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r))),await vd(s)}})(n,e),hC(n)&&dC(n)}async function ew(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),we(Bo,"RemoteStore received new credentials");const s=zo(t);t.Ea.add(3),await $c(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await yd(t)}async function gU(n,e){const t=qe(n);e?(t.Ea.delete(2),await yd(t)):e||(t.Ea.add(2),await $c(t),t.Ra.set("Unknown"))}function nl(n){return n.ma||(n.ma=(function(t,s,r){const i=qe(t);return i.sa(),new Z4(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(n.datastore,n.asyncQueue,{Xo:iU.bind(null,n),t_:oU.bind(null,n),r_:aU.bind(null,n),H_:lU.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Mm(n)?Bm(n):n.Ra.set("Unknown")):(await n.ma.stop(),cC(n))}))),n.ma}function Wi(n){return n.fa||(n.fa=(function(t,s,r){const i=qe(t);return i.sa(),new eU(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:hU.bind(null,n),r_:pU.bind(null,n),ta:dU.bind(null,n),na:fU.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await vd(n)):(await n.fa.stop(),n.Ta.length>0&&(we(Bo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,t,s,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,r,i){const o=Date.now()+s,a=new Fm(e,t,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Um(n,e){if(ni("AsyncQueue",`${e}: ${n}`),tl(n))return new Re(le.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{static emptySet(e){return new Ta(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Be.comparator(t.key,s.key):(t,s)=>Be.comparator(t.key,s.key),this.keyedMap=Cl(),this.sortedSet=new jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ta)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Ta;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(){this.ga=new jt(Be.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Fe(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class ja{constructor(e,t,s,r,i,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,s,r,i){const o=[];return t.forEach((a=>{o.push({type:0,doc:a})})),new ja(e,t,Ta.emptySet(t),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==s[r].type||!t[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class yU{constructor(){this.queries=nw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const r=qe(t),i=r.queries;r.queries=nw(),i.forEach(((o,a)=>{for(const l of a.Sa)l.onError(s)}))})(this,new Re(le.ABORTED,"Firestore shutting down"))}}function nw(){return new Qo((n=>NI(n)),hd)}async function vU(n,e){const t=qe(n);let s=3;const r=e.query;let i=t.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new mU,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await t.onListen(r,!0);break;case 1:i.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){const a=Um(o,`Initialization of query '${oa(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,i),i.Sa.push(e),e.va(t.onlineState),i.wa&&e.Fa(i.wa)&&Vm(t)}async function AU(n,e){const t=qe(n),s=e.query;let r=3;const i=t.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function wU(n,e){const t=qe(n);let s=!1;for(const r of e){const i=r.query,o=t.queries.get(i);if(o){for(const a of o.Sa)a.Fa(r)&&(s=!0);o.wa=r}}s&&Vm(t)}function _U(n,e,t){const s=qe(n),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(t);s.queries.delete(e)}function Vm(n){n.Ca.forEach((e=>{e.next()}))}var gg,sw;(sw=gg||(gg={})).Ma="default",sw.Cache="cache";class EU{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new ja(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==gg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e){this.key=e}}class pC{constructor(e){this.key=e}}class bU{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=lt(),this.mutatedKeys=lt(),this.eu=DI(e),this.tu=new Ta(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new tw,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((h,f)=>{const p=r.get(h),m=dd(this.query,f)?f:null,E=!!p&&this.mutatedKeys.has(p.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let A=!1;p&&m?p.data.isEqual(m.data)?E!==v&&(s.track({type:3,doc:m}),A=!0):this.su(p,m)||(s.track({type:2,doc:m}),A=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(a=!0)):!p&&m?(s.track({type:0,doc:m}),A=!0):p&&!m&&(s.track({type:1,doc:p}),A=!0,(l||c)&&(a=!0)),A&&(m?(o=o.add(m),i=v?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,f)=>(function(m,E){const v=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{Rt:A})}};return v(m)-v(E)})(h.type,f.type)||this.eu(h.doc,f.doc))),this.ou(s),r=r??!1;const a=t&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new ja(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new tw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=lt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new pC(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new fC(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=lt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ja.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const $m="SyncEngine";class IU{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class CU{constructor(e){this.key=e,this.hu=!1}}class TU{constructor(e,t,s,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Qo((a=>NI(a)),hd),this.Iu=new Map,this.Eu=new Set,this.du=new jt(Be.comparator),this.Au=new Map,this.Ru=new xm,this.Vu={},this.mu=new Map,this.fu=Qa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function SU(n,e,t=!0){const s=wC(n);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await gC(s,e,t,!0),r}async function PU(n,e){const t=wC(n);await gC(t,e,!0,!1)}async function gC(n,e,t,s){const r=await j4(n.localStore,yr(e)),i=r.targetId,o=n.sharedClientState.addLocalQueryTarget(i,t);let a;return s&&(a=await RU(n,e,i,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&aC(n.remoteStore,r),a}async function RU(n,e,t,s,r){n.pu=(f,p,m)=>(async function(v,A,w,P){let T=A.view.ru(w);T.Cs&&(T=await qA(v.localStore,A.query,!1).then((({documents:x})=>A.view.ru(x,T))));const L=P&&P.targetChanges.get(A.targetId),Q=P&&P.targetMismatches.get(A.targetId)!=null,q=A.view.applyChanges(T,v.isPrimaryClient,L,Q);return iw(v,A.targetId,q.au),q.snapshot})(n,f,p,m);const i=await qA(n.localStore,e,!0),o=new bU(e,i.Qs),a=o.ru(i.documents),l=Vc.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",r),c=o.applyChanges(a,n.isPrimaryClient,l);iw(n,t,c.au);const h=new IU(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),c.snapshot}async function xU(n,e,t){const s=qe(n),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter((o=>!hd(o,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await fg(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),t&&Om(s.remoteStore,r.targetId),mg(s,r.targetId)})).catch(el)):(mg(s,r.targetId),await fg(s.localStore,r.targetId,!0))}async function kU(n,e){const t=qe(n),s=t.Tu.get(e),r=t.Iu.get(s.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Om(t.remoteStore,s.targetId))}async function NU(n,e,t){const s=UU(n);try{const r=await(function(o,a){const l=qe(o),c=Mt.now(),h=a.reduce(((m,E)=>m.add(E.key)),lt());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",(m=>{let E=si(),v=lt();return l.Ns.getEntries(m,h).next((A=>{E=A,E.forEach(((w,P)=>{P.isValidDocument()||(v=v.add(w))}))})).next((()=>l.localDocuments.getOverlayedDocuments(m,E))).next((A=>{f=A;const w=[];for(const P of a){const T=QF(P,f.get(P.key).overlayedDocument);T!=null&&w.push(new jo(P.key,T,CI(T.value.mapValue),Wr.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,w,a)})).next((A=>{p=A;const w=A.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(m,A.batchId,w)}))})).then((()=>({batchId:p.batchId,changes:LI(f)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new jt(at)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c})(s,r.batchId,t),await Hc(s,r.changes),await vd(s.remoteStore)}catch(r){const i=Um(r,"Failed to persist write");t.reject(i)}}async function mC(n,e){const t=qe(n);try{const s=await H4(t.localStore,e);e.targetChanges.forEach(((r,i)=>{const o=t.Au.get(i);o&&(bt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?bt(o.hu,14607):r.removedDocuments.size>0&&(bt(o.hu,42227),o.hu=!1))})),await Hc(t,s,e)}catch(s){await el(s)}}function rw(n,e,t){const s=qe(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const r=[];s.Tu.forEach(((i,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)})),(function(o,a){const l=qe(o);l.onlineState=a;let c=!1;l.queries.forEach(((h,f)=>{for(const p of f.Sa)p.va(a)&&(c=!0)})),c&&Vm(l)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function DU(n,e,t){const s=qe(n);s.sharedClientState.updateQueryState(e,"rejected",t);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new jt(Be.comparator);o=o.insert(i,Wn.newNoDocument(i,je.min()));const a=lt().add(i),l=new gd(je.min(),new Map,new jt(at),o,a);await mC(s,l),s.du=s.du.remove(i),s.Au.delete(e),Hm(s)}else await fg(s.localStore,e,!1).then((()=>mg(s,e,t))).catch(el)}async function OU(n,e){const t=qe(n),s=e.batch.batchId;try{const r=await $4(t.localStore,e);vC(t,s,null),yC(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Hc(t,r)}catch(r){await el(r)}}async function LU(n,e,t){const s=qe(n);try{const r=await(function(o,a){const l=qe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next((f=>(bt(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(c,f)))).next((()=>l.mutationQueue.performConsistencyCheck(c))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h))).next((()=>l.localDocuments.getDocuments(c,h)))}))})(s.localStore,e);vC(s,e,t),yC(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Hc(s,r)}catch(r){await el(r)}}function yC(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function vC(n,e,t){const s=qe(n);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(t?i.reject(t):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function mg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||AC(n,s)}))}function AC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Om(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Hm(n))}function iw(n,e,t){for(const s of t)s instanceof fC?(n.Ru.addReference(s.key,e),BU(n,s)):s instanceof pC?(we($m,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||AC(n,s.key)):Fe(19791,{wu:s})}function BU(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(we($m,"New document in limbo: "+t),n.Eu.add(s),Hm(n))}function Hm(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Be(Qt.fromString(e)),s=n.fu.next();n.Au.set(s,new CU(t)),n.du=n.du.insert(t,s),aC(n.remoteStore,new Ri(yr(Cm(t.path)),s,"TargetPurposeLimboResolution",ad.ce))}}async function Hc(n,e,t){const s=qe(n),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((a,l)=>{o.push(s.pu(l,e,t).then((c=>{if((c||t)&&s.isPrimaryClient){const h=c?!c.fromCache:t?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){r.push(c);const h=Nm.As(l.targetId,c);i.push(h)}})))})),await Promise.all(o),s.Pu.H_(r),await(async function(l,c){const h=qe(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>re.forEach(c,(p=>re.forEach(p.Es,(m=>h.persistence.referenceDelegate.addReference(f,p.targetId,m))).next((()=>re.forEach(p.ds,(m=>h.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))))))}catch(f){if(!tl(f))throw f;we(Dm,"Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=h.Ms.get(p),E=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(E);h.Ms=h.Ms.insert(p,v)}}})(s.localStore,i))}async function MU(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){we($m,"User change. New user:",e.toKey());const s=await sC(t.localStore,e);t.currentUser=e,(function(i,o){i.mu.forEach((a=>{a.forEach((l=>{l.reject(new Re(le.CANCELLED,o))}))})),i.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Hc(t,s.Ls)}}function FU(n,e){const t=qe(n),s=t.Au.get(e);if(s&&s.hu)return lt().add(s.key);{let r=lt();const i=t.Iu.get(e);if(!i)return r;for(const o of i){const a=t.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function wC(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=mC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=DU.bind(null,e),e.Pu.H_=wU.bind(null,e.eventManager),e.Pu.yu=_U.bind(null,e.eventManager),e}function UU(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LU.bind(null,e),e}class Eh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=md(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return V4(this.persistence,new M4,e.initialUser,this.serializer)}Cu(e){return new nC(km.mi,this.serializer)}Du(e){return new W4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Eh.provider={build:()=>new Eh};class VU extends Eh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){bt(this.persistence.referenceDelegate instanceof wh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new E4(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ys.withCacheSize(this.cacheSizeBytes):ys.DEFAULT;return new nC((s=>wh.mi(s,t)),this.serializer)}}class yg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>rw(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=MU.bind(null,this.syncEngine),await gU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new yU})()}createDatastore(e){const t=md(e.databaseInfo.databaseId),s=(function(i){return new X4(i)})(e.databaseInfo);return(function(i,o,a,l){return new nU(i,o,a,l)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,r,i,o,a){return new rU(s,r,i,o,a)})(this.localStore,this.datastore,e.asyncQueue,(t=>rw(this.syncEngine,t,0)),(function(){return XA.v()?new XA:new K4})())}createSyncEngine(e,t){return(function(r,i,o,a,l,c,h){const f=new TU(r,i,o,a,l,c);return h&&(f.gu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=qe(t);we(Bo,"RemoteStore shutting down."),s.Ea.add(5),await $c(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}yg.provider={build:()=>new yg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ni("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki="FirestoreClient";class HU{constructor(e,t,s,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=r,this.user=jn.UNAUTHENTICATED,this.clientId=vm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,(async o=>{we(Ki,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(we(Ki,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Um(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function sp(n,e){n.asyncQueue.verifyOperationInProgress(),we(Ki,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async r=>{s.isEqual(r)||(await sC(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function ow(n,e){n.asyncQueue.verifyOperationInProgress();const t=await GU(n);we(Ki,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>ew(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,r)=>ew(e.remoteStore,r))),n._onlineComponents=e}async function GU(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){we(Ki,"Using user provided OfflineComponentProvider");try{await sp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===le.FAILED_PRECONDITION||r.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Va("Error using user provided cache. Falling back to memory cache: "+t),await sp(n,new Eh)}}else we(Ki,"Using default OfflineComponentProvider"),await sp(n,new VU(void 0));return n._offlineComponents}async function _C(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(we(Ki,"Using user provided OnlineComponentProvider"),await ow(n,n._uninitializedComponentsProvider._online)):(we(Ki,"Using default OnlineComponentProvider"),await ow(n,new yg))),n._onlineComponents}function QU(n){return _C(n).then((e=>e.syncEngine))}async function jU(n){const e=await _C(n),t=e.eventManager;return t.onListen=SU.bind(null,e.syncEngine),t.onUnlisten=xU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=PU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=kU.bind(null,e.syncEngine),t}function zU(n,e,t={}){const s=new Bi;return n.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,l,c){const h=new $U({next:p=>{h.Nu(),o.enqueueAndForget((()=>AU(i,f)));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new Re(le.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new Re(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new EU(Cm(a.path),h,{includeMetadataChanges:!0,qa:!0});return vU(i,f)})(await jU(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="firestore.googleapis.com",lw=!0;class cw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Re(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bC,this.ssl=lw}else this.host=e.host,this.ssl=e.ssl??lw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<w4)throw new Re(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=EC(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Re(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Re(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Re(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gm{constructor(e,t,s,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new zM;switch(s.type){case"firstParty":return new JM(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Re(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=aw.get(t);s&&(we("ComponentProvider","Removing Datastore"),aw.delete(t),s.terminate())})(this),Promise.resolve()}}function WU(n,e,t,s={}){n=pc(n,Gm);const r=Ja(e),i=n._getSettings(),o={...i,emulatorOptions:n._getEmulatorOptions()},a=`${e}:${t}`;r&&(vb(`https://${a}`),Ab("Firestore",!0)),i.host!==bC&&i.host!==a&&Va("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:r,emulatorOptions:s};if(!Hi(l,o)&&(n._setSettings(l),s.mockUserToken)){let c,h;if(typeof s.mockUserToken=="string")c=s.mockUserToken,h=jn.MOCK_USER;else{c=vO(s.mockUserToken,n._app?.options.projectId);const f=s.mockUserToken.sub||s.mockUserToken.user_id;if(!f)throw new Re(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new jn(f)}n._authCredentials=new WM(new pI(c,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Qm(this.firestore,e,this._query)}}class Nn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _c(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nn(this.firestore,e,this._key)}toJSON(){return{type:Nn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Fc(t,Nn._jsonSchema))return new Nn(e,s||null,new Be(Qt.fromString(t.referencePath)))}}Nn._jsonSchemaVersion="firestore/documentReference/1.0",Nn._jsonSchema={type:mn("string",Nn._jsonSchemaVersion),referencePath:mn("string")};class _c extends Qm{constructor(e,t,s){super(e,t,Cm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nn(this.firestore,null,new Be(e))}withConverter(e){return new _c(this.firestore,e,this._path)}}function IC(n,e,...t){if(n=_s(n),arguments.length===1&&(e=vm.newId()),nF("doc","path",e),n instanceof Gm){const s=Qt.fromString(e,...t);return bA(s),new Nn(n,null,new Be(s))}{if(!(n instanceof Nn||n instanceof _c))throw new Re(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Qt.fromString(e,...t));return bA(s),new Nn(n.firestore,n instanceof _c?n.converter:null,new Be(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="AsyncQueue";class hw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new iC(this,"async_queue_retry"),this._c=()=>{const s=np();s&&we(uw,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=np();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=np();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Bi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!tl(e))throw e;we(uw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ni("INTERNAL UNHANDLED ERROR: ",dw(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Fm.createAndSchedule(this,e,t,s,(i=>this.hc(i)));return this.tc.push(r),r}uc(){this.nc&&Fe(47125,{Pc:dw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function dw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class jm extends Gm{constructor(e,t,s,r){super(e,t,s,r),this.type="firestore",this._queue=new hw,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hw(e),this._firestoreClient=void 0,await e}}}function KU(n,e){const t=typeof n=="object"?n:hc(),s=typeof n=="string"?n:fh,r=Ho(t,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=mO("firestore");i&&WU(r,...i)}return r}function CC(n){if(n._terminated)throw new Re(le.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||qU(n),n._firestoreClient}function qU(n){const e=n._freezeSettings(),t=(function(r,i,o,a){return new pF(r,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,EC(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new HU(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ms(Vn.fromBase64String(e))}catch(t){throw new Re(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ms(Vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ms._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Fc(e,Ms._jsonSchema))return Ms.fromBase64String(e.bytes)}}Ms._jsonSchemaVersion="firestore/bytes/1.0",Ms._jsonSchema={type:mn("string",Ms._jsonSchemaVersion),bytes:mn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Re(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return at(this._lat,e._lat)||at(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ar._jsonSchemaVersion}}static fromJSON(e){if(Fc(e,Ar._jsonSchema))return new Ar(e.latitude,e.longitude)}}Ar._jsonSchemaVersion="firestore/geoPoint/1.0",Ar._jsonSchema={type:mn("string",Ar._jsonSchemaVersion),latitude:mn("number"),longitude:mn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:wr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Fc(e,wr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new wr(e.vectorValues);throw new Re(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wr._jsonSchemaVersion="firestore/vectorValue/1.0",wr._jsonSchema={type:mn("string",wr._jsonSchemaVersion),vectorValues:mn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU=/^__.*__$/;class YU{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new jo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Uc(e,this.data,t,this.fieldTransforms)}}function SC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{Ac:n})}}class Wm{constructor(e,t,s,r,i,o){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Wm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return bh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(SC(this.Ac)&&JU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class XU{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||md(e)}Cc(e,t,s,r=!1){return new Wm({Ac:e,methodName:t,Dc:s,path:Un.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ZU(n){const e=n._freezeSettings(),t=md(n._databaseId);return new XU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function e3(n,e,t,s,r,i={}){const o=n.Cc(i.merge||i.mergeFields?2:0,e,t,r);kC("Data must be an object, but it was:",o,s);const a=RC(s,o);let l,c;if(i.merge)l=new Js(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=t3(e,f,t);if(!o.contains(p))throw new Re(le.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);s3(h,p)||h.push(p)}l=new Js(h),c=o.fieldTransforms.filter((f=>l.covers(f.field)))}else l=null,c=o.fieldTransforms;return new YU(new Bs(a),l,c)}function PC(n,e){if(xC(n=_s(n)))return kC("Unsupported field value:",e,n),RC(n,e);if(n instanceof TC)return(function(s,r){if(!SC(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const i=[];let o=0;for(const a of s){let l=PC(a,r.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(n,e)}return(function(s,r){if((s=_s(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return FF(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Mt.fromDate(s);return{timestampValue:Ah(r.serializer,i)}}if(s instanceof Mt){const i=new Mt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ah(r.serializer,i)}}if(s instanceof Ar)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ms)return{bytesValue:KI(r.serializer,s._byteString)};if(s instanceof Nn){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Rm(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof wr)return(function(o,a){return{mapValue:{fields:{[bI]:{stringValue:II},[ph]:{arrayValue:{values:o.toArray().map((c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return Tm(a.serializer,c)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${Am(s)}`)})(n,e)}function RC(n,e){const t={};return yI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Go(n,((s,r)=>{const i=PC(r,e.mc(s));i!=null&&(t[s]=i)})),{mapValue:{fields:t}}}function xC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Mt||n instanceof Ar||n instanceof Ms||n instanceof Nn||n instanceof TC||n instanceof wr)}function kC(n,e,t){if(!xC(t)||!gI(t)){const s=Am(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function t3(n,e,t){if((e=_s(e))instanceof zm)return e._internalPath;if(typeof e=="string")return NC(n,e);throw bh("Field path arguments must be of type string or ",n,!1,void 0,t)}const n3=new RegExp("[~\\*/\\[\\]]");function NC(n,e,t){if(e.search(n3)>=0)throw bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zm(...e.split("."))._internalPath}catch{throw bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function bh(n,e,t,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new Re(le.INVALID_ARGUMENT,a+n+l)}function s3(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,t,s,r,i){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new r3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(OC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class r3 extends DC{data(){return super.data()}}function OC(n,e){return typeof e=="string"?NC(n,e):e instanceof zm?e._internalPath:e._delegate._internalPath}class i3{convertValue(e,t="none"){switch(zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Go(e,((r,i)=>{s[r]=this.convertValue(i,t)})),s}convertVectorValue(e){const t=e.fields?.[ph].arrayValue?.values?.map((s=>rn(s.doubleValue)));return new wr(t)}convertGeoPoint(e){return new Ar(rn(e.latitude),rn(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=cd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(mc(e));default:return null}}convertTimestamp(e){const t=Qi(e);return new Mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Qt.fromString(e);bt(eC(s),9688,{name:e});const r=new yc(s.get(1),s.get(3)),i=new Be(s.popFirst(5));return r.isEqual(t)||ni(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class Sl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Po extends DC{constructor(e,t,s,r,i,o){super(e,t,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(OC("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Po._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Po._jsonSchemaVersion="firestore/documentSnapshot/1.0",Po._jsonSchema={type:mn("string",Po._jsonSchemaVersion),bundleSource:mn("string","DocumentSnapshot"),bundleName:mn("string"),bundle:mn("string")};class Mu extends Po{data(e={}){return super.data(e)}}class jl{constructor(e,t,s,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Sl(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Mu(this._firestore,this._userDataWriter,s.key,s,new Sl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((a=>{const l=new Mu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Sl(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((a=>i||a.type!==3)).map((a=>{const l=new Mu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Sl(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:a3(a.type),doc:l,oldIndex:c,newIndex:h}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=jl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],r=[];return this.docs.forEach((i=>{i._document!==null&&(t.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function a3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(n){n=pc(n,Nn);const e=pc(n.firestore,jm);return zU(CC(e),n._key).then((t=>h3(e,n,t)))}jl._jsonSchemaVersion="firestore/querySnapshot/1.0",jl._jsonSchema={type:mn("string",jl._jsonSchemaVersion),bundleSource:mn("string","QuerySnapshot"),bundleName:mn("string"),bundle:mn("string")};class l3 extends i3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ms(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nn(this.firestore,null,t)}}function c3(n,e,t){n=pc(n,Nn);const s=pc(n.firestore,jm),r=o3(n.converter,e);return u3(s,[e3(ZU(s),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Wr.none())])}function u3(n,e){return(function(s,r){const i=new Bi;return s.asyncQueue.enqueueAndForget((async()=>NU(await QU(s),r,i))),i.promise})(CC(n),e)}function h3(n,e,t){const s=t.docs.get(e._key),r=new l3(n);return new Po(n,r,e._key,s,new Sl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){Za=r})(Ya),Er(new tr("firestore",((s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),a=new jm(new KM(s.getProvider("auth-internal")),new YM(o,s.getProvider("app-check-internal")),(function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Re(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yc(c.options.projectId,h)})(o,r),o);return i={useFetchStreams:t,...i},a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),Vs(AA,wA,e),Vs(AA,wA,"esm2020")})();const BC="@firebase/installations",Km="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=1e4,FC=`w:${Km}`,UC="FIS_v2",d3="https://firebaseinstallations.googleapis.com/v1",f3=3600*1e3,p3="installations",g3="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Mo=new $o(p3,g3,m3);function VC(n){return n instanceof sr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C({projectId:n}){return`${d3}/projects/${n}/installations`}function HC(n){return{token:n.token,requestStatus:2,expiresIn:v3(n.expiresIn),creationTime:Date.now()}}async function GC(n,e){const s=(await e.json()).error;return Mo.create("request-failed",{requestName:n,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function QC({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function y3(n,{refreshToken:e}){const t=QC(n);return t.append("Authorization",A3(e)),t}async function jC(n){const e=await n();return e.status>=500&&e.status<600?n():e}function v3(n){return Number(n.replace("s","000"))}function A3(n){return`${UC} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w3({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const s=$C(n),r=QC(n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={fid:t,authVersion:UC,appId:n.appId,sdkVersion:FC},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await jC(()=>fetch(s,a));if(l.ok){const c=await l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:HC(c.authToken)}}else throw await GC("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3=/^[cdef][\w-]{21}$/,vg="";function b3(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=I3(n);return E3.test(t)?t:vg}catch{return vg}}function I3(n){return _3(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=new Map;function KC(n,e){const t=Ad(n);qC(t,e),C3(t,e)}function qC(n,e){const t=WC.get(n);if(t)for(const s of t)s(e)}function C3(n,e){const t=T3();t&&t.postMessage({key:n,fid:e}),S3()}let bo=null;function T3(){return!bo&&"BroadcastChannel"in self&&(bo=new BroadcastChannel("[Firebase] FID Change"),bo.onmessage=n=>{qC(n.data.key,n.data.fid)}),bo}function S3(){WC.size===0&&bo&&(bo.close(),bo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3="firebase-installations-database",R3=1,Fo="firebase-installations-store";let rp=null;function qm(){return rp||(rp=Cb(P3,R3,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Fo)}}})),rp}async function Ih(n,e){const t=Ad(n),r=(await qm()).transaction(Fo,"readwrite"),i=r.objectStore(Fo),o=await i.get(t);return await i.put(e,t),await r.done,(!o||o.fid!==e.fid)&&KC(n,e.fid),e}async function JC(n){const e=Ad(n),s=(await qm()).transaction(Fo,"readwrite");await s.objectStore(Fo).delete(e),await s.done}async function wd(n,e){const t=Ad(n),r=(await qm()).transaction(Fo,"readwrite"),i=r.objectStore(Fo),o=await i.get(t),a=e(o);return a===void 0?await i.delete(t):await i.put(a,t),await r.done,a&&(!o||o.fid!==a.fid)&&KC(n,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jm(n){let e;const t=await wd(n.appConfig,s=>{const r=x3(s),i=k3(n,r);return e=i.registrationPromise,i.installationEntry});return t.fid===vg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function x3(n){const e=n||{fid:b3(),registrationStatus:0};return YC(e)}function k3(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Mo.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=N3(n,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:D3(n)}:{installationEntry:e}}async function N3(n,e){try{const t=await w3(n,e);return Ih(n.appConfig,t)}catch(t){throw VC(t)&&t.customData.serverCode===409?await JC(n.appConfig):await Ih(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function D3(n){let e=await fw(n.appConfig);for(;e.registrationStatus===1;)await zC(100),e=await fw(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await Jm(n);return s||t}return e}function fw(n){return wd(n,e=>{if(!e)throw Mo.create("installation-not-found");return YC(e)})}function YC(n){return O3(n)?{fid:n.fid,registrationStatus:0}:n}function O3(n){return n.registrationStatus===1&&n.registrationTime+MC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L3({appConfig:n,heartbeatServiceProvider:e},t){const s=B3(n,t),r=y3(n,t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={installation:{sdkVersion:FC,appId:n.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await jC(()=>fetch(s,a));if(l.ok){const c=await l.json();return HC(c)}else throw await GC("Generate Auth Token",l)}function B3(n,{fid:e}){return`${$C(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ym(n,e=!1){let t;const s=await wd(n.appConfig,i=>{if(!XC(i))throw Mo.create("not-registered");const o=i.authToken;if(!e&&U3(o))return i;if(o.requestStatus===1)return t=M3(n,e),i;{if(!navigator.onLine)throw Mo.create("app-offline");const a=$3(i);return t=F3(n,a),a}});return t?await t:s.authToken}async function M3(n,e){let t=await pw(n.appConfig);for(;t.authToken.requestStatus===1;)await zC(100),t=await pw(n.appConfig);const s=t.authToken;return s.requestStatus===0?Ym(n,e):s}function pw(n){return wd(n,e=>{if(!XC(e))throw Mo.create("not-registered");const t=e.authToken;return H3(t)?{...e,authToken:{requestStatus:0}}:e})}async function F3(n,e){try{const t=await L3(n,e),s={...e,authToken:t};return await Ih(n.appConfig,s),t}catch(t){if(VC(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await JC(n.appConfig);else{const s={...e,authToken:{requestStatus:0}};await Ih(n.appConfig,s)}throw t}}function XC(n){return n!==void 0&&n.registrationStatus===2}function U3(n){return n.requestStatus===2&&!V3(n)}function V3(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+f3}function $3(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function H3(n){return n.requestStatus===1&&n.requestTime+MC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G3(n){const e=n,{installationEntry:t,registrationPromise:s}=await Jm(e);return s?s.catch(console.error):Ym(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q3(n,e=!1){const t=n;return await j3(t),(await Ym(t,e)).token}async function j3(n){const{registrationPromise:e}=await Jm(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z3(n){if(!n||!n.options)throw ip("App Configuration");if(!n.name)throw ip("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw ip(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function ip(n){return Mo.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="installations",W3="installations-internal",K3=n=>{const e=n.getProvider("app").getImmediate(),t=z3(e),s=Ho(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},q3=n=>{const e=n.getProvider("app").getImmediate(),t=Ho(e,ZC).getImmediate();return{getId:()=>G3(t),getToken:r=>Q3(t,r)}};function J3(){Er(new tr(ZC,K3,"PUBLIC")),Er(new tr(W3,q3,"PRIVATE"))}J3();Vs(BC,Km);Vs(BC,Km,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch="analytics",Y3="firebase_id",X3="origin",Z3=60*1e3,eV="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new sd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ks=new $o("analytics","Analytics",tV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nV(n){if(!n.startsWith(Xm)){const e=ks.create("invalid-gtag-resource",{gtagURL:n});return us.warn(e.message),""}return n}function eT(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function sV(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function rV(n,e){const t=sV("firebase-js-sdk-policy",{createScriptURL:nV}),s=document.createElement("script"),r=`${Xm}?l=${n}&id=${e}`;s.src=t?t?.createScriptURL(r):r,s.async=!0,document.head.appendChild(s)}function iV(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function oV(n,e,t,s,r,i){const o=s[r];try{if(o)await e[o];else{const l=(await eT(t)).find(c=>c.measurementId===r);l&&await e[l.appId]}}catch(a){us.error(a)}n("config",r,i)}async function aV(n,e,t,s,r){try{let i=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=await eT(t);for(const l of o){const c=a.find(f=>f.measurementId===l),h=c&&e[c.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),n("event",s,r||{})}catch(i){us.error(i)}}function lV(n,e,t,s){async function r(i,...o){try{if(i==="event"){const[a,l]=o;await aV(n,e,t,a,l)}else if(i==="config"){const[a,l]=o;await oV(n,e,t,s,a,l)}else if(i==="consent"){const[a,l]=o;n("consent",a,l)}else if(i==="get"){const[a,l,c]=o;n("get",a,l,c)}else if(i==="set"){const[a]=o;n("set",a)}else n(i,...o)}catch(a){us.error(a)}}return r}function cV(n,e,t,s,r){let i=function(...o){window[s].push(arguments)};return window[r]&&typeof window[r]=="function"&&(i=window[r]),window[r]=lV(i,n,e,t),{gtagCore:i,wrappedGtag:window[r]}}function uV(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Xm)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=30,dV=1e3;class fV{constructor(e={},t=dV){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const tT=new fV;function pV(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function gV(n){const{appId:e,apiKey:t}=n,s={method:"GET",headers:pV(t)},r=eV.replace("{app-id}",e),i=await fetch(r,s);if(i.status!==200&&i.status!==304){let o="";try{const a=await i.json();a.error?.message&&(o=a.error.message)}catch{}throw ks.create("config-fetch-failed",{httpStatus:i.status,responseMessage:o})}return i.json()}async function mV(n,e=tT,t){const{appId:s,apiKey:r,measurementId:i}=n.options;if(!s)throw ks.create("no-app-id");if(!r){if(i)return{measurementId:i,appId:s};throw ks.create("no-api-key")}const o=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new AV;return setTimeout(async()=>{a.abort()},Z3),nT({appId:s,apiKey:r,measurementId:i},o,a,e)}async function nT(n,{throttleEndTimeMillis:e,backoffCount:t},s,r=tT){const{appId:i,measurementId:o}=n;try{await yV(s,e)}catch(a){if(o)return us.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${a?.message}]`),{appId:i,measurementId:o};throw a}try{const a=await gV(n);return r.deleteThrottleMetadata(i),a}catch(a){const l=a;if(!vV(l)){if(r.deleteThrottleMetadata(i),o)return us.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:i,measurementId:o};throw a}const c=Number(l?.customData?.httpStatus)===503?j0(t,r.intervalMillis,hV):j0(t,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+c,backoffCount:t+1};return r.setThrottleMetadata(i,h),us.debug(`Calling attemptFetch again in ${c} millis`),nT(n,h,s,r)}}function yV(n,e){return new Promise((t,s)=>{const r=Math.max(e-Date.now(),0),i=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(i),s(ks.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function vV(n){if(!(n instanceof sr)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class AV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function wV(n,e,t,s,r){if(r&&r.global){n("event",t,s);return}else{const i=await e,o={...s,send_to:i};n("event",t,o)}}async function _V(n,e,t,s){if(s&&s.global){const r={};for(const i of Object.keys(t))r[`user_properties.${i}`]=t[i];return n("set",r),Promise.resolve()}else{const r=await e;n("config",r,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EV(){if(_b())try{await Eb()}catch(n){return us.warn(ks.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return us.warn(ks.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function bV(n,e,t,s,r,i,o){const a=mV(n);a.then(p=>{t[p.measurementId]=p.appId,n.options.measurementId&&p.measurementId!==n.options.measurementId&&us.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>us.error(p)),e.push(a);const l=EV().then(p=>{if(p)return s.getId()}),[c,h]=await Promise.all([a,l]);uV(i)||rV(i,c.measurementId),r("js",new Date);const f=o?.config??{};return f[X3]="firebase",f.update=!0,h!=null&&(f[Y3]=h),r("config",c.measurementId,f),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e){this.app=e}_delete(){return delete Sa[this.app.options.appId],Promise.resolve()}}let Sa={},gw=[];const mw={};let op="dataLayer",CV="gtag",yw,Zm,vw=!1;function TV(){const n=[];if(wb()&&n.push("This is a browser extension environment."),SO()||n.push("Cookies are not available."),n.length>0){const e=n.map((s,r)=>`(${r+1}) ${s}`).join(" "),t=ks.create("invalid-analytics-context",{errorInfo:e});us.warn(t.message)}}function SV(n,e,t){TV();const s=n.options.appId;if(!s)throw ks.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)us.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ks.create("no-api-key");if(Sa[s]!=null)throw ks.create("already-exists",{id:s});if(!vw){iV(op);const{wrappedGtag:i,gtagCore:o}=cV(Sa,gw,mw,op,CV);Zm=i,yw=o,vw=!0}return Sa[s]=bV(n,gw,mw,e,yw,op,t),new IV(n)}function PV(n=hc()){n=_s(n);const e=Ho(n,Ch);return e.isInitialized()?e.getImmediate():RV(n)}function RV(n,e={}){const t=Ho(n,Ch);if(t.isInitialized()){const r=t.getImmediate();if(Hi(e,t.getOptions()))return r;throw ks.create("already-initialized")}return t.initialize({options:e})}function xV(n,e,t){n=_s(n),_V(Zm,Sa[n.app.options.appId],e,t).catch(s=>us.error(s))}function kV(n,e,t,s){n=_s(n),wV(Zm,Sa[n.app.options.appId],e,t,s).catch(r=>us.error(r))}const Aw="@firebase/analytics",ww="0.10.19";function NV(){Er(new tr(Ch,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return SV(s,r,t)},"PUBLIC")),Er(new tr("analytics-internal",n,"PRIVATE")),Vs(Aw,ww),Vs(Aw,ww,"esm2020");function n(e){try{const t=e.getProvider(Ch).getImmediate();return{logEvent:(s,r,i)=>kV(t,s,r,i),setUserProperties:(s,r)=>xV(t,s,r)}}catch(t){throw ks.create("interop-component-reg-failed",{reason:t})}}}NV();const sT={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,measurementId:void 0},DV=n=>{const t=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"].filter(s=>!n[s]);return t.length>0?(console.error("=== Firebase   ==="),console.error(" :",t),console.error("   . .env  ."),console.error(" :    ! (npm run dev)"),!1):!0};let xi=null;DV(sT)||console.error("Firebase   .");try{Y0().length>0?xi=hc():xi=Tb(sT)}catch(n){if(console.error("Firebase    :",n),n.code==="app/duplicate-app"||n.message?.includes("duplicate"))try{xi=hc()}catch(e){console.error("    :",e);const t=Y0();if(t.length>0)xi=t[0];else throw new Error("Firebase    .")}else throw n}let Yt=null,ey=null;if(xi)try{Yt=QM(xi),ey=KU(xi)}catch(n){console.error(" Firebase Auth/Firestore  :",n)}else console.error(" Firebase   . auth db   .");let OV=null;if(typeof window<"u")try{OV=PV(xi)}catch(n){n.code==="analytics/already-initialized"||n.message?.includes("already")?console.log("Analytics  ."):console.warn("Analytics  :",n.message||n)}new Fr;const LV=async(n,e={})=>{const t=IC(ey,"users",n.uid);(await LC(t)).exists()||await c3(t,{email:n.email,displayName:n.displayName||e.name||n.email?.split("@")[0],photoURL:n.photoURL,phone:e.phone||"",createdAt:new Date().toISOString(),...e,gameData:{level:1,coins:0,totalCoin:0,catFragments:50,nftCount:0,miningLevel:1,huntingLevel:1,explorationLevel:1,productionLevel:1,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}})};let ap=!1;const UJ=async()=>{if(ap)return Yt.currentUser?{success:!0,user:Yt.currentUser}:{success:!1,error:" "};try{console.log("handleRedirectResult  - getRedirectResult  ...");const n=await oM(Yt);if(console.log("getRedirectResult :",n?" ":"null"),ap=!0,n&&n.user){const e=n.user;return console.log("  -  :",e.email,e.uid),await LV(e),console.log("Firestore  "),{success:!0,user:e}}return Yt.currentUser?(console.log("   Firebase   :",Yt.currentUser.email),{success:!0,user:Yt.currentUser}):(console.log("  "),{success:!1,error:"  ."})}catch(n){return ap=!0,console.error("   :",n),Yt.currentUser?(console.log("  Firebase   :",Yt.currentUser.email),{success:!0,user:Yt.currentUser}):{success:!1,error:n.message}}},_w=async n=>{try{const e=IC(ey,"users",n),t=await LC(e);return t.exists()?t.data():null}catch(e){return console.error("   :",e),null}},BV="/tdl/assets/tdl_splashLogo-b8p6ictM.png",MV="/tdl/assets/tdl_splash_bg-B78B8oeM.png",zt=(n,e)=>{const t=n.__vccOpts||n;for(const[s,r]of e)t[s]=r;return t},FV={class:"loading-screen"},UV={class:"loading-bar-container"},VV={class:"loading-bar-track"},$V={__name:"LoadingScreen",setup(n){const e=bn();un();const t=$(0);return Lt(()=>{const i=.5333333333333333,o=setInterval(()=>{t.value+=i,t.value>=100&&(t.value=100,clearInterval(o),setTimeout(()=>{_t()?e.push("/home"):e.push("/login")},200))},16)}),(s,r)=>(M(),F("div",FV,[r[0]||(r[0]=d("div",{class:"logo-top"},[d("img",{src:BV,alt:"TDL Logo",class:"splash-logo"})],-1)),d("div",UV,[d("div",VV,[d("div",{class:"loading-bar-fill",style:Tt({width:t.value+"%"})},null,4)])]),r[1]||(r[1]=d("div",{class:"splash-bg"},[d("img",{src:MV,alt:"Splash Background",class:"splash-bg-image"})],-1))]))}},HV=zt($V,[["__scopeId","data-v-b45e8a71"]]);async function _d(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(s)).map(o=>o.toString(16).padStart(2,"0")).join("")}async function GV(n,e){return await _d(n)===e}const QV="/tdl/assets/urerTown-BuaGLkQ2.png",jV={class:"login-screen"},zV={class:"login-title"},WV={class:"urer-town-container"},KV=["src"],qV={class:"input-group"},JV={class:"input-container"},YV=["placeholder"],XV={class:"input-group"},ZV={class:"input-container"},e6=["type","placeholder"],t6={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},n6={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},s6=["disabled"],r6={key:0,class:"btn-content"},i6={key:1,class:"btn-content"},o6={key:2,class:"btn-content"},a6=["disabled"],l6={class:"btn-content"},c6={key:0,class:"wallet-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},u6={key:1,class:"spinner-small"},h6={key:0,class:"wallet-error"},d6={class:"signup-link"},f6={__name:"LoginScreen",setup(n){he(()=>!!Yt);const e=bn(),t=un(),{setWalletConnected:s,setLoading:r,connectWalletToApp:i}=t,o=$(!1),a=$(!1),l=$(!1),c=$(""),h=$(!1),f=he(()=>Es()),p=()=>{e.push("/signup")},m=$(""),E=$(""),v=async T=>{if(T.preventDefault(),!m.value.trim()||!E.value.trim()){alert("Please enter both email and password.");return}o.value=!0,r(!0);const L=JSON.parse(localStorage.getItem("users")||"[]"),Q=L.find(q=>q.email===m.value);setTimeout(async()=>{if(o.value=!1,Q){let q=!1;try{if(Q.password&&Q.password.length<64){if(q=Q.password===E.value,q){const x=await _d(E.value);Q.password=x;const I=L.findIndex(C=>C.id===Q.id);I!==-1&&(L[I]=Q,localStorage.setItem("users",JSON.stringify(L)))}}else q=await GV(E.value,Q.password)}catch(x){console.error("Password verification error:",x),r(!1),alert("An error occurred during login. Please try again.");return}if(q){a.value=!0;const{password:x,...I}=Q;sessionStorage.setItem("currentUser",JSON.stringify(I)),s(Q.email,`${Q.gameData?.coins||0} coins`),r(!1),setTimeout(()=>{e.push("/home")},1e3)}else r(!1),alert("Email or password is incorrect.")}else r(!1),alert("Email or password is incorrect.")},2e3)},A=()=>{h.value=!h.value},w=()=>{e.push("/forgot-password")},P=async()=>{try{if(l.value=!0,c.value="",r(!0),!qa()){c.value="MetaMask is not installed.",confirm("Would you like to install MetaMask?")&&window.open("https://metamask.io/download/","_blank");return}const T=await i();T.success?(a.value=!0,setTimeout(()=>{e.push("/home")},1e3)):(c.value=T.error||"Failed to connect wallet.",T.needInstall&&confirm("Would you like to install MetaMask?")&&window.open("https://metamask.io/download/","_blank"))}catch(T){console.error("Wallet connection error:",T),c.value="An error occurred while connecting wallet."}finally{l.value=!1,r(!1)}};return Lt(()=>{r(!1);const T=_t();if(T&&T.id){e.push("/home");return}const L=document.querySelector(".loginCont");L&&(L.style.opacity="0",L.style.transform="translateY(30px)",setTimeout(()=>{L.style.transition="all 0.6s ease",L.style.opacity="1",L.style.transform="translateY(0)"},100))}),(T,L)=>(M(),F("div",jV,[d("h1",zV,_(f.value.login),1),d("div",WV,[d("img",{src:Le(QV),alt:"Urer Town",class:"urer-town-image"},null,8,KV)]),d("form",{onSubmit:v,class:"login-form"},[d("div",qV,[d("div",JV,[L[2]||(L[2]=d("span",{class:"input-text-label"},"email",-1)),tn(d("input",{type:"email","onUpdate:modelValue":L[0]||(L[0]=Q=>m.value=Q),class:"input-field",placeholder:f.value.enterEmail,required:""},null,8,YV),[[Ns,m.value]])])]),d("div",XV,[d("div",ZV,[L[5]||(L[5]=d("span",{class:"input-text-label"},"password",-1)),tn(d("input",{type:h.value?"text":"password","onUpdate:modelValue":L[1]||(L[1]=Q=>E.value=Q),class:"input-field",placeholder:f.value.enterPassword,required:""},null,8,e6),[[s1,E.value]]),d("button",{type:"button",class:"password-toggle",onClick:A},[h.value?(M(),F("svg",n6,[...L[4]||(L[4]=[d("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},null,-1),d("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)])])):(M(),F("svg",t6,[...L[3]||(L[3]=[d("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),d("circle",{cx:"12",cy:"12",r:"3"},null,-1)])]))])])]),d("button",{type:"submit",disabled:o.value||a.value,class:Ne(["login-button",{connecting:o.value,connected:a.value}])},[!o.value&&!a.value?(M(),F("div",r6,_(f.value.loginButton),1)):ue("",!0),o.value?(M(),F("div",i6,[L[6]||(L[6]=d("div",{class:"spinner-small"},null,-1)),Yl(" "+_(f.value.loading),1)])):ue("",!0),a.value?(M(),F("div",o6,[L[7]||(L[7]=d("svg",{class:"check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[d("path",{d:"M20 6L9 17l-5-5"})],-1)),Yl(" "+_(f.value.success)+"! ",1)])):ue("",!0)],10,s6)],32),d("button",{onClick:P,disabled:l.value||o.value,class:"wallet-connect-button"},[d("div",l6,[l.value?ue("",!0):(M(),F("svg",c6,[...L[8]||(L[8]=[d("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},null,-1),d("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},null,-1)])])),l.value?(M(),F("div",u6)):ue("",!0),d("span",null,_(l.value?f.value.loading:f.value.walletConnect),1)])],8,a6),c.value?(M(),F("div",h6,_(c.value),1)):ue("",!0),d("div",d6,[d("button",{onClick:p,class:"signup-btn"},_(f.value.signupButton),1),L[9]||(L[9]=d("span",{class:"link-separator"},"|",-1)),d("button",{onClick:w,class:"forgot-password-btn"}," Forgot password? ")])]))}},p6=zt(f6,[["__scopeId","data-v-989307df"]]),Ew=n=>{const e=n.toString().split("").reduce((i,o)=>(i<<5)-i+o.charCodeAt(0),0),t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let s="",r=Math.abs(e);for(let i=0;i<6;i++)s+=t[r%t.length],r=Math.floor(r/t.length);return s},rT=n=>{const e=Ji(),t=e.find(r=>r.id===n);if(!t)return Ew(n);if(t.inviteCode)return t.inviteCode;const s=Ew(n);return t.inviteCode=s,localStorage.setItem("users",JSON.stringify(e)),s},g6=n=>Ji().find(t=>t.inviteCode===n)||null,m6=async(n,e)=>{if(!e)return{success:!1,error:"  ."};const t=g6(e);if(!t)return{success:!1,error:"   ."};if(t.id===n)return{success:!1,error:"    ."};const s=Ji(),r=s.find(c=>c.id===n);if(r&&r.referredBy)return{success:!1,error:"  ."};r&&(r.referredBy=t.id,r.referredAt=new Date().toISOString(),localStorage.setItem("users",JSON.stringify(s))),t.referrals||(t.referrals=[]),t.referrals.includes(n)||t.referrals.push(n),t.referralStats||(t.referralStats={totalReferrals:0,rewardsReceived:0}),t.referralStats.totalReferrals=t.referrals.length,localStorage.setItem("users",JSON.stringify(s));const i=un(),o=100,a=(t.gameData?.coins||0)+o;await tc(t.id,{coins:a});const l=50;if(r){const c=(r.gameData?.coins||0)+l;await tc(n,{coins:c}),i.state.currentUser?.id===n&&await i.updateCoins(c)}return i.state.currentUser?.id===t.id&&await i.updateCoins(a),window.dispatchEvent(new CustomEvent("userDataUpdated")),{success:!0,inviter:t.name||t.email,inviterReward:o,newUserReward:l}},bw=n=>{const t=Ji().find(s=>s.id===n);return t?{inviteCode:t.inviteCode||rT(n),totalReferrals:t.referrals?.length||0,referrals:t.referrals||[],referralStats:t.referralStats||{totalReferrals:0,rewardsReceived:0}}:{inviteCode:null,totalReferrals:0,referrals:[]}},y6={class:"signup-screen"},v6={class:"input-group"},A6={class:"input-container"},w6={class:"input-group"},_6={class:"input-container"},E6=["type"],b6={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},I6={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},C6={class:"input-group"},T6={class:"input-container"},S6={__name:"SignupScreen",setup(n){const e=bn(),t=y1(),s=$({name:"",email:"",password:""}),r=$(null);Lt(()=>{t.query.ref&&(r.value=t.query.ref)});const i=$(!1),o=()=>{e.go(-1)},a=async c=>{if(c.preventDefault(),!s.value.name.trim()||!s.value.email.trim()||!s.value.password.trim()){alert("Please fill in all fields.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.value.email)){alert("Please enter a valid email address.");return}if(s.value.password.length<6){alert("Password must be at least 6 characters long.");return}const f=JSON.parse(localStorage.getItem("users")||"[]");if(f.some(v=>v.email===s.value.email)){alert("This email is already registered.");return}let m;try{m=await _d(s.value.password)}catch(v){console.error("Password hashing error:",v),alert("An error occurred during signup. Please try again.");return}const E={id:Date.now(),name:s.value.name,email:s.value.email,password:m,createdAt:new Date().toISOString(),gameData:{level:1,coins:0,totalCoin:0,catFragments:50,nftCount:0,miningLevel:1,huntingLevel:1,explorationLevel:1,productionLevel:1,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}};if(f.push(E),localStorage.setItem("users",JSON.stringify(f)),r.value)try{const v=await m6(E.id,r.value);v.success?alert(`Signup completed successfully!
You have signed up with an invitation from ${v.inviter}!
Invitation reward: You received ${v.newUserReward} points!`):alert(`Signup completed successfully!
${v.error}`)}catch(v){console.error("Invitation code processing error:",v),alert("Signup completed successfully!")}else alert("Signup completed successfully!");e.push("/login")},l=()=>{i.value=!i.value};return(c,h)=>(M(),F("div",y6,[d("button",{class:"back-button",onClick:o}," < Back "),d("form",{onSubmit:a,class:"signup-form"},[d("div",v6,[d("div",A6,[h[3]||(h[3]=d("span",{class:"input-text-label"},"name",-1)),tn(d("input",{type:"text","onUpdate:modelValue":h[0]||(h[0]=f=>s.value.name=f),class:"input-field",placeholder:"Enter your name",required:""},null,512),[[Ns,s.value.name]])])]),d("div",w6,[d("div",_6,[h[6]||(h[6]=d("span",{class:"input-text-label"},"password",-1)),tn(d("input",{type:i.value?"text":"password","onUpdate:modelValue":h[1]||(h[1]=f=>s.value.password=f),class:"input-field",placeholder:"Enter your password",required:""},null,8,E6),[[s1,s.value.password]]),d("button",{type:"button",class:"password-toggle",onClick:l},[i.value?(M(),F("svg",I6,[...h[5]||(h[5]=[d("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},null,-1),d("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)])])):(M(),F("svg",b6,[...h[4]||(h[4]=[d("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),d("circle",{cx:"12",cy:"12",r:"3"},null,-1)])]))])])]),d("div",C6,[d("div",T6,[h[7]||(h[7]=d("span",{class:"input-text-label"},"email",-1)),tn(d("input",{type:"email","onUpdate:modelValue":h[2]||(h[2]=f=>s.value.email=f),class:"input-field",placeholder:"Enter your email",required:""},null,512),[[Ns,s.value.email]])])]),h[8]||(h[8]=d("button",{type:"submit",class:"signup-button"}," Create an account ",-1))],32)]))}},P6=zt(S6,[["__scopeId","data-v-2321b8b9"]]);function R6(n){const e=Date.now(),t=Math.random().toString(36).substring(2,15);return btoa(`${n}:${e}:${t}`).replace(/[+/=]/g,"")}function x6(n,e){const t=JSON.parse(localStorage.getItem("resetTokens")||"{}");t[e]={email:n,createdAt:Date.now(),expiresAt:Date.now()+1440*60*1e3},localStorage.setItem("resetTokens",JSON.stringify(t))}function Iw(n){const e=JSON.parse(localStorage.getItem("resetTokens")||"{}"),t=e[n];return t?Date.now()>t.expiresAt?(delete e[n],localStorage.setItem("resetTokens",JSON.stringify(e)),null):t:null}function k6(n){const e=JSON.parse(localStorage.getItem("resetTokens")||"{}");delete e[n],localStorage.setItem("resetTokens",JSON.stringify(e))}function N6(n){return`${window.location.origin+window.location.pathname}#/reset-password?token=${n}`}const D6={class:"forgot-password-screen"},O6={class:"input-group"},L6={class:"input-container"},B6=["disabled"],M6=["disabled"],F6={key:0,class:"reset-link-container"},U6={class:"reset-link-content"},V6={class:"reset-link-wrapper"},$6=["href"],H6={key:0,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},G6={key:1,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Q6={__name:"ForgotPasswordPage",setup(n){const e=bn(),t=$(""),s=$(!1),r=$(""),i=$(!1),o=$(!1),a=()=>{e.go(-1)},l=async h=>{if(h.preventDefault(),!t.value.trim()){alert("Please enter your email address.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.value)){alert("Please enter a valid email address.");return}s.value=!0;try{if(!JSON.parse(localStorage.getItem("users")||"[]").find(A=>A.email===t.value)){alert("Email address not found."),s.value=!1;return}const E=R6(t.value);x6(t.value,E);const v=N6(E);r.value=v,alert("Password reset link has been sent to your email address."),e.push("/login")}catch(p){console.error("Password reset link generation error:",p),alert("An error occurred while generating reset link. Please try again.")}finally{s.value=!1}},c=async()=>{try{await navigator.clipboard.writeText(r.value),o.value=!0,setTimeout(()=>{o.value=!1},2e3)}catch(h){console.error("Failed to copy link:",h);const f=document.createElement("textarea");f.value=r.value,f.style.position="fixed",f.style.opacity="0",document.body.appendChild(f),f.select();try{document.execCommand("copy"),o.value=!0,setTimeout(()=>{o.value=!1},2e3)}catch(p){console.error("Fallback copy failed:",p)}document.body.removeChild(f)}};return(h,f)=>(M(),F("div",D6,[d("button",{class:"back-button",onClick:a}," < Back "),d("form",{onSubmit:l,class:"forgot-password-form"},[d("div",O6,[d("div",L6,[f[1]||(f[1]=d("span",{class:"input-text-label"},"email",-1)),tn(d("input",{type:"email","onUpdate:modelValue":f[0]||(f[0]=p=>t.value=p),class:"input-field",placeholder:"Enter your email",required:"",disabled:s.value},null,8,B6),[[Ns,t.value]])])]),d("button",{type:"submit",class:"reset-button",disabled:s.value},_(s.value?"Sending...":"Reset password"),9,M6),i.value&&r.value?(M(),F("div",F6,[f[4]||(f[4]=K_('<div class="reset-link-header" data-v-61035ac8><svg class="link-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-61035ac8><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" data-v-61035ac8></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" data-v-61035ac8></path></svg><p class="reset-link-label" data-v-61035ac8>Reset link (development mode)</p></div>',1)),d("div",U6,[d("div",V6,[d("a",{href:r.value,class:"reset-link",target:"_blank"},_(r.value),9,$6)]),d("button",{onClick:c,class:Ne(["copy-button",{copied:o.value}])},[o.value?(M(),F("svg",G6,[...f[3]||(f[3]=[d("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(M(),F("svg",H6,[...f[2]||(f[2]=[d("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},null,-1),d("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},null,-1)])])),d("span",null,_(o.value?"Copied!":"Copy"),1)],2)])])):ue("",!0)],32)]))}},j6=zt(Q6,[["__scopeId","data-v-61035ac8"]]),z6="data:image/png;base64,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",W6={class:"reset-password-screen"},K6={class:"email-info"},q6={class:"input-group"},J6={class:"input-container"},Y6=["disabled"],X6={class:"input-group"},Z6={class:"input-container"},e5=["disabled"],t5=["disabled"],n5={key:1,class:"loading-container"},s5={__name:"ResetPasswordPage",setup(n){const e=bn(),t=y1(),s=$(""),r=$(""),i=$(!1),o=$(""),a=$(!1),l=$("");Lt(()=>{if(o.value=t.query.token||"",!o.value){alert("Invalid reset link. Please request a new password reset."),e.push("/forgot-password");return}const f=Iw(o.value);if(!f){alert("Reset link has expired or is invalid. Please request a new password reset."),e.push("/forgot-password");return}a.value=!0,l.value=f.email});const c=()=>{e.push("/login")},h=async f=>{if(f.preventDefault(),!s.value.trim()||!r.value.trim()){alert("Please enter new password and confirm it.");return}if(s.value!==r.value){alert("Passwords do not match.");return}if(s.value.length<6){alert("Password must be at least 6 characters long.");return}i.value=!0;try{const p=Iw(o.value);if(!p){alert("Reset link has expired. Please request a new password reset."),e.push("/forgot-password");return}const m=JSON.parse(localStorage.getItem("users")||"[]"),E=m.findIndex(A=>A.email===p.email);if(E===-1){alert("User not found."),i.value=!1;return}const v=await _d(s.value);m[E].password=v,localStorage.setItem("users",JSON.stringify(m)),k6(o.value),alert("Password has been reset successfully. Please login with your new password."),e.push("/login")}catch(p){console.error("Password reset error:",p),alert("An error occurred while resetting password. Please try again.")}finally{i.value=!1}};return(f,p)=>(M(),F("div",W6,[d("button",{class:"back-button",onClick:c},[...p[2]||(p[2]=[d("img",{src:z6,alt:"back-button",width:"20px"},null,-1)])]),p[6]||(p[6]=d("h1",{class:"reset-password-title"},"Reset Password",-1)),a.value?(M(),F("form",{key:0,onSubmit:h,class:"reset-password-form"},[d("p",K6,"Reset password for: "+_(l.value),1),d("div",q6,[d("div",J6,[p[3]||(p[3]=d("span",{class:"input-text-label"},"password",-1)),tn(d("input",{type:"password","onUpdate:modelValue":p[0]||(p[0]=m=>s.value=m),class:"input-field",placeholder:"Enter new password",required:"",disabled:i.value},null,8,Y6),[[Ns,s.value]])])]),d("div",X6,[d("div",Z6,[p[4]||(p[4]=d("span",{class:"input-text-label"},"password",-1)),tn(d("input",{type:"password","onUpdate:modelValue":p[1]||(p[1]=m=>r.value=m),class:"input-field",placeholder:"Confirm new password",required:"",disabled:i.value},null,8,e5),[[Ns,r.value]])])]),d("button",{type:"submit",class:"reset-button",disabled:i.value},_(i.value?"Resetting...":"Reset Password"),9,t5)],32)):(M(),F("div",n5,[...p[5]||(p[5]=[d("p",null,"Validating reset link...",-1)])]))]))}},r5=zt(s5,[["__scopeId","data-v-3509f8b7"]]),Ed="/tdl/assets/cat1-B_B8VE2s.png",bd="/tdl/assets/cat10-B8AgbljH.png",Id="/tdl/assets/cat11-0fJ86MBw.png",Cd="/tdl/assets/cat12-9jWhGICw.png",Td="/tdl/assets/cat13-CHa4qUOi.png",Sd="/tdl/assets/cat14-CLrryeLM.png",Pd="/tdl/assets/cat15-CCtjZj8M.png",Rd="/tdl/assets/cat16-CPcR6OS6.png",xd="/tdl/assets/cat17-EO7rjjtM.png",kd="/tdl/assets/cat18-BGDiOePY.png",Nd="/tdl/assets/cat19-DxCDtOnA.png",Dd="/tdl/assets/cat2-0Y4nM6HW.png",Od="/tdl/assets/cat20-Bz9cd08a.png",Ld="/tdl/assets/cat21-ECTsze2s.png",Bd="/tdl/assets/cat22-BvGXhyri.png",Md="/tdl/assets/cat23-DqU2B_M0.png",Fd="/tdl/assets/cat24-7cWYLYDN.png",Ud="/tdl/assets/cat25-Cy0mQl6B.png",Vd="/tdl/assets/cat26-Bk4tHCwE.png",$d="/tdl/assets/cat27-CvtmCEXM.png",Hd="/tdl/assets/cat28-B9s1wmgo.png",Gd="/tdl/assets/cat29-D_79HmBj.png",Qd="/tdl/assets/cat3-Dp7OJMB9.png",jd="/tdl/assets/cat30-Cx-HRp0m.png",zd="/tdl/assets/cat4-DHiuXgwB.png",Wd="/tdl/assets/cat5-BvXrfJAO.png",Kd="/tdl/assets/cat6-DZOiQoo1.png",qd="/tdl/assets/cat7-CeDKF7mR.png",Jd="/tdl/assets/cat8-mjRhb3fS.png",Yd="/tdl/assets/cat9-Bzb-Egme.png",Xd="/tdl/assets/catPoint-t6vwZH27.png",Zd="/tdl/assets/catPointPlus-CFF9Ua2B.png",ef="/tdl/assets/catProfile01-gY0Djz81.png",tf="/tdl/assets/catProfile02-Cesbpkj5.png",nf="/tdl/assets/cat_ico-Csdt_Q01.png",iT="/tdl/assets/tul1-CuZ0qR5D.png",oT="/tdl/assets/tul2-Cj7OkHg6.png",aT="/tdl/assets/tul3-CaPMxBJ-.png",lT="/tdl/assets/tul5-CQc-0WLd.png",cT="/tdl/assets/tul6-COB-AGqQ.png",i5="/tdl/assets/energyIcon-BrO4HZx-.png",Ag="/tdl/assets/pointIcon-Cel8s0wp.png",Th="/tdl/assets/coinIcon-NUhL-dlJ.png",uT="/tdl/assets/catPoint-t6vwZH27.png",o5="/tdl/assets/shopIcon-Cs4Crcae.png",a5="/tdl/assets/setting-CxNpDL9x.png",l5="/tdl/assets/notice-Bkd9hh4q.png",c5=4e3,hT=(n,e={value:c5})=>{const t=new Date().toDateString(),s=localStorage.getItem("energyLastDate"),r=localStorage.getItem("currentEnergy");if(s!==t)n.value=e.value,localStorage.setItem("energyLastDate",t),localStorage.setItem("currentEnergy",e.value.toString());else if(r){const i=parseInt(r)||0;n.value=Math.max(0,Math.min(i,e.value))}else n.value=e.value,localStorage.setItem("energyLastDate",t),localStorage.setItem("currentEnergy",e.value.toString())},u5={class:"headerCont"},h5={class:"headerBar"},d5={class:"resourceValue"},f5={class:"resourceValue"},p5={class:"resourceValue"},g5={class:"resourceValue"},m5={key:0,class:"rightIconButtons"},y5={__name:"Header",props:{hideRightIcons:{type:Boolean,default:!1}},setup(n){const e=$(localStorage.getItem("appLanguage")||"English");he(()=>Es());const t=bn(),s=un(),r=he(()=>s.state.coins),i=he(()=>s.state.totalCoin),o=he(()=>s.state.catFragments),a=$(4e3),l=$(4e3),c=()=>{const A=localStorage.getItem("currentEnergy");A&&(a.value=parseInt(A,10)),hT(a,l)};$(!1);const h=()=>{t.push("/settings")},f=()=>{t.push("/notification")},p=()=>{t.push("/shop")},m=()=>{t.push("/nft")};let E=null;Lt(()=>{s.loadCurrentUser(),c(),E=setInterval(()=>{const w=localStorage.getItem("appLanguage")||"English";w!==e.value&&(e.value=w),c()},500);const A=()=>{s.loadCurrentUser(),c()};window.addEventListener("userDataUpdated",A),cn(()=>{window.removeEventListener("userDataUpdated",A),E&&clearInterval(E)})});const v=s.formatNumber;return(A,w)=>(M(),F("header",null,[d("div",u5,[d("div",h5,[d("button",{class:"resourceItem energyItem",onClick:p},[w[0]||(w[0]=d("img",{src:i5,alt:"",class:"resourceIcon"},null,-1)),d("span",d5,_(Le(v)(a.value)),1)]),d("button",{class:"resourceItem",onClick:p},[w[1]||(w[1]=d("img",{src:Ag,alt:"",class:"resourceIcon"},null,-1)),d("span",f5,_(Le(v)(r.value)),1)]),d("button",{class:"resourceItem",onClick:p},[w[2]||(w[2]=d("img",{src:Th,alt:"",class:"resourceIcon"},null,-1)),d("span",p5,_(Le(v)(i.value)),1)]),d("button",{class:"resourceItem",onClick:p},[w[3]||(w[3]=d("img",{src:uT,alt:"",class:"resourceIcon"},null,-1)),d("span",g5,_(o.value),1)])]),n.hideRightIcons?ue("",!0):(M(),F("div",m5,[d("button",{class:"iconButton nftButton",onClick:m,title:"NFT"},[...w[4]||(w[4]=[d("img",{src:o5,alt:"NFT",class:"icon-img"},null,-1)])]),d("button",{class:"iconButton settingsButton",onClick:h,title:""},[...w[5]||(w[5]=[d("div",{class:"iconCircle settingsIconCircle"},[d("img",{src:a5,alt:"",class:"icon-img"})],-1)])]),d("button",{class:"iconButton notificationButton",onClick:f,title:""},[...w[6]||(w[6]=[d("div",{class:"iconCircle notificationIconCircle"},[d("img",{src:l5,alt:"",class:"icon-img"})],-1)])])]))])]))}},Yn=zt(y5,[["__scopeId","data-v-d75eaa23"]]),Cw="/tdl/assets/tabIcon1-BMQwD5kb.png",Tw="/tdl/assets/tabIcon2-Ba9ZXsKV.png",Sw="/tdl/assets/tabIcon3-C85F2_hQ.png",Pw="/tdl/assets/tabIcon4-Dfn0WYn7.png",Rw="/tdl/assets/optionButton-k0xsRNG2.png",v5={class:"footerCont"},A5={class:"footerBar"},w5=["onClick"],_5={class:"tabContent"},E5=["src","alt"],b5={key:1,class:"tabEmoji"},I5={__name:"Footer",setup(n){const e=bn(),t=$("home"),s=$(localStorage.getItem("appLanguage")||"English"),r=he(()=>Es()),i=h=>{h.key==="appLanguage"&&(s.value=h.newValue||"English")},o=()=>{switch(e.currentRoute.value.path){case"/main":t.value="game";break;case"/home":t.value="home";break;case"/exchange":t.value="exchange";break;case"/inventory":t.value="inventory";break;case"/factory":t.value="factory";break;case"/settings":t.value="settings";break;default:t.value="home"}};let a=null;Lt(()=>{o(),window.addEventListener("storage",i),a=setInterval(()=>{const h=localStorage.getItem("appLanguage")||"English";h!==s.value&&(s.value=h)},100)}),cn(()=>{window.removeEventListener("storage",i),a&&clearInterval(a)}),Qr(()=>e.currentRoute.value.path,()=>{o()}),Qr(s,()=>{});const l=he(()=>[{id:"game",img:Cw,imgActive:Cw,label:r.value.game},{id:"inventory",img:Tw,imgActive:Tw,label:r.value.inventory},{id:"home",img:Sw,imgActive:Sw,label:r.value.home},{id:"exchange",img:Pw,imgActive:Pw,label:r.value.exchange},{id:"settings",img:Rw,imgActive:Rw,label:r.value.settings||"Settings"}]),c=h=>{switch(t.value=h,h){case"home":e.push("/home");break;case"game":e.push("/main");break;case"inventory":e.push("/inventory");break;case"exchange":e.push("/exchange");break;case"settings":e.push("/settings");break;case"factory":e.push("/factory");break}};return(h,f)=>(M(),F("footer",null,[d("div",v5,[d("div",A5,[(M(!0),F(ke,null,Xe(l.value,p=>(M(),F("div",{key:p.id,class:Ne(["tabItem",{active:t.value===p.id}]),onClick:m=>c(p.id)},[d("div",_5,[p.img?(M(),F("img",{key:0,src:t.value===p.id?p.imgActive:p.img,alt:p.label,class:"tabIcon"},null,8,E5)):ue("",!0),p.emoji?(M(),F("span",b5,_(p.emoji),1)):ue("",!0)])],10,w5))),128))])])]))}},Xn=zt(I5,[["__scopeId","data-v-ef77f498"]]);function Ur(n){return(n+1)*100}function C5(n){if(!n)return!1;const e=n.exp||0,t=n.maxExp||Ur(n.level||1);return e>=t}function lp(n){return n*50}function T5(n){if(!n||!n.rarity)return 5;const e={common:1,rare:1.1,epic:1.2,legendary:1.3},t=5,s=e[n.rarity]||1;return Math.floor(t*s)}function Sh(n){return n&&{...n,exp:n.exp!==void 0?n.exp:0,maxExp:n.maxExp!==void 0?n.maxExp:Ur(n.level||1)}}const S5="/tdl/assets/mainTab1-2-yTW8RB.png",P5="/tdl/assets/mainTab1_off-CYH0tU-A.png",R5="/tdl/assets/mainTab2-DYAFv8pb.png",x5="/tdl/assets/mainTab2_off-Cd7YzEgp.png",k5="/tdl/assets/mainTab3-SUKPiFtY.png",N5="/tdl/assets/mainTab3_off-BBdSbCVr.png",D5="/tdl/assets/mainTab4-wBIEQHF7.png",O5="/tdl/assets/mainTab4_off-BKjmP7bC.png",vu="/tdl/assets/plusMini-HInupkEh.png",L5="/tdl/assets/energyMini-BWyfGT5k.png",B5={class:"mainScreen"},M5={class:"mainContent"},F5={class:"modeTabs"},U5=["src"],V5={class:"modeTabLevel"},$5=["src"],H5={class:"modeTabLevel"},G5=["src"],Q5={class:"modeTabLevel"},j5=["src"],z5={class:"modeTabLevel"},W5={class:"clickerArea"},K5={class:"totalPointsDisplay"},q5={class:"pointAnimations"},J5={class:"clickerAndEnergyContainer"},Y5={class:"energySection"},X5=["src"],Z5={class:"energyBar"},e8={class:"energyText"},t8={class:"clickerButtonContainer"},n8={key:1,class:"completeMessageContainer"},s8={class:"completeMessageText"},r8={class:"rewardInfo"},i8={class:"rewardItem"},o8={key:0,class:"rewardItem"},a8={key:1,class:"completeMessageContainer"},l8={class:"completeMessageText"},c8={class:"rewardInfo"},u8={class:"rewardItem"},h8={key:0,class:"rewardItem"},d8={key:1,class:"completeMessageContainer"},f8={class:"completeMessageText"},p8={class:"rewardInfo"},g8={class:"rewardItem"},m8={key:0,class:"rewardItem"},y8={key:1,class:"completeMessageContainer"},v8={class:"completeMessageText"},A8={class:"rewardInfo"},w8={class:"rewardItem"},_8={key:0,class:"rewardItem"},E8={class:"catsSection"},b8={class:"catsListScroll"},I8=["onClick"],C8={key:0,class:"catImage"},T8=["src"],S8={key:1,class:"emptySlotContent"},P8=["src"],R8=["onClick"],x8={key:0,class:"catImage"},k8=["src"],N8={key:1,class:"emptySlotContent"},D8=["src"],O8=["onClick"],L8={key:0,class:"catImage"},B8=["src"],M8={key:1,class:"emptySlotContent"},F8=["src"],U8=["onClick"],V8={key:0,class:"catImage"},$8=["src"],H8={key:1,class:"emptySlotContent"},G8=["src"],Q8={class:"speechBubbles"},j8={class:"catEmojis"},z8=["src","onError"],W8={class:"catSelectPopupHeader"},K8={class:"catSelectPopupBody"},q8={key:0,class:"removeCatSection"},J8={class:"availableCatsGrid"},Y8=["onClick"],X8={class:"availableCatImage"},Z8=["src"],e9={class:"availableCatInfo"},t9={class:"availableCatName"},n9={class:"availableCatLevel"},s9={class:"availableCatStars"},r9={__name:"MainScreen",setup(n){const e=un(),t=he(()=>Es()),s=bn(),r=$(null),i=$("mining"),o=he(()=>e.state.coins),a=he(()=>e.state.coins),l=he(()=>e.state.totalCoin),c=he(()=>e.state.catFragments),h=he(()=>i.value==="mining"?w.value:i.value==="hunting"?k.value:i.value==="exploration"?x.value:i.value==="production"?de.value:0),f=async J=>{try{await e.updateCoins(J)||console.error("  ")}catch(se){console.error("    :",se)}},p=async J=>{try{await e.updateCatFragments(J)||console.error("   ")}catch(se){console.error("     :",se)}},m=$([]),E=$([]),v=$([]),A=$(null),w=$(0),P=$(0),T=$(1),L=$(!1),Q=$(!0),q=$({points:0,fragments:0}),x=$(0),I=$(0),C=$(1),S=$(!1),b=$(!0),N=$({points:0,fragments:0}),k=$(0),Ee=$(0),ne=$(1),V=$(!1),O=$(!0),K=$({points:0,fragments:0}),de=$(0),Ue=$(0),Te=$(1),Ve=$(!1),ze=$(!0),ft=$({points:0,fragments:0}),pt=J=>Math.pow(2,J-1),yt=(J,se)=>!J||!Array.isArray(J)?0:J.reduce((X,me)=>me&&me[se]?X+(me[se]||0):X,0),Z=()=>yt($e.value,"miningEfficiency"),pe=()=>yt(kt.value,"huntingDamage"),ce=()=>yt(sn.value,"explorationReward"),ve=()=>yt(Ft.value,"productionSpeed"),Qe=async(J,se)=>{if(!J||J.length===0)return;const X=_t();if(!X)return;const me=X.gameData?.inventory||[],Se=J.filter(We=>We!==null).map(We=>We.id);if(Se.length===0)return;const Je=me.map(We=>{if(Se.includes(We.id)){const Ce=Sh(We),ht=(Ce.exp||0)+se,On=Ce.level||1,Vt=Ur(On);return{...Ce,exp:ht,maxExp:Vt}}return Sh(We)});try{await e.updateGameData({inventory:Je})}catch(We){console.error("NFT   :",We)}},D=J=>{i.value=J},B=()=>{s.currentRoute.value.path==="/main"&&i.value==="main"&&(i.value="mining")};Lt(()=>{if(e.loadCurrentUser(),r.value=_t(),r.value){T.value=r.value.gameData?.miningLevel||1,P.value=r.value.gameData?.miningTotalClicks||0,ne.value=r.value.gameData?.huntingLevel||1,Ee.value=r.value.gameData?.huntingTotalClicks||0,C.value=r.value.gameData?.explorationLevel||1,I.value=r.value.gameData?.explorationTotalClicks||0,Te.value=r.value.gameData?.productionLevel||1,Ue.value=r.value.gameData?.productionTotalClicks||0,ae.value=r.value.gameData?.planetLevel||1,ee.value=r.value.gameData?.planetEnergy||0;const se=X=>{const me=(X||[]).slice(0,4);return me.length===4?me:[...me,...Array(4-me.length).fill(null)]};r.value.gameData?.miningCats!==void 0&&($e.value=se(r.value.gameData.miningCats)),r.value.gameData?.huntingCats!==void 0&&(kt.value=se(r.value.gameData.huntingCats)),r.value.gameData?.explorationCats!==void 0&&(sn.value=se(r.value.gameData.explorationCats)),r.value.gameData?.productionCats!==void 0&&(Ft.value=se(r.value.gameData.productionCats))}hT(z,U),Qr(()=>s.currentRoute.value.path,()=>{B()});try{A.value=new Audio,A.value.src=new URL("/tdl/assets/clickbgm-BvbCQtA-.mp3",import.meta.url).href,A.value.volume=.3}catch{}const J=()=>{!G()&&A.value&&(A.value.pause(),A.value.currentTime=0)};window.addEventListener("soundSettingChanged",J),Wt("mining"),Wt("hunting"),Wt("exploration"),Wt("production"),cn(()=>{rf(),window.removeEventListener("soundSettingChanged",J)})});const G=()=>{const J=localStorage.getItem("soundEnabled");return J!==null?J==="true":!0},te=async J=>{if(A.value&&G()&&(A.value.currentTime=0,A.value.play().catch(()=>{})),z.value<j.value){alert(" !");return}if(ge()){if(J==="mining"){if(w.value++,P.value++,P.value>=T.value*1e3){T.value++;const se={id:Date.now(),text:`${t.value.mining} ${t.value.levelUp} Lv.${T.value}`,x:Math.random()*(Math.min(window.innerWidth||500,500)-220-40)+20,y:Math.random()*(window.innerHeight||500)+100};if(m.value.push(se),setTimeout(()=>{const X=m.value.findIndex(me=>me.id===se.id);X>-1&&m.value.splice(X,1)},3e3),r.value)try{await e.updateGameData({miningLevel:T.value,miningTotalClicks:P.value})}catch(X){console.error("   :",X)}}if(w.value>=10){const X=pt(T.value),me=Z()/100,Se=Math.floor(100*X*(1+me)),Je=o.value+Se;await f(Je),w.value=0,L.value=!0,Q.value=!1,await Pe();const We=Math.random();let Ce=0;We<.3?Ce=1:We<.4&&(Ce=2),q.value={points:Se,fragments:Ce};const ht={id:Date.now(),points:Se,x:50,y:20};if(v.value.push(ht),setTimeout(()=>{const xe=v.value.findIndex(gt=>gt.id===ht.id);xe>-1&&v.value.splice(xe,1)},2e3),Ce>0){const xe=c.value+Ce;c.value=xe,await p(xe);for(let gt=0;gt<Ce;gt++){const Hn=Math.floor(Math.random()*6)+1,Gn=Math.min(window.innerWidth||500,500),ps=window.innerHeight||800,Kt=60,Ct=30,Tn={id:Date.now()+gt,x:Math.random()*(Gn-Kt-Ct*2)+Ct,y:Math.random()*(ps-Kt-Ct*2-200)+100,imageId:Hn};E.value.push(Tn),setTimeout(()=>{const Sn=E.value.findIndex(bs=>bs.id===Tn.id);Sn>-1&&E.value.splice(Sn,1)},2e3)}}if(r.value)try{await e.updateGameData({miningTotalClicks:P.value,miningLevel:T.value})}catch(xe){console.error("   :",xe)}const On=Math.min(window.innerWidth||500,500),Vt=window.innerHeight||800,ds=220,fs=Ce>0?80:60,Ht=20,Cn=Math.round(Z());let fn=`${t.value.miningComplete}
${Se.toLocaleString()} ${t.value.pointsEarned}`;Cn>0&&(fn+=`
(NFT Bonus: +${Cn}%)`),Ce>0&&(fn+=`
${t.value.fragmentsEarned} ${Ce} ${t.value.fragmentsEarnedCount}`);const It={id:Date.now(),text:fn,x:Math.random()*(On-ds-Ht*2)+Ht,y:Math.random()*(Vt-fs-Ht*2-200)+100};m.value.push(It),setTimeout(()=>{const xe=m.value.findIndex(gt=>gt.id===It.id);xe>-1&&m.value.splice(xe,1)},3e3),setTimeout(()=>{L.value=!1,Q.value=!0,q.value={points:0,fragments:0}},1500)}else{const se=Math.min(window.innerWidth||500,500),X=window.innerHeight||800,me=220,Se=60,Je=20,We={id:Date.now(),text:`${t.value.miningProgress}: ${w.value}/10`,x:Math.random()*(se-me-Je*2)+Je,y:Math.random()*(X-Se-Je*2-200)+100};m.value.push(We),setTimeout(()=>{const Ce=m.value.findIndex(ht=>ht.id===We.id);Ce>-1&&m.value.splice(Ce,1)},2e3)}}else if(J==="exploration"){if(x.value++,I.value++,I.value>=C.value*1e3){C.value++;const se={id:Date.now(),text:`${t.value.exploration} ${t.value.levelUp} Lv.${C.value}`,x:Math.random()*(Math.min(window.innerWidth||500,500)-220-40)+20,y:Math.random()*(window.innerHeight||500)+100};if(m.value.push(se),setTimeout(()=>{const X=m.value.findIndex(me=>me.id===se.id);X>-1&&m.value.splice(X,1)},3e3),r.value)try{await e.updateGameData({explorationLevel:C.value,explorationTotalClicks:I.value})}catch(X){console.error("   :",X)}}if(x.value>=10){const X=pt(C.value),me=ce()/100,Se=Math.floor(100*X*(1+me)),Je=o.value+Se;await f(Je),x.value=0,S.value=!0,b.value=!1,await Pe();const We=Math.random();let Ce=0;We<.3?Ce=1:We<.4&&(Ce=2),N.value={points:Se,fragments:Ce};const ht={id:Date.now(),points:Se,x:50,y:20};if(v.value.push(ht),setTimeout(()=>{const xe=v.value.findIndex(gt=>gt.id===ht.id);xe>-1&&v.value.splice(xe,1)},2e3),await Qe(sn.value,10),Ce>0){const xe=c.value+Ce;c.value=xe,await p(xe);for(let gt=0;gt<Ce;gt++){const Hn=Math.floor(Math.random()*6)+1,Gn=Math.min(window.innerWidth||500,500),ps=window.innerHeight||800,Kt=60,Ct=30,Tn={id:Date.now()+gt,x:Math.random()*(Gn-Kt-Ct*2)+Ct,y:Math.random()*(ps-Kt-Ct*2-200)+100,imageId:Hn};E.value.push(Tn),setTimeout(()=>{const Sn=E.value.findIndex(bs=>bs.id===Tn.id);Sn>-1&&E.value.splice(Sn,1)},2e3)}}if(r.value)try{await e.updateGameData({explorationTotalClicks:I.value,explorationLevel:C.value})}catch(xe){console.error("   :",xe)}const On=Math.min(window.innerWidth||500,500),Vt=window.innerHeight||800,ds=220,fs=Ce>0?80:60,Ht=20,Cn=Math.round(ce());let fn=`${t.value.explorationComplete}
${Se.toLocaleString()} ${t.value.pointsEarned}`;Cn>0&&(fn+=`
(NFT Bonus: +${Cn}%)`),Ce>0&&(fn+=`
${t.value.fragmentsEarned} ${Ce} ${t.value.fragmentsEarnedCount}`);const It={id:Date.now(),text:fn,x:Math.random()*(On-ds-Ht*2)+Ht,y:Math.random()*(Vt-fs-Ht*2-200)+100};m.value.push(It),setTimeout(()=>{const xe=m.value.findIndex(gt=>gt.id===It.id);xe>-1&&m.value.splice(xe,1)},3e3),setTimeout(()=>{S.value=!1,b.value=!0,N.value={points:0,fragments:0}},1500)}else{const se=Math.min(window.innerWidth||500,500),X=window.innerHeight||800,me=220,Se=60,Je=20,We={id:Date.now(),text:`${t.value.explorationProgress}: ${x.value}/10`,x:Math.random()*(se-me-Je*2)+Je,y:Math.random()*(X-Se-Je*2-200)+100};m.value.push(We),setTimeout(()=>{const Ce=m.value.findIndex(ht=>ht.id===We.id);Ce>-1&&m.value.splice(Ce,1)},2e3)}}else if(J==="hunting"){if(k.value++,Ee.value++,Ee.value>=ne.value*1e3){ne.value++;const se={id:Date.now(),text:`${t.value.hunting} ${t.value.levelUp} Lv.${ne.value}`,x:Math.random()*(Math.min(window.innerWidth||500,500)-220-40)+20,y:Math.random()*(window.innerHeight||500)+100};if(m.value.push(se),setTimeout(()=>{const X=m.value.findIndex(me=>me.id===se.id);X>-1&&m.value.splice(X,1)},3e3),r.value)try{await e.updateGameData({huntingLevel:ne.value,huntingTotalClicks:Ee.value})}catch(X){console.error("   :",X)}}if(k.value>=10){const X=pt(ne.value),me=pe()/100,Se=Math.floor(100*X*(1+me)),Je=o.value+Se;await f(Je),k.value=0,V.value=!0,O.value=!1,await Pe();const We=Math.random();let Ce=0;We<.3?Ce=1:We<.4&&(Ce=2),K.value={points:Se,fragments:Ce};const ht={id:Date.now(),points:Se,x:50,y:20};if(v.value.push(ht),setTimeout(()=>{const It=v.value.findIndex(xe=>xe.id===ht.id);It>-1&&v.value.splice(It,1)},2e3),await Qe(kt.value,10),Ce>0){const It=c.value+Ce;c.value=It,await p(It);for(let xe=0;xe<Ce;xe++){const gt=Math.floor(Math.random()*6)+1,Hn=Math.min(window.innerWidth||500,500),Gn=window.innerHeight||800,ps=60,Kt=30,Ct={id:Date.now()+xe,x:Math.random()*(Hn-ps-Kt*2)+Kt,y:Math.random()*(Gn-ps-Kt*2-200)+100,imageId:gt};E.value.push(Ct),setTimeout(()=>{const Tn=E.value.findIndex(Sn=>Sn.id===Ct.id);Tn>-1&&E.value.splice(Tn,1)},2e3)}}if(r.value)try{await e.updateGameData({huntingTotalClicks:Ee.value,huntingLevel:ne.value})}catch(It){console.error("   :",It)}const On=Math.min(window.innerWidth||500,500),Vt=window.innerHeight||800,ds=220,fs=Ce>0?80:60,Ht=20;let Cn=`${t.value.huntingComplete}
${Se.toLocaleString()} ${t.value.pointsEarned}`;Ce>0&&(Cn+=`
${t.value.fragmentsEarned} ${Ce} ${t.value.fragmentsEarnedCount}`);const fn={id:Date.now(),text:Cn,x:Math.random()*(On-ds-Ht*2)+Ht,y:Math.random()*(Vt-fs-Ht*2-200)+100};m.value.push(fn),setTimeout(()=>{const It=m.value.findIndex(xe=>xe.id===fn.id);It>-1&&m.value.splice(It,1)},3e3),setTimeout(()=>{V.value=!1,O.value=!0,K.value={points:0,fragments:0}},1500)}else{const se=Math.min(window.innerWidth||500,500),X=window.innerHeight||800,me=220,Se=60,Je=20,We={id:Date.now(),text:`${t.value.huntingProgress}: ${k.value}/10`,x:Math.random()*(se-me-Je*2)+Je,y:Math.random()*(X-Se-Je*2-200)+100};m.value.push(We),setTimeout(()=>{const Ce=m.value.findIndex(ht=>ht.id===We.id);Ce>-1&&m.value.splice(Ce,1)},2e3)}}else if(J==="production"){if(de.value++,Ue.value++,Ue.value>=Te.value*1e3){Te.value++;const se={id:Date.now(),text:`${t.value.production} ${t.value.levelUp} Lv.${Te.value}`,x:Math.random()*(Math.min(window.innerWidth||500,500)-220-40)+20,y:Math.random()*(window.innerHeight||500)+100};if(m.value.push(se),setTimeout(()=>{const X=m.value.findIndex(me=>me.id===se.id);X>-1&&m.value.splice(X,1)},3e3),r.value)try{await e.updateGameData({productionLevel:Te.value,productionTotalClicks:Ue.value})}catch(X){console.error("   :",X)}}if(de.value>=10){const X=pt(Te.value),me=ve()/100,Se=Math.floor(100*X*(1+me)),Je=o.value+Se;await f(Je),de.value=0,Ve.value=!0,ze.value=!1,await Pe();const We=Math.random();let Ce=0;We<.3?Ce=1:We<.4&&(Ce=2),ft.value={points:Se,fragments:Ce};const ht={id:Date.now(),points:Se,x:50,y:20};if(v.value.push(ht),setTimeout(()=>{const xe=v.value.findIndex(gt=>gt.id===ht.id);xe>-1&&v.value.splice(xe,1)},2e3),await Qe(Ft.value,10),Ce>0){const xe=c.value+Ce;c.value=xe,await p(xe);for(let gt=0;gt<Ce;gt++){const Hn=Math.floor(Math.random()*6)+1,Gn=Math.min(window.innerWidth||500,500),ps=window.innerHeight||800,Kt=60,Ct=30,Tn={id:Date.now()+gt,x:Math.random()*(Gn-Kt-Ct*2)+Ct,y:Math.random()*(ps-Kt-Ct*2-200)+100,imageId:Hn};E.value.push(Tn),setTimeout(()=>{const Sn=E.value.findIndex(bs=>bs.id===Tn.id);Sn>-1&&E.value.splice(Sn,1)},2e3)}}if(r.value)try{await e.updateGameData({productionTotalClicks:Ue.value,productionLevel:Te.value})}catch(xe){console.error("   :",xe)}const On=Math.min(window.innerWidth||500,500),Vt=window.innerHeight||800,ds=220,fs=Ce>0?80:60,Ht=20,Cn=Math.round(ve());let fn=`${t.value.productionComplete}
${Se.toLocaleString()} ${t.value.pointsEarned}`;Cn>0&&(fn+=`
(NFT Bonus: +${Cn}%)`),Ce>0&&(fn+=`
${t.value.fragmentsEarned} ${Ce} ${t.value.fragmentsEarnedCount}`);const It={id:Date.now(),text:fn,x:Math.random()*(On-ds-Ht*2)+Ht,y:Math.random()*(Vt-fs-Ht*2-200)+100};m.value.push(It),setTimeout(()=>{const xe=m.value.findIndex(gt=>gt.id===It.id);xe>-1&&m.value.splice(xe,1)},3e3),setTimeout(()=>{Ve.value=!1,ze.value=!0,ft.value={points:0,fragments:0}},1500)}else{const se=Math.min(window.innerWidth||500,500),X=window.innerHeight||800,me=220,Se=60,Je=20,We={id:Date.now(),text:`${t.value.productionProgress}: ${de.value}/10`,x:Math.random()*(se-me-Je*2)+Je,y:Math.random()*(X-Se-Je*2-200)+100};m.value.push(We),setTimeout(()=>{const Ce=m.value.findIndex(ht=>ht.id===We.id);Ce>-1&&m.value.splice(Ce,1)},2e3)}}}};$(0),$(!1),$({stone:0,iron:0,gold:0,diamond:0});const z=$(4e3),U=$(4e3),j=$(1),ee=$(0),oe=$(2e3),ae=$(1),Pe=async()=>{if(ee.value=Math.min(oe.value,ee.value+50),ee.value>=oe.value){if(i.value==="mining"?T.value++:i.value==="hunting"?ne.value++:i.value==="exploration"?C.value++:i.value==="production"&&Te.value++,ee.value=0,r.value)try{const J={planetEnergy:ee.value,miningLevel:T.value,huntingLevel:ne.value,explorationLevel:C.value,productionLevel:Te.value};await e.updateGameData(J)}catch(J){console.error("   :",J)}}else if(r.value)try{await e.updateGameData({planetEnergy:ee.value})}catch(J){console.error("   :",J)}},ge=(J=j.value)=>z.value>=J?(z.value=Math.max(0,z.value-J),localStorage.setItem("currentEnergy",z.value.toString()),localStorage.setItem("energyLastDate",new Date().toDateString()),!0):!1,_e=J=>{try{return new URL(Object.assign({"../assets/img/cat1.png":Ed,"../assets/img/cat10.png":bd,"../assets/img/cat11.png":Id,"../assets/img/cat12.png":Cd,"../assets/img/cat13.png":Td,"../assets/img/cat14.png":Sd,"../assets/img/cat15.png":Pd,"../assets/img/cat16.png":Rd,"../assets/img/cat17.png":xd,"../assets/img/cat18.png":kd,"../assets/img/cat19.png":Nd,"../assets/img/cat2.png":Dd,"../assets/img/cat20.png":Od,"../assets/img/cat21.png":Ld,"../assets/img/cat22.png":Bd,"../assets/img/cat23.png":Md,"../assets/img/cat24.png":Fd,"../assets/img/cat25.png":Ud,"../assets/img/cat26.png":Vd,"../assets/img/cat27.png":$d,"../assets/img/cat28.png":Hd,"../assets/img/cat29.png":Gd,"../assets/img/cat3.png":Qd,"../assets/img/cat30.png":jd,"../assets/img/cat4.png":zd,"../assets/img/cat5.png":Wd,"../assets/img/cat6.png":Kd,"../assets/img/cat7.png":qd,"../assets/img/cat8.png":Jd,"../assets/img/cat9.png":Yd,"../assets/img/catPoint.png":Xd,"../assets/img/catPointPlus.png":Zd,"../assets/img/catProfile01.png":ef,"../assets/img/catProfile02.png":tf,"../assets/img/cat_ico.png":nf})[`../assets/img/cat${J}.png`],import.meta.url).href}catch{return`/src/assets/img/cat${J}.png`}},De=J=>{try{return new URL(Object.assign({"../assets/img/tul1.png":iT,"../assets/img/tul2.png":oT,"../assets/img/tul3.png":aT,"../assets/img/tul5.png":lT,"../assets/img/tul6.png":cT})[`../assets/img/tul${J}.png`],import.meta.url).href}catch{return`/src/assets/img/tul${J}.png`}},nt=J=>{const se=E.value.findIndex(X=>X.id===J);se>-1&&E.value.splice(se,1)},$e=$([null,null,null,null]),st=$(!1),it=$(-1),hn=$([]),Zn=()=>{const J=new Set;return $e.value.forEach(se=>{se&&se.id&&J.add(se.id)}),kt.value.forEach(se=>{se&&se.id&&J.add(se.id)}),sn.value.forEach(se=>{se&&se.id&&J.add(se.id)}),Ft.value.forEach(se=>{se&&se.id&&J.add(se.id)}),J},es=()=>{const J=_t();if(J){const se=J.gameData?.inventory||[],X=Zn(),me=hs();me&&me.id&&X.delete(me.id),hn.value=se.filter(Se=>!X.has(Se.id))}else hn.value=[]},hs=()=>{const J=In.value,se=it.value;if(se<0||se>=4)return null;let X=null;return J==="mining"?X=$e.value:J==="hunting"?X=kt.value:J==="exploration"?X=sn.value:J==="production"&&(X=Ft.value),X&&X[se]?X[se]:null},Gs=(J,se,X)=>{In.value=se,es(),it.value=J,st.value=!0},yn=async J=>{if(it.value>=0&&it.value<4){const se={id:J.id,level:J.level||1,stars:J.stars||1,imageId:J.imageId||J.id,name:J.name,miningEfficiency:J.miningEfficiency||0,huntingDamage:J.huntingDamage||0,explorationReward:J.explorationReward||0,productionSpeed:J.productionSpeed||0,rarity:J.rarity||null};let X=[];In.value==="mining"?X=$e.value:In.value==="hunting"?X=kt.value:In.value==="exploration"?X=sn.value:In.value==="production"&&(X=Ft.value);const me=X.findIndex((Je,We)=>Je&&Je.id===J.id&&We!==it.value);if(me!==-1){X[me]=null;const Je=In.value,We=`${Je}_${me}_${J.id}`;$n.value[Je][We]&&delete $n.value[Je][We]}if(In.value==="mining"?($e.value[it.value]=se,Wt("mining")):In.value==="hunting"?(kt.value[it.value]=se,Wt("hunting")):In.value==="exploration"?(sn.value[it.value]=se,Wt("exploration")):In.value==="production"&&(Ft.value[it.value]=se,Wt("production")),_t())try{await e.updateGameData({miningCats:$e.value,huntingCats:kt.value,explorationCats:sn.value,productionCats:Ft.value})}catch(Je){console.error("   :",Je)}}st.value=!1,it.value=-1,In.value="mining"},dn=async()=>{if(it.value>=0&&it.value<4){const J=In.value;let se=[];J==="mining"?se=$e.value:J==="hunting"?se=kt.value:J==="exploration"?se=sn.value:J==="production"&&(se=Ft.value);const X=se[it.value];if(J==="mining"?($e.value[it.value]=null,Wt("mining")):J==="hunting"?(kt.value[it.value]=null,Wt("hunting")):J==="exploration"?(sn.value[it.value]=null,Wt("exploration")):J==="production"&&(Ft.value[it.value]=null,Wt("production")),X&&X.id){const Se=`${J}_${it.value}_${X.id}`;$n.value[J][Se]&&delete $n.value[J][Se]}if(_t())try{await e.updateGameData({miningCats:$e.value,huntingCats:kt.value,explorationCats:sn.value,productionCats:Ft.value})}catch(Se){console.error("   :",Se)}}st.value=!1,it.value=-1,In.value="mining"},oi=()=>{st.value=!1,it.value=-1,In.value="mining"},kt=$([null,null,null,null]),sn=$([null,null,null,null]),Ft=$([null,null,null,null]),In=$("mining"),Ut=$({mining:null,hunting:null,exploration:null,production:null}),$n=$({mining:{},hunting:{},exploration:{},production:{}}),Wt=J=>{Ut.value[J]&&(clearInterval(Ut.value[J]),Ut.value[J]=null);let se=[];J==="mining"?se=$e.value:J==="hunting"?se=kt.value:J==="exploration"?se=sn.value:J==="production"&&(se=Ft.value);const X=se.filter(me=>me!==null);X.length!==0&&(X.forEach((me,Se)=>{const Je=`${J}_${Se}_${me.id}`;$n.value[J][Je]||($n.value[J][Je]=0)}),Ut.value[J]=setInterval(async()=>{let me=[];J==="mining"?me=$e.value:J==="hunting"?me=kt.value:J==="exploration"?me=sn.value:J==="production"&&(me=Ft.value);const Se=me.filter(ht=>ht!==null);if(Se.length===0){ai(J);return}const We={mining:t.value.mining,hunting:t.value.hunting,exploration:t.value.exploration,production:t.value.production}[J]||"";let Ce=[];J==="mining"?Ce=$e.value:J==="hunting"?Ce=kt.value:J==="exploration"?Ce=sn.value:J==="production"&&(Ce=Ft.value);for(const ht of Se){const On=Ce.findIndex(xe=>xe&&xe.id===ht.id);if(On===-1)continue;const Vt=`${J}_${On}_${ht.id}`;$n.value[J][Vt]||($n.value[J][Vt]=0),$n.value[J][Vt]+=1;const ds=$n.value[J][Vt],fs=Math.min(window.innerWidth||500,500),Ht=window.innerHeight||800,Cn=220,fn=60,It=20;if(ds>=10){let xe=1;J==="mining"?xe=T.value:J==="hunting"?xe=ne.value:J==="exploration"?xe=C.value:J==="production"&&(xe=Te.value);const gt=100,Hn=pt(xe);let Gn=0;J==="mining"?Gn=Z()/100:J==="hunting"?Gn=pe()/100:J==="exploration"?Gn=ce()/100:J==="production"&&(Gn=ve()/100);const ps=Math.floor(gt*Hn*(1+Gn)),Kt=o.value+ps;o.value=Kt,a.value=Kt,await f(Kt),$n.value[J][Vt]=0;let Ct=[];J==="mining"?Ct=$e.value:J==="hunting"?Ct=kt.value:J==="exploration"?Ct=sn.value:J==="production"&&(Ct=Ft.value),await Qe(Ct,10),await consumePlanetEnergy();const Tn=Math.random();let Sn=0;if(Tn<.3?Sn=1:Tn<.4&&(Sn=2),Sn>0){const bs=c.value+Sn;if(await p(bs),i.value===J)for(let Cr=0;Cr<Sn;Cr++){const Ko=Math.floor(Math.random()*6)+1,qo=60,Xi=30,sl={id:Date.now()+Cr+On*1e3,x:Math.random()*(fs-qo-Xi*2)+Xi,y:Math.random()*(Ht-qo-Xi*2-200)+100,imageId:Ko};E.value.push(sl),setTimeout(()=>{const rl=E.value.findIndex(Gc=>Gc.id===sl.id);rl>-1&&E.value.splice(rl,1)},2e3)}}if(i.value===J){const bs={id:Date.now()+On+ht.id*1e4,text:`${We} ${t.value.complete}! 100 ${t.value.coin} ${t.value.earned}!`,x:Math.random()*(fs-Cn-It*2)+It,y:Math.random()*(Ht-fn-It*2-200)+100};m.value.push(bs),setTimeout(()=>{const Cr=m.value.findIndex(Ko=>Ko.id===bs.id);Cr>-1&&m.value.splice(Cr,1)},3e3)}}else if(i.value===J){const xe={id:Date.now()+On+ht.id*1e3+ds*100,text:`${We} ${t.value.progress}: ${ds}/10`,x:Math.random()*(fs-Cn-It*2)+It,y:Math.random()*(Ht-fn-It*2-200)+100};m.value.push(xe),setTimeout(()=>{const gt=m.value.findIndex(Hn=>Hn.id===xe.id);gt>-1&&m.value.splice(gt,1)},2e3)}}},1e3))},ai=J=>{Ut.value[J]&&(clearInterval(Ut.value[J]),Ut.value[J]=null)},rf=()=>{Object.keys(Ut.value).forEach(J=>{ai(J)})};return Qr(o,J=>{a.value=J}),Qr([$e,kt,sn,Ft],()=>{["mining","hunting","exploration","production"].forEach(se=>{let X=[];se==="mining"?X=$e.value:se==="hunting"?X=kt.value:se==="exploration"?X=sn.value:se==="production"&&(X=Ft.value);const me=X.map((Se,Je)=>Se?`${se}_${Je}_${Se.id}`:null).filter(Se=>Se!==null);Object.keys($n.value[se]).forEach(Se=>{me.includes(Se)||delete $n.value[se][Se]})}),Wt("mining"),Wt("hunting"),Wt("exploration"),Wt("production")},{deep:!0}),$(0),$(!1),$([{name:"",level:1,hp:100,maxHp:100,exp:10,gold:5},{name:"",level:2,hp:150,maxHp:150,exp:20,gold:10},{name:"",level:3,hp:200,maxHp:200,exp:35,gold:20}]),$(null),$({level:1,exp:0,maxExp:100,hp:100,maxHp:100,attack:20}),$(0),$(!1),$(null),$([{name:" ",level:1,difficulty:"",rewards:["","",""],description:"      .",discovered:!0},{name:" ",level:2,difficulty:"",rewards:[" ","",""],description:"    .",discovered:!1},{name:" ",level:3,difficulty:"",rewards:[" "," "," "],description:"    .",discovered:!1}]),$({wood:0,fruit:0,herb:0,artifact:0,magicStone:0,gem:0,dragonScale:0,manaCrystal:0,rareGem:0}),$(0),$(!1),$(null),$({wood:10,stone:5,iron:3,gold:1,diamond:0,herb:8,fruit:12}),$([{id:"woodenSword",name:" ",level:1,materials:{wood:5,stone:2},result:{woodenSword:1},time:30,description:"  ."},{id:"ironSword",name:" ",level:2,materials:{wood:3,iron:5,stone:3},result:{ironSword:1},time:60,description:"  ."},{id:"healthPotion",name:" ",level:1,materials:{herb:3,fruit:2},result:{healthPotion:1},time:20,description:"  ."}]),$({woodenSword:0,ironSword:0,healthPotion:0}),(J,se)=>(M(),F("div",B5,[Ge(Yn,{coinCount:o.value,currentEnergy:z.value,maxEnergy:U.value,totalCoin:l.value,catCount:J.catCount},null,8,["coinCount","currentEnergy","maxEnergy","totalCoin","catCount"]),d("main",M5,[d("div",F5,[d("button",{class:Ne(["modeTab",{active:i.value==="mining"}]),onClick:se[0]||(se[0]=X=>D("mining"))},[d("img",{src:i.value==="mining"?Le(S5):Le(P5),alt:"Mining",class:"modeTabIcon"},null,8,U5),d("span",V5,"Lv."+_(T.value),1)],2),d("button",{class:Ne(["modeTab",{active:i.value==="hunting"}]),onClick:se[1]||(se[1]=X=>D("hunting"))},[d("img",{src:i.value==="hunting"?Le(R5):Le(x5),alt:"Hunting",class:"modeTabIcon"},null,8,$5),d("span",H5,"Lv."+_(ne.value),1)],2),d("button",{class:Ne(["modeTab",{active:i.value==="exploration"}]),onClick:se[2]||(se[2]=X=>D("exploration"))},[d("img",{src:i.value==="exploration"?Le(k5):Le(N5),alt:"Exploration",class:"modeTabIcon"},null,8,G5),d("span",Q5,"Lv."+_(C.value),1)],2),d("button",{class:Ne(["modeTab",{active:i.value==="production"}]),onClick:se[3]||(se[3]=X=>D("production"))},[d("img",{src:i.value==="production"?Le(D5):Le(O5),alt:"Production",class:"modeTabIcon"},null,8,j5),d("span",z5,"Lv."+_(Te.value),1)],2)]),d("div",W5,[d("div",K5,_(h.value),1),d("div",q5,[(M(!0),F(ke,null,Xe(v.value,X=>(M(),F("div",{key:X.id,class:"pointAnimation",style:Tt({left:X.x+"%",top:X.y+"%"})}," +"+_(Le(Su)(X.points)),5))),128))]),d("div",J5,[d("div",Y5,[d("img",{src:Le(L5),alt:"Energy",class:"energyIcon"},null,8,X5),d("div",Z5,[d("div",{class:"energyFill",style:Tt({height:ee.value/oe.value*100+"%"})},null,4)]),d("span",e8,_(ee.value.toLocaleString())+"/"+_(oe.value.toLocaleString()),1)]),d("div",t8,[i.value==="mining"?(M(),F(ke,{key:0},[Q.value&&!L.value?(M(),F("button",{key:0,onClick:se[4]||(se[4]=X=>te("mining")),class:Ne(["clickerBtn miningBtn",{"mining-active":w.value>0}])},null,2)):ue("",!0),L.value?(M(),F("div",n8,[d("div",s8,_(t.value.miningComplete),1),d("div",r8,[d("div",i8,_(q.value.points.toLocaleString())+" "+_(t.value.pointsEarned),1),q.value.fragments>0?(M(),F("div",o8,_(t.value.fragmentsEarned)+" "+_(q.value.fragments)+" "+_(t.value.fragmentsEarnedCount),1)):ue("",!0)])])):ue("",!0)],64)):ue("",!0),i.value==="hunting"?(M(),F(ke,{key:1},[O.value&&!V.value?(M(),F("button",{key:0,onClick:se[5]||(se[5]=X=>te("hunting")),class:Ne(["clickerBtn huntingBtn",{"hunting-active":k.value>0}])},null,2)):ue("",!0),V.value?(M(),F("div",a8,[d("div",l8,_(t.value.huntingComplete),1),d("div",c8,[d("div",u8,_(K.value.points.toLocaleString())+" "+_(t.value.pointsEarned),1),K.value.fragments>0?(M(),F("div",h8,_(t.value.fragmentsEarned)+" "+_(K.value.fragments)+" "+_(t.value.fragmentsEarnedCount),1)):ue("",!0)])])):ue("",!0)],64)):ue("",!0),i.value==="exploration"?(M(),F(ke,{key:2},[b.value&&!S.value?(M(),F("button",{key:0,onClick:se[6]||(se[6]=X=>te("exploration")),class:Ne(["clickerBtn explorationBtn",{"exploration-active":x.value>0}])},null,2)):ue("",!0),S.value?(M(),F("div",d8,[d("div",f8,_(t.value.explorationComplete),1),d("div",p8,[d("div",g8,_(N.value.points.toLocaleString())+" "+_(t.value.pointsEarned),1),N.value.fragments>0?(M(),F("div",m8,_(t.value.fragmentsEarned)+" "+_(N.value.fragments)+" "+_(t.value.fragmentsEarnedCount),1)):ue("",!0)])])):ue("",!0)],64)):ue("",!0),i.value==="production"?(M(),F(ke,{key:3},[ze.value&&!Ve.value?(M(),F("button",{key:0,onClick:se[7]||(se[7]=X=>te("production")),class:Ne(["clickerBtn productionBtn",{"production-active":de.value>0}])},null,2)):ue("",!0),Ve.value?(M(),F("div",y8,[d("div",v8,_(t.value.productionComplete),1),d("div",A8,[d("div",w8,_(ft.value.points.toLocaleString())+" "+_(t.value.pointsEarned),1),ft.value.fragments>0?(M(),F("div",_8,_(t.value.fragmentsEarned)+" "+_(ft.value.fragments)+" "+_(t.value.fragmentsEarnedCount),1)):ue("",!0)])])):ue("",!0)],64)):ue("",!0)])])]),d("div",E8,[d("div",b8,[i.value==="mining"?(M(!0),F(ke,{key:0},Xe($e.value,(X,me)=>(M(),F("div",{key:me,class:Ne(["catCard",{emptySlot:!X,working:X&&i.value==="mining"}]),onClick:Se=>Gs(me,"mining")},[X?(M(),F("div",C8,[d("img",{src:_e(X.imageId),alt:"Cat"},null,8,T8)])):ue("",!0),X?ue("",!0):(M(),F("div",S8,[d("img",{src:Le(vu),alt:"+",class:"emptySlotIcon"},null,8,P8)]))],10,I8))),128)):ue("",!0),i.value==="hunting"?(M(!0),F(ke,{key:1},Xe(kt.value,(X,me)=>(M(),F("div",{key:me,class:Ne(["catCard",{emptySlot:!X,working:X&&i.value==="hunting"}]),onClick:Se=>Gs(me,"hunting")},[X?(M(),F("div",x8,[d("img",{src:_e(X.imageId),alt:"Cat"},null,8,k8)])):ue("",!0),X?ue("",!0):(M(),F("div",N8,[d("img",{src:Le(vu),alt:"+",class:"emptySlotIcon"},null,8,D8)]))],10,R8))),128)):ue("",!0),i.value==="exploration"?(M(!0),F(ke,{key:2},Xe(sn.value,(X,me)=>(M(),F("div",{key:me,class:Ne(["catCard",{emptySlot:!X,working:X&&i.value==="exploration"}]),onClick:Se=>Gs(me,"exploration")},[X?(M(),F("div",L8,[d("img",{src:_e(X.imageId),alt:"Cat"},null,8,B8)])):ue("",!0),X?ue("",!0):(M(),F("div",M8,[d("img",{src:Le(vu),alt:"+",class:"emptySlotIcon"},null,8,F8)]))],10,O8))),128)):ue("",!0),i.value==="production"?(M(!0),F(ke,{key:3},Xe(Ft.value,(X,me)=>(M(),F("div",{key:me,class:Ne(["catCard",{emptySlot:!X,working:X&&i.value==="production"}]),onClick:Se=>Gs(me,"production")},[X?(M(),F("div",V8,[d("img",{src:_e(X.imageId),alt:"Cat"},null,8,$8)])):ue("",!0),X?ue("",!0):(M(),F("div",H8,[d("img",{src:Le(vu),alt:"+",class:"emptySlotIcon"},null,8,G8)]))],10,U8))),128)):ue("",!0)])])]),Ge(Xn),d("div",Q8,[(M(!0),F(ke,null,Xe(m.value,X=>(M(),F("div",{key:X.id,class:"speechBubble",style:Tt({left:X.x+"px",top:X.y+"px",transform:"translateX(-50%)"})},_(X.text),5))),128))]),d("div",j8,[(M(!0),F(ke,null,Xe(E.value,X=>(M(),F("div",{key:X.id,class:"catEmoji",style:Tt({left:X.x+"px",top:X.y+"px"})},[d("img",{src:De(X.imageId),alt:"",class:"tulImage",onError:me=>nt(X.id)},null,40,z8)],4))),128))]),st.value?(M(),F("div",{key:0,class:"catSelectPopupOverlay",onClick:oi},[d("div",{class:"catSelectPopupContent",onClick:se[8]||(se[8]=ms(()=>{},["stop"]))},[d("div",W8,[d("h3",null,_(t.value.selectCat),1),d("button",{class:"closePopupBtn",onClick:oi},"")]),d("div",K8,[hs()?(M(),F("div",q8,[d("button",{class:"removeCatBtn",onClick:dn},_(t.value.removeCat),1)])):ue("",!0),d("div",J8,[(M(!0),F(ke,null,Xe(hn.value,X=>(M(),F("div",{key:X.id,class:"availableCatCard",onClick:me=>yn(X)},[d("div",X8,[d("img",{src:_e(X.imageId||X.id),alt:"Cat"},null,8,Z8)]),d("div",e9,[d("div",t9,_(X.name),1),d("div",n9,"Lv "+_(String(X.level||1).padStart(2,"0")),1),d("div",s9,[(M(!0),F(ke,null,Xe(X.stars||1,me=>(M(),F("span",{key:me,class:"star"},""))),128))])])],8,Y8))),128))])])])])):ue("",!0)]))}},i9=zt(r9,[["__scopeId","data-v-369d6c28"]]),o9={class:"miningPage"},a9={class:"mainContent"},l9={class:"miningContainer"},c9={class:"pageHeader"},u9={class:"levelInfo"},h9={class:"miningProgress"},d9={class:"progressBar"},f9={class:"progressText"},p9=["disabled"],g9={key:0},m9={key:1},y9={class:"resources"},v9={class:"resourceList"},A9={class:"resourceItem"},w9={class:"resourceItem"},_9={class:"resourceItem"},E9={class:"resourceItem"},b9={__name:"MiningPage",setup(n){const e=bn(),t=un(),s=he(()=>t.state.coins),r=he(()=>Es());Lt(()=>{t.loadCurrentUser();const h=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",h),cn(()=>{window.removeEventListener("userDataUpdated",h)})});const i=$(1),o=$(0),a=$(!1),l=$({stone:0,iron:0,gold:0,diamond:0}),c=()=>{if(a.value)return;a.value=!0,o.value=0;const h=setInterval(()=>{if(o.value+=10,o.value>=100){clearInterval(h),a.value=!1,o.value=0;const f=Math.random();f<.4?l.value.stone++:f<.7?l.value.iron++:f<.9?l.value.gold++:l.value.diamond++}},200)};return(h,f)=>(M(),F("div",o9,[Ge(Yn,{coinCount:s.value},null,8,["coinCount"]),d("main",a9,[d("div",l9,[d("div",c9,[d("button",{class:"backBtn",onClick:f[0]||(f[0]=p=>Le(e).push("/main"))},_(r.value.back),1),d("h2",null," "+_(r.value.mining),1)]),d("div",u9,[d("span",null,_(r.value.miningLevel)+": "+_(i.value),1)]),d("div",h9,[d("div",d9,[d("div",{class:"progressFill",style:Tt({width:o.value+"%"})},null,4)]),d("span",f9,_(o.value)+"%",1)]),d("button",{class:Ne(["miningBtn",{mining:a.value}]),onClick:c,disabled:a.value},[a.value?(M(),F("span",m9," "+_(r.value.miningInProgress),1)):(M(),F("span",g9," "+_(r.value.miningStart),1))],10,p9),d("div",y9,[d("h3",null,_(r.value.ownedResources),1),d("div",v9,[d("div",A9,[d("span",null," "+_(r.value.stone),1),d("span",null,_(l.value.stone),1)]),d("div",w9,[d("span",null," "+_(r.value.iron),1),d("span",null,_(l.value.iron),1)]),d("div",_9,[d("span",null," "+_(r.value.gold),1),d("span",null,_(l.value.gold),1)]),d("div",E9,[d("span",null," "+_(r.value.diamond),1),d("span",null,_(l.value.diamond),1)])])])])]),Ge(Xn)]))}},I9=zt(b9,[["__scopeId","data-v-cea6a28a"]]),C9={class:"huntingPage"},T9={class:"mainContent"},S9={class:"huntingContainer"},P9={class:"pageHeader"},R9={class:"playerStats"},x9={class:"statsGrid"},k9={class:"statItem"},N9={class:"statItem"},D9={class:"statItem"},O9={class:"statItem"},L9={class:"monsterSelection"},B9={class:"monsterList"},M9=["onClick"],F9={class:"monsterInfo"},U9={class:"monsterName"},V9={class:"monsterLevel"},$9={class:"monsterRewards"},H9={key:0,class:"currentMonster"},G9={class:"monsterHp"},Q9={class:"hpBar"},j9={class:"hpText"},z9={class:"huntingProgress"},W9={class:"progressBar"},K9={class:"progressText"},q9=["disabled"],J9={key:0},Y9={key:1},X9={__name:"HuntingPage",setup(n){const e=bn(),t=un(),s=he(()=>t.state.coins);Lt(()=>{t.loadCurrentUser();const f=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",f),cn(()=>{window.removeEventListener("userDataUpdated",f)})}),$(1);const r=$(0),i=$(!1),o=$([{name:"",level:1,hp:100,maxHp:100,exp:10,gold:5},{name:"",level:2,hp:150,maxHp:150,exp:20,gold:10},{name:"",level:3,hp:200,maxHp:200,exp:35,gold:20}]),a=$(null),l=$({level:1,exp:0,maxExp:100,hp:100,maxHp:100,attack:20}),c=f=>{a.value={...f}},h=()=>{if(!a.value||i.value)return;i.value=!0,r.value=0;const f=setInterval(()=>{const p=Math.floor(Math.random()*l.value.attack)+10;a.value.hp-=p,a.value.hp<=0?(clearInterval(f),i.value=!1,r.value=100,l.value.exp+=a.value.exp,l.value.hp=l.value.maxHp,l.value.exp>=l.value.maxExp&&(l.value.level++,l.value.exp=0,l.value.maxExp=Math.floor(l.value.maxExp*1.5),l.value.attack+=5,l.value.maxHp+=20,l.value.hp=l.value.maxHp),setTimeout(()=>{a.value=null,r.value=0},2e3)):r.value=(a.value.maxHp-a.value.hp)/a.value.maxHp*100},500)};return(f,p)=>(M(),F("div",C9,[Ge(Yn,{coinCount:s.value},null,8,["coinCount"]),d("main",T9,[d("div",S9,[d("div",P9,[d("button",{class:"backBtn",onClick:p[0]||(p[0]=m=>Le(e).push("/main"))}," "),p[1]||(p[1]=d("h2",null," ",-1))]),d("div",R9,[p[6]||(p[6]=d("h3",null," ",-1)),d("div",x9,[d("div",k9,[p[2]||(p[2]=d("span",null,"",-1)),d("span",null,_(l.value.level),1)]),d("div",N9,[p[3]||(p[3]=d("span",null,"",-1)),d("span",null,_(l.value.hp)+"/"+_(l.value.maxHp),1)]),d("div",D9,[p[4]||(p[4]=d("span",null,"",-1)),d("span",null,_(l.value.attack),1)]),d("div",O9,[p[5]||(p[5]=d("span",null,"",-1)),d("span",null,_(l.value.exp)+"/"+_(l.value.maxExp),1)])])]),d("div",L9,[p[7]||(p[7]=d("h3",null," ",-1)),d("div",B9,[(M(!0),F(ke,null,Xe(o.value,m=>(M(),F("div",{key:m.name,class:Ne(["monsterCard",{selected:a.value?.name===m.name}]),onClick:E=>c(m)},[d("div",F9,[d("span",U9,_(m.name),1),d("span",V9,"Lv."+_(m.level),1)]),d("div",$9,[d("span",null,"EXP: "+_(m.exp),1),d("span",null,"Gold: "+_(m.gold),1)])],10,M9))),128))])]),a.value?(M(),F("div",H9,[d("h3",null,_(a.value.name)+" (Lv."+_(a.value.level)+")",1),d("div",G9,[d("div",Q9,[d("div",{class:"hpFill",style:Tt({width:a.value.hp/a.value.maxHp*100+"%"})},null,4)]),d("span",j9,_(a.value.hp)+"/"+_(a.value.maxHp),1)]),d("div",z9,[d("div",W9,[d("div",{class:"progressFill",style:Tt({width:r.value+"%"})},null,4)]),d("span",K9,_(Math.floor(r.value))+"%",1)]),d("button",{class:Ne(["huntingBtn",{hunting:i.value}]),onClick:h,disabled:i.value},[i.value?(M(),F("span",Y9,"  ...")):(M(),F("span",J9,"  "))],10,q9)])):ue("",!0)])]),Ge(Xn)]))}},Z9=zt(X9,[["__scopeId","data-v-a71dac33"]]),e$={class:"explorationPage"},t$={class:"mainContent"},n$={class:"explorationContainer"},s$={class:"pageHeader"},r$={class:"levelInfo"},i$={class:"locationSelection"},o$={class:"locationList"},a$=["onClick"],l$={class:"locationInfo"},c$={class:"locationHeader"},u$={class:"locationName"},h$={class:"locationLevel"},d$={class:"locationDifficulty"},f$={class:"locationDescription"},p$={class:"locationRewards"},g$={key:0,class:"undiscoveredOverlay"},m$={key:0,class:"currentExploration"},y$={class:"explorationProgress"},v$={class:"progressBar"},A$={class:"progressText"},w$=["disabled"],_$={key:0},E$={key:1},b$={class:"explorationRewards"},I$={class:"rewardsGrid"},C$={class:"rewardIcon"},T$={class:"rewardAmount"},S$={__name:"ExplorationPage",setup(n){const e=bn(),t=un(),s=he(()=>t.state.coins);Lt(()=>{t.loadCurrentUser();const p=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",p),cn(()=>{window.removeEventListener("userDataUpdated",p)})});const r=$(1),i=$(0),o=$(!1),a=$(null);$([]);const l=$([{name:" ",level:1,difficulty:"",rewards:["","",""],description:"      .",discovered:!0},{name:" ",level:2,difficulty:"",rewards:[" ","",""],description:"    .",discovered:!1},{name:" ",level:3,difficulty:"",rewards:[" "," "," "],description:"    .",discovered:!1},{name:" ",level:4,difficulty:" ",rewards:[""," "," "],description:"    .",discovered:!1}]),c=$({wood:0,fruit:0,herb:0,artifact:0,magicStone:0,gem:0,dragonScale:0,manaCrystal:0,rareGem:0,skyStone:0,mysteriousEnergy:0,legendaryItem:0}),h=p=>{p.discovered&&(a.value=p)},f=()=>{if(!a.value||o.value)return;o.value=!0,i.value=0;const p=setInterval(()=>{if(i.value+=5,i.value>=100){clearInterval(p),o.value=!1,i.value=0;const m=Math.floor(Math.random()*a.value.rewards.length),E=a.value.rewards[m],v={:"wood",:"fruit",:"herb"," ":"artifact",:"magicStone",:"gem"," ":"dragonScale"," ":"manaCrystal"," ":"rareGem",:"skyStone"," ":"mysteriousEnergy"," ":"legendaryItem"};if(v[E]&&c.value[v[E]]++,Math.random()<.3){const A=l.value.find(w=>!w.discovered);A&&(A.discovered=!0)}r.value++,setTimeout(()=>{a.value=null},2e3)}},300)};return(p,m)=>(M(),F("div",e$,[Ge(Yn,{coinCount:s.value},null,8,["coinCount"]),d("main",t$,[d("div",n$,[d("div",s$,[d("button",{class:"backBtn",onClick:m[0]||(m[0]=E=>Le(e).push("/main"))}," "),m[1]||(m[1]=d("h2",null," ",-1))]),d("div",r$,[d("span",null," : "+_(r.value),1)]),d("div",i$,[m[3]||(m[3]=d("h3",null," ",-1)),d("div",o$,[(M(!0),F(ke,null,Xe(l.value,E=>(M(),F("div",{key:E.name,class:Ne(["locationCard",{selected:a.value?.name===E.name,undiscovered:!E.discovered}]),onClick:v=>h(E)},[d("div",l$,[d("div",c$,[d("span",u$,_(E.name),1),d("span",h$,"Lv."+_(E.level),1)]),d("span",d$,_(E.difficulty),1),d("p",f$,_(E.description),1),d("div",p$,[(M(!0),F(ke,null,Xe(E.rewards,v=>(M(),F("span",{key:v,class:"rewardTag"},_(v),1))),128))])]),E.discovered?ue("",!0):(M(),F("div",g$,[...m[2]||(m[2]=[d("span",null," ",-1)])]))],10,a$))),128))])]),a.value?(M(),F("div",m$,[d("h3",null,_(a.value.name)+"  ",1),d("div",y$,[d("div",v$,[d("div",{class:"progressFill",style:Tt({width:i.value+"%"})},null,4)]),d("span",A$,_(i.value)+"%",1)]),d("button",{class:Ne(["explorationBtn",{exploring:o.value}]),onClick:f,disabled:o.value},[o.value?(M(),F("span",E$,"  ...")):(M(),F("span",_$,"  "))],10,w$)])):ue("",!0),d("div",b$,[m[4]||(m[4]=d("h3",null," ",-1)),d("div",I$,[(M(!0),F(ke,null,Xe(c.value,(E,v)=>tn((M(),F("div",{key:v,class:"rewardItem"},[d("span",C$,_(v==="wood"?"":v==="fruit"?"":v==="herb"?"":v==="artifact"?"":v==="magicStone"||v==="gem"?"":v==="dragonScale"?"":v==="manaCrystal"?"":v==="rareGem"?"":v==="skyStone"?"":v==="mysteriousEnergy"?"":v==="legendaryItem"?"":""),1),d("span",T$,_(E),1)])),[[t1,E>0]])),128))])])])]),Ge(Xn)]))}},P$=zt(S$,[["__scopeId","data-v-588d2c1d"]]),R$={class:"productionPage"},x$={class:"mainContent"},k$={class:"productionContainer"},N$={class:"pageHeader"},D$={class:"levelInfo"},O$={class:"inventory"},L$={class:"inventoryGrid"},B$={class:"materialIcon"},M$={class:"materialName"},F$={class:"materialAmount"},U$={class:"recipes"},V$={class:"recipeList"},$$=["onClick"],H$={class:"recipeInfo"},G$={class:"recipeHeader"},Q$={class:"recipeName"},j$={class:"recipeLevel"},z$={class:"recipeDescription"},W$={class:"recipeMaterials"},K$={class:"recipeTime"},q$={key:0,class:"currentProduction"},J$={class:"productionProgress"},Y$={class:"progressBar"},X$={class:"progressText"},Z$=["disabled"],eH={key:0},tH={key:1},nH={class:"producedItems"},sH={class:"itemsGrid"},rH={class:"itemIcon"},iH={class:"itemName"},oH={class:"itemAmount"},aH={__name:"ProductionPage",setup(n){const e=bn(),t=un(),s=he(()=>t.state.coins);Lt(()=>{t.loadCurrentUser();const E=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",E),cn(()=>{window.removeEventListener("userDataUpdated",E)})});const r=$(1),i=$(0),o=$(!1),a=$(null),l=$({wood:10,stone:5,iron:3,gold:1,diamond:0,herb:8,fruit:12}),c=$([{id:"woodenSword",name:" ",level:1,materials:{wood:5,stone:2},result:{woodenSword:1},time:30,description:"  ."},{id:"ironSword",name:" ",level:2,materials:{wood:3,iron:5,stone:3},result:{ironSword:1},time:60,description:"  ."},{id:"goldenSword",name:" ",level:3,materials:{iron:3,gold:8,diamond:1},result:{goldenSword:1},time:120,description:"   ."},{id:"healthPotion",name:" ",level:1,materials:{herb:3,fruit:2},result:{healthPotion:1},time:20,description:"  ."},{id:"manaPotion",name:" ",level:2,materials:{herb:5,fruit:3,stone:1},result:{manaPotion:1},time:40,description:"  ."},{id:"magicRing",name:" ",level:3,materials:{gold:5,diamond:2,herb:4},result:{magicRing:1},time:90,description:"  ."}]),h=$({woodenSword:0,ironSword:0,goldenSword:0,healthPotion:0,manaPotion:0,magicRing:0}),f=E=>{Object.entries(E.materials).every(([A,w])=>l.value[A]>=w)&&E.level<=r.value&&(a.value=E)},p=()=>{if(!a.value||o.value)return;Object.entries(a.value.materials).forEach(([v,A])=>{l.value[v]-=A}),o.value=!0,i.value=0;const E=setInterval(()=>{i.value+=100/(a.value.time/.1),i.value>=100&&(clearInterval(E),o.value=!1,i.value=0,Object.entries(a.value.result).forEach(([v,A])=>{h.value[v]+=A}),Math.random()<.1&&r.value++,setTimeout(()=>{a.value=null},2e3))},100)},m=E=>Object.entries(E.materials).every(([A,w])=>l.value[A]>=w)&&E.level<=r.value;return(E,v)=>(M(),F("div",R$,[Ge(Yn,{coinCount:s.value},null,8,["coinCount"]),d("main",x$,[d("div",k$,[d("div",N$,[d("button",{class:"backBtn",onClick:v[0]||(v[0]=A=>Le(e).push("/main"))}," "),v[1]||(v[1]=d("h2",null," ",-1))]),d("div",D$,[d("span",null," : "+_(r.value),1)]),d("div",O$,[v[2]||(v[2]=d("h3",null," ",-1)),d("div",L$,[(M(!0),F(ke,null,Xe(l.value,(A,w)=>(M(),F("div",{key:w,class:"inventoryItem"},[d("span",B$,_(w==="wood"?"":w==="stone"?"":w==="iron"?"":w==="gold"?"":w==="diamond"?"":w==="herb"?"":w==="fruit"?"":""),1),d("span",M$,_(w),1),d("span",F$,_(A),1)]))),128))])]),d("div",U$,[v[3]||(v[3]=d("h3",null," ",-1)),d("div",V$,[(M(!0),F(ke,null,Xe(c.value,A=>(M(),F("div",{key:A.id,class:Ne(["recipeCard",{selected:a.value?.id===A.id,disabled:!m(A)}]),onClick:w=>f(A)},[d("div",H$,[d("div",G$,[d("span",Q$,_(A.name),1),d("span",j$,"Lv."+_(A.level),1)]),d("p",z$,_(A.description),1),d("div",W$,[(M(!0),F(ke,null,Xe(A.materials,(w,P)=>(M(),F("span",{key:P,class:"materialTag"},_(P)+" x"+_(w),1))),128))]),d("div",K$,[d("span",null," "+_(A.time)+"",1)])])],10,$$))),128))])]),a.value?(M(),F("div",q$,[d("h3",null,_(a.value.name)+"  ",1),d("div",J$,[d("div",Y$,[d("div",{class:"progressFill",style:Tt({width:i.value+"%"})},null,4)]),d("span",X$,_(Math.floor(i.value))+"%",1)]),d("button",{class:Ne(["productionBtn",{producing:o.value}]),onClick:p,disabled:o.value},[o.value?(M(),F("span",tH,"  ...")):(M(),F("span",eH,"  "))],10,Z$)])):ue("",!0),d("div",nH,[v[4]||(v[4]=d("h3",null," ",-1)),d("div",sH,[(M(!0),F(ke,null,Xe(h.value,(A,w)=>tn((M(),F("div",{key:w,class:"itemCard"},[d("span",rH,_(w==="woodenSword"?"":w==="ironSword"?"":w==="goldenSword"?"":w==="healthPotion"?"":w==="manaPotion"?"":w==="magicRing"?"":""),1),d("span",iH,_(w),1),d("span",oH,_(A),1)])),[[t1,A>0]])),128))])])])]),Ge(Xn)]))}},lH=zt(aH,[["__scopeId","data-v-61ce148b"]]),xw="data:image/png;base64,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",cH={class:"exchangePage"},uH={class:"mainContent"},hH={class:"contentWrapper"},dH={class:"tabButtons"},fH={class:"tradeSection"},pH={class:"sectionTitle"},gH={class:"exchangeDisplay"},mH={class:"exchangeItem"},yH={class:"exchangeItem"},vH={class:"exchangeValue"},AH=["disabled"],wH={class:"tradeSection"},_H={class:"sectionTitle"},EH={class:"exchangeDisplay"},bH={class:"exchangeItem"},IH={class:"exchangeItem"},CH={class:"exchangeValue"},TH=["disabled"],kw=1e3,SH={__name:"ExchangePage",setup(n){const e=bn(),t=un(),s=he(()=>Es()),r=$("exchange"),i=he(()=>t.state.coins),o=he(()=>t.state.totalCoin),a=$(null),l=$(""),c=$(""),h=he(()=>{if(!l.value)return 0;const A=parseFloat(l.value)||0;return Math.floor(A/kw)}),f=he(()=>{if(!c.value)return 0;const A=parseFloat(c.value)||0;return Math.floor(A*kw)}),p=()=>{const A=_t();A&&(a.value=A),t.loadCurrentUser()},m=async()=>{if(!a.value){alert(s.value.loginRequired);return}if(!l.value||parseFloat(l.value)<=0){alert("Please enter the point amount.");return}const A=parseFloat(l.value),w=h.value;if(i.value<A){alert(`${s.value.insufficientPoints}
Required: ${A.toLocaleString()} Point
Owned: ${i.value.toLocaleString()} Point`);return}if(w<=0){alert("Not enough points to buy at least 1 coin.");return}const P=i.value-A,T=o.value+w;await t.updateMultiple({coins:P,totalCoin:T})?(alert(`${s.value.purchaseSuccess}
${w} ${s.value.coin} ${s.value.buy}
${s.value.pointUsed}: ${A.toLocaleString()}`),l.value=""):alert(s.value.tradeFailed)},E=async()=>{if(!a.value){alert(s.value.loginRequired);return}if(!c.value||parseFloat(c.value)<=0){alert("Please enter the coin amount.");return}const A=parseFloat(c.value),w=A;if(o.value<w){alert(`${s.value.insufficientCoins}
Required: ${A} ${s.value.coin}
Owned: ${o.value.toLocaleString()} ${s.value.coin}`);return}const P=f.value,T=i.value+P,L=o.value-w;await t.updateMultiple({coins:T,totalCoin:L})?(alert(`${s.value.tradeSuccess}
${A} ${s.value.coin} ${s.value.sell}
${s.value.pointReceived}: ${P.toLocaleString()}`),c.value=""):alert(s.value.tradeFailed)};Lt(()=>{p();const A=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",A),cn(()=>{window.removeEventListener("userDataUpdated",A)})});const v=A=>{A==="exchange"?r.value="exchange":A==="catcraft"&&e.push("/factory")};return(A,w)=>(M(),F("div",cH,[Ge(Yn,{coinCount:i.value,hideRightIcons:!0},null,8,["coinCount"]),d("main",uH,[d("div",hH,[d("div",dH,[d("button",{class:Ne(["tabButton",{active:r.value==="exchange"}]),onClick:w[0]||(w[0]=P=>v("exchange"))}," Exchange ",2),d("button",{class:Ne(["tabButton",{active:r.value==="catcraft"}]),onClick:w[1]||(w[1]=P=>v("catcraft"))}," Cat craft ",2)]),d("div",fH,[d("h3",pH,_(s.value.buy)+" "+_(s.value.coin),1),d("div",gH,[d("div",mH,[w[4]||(w[4]=d("img",{src:Ag,alt:"Point",class:"exchangeIcon"},null,-1)),tn(d("input",{type:"number","onUpdate:modelValue":w[2]||(w[2]=P=>l.value=P),placeholder:"0",class:"exchangeInput",step:"1",min:"0"},null,512),[[Ns,l.value]])]),w[6]||(w[6]=d("img",{src:xw,alt:"Arrow",class:"exchangeArrow"},null,-1)),d("div",yH,[w[5]||(w[5]=d("img",{src:Th,alt:"Coin",class:"exchangeIcon"},null,-1)),d("div",vH,_(h.value),1)])]),d("button",{class:"submitBtn",onClick:m,disabled:!l.value||parseFloat(l.value)<=0||h.value<=0},_(s.value.buyButton),9,AH)]),d("div",wH,[d("h3",_H,_(s.value.sell)+" "+_(s.value.coin),1),d("div",EH,[d("div",bH,[w[7]||(w[7]=d("img",{src:Th,alt:"Coin",class:"exchangeIcon"},null,-1)),tn(d("input",{type:"number","onUpdate:modelValue":w[3]||(w[3]=P=>c.value=P),placeholder:"0",class:"exchangeInput",step:"0.01",min:"0"},null,512),[[Ns,c.value]])]),w[9]||(w[9]=d("img",{src:xw,alt:"Arrow",class:"exchangeArrow"},null,-1)),d("div",IH,[w[8]||(w[8]=d("img",{src:Ag,alt:"Point",class:"exchangeIcon"},null,-1)),d("div",CH,_(f.value),1)])]),d("button",{class:"submitBtn sellBtn",onClick:E,disabled:!c.value||parseFloat(c.value)<=0||f.value<=0},_(s.value.sellButton),9,TH)])])]),Ge(Xn)]))}},PH=zt(SH,[["__scopeId","data-v-7c0d6504"]]),sf=()=>{const n=localStorage.getItem("questProgress");return n?JSON.parse(n):{}},dT=n=>{localStorage.setItem("questProgress",JSON.stringify(n))},cp=n=>{const e=sf();n.forEach(t=>{delete e[t]}),dT(e)},RH=(n,e=1)=>{const t=sf();({mining:[1,9,20],hunting:[2,10,21],exploration:[3,11,22],production:[4,12,23],coinEarned:[5,13,17],levelUp:[6,14,18],nftCreated:[25,26,27],nftOwned:[28,29,30]}[n]||[]).forEach(i=>{t[i]||(t[i]=0),t[i]+=e}),dT(t),window.dispatchEvent(new CustomEvent("questProgressUpdated"))},fT=(n,e)=>{const s=sf()[n]||0;switch(n){case 5:case 13:case 17:return Math.max(s,e?.totalCoin||0);case 6:case 14:case 18:return e?.level||1;case 25:case 26:case 27:return s;case 28:case 29:case 30:const r=e?.inventory||[];return n===28?r.filter(i=>i.stars>=3).length:n===29?r.filter(i=>i.stars>=4).length:n===30?r.filter(i=>i.stars>=5).length:0;default:return s}},xH=(n,e)=>fT(n.id,e)>=n.total,kH={class:"questPage"},NH={class:"mainContent"},DH={class:"filterTabs"},OH={class:"mainTabs"},LH={class:"questList"},BH={class:"questContent"},MH={class:"questInfo"},FH={class:"questTitle"},UH={class:"questDescription"},VH={key:0,class:"questRewards"},$H={key:0,class:"rewardItem"},HH={key:1,class:"rewardItem"},GH={key:2,class:"rewardItem"},QH=["onClick"],jH={key:1,class:"completedBadge"},zH={key:2,class:"progressBar"},WH={class:"progressText"},KH={__name:"QuestPage",setup(n){const e=un(),t=he(()=>Es()),s=he(()=>e.state.coins),r=$("inProgress"),i=$("daily"),o=()=>new Date().toDateString(),a=()=>{const v=localStorage.getItem("questLastDate"),A=o();return v!==A?(localStorage.setItem("questLastDate",A),localStorage.removeItem("rewardedQuests"),!0):!1},l=()=>{const v=localStorage.getItem("rewardedQuests");return v?JSON.parse(v):[]},c=v=>{localStorage.setItem("rewardedQuests",JSON.stringify(v)),localStorage.setItem("questLastDate",o())};t.value.coin,t.value.catFragments,t.value.exp;const h=$([{id:1,title:"Daily Mining 10 Times",description:"Complete 10 mining activities today",completed:!1,rewardReceived:!1,progress:0,total:10,type:"daily",reward:{coins:100,catFragments:5},actionType:"mining"},{id:2,title:"Daily Hunting 5 Times",description:"Defeat 5 monsters",completed:!1,rewardReceived:!1,progress:0,total:5,type:"daily",reward:{coins:100,catFragments:5},actionType:"hunting"},{id:3,title:"Daily Exploration 1 Time",description:"Complete 1 exploration activity",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:150,catFragments:10},actionType:"exploration"},{id:4,title:"Daily Production 3 Items",description:"Produce 3 or more items",completed:!1,rewardReceived:!1,progress:0,total:3,type:"daily",reward:{coins:120,catFragments:8},actionType:"production"},{id:5,title:"Daily Coin 1,000 Acquisition",description:"Acquire 1,000 or more coins",completed:!1,rewardReceived:!1,progress:0,total:1e3,type:"daily",reward:{coins:200,catFragments:15},actionType:"coinEarned"},{id:6,title:"Daily Level Up 1 Time",description:"Level up 1 or more levels",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:300,catFragments:20},actionType:"levelUp"},{id:7,title:"Daily Check-in",description:"Log in to the game and check daily quests",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:50,catFragments:3},actionType:"login"},{id:8,title:"Daily NFT Creation 1",description:"Create 1 cat NFT",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:500,catFragments:30},actionType:"nftCreated"},{id:9,title:"Weekly Quest: Mining Master",description:"Complete 50 mining activities in a week",completed:!1,rewardReceived:!1,progress:0,total:50,type:"weekly",reward:{coins:1e3,catFragments:50},actionType:"mining"},{id:10,title:"Weekly Quest: Hunter",description:"Defeat 100 monsters in a week",completed:!1,rewardReceived:!1,progress:0,total:100,type:"weekly",reward:{coins:2e3,catFragments:100},actionType:"hunting"},{id:11,title:"Weekly Quest: Explorer",description:"Explore 5 new areas",completed:!1,rewardReceived:!1,progress:0,total:5,type:"weekly",reward:{coins:1500,catFragments:80},actionType:"exploration"},{id:12,title:"Weekly Quest: Producer",description:"Produce 50 or more items",completed:!1,rewardReceived:!1,progress:0,total:50,type:"weekly",reward:{coins:1800,catFragments:90},actionType:"production"},{id:13,title:"Weekly Quest: Coin Collector",description:"Acquire 50,000 or more coins",completed:!1,rewardReceived:!1,progress:0,total:5e4,type:"weekly",reward:{coins:5e3,catFragments:200},actionType:"coinEarned"},{id:14,title:"Weekly Quest: Level Up 5",description:"Level up 5 or more levels",completed:!1,rewardReceived:!1,progress:0,total:5,type:"weekly",reward:{coins:3e3,catFragments:150},actionType:"levelUp"},{id:15,title:"Weekly Quest: NFT Collector",description:"Create 5 or more NFTs",completed:!1,rewardReceived:!1,progress:0,total:5,type:"weekly",reward:{coins:4e3,catFragments:250},actionType:"nftCreated"},{id:16,title:"Weekly Quest: Own Rare NFT",description:"Own 1 or more Rare grade (3-star or higher) NFTs",completed:!1,rewardReceived:!1,progress:0,total:1,type:"weekly",reward:{coins:5e3,catFragments:300},actionType:"nftOwned"},{id:17,title:"Monthly Quest: Coin King",description:"Acquire 200,000 or more coins this month",completed:!1,rewardReceived:!1,progress:0,total:2e5,type:"monthly",reward:{coins:2e4,catFragments:1e3},actionType:"coinEarned"},{id:18,title:"Monthly Quest: Extreme Level Up",description:"Level up 20 or more levels",completed:!1,rewardReceived:!1,progress:0,total:20,type:"monthly",reward:{coins:15e3,catFragments:800},actionType:"levelUp"},{id:19,title:"Monthly Quest: NFT Master",description:"Create 20 or more NFTs",completed:!1,rewardReceived:!1,progress:0,total:20,type:"monthly",reward:{coins:25e3,catFragments:1500},actionType:"nftCreated"},{id:20,title:"Monthly Quest: Master Miner",description:"Complete 500 or more mining activities",completed:!1,rewardReceived:!1,progress:0,total:500,type:"monthly",reward:{coins:1e4,catFragments:500},actionType:"mining"},{id:21,title:"Monthly Quest: Warrior",description:"Defeat 500 monsters",completed:!1,rewardReceived:!1,progress:0,total:500,type:"monthly",reward:{coins:12e3,catFragments:600},actionType:"hunting"},{id:22,title:"Monthly Quest: Great Explorer",description:"Explore 20 new areas",completed:!1,rewardReceived:!1,progress:0,total:20,type:"monthly",reward:{coins:1e4,catFragments:500},actionType:"exploration"},{id:23,title:"Monthly Quest: Perfect Producer",description:"Produce 200 various items",completed:!1,rewardReceived:!1,progress:0,total:200,type:"monthly",reward:{coins:15e3,catFragments:700},actionType:"production"},{id:24,title:"Monthly Quest: Own Epic NFT",description:"Own 1 or more Epic grade (4-star or higher) NFTs",completed:!1,rewardReceived:!1,progress:0,total:1,type:"monthly",reward:{coins:3e4,catFragments:2e3},actionType:"nftOwned"},{id:25,title:"Daily NFT Creation 1",description:"Create 1 cat NFT",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:500,catFragments:30},actionType:"nftCreated"},{id:26,title:"Weekly NFT Creation 5",description:"Create 5 cat NFTs",completed:!1,rewardReceived:!1,progress:0,total:5,type:"weekly",reward:{coins:4e3,catFragments:250},actionType:"nftCreated"},{id:27,title:"Monthly NFT Creation 20",description:"Create 20 cat NFTs",completed:!1,rewardReceived:!1,progress:0,total:20,type:"monthly",reward:{coins:25e3,catFragments:1500},actionType:"nftCreated"},{id:28,title:"Own Rare NFT",description:"Own 1 or more Rare grade (3-star or higher) NFTs",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:1e3,catFragments:50},actionType:"nftOwned"},{id:29,title:"Own Epic NFT",description:"Own 1 or more Epic grade (4-star or higher) NFTs",completed:!1,rewardReceived:!1,progress:0,total:1,type:"weekly",reward:{coins:5e3,catFragments:300},actionType:"nftOwned"},{id:30,title:"Own Legendary NFT",description:"Own 1 or more Legendary grade (5-star) NFTs",completed:!1,rewardReceived:!1,progress:0,total:1,type:"monthly",reward:{coins:5e4,catFragments:5e3},actionType:"nftOwned"}]),f=()=>{const v=_t();!v||!v.gameData||h.value.forEach(A=>{const w=fT(A.id,v.gameData);A.progress=w,A.completed=xH(A,v.gameData)})},p=async v=>{const A=h.value.find(q=>q.id===v);if(!A||!A.completed||A.rewardReceived)return;const w=_t();if(!w){alert(t.value.loginRequired);return}const P=A.reward||{},T={};if(P.coins&&(T.totalCoin=(w.gameData?.totalCoin||0)+P.coins),P.catFragments&&(T.catFragments=(w.gameData?.catFragments||50)+P.catFragments),P.exp){const q=w.gameData?.level||1,x=P.exp,I=Math.floor(x/100);I>0&&(T.level=q+I)}await e.updateGameData(T),A.rewardReceived=!0;const L=l();L.includes(v)||(L.push(v),c(L)),window.dispatchEvent(new CustomEvent("userDataUpdated"));const Q=[];P.coins&&Q.push(`${P.coins} ${t.value.coin}`),P.catFragments&&Q.push(`${P.catFragments} ${t.value.catFragments}`),P.exp&&Q.push(`${P.exp} ${t.value.exp}`),alert(`${t.value.rewardReceived}
You have earned ${Q.join(", ")}.`)},m=he(()=>{let v=h.value.filter(A=>A.type===i.value);return r.value==="inProgress"?v=v.filter(A=>!A.completed||A.completed&&!A.rewardReceived):r.value==="completed"&&(v=v.filter(A=>A.completed&&A.rewardReceived)),v.sort((A,w)=>A.completed&&!A.rewardReceived&&(w.rewardReceived||!w.completed)?-1:(A.rewardReceived||!A.completed)&&w.completed&&!w.rewardReceived?1:0)}),E=()=>{const v=o();if(localStorage.getItem("questResetDate")!==v){const x=h.value.filter(S=>S.type==="daily").map(S=>S.id);cp(x);const I=l();I.filter(S=>x.includes(S)).forEach(S=>{const b=I.indexOf(S);b>-1&&I.splice(b,1)}),c(I),h.value.forEach(S=>{S.type==="daily"&&(S.rewardReceived=!1,S.completed=!1,S.progress=0)}),localStorage.setItem("questResetDate",v)}const w=new Date,P=w.getDay(),T=localStorage.getItem("questWeeklyResetDate"),L=new Date(w.setDate(w.getDate()-P+1)).toDateString();if(T!==L){const x=h.value.filter(S=>S.type==="weekly").map(S=>S.id);cp(x);const I=l();I.filter(S=>x.includes(S)).forEach(S=>{const b=I.indexOf(S);b>-1&&I.splice(b,1)}),c(I),h.value.forEach(S=>{S.type==="weekly"&&(S.rewardReceived=!1,S.completed=!1,S.progress=0)}),localStorage.setItem("questWeeklyResetDate",L)}const Q=localStorage.getItem("questMonthlyResetDate"),q=new Date(w.getFullYear(),w.getMonth(),1).toDateString();if(Q!==q){const x=h.value.filter(S=>S.type==="monthly").map(S=>S.id);cp(x);const I=l();I.filter(S=>x.includes(S)).forEach(S=>{const b=I.indexOf(S);b>-1&&I.splice(b,1)}),c(I),h.value.forEach(S=>{S.type==="monthly"&&(S.rewardReceived=!1,S.completed=!1,S.progress=0)}),localStorage.setItem("questMonthlyResetDate",q)}};return Lt(()=>{e.loadCurrentUser();const v=()=>{e.loadCurrentUser()};window.addEventListener("userDataUpdated",v),cn(()=>{window.removeEventListener("userDataUpdated",v)}),a(),E();const A=l();h.value.forEach(P=>{A.includes(P.id)&&(P.rewardReceived=!0)}),f();const w=h.value.find(P=>P.id===7&&P.type==="daily");if(w&&!w.completed){w.progress=1,w.completed=!0;const P=sf();P[7]=1,localStorage.setItem("questProgress",JSON.stringify(P))}window.addEventListener("questProgressUpdated",f),window.addEventListener("userDataUpdated",f)}),cn(()=>{window.removeEventListener("questProgressUpdated",f),window.removeEventListener("userDataUpdated",f)}),(v,A)=>(M(),F("div",kH,[Ge(Yn,{coinCount:s.value},null,8,["coinCount"]),d("main",NH,[d("div",DH,[d("button",{class:Ne(["filterTab",{active:i.value==="daily"}]),onClick:A[0]||(A[0]=w=>i.value="daily")}," Daily ",2),d("button",{class:Ne(["filterTab",{active:i.value==="weekly"}]),onClick:A[1]||(A[1]=w=>i.value="weekly")}," Weekly ",2),d("button",{class:Ne(["filterTab",{active:i.value==="monthly"}]),onClick:A[2]||(A[2]=w=>i.value="monthly")}," Monthly ",2)]),d("div",OH,[d("button",{class:Ne(["mainTab",{active:r.value==="inProgress"}]),onClick:A[3]||(A[3]=w=>r.value="inProgress")},_(t.value.inProgress),3),d("button",{class:Ne(["mainTab",{active:r.value==="completed"}]),onClick:A[4]||(A[4]=w=>r.value="completed")},_(t.value.completed),3)]),d("div",LH,[(M(!0),F(ke,null,Xe(m.value,w=>(M(),F("div",{key:w.id,class:"questCard"},[d("div",BH,[d("div",MH,[d("h3",FH,_(w.title),1),d("p",UH,_(w.description),1),w.reward?(M(),F("div",VH,[w.reward.coins?(M(),F("span",$H,"  "+_(w.reward.coins),1)):ue("",!0),w.reward.catFragments?(M(),F("span",HH,"  "+_(w.reward.catFragments),1)):ue("",!0),w.reward.exp?(M(),F("span",GH,"  "+_(w.reward.exp),1)):ue("",!0)])):ue("",!0)]),A[5]||(A[5]=d("div",{class:"questCharacter"},[d("div",{class:"characterImg"},"")],-1))]),w.completed&&!w.rewardReceived?(M(),F("button",{key:0,class:"rewardBtn",onClick:P=>p(w.id)},_(t.value.receive),9,QH)):w.completed&&w.rewardReceived?(M(),F("div",jH,"  "+_(t.value.completed),1)):(M(),F("div",zH,[d("div",{class:"progressFill",style:Tt({width:w.progress/w.total*100+"%"})},null,4),d("span",WH,_(w.progress)+"/"+_(w.total),1)]))]))),128))])]),Ge(Xn)]))}},qH=zt(KH,[["__scopeId","data-v-ff25a02c"]]),Ye={COMMON:"common",RARE:"rare",EPIC:"epic",LEGENDARY:"legendary"},up={[Ye.COMMON]:.7,[Ye.RARE]:.9,[Ye.EPIC]:.98,[Ye.LEGENDARY]:1},Nw={[Ye.COMMON]:{min:2,max:3},[Ye.RARE]:{min:3,max:4},[Ye.EPIC]:{min:4,max:5},[Ye.LEGENDARY]:{min:5,max:5}},Dw={[Ye.COMMON]:{miningEfficiency:{min:5,max:15},huntingDamage:{min:5,max:15},explorationReward:{min:5,max:15},productionSpeed:{min:5,max:15}},[Ye.RARE]:{miningEfficiency:{min:15,max:30},huntingDamage:{min:15,max:30},explorationReward:{min:15,max:30},productionSpeed:{min:15,max:30}},[Ye.EPIC]:{miningEfficiency:{min:30,max:60},huntingDamage:{min:30,max:60},explorationReward:{min:30,max:60},productionSpeed:{min:30,max:60}},[Ye.LEGENDARY]:{miningEfficiency:{min:60,max:100},huntingDamage:{min:60,max:100},explorationReward:{min:60,max:100},productionSpeed:{min:60,max:100}}},Ow={[Ye.COMMON]:{primary:"#9E9E9E",secondary:"#BDBDBD",border:"#757575",glow:"rgba(158, 158, 158, 0.3)"},[Ye.RARE]:{primary:"#2196F3",secondary:"#64B5F6",border:"#1976D2",glow:"rgba(33, 150, 243, 0.3)"},[Ye.EPIC]:{primary:"#9C27B0",secondary:"#BA68C8",border:"#7B1FA2",glow:"rgba(156, 39, 176, 0.3)"},[Ye.LEGENDARY]:{primary:"#FF9800",secondary:"#FFB74D",border:"#F57C00",glow:"rgba(255, 152, 0, 0.4)"}},Lw={[Ye.COMMON]:"",[Ye.RARE]:"",[Ye.EPIC]:"",[Ye.LEGENDARY]:""},Bw={[Ye.COMMON]:"Common",[Ye.RARE]:"Rare",[Ye.EPIC]:"Epic",[Ye.LEGENDARY]:"Legendary"};function JH(){const n=Math.random();return n<up[Ye.COMMON]?Ye.COMMON:n<up[Ye.RARE]?Ye.RARE:n<up[Ye.EPIC]?Ye.EPIC:Ye.LEGENDARY}function YH(n){const e=Nw[n]||Nw[Ye.COMMON];return Math.floor(Math.random()*(e.max-e.min+1))+e.min}function XH(n){const e=Dw[n]||Dw[Ye.COMMON],t=s=>Math.floor(Math.random()*(s.max-s.min+1))+s.min;return{miningEfficiency:t(e.miningEfficiency),huntingDamage:t(e.huntingDamage),explorationReward:t(e.explorationReward),productionSpeed:t(e.productionSpeed)}}function pT(n){if(n.rarity)return n;const e=JH(),t=n.stars||YH(e),s=XH(e);return{...n,rarity:e,stars:t,...s}}function Ec(n){if(!n)return{};const e=Ow[n]||Ow[Ye.COMMON];return{"--rarity-color":e.primary,"--rarity-secondary":e.secondary,"--rarity-border":e.border,"--rarity-glow":e.glow}}function ty(n){return(localStorage.getItem("appLanguage")||"English")==="English"?Bw[n]||Bw[Ye.COMMON]:Lw[n]||Lw[Ye.COMMON]}const ZH="/tdl/assets/statStar1-DQ3NLFmi.png",e7="/tdl/assets/statStar2-7A5sNtwf.png",Mw="/tdl/assets/inventoryTab_off-CzoQXsFX.png",Fw="/tdl/assets/inventoryTab_on-BM74KYxp.png",t7="/tdl/assets/affline-CHli_Lq2.png",n7="/tdl/assets/exline-CK0DXNtO.png",s7={class:"inventoryPage"},r7={class:"mainContent"},i7={class:"tabButtons"},o7=["src"],a7=["src"],l7={key:0,class:"topSection"},c7={class:"panelTitle"},u7={class:"levelBadge"},h7={class:"magicPanelContainer"},d7={class:"magicPanel"},f7={class:"characterBox"},p7=["src","alt"],g7={class:"profilePanel"},m7={class:"progressBars"},y7={class:"progressBar noBar"},v7={class:"value"},A7={class:"progressBar"},w7={class:"barBg"},_7=["src"],E7={class:"value"},b7={class:"progressBar noBar"},I7={class:"value"},C7={class:"progressBar"},T7={class:"barBg"},S7=["src"],P7={class:"value"},R7={key:1,class:"inventoryHeader"},x7={class:"inventoryCount"},k7={key:2,class:"inventoryGrid"},N7=["onClick","onDblclick"],D7={key:0,class:"newBadge"},O7={class:"catNameBadge"},L7={class:"starBadge"},B7=["src"],M7={class:"levelBadge"},F7=["src","alt"],U7={key:3,class:"emptyInventory"},V7={class:"emptyText"},$7={class:"emptySubtext"},H7={key:4,class:"itemGrid"},G7={class:"searchModalHeader"},Q7={class:"searchModalTitle"},j7={class:"searchModalBody"},z7={class:"searchBox"},W7=["placeholder"],K7={class:"filterControls"},q7={class:"filterGroup"},J7={class:"filterLabel"},Y7={value:"all"},X7={value:"2"},Z7={value:"3"},eG={value:"4"},tG={value:"5"},nG={class:"filterGroup"},sG={class:"filterLabel"},rG={value:"all"},iG={class:"filterGroup"},oG={class:"filterLabel"},aG={value:"all"},lG={value:"common"},cG={value:"rare"},uG={value:"epic"},hG={value:"legendary"},dG={class:"filterGroup"},fG={class:"filterLabel"},pG={value:"newest"},gG={value:"oldest"},mG={value:"level"},yG={value:"stars"},vG={value:"rarity"},AG={value:"name"},wG={class:"searchModalFooter"},_G={class:"modalHeader"},EG={class:"modalTitle"},bG={class:"modalBody"},IG={class:"modalImageSection"},CG=["src"],TG={class:"modalBadges"},SG={class:"modalBadge stars"},PG={class:"modalBadge level"},RG={class:"modalStatsSection"},xG={class:"sectionTitle"},kG={class:"modalStats"},NG={class:"modalStatLabel"},DG={class:"modalStatBar"},OG={class:"modalStatValue"},LG={class:"modalInfoSection"},BG={class:"infoRow"},MG={class:"infoValue"},FG={class:"infoRow"},UG={class:"infoLabel"},VG={class:"infoValue"},$G={class:"infoRow"},HG={class:"infoLabel"},GG={class:"infoValue"},QG={class:"expSection"},jG={class:"expLabel"},zG={class:"expBar"},WG={class:"expText"},KG={class:"modalFooter"},qG=["disabled"],JG={__name:"InventoryPage",setup(n){const e=un(),t=he(()=>Es()),s=he(()=>e.state.coins),r=$(""),i=$("all"),o=$("all"),a=$("all"),l=$("newest"),c=$(!1),h=$(null),f=$(!1),p=$("cat"),m=V=>[{name:t.value.strength,value:V[0],progress:V[0],color:"#FF6B6B"},{name:t.value.health,value:V[1],progress:V[1],color:"#FF8A80"},{name:t.value.intelligence,value:V[2],progress:V[2],color:"#9C27B0"},{name:t.value.dexterity,value:V[3],progress:V[3],color:"#FFA726"},{name:t.value.courage,value:V[4],progress:V[4],color:"#00BCD4"},{name:t.value.luck,value:V[5],progress:V[5],color:"#66BB6A"}],E=["Active","Quiet","Playful","Friendly","Independent","Affectionate","Curious","Brave"],v=V=>{if(V.stats)V.stats=V.stats.map((O,K)=>{const de=[t.value.strength,t.value.health,t.value.intelligence,t.value.dexterity,t.value.courage,t.value.luck];return{...O,name:de[K]||O.name}});else{const O=V.stars*15+Math.floor(Math.random()*20);V.stats=m([O+Math.floor(Math.random()*20),O+Math.floor(Math.random()*20),O+Math.floor(Math.random()*20),O+Math.floor(Math.random()*20),O+Math.floor(Math.random()*20),O+Math.floor(Math.random()*20)])}return V.personality||(V.personality=E[Math.floor(Math.random()*E.length)]),V.affinity===void 0&&(V.affinity=30+Math.floor(Math.random()*71)),V},A=$([]),w=he(()=>{let V=[...A.value];if(r.value.trim()){const O=r.value.toLowerCase();V=V.filter(K=>K.name.toLowerCase().includes(O)||String(K.imageId).includes(O))}return i.value!=="all"&&(V=V.filter(O=>O.stars===parseInt(i.value))),o.value!=="all"&&(o.value==="1-5"?V=V.filter(O=>O.level>=1&&O.level<=5):o.value==="6-10"?V=V.filter(O=>O.level>=6&&O.level<=10):o.value==="11+"&&(V=V.filter(O=>O.level>=11))),V=[...V].sort((O,K)=>{switch(l.value){case"newest":return(K.isNew?1:0)-(O.isNew?1:0)||K.id-O.id;case"oldest":return O.id-K.id;case"level":return K.level-O.level;case"stars":return K.stars-O.stars;case"rarity":const de={[Ye.LEGENDARY]:4,[Ye.EPIC]:3,[Ye.RARE]:2,[Ye.COMMON]:1},Ue=de[O.rarity||Ye.COMMON]||0;return(de[K.rarity||Ye.COMMON]||0)-Ue;case"name":return O.name.localeCompare(K.name);default:return 0}}),V});he(()=>{const V=A.value.find(O=>O.selected);return V?v(V).stats:m([33,7,29,10,11,10])});const P=he(()=>{const V=A.value.find(O=>O.selected);return V&&v(V).personality||"Active"}),T=he(()=>{const V=A.value.find(O=>O.selected);return V&&v(V).affinity||50}),L=he(()=>{const V=A.value.find(O=>O.selected);return V?V.name:"Inventory is empty"}),Q=he(()=>{const V=A.value.find(O=>O.selected);return V&&V.level||1}),q=he(()=>{const V=A.value.find(O=>O.selected);if(V){const O=v(V),K=O.exp||0,de=O.maxExp||Ur(O.level||1);return{current:K,max:de,percentage:de>0?Math.min(K/de*100,100):0}}return{current:0,max:100,percentage:0}}),x=he(()=>{const V=A.value.find(O=>O.selected);if(V){const O=v(V);if(O.stats&&O.stats.length>0){const K=O.stats.reduce((de,Ue)=>de+(Ue.value||0),0);return Math.round(K/O.stats.length)}}return 0}),I=V=>{try{return new URL(Object.assign({"../assets/img/cat1.png":Ed,"../assets/img/cat10.png":bd,"../assets/img/cat11.png":Id,"../assets/img/cat12.png":Cd,"../assets/img/cat13.png":Td,"../assets/img/cat14.png":Sd,"../assets/img/cat15.png":Pd,"../assets/img/cat16.png":Rd,"../assets/img/cat17.png":xd,"../assets/img/cat18.png":kd,"../assets/img/cat19.png":Nd,"../assets/img/cat2.png":Dd,"../assets/img/cat20.png":Od,"../assets/img/cat21.png":Ld,"../assets/img/cat22.png":Bd,"../assets/img/cat23.png":Md,"../assets/img/cat24.png":Fd,"../assets/img/cat25.png":Ud,"../assets/img/cat26.png":Vd,"../assets/img/cat27.png":$d,"../assets/img/cat28.png":Hd,"../assets/img/cat29.png":Gd,"../assets/img/cat3.png":Qd,"../assets/img/cat30.png":jd,"../assets/img/cat4.png":zd,"../assets/img/cat5.png":Wd,"../assets/img/cat6.png":Kd,"../assets/img/cat7.png":qd,"../assets/img/cat8.png":Jd,"../assets/img/cat9.png":Yd,"../assets/img/catPoint.png":Xd,"../assets/img/catPointPlus.png":Zd,"../assets/img/catProfile01.png":ef,"../assets/img/catProfile02.png":tf,"../assets/img/cat_ico.png":nf})[`../assets/img/cat${V}.png`],import.meta.url).href}catch{return`/src/assets/img/cat${V}.png`}},C=he(()=>{const V=A.value.find(O=>O.selected);return I(V?V.imageId||V.id:1)}),S=V=>{const O=Sh(V);h.value=v({...O}),c.value=!0},b=()=>{c.value=!1,h.value=null},N=async V=>{if(A.value.forEach(O=>O.selected=!1),V.selected=!0,V.isNew&&(V.isNew=!1,_t())){const K=A.value.map(de=>({...de,isNew:de.id===V.id?!1:de.isNew}));await e.updateGameData({inventory:K})}},k=()=>{r.value="",i.value="all",o.value="all",a.value="all",l.value="newest"},Ee=async()=>{if(!h.value)return;const V=lp(h.value.level||1);if(s.value<V){alert(`${t.value.insufficientCoins} (Required: ${V})`);return}const O=_t();if(O){const de=(O.gameData?.inventory||[]).map(Te=>{if(Te.id===h.value.id){const ze=(Te.level||1)+1,ft=Ur(ze),pt=T5(Te),yt=(Te.miningEfficiency||0)+pt,Z=(Te.huntingDamage||0)+pt,pe=(Te.explorationReward||0)+pt,ce=(Te.productionSpeed||0)+pt;return{...Te,level:ze,exp:0,maxExp:ft,miningEfficiency:yt,huntingDamage:Z,explorationReward:pe,productionSpeed:ce}}return Te}),Ue=s.value-V;try{await e.updateMultiple({coins:Ue}),await e.updateGameData({inventory:de});const Te=de.find(Ve=>Ve.id===h.value.id);Te&&(h.value=v({...Te})),ne(),alert(`${t.value.levelUp} Success! Level ${newLevel}`)}catch(Te){console.error(" :",Te),alert("An error occurred during level up.")}}},ne=async()=>{const V=_t();if(V){e.loadCurrentUser();const O=V.gameData?.inventory||[];if(O.length>0){const K=O.map(Ue=>{const Te=Ue.rarity?Ue:pT(Ue),Ve=v({...Te}),ze=Sh(Ve);if(!ze.exp||ze.exp===0){const ft=ze.maxExp||Ur(ze.level||1);ze.exp=Math.floor(Math.random()*ft)}return ze.personality||(ze.personality=E[Math.floor(Math.random()*E.length)]),ze.affinity===void 0&&(ze.affinity=30+Math.floor(Math.random()*71)),ze});A.value=K,_t()&&K.some((Te,Ve)=>{const ze=O[Ve];return!ze.exp||ze.exp===0||!ze.personality||ze.affinity===void 0})&&await e.updateGameData({inventory:K})}else A.value=[]}else A.value=[]};return Lt(()=>{ne(),window.addEventListener("userDataUpdated",ne)}),cn(()=>{window.removeEventListener("userDataUpdated",ne)}),(V,O)=>(M(),F("div",s7,[Ge(Yn,{coinCount:s.value,hideRightIcons:!0},null,8,["coinCount"]),d("main",r7,[d("div",i7,[d("button",{class:Ne(["tabButton",{active:p.value==="cat"}]),onClick:O[0]||(O[0]=K=>p.value="cat")},[d("img",{src:p.value==="cat"?Le(Fw):Le(Mw),alt:"Cat",class:"tabButtonImg"},null,8,o7),O[15]||(O[15]=d("span",{class:"tabButtonText"},"Cat",-1))],2),d("button",{class:Ne(["tabButton",{active:p.value==="item"}]),onClick:O[1]||(O[1]=K=>p.value="item")},[d("img",{src:p.value==="item"?Le(Fw):Le(Mw),alt:"Item",class:"tabButtonImg"},null,8,a7),O[16]||(O[16]=d("span",{class:"tabButtonText"},"Item",-1))],2)]),p.value==="cat"?(M(),F("div",l7,[d("div",c7,[d("span",null,_(L.value),1),d("span",u7,"Lv."+_(Q.value),1)]),d("div",h7,[d("div",d7,[d("div",f7,[d("img",{src:C.value,alt:t.value.selectedCharacter,class:"selectedCharacter"},null,8,p7)])]),d("div",g7,[d("div",m7,[d("div",y7,[O[17]||(O[17]=d("div",{class:"statLabel"},"Personality:",-1)),d("span",v7,_(P.value),1)]),d("div",A7,[O[18]||(O[18]=d("div",{class:"statLabel"},"Affinity",-1)),d("div",w7,[d("div",{style:Tt({width:T.value+"%"}),class:"barFill barFillAffinity"},[d("img",{src:Le(t7),alt:"Affinity Graph",class:"barFillImage"},null,8,_7)],4)]),d("span",E7,_(T.value)+"%",1)]),d("div",b7,[O[19]||(O[19]=d("div",{class:"statLabel"},"Ability",-1)),d("span",I7,_(x.value),1)]),d("div",C7,[O[20]||(O[20]=d("div",{class:"statLabel"},"Experience",-1)),d("div",T7,[d("div",{style:Tt({width:q.value.percentage+"%"}),class:"barFill barFillExperience"},[d("img",{src:Le(n7),alt:"Experience Graph",class:"barFillImage"},null,8,S7)],4)]),d("span",P7,_(q.value.percentage.toFixed(0))+"%",1)])])])])])):ue("",!0),p.value==="cat"?(M(),F("div",R7,[d("div",x7,_(t.value.totalItems)+" "+_(w.value.length)+" / "+_(A.value.length)+" "+_(t.value.items),1),d("button",{class:"searchBtn",onClick:O[2]||(O[2]=K=>f.value=!0)},[O[21]||(O[21]=d("span",{class:"searchIcon"},"",-1)),d("span",null,_(t.value.search),1)])])):ue("",!0),p.value==="cat"&&w.value.length>0?(M(),F("div",k7,[(M(!0),F(ke,null,Xe(w.value,K=>(M(),F("div",{key:K.id,class:Ne(["inventoryItem",{selected:K.selected,[`rarity-${K.rarity||"common"}`]:!0}]),style:Tt(Le(Ec)(K.rarity)),onClick:de=>N(K),onDblclick:de=>S(K)},[K.isNew?(M(),F("div",D7,"NEW")):ue("",!0),d("div",O7,_(K.name),1),d("div",L7,[(M(),F(ke,null,Xe(5,de=>d("img",{key:de,src:de<=K.stars?Le(ZH):Le(e7),alt:"",class:"starIcon"},null,8,B7)),64))]),d("div",M7," Lv "+_(String(K.level).padStart(2,"0")),1),d("img",{src:I(K.imageId||K.id),alt:t.value.cat,class:"itemIcon"},null,8,F7)],46,N7))),128))])):ue("",!0),p.value==="cat"&&w.value.length===0?(M(),F("div",U7,[O[22]||(O[22]=d("div",{class:"emptyIcon"},"",-1)),d("div",V7,_(t.value.noNFTs),1),d("div",$7,_(t.value.createCatInFactory),1)])):ue("",!0),p.value==="item"?(M(),F("div",H7,[(M(),F(ke,null,Xe(9,K=>d("div",{key:K,class:"itemBox"})),64))])):ue("",!0)]),Ge(Xn),f.value?(M(),F("div",{key:0,class:"modalOverlay",onClick:O[12]||(O[12]=K=>f.value=!1)},[d("div",{class:"searchModal",onClick:O[11]||(O[11]=ms(()=>{},["stop"]))},[d("div",G7,[d("h3",Q7,_(t.value.searchAndFilter),1),d("button",{class:"searchModalClose",onClick:O[3]||(O[3]=K=>f.value=!1)},"")]),d("div",j7,[d("div",z7,[tn(d("input",{type:"text","onUpdate:modelValue":O[4]||(O[4]=K=>r.value=K),placeholder:t.value.searchPlaceholder,class:"searchInput",onKeyup:O[5]||(O[5]=r1(K=>f.value=!1,["enter"]))},null,40,W7),[[Ns,r.value]])]),d("div",K7,[d("div",q7,[d("label",J7,_(t.value.starRating),1),tn(d("select",{"onUpdate:modelValue":O[6]||(O[6]=K=>i.value=K),class:"filterSelect"},[d("option",Y7,_(t.value.all),1),d("option",X7,"2 "+_(t.value.stars),1),d("option",Z7,"3 "+_(t.value.stars),1),d("option",eG,"4 "+_(t.value.stars),1),d("option",tG,"5 "+_(t.value.stars),1)],512),[[Pi,i.value]])]),d("div",nG,[d("label",sG,_(t.value.levelFilter),1),tn(d("select",{"onUpdate:modelValue":O[7]||(O[7]=K=>o.value=K),class:"filterSelect"},[d("option",rG,_(t.value.all),1),O[23]||(O[23]=d("option",{value:"1-5"},"1-5",-1)),O[24]||(O[24]=d("option",{value:"6-10"},"6-10",-1)),O[25]||(O[25]=d("option",{value:"11+"},"11+",-1))],512),[[Pi,o.value]])]),d("div",iG,[d("label",oG,_(t.value.rarityFilter),1),tn(d("select",{"onUpdate:modelValue":O[8]||(O[8]=K=>a.value=K),class:"filterSelect"},[d("option",aG,_(t.value.all),1),d("option",lG,_(t.value.common),1),d("option",cG,_(t.value.rare),1),d("option",uG,_(t.value.epic),1),d("option",hG,_(t.value.legendary),1)],512),[[Pi,a.value]])]),d("div",dG,[d("label",fG,_(t.value.sortBy),1),tn(d("select",{"onUpdate:modelValue":O[9]||(O[9]=K=>l.value=K),class:"filterSelect"},[d("option",pG,_(t.value.newest),1),d("option",gG,_(t.value.oldest),1),d("option",mG,_(t.value.levelHighToLow),1),d("option",yG,_(t.value.starsHighToLow),1),d("option",vG,_(t.value.rarityHighToLow),1),d("option",AG,_(t.value.nameOrder),1)],512),[[Pi,l.value]])])]),d("div",wG,[d("button",{class:"resetFilterBtn",onClick:k},_(t.value.reset),1),d("button",{class:"applyFilterBtn",onClick:O[10]||(O[10]=K=>f.value=!1)},_(t.value.apply),1)])])])])):ue("",!0),c.value&&h.value?(M(),F("div",{key:1,class:"modalOverlay",onClick:b},[d("div",{class:"modalContent",onClick:O[14]||(O[14]=ms(()=>{},["stop"]))},[d("div",_G,[d("h3",EG,_(h.value.name),1),d("button",{class:"modalClose",onClick:b},"")]),d("div",bG,[d("div",IG,[d("img",{src:I(h.value.imageId||h.value.id),alt:"NFT",class:"modalImage"},null,8,CG),d("div",TG,[h.value.rarity?(M(),F("div",{key:0,class:"modalBadge rarity",style:Tt(Le(Ec)(h.value.rarity))},_(Le(ty)(h.value.rarity)),5)):ue("",!0),d("div",SG,[(M(),F(ke,null,Xe(5,K=>d("span",{key:K,class:"star"},_(K<=h.value.stars?"":""),1)),64))]),d("div",PG,"Lv "+_(h.value.level),1)])]),d("div",RG,[d("h4",xG,_(t.value.stats),1),d("div",kG,[(M(!0),F(ke,null,Xe(h.value.stats,(K,de)=>(M(),F("div",{key:de,class:"modalStat"},[d("div",NG,_(K.name),1),d("div",DG,[d("div",{style:Tt({width:K.progress+"%",backgroundColor:K.color}),class:"modalStatFill"},null,4)]),d("div",OG,_(K.value)+"%",1)]))),128))])]),d("div",LG,[d("div",BG,[O[26]||(O[26]=d("span",{class:"infoLabel"},"NFT ID:",-1)),d("span",MG,"#"+_(h.value.id),1)]),d("div",FG,[d("span",UG,_(t.value.imageId)+":",1),d("span",VG,"#"+_(h.value.imageId),1)]),d("div",$G,[d("span",HG,_(t.value.createdAt)+":",1),d("span",GG,_(new Date(h.value.id).toLocaleDateString()),1)])]),d("div",QG,[d("div",jG,_(t.value.exp),1),d("div",zG,[d("div",{class:"expFill",style:Tt({width:Math.min((h.value.exp||0)/(h.value.maxExp||Le(Ur)(h.value.level||1))*100,100)+"%"})},null,4)]),d("div",WG,_(h.value.exp||0)+" / "+_(h.value.maxExp||Le(Ur)(h.value.level||1)),1)])]),d("div",KG,[Le(C5)(h.value)?(M(),F("button",{key:0,class:"modalBtn levelUpBtn",onClick:Ee,disabled:s.value<Le(lp)(h.value.level||1)},_(t.value.levelUpButton)+" ("+_(Le(lp)(h.value.level||1))+" "+_(t.value.coin)+") ",9,qG)):ue("",!0),d("button",{class:"modalBtn selectBtn",onClick:O[13]||(O[13]=K=>{N(h.value),b()})},_(t.value.selectButton),1)])])])):ue("",!0)]))}},YG=zt(JG,[["__scopeId","data-v-e5ef0a33"]]),XG="/tdl/assets/factory_cat-DD06P-8u.png",ZG={class:"factoryPage"},eQ={class:"mainContent"},tQ={class:"tabButtons"},nQ={class:"materialsSection"},sQ=["alt"],rQ={class:"materialText"},iQ={class:"materialCount"},oQ={class:"materialText"},aQ={class:"materialCount"},lQ=["disabled"],cQ=["src"],uQ={class:"popupTitle"},hQ={class:"popupMessage"},dQ={__name:"FactoryPage",setup(n){const e=bn(),t=he(()=>Es()),s=un(),r=he(()=>s.state.totalCoin),i=he(()=>s.state.catFragments),o=$(100),a=$(3),l=$("catcraft"),c=$(!1),h=$(1),f=$(null);Lt(()=>{s.loadCurrentUser();const L=()=>{s.loadCurrentUser()};window.addEventListener("userDataUpdated",L),cn(()=>{window.removeEventListener("userDataUpdated",L)})});const p=async()=>{if(r.value<o.value){alert(`${t.value.insufficientCoins} (Required: ${o.value})`);return}if(i.value<a.value){alert(`${t.value.insufficientFragments} (Required: ${a.value})`);return}const L=_t();if(L){const Q=r.value-o.value,q=i.value-a.value;h.value=A();const x=L.gameData?.inventory||[];x.length+1;const I=Ur(1),C=Math.floor(Math.random()*I),S={id:Date.now(),imageId:h.value,name:`Cat ${h.value}`,level:1,exp:C,maxExp:I,selected:!1,isNew:!0},b=pT(S);f.value=b.rarity;const N=[b,...x];await s.updateGameData({totalCoin:Q,catFragments:q,inventory:N}),RH("nftCreated",1),c.value=!0}},m=he(()=>r.value>=o.value&&i.value>=a.value),E=he(()=>r.value>=o.value),v=he(()=>i.value>=a.value),A=()=>Math.floor(Math.random()*30)+1,w=L=>{try{return new URL(Object.assign({"../assets/img/cat1.png":Ed,"../assets/img/cat10.png":bd,"../assets/img/cat11.png":Id,"../assets/img/cat12.png":Cd,"../assets/img/cat13.png":Td,"../assets/img/cat14.png":Sd,"../assets/img/cat15.png":Pd,"../assets/img/cat16.png":Rd,"../assets/img/cat17.png":xd,"../assets/img/cat18.png":kd,"../assets/img/cat19.png":Nd,"../assets/img/cat2.png":Dd,"../assets/img/cat20.png":Od,"../assets/img/cat21.png":Ld,"../assets/img/cat22.png":Bd,"../assets/img/cat23.png":Md,"../assets/img/cat24.png":Fd,"../assets/img/cat25.png":Ud,"../assets/img/cat26.png":Vd,"../assets/img/cat27.png":$d,"../assets/img/cat28.png":Hd,"../assets/img/cat29.png":Gd,"../assets/img/cat3.png":Qd,"../assets/img/cat30.png":jd,"../assets/img/cat4.png":zd,"../assets/img/cat5.png":Wd,"../assets/img/cat6.png":Kd,"../assets/img/cat7.png":qd,"../assets/img/cat8.png":Jd,"../assets/img/cat9.png":Yd,"../assets/img/catPoint.png":Xd,"../assets/img/catPointPlus.png":Zd,"../assets/img/catProfile01.png":ef,"../assets/img/catProfile02.png":tf,"../assets/img/cat_ico.png":nf})[`../assets/img/cat${L}.png`],import.meta.url).href}catch{return`/src/assets/img/cat${L}.png`}},P=()=>{c.value=!1,f.value=null},T=L=>{L==="exchange"?e.push("/exchange"):L==="catcraft"&&(l.value="catcraft")};return(L,Q)=>(M(),F("div",ZG,[Ge(Yn,{catCount:i.value},null,8,["catCount"]),d("main",eQ,[d("div",tQ,[d("button",{class:Ne(["tabButton",{active:l.value==="exchange"}]),onClick:Q[0]||(Q[0]=q=>T("exchange"))}," Exchange ",2),d("button",{class:Ne(["tabButton",{active:l.value==="catcraft"}]),onClick:Q[1]||(Q[1]=q=>T("catcraft"))}," Cat craft ",2)]),Q[4]||(Q[4]=d("div",{class:"catSilhouette"},[d("img",{src:XG,alt:"Cat",class:"catShape"})],-1)),d("div",nQ,[d("div",{class:Ne(["materialItem",{insufficient:!E.value}])},[d("img",{src:Th,alt:t.value.coin,class:"materialIcon"},null,8,sQ),d("span",rQ,[d("span",iQ,_(r.value),1),Yl(" / "+_(o.value),1)])],2),d("div",{class:Ne(["materialItem",{insufficient:!v.value}])},[Q[3]||(Q[3]=d("img",{src:uT,alt:"Cat",class:"materialIcon"},null,-1)),d("span",oQ,[d("span",aQ,_(i.value),1),Yl(" / "+_(a.value),1)])],2)]),d("button",{class:Ne(["createButton",{disabled:!m.value}]),onClick:p,disabled:!m.value},_(t.value.createCat),11,lQ)]),Ge(Xn),c.value?(M(),F("div",{key:0,class:"popupOverlay",onClick:P},[d("div",{class:Ne(["popupContent",`rarity-${f.value}`]),onClick:Q[2]||(Q[2]=ms(()=>{},["stop"]))},[d("div",{class:"popupCatImage",style:Tt(f.value?Le(Ec)(f.value):{})},[d("img",{src:w(h.value),alt:""},null,8,cQ)],4),f.value?(M(),F("div",{key:0,class:"rarityBadge",style:Tt(Le(Ec)(f.value))},_(Le(ty)(f.value)),5)):ue("",!0),d("h2",uQ,_(t.value.createCatSuccess),1),d("p",hQ,_(t.value.newCatAdded),1),d("button",{class:"popupCloseBtn",onClick:P},_(t.value.confirm),1)],2)])):ue("",!0)]))}},fQ=zt(dQ,[["__scopeId","data-v-ba848801"]]),pQ={class:"settingsPage"},gQ={class:"mainContent"},mQ={class:"settingGroup"},yQ={class:"settingGroup"},vQ={class:"settingLabel"},AQ={class:"settingInputWrapper"},wQ={key:0,class:"dropdownMenu"},_Q=["onClick"],EQ={class:"settingGroup"},bQ={class:"settingLabel"},IQ={class:"settingInputWrapper"},CQ={key:0,class:"dropdownMenu"},TQ=["onClick"],SQ={class:"settingSection"},PQ={class:"sectionTitle"},RQ={key:0,class:"walletConnectedCard"},xQ={class:"walletStatusHeader"},kQ={class:"walletStatusIndicator"},NQ=["title"],DQ={class:"walletInfo"},OQ={class:"walletInfoRow"},LQ={class:"walletInfoLabel"},BQ={class:"walletInfoValue"},MQ={class:"walletAddressText"},FQ=["title"],UQ={class:"walletInfoRow"},VQ={class:"walletInfoLabel"},$Q={class:"walletBalanceText"},HQ={key:1,class:"walletNotConnectedCard"},GQ={class:"walletNotConnectedText"},QQ={class:"walletNotConnectedDesc"},jQ=["disabled"],zQ={key:0},WQ={key:1},KQ={key:0,class:"walletErrorMsg"},qQ={key:0,class:"inviteSection"},JQ={class:"inviteCard"},YQ={class:"inviteTitle"},XQ={class:"inviteDescription"},ZQ={class:"inviteCodeSection"},ej={class:"inviteCodeLabel"},tj={class:"inviteCodeBox"},nj={class:"inviteCode"},sj=["title"],rj={class:"shareButtons"},ij={class:"rewardInfo"},oj={class:"rewardItem"},aj={class:"rewardText"},lj={class:"rewardTitle"},cj={class:"rewardDesc"},uj={class:"rewardItem"},hj={class:"rewardText"},dj={class:"rewardTitle"},fj={class:"inviteStats"},pj={class:"statsTitle"},gj={class:"statsValue"},mj={class:"statsNumber"},yj={class:"statsLabel"},vj={class:"settingGroup"},Aj={class:"settingLabel"},wj={class:"settingGroup"},_j={class:"depositPopupHeader"},Ej={class:"depositPopupTitle"},bj={class:"depositPopupContent"},Ij={class:"depositPopupDesc"},Cj={class:"depositOptions"},Tj={class:"depositOptionInfo"},Sj={class:"depositOptionDesc"},Pj={class:"depositOptionInfo"},Rj={class:"depositOptionDesc"},xj={class:"depositPopupFooter"},kj={class:"depositPopupNote"},Nj={__name:"SettingsPage",setup(n){const e=bn(),t=un(),s=he(()=>Es()),r=he(()=>t.state.coins),i=$(null),o=$(localStorage.getItem("appLanguage")||"English"),a=$("Busan"),l=$(!1),c=$(!1),h=$(!1);$("");const f=$(!1),p=$(""),m=he(()=>t.state.walletAddress),E=he(()=>t.state.userBalance),v=he(()=>t.state.isWalletConnected),A=$(!1),w=$(""),P=$({inviteCode:"",totalReferrals:0,referrals:[]}),T=["English",""],L=["","","",""],Q=he(()=>s.value),q=V=>{o.value=V,l.value=!1,localStorage.setItem("appLanguage",V)};Lt(async()=>{const V=_t();V&&(i.value=V,r.value=V.gameData?.coins||0,w.value=rT(V.id),P.value=bw(V.id));const O=localStorage.getItem("appLanguage");O?o.value=O:(o.value="English",localStorage.setItem("appLanguage","English")),x();const K=()=>{t.loadCurrentUser(),i.value=_t(),i.value&&(P.value=bw(i.value.id))};window.addEventListener("userDataUpdated",K),cn(()=>{window.removeEventListener("userDataUpdated",K)})});const x=()=>{if(!i.value)return;const V=new Date().toDateString(),O=localStorage.getItem(`checkIn_${i.value.id}`);h.value=O===V},I=async()=>{try{if(f.value=!0,p.value="",!qa()){p.value=s.value.walletNotInstalled,confirm(s.value.installMetaMask)&&window.open("https://metamask.io/download/","_blank");return}const V=await t.connectWalletToApp();V.success?(p.value="",alert(s.value.walletConnected)):(p.value=V.error||s.value.walletConnectFailed,V.needInstall&&confirm(s.value.installMetaMask)&&window.open("https://metamask.io/download/","_blank"))}catch(V){console.error("  :",V),p.value=s.value.walletConnectError}finally{f.value=!1}},C=()=>{confirm(s.value.disconnectWalletConfirm)&&(t.disconnectWalletFromApp(),e.push("/login"))},S=async()=>{if(m.value)try{await navigator.clipboard.writeText(m.value),alert(s.value.walletAddressCopied)}catch(V){console.error(" :",V),alert(s.value.copyFailed)}},b=async()=>{await t.updateWalletBalance()},N=()=>{A.value=!0},k=()=>{A.value=!1},Ee=V=>{const K={phantom:{name:"Phantom",url:"https://phantom.app/",icon:"",description:s.value.goToPhantomWallet},upbit:{name:"Upbit",url:"https://upbit.com/",icon:"",description:s.value.goToUpbitExchange}}[V];if(K){const de=K.url;window.open(de,"_blank"),A.value=!1}},ne=async()=>{if(w.value)try{await navigator.clipboard.writeText(w.value),alert(s.value.codeCopied||"  .")}catch(V){console.error(" :",V),alert(" .")}};return(V,O)=>(M(),F("div",pQ,[Ge(Yn,{coinCount:r.value},null,8,["coinCount"]),d("main",gQ,[d("div",mQ,[d("button",{class:"userProfileBtn",onClick:O[0]||(O[0]=K=>Le(e).push("/profile"))},[O[8]||(O[8]=d("span",{class:"userProfileIcon"},"",-1)),d("span",null,_(s.value.userSettings),1),O[9]||(O[9]=d("span",{class:"arrowIcon"},"",-1))])]),d("div",yQ,[d("label",vQ,_(s.value.language),1),d("div",AQ,[d("div",{class:"settingInput",onClick:O[1]||(O[1]=K=>l.value=!l.value)},[d("span",null,_(o.value),1),O[10]||(O[10]=d("span",{class:"dropdownIcon"},"",-1))]),l.value?(M(),F("div",wQ,[(M(),F(ke,null,Xe(T,K=>d("div",{key:K,class:Ne(["dropdownItem",{active:o.value===K}]),onClick:de=>q(K)},_(K),11,_Q)),64))])):ue("",!0)])]),d("div",EQ,[d("label",bQ,_(Q.value.region),1),d("div",IQ,[d("div",{class:"settingInput",onClick:O[2]||(O[2]=K=>c.value=!c.value)},[d("span",null,_(a.value),1),O[11]||(O[11]=d("span",{class:"dropdownIcon"},"",-1))]),c.value?(M(),F("div",CQ,[(M(),F(ke,null,Xe(L,K=>d("div",{key:K,class:Ne(["dropdownItem",{active:a.value===K}]),onClick:de=>{a.value=K,c.value=!1}},_(K),11,TQ)),64))])):ue("",!0)])]),d("div",SQ,[d("h3",PQ,_(s.value.walletConnection),1),v.value?(M(),F("div",RQ,[d("div",xQ,[d("div",kQ,[O[12]||(O[12]=d("div",{class:"walletIndicatorDot"},null,-1)),d("span",null,_(s.value.connected),1)]),d("button",{class:"refreshBtn",onClick:b,title:s.value.refreshBalance},[...O[13]||(O[13]=[K_('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-70599fa5><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" data-v-70599fa5></path><path d="M21 3v5h-5" data-v-70599fa5></path><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" data-v-70599fa5></path><path d="M3 21v-5h5" data-v-70599fa5></path></svg>',1)])],8,NQ)]),d("div",DQ,[d("div",OQ,[d("span",LQ,_(s.value.address)+":",1),d("div",BQ,[d("span",MQ,_(m.value),1),d("button",{class:"walletCopyBtn",onClick:S,title:s.value.copy},[...O[14]||(O[14]=[d("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[d("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),d("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})],-1)])],8,FQ)])]),d("div",UQ,[d("span",VQ,_(s.value.balance)+":",1),d("span",$Q,_(E.value),1)])]),d("button",{class:"walletDepositBtn",onClick:N},[O[15]||(O[15]=d("svg",{class:"depositIcon",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[d("path",{d:"M12 2v20M2 12h20"})],-1)),d("span",null,_(s.value.depositFromWallet),1)]),d("button",{class:"walletDisconnectBtn",onClick:C},_(s.value.disconnect),1)])):(M(),F("div",HQ,[O[16]||(O[16]=d("div",{class:"walletNotConnectedIcon"},"",-1)),d("p",GQ,_(s.value.walletNotConnected),1),d("p",QQ,_(s.value.walletConnectDesc),1),d("button",{class:"walletConnectBtn",onClick:I,disabled:f.value},[f.value?(M(),F("span",WQ,_(s.value.connecting),1)):(M(),F("span",zQ,_(s.value.connectWallet),1))],8,jQ),p.value?(M(),F("div",KQ,_(p.value),1)):ue("",!0)]))]),i.value?(M(),F("div",qQ,[d("div",JQ,[d("h2",YQ,_(s.value.inviteFriends),1),d("p",XQ,_(s.value.inviteDescription),1),d("div",ZQ,[d("label",ej,_(s.value.inviteCode),1),d("div",tj,[d("span",nj,_(w.value),1),d("button",{class:"copyBtn",onClick:ne,title:s.value.copyInviteCode},"  ",8,sj)])]),d("div",rj,[d("button",{class:"shareBtn copyLinkBtn",onClick:ne},[O[17]||(O[17]=d("span",{class:"copyIcon"},"",-1)),d("span",null,_(s.value.copyLink||" "),1)])]),d("div",ij,[d("div",oj,[O[18]||(O[18]=d("span",{class:"rewardIcon"},"",-1)),d("div",aj,[d("div",lj,_(s.value.inviteReward),1),d("div",cj,_(s.value.inviteRewardDesc),1)])]),d("div",uj,[O[19]||(O[19]=d("span",{class:"rewardIcon"},"",-1)),d("div",hj,[d("div",dj,_(s.value.newUserReward),1)])])]),d("div",fj,[d("h3",pj,_(s.value.inviteStats),1),d("div",gj,[d("span",mj,_(P.value.totalReferrals),1),d("span",yj,_(s.value.invites),1)])])])])):ue("",!0),d("div",vj,[d("label",Aj,_(s.value.attendance),1),d("button",{class:"checkInBtn",onClick:O[3]||(O[3]=K=>Le(e).push("/attendance"))},_(s.value.doAttendanceCheck),1)]),d("div",wj,[d("button",{class:"nftBtn",onClick:O[4]||(O[4]=K=>Le(e).push("/nft"))}," NFT ")])]),Ge(Xn),A.value?(M(),F("div",{key:0,class:"depositPopupOverlay",onClick:k},[d("div",{class:"depositPopup",onClick:O[7]||(O[7]=ms(()=>{},["stop"]))},[d("div",_j,[d("h3",Ej,_(s.value.selectDepositMethod),1),d("button",{class:"depositPopupClose",onClick:k},"")]),d("div",bj,[d("p",Ij,_(s.value.selectExchangeToDeposit),1),d("div",Cj,[d("button",{class:"depositOption",onClick:O[5]||(O[5]=K=>Ee("phantom"))},[O[21]||(O[21]=d("div",{class:"depositOptionIcon"},"",-1)),d("div",Tj,[O[20]||(O[20]=d("div",{class:"depositOptionName"},"Phantom",-1)),d("div",Sj,_(s.value.goToPhantomWallet),1)]),O[22]||(O[22]=d("div",{class:"depositOptionArrow"},"",-1))]),d("button",{class:"depositOption",onClick:O[6]||(O[6]=K=>Ee("upbit"))},[O[24]||(O[24]=d("div",{class:"depositOptionIcon"},"",-1)),d("div",Pj,[O[23]||(O[23]=d("div",{class:"depositOptionName"},"Upbit",-1)),d("div",Rj,_(s.value.goToUpbitExchange),1)]),O[25]||(O[25]=d("div",{class:"depositOptionArrow"},"",-1))])]),d("div",xj,[d("p",kj," "+_(s.value.copyWalletAddressAndDeposit),1),d("button",{class:"depositCopyAddressBtn",onClick:S},_(s.value.copyWalletAddress),1)])])])])):ue("",!0)]))}},Dj=zt(Nj,[["__scopeId","data-v-70599fa5"]]),Oj={class:"profilePage"},Lj={class:"mainContent"},Bj={class:"profileHeader"},Mj={class:"profileImageWrapper"},Fj=["src","alt"],Uj={key:1,class:"profileImagePlaceholder"},Vj={class:"profileInfo"},$j={class:"userName"},Hj={class:"userEmail"},Gj={class:"settingGroup"},Qj={class:"settingLabel"},jj={class:"settingInput"},zj={class:"userId"},Wj={key:0,class:"statsSection"},Kj={class:"sectionTitle"},qj={class:"statsGrid"},Jj={class:"statCard"},Yj={class:"statInfo"},Xj={class:"statLabel"},Zj={class:"statValue"},ez={class:"statCard"},tz={class:"statInfo"},nz={class:"statLabel"},sz={class:"statValue"},rz={class:"statCard"},iz={class:"statInfo"},oz={class:"statLabel"},az={class:"statValue"},lz={class:"statCard"},cz={class:"statInfo"},uz={class:"statLabel"},hz={class:"statValue"},dz={class:"logoutSection"},fz={__name:"UserProfilePage",setup(n){const e=bn(),t=un(),{logout:s}=t,r=he(()=>t.state.coins),i=$(null),o=$(""),a=$(""),l=$(""),c=$(""),h=$(""),f={ko:{userProfile:" ",userID:"User ID",copySuccess:"User ID !",logout:"",logoutConfirm:"  ?",gameStats:" ",level:"",points:"",coins:"",catFragments:" ",back:" "},en:{userProfile:"User Profile",userID:"User ID",copySuccess:"User ID copied!",logout:"Logout",logoutConfirm:"Are you sure you want to logout?",gameStats:"Game Stats",level:"Level",points:"Points",coins:"Coins",catFragments:"Cat Fragments",back:" Back"}},p=he(()=>o.value===""?f.ko:f.en);Lt(()=>{const w=_t();w?(i.value=w,t.loadCurrentUser(),a.value=w.email||w.id||"",l.value=w.name||w.displayName||a.value.split("@")[0]||"User",c.value=w.photoURL||"",h.value=w.id||"ID"+String(Math.random()).substring(2,10)):e.push("/login");const P=localStorage.getItem("appLanguage");P?o.value=P:(o.value="English",localStorage.setItem("appLanguage","English"));const T=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",T),cn(()=>{window.removeEventListener("userDataUpdated",T)})});const m=()=>{window.history.length>1?e.back():e.push("/settings")},E=()=>{navigator.clipboard.writeText(h.value),alert(p.value.copySuccess)},v=()=>{confirm(p.value.logoutConfirm)&&(w1(),s(),e.push("/login"))},A=he(()=>i.value?{level:i.value.gameData?.level||1,points:i.value.gameData?.coins||0,coins:i.value.gameData?.totalCoin||0,catFragments:i.value.gameData?.catFragments||i.value.gameData?.catCount||0}:null);return(w,P)=>(M(),F("div",Oj,[Ge(Yn,{coinCount:r.value},null,8,["coinCount"]),d("main",Lj,[d("button",{class:"backBtn",onClick:m},_(p.value.back),1),d("div",Bj,[d("div",Mj,[c.value?(M(),F("img",{key:0,src:c.value,alt:l.value,class:"profileImage"},null,8,Fj)):(M(),F("div",Uj,_(l.value.charAt(0).toUpperCase()),1))]),d("div",Vj,[d("h2",$j,_(l.value),1),d("p",Hj,_(a.value),1)])]),d("div",Gj,[d("label",Qj,_(p.value.userID),1),d("div",jj,[d("span",zj,_(h.value),1),d("button",{class:"copyBtn",onClick:E},"")])]),A.value?(M(),F("div",Wj,[d("h3",Kj,_(p.value.gameStats),1),d("div",qj,[d("div",Jj,[P[0]||(P[0]=d("div",{class:"statIcon"},"",-1)),d("div",Yj,[d("div",Xj,_(p.value.level),1),d("div",Zj,_(A.value.level),1)])]),d("div",ez,[P[1]||(P[1]=d("div",{class:"statIcon"},"",-1)),d("div",tz,[d("div",nz,_(p.value.points),1),d("div",sz,_(A.value.points.toLocaleString()),1)])]),d("div",rz,[P[2]||(P[2]=d("div",{class:"statIcon"},"",-1)),d("div",iz,[d("div",oz,_(p.value.coins),1),d("div",az,_(A.value.coins.toLocaleString()),1)])]),d("div",lz,[P[3]||(P[3]=d("div",{class:"statIcon"},"",-1)),d("div",cz,[d("div",uz,_(p.value.catFragments),1),d("div",hz,_(A.value.catFragments.toLocaleString()),1)])])])])):ue("",!0),d("div",dz,[d("button",{class:"logoutBtn",onClick:v},_(p.value.logout),1)])]),Ge(Xn)]))}},pz=zt(fz,[["__scopeId","data-v-ca4a2538"]]),gz={class:"attendancePage"},mz={class:"mainContent"},yz={class:"attendanceInfo"},vz={class:"infoItem"},Az={class:"infoValue"},wz={class:"infoItem"},_z={class:"infoValue"},Ez={key:0,class:"attendanceMessage"},bz={class:"attendanceGrid"},Iz=["onClick"],Cz={class:"dayNumber"},Tz={class:"rewardIcon"},Sz={key:0,class:"specialStar"},Pz={class:"rewardAmount"},Rz={__name:"AttendancePage",setup(n){const e=un(),t=bn(),s=he(()=>e.state.coins),r=$(null),i=$(0),o=$([]),a=$(null),l=$(0),c=$(Array.from({length:20},(w,P)=>({day:P+1,reward:"1K",rewardType:"P",hasSpecial:[5,9,10,11,16,17].includes(P+1),isChecked:!1}))),h=(w,P)=>new Date(w).toDateString()===new Date(P).toDateString(),f=()=>{t.go(-1)},p=async w=>{if(!r.value){alert(" .");return}const P=new Date;P.toDateString();const T=P.toISOString();if(a.value&&h(a.value,T)){alert("   !   .");return}const L=c.value[w];if(L.isChecked){alert("  .");return}const Q=o.value.length;if(a.value){const I=new Date(a.value),C=Math.floor((P-I)/(1e3*60*60*24));if(C>0&&w!==Q){alert("   .");return}C===1?l.value+=1:C>1&&(l.value=1)}else l.value=1;L.isChecked=!0,o.value.push(L.day),i.value=o.value.length;const q=1e3,x=s.value+q;a.value=T,r.value&&(await e.updateCoins(x),await m()),alert(`Day ${L.day}  ! ${q}  !`),window.dispatchEvent(new Event("userDataUpdated"))},m=async()=>{if(r.value){const w={checkedDays:o.value,attendanceDays:i.value,consecutiveDays:l.value,lastCheckInDate:a.value,lastUpdate:new Date().toISOString()};localStorage.setItem(`attendance_${r.value.id}`,JSON.stringify(w)),await e.updateGameData({attendance:w})}},E=async()=>{if(r.value){let w=null;if(r.value.gameData?.attendance&&(w=r.value.gameData.attendance),!w){const P=localStorage.getItem(`attendance_${r.value.id}`);P&&(w=JSON.parse(P),w&&await e.updateGameData({attendance:w}))}w&&(o.value=w.checkedDays||[],i.value=w.attendanceDays||0,l.value=w.consecutiveDays||0,a.value=w.lastCheckInDate||null,o.value.forEach(P=>{const T=P-1;c.value[T]&&(c.value[T].isChecked=!0)}))}},v=he(()=>{if(!a.value)return!0;const w=new Date,P=new Date(a.value),T=w.toDateString(),L=P.toDateString();return T!==L}),A=he(()=>o.value.length);return Lt(async()=>{r.value=_t(),e.loadCurrentUser(),r.value&&await E();const w=()=>{e.loadCurrentUser()};window.addEventListener("userDataUpdated",w),cn(()=>{window.removeEventListener("userDataUpdated",w)})}),(w,P)=>(M(),F("div",gz,[Ge(Yn,{coinCount:s.value},null,8,["coinCount"]),d("main",mz,[d("button",{class:"backBtn",onClick:f}," "),P[3]||(P[3]=d("h1",{class:"pageTitle"},"",-1)),d("div",yz,[d("div",vz,[P[0]||(P[0]=d("span",{class:"infoLabel"}," :",-1)),d("span",Az,_(l.value)+"",1)]),d("div",wz,[P[1]||(P[1]=d("span",{class:"infoLabel"}," :",-1)),d("span",_z,_(i.value)+"",1)])]),v.value?ue("",!0):(M(),F("div",Ez,"   !   . ")),d("div",bz,[(M(!0),F(ke,null,Xe(c.value,(T,L)=>(M(),F("div",{key:T.day,class:Ne(["dayCell",{checked:T.isChecked,disabled:!v.value&&!T.isChecked||L!==A.value&&!T.isChecked,nextCheckable:v.value&&L===A.value&&!T.isChecked}]),onClick:Q=>v.value&&(L===A.value||T.isChecked)?p(L):null},[d("div",Cz,"Day "+_(T.day),1),d("div",Tz,[P[2]||(P[2]=d("div",{class:"iconCircle"},"P",-1)),T.hasSpecial&&!T.isChecked?(M(),F("span",Sz,"")):ue("",!0)]),d("div",Pz,_(T.reward),1)],10,Iz))),128))])]),Ge(Xn)]))}},xz=zt(Rz,[["__scopeId","data-v-c440a219"]]),Wo=()=>{const n=localStorage.getItem("marketplace");return n?JSON.parse(n):[]},ny=n=>{localStorage.setItem("marketplace",JSON.stringify(n))},kz=(n,e,t)=>{const s=Wo(),r={id:`market_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sellerAddress:t,nftId:n.id,nftData:{...n},price:e,priceType:"COIN",listedAt:Date.now(),status:"listed"};return s.push(r),ny(s),r},Nz=(n,e)=>{const t=Wo(),s=t.findIndex(i=>i.id===n&&i.status==="listed");if(s===-1)return{success:!1,error:"  NFT ."};const r=t[s];return r.sellerAddress===e?{success:!1,error:" NFT   ."}:(t[s].status="sold",t[s].soldAt=Date.now(),t[s].buyerAddress=e,ny(t),{success:!0,listing:r,nftData:r.nftData})},Dz=(n,e)=>{const t=Wo(),s=t.findIndex(r=>r.id===n&&r.sellerAddress===e&&r.status==="listed");return s===-1?{success:!1,error:"  NFT ."}:(t[s].status="cancelled",t[s].cancelledAt=Date.now(),ny(t),{success:!0,listing:t[s]})},Oz=n=>Wo().filter(t=>t.sellerAddress===n&&t.status==="listed"),Lz=()=>Wo().filter(e=>e.status==="listed"),Bz=n=>Wo().some(t=>t.nftId===n&&t.status==="listed"),Mz=()=>{const n=Wo(),e=n.filter(s=>s.status==="listed"),t=n.filter(s=>s.status==="sold");return{totalListings:n.length,activeListings:e.length,soldListings:t.length,totalVolume:t.reduce((s,r)=>s+(r.price||0),0)}},Fz="/tdl/assets/btc-DC8WHF5v.png",Uz="/tdl/assets/eth-DHgp7Wvq.png",Vz="/tdl/assets/BTC_line-DiGuGbEI.png",$z="data:image/png;base64,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",Hz={class:"nftPage"},Gz={class:"mainContent nftWrap"},Qz={class:"tabMenu"},jz={key:0,class:"walletContent"},zz={class:"walletSection"},Wz={class:"walletBalance"},Kz={class:"btcInfo"},qz={class:"change positive"},Jz={key:0,class:"ethInfo"},Yz={class:"subTabMenu"},Xz={key:0,class:"itemList"},Zz={class:"itemIcon"},eW={class:"itemInfo"},tW={class:"itemSymbol"},nW={class:"itemName"},sW={class:"itemChart"},rW={class:"itemPrice"},iW={class:"price"},oW={key:1,class:"nftList"},aW=["onClick"],lW={class:"nftThumbnail"},cW={class:"nftInfo"},uW={class:"nftId"},hW={class:"collectionName"},dW={class:"nftValue"},fW={class:"nftStars"},pW={class:"nftLevel"},gW={key:0,class:"emptyNFTs"},mW={class:"emptyText"},yW={key:1,class:"marketplaceContent"},vW={class:"marketplaceHeader"},AW={class:"marketplaceStats"},wW={class:"filterBar"},_W={value:"all"},EW={value:"common"},bW={value:"rare"},IW={value:"epic"},CW={value:"legendary"},TW={value:"all"},SW={value:"low"},PW={value:"mid"},RW={value:"high"},xW={value:"newest"},kW={value:"oldest"},NW={value:"priceLow"},DW={value:"priceHigh"},OW={value:"level"},LW={value:"stars"},BW={key:0,class:"nftGrid"},MW=["onClick"],FW={class:"nftCardImage"},UW=["src"],VW={class:"nftCardBadges"},$W={class:"starBadge"},HW={class:"levelBadge"},GW={class:"nftCardInfo"},QW={class:"nftCardName"},jW={class:"nftCardPrice"},zW={class:"priceLabel"},WW={class:"priceValue"},KW=["onClick"],qW={key:1,class:"emptyMarketplace"},JW={class:"emptyText"},YW={key:2,class:"myNFTsContent"},XW={class:"sectionHeader"},ZW={class:"myCoinBalance"},eK={key:0,class:"nftGrid"},tK=["onClick"],nK={class:"nftCardImage"},sK=["src"],rK={class:"nftCardBadges"},iK={class:"starBadge"},oK={class:"levelBadge"},aK={class:"nftCardInfo"},lK={class:"nftCardName"},cK=["onClick"],uK={key:1,class:"emptyMarketplace"},hK={class:"emptyText"},dK={key:3,class:"myListingsContent"},fK={class:"sectionHeader"},pK={key:0,class:"nftGrid"},gK={class:"nftCardImage"},mK=["src"],yK={class:"nftCardBadges"},vK={class:"starBadge"},AK={class:"levelBadge"},wK={class:"nftCardInfo"},_K={class:"nftCardName"},EK={class:"nftCardPrice"},bK={class:"priceLabel"},IK={class:"priceValue"},CK=["onClick"],TK={key:1,class:"emptyMarketplace"},SK={class:"emptyText"},PK={class:"modalHeader"},RK={class:"modalTitle"},xK={class:"modalBody"},kK={class:"sellNFTPreview"},NK=["src"],DK={class:"sellNFTInfo"},OK={class:"sellNFTName"},LK={class:"sellNFTDetails"},BK={class:"sellPriceInput"},MK={class:"inputLabel"},FK=["placeholder"],UK={class:"priceHint"},VK={class:"modalFooter"},$K={class:"modalHeader"},HK={class:"modalTitle"},GK={class:"modalBody"},QK={class:"buyNFTPreview"},jK=["src"],zK={class:"buyNFTInfo"},WK={class:"buyNFTName"},KK={class:"buyNFTDetails"},qK={class:"buyPriceInfo"},JK={class:"priceRow"},YK={class:"priceLabel"},XK={class:"priceValue"},ZK={class:"priceRow"},eq={class:"priceLabel"},tq={key:0,class:"insufficientWarning"},nq={class:"modalFooter"},sq=["disabled"],rq={class:"modalHeader"},iq={class:"modalTitle"},oq={class:"modalBody"},aq={class:"detailNFTImage"},lq=["src"],cq={class:"detailBadges"},uq={class:"detailStarBadge"},hq={class:"detailLevelBadge"},dq={class:"detailInfo"},fq={class:"detailRow"},pq={class:"detailValue"},gq={class:"detailRow"},mq={class:"detailLabel"},yq={class:"detailValue"},vq={class:"popupHeader"},Aq={class:"popupTitle"},wq={class:"popupBody"},_q={class:"popupMessage"},Eq={class:"popupActions"},bq={class:"popupHeader"},Iq={class:"popupTitle"},Cq={class:"popupBody"},Tq={class:"popupMessage"},Sq={class:"popupActions"},Pq={class:"popupHeader"},Rq={class:"popupTitle"},xq={class:"popupBody"},kq={class:"popupMessage"},Nq={class:"popupActions"},Dq={class:"searchModalHeader"},Oq={class:"searchModalTitle"},Lq={class:"searchModalBody"},Bq=["placeholder"],Mq={class:"searchModalFooter"},Fq={__name:"NFTPage",setup(n){const e=un(),t=he(()=>e.state.coins),s=he(()=>e.state.totalCoin),r=$("wallet"),i=$("$ 5,323.00"),o=$("0.0000 ETH"),a=$("0.00335"),l=$("+6.54%"),c=$(!1),h=$(!1),f=$(!1),p=$([]),m=$([]),E=$([]),v=$(!1),A=$(!1),w=$(!1),P=$(null),T=$(""),L=$("all"),Q=$("all"),q=$("newest"),x=$(""),I=$(!1),C=$("tokens"),S=$(null),b=he(()=>Es()),N=z=>{try{return new URL(Object.assign({"../assets/img/cat1.png":Ed,"../assets/img/cat10.png":bd,"../assets/img/cat11.png":Id,"../assets/img/cat12.png":Cd,"../assets/img/cat13.png":Td,"../assets/img/cat14.png":Sd,"../assets/img/cat15.png":Pd,"../assets/img/cat16.png":Rd,"../assets/img/cat17.png":xd,"../assets/img/cat18.png":kd,"../assets/img/cat19.png":Nd,"../assets/img/cat2.png":Dd,"../assets/img/cat20.png":Od,"../assets/img/cat21.png":Ld,"../assets/img/cat22.png":Bd,"../assets/img/cat23.png":Md,"../assets/img/cat24.png":Fd,"../assets/img/cat25.png":Ud,"../assets/img/cat26.png":Vd,"../assets/img/cat27.png":$d,"../assets/img/cat28.png":Hd,"../assets/img/cat29.png":Gd,"../assets/img/cat3.png":Qd,"../assets/img/cat30.png":jd,"../assets/img/cat4.png":zd,"../assets/img/cat5.png":Wd,"../assets/img/cat6.png":Kd,"../assets/img/cat7.png":qd,"../assets/img/cat8.png":Jd,"../assets/img/cat9.png":Yd,"../assets/img/catPoint.png":Xd,"../assets/img/catPointPlus.png":Zd,"../assets/img/catProfile01.png":ef,"../assets/img/catProfile02.png":tf,"../assets/img/cat_ico.png":nf})[`../assets/img/cat${z}.png`],import.meta.url).href}catch{return`/src/assets/img/cat${z}.png`}},k=()=>{p.value=Lz(),S.value&&(E.value=Oz(S.value.walletAddress||S.value.id),m.value=(S.value.gameData?.inventory||[]).filter(z=>!Bz(z.id)))},Ee=he(()=>{let z=[...p.value];if(x.value.trim()){const U=x.value.toLowerCase();z=z.filter(j=>j.nftData.name.toLowerCase().includes(U)||String(j.nftData.imageId).includes(U))}return L.value!=="all"&&(z=z.filter(U=>(U.nftData.rarity||Ye.COMMON)===L.value)),Q.value!=="all"&&(Q.value==="low"?z=z.filter(U=>U.price<1e3):Q.value==="mid"?z=z.filter(U=>U.price>=1e3&&U.price<5e3):Q.value==="high"&&(z=z.filter(U=>U.price>=5e3))),z=[...z].sort((U,j)=>{switch(q.value){case"newest":return j.listedAt-U.listedAt;case"oldest":return U.listedAt-j.listedAt;case"priceLow":return U.price-j.price;case"priceHigh":return j.price-U.price;case"level":return(j.nftData.level||1)-(U.nftData.level||1);case"stars":return(j.nftData.stars||0)-(U.nftData.stars||0);default:return 0}}),z}),ne=z=>{P.value=z,T.value="",v.value=!0},V=()=>{v.value=!1,P.value=null,T.value=""},O=async()=>{if(!P.value)return;const z=parseFloat(T.value);if(!z||z<=0){alert(b.value.enterValidPrice);return}if(!S.value){alert(b.value.loginRequired);return}const U=S.value.walletAddress||S.value.id;kz(P.value,z,U);const ee=(S.value.gameData?.inventory||[]).filter(oe=>oe.id!==P.value.id);await e.updateGameData({inventory:ee}),k(),alert(`${b.value.nftListedOnMarketplace} (${b.value.price}: ${z.toLocaleString()} ${b.value.coin})`),V()},K=z=>{P.value=z,A.value=!0},de=()=>{A.value=!1,P.value=null},Ue=async()=>{if(!P.value||!S.value)return;const z=P.value,U=S.value.walletAddress||S.value.id,j=S.value.gameData?.totalCoin||0;if(j<z.price){alert(`${b.value.insufficientCoinsForPurchase} (${b.value.required}: ${z.price.toLocaleString()}, ${b.value.ownedCoins}: ${j.toLocaleString()})`);return}const ee=Nz(z.id,U);if(!ee.success){alert(ee.error);return}const oe=S.value.gameData?.inventory||[];oe.unshift(ee.nftData),await e.updateGameData({inventory:oe,totalCoin:j-z.price});const{getAllUsers:ae}=await v1(async()=>{const{getAllUsers:_e}=await Promise.resolve().then(()=>vx);return{getAllUsers:_e}},void 0),ge=ae().find(_e=>(_e.walletAddress||_e.id)===z.sellerAddress);if(ge){const _e=ge.gameData?.totalCoin||0;await tc(ge.id,{totalCoin:_e+z.price}),window.dispatchEvent(new CustomEvent("userDataUpdated"))}k(),alert(`${b.value.nftPurchased} (${z.price.toLocaleString()} ${b.value.coinsPaid})`),de()},Te=async z=>{if(!confirm(b.value.confirmCancelSale)||!S.value)return;const U=S.value.walletAddress||S.value.id,j=Dz(z.id,U);if(!j.success){alert(j.error);return}const ee=S.value.gameData?.inventory||[];ee.unshift(z.nftData),await e.updateGameData({inventory:ee}),k(),alert(b.value.saleCancelled)},Ve=z=>{P.value=z,w.value=!0},ze=()=>{w.value=!1,P.value=null},ft=()=>{x.value="",L.value="all",Q.value="all",q.value="newest"},pt=he(()=>Mz()),yt=$([{id:1,name:"Bitcoin",symbol:"BTC",price:"36,590.00",change:"+6.21%",isPositive:!0,image:Fz,lineImage:Vz},{id:2,name:"Ethereum",symbol:"ETH",price:"2,590.00",change:"+5.21%",isPositive:!0,image:Uz,lineImage:$z}]),Z=he(()=>S.value?(S.value.gameData?.inventory||[]).slice(0,10):[]),pe=()=>S.value?`$ ${((S.value.gameData?.totalCoin||0)*.01).toFixed(2)}`:"$ 0.00",ce=()=>{h.value=!0},ve=()=>{c.value=!0},Qe=()=>{f.value=!0},D=()=>{h.value=!1},B=()=>{c.value=!1},G=()=>{f.value=!1};Lt(()=>{S.value=_t(),e.loadCurrentUser(),S.value&&(i.value=pe(),e.isWalletConnected&&e.walletAddress&&(o.value=e.userBalance)),k();const z=()=>{S.value=_t(),e.loadCurrentUser(),S.value&&(i.value=pe()),k()};window.addEventListener("userDataUpdated",z),cn(()=>{window.removeEventListener("userDataUpdated",z)})});const te=z=>{r.value=z,k()};return(z,U)=>(M(),F("div",Hz,[Ge(Yn,{coinCount:t.value},null,8,["coinCount"]),d("main",Gz,[d("div",Qz,[d("button",{class:Ne(["tab",{active:r.value==="wallet"}]),onClick:U[0]||(U[0]=j=>te("wallet"))},_(b.value.wallet),3),d("button",{class:Ne(["tab",{active:r.value==="marketplace"}]),onClick:U[1]||(U[1]=j=>te("marketplace"))},_(b.value.marketplace),3),d("button",{class:Ne(["tab",{active:r.value==="myNFTs"}]),onClick:U[2]||(U[2]=j=>te("myNFTs"))},_(b.value.myNFTs),3),d("button",{class:Ne(["tab",{active:r.value==="myListings"}]),onClick:U[3]||(U[3]=j=>te("myListings"))},_(b.value.myListings),3)]),r.value==="wallet"?(M(),F("div",jz,[d("div",zz,[U[23]||(U[23]=d("div",{class:"walletLabel"},"Current Wallet Balance",-1)),d("div",Wz,_(i.value),1),d("div",Kz,[d("span",null,"BTC : "+_(a.value),1),d("span",qz,_(l.value),1)]),o.value!=="0.0000 ETH"?(M(),F("div",Jz,[d("span",null,"ETH : "+_(o.value),1)])):ue("",!0)]),d("div",{class:"actionButtons"},[d("button",{class:"actionBtn sendBtn",onClick:ce},[...U[24]||(U[24]=[d("div",{class:"btnIcon"},null,-1),d("span",{class:"btnLabel"},"Send",-1)])]),d("button",{class:"actionBtn buyBtn",onClick:ve},[...U[25]||(U[25]=[d("div",{class:"btnIcon"},null,-1),d("span",{class:"btnLabel"},"Buy",-1)])]),d("button",{class:"actionBtn receiveBtn",onClick:Qe},[...U[26]||(U[26]=[d("div",{class:"btnIcon"},null,-1),d("span",{class:"btnLabel"},"Receive",-1)])])]),d("div",Yz,[d("button",{class:Ne(["subTab",{active:C.value==="tokens"}]),onClick:U[4]||(U[4]=j=>C.value="tokens")}," Tokens ",2),d("button",{class:Ne(["subTab",{active:C.value==="nfts"}]),onClick:U[5]||(U[5]=j=>C.value="nfts")}," NFTs ",2)]),C.value==="tokens"?(M(),F("div",Xz,[(M(!0),F(ke,null,Xe(yt.value,j=>(M(),F("div",{key:j.id,class:"item"},[d("div",Zz,[d("div",{class:"iconCircle",style:Tt({backgroundImage:`url(${j.image})`})},null,4)]),d("div",eW,[d("div",tW,_(j.symbol),1),d("div",nW,_(j.name),1)]),d("div",sW,[d("div",{class:"chartLine",style:Tt({backgroundImage:`url(${j.lineImage})`})},null,4)]),d("div",rW,[d("div",iW,"$"+_(j.price),1),d("div",{class:Ne(["change",{positive:j.isPositive,negative:!j.isPositive}])},_(j.change),3)])]))),128))])):ue("",!0),C.value==="nfts"?(M(),F("div",oW,[(M(!0),F(ke,null,Xe(Z.value,j=>(M(),F("div",{key:j.id,class:"nftItem",onClick:ee=>Ve(j)},[d("div",lW,[d("div",{class:"thumbnailPlaceholder",style:Tt({backgroundImage:`url(${N(j.imageId||j.id)})`})},null,4)]),d("div",cW,[d("div",uW,"#"+_(j.id),1),d("div",hW,_(j.name),1)]),d("div",dW,[d("div",fW,[(M(),F(ke,null,Xe(5,ee=>d("span",{key:ee,class:"star"},_(ee<=(j.stars||0)?"":""),1)),64))]),d("div",pW,"Lv "+_(j.level||1),1)])],8,aW))),128)),Z.value.length===0?(M(),F("div",gW,[U[27]||(U[27]=d("div",{class:"emptyIcon"},"",-1)),d("div",mW,_(b.value.noNFTsInWallet),1)])):ue("",!0)])):ue("",!0)])):ue("",!0),r.value==="marketplace"?(M(),F("div",yW,[d("div",vW,[d("div",AW,[d("span",null,_(b.value.onSale)+": "+_(pt.value.activeListings)+_(b.value.itemsCount),1),d("span",null,_(b.value.totalVolume)+": "+_(pt.value.totalVolume.toLocaleString())+" "+_(b.value.coin),1)]),d("button",{class:"searchBtn",onClick:U[6]||(U[6]=j=>I.value=!0)},[U[28]||(U[28]=d("span",null,"",-1)),d("span",null,_(b.value.searchNFT),1)])]),d("div",wW,[tn(d("select",{"onUpdate:modelValue":U[7]||(U[7]=j=>L.value=j),class:"filterSelect"},[d("option",_W,_(b.value.allRarity),1),d("option",EW,_(b.value.common),1),d("option",bW,_(b.value.rare),1),d("option",IW,_(b.value.epic),1),d("option",CW,_(b.value.legendary),1)],512),[[Pi,L.value]]),tn(d("select",{"onUpdate:modelValue":U[8]||(U[8]=j=>Q.value=j),class:"filterSelect"},[d("option",TW,_(b.value.allPrice),1),d("option",SW,_(b.value.under1000Coins),1),d("option",PW,_(b.value.midPriceRange),1),d("option",RW,_(b.value.over5000Coins),1)],512),[[Pi,Q.value]]),tn(d("select",{"onUpdate:modelValue":U[9]||(U[9]=j=>q.value=j),class:"filterSelect"},[d("option",xW,_(b.value.newest),1),d("option",kW,_(b.value.oldest),1),d("option",NW,_(b.value.priceLow),1),d("option",DW,_(b.value.priceHigh),1),d("option",OW,_(b.value.levelHigh),1),d("option",LW,_(b.value.starsHigh),1)],512),[[Pi,q.value]])]),Ee.value.length>0?(M(),F("div",BW,[(M(!0),F(ke,null,Xe(Ee.value,j=>(M(),F("div",{key:j.id,class:"nftCard",onClick:ee=>Ve(j.nftData)},[d("div",FW,[d("img",{src:N(j.nftData.imageId||j.nftData.id),alt:"NFT"},null,8,UW),d("div",VW,[d("div",$W,[(M(),F(ke,null,Xe(5,ee=>d("span",{key:ee,class:"star"},_(ee<=(j.nftData.stars||0)?"":""),1)),64))]),d("div",HW,"Lv "+_(j.nftData.level||1),1)])]),d("div",GW,[d("div",QW,_(j.nftData.name),1),d("div",jW,[d("span",zW,_(b.value.price)+":",1),d("span",WW,_(j.price.toLocaleString())+" "+_(b.value.coin),1)])]),d("button",{class:"buyBtn",onClick:ms(ee=>K(j),["stop"])},_(b.value.buy),9,KW)],8,MW))),128))])):(M(),F("div",qW,[U[29]||(U[29]=d("div",{class:"emptyIcon"},"",-1)),d("div",JW,_(b.value.noNFTsOnSale),1)]))])):ue("",!0),r.value==="myNFTs"?(M(),F("div",YW,[d("div",XW,[d("h3",null,_(b.value.myNFTsCount)+" ("+_(m.value.length)+_(b.value.itemsCount)+")",1),d("div",ZW,_(b.value.ownedCoins)+": "+_(s.value.toLocaleString()),1)]),m.value.length>0?(M(),F("div",eK,[(M(!0),F(ke,null,Xe(m.value,j=>(M(),F("div",{key:j.id,class:"nftCard",onClick:ee=>Ve(j)},[d("div",nK,[d("img",{src:N(j.imageId||j.id),alt:"NFT"},null,8,sK),d("div",rK,[j.rarity?(M(),F("div",{key:0,class:"rarityBadge",style:Tt(Le(Ec)(j.rarity))},_(Le(ty)(j.rarity)),5)):ue("",!0),d("div",iK,[(M(),F(ke,null,Xe(5,ee=>d("span",{key:ee,class:"star"},_(ee<=(j.stars||0)?"":""),1)),64))]),d("div",oK,"Lv "+_(j.level||1),1)])]),d("div",aK,[d("div",lK,_(j.name),1)]),d("button",{class:"sellBtn",onClick:ms(ee=>ne(j),["stop"])},_(b.value.sell),9,cK)],8,tK))),128))])):(M(),F("div",uK,[U[30]||(U[30]=d("div",{class:"emptyIcon"},"",-1)),d("div",hK,_(b.value.noNFTsAvailableForSale),1)]))])):ue("",!0),r.value==="myListings"?(M(),F("div",dK,[d("div",fK,[d("h3",null,_(b.value.mySalesList)+" ("+_(E.value.length)+_(b.value.itemsCount)+")",1)]),E.value.length>0?(M(),F("div",pK,[(M(!0),F(ke,null,Xe(E.value,j=>(M(),F("div",{key:j.id,class:"nftCard"},[d("div",gK,[d("img",{src:N(j.nftData.imageId||j.nftData.id),alt:"NFT"},null,8,mK),d("div",yK,[d("div",vK,[(M(),F(ke,null,Xe(5,ee=>d("span",{key:ee,class:"star"},_(ee<=(j.nftData.stars||0)?"":""),1)),64))]),d("div",AK,"Lv "+_(j.nftData.level||1),1)])]),d("div",wK,[d("div",_K,_(j.nftData.name),1),d("div",EK,[d("span",bK,_(b.value.salePrice)+":",1),d("span",IK,_(j.price.toLocaleString())+" "+_(b.value.coin),1)])]),d("button",{class:"cancelBtn",onClick:ee=>Te(j)},_(b.value.cancelSale),9,CK)]))),128))])):(M(),F("div",TK,[U[31]||(U[31]=d("div",{class:"emptyIcon"},"",-1)),d("div",SK,_(b.value.noNFTsOnSaleList),1)]))])):ue("",!0)]),Ge(Xn),v.value&&P.value?(M(),F("div",{key:0,class:"modalOverlay",onClick:V},[d("div",{class:"modalContent",onClick:U[11]||(U[11]=ms(()=>{},["stop"]))},[d("div",PK,[d("h3",RK,_(b.value.sellNFT),1),d("button",{class:"modalClose",onClick:V},"")]),d("div",xK,[d("div",kK,[d("img",{src:N(P.value.imageId||P.value.id),alt:"NFT",class:"sellNFTImage"},null,8,NK),d("div",DK,[d("div",OK,_(P.value.name),1),d("div",LK,[d("span",null," "+_(P.value.stars||0)+_(b.value.starsRating),1),d("span",null,"Lv "+_(P.value.level||1),1)])])]),d("div",BK,[d("label",MK,_(b.value.sellPriceLabel),1),tn(d("input",{type:"number","onUpdate:modelValue":U[10]||(U[10]=j=>T.value=j),placeholder:b.value.enterPrice,class:"priceInput",min:"1"},null,8,FK),[[Ns,T.value]]),d("div",UK,_(b.value.currentOwnedCoins)+": "+_(s.value.toLocaleString()),1)])]),d("div",VK,[d("button",{class:"modalBtn cancelBtn",onClick:V},_(b.value.cancel),1),d("button",{class:"modalBtn confirmBtn",onClick:O},_(b.value.registerSale),1)])])])):ue("",!0),A.value&&P.value?(M(),F("div",{key:1,class:"modalOverlay",onClick:de},[d("div",{class:"modalContent",onClick:U[12]||(U[12]=ms(()=>{},["stop"]))},[d("div",$K,[d("h3",HK,_(b.value.buyNFT),1),d("button",{class:"modalClose",onClick:de},"")]),d("div",GK,[d("div",QK,[d("img",{src:N(P.value.nftData.imageId||P.value.nftData.id),alt:"NFT",class:"buyNFTImage"},null,8,jK),d("div",zK,[d("div",WK,_(P.value.nftData.name),1),d("div",KK,[d("span",null," "+_(P.value.nftData.stars||0)+_(b.value.starsRating),1),d("span",null,"Lv "+_(P.value.nftData.level||1),1)])])]),d("div",qK,[d("div",JK,[d("span",YK,_(b.value.salePrice)+":",1),d("span",XK,_(P.value.price.toLocaleString())+" "+_(b.value.coin),1)]),d("div",ZK,[d("span",eq,_(b.value.ownedCoins)+":",1),d("span",{class:Ne(["priceValue",{insufficient:s.value<P.value.price}])},_(s.value.toLocaleString())+" "+_(b.value.coin),3)]),s.value<P.value.price?(M(),F("div",tq,_(b.value.insufficientCoinsWarning),1)):ue("",!0)])]),d("div",nq,[d("button",{class:"modalBtn cancelBtn",onClick:de},_(b.value.cancel),1),d("button",{class:Ne(["modalBtn confirmBtn",{disabled:s.value<P.value.price}]),onClick:Ue,disabled:s.value<P.value.price},_(b.value.buy),11,sq)])])])):ue("",!0),w.value&&P.value?(M(),F("div",{key:2,class:"modalOverlay",onClick:ze},[d("div",{class:"modalContent detailModal",onClick:U[13]||(U[13]=ms(()=>{},["stop"]))},[d("div",rq,[d("h3",iq,_(P.value.name),1),d("button",{class:"modalClose",onClick:ze},"")]),d("div",oq,[d("div",aq,[d("img",{src:N(P.value.imageId||P.value.id),alt:"NFT"},null,8,lq),d("div",cq,[d("div",uq,[(M(),F(ke,null,Xe(5,j=>d("span",{key:j,class:"star"},_(j<=(P.value.stars||0)?"":""),1)),64))]),d("div",hq,"Lv "+_(P.value.level||1),1)])]),d("div",dq,[d("div",fq,[U[32]||(U[32]=d("span",{class:"detailLabel"},"NFT ID:",-1)),d("span",pq,"#"+_(P.value.id),1)]),d("div",gq,[d("span",mq,_(b.value.imageId)+":",1),d("span",yq,"#"+_(P.value.imageId),1)])])])])])):ue("",!0),h.value?(M(),F("div",{key:3,class:"popupOverlay",onClick:D},[d("div",{class:"popupContent",onClick:U[14]||(U[14]=ms(()=>{},["stop"]))},[d("div",vq,[d("h2",Aq,_(b.value.send),1),d("button",{class:"closeBtn",onClick:D},"")]),d("div",wq,[d("p",_q,_(b.value.sendFeatureComingSoon),1),d("div",Eq,[d("button",{class:"popupBtn cancelBtn",onClick:D},_(b.value.confirm),1)])])])])):ue("",!0),c.value?(M(),F("div",{key:4,class:"popupOverlay",onClick:B},[d("div",{class:"popupContent",onClick:U[15]||(U[15]=ms(()=>{},["stop"]))},[d("div",bq,[d("h2",Iq,_(b.value.buy),1),d("button",{class:"closeBtn",onClick:B},"")]),d("div",Cq,[d("p",Tq,_(b.value.buyFeatureComingSoon),1),d("div",Sq,[d("button",{class:"popupBtn cancelBtn",onClick:B},_(b.value.confirm),1)])])])])):ue("",!0),f.value?(M(),F("div",{key:5,class:"popupOverlay",onClick:G},[d("div",{class:"popupContent",onClick:U[16]||(U[16]=ms(()=>{},["stop"]))},[d("div",Pq,[d("h2",Rq,_(b.value.receive),1),d("button",{class:"closeBtn",onClick:G},"")]),d("div",xq,[d("p",kq,_(b.value.receiveFeatureComingSoon),1),d("div",Nq,[d("button",{class:"popupBtn cancelBtn",onClick:G},_(b.value.confirm),1)])])])])):ue("",!0),I.value?(M(),F("div",{key:6,class:"modalOverlay",onClick:U[22]||(U[22]=j=>I.value=!1)},[d("div",{class:"searchModal",onClick:U[21]||(U[21]=ms(()=>{},["stop"]))},[d("div",Dq,[d("h3",Oq,_(b.value.searchNFT),1),d("button",{class:"searchModalClose",onClick:U[17]||(U[17]=j=>I.value=!1)},"")]),d("div",Lq,[tn(d("input",{type:"text","onUpdate:modelValue":U[18]||(U[18]=j=>x.value=j),placeholder:b.value.searchPlaceholderNFT,class:"searchInput",onKeyup:U[19]||(U[19]=r1(j=>I.value=!1,["enter"]))},null,40,Bq),[[Ns,x.value]])]),d("div",Mq,[d("button",{class:"modalBtn resetBtn",onClick:ft},_(b.value.reset),1),d("button",{class:"modalBtn applyBtn",onClick:U[20]||(U[20]=j=>I.value=!1)},_(b.value.apply),1)])])])):ue("",!0)]))}},Uq=zt(Fq,[["__scopeId","data-v-a4ee29fd"]]),Vq={class:"notificationPage"},$q={class:"mainContent"},Hq={class:"pageHeader"},Gq={class:"notificationList"},Qq=["onClick"],jq={class:"notificationContent"},zq={class:"notificationTitle"},Wq={class:"notificationMessage"},Kq={class:"notificationTime"},qq={key:0,class:"unreadDot"},Jq={key:0,class:"emptyState"},Yq={__name:"NotificationPage",setup(n){const e=bn(),t=un(),s=he(()=>t.state.coins),r=$([{id:1,title:"  !",message:"    .",time:"5 ",read:!1,type:"quest"},{id:2,title:"Coin  ",message:"1 Coin  .",time:"1 ",read:!1,type:"exchange"},{id:3,title:"  ",message:"   !",time:"2 ",read:!0,type:"factory"},{id:4,title:" ",message:"  100 Point .",time:"1 ",read:!0,type:"attendance"}]);Lt(()=>{t.loadCurrentUser();const c=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",c),cn(()=>{window.removeEventListener("userDataUpdated",c)})});const i=c=>{c.read||(c.read=!0)},o=()=>{r.value.forEach(c=>{c.read=!0})},a=he(()=>r.value.filter(c=>!c.read).length),l=c=>{switch(i(c),c.type){case"quest":e.push("/quest");break;case"exchange":e.push("/exchange");break;case"factory":e.push("/factory");break;case"attendance":e.push("/attendance");break}};return(c,h)=>(M(),F("div",Vq,[Ge(Yn,{coinCount:s.value},null,8,["coinCount"]),d("main",$q,[d("div",Hq,[h[0]||(h[0]=d("h1",{class:"pageTitle"},"",-1)),a.value>0?(M(),F("button",{key:0,class:"markAllReadBtn",onClick:o},"   ")):ue("",!0)]),d("div",Gq,[(M(!0),F(ke,null,Xe(r.value,f=>(M(),F("div",{key:f.id,class:Ne(["notificationItem",{unread:!f.read}]),onClick:p=>l(f)},[d("div",jq,[d("div",zq,_(f.title),1),d("div",Wq,_(f.message),1),d("div",Kq,_(f.time),1)]),f.read?ue("",!0):(M(),F("div",qq))],10,Qq))),128)),r.value.length===0?(M(),F("div",Jq,[...h[1]||(h[1]=[d("p",null," .",-1)])])):ue("",!0)])]),Ge(Xn)]))}},Xq=zt(Yq,[["__scopeId","data-v-0a7cfb99"]]),Zq="/tdl/assets/point_ico-CuS5zUpS.png",eJ="/tdl/assets/coin_ico-COVm5STX.png",tJ={class:"shopPage"},nJ={class:"mainContent"},sJ={class:"itemList"},rJ={class:"itemInfo"},iJ={class:"itemName"},oJ={class:"itemDescription"},aJ={class:"itemPrice"},lJ={class:"priceValue"},cJ={class:"priceCurrency"},uJ={key:0,src:Zq,alt:"P",class:"currencyIcon"},hJ={key:1,src:eJ,alt:"C",class:"currencyIcon"},dJ=["disabled","onClick"],fJ={__name:"ShopPage",setup(n){const e=un(),t=he(()=>e.state.coins),s=he(()=>e.state.totalCoin),r=he(()=>Es()),i=he(()=>[{id:1,name:r.value.energy100,description:`${r.value.energyRecover} 100 ${r.value.energy}`,price:100,currency:"point",amount:100},{id:2,name:r.value.energy500,description:`${r.value.energyRecover} 500 ${r.value.energy}`,price:450,currency:"point",amount:500},{id:3,name:r.value.energy1000,description:`${r.value.energyRecover} 1000 ${r.value.energy}`,price:800,currency:"point",amount:1e3},{id:4,name:r.value.energy2000,description:`${r.value.energyRecover} 2000 ${r.value.energy}`,price:1500,currency:"point",amount:2e3}]),o=()=>{e.loadCurrentUser()},a=async l=>{if(!_t()){alert(r.value.loginRequired);return}if(l.currency==="point"&&t.value<l.price){alert(r.value.insufficientPoints);return}if(l.currency==="coin"&&s.value<l.price){alert(r.value.insufficientCoins);return}let h=!1;if(l.currency==="point"){const E=t.value-l.price;h=await e.updateMultiple({coins:E})}else{const E=s.value-l.price;h=await e.updateMultiple({totalCoin:E})}if(!h){alert(r.value.purchaseFailed);return}const f=4e3,p=parseInt(localStorage.getItem("currentEnergy")||f.toString()),m=Math.min(p+l.amount,f);localStorage.setItem("currentEnergy",m.toString()),localStorage.setItem("energyLastDate",new Date().toDateString()),alert(`${l.name} ${r.value.purchaseComplete} ${l.amount} ${r.value.energyRecovered}! (${r.value.currentEnergy}: ${m}/${f})`)};return Lt(()=>{o();const l=()=>{e.loadCurrentUser()};window.addEventListener("userDataUpdated",l),cn(()=>{window.removeEventListener("userDataUpdated",l)})}),(l,c)=>(M(),F("div",tJ,[Ge(Yn,{coinCount:t.value},null,8,["coinCount"]),d("main",nJ,[d("div",sJ,[(M(!0),F(ke,null,Xe(i.value,h=>(M(),F("div",{key:h.id,class:"shopItem"},[d("div",rJ,[d("h3",iJ,_(h.name),1),d("p",oJ,_(h.description),1)]),d("div",aJ,[d("span",lJ,_(h.price.toLocaleString()),1),d("span",cJ,[h.currency==="point"?(M(),F("img",uJ)):(M(),F("img",hJ))])]),d("button",{class:"buyBtn",disabled:h.currency==="point"&&t.value<h.price||h.currency==="coin"&&s.value<h.price,onClick:f=>a(h)},_(r.value.buy),9,dJ)]))),128))])]),Ge(Xn)]))}},pJ=zt(fJ,[["__scopeId","data-v-5139fe9d"]]),Uw="/tdl/assets/arrow-B-Afy2tM.png",gJ="/tdl/assets/shadow-BT4_IuPe.png",mJ="/tdl/assets/cat1-B_B8VE2s.png",yJ="/tdl/assets/cat10-B8AgbljH.png",vJ="/tdl/assets/cat20-Bz9cd08a.png",AJ="/tdl/assets/cat29-D_79HmBj.png",wJ="/tdl/assets/cat30-Cx-HRp0m.png",_J={class:"homePage"},EJ={class:"mainContent"},bJ={key:0,class:"homeContent"},IJ={class:"catContainer"},CJ={class:"catWrapper"},TJ=["src"],SJ={key:1,class:"loginPrompt"},PJ={key:2,class:"actionButtons"},RJ={class:"speechBubbles"},xJ={class:"foodEmojis"},kJ=["src"],NJ={__name:"HomePage",setup(n){const e=un(),t=he(()=>e.state.coins),s=he(()=>e.state.totalCoin),r=he(()=>Es()),i=$(null),o=[mJ,yJ,vJ,AJ,wJ],a=$(0),l=$([]),c=$([]),h=$(1),f=["!","  !","  ?","!"," ?"," !","!"," ...","  !","!","!","!","!","!","  !"],p=()=>{a.value=(a.value-1+o.length)%o.length},m=()=>{a.value=(a.value+1)%o.length},E=he(()=>o[a.value]),v=()=>{const P=f[Math.floor(Math.random()*f.length)],T=Math.min(window.innerWidth||500,500),L=window.innerHeight||800,Q=220,q=60,x=20,I={id:Date.now(),text:P,x:Math.random()*(T-Q-x*2)+x,y:Math.random()*(L-q-x*2-200)+100};l.value.push(I),setTimeout(()=>{const C=l.value.findIndex(S=>S.id===I.id);C>-1&&l.value.splice(C,1)},2e3)},A=P=>{try{return new URL(Object.assign({"../assets/img/tul1.png":iT,"../assets/img/tul2.png":oT,"../assets/img/tul3.png":aT,"../assets/img/tul5.png":lT,"../assets/img/tul6.png":cT})[`../assets/img/tul${P}.png`],import.meta.url).href}catch{return`/src/assets/img/tul${P}.png`}},w=async()=>{if(s.value<100){alert(" !");return}const T=s.value-100;try{await e.updateGameData({totalCoin:T})}catch(Ee){console.error("  :",Ee),alert("  .");return}const L=Math.floor(Math.random()*6)+1,Q=Math.min(window.innerWidth||500,500),q=window.innerHeight||800,x={id:Date.now(),x:Q/2+(Math.random()-.5)*100,y:q/2+(Math.random()-.5)*100,imageId:L};c.value.push(x),setTimeout(()=>{const Ee=c.value.findIndex(ne=>ne.id===x.id);Ee>-1&&c.value.splice(Ee,1)},2e3),h.value++;const I=Math.min(window.innerWidth||500,500),C=window.innerHeight||800,S=220,b=60,N=20,k={id:Date.now()+1,text:` ${h.value} `,x:Math.random()*(I-S-N*2)+N,y:Math.random()*(C-b-N*2-200)+100};l.value.push(k),setTimeout(()=>{const Ee=l.value.findIndex(ne=>ne.id===k.id);Ee>-1&&l.value.splice(Ee,1)},2e3)};return Lt(()=>{i.value=_t(),e.loadCurrentUser()}),(P,T)=>(M(),F("div",_J,[Ge(Yn,{coinCount:t.value,totalCoin:s.value},null,8,["coinCount","totalCoin"]),d("main",EJ,[i.value?(M(),F("div",bJ,[d("div",IJ,[d("button",{class:"arrowButton arrowLeft",onClick:p},[...T[1]||(T[1]=[d("img",{src:Uw,alt:"",class:"arrowIcon"},null,-1)])]),d("div",CJ,[Ge(NP,{name:"slide",mode:"out-in"},{default:y_(()=>[(M(),F("div",{key:a.value,class:"catSlide"},[T[2]||(T[2]=d("img",{src:gJ,alt:"",class:"catShadow"},null,-1)),d("img",{src:E.value,alt:"",class:"catImage",onClick:v,style:{cursor:"pointer"}},null,8,TJ)]))]),_:1})]),d("button",{class:"arrowButton arrowRight",onClick:m},[...T[3]||(T[3]=[d("img",{src:Uw,alt:"",class:"arrowIcon"},null,-1)])])])])):(M(),F("div",SJ,[d("p",null,_(r.value.loginRequired),1),d("button",{class:"loginBtn",onClick:T[0]||(T[0]=L=>P.$router.push("/login"))},_(r.value.login),1)])),i.value?(M(),F("div",PJ,[d("button",{class:"actionBtn talkBtn",onClick:v},"  "),d("button",{class:"actionBtn petBtn",onClick:w},"  ")])):ue("",!0)]),Ge(Xn),d("div",RJ,[(M(!0),F(ke,null,Xe(l.value,L=>(M(),F("div",{key:L.id,class:"speechBubble",style:Tt({left:L.x+"px",top:L.y+"px",transform:"translateX(-50%)"})},_(L.text),5))),128))]),d("div",xJ,[(M(!0),F(ke,null,Xe(c.value,L=>(M(),F("div",{key:L.id,class:"foodEmoji",style:Tt({left:L.x+"px",top:L.y+"px"})},[d("img",{src:A(L.imageId),alt:"",class:"tulImage"},null,8,kJ)],4))),128))])]))}},DJ=zt(NJ,[["__scopeId","data-v-8afc9e68"]]),OJ=["/loading","/login","/signup","/forgot-password","/reset-password"],LJ=[{path:"/",redirect:"/loading"},{path:"/loading",component:HV},{path:"/login",component:p6},{path:"/signup",component:P6},{path:"/forgot-password",component:j6},{path:"/reset-password",component:r5},{path:"/main",component:i9},{path:"/mining",component:I9},{path:"/hunting",component:Z9},{path:"/exploration",component:P$},{path:"/production",component:lH},{path:"/exchange",component:PH},{path:"/quest",component:qH},{path:"/inventory",component:YG},{path:"/factory",component:fQ},{path:"/settings",component:Dj},{path:"/profile",component:pz},{path:"/attendance",component:xz},{path:"/nft",component:Uq},{path:"/notification",component:Xq},{path:"/shop",component:pJ},{path:"/home",component:DJ}],gT=gx({history:WR(),routes:LJ}),Vw=(n,e)=>({id:n.uid,email:n.email,name:n.displayName||n.email?.split("@")[0]||"",photoURL:n.photoURL,loginType:"google",gameData:e||{level:1,coins:0,totalCoin:0,catFragments:50,nftCount:0,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}});gT.beforeEach(async(n,e,t)=>{let s=_t(),r=!!s;if(!r&&Yt&&Yt.currentUser){console.log("Router guard: sessionStorage   Firebase   ,  ...");try{const o=await _w(Yt.currentUser.uid),a=Vw(Yt.currentUser,o?.gameData);sessionStorage.setItem("currentUser",JSON.stringify(a)),s=a,r=!0,console.log("Router guard: Firebase       :",a.email)}catch(o){console.error("Router guard: Firebase   :",o)}}if(!r&&!Yt?.currentUser&&n.path!=="/login"&&n.path!=="/signup"&&n.path!=="/loading"&&(await new Promise(o=>setTimeout(o,100)),s=_t(),r=!!s,!r&&Yt&&Yt.currentUser))try{const o=await _w(Yt.currentUser.uid),a=Vw(Yt.currentUser,o?.gameData);sessionStorage.setItem("currentUser",JSON.stringify(a)),s=a,r=!0,console.log("Router guard:   Firebase    :",a.email)}catch(o){console.error("Router guard:   Firebase   :",o)}const i=OJ.includes(n.path);if(r&&(n.path==="/login"||n.path==="/signup")){console.log("Router guard: authenticated user hitting login/signup, redirecting to /home"),t("/home");return}if(!r&&!i){console.log("Router guard: unauthenticated access to protected route, redirecting to /login",{to:n.path,hasSessionStorage:!!sessionStorage.getItem("currentUser"),hasFirebaseAuth:Yt&&!!Yt.currentUser}),t("/login");return}t()});const mT=oR(aO);mT.use(gT);mT.mount("#app");export{Yt as a,_w as g,UJ as h,MJ as o};
