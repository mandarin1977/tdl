(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function $g(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const kt={},wa=[],yr=()=>{},f_=()=>!1,_h=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Hg=n=>n.startsWith("onUpdate:"),Ln=Object.assign,Gg=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},eS=Object.prototype.hasOwnProperty,Et=(n,e)=>eS.call(n,e),$e=Array.isArray,_a=n=>uu(n)==="[object Map]",tl=n=>uu(n)==="[object Set]",Xv=n=>uu(n)==="[object Date]",Ye=n=>typeof n=="function",fn=n=>typeof n=="string",Tr=n=>typeof n=="symbol",Rt=n=>n!==null&&typeof n=="object",p_=n=>(Rt(n)||Ye(n))&&Ye(n.then)&&Ye(n.catch),g_=Object.prototype.toString,uu=n=>g_.call(n),tS=n=>uu(n).slice(8,-1),m_=n=>uu(n)==="[object Object]",Qg=n=>fn(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Ac=$g(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Eh=n=>{const e=Object.create(null);return(t=>e[t]||(e[t]=n(t)))},nS=/-\w/g,Gs=Eh(n=>n.replace(nS,e=>e.slice(1).toUpperCase())),sS=/\B([A-Z])/g,eo=Eh(n=>n.replace(sS,"-$1").toLowerCase()),bh=Eh(n=>n.charAt(0).toUpperCase()+n.slice(1)),xf=Eh(n=>n?`on${bh(n)}`:""),Bi=(n,e)=>!Object.is(n,e),dd=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},v_=(n,e,t,s=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:s,value:t})},kd=n=>{const e=parseFloat(n);return isNaN(e)?n:e},rS=n=>{const e=fn(n)?Number(n):NaN;return isNaN(e)?n:e};let Zv;const Ih=()=>Zv||(Zv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function St(n){if($e(n)){const e={};for(let t=0;t<n.length;t++){const s=n[t],r=fn(s)?lS(s):St(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(fn(n)||Rt(n))return n}const iS=/;(?![^(]*\))/g,oS=/:([^]+)/,aS=/\/\*[^]*?\*\//g;function lS(n){const e={};return n.replace(aS,"").split(iS).forEach(t=>{if(t){const s=t.split(oS);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function De(n){let e="";if(fn(n))e=n;else if($e(n))for(let t=0;t<n.length;t++){const s=De(n[t]);s&&(e+=s+" ")}else if(Rt(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const cS="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",uS=$g(cS);function y_(n){return!!n||n===""}function dS(n,e){if(n.length!==e.length)return!1;let t=!0;for(let s=0;t&&s<n.length;s++)t=Mo(n[s],e[s]);return t}function Mo(n,e){if(n===e)return!0;let t=Xv(n),s=Xv(e);if(t||s)return t&&s?n.getTime()===e.getTime():!1;if(t=Tr(n),s=Tr(e),t||s)return n===e;if(t=$e(n),s=$e(e),t||s)return t&&s?dS(n,e):!1;if(t=Rt(n),s=Rt(e),t||s){if(!t||!s)return!1;const r=Object.keys(n).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in n){const a=n.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Mo(n[o],e[o]))return!1}}return String(n)===String(e)}function jg(n,e){return n.findIndex(t=>Mo(t,e))}const A_=n=>!!(n&&n.__v_isRef===!0),E=n=>fn(n)?n:n==null?"":$e(n)||Rt(n)&&(n.toString===g_||!Ye(n.toString))?A_(n)?E(n.value):JSON.stringify(n,w_,2):String(n),w_=(n,e)=>A_(e)?w_(n,e.value):_a(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[s,r],i)=>(t[kf(s,i)+" =>"]=r,t),{})}:tl(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>kf(t))}:Tr(e)?kf(e):Rt(e)&&!$e(e)&&!m_(e)?String(e):e,kf=(n,e="")=>{var t;return Tr(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let As;class hS{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=As,!e&&As&&(this.index=(As.scopes||(As.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=As;try{return As=this,e()}finally{As=t}}}on(){++this._on===1&&(this.prevScope=As,As=this)}off(){this._on>0&&--this._on===0&&(As=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,s;for(t=0,s=this.effects.length;t<s;t++)this.effects[t].stop();for(this.effects.length=0,t=0,s=this.cleanups.length;t<s;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function fS(){return As}let Dt;const Nf=new WeakSet;class __{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,As&&As.active&&As.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Nf.has(this)&&(Nf.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||b_(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ey(this),I_(this);const e=Dt,t=Zs;Dt=this,Zs=!0;try{return this.fn()}finally{C_(this),Dt=e,Zs=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Kg(e);this.deps=this.depsTail=void 0,ey(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Nf.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Pp(this)&&this.run()}get dirty(){return Pp(this)}}let E_=0,wc,_c;function b_(n,e=!1){if(n.flags|=8,e){n.next=_c,_c=n;return}n.next=wc,wc=n}function zg(){E_++}function Wg(){if(--E_>0)return;if(_c){let e=_c;for(_c=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;wc;){let e=wc;for(wc=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){n||(n=s)}e=t}}if(n)throw n}function I_(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function C_(n){let e,t=n.depsTail,s=t;for(;s;){const r=s.prevDep;s.version===-1?(s===t&&(t=r),Kg(s),pS(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}n.deps=e,n.depsTail=t}function Pp(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(T_(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function T_(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Bc)||(n.globalVersion=Bc,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!Pp(n))))return;n.flags|=2;const e=n.dep,t=Dt,s=Zs;Dt=n,Zs=!0;try{I_(n);const r=n.fn(n._value);(e.version===0||Bi(r,n._value))&&(n.flags|=128,n._value=r,e.version++)}catch(r){throw e.version++,r}finally{Dt=t,Zs=s,C_(n),n.flags&=-3}}function Kg(n,e=!1){const{dep:t,prevSub:s,nextSub:r}=n;if(s&&(s.nextSub=r,n.prevSub=void 0),r&&(r.prevSub=s,n.nextSub=void 0),t.subs===n&&(t.subs=s,!s&&t.computed)){t.computed.flags&=-5;for(let i=t.computed.deps;i;i=i.nextDep)Kg(i,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function pS(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let Zs=!0;const S_=[];function Zr(){S_.push(Zs),Zs=!1}function ei(){const n=S_.pop();Zs=n===void 0?!0:n}function ey(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=Dt;Dt=void 0;try{e()}finally{Dt=t}}}let Bc=0;class gS{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class qg{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Dt||!Zs||Dt===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Dt)t=this.activeLink=new gS(Dt,this),Dt.deps?(t.prevDep=Dt.depsTail,Dt.depsTail.nextDep=t,Dt.depsTail=t):Dt.deps=Dt.depsTail=t,P_(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const s=t.nextDep;s.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=s),t.prevDep=Dt.depsTail,t.nextDep=void 0,Dt.depsTail.nextDep=t,Dt.depsTail=t,Dt.deps===t&&(Dt.deps=s)}return t}trigger(e){this.version++,Bc++,this.notify(e)}notify(e){zg();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Wg()}}}function P_(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)P_(s)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const Rp=new WeakMap,ko=Symbol(""),xp=Symbol(""),Mc=Symbol("");function Yn(n,e,t){if(Zs&&Dt){let s=Rp.get(n);s||Rp.set(n,s=new Map);let r=s.get(t);r||(s.set(t,r=new qg),r.map=s,r.key=t),r.track()}}function Fr(n,e,t,s,r,i){const o=Rp.get(n);if(!o){Bc++;return}const a=l=>{l&&l.trigger()};if(zg(),e==="clear")o.forEach(a);else{const l=$e(n),c=l&&Qg(t);if(l&&t==="length"){const d=Number(s);o.forEach((f,p)=>{(p==="length"||p===Mc||!Tr(p)&&p>=d)&&a(f)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),c&&a(o.get(Mc)),e){case"add":l?c&&a(o.get("length")):(a(o.get(ko)),_a(n)&&a(o.get(xp)));break;case"delete":l||(a(o.get(ko)),_a(n)&&a(o.get(xp)));break;case"set":_a(n)&&a(o.get(ko));break}}Wg()}function ia(n){const e=At(n);return e===n?e:(Yn(e,"iterate",Mc),Vs(n)?e:e.map(Vn))}function Ch(n){return Yn(n=At(n),"iterate",Mc),n}const mS={__proto__:null,[Symbol.iterator](){return Df(this,Symbol.iterator,Vn)},concat(...n){return ia(this).concat(...n.map(e=>$e(e)?ia(e):e))},entries(){return Df(this,"entries",n=>(n[1]=Vn(n[1]),n))},every(n,e){return kr(this,"every",n,e,void 0,arguments)},filter(n,e){return kr(this,"filter",n,e,t=>t.map(Vn),arguments)},find(n,e){return kr(this,"find",n,e,Vn,arguments)},findIndex(n,e){return kr(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return kr(this,"findLast",n,e,Vn,arguments)},findLastIndex(n,e){return kr(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return kr(this,"forEach",n,e,void 0,arguments)},includes(...n){return Of(this,"includes",n)},indexOf(...n){return Of(this,"indexOf",n)},join(n){return ia(this).join(n)},lastIndexOf(...n){return Of(this,"lastIndexOf",n)},map(n,e){return kr(this,"map",n,e,void 0,arguments)},pop(){return rc(this,"pop")},push(...n){return rc(this,"push",n)},reduce(n,...e){return ty(this,"reduce",n,e)},reduceRight(n,...e){return ty(this,"reduceRight",n,e)},shift(){return rc(this,"shift")},some(n,e){return kr(this,"some",n,e,void 0,arguments)},splice(...n){return rc(this,"splice",n)},toReversed(){return ia(this).toReversed()},toSorted(n){return ia(this).toSorted(n)},toSpliced(...n){return ia(this).toSpliced(...n)},unshift(...n){return rc(this,"unshift",n)},values(){return Df(this,"values",Vn)}};function Df(n,e,t){const s=Ch(n),r=s[e]();return s!==n&&!Vs(n)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=t(i.value)),i}),r}const vS=Array.prototype;function kr(n,e,t,s,r,i){const o=Ch(n),a=o!==n&&!Vs(n),l=o[e];if(l!==vS[e]){const f=l.apply(n,i);return a?Vn(f):f}let c=t;o!==n&&(a?c=function(f,p){return t.call(this,Vn(f),p,n)}:t.length>2&&(c=function(f,p){return t.call(this,f,p,n)}));const d=l.call(o,c,s);return a&&r?r(d):d}function ty(n,e,t,s){const r=Ch(n);let i=t;return r!==n&&(Vs(n)?t.length>3&&(i=function(o,a,l){return t.call(this,o,a,l,n)}):i=function(o,a,l){return t.call(this,o,Vn(a),l,n)}),r[e](i,...s)}function Of(n,e,t){const s=At(n);Yn(s,"iterate",Mc);const r=s[e](...t);return(r===-1||r===!1)&&Xg(t[0])?(t[0]=At(t[0]),s[e](...t)):r}function rc(n,e,t=[]){Zr(),zg();const s=At(n)[e].apply(n,t);return Wg(),ei(),s}const yS=$g("__proto__,__v_isRef,__isVue"),R_=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Tr));function AS(n){Tr(n)||(n=String(n));const e=At(this);return Yn(e,"has",n),e.hasOwnProperty(n)}class x_{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,s){if(t==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!r;if(t==="__v_isReadonly")return r;if(t==="__v_isShallow")return i;if(t==="__v_raw")return s===(r?i?RS:O_:i?D_:N_).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=$e(e);if(!r){let l;if(o&&(l=mS[t]))return l;if(t==="hasOwnProperty")return AS}const a=Reflect.get(e,t,es(e)?e:s);if((Tr(t)?R_.has(t):yS(t))||(r||Yn(e,"get",t),i))return a;if(es(a)){const l=o&&Qg(t)?a:a.value;return r&&Rt(l)?Np(l):l}return Rt(a)?r?Np(a):du(a):a}}class k_ extends x_{constructor(e=!1){super(!1,e)}set(e,t,s,r){let i=e[t];if(!this._isShallow){const l=Hi(i);if(!Vs(s)&&!Hi(s)&&(i=At(i),s=At(s)),!$e(e)&&es(i)&&!es(s))return l||(i.value=s),!0}const o=$e(e)&&Qg(t)?Number(t)<e.length:Et(e,t),a=Reflect.set(e,t,s,es(e)?e:r);return e===At(r)&&(o?Bi(s,i)&&Fr(e,"set",t,s):Fr(e,"add",t,s)),a}deleteProperty(e,t){const s=Et(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&s&&Fr(e,"delete",t,void 0),r}has(e,t){const s=Reflect.has(e,t);return(!Tr(t)||!R_.has(t))&&Yn(e,"has",t),s}ownKeys(e){return Yn(e,"iterate",$e(e)?"length":ko),Reflect.ownKeys(e)}}class wS extends x_{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const _S=new k_,ES=new wS,bS=new k_(!0);const kp=n=>n,Gu=n=>Reflect.getPrototypeOf(n);function IS(n,e,t){return function(...s){const r=this.__v_raw,i=At(r),o=_a(i),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=r[n](...s),d=t?kp:e?Nd:Vn;return!e&&Yn(i,"iterate",l?xp:ko),{next(){const{value:f,done:p}=c.next();return p?{value:f,done:p}:{value:a?[d(f[0]),d(f[1])]:d(f),done:p}},[Symbol.iterator](){return this}}}}function Qu(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function CS(n,e){const t={get(r){const i=this.__v_raw,o=At(i),a=At(r);n||(Bi(r,a)&&Yn(o,"get",r),Yn(o,"get",a));const{has:l}=Gu(o),c=e?kp:n?Nd:Vn;if(l.call(o,r))return c(i.get(r));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!n&&Yn(At(r),"iterate",ko),r.size},has(r){const i=this.__v_raw,o=At(i),a=At(r);return n||(Bi(r,a)&&Yn(o,"has",r),Yn(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,l=At(a),c=e?kp:n?Nd:Vn;return!n&&Yn(l,"iterate",ko),a.forEach((d,f)=>r.call(i,c(d),c(f),o))}};return Ln(t,n?{add:Qu("add"),set:Qu("set"),delete:Qu("delete"),clear:Qu("clear")}:{add(r){!e&&!Vs(r)&&!Hi(r)&&(r=At(r));const i=At(this);return Gu(i).has.call(i,r)||(i.add(r),Fr(i,"add",r,r)),this},set(r,i){!e&&!Vs(i)&&!Hi(i)&&(i=At(i));const o=At(this),{has:a,get:l}=Gu(o);let c=a.call(o,r);c||(r=At(r),c=a.call(o,r));const d=l.call(o,r);return o.set(r,i),c?Bi(i,d)&&Fr(o,"set",r,i):Fr(o,"add",r,i),this},delete(r){const i=At(this),{has:o,get:a}=Gu(i);let l=o.call(i,r);l||(r=At(r),l=o.call(i,r)),a&&a.call(i,r);const c=i.delete(r);return l&&Fr(i,"delete",r,void 0),c},clear(){const r=At(this),i=r.size!==0,o=r.clear();return i&&Fr(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=IS(r,n,e)}),t}function Jg(n,e){const t=CS(n,e);return(s,r,i)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?s:Reflect.get(Et(t,r)&&r in s?t:s,r,i)}const TS={get:Jg(!1,!1)},SS={get:Jg(!1,!0)},PS={get:Jg(!0,!1)};const N_=new WeakMap,D_=new WeakMap,O_=new WeakMap,RS=new WeakMap;function xS(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function kS(n){return n.__v_skip||!Object.isExtensible(n)?0:xS(tS(n))}function du(n){return Hi(n)?n:Yg(n,!1,_S,TS,N_)}function L_(n){return Yg(n,!1,bS,SS,D_)}function Np(n){return Yg(n,!0,ES,PS,O_)}function Yg(n,e,t,s,r){if(!Rt(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const i=kS(n);if(i===0)return n;const o=r.get(n);if(o)return o;const a=new Proxy(n,i===2?s:t);return r.set(n,a),a}function Ea(n){return Hi(n)?Ea(n.__v_raw):!!(n&&n.__v_isReactive)}function Hi(n){return!!(n&&n.__v_isReadonly)}function Vs(n){return!!(n&&n.__v_isShallow)}function Xg(n){return n?!!n.__v_raw:!1}function At(n){const e=n&&n.__v_raw;return e?At(e):n}function NS(n){return!Et(n,"__v_skip")&&Object.isExtensible(n)&&v_(n,"__v_skip",!0),n}const Vn=n=>Rt(n)?du(n):n,Nd=n=>Rt(n)?Np(n):n;function es(n){return n?n.__v_isRef===!0:!1}function U(n){return B_(n,!1)}function DS(n){return B_(n,!0)}function B_(n,e){return es(n)?n:new OS(n,e)}class OS{constructor(e,t){this.dep=new qg,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:At(e),this._value=t?e:Vn(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,s=this.__v_isShallow||Vs(e)||Hi(e);e=s?e:At(e),Bi(e,t)&&(this._rawValue=e,this._value=s?e:Vn(e),this.dep.trigger())}}function Me(n){return es(n)?n.value:n}const LS={get:(n,e,t)=>e==="__v_raw"?n:Me(Reflect.get(n,e,t)),set:(n,e,t,s)=>{const r=n[e];return es(r)&&!es(t)?(r.value=t,!0):Reflect.set(n,e,t,s)}};function M_(n){return Ea(n)?n:new Proxy(n,LS)}class BS{constructor(e,t,s){this.fn=e,this.setter=t,this._value=void 0,this.dep=new qg(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Bc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Dt!==this)return b_(this,!0),!0}get value(){const e=this.dep.track();return T_(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function MS(n,e,t=!1){let s,r;return Ye(n)?s=n:(s=n.get,r=n.set),new BS(s,r,t)}const ju={},Dd=new WeakMap;let mo;function FS(n,e=!1,t=mo){if(t){let s=Dd.get(t);s||Dd.set(t,s=[]),s.push(n)}}function US(n,e,t=kt){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=t,c=M=>r?M:Vs(M)||r===!1||r===0?Ur(M,1):Ur(M);let d,f,p,m,_=!1,y=!1;if(es(n)?(f=()=>n.value,_=Vs(n)):Ea(n)?(f=()=>c(n),_=!0):$e(n)?(y=!0,_=n.some(M=>Ea(M)||Vs(M)),f=()=>n.map(M=>{if(es(M))return M.value;if(Ea(M))return c(M);if(Ye(M))return l?l(M,2):M()})):Ye(n)?e?f=l?()=>l(n,2):n:f=()=>{if(p){Zr();try{p()}finally{ei()}}const M=mo;mo=d;try{return l?l(n,3,[m]):n(m)}finally{mo=M}}:f=yr,e&&r){const M=f,Q=r===!0?1/0:r;f=()=>Ur(M(),Q)}const A=fS(),w=()=>{d.stop(),A&&A.active&&Gg(A.effects,d)};if(i&&e){const M=e;e=(...Q)=>{M(...Q),w()}}let I=y?new Array(n.length).fill(ju):ju;const C=M=>{if(!(!(d.flags&1)||!d.dirty&&!M))if(e){const Q=d.run();if(r||_||(y?Q.some((q,x)=>Bi(q,I[x])):Bi(Q,I))){p&&p();const q=mo;mo=d;try{const x=[Q,I===ju?void 0:y&&I[0]===ju?[]:I,m];I=Q,l?l(e,3,x):e(...x)}finally{mo=q}}}else d.run()};return a&&a(C),d=new __(f),d.scheduler=o?()=>o(C,!1):C,m=M=>FS(M,!1,d),p=d.onStop=()=>{const M=Dd.get(d);if(M){if(l)l(M,4);else for(const Q of M)Q();Dd.delete(d)}},e?s?C(!0):I=d.run():o?o(C.bind(null,!0),!0):d.run(),w.pause=d.pause.bind(d),w.resume=d.resume.bind(d),w.stop=w,w}function Ur(n,e=1/0,t){if(e<=0||!Rt(n)||n.__v_skip||(t=t||new Map,(t.get(n)||0)>=e))return n;if(t.set(n,e),e--,es(n))Ur(n.value,e,t);else if($e(n))for(let s=0;s<n.length;s++)Ur(n[s],e,t);else if(tl(n)||_a(n))n.forEach(s=>{Ur(s,e,t)});else if(m_(n)){for(const s in n)Ur(n[s],e,t);for(const s of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,s)&&Ur(n[s],e,t)}return n}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function hu(n,e,t,s){try{return s?n(...s):n()}catch(r){Th(r,e,t)}}function tr(n,e,t,s){if(Ye(n)){const r=hu(n,e,t,s);return r&&p_(r)&&r.catch(i=>{Th(i,e,t)}),r}if($e(n)){const r=[];for(let i=0;i<n.length;i++)r.push(tr(n[i],e,t,s));return r}}function Th(n,e,t,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||kt;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const d=a.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](n,l,c)===!1)return}a=a.parent}if(i){Zr(),hu(i,null,10,[n,l,c]),ei();return}}VS(n,t,r,s,o)}function VS(n,e,t,s=!0,r=!1){if(r)throw n;console.error(n)}const as=[];let hr=-1;const ba=[];let Ti=null,ca=0;const F_=Promise.resolve();let Od=null;function Zg(n){const e=Od||F_;return n?e.then(this?n.bind(this):n):e}function $S(n){let e=hr+1,t=as.length;for(;e<t;){const s=e+t>>>1,r=as[s],i=Fc(r);i<n||i===n&&r.flags&2?e=s+1:t=s}return e}function em(n){if(!(n.flags&1)){const e=Fc(n),t=as[as.length-1];!t||!(n.flags&2)&&e>=Fc(t)?as.push(n):as.splice($S(e),0,n),n.flags|=1,U_()}}function U_(){Od||(Od=F_.then($_))}function HS(n){$e(n)?ba.push(...n):Ti&&n.id===-1?Ti.splice(ca+1,0,n):n.flags&1||(ba.push(n),n.flags|=1),U_()}function ny(n,e,t=hr+1){for(;t<as.length;t++){const s=as[t];if(s&&s.flags&2){if(n&&s.id!==n.uid)continue;as.splice(t,1),t--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function V_(n){if(ba.length){const e=[...new Set(ba)].sort((t,s)=>Fc(t)-Fc(s));if(ba.length=0,Ti){Ti.push(...e);return}for(Ti=e,ca=0;ca<Ti.length;ca++){const t=Ti[ca];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Ti=null,ca=0}}const Fc=n=>n.id==null?n.flags&2?-1:1/0:n.id;function $_(n){try{for(hr=0;hr<as.length;hr++){const e=as[hr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),hu(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;hr<as.length;hr++){const e=as[hr];e&&(e.flags&=-2)}hr=-1,as.length=0,V_(),Od=null,(as.length||ba.length)&&$_()}}let ks=null,H_=null;function Ld(n){const e=ks;return ks=n,H_=n&&n.type.__scopeId||null,e}function G_(n,e=ks,t){if(!e||n._n)return n;const s=(...r)=>{s._d&&Fd(-1);const i=Ld(e);let o;try{o=n(...r)}finally{Ld(i),s._d&&Fd(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Wt(n,e){if(ks===null)return n;const t=kh(ks),s=n.dirs||(n.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=kt]=e[r];i&&(Ye(i)&&(i={mounted:i,updated:i}),i.deep&&Ur(o),s.push({dir:i,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function co(n,e,t,s){const r=n.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(Zr(),tr(l,t,8,[n.el,a,n,e]),ei())}}const GS=Symbol("_vte"),Q_=n=>n.__isTeleport,Br=Symbol("_leaveCb"),zu=Symbol("_enterCb");function QS(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Nt(()=>{n.isMounted=!0}),Z_(()=>{n.isUnmounting=!0}),n}const Bs=[Function,Array],j_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Bs,onEnter:Bs,onAfterEnter:Bs,onEnterCancelled:Bs,onBeforeLeave:Bs,onLeave:Bs,onAfterLeave:Bs,onLeaveCancelled:Bs,onBeforeAppear:Bs,onAppear:Bs,onAfterAppear:Bs,onAppearCancelled:Bs},z_=n=>{const e=n.subTree;return e.component?z_(e.component):e},jS={name:"BaseTransition",props:j_,setup(n,{slots:e}){const t=_1(),s=QS();return()=>{const r=e.default&&q_(e.default(),!0);if(!r||!r.length)return;const i=W_(r),o=At(n),{mode:a}=o;if(s.isLeaving)return Lf(i);const l=sy(i);if(!l)return Lf(i);let c=Dp(l,o,s,t,f=>c=f);l.type!==ls&&Uc(l,c);let d=t.subTree&&sy(t.subTree);if(d&&d.type!==ls&&!Ao(d,l)&&z_(t).type!==ls){let f=Dp(d,o,s,t);if(Uc(d,f),a==="out-in"&&l.type!==ls)return s.isLeaving=!0,f.afterLeave=()=>{s.isLeaving=!1,t.job.flags&8||t.update(),delete f.afterLeave,d=void 0},Lf(i);a==="in-out"&&l.type!==ls?f.delayLeave=(p,m,_)=>{const y=K_(s,d);y[String(d.key)]=d,p[Br]=()=>{m(),p[Br]=void 0,delete c.delayedLeave,d=void 0},c.delayedLeave=()=>{_(),delete c.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return i}}};function W_(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==ls){e=t;break}}return e}const zS=jS;function K_(n,e){const{leavingVNodes:t}=n;let s=t.get(e.type);return s||(s=Object.create(null),t.set(e.type,s)),s}function Dp(n,e,t,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:d,onEnterCancelled:f,onBeforeLeave:p,onLeave:m,onAfterLeave:_,onLeaveCancelled:y,onBeforeAppear:A,onAppear:w,onAfterAppear:I,onAppearCancelled:C}=e,M=String(n.key),Q=K_(t,n),q=(P,S)=>{P&&tr(P,s,9,S)},x=(P,S)=>{const b=S[1];q(P,S),$e(P)?P.every(D=>D.length<=1)&&b():P.length<=1&&b()},T={mode:o,persisted:a,beforeEnter(P){let S=l;if(!t.isMounted)if(i)S=A||l;else return;P[Br]&&P[Br](!0);const b=Q[M];b&&Ao(n,b)&&b.el[Br]&&b.el[Br](),q(S,[P])},enter(P){let S=c,b=d,D=f;if(!t.isMounted)if(i)S=w||c,b=I||d,D=C||f;else return;let k=!1;const ke=P[zu]=ie=>{k||(k=!0,ie?q(D,[P]):q(b,[P]),T.delayedLeave&&T.delayedLeave(),P[zu]=void 0)};S?x(S,[P,ke]):ke()},leave(P,S){const b=String(n.key);if(P[zu]&&P[zu](!0),t.isUnmounting)return S();q(p,[P]);let D=!1;const k=P[Br]=ke=>{D||(D=!0,S(),ke?q(y,[P]):q(_,[P]),P[Br]=void 0,Q[b]===n&&delete Q[b])};Q[b]=n,m?x(m,[P,k]):k()},clone(P){const S=Dp(P,e,t,s,r);return r&&r(S),S}};return T}function Lf(n){if(Sh(n))return n=Gi(n),n.children=null,n}function sy(n){if(!Sh(n))return Q_(n.type)&&n.children?W_(n.children):n;if(n.component)return n.component.subTree;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&Ye(t.default))return t.default()}}function Uc(n,e){n.shapeFlag&6&&n.component?(n.transition=e,Uc(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function q_(n,e=!1,t){let s=[],r=0;for(let i=0;i<n.length;i++){let o=n[i];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:i);o.type===Re?(o.patchFlag&128&&r++,s=s.concat(q_(o.children,e,a))):(e||o.type!==ls)&&s.push(a!=null?Gi(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function J_(n,e){return Ye(n)?Ln({name:n.name},e,{setup:n}):n}function Y_(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}const Bd=new WeakMap;function Ec(n,e,t,s,r=!1){if($e(n)){n.forEach((_,y)=>Ec(_,e&&($e(e)?e[y]:e),t,s,r));return}if(bc(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Ec(n,e,t,s.component.subTree);return}const i=s.shapeFlag&4?kh(s.component):s.el,o=r?null:i,{i:a,r:l}=n,c=e&&e.r,d=a.refs===kt?a.refs={}:a.refs,f=a.setupState,p=At(f),m=f===kt?f_:_=>Et(p,_);if(c!=null&&c!==l){if(ry(e),fn(c))d[c]=null,m(c)&&(f[c]=null);else if(es(c)){c.value=null;const _=e;_.k&&(d[_.k]=null)}}if(Ye(l))hu(l,a,12,[o,d]);else{const _=fn(l),y=es(l);if(_||y){const A=()=>{if(n.f){const w=_?m(l)?f[l]:d[l]:l.value;if(r)$e(w)&&Gg(w,i);else if($e(w))w.includes(i)||w.push(i);else if(_)d[l]=[i],m(l)&&(f[l]=d[l]);else{const I=[i];l.value=I,n.k&&(d[n.k]=I)}}else _?(d[l]=o,m(l)&&(f[l]=o)):y&&(l.value=o,n.k&&(d[n.k]=o))};if(o){const w=()=>{A(),Bd.delete(n)};w.id=-1,Bd.set(n,w),Ps(w,t)}else ry(n),A()}}}function ry(n){const e=Bd.get(n);e&&(e.flags|=8,Bd.delete(n))}Ih().requestIdleCallback;Ih().cancelIdleCallback;const bc=n=>!!n.type.__asyncLoader,Sh=n=>n.type.__isKeepAlive;function WS(n,e){X_(n,"a",e)}function KS(n,e){X_(n,"da",e)}function X_(n,e,t=Zn){const s=n.__wdc||(n.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(Ph(e,s,t),t){let r=t.parent;for(;r&&r.parent;)Sh(r.parent.vnode)&&qS(s,e,t,r),r=r.parent}}function qS(n,e,t,s){const r=Ph(e,n,s,!0);rn(()=>{Gg(s[e],r)},t)}function Ph(n,e,t=Zn,s=!1){if(t){const r=t[n]||(t[n]=[]),i=e.__weh||(e.__weh=(...o)=>{Zr();const a=fu(t),l=tr(e,t,n,o);return a(),ei(),l});return s?r.unshift(i):r.push(i),i}}const di=n=>(e,t=Zn)=>{(!$c||n==="sp")&&Ph(n,(...s)=>e(...s),t)},JS=di("bm"),Nt=di("m"),YS=di("bu"),XS=di("u"),Z_=di("bum"),rn=di("um"),ZS=di("sp"),eP=di("rtg"),tP=di("rtc");function nP(n,e=Zn){Ph("ec",n,e)}const sP="components";function rP(n,e){return oP(sP,n,!0,e)||n}const iP=Symbol.for("v-ndc");function oP(n,e,t=!0,s=!1){const r=ks||Zn;if(r){const i=r.type;{const a=WP(i,!1);if(a&&(a===e||a===Gs(e)||a===bh(Gs(e))))return i}const o=iy(r[n]||i[n],e)||iy(r.appContext[n],e);return!o&&s?i:o}}function iy(n,e){return n&&(n[e]||n[Gs(e)]||n[bh(Gs(e))])}function We(n,e,t,s){let r;const i=t,o=$e(n);if(o||fn(n)){const a=o&&Ea(n);let l=!1,c=!1;a&&(l=!Vs(n),c=Hi(n),n=Ch(n)),r=new Array(n.length);for(let d=0,f=n.length;d<f;d++)r[d]=e(l?c?Nd(Vn(n[d])):Vn(n[d]):n[d],d,void 0,i)}else if(typeof n=="number"){r=new Array(n);for(let a=0;a<n;a++)r[a]=e(a+1,a,void 0,i)}else if(Rt(n))if(n[Symbol.iterator])r=Array.from(n,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(n);r=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const d=a[l];r[l]=e(n[d],d,l,i)}}else r=[];return r}const Op=n=>n?E1(n)?kh(n):Op(n.parent):null,Ic=Ln(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Op(n.parent),$root:n=>Op(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>t1(n),$forceUpdate:n=>n.f||(n.f=()=>{em(n.update)}),$nextTick:n=>n.n||(n.n=Zg.bind(n.proxy)),$watch:n=>SP.bind(n)}),Bf=(n,e)=>n!==kt&&!n.__isScriptSetup&&Et(n,e),aP={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:l}=n;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return t[e];case 3:return i[e]}else{if(Bf(s,e))return o[e]=1,s[e];if(r!==kt&&Et(r,e))return o[e]=2,r[e];if((c=n.propsOptions[0])&&Et(c,e))return o[e]=3,i[e];if(t!==kt&&Et(t,e))return o[e]=4,t[e];Lp&&(o[e]=0)}}const d=Ic[e];let f,p;if(d)return e==="$attrs"&&Yn(n.attrs,"get",""),d(n);if((f=a.__cssModules)&&(f=f[e]))return f;if(t!==kt&&Et(t,e))return o[e]=4,t[e];if(p=l.config.globalProperties,Et(p,e))return p[e]},set({_:n},e,t){const{data:s,setupState:r,ctx:i}=n;return Bf(r,e)?(r[e]=t,!0):s!==kt&&Et(s,e)?(s[e]=t,!0):Et(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(i[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:s,appContext:r,propsOptions:i,type:o}},a){let l,c;return!!(t[a]||n!==kt&&a[0]!=="$"&&Et(n,a)||Bf(e,a)||(l=i[0])&&Et(l,a)||Et(s,a)||Et(Ic,a)||Et(r.config.globalProperties,a)||(c=o.__cssModules)&&c[a])},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Et(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function oy(n){return $e(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Lp=!0;function lP(n){const e=t1(n),t=n.proxy,s=n.ctx;Lp=!1,e.beforeCreate&&ay(e.beforeCreate,n,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:c,created:d,beforeMount:f,mounted:p,beforeUpdate:m,updated:_,activated:y,deactivated:A,beforeDestroy:w,beforeUnmount:I,destroyed:C,unmounted:M,render:Q,renderTracked:q,renderTriggered:x,errorCaptured:T,serverPrefetch:P,expose:S,inheritAttrs:b,components:D,directives:k,filters:ke}=e;if(c&&cP(c,s,null),o)for(const V in o){const Z=o[V];Ye(Z)&&(s[V]=Z.bind(t))}if(r){const V=r.call(t,t);Rt(V)&&(n.data=du(V))}if(Lp=!0,i)for(const V in i){const Z=i[V],me=Ye(Z)?Z.bind(t,t):Ye(Z.get)?Z.get.bind(t,t):yr,Ve=!Ye(Z)&&Ye(Z.set)?Z.set.bind(t):yr,Ne=pe({get:me,set:Ve});Object.defineProperty(s,V,{enumerable:!0,configurable:!0,get:()=>Ne.value,set:se=>Ne.value=se})}if(a)for(const V in a)e1(a[V],s,t,V);if(l){const V=Ye(l)?l.call(t):l;Reflect.ownKeys(V).forEach(Z=>{hd(Z,V[Z])})}d&&ay(d,n,"c");function H(V,Z){$e(Z)?Z.forEach(me=>V(me.bind(t))):Z&&V(Z.bind(t))}if(H(JS,f),H(Nt,p),H(YS,m),H(XS,_),H(WS,y),H(KS,A),H(nP,T),H(tP,q),H(eP,x),H(Z_,I),H(rn,M),H(ZS,P),$e(S))if(S.length){const V=n.exposed||(n.exposed={});S.forEach(Z=>{Object.defineProperty(V,Z,{get:()=>t[Z],set:me=>t[Z]=me,enumerable:!0})})}else n.exposed||(n.exposed={});Q&&n.render===yr&&(n.render=Q),b!=null&&(n.inheritAttrs=b),D&&(n.components=D),k&&(n.directives=k),P&&Y_(n)}function cP(n,e,t=yr){$e(n)&&(n=Bp(n));for(const s in n){const r=n[s];let i;Rt(r)?"default"in r?i=er(r.from||s,r.default,!0):i=er(r.from||s):i=er(r),es(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function ay(n,e,t){tr($e(n)?n.map(s=>s.bind(e.proxy)):n.bind(e.proxy),e,t)}function e1(n,e,t,s){let r=s.includes(".")?p1(t,s):()=>t[s];if(fn(n)){const i=e[n];Ye(i)&&qr(r,i)}else if(Ye(n))qr(r,n.bind(t));else if(Rt(n))if($e(n))n.forEach(i=>e1(i,e,t,s));else{const i=Ye(n.handler)?n.handler.bind(t):e[n.handler];Ye(i)&&qr(r,i,n)}}function t1(n){const e=n.type,{mixins:t,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=n.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!t&&!s?l=e:(l={},r.length&&r.forEach(c=>Md(l,c,o,!0)),Md(l,e,o)),Rt(e)&&i.set(e,l),l}function Md(n,e,t,s=!1){const{mixins:r,extends:i}=e;i&&Md(n,i,t,!0),r&&r.forEach(o=>Md(n,o,t,!0));for(const o in e)if(!(s&&o==="expose")){const a=uP[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const uP={data:ly,props:cy,emits:cy,methods:dc,computed:dc,beforeCreate:rs,created:rs,beforeMount:rs,mounted:rs,beforeUpdate:rs,updated:rs,beforeDestroy:rs,beforeUnmount:rs,destroyed:rs,unmounted:rs,activated:rs,deactivated:rs,errorCaptured:rs,serverPrefetch:rs,components:dc,directives:dc,watch:hP,provide:ly,inject:dP};function ly(n,e){return e?n?function(){return Ln(Ye(n)?n.call(this,this):n,Ye(e)?e.call(this,this):e)}:e:n}function dP(n,e){return dc(Bp(n),Bp(e))}function Bp(n){if($e(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function rs(n,e){return n?[...new Set([].concat(n,e))]:e}function dc(n,e){return n?Ln(Object.create(null),n,e):e}function cy(n,e){return n?$e(n)&&$e(e)?[...new Set([...n,...e])]:Ln(Object.create(null),oy(n),oy(e??{})):e}function hP(n,e){if(!n)return e;if(!e)return n;const t=Ln(Object.create(null),n);for(const s in e)t[s]=rs(n[s],e[s]);return t}function n1(){return{app:null,config:{isNativeTag:f_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let fP=0;function pP(n,e){return function(s,r=null){Ye(s)||(s=Ln({},s)),r!=null&&!Rt(r)&&(r=null);const i=n1(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:fP++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:qP,get config(){return i.config},set config(d){},use(d,...f){return o.has(d)||(d&&Ye(d.install)?(o.add(d),d.install(c,...f)):Ye(d)&&(o.add(d),d(c,...f))),c},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),c},component(d,f){return f?(i.components[d]=f,c):i.components[d]},directive(d,f){return f?(i.directives[d]=f,c):i.directives[d]},mount(d,f,p){if(!l){const m=c._ceVNode||ze(s,r);return m.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),n(m,d,p),l=!0,c._container=d,d.__vue_app__=c,kh(m.component)}},onUnmount(d){a.push(d)},unmount(){l&&(tr(a,c._instance,16),n(null,c._container),delete c._container.__vue_app__)},provide(d,f){return i.provides[d]=f,c},runWithContext(d){const f=Ia;Ia=c;try{return d()}finally{Ia=f}}};return c}}let Ia=null;function hd(n,e){if(Zn){let t=Zn.provides;const s=Zn.parent&&Zn.parent.provides;s===t&&(t=Zn.provides=Object.create(s)),t[n]=e}}function er(n,e,t=!1){const s=_1();if(s||Ia){let r=Ia?Ia._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&n in r)return r[n];if(arguments.length>1)return t&&Ye(e)?e.call(s&&s.proxy):e}}const s1={},r1=()=>Object.create(s1),i1=n=>Object.getPrototypeOf(n)===s1;function gP(n,e,t,s=!1){const r={},i=r1();n.propsDefaults=Object.create(null),o1(n,e,r,i);for(const o in n.propsOptions[0])o in r||(r[o]=void 0);t?n.props=s?r:L_(r):n.type.props?n.props=r:n.props=i,n.attrs=i}function mP(n,e,t,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=n,a=At(r),[l]=n.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const d=n.vnode.dynamicProps;for(let f=0;f<d.length;f++){let p=d[f];if(Rh(n.emitsOptions,p))continue;const m=e[p];if(l)if(Et(i,p))m!==i[p]&&(i[p]=m,c=!0);else{const _=Gs(p);r[_]=Mp(l,a,_,m,n,!1)}else m!==i[p]&&(i[p]=m,c=!0)}}}else{o1(n,e,r,i)&&(c=!0);let d;for(const f in a)(!e||!Et(e,f)&&((d=eo(f))===f||!Et(e,d)))&&(l?t&&(t[f]!==void 0||t[d]!==void 0)&&(r[f]=Mp(l,a,f,void 0,n,!0)):delete r[f]);if(i!==a)for(const f in i)(!e||!Et(e,f))&&(delete i[f],c=!0)}c&&Fr(n.attrs,"set","")}function o1(n,e,t,s){const[r,i]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(Ac(l))continue;const c=e[l];let d;r&&Et(r,d=Gs(l))?!i||!i.includes(d)?t[d]=c:(a||(a={}))[d]=c:Rh(n.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(i){const l=At(t),c=a||kt;for(let d=0;d<i.length;d++){const f=i[d];t[f]=Mp(r,l,f,c[f],n,!Et(c,f))}}return o}function Mp(n,e,t,s,r,i){const o=n[t];if(o!=null){const a=Et(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ye(l)){const{propsDefaults:c}=r;if(t in c)s=c[t];else{const d=fu(r);s=c[t]=l.call(null,e),d()}}else s=l;r.ce&&r.ce._setProp(t,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===eo(t))&&(s=!0))}return s}const vP=new WeakMap;function a1(n,e,t=!1){const s=t?vP:e.propsCache,r=s.get(n);if(r)return r;const i=n.props,o={},a=[];let l=!1;if(!Ye(n)){const d=f=>{l=!0;const[p,m]=a1(f,e,!0);Ln(o,p),m&&a.push(...m)};!t&&e.mixins.length&&e.mixins.forEach(d),n.extends&&d(n.extends),n.mixins&&n.mixins.forEach(d)}if(!i&&!l)return Rt(n)&&s.set(n,wa),wa;if($e(i))for(let d=0;d<i.length;d++){const f=Gs(i[d]);uy(f)&&(o[f]=kt)}else if(i)for(const d in i){const f=Gs(d);if(uy(f)){const p=i[d],m=o[f]=$e(p)||Ye(p)?{type:p}:Ln({},p),_=m.type;let y=!1,A=!0;if($e(_))for(let w=0;w<_.length;++w){const I=_[w],C=Ye(I)&&I.name;if(C==="Boolean"){y=!0;break}else C==="String"&&(A=!1)}else y=Ye(_)&&_.name==="Boolean";m[0]=y,m[1]=A,(y||Et(m,"default"))&&a.push(f)}}const c=[o,a];return Rt(n)&&s.set(n,c),c}function uy(n){return n[0]!=="$"&&!Ac(n)}const tm=n=>n==="_"||n==="_ctx"||n==="$stable",nm=n=>$e(n)?n.map(pr):[pr(n)],yP=(n,e,t)=>{if(e._n)return e;const s=G_((...r)=>nm(e(...r)),t);return s._c=!1,s},l1=(n,e,t)=>{const s=n._ctx;for(const r in n){if(tm(r))continue;const i=n[r];if(Ye(i))e[r]=yP(r,i,s);else if(i!=null){const o=nm(i);e[r]=()=>o}}},c1=(n,e)=>{const t=nm(e);n.slots.default=()=>t},u1=(n,e,t)=>{for(const s in e)(t||!tm(s))&&(n[s]=e[s])},AP=(n,e,t)=>{const s=n.slots=r1();if(n.vnode.shapeFlag&32){const r=e._;r?(u1(s,e,t),t&&v_(s,"_",r,!0)):l1(e,s)}else e&&c1(n,e)},wP=(n,e,t)=>{const{vnode:s,slots:r}=n;let i=!0,o=kt;if(s.shapeFlag&32){const a=e._;a?t&&a===1?i=!1:u1(r,e,t):(i=!e.$stable,l1(e,r)),o=e}else e&&(c1(n,e),o={default:1});if(i)for(const a in r)!tm(a)&&o[a]==null&&delete r[a]},Ps=LP;function _P(n){return EP(n)}function EP(n,e){const t=Ih();t.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:d,parentNode:f,nextSibling:p,setScopeId:m=yr,insertStaticContent:_}=n,y=(N,O,G,te=null,W=null,F=null,j=void 0,ne=null,ae=!!O.dynamicChildren)=>{if(N===O)return;N&&!Ao(N,O)&&(te=Y(N),se(N,W,F,!0),N=null),O.patchFlag===-2&&(ae=!1,O.dynamicChildren=null);const{type:de,ref:Be,shapeFlag:ve}=O;switch(de){case xh:A(N,O,G,te);break;case ls:w(N,O,G,te);break;case fd:N==null&&I(O,G,te,j);break;case Re:D(N,O,G,te,W,F,j,ne,ae);break;default:ve&1?Q(N,O,G,te,W,F,j,ne,ae):ve&6?k(N,O,G,te,W,F,j,ne,ae):(ve&64||ve&128)&&de.process(N,O,G,te,W,F,j,ne,ae,we)}Be!=null&&W?Ec(Be,N&&N.ref,F,O||N,!O):Be==null&&N&&N.ref!=null&&Ec(N.ref,null,F,N,!0)},A=(N,O,G,te)=>{if(N==null)s(O.el=a(O.children),G,te);else{const W=O.el=N.el;O.children!==N.children&&c(W,O.children)}},w=(N,O,G,te)=>{N==null?s(O.el=l(O.children||""),G,te):O.el=N.el},I=(N,O,G,te)=>{[N.el,N.anchor]=_(N.children,O,G,te,N.el,N.anchor)},C=({el:N,anchor:O},G,te)=>{let W;for(;N&&N!==O;)W=p(N),s(N,G,te),N=W;s(O,G,te)},M=({el:N,anchor:O})=>{let G;for(;N&&N!==O;)G=p(N),r(N),N=G;r(O)},Q=(N,O,G,te,W,F,j,ne,ae)=>{O.type==="svg"?j="svg":O.type==="math"&&(j="mathml"),N==null?q(O,G,te,W,F,j,ne,ae):P(N,O,W,F,j,ne,ae)},q=(N,O,G,te,W,F,j,ne)=>{let ae,de;const{props:Be,shapeFlag:ve,transition:xe,dirs:Le}=N;if(ae=N.el=o(N.type,F,Be&&Be.is,Be),ve&8?d(ae,N.children):ve&16&&T(N.children,ae,null,te,W,Mf(N,F),j,ne),Le&&co(N,null,te,"created"),x(ae,N,N.scopeId,j,te),Be){for(const vt in Be)vt!=="value"&&!Ac(vt)&&i(ae,vt,null,Be[vt],F,te);"value"in Be&&i(ae,"value",null,Be.value,F),(de=Be.onVnodeBeforeMount)&&ur(de,te,N)}Le&&co(N,null,te,"beforeMount");const it=bP(W,xe);it&&xe.beforeEnter(ae),s(ae,O,G),((de=Be&&Be.onVnodeMounted)||it||Le)&&Ps(()=>{de&&ur(de,te,N),it&&xe.enter(ae),Le&&co(N,null,te,"mounted")},W)},x=(N,O,G,te,W)=>{if(G&&m(N,G),te)for(let F=0;F<te.length;F++)m(N,te[F]);if(W){let F=W.subTree;if(O===F||m1(F.type)&&(F.ssContent===O||F.ssFallback===O)){const j=W.vnode;x(N,j,j.scopeId,j.slotScopeIds,W.parent)}}},T=(N,O,G,te,W,F,j,ne,ae=0)=>{for(let de=ae;de<N.length;de++){const Be=N[de]=ne?Si(N[de]):pr(N[de]);y(null,Be,O,G,te,W,F,j,ne)}},P=(N,O,G,te,W,F,j)=>{const ne=O.el=N.el;let{patchFlag:ae,dynamicChildren:de,dirs:Be}=O;ae|=N.patchFlag&16;const ve=N.props||kt,xe=O.props||kt;let Le;if(G&&uo(G,!1),(Le=xe.onVnodeBeforeUpdate)&&ur(Le,G,O,N),Be&&co(O,N,G,"beforeUpdate"),G&&uo(G,!0),(ve.innerHTML&&xe.innerHTML==null||ve.textContent&&xe.textContent==null)&&d(ne,""),de?S(N.dynamicChildren,de,ne,G,te,Mf(O,W),F):j||Z(N,O,ne,null,G,te,Mf(O,W),F,!1),ae>0){if(ae&16)b(ne,ve,xe,G,W);else if(ae&2&&ve.class!==xe.class&&i(ne,"class",null,xe.class,W),ae&4&&i(ne,"style",ve.style,xe.style,W),ae&8){const it=O.dynamicProps;for(let vt=0;vt<it.length;vt++){const He=it[vt],qt=ve[He],at=xe[He];(at!==qt||He==="value")&&i(ne,He,qt,at,W,G)}}ae&1&&N.children!==O.children&&d(ne,O.children)}else!j&&de==null&&b(ne,ve,xe,G,W);((Le=xe.onVnodeUpdated)||Be)&&Ps(()=>{Le&&ur(Le,G,O,N),Be&&co(O,N,G,"updated")},te)},S=(N,O,G,te,W,F,j)=>{for(let ne=0;ne<O.length;ne++){const ae=N[ne],de=O[ne],Be=ae.el&&(ae.type===Re||!Ao(ae,de)||ae.shapeFlag&198)?f(ae.el):G;y(ae,de,Be,null,te,W,F,j,!0)}},b=(N,O,G,te,W)=>{if(O!==G){if(O!==kt)for(const F in O)!Ac(F)&&!(F in G)&&i(N,F,O[F],null,W,te);for(const F in G){if(Ac(F))continue;const j=G[F],ne=O[F];j!==ne&&F!=="value"&&i(N,F,ne,j,W,te)}"value"in G&&i(N,"value",O.value,G.value,W)}},D=(N,O,G,te,W,F,j,ne,ae)=>{const de=O.el=N?N.el:a(""),Be=O.anchor=N?N.anchor:a("");let{patchFlag:ve,dynamicChildren:xe,slotScopeIds:Le}=O;Le&&(ne=ne?ne.concat(Le):Le),N==null?(s(de,G,te),s(Be,G,te),T(O.children||[],G,Be,W,F,j,ne,ae)):ve>0&&ve&64&&xe&&N.dynamicChildren?(S(N.dynamicChildren,xe,G,W,F,j,ne),(O.key!=null||W&&O===W.subTree)&&d1(N,O,!0)):Z(N,O,G,Be,W,F,j,ne,ae)},k=(N,O,G,te,W,F,j,ne,ae)=>{O.slotScopeIds=ne,N==null?O.shapeFlag&512?W.ctx.activate(O,G,te,j,ae):ke(O,G,te,W,F,j,ae):ie(N,O,ae)},ke=(N,O,G,te,W,F,j)=>{const ne=N.component=HP(N,te,W);if(Sh(N)&&(ne.ctx.renderer=we),GP(ne,!1,j),ne.asyncDep){if(W&&W.registerDep(ne,H,j),!N.el){const ae=ne.subTree=ze(ls);w(null,ae,O,G),N.placeholder=ae.el}}else H(ne,N,O,G,W,F,j)},ie=(N,O,G)=>{const te=O.component=N.component;if(DP(N,O,G))if(te.asyncDep&&!te.asyncResolved){V(te,O,G);return}else te.next=O,te.update();else O.el=N.el,te.vnode=O},H=(N,O,G,te,W,F,j)=>{const ne=()=>{if(N.isMounted){let{next:ve,bu:xe,u:Le,parent:it,vnode:vt}=N;{const ns=h1(N);if(ns){ve&&(ve.el=vt.el,V(N,ve,j)),ns.asyncDep.then(()=>{N.isUnmounted||ne()});return}}let He=ve,qt;uo(N,!1),ve?(ve.el=vt.el,V(N,ve,j)):ve=vt,xe&&dd(xe),(qt=ve.props&&ve.props.onVnodeBeforeUpdate)&&ur(qt,it,ve,vt),uo(N,!0);const at=hy(N),Bn=N.subTree;N.subTree=at,y(Bn,at,f(Bn.el),Y(Bn),N,W,F),ve.el=at.el,He===null&&OP(N,at.el),Le&&Ps(Le,W),(qt=ve.props&&ve.props.onVnodeUpdated)&&Ps(()=>ur(qt,it,ve,vt),W)}else{let ve;const{el:xe,props:Le}=O,{bm:it,m:vt,parent:He,root:qt,type:at}=N,Bn=bc(O);uo(N,!1),it&&dd(it),!Bn&&(ve=Le&&Le.onVnodeBeforeMount)&&ur(ve,He,O),uo(N,!0);{qt.ce&&qt.ce._def.shadowRoot!==!1&&qt.ce._injectChildStyle(at);const ns=N.subTree=hy(N);y(null,ns,G,te,N,W,F),O.el=ns.el}if(vt&&Ps(vt,W),!Bn&&(ve=Le&&Le.onVnodeMounted)){const ns=O;Ps(()=>ur(ve,He,ns),W)}(O.shapeFlag&256||He&&bc(He.vnode)&&He.vnode.shapeFlag&256)&&N.a&&Ps(N.a,W),N.isMounted=!0,O=G=te=null}};N.scope.on();const ae=N.effect=new __(ne);N.scope.off();const de=N.update=ae.run.bind(ae),Be=N.job=ae.runIfDirty.bind(ae);Be.i=N,Be.id=N.uid,ae.scheduler=()=>em(Be),uo(N,!0),de()},V=(N,O,G)=>{O.component=N;const te=N.vnode.props;N.vnode=O,N.next=null,mP(N,O.props,te,G),wP(N,O.children,G),Zr(),ny(N),ei()},Z=(N,O,G,te,W,F,j,ne,ae=!1)=>{const de=N&&N.children,Be=N?N.shapeFlag:0,ve=O.children,{patchFlag:xe,shapeFlag:Le}=O;if(xe>0){if(xe&128){Ve(de,ve,G,te,W,F,j,ne,ae);return}else if(xe&256){me(de,ve,G,te,W,F,j,ne,ae);return}}Le&8?(Be&16&&tt(de,W,F),ve!==de&&d(G,ve)):Be&16?Le&16?Ve(de,ve,G,te,W,F,j,ne,ae):tt(de,W,F,!0):(Be&8&&d(G,""),Le&16&&T(ve,G,te,W,F,j,ne,ae))},me=(N,O,G,te,W,F,j,ne,ae)=>{N=N||wa,O=O||wa;const de=N.length,Be=O.length,ve=Math.min(de,Be);let xe;for(xe=0;xe<ve;xe++){const Le=O[xe]=ae?Si(O[xe]):pr(O[xe]);y(N[xe],Le,G,null,W,F,j,ne,ae)}de>Be?tt(N,W,F,!0,!1,ve):T(O,G,te,W,F,j,ne,ae,ve)},Ve=(N,O,G,te,W,F,j,ne,ae)=>{let de=0;const Be=O.length;let ve=N.length-1,xe=Be-1;for(;de<=ve&&de<=xe;){const Le=N[de],it=O[de]=ae?Si(O[de]):pr(O[de]);if(Ao(Le,it))y(Le,it,G,null,W,F,j,ne,ae);else break;de++}for(;de<=ve&&de<=xe;){const Le=N[ve],it=O[xe]=ae?Si(O[xe]):pr(O[xe]);if(Ao(Le,it))y(Le,it,G,null,W,F,j,ne,ae);else break;ve--,xe--}if(de>ve){if(de<=xe){const Le=xe+1,it=Le<Be?O[Le].el:te;for(;de<=xe;)y(null,O[de]=ae?Si(O[de]):pr(O[de]),G,it,W,F,j,ne,ae),de++}}else if(de>xe)for(;de<=ve;)se(N[de],W,F,!0),de++;else{const Le=de,it=de,vt=new Map;for(de=it;de<=xe;de++){const Jt=O[de]=ae?Si(O[de]):pr(O[de]);Jt.key!=null&&vt.set(Jt.key,de)}let He,qt=0;const at=xe-it+1;let Bn=!1,ns=0;const Cs=new Array(at);for(de=0;de<at;de++)Cs[de]=0;for(de=Le;de<=ve;de++){const Jt=N[de];if(qt>=at){se(Jt,W,F,!0);continue}let pn;if(Jt.key!=null)pn=vt.get(Jt.key);else for(He=it;He<=xe;He++)if(Cs[He-it]===0&&Ao(Jt,O[He])){pn=He;break}pn===void 0?se(Jt,W,F,!0):(Cs[pn-it]=de+1,pn>=ns?ns=pn:Bn=!0,y(Jt,O[pn],G,null,W,F,j,ne,ae),qt++)}const Rr=Bn?IP(Cs):wa;for(He=Rr.length-1,de=at-1;de>=0;de--){const Jt=it+de,pn=O[Jt],ro=O[Jt+1],ar=Jt+1<Be?ro.el||ro.placeholder:te;Cs[de]===0?y(null,pn,G,ar,W,F,j,ne,ae):Bn&&(He<0||de!==Rr[He]?Ne(pn,G,ar,2):He--)}}},Ne=(N,O,G,te,W=null)=>{const{el:F,type:j,transition:ne,children:ae,shapeFlag:de}=N;if(de&6){Ne(N.component.subTree,O,G,te);return}if(de&128){N.suspense.move(O,G,te);return}if(de&64){j.move(N,O,G,we);return}if(j===Re){s(F,O,G);for(let ve=0;ve<ae.length;ve++)Ne(ae[ve],O,G,te);s(N.anchor,O,G);return}if(j===fd){C(N,O,G);return}if(te!==2&&de&1&&ne)if(te===0)ne.beforeEnter(F),s(F,O,G),Ps(()=>ne.enter(F),W);else{const{leave:ve,delayLeave:xe,afterLeave:Le}=ne,it=()=>{N.ctx.isUnmounted?r(F):s(F,O,G)},vt=()=>{F._isLeaving&&F[Br](!0),ve(F,()=>{it(),Le&&Le()})};xe?xe(F,it,vt):vt()}else s(F,O,G)},se=(N,O,G,te=!1,W=!1)=>{const{type:F,props:j,ref:ne,children:ae,dynamicChildren:de,shapeFlag:Be,patchFlag:ve,dirs:xe,cacheIndex:Le}=N;if(ve===-2&&(W=!1),ne!=null&&(Zr(),Ec(ne,null,G,N,!0),ei()),Le!=null&&(O.renderCache[Le]=void 0),Be&256){O.ctx.deactivate(N);return}const it=Be&1&&xe,vt=!bc(N);let He;if(vt&&(He=j&&j.onVnodeBeforeUnmount)&&ur(He,O,N),Be&6)Pe(N.component,G,te);else{if(Be&128){N.suspense.unmount(G,te);return}it&&co(N,null,O,"beforeUnmount"),Be&64?N.type.remove(N,O,G,we,te):de&&!de.hasOnce&&(F!==Re||ve>0&&ve&64)?tt(de,O,G,!1,!0):(F===Re&&ve&384||!W&&Be&16)&&tt(ae,O,G),te&&z(N)}(vt&&(He=j&&j.onVnodeUnmounted)||it)&&Ps(()=>{He&&ur(He,O,N),it&&co(N,null,O,"unmounted")},G)},z=N=>{const{type:O,el:G,anchor:te,transition:W}=N;if(O===Re){ue(G,te);return}if(O===fd){M(N);return}const F=()=>{r(G),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(N.shapeFlag&1&&W&&!W.persisted){const{leave:j,delayLeave:ne}=W,ae=()=>j(G,F);ne?ne(N.el,F,ae):ae()}else F()},ue=(N,O)=>{let G;for(;N!==O;)G=p(N),r(N),N=G;r(O)},Pe=(N,O,G)=>{const{bum:te,scope:W,job:F,subTree:j,um:ne,m:ae,a:de}=N;dy(ae),dy(de),te&&dd(te),W.stop(),F&&(F.flags|=8,se(j,N,O,G)),ne&&Ps(ne,O),Ps(()=>{N.isUnmounted=!0},O)},tt=(N,O,G,te=!1,W=!1,F=0)=>{for(let j=F;j<N.length;j++)se(N[j],O,G,te,W)},Y=N=>{if(N.shapeFlag&6)return Y(N.component.subTree);if(N.shapeFlag&128)return N.suspense.next();const O=p(N.anchor||N.el),G=O&&O[GS];return G?p(G):O};let ge=!1;const fe=(N,O,G)=>{N==null?O._vnode&&se(O._vnode,null,null,!0):y(O._vnode||null,N,O,null,null,null,G),O._vnode=N,ge||(ge=!0,ny(),V_(),ge=!1)},we={p:y,um:se,m:Ne,r:z,mt:ke,mc:T,pc:Z,pbc:S,n:Y,o:n};return{render:fe,hydrate:void 0,createApp:pP(fe)}}function Mf({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function uo({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function bP(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function d1(n,e,t=!1){const s=n.children,r=e.children;if($e(s)&&$e(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Si(r[i]),a.el=o.el),!t&&a.patchFlag!==-2&&d1(o,a)),a.type===xh&&a.patchFlag!==-1&&(a.el=o.el),a.type===ls&&!a.el&&(a.el=o.el)}}function IP(n){const e=n.slice(),t=[0];let s,r,i,o,a;const l=n.length;for(s=0;s<l;s++){const c=n[s];if(c!==0){if(r=t[t.length-1],n[r]<c){e[s]=r,t.push(s);continue}for(i=0,o=t.length-1;i<o;)a=i+o>>1,n[t[a]]<c?i=a+1:o=a;c<n[t[i]]&&(i>0&&(e[s]=t[i-1]),t[i]=s)}}for(i=t.length,o=t[i-1];i-- >0;)t[i]=o,o=e[o];return t}function h1(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:h1(e)}function dy(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const CP=Symbol.for("v-scx"),TP=()=>er(CP);function qr(n,e,t){return f1(n,e,t)}function f1(n,e,t=kt){const{immediate:s,deep:r,flush:i,once:o}=t,a=Ln({},t),l=e&&s||!e&&i!=="post";let c;if($c){if(i==="sync"){const m=TP();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=yr,m.resume=yr,m.pause=yr,m}}const d=Zn;a.call=(m,_,y)=>tr(m,d,_,y);let f=!1;i==="post"?a.scheduler=m=>{Ps(m,d&&d.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(m,_)=>{_?m():em(m)}),a.augmentJob=m=>{e&&(m.flags|=4),f&&(m.flags|=2,d&&(m.id=d.uid,m.i=d))};const p=US(n,e,a);return $c&&(c?c.push(p):l&&p()),p}function SP(n,e,t){const s=this.proxy,r=fn(n)?n.includes(".")?p1(s,n):()=>s[n]:n.bind(s,s);let i;Ye(e)?i=e:(i=e.handler,t=e);const o=fu(this),a=f1(r,i.bind(s),t);return o(),a}function p1(n,e){const t=e.split(".");return()=>{let s=n;for(let r=0;r<t.length&&s;r++)s=s[t[r]];return s}}const PP=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${Gs(e)}Modifiers`]||n[`${eo(e)}Modifiers`];function RP(n,e,...t){if(n.isUnmounted)return;const s=n.vnode.props||kt;let r=t;const i=e.startsWith("update:"),o=i&&PP(s,e.slice(7));o&&(o.trim&&(r=t.map(d=>fn(d)?d.trim():d)),o.number&&(r=t.map(kd)));let a,l=s[a=xf(e)]||s[a=xf(Gs(e))];!l&&i&&(l=s[a=xf(eo(e))]),l&&tr(l,n,6,r);const c=s[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,tr(c,n,6,r)}}const xP=new WeakMap;function g1(n,e,t=!1){const s=t?xP:e.emitsCache,r=s.get(n);if(r!==void 0)return r;const i=n.emits;let o={},a=!1;if(!Ye(n)){const l=c=>{const d=g1(c,e,!0);d&&(a=!0,Ln(o,d))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!i&&!a?(Rt(n)&&s.set(n,null),null):($e(i)?i.forEach(l=>o[l]=null):Ln(o,i),Rt(n)&&s.set(n,o),o)}function Rh(n,e){return!n||!_h(e)?!1:(e=e.slice(2).replace(/Once$/,""),Et(n,e[0].toLowerCase()+e.slice(1))||Et(n,eo(e))||Et(n,e))}function hy(n){const{type:e,vnode:t,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:d,props:f,data:p,setupState:m,ctx:_,inheritAttrs:y}=n,A=Ld(n);let w,I;try{if(t.shapeFlag&4){const M=r||s,Q=M;w=pr(c.call(Q,M,d,f,m,p,_)),I=a}else{const M=e;w=pr(M.length>1?M(f,{attrs:a,slots:o,emit:l}):M(f,null)),I=e.props?a:kP(a)}}catch(M){Cc.length=0,Th(M,n,1),w=ze(ls)}let C=w;if(I&&y!==!1){const M=Object.keys(I),{shapeFlag:Q}=C;M.length&&Q&7&&(i&&M.some(Hg)&&(I=NP(I,i)),C=Gi(C,I,!1,!0))}return t.dirs&&(C=Gi(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(t.dirs):t.dirs),t.transition&&Uc(C,t.transition),w=C,Ld(A),w}const kP=n=>{let e;for(const t in n)(t==="class"||t==="style"||_h(t))&&((e||(e={}))[t]=n[t]);return e},NP=(n,e)=>{const t={};for(const s in n)(!Hg(s)||!(s.slice(9)in e))&&(t[s]=n[s]);return t};function DP(n,e,t){const{props:s,children:r,component:i}=n,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return s?fy(s,o,c):!!o;if(l&8){const d=e.dynamicProps;for(let f=0;f<d.length;f++){const p=d[f];if(o[p]!==s[p]&&!Rh(c,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?fy(s,o,c):!0:!!o;return!1}function fy(n,e,t){const s=Object.keys(e);if(s.length!==Object.keys(n).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==n[i]&&!Rh(t,i))return!0}return!1}function OP({vnode:n,parent:e},t){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===n&&(s.el=n.el),s===n)(n=e.vnode).el=t,e=e.parent;else break}}const m1=n=>n.__isSuspense;function LP(n,e){e&&e.pendingBranch?$e(n)?e.effects.push(...n):e.effects.push(n):HS(n)}const Re=Symbol.for("v-fgt"),xh=Symbol.for("v-txt"),ls=Symbol.for("v-cmt"),fd=Symbol.for("v-stc"),Cc=[];let Ns=null;function L(n=!1){Cc.push(Ns=n?null:[])}function BP(){Cc.pop(),Ns=Cc[Cc.length-1]||null}let Vc=1;function Fd(n,e=!1){Vc+=n,n<0&&Ns&&e&&(Ns.hasOnce=!0)}function v1(n){return n.dynamicChildren=Vc>0?Ns||wa:null,BP(),Vc>0&&Ns&&Ns.push(n),n}function B(n,e,t,s,r,i){return v1(h(n,e,t,s,r,i,!0))}function y1(n,e,t,s,r){return v1(ze(n,e,t,s,r,!0))}function Ud(n){return n?n.__v_isVNode===!0:!1}function Ao(n,e){return n.type===e.type&&n.key===e.key}const A1=({key:n})=>n??null,pd=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?fn(n)||es(n)||Ye(n)?{i:ks,r:n,k:e,f:!!t}:n:null);function h(n,e=null,t=null,s=0,r=null,i=n===Re?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&A1(e),ref:e&&pd(e),scopeId:H_,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:ks};return a?(sm(l,t),i&128&&n.normalize(l)):t&&(l.shapeFlag|=fn(t)?8:16),Vc>0&&!o&&Ns&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Ns.push(l),l}const ze=MP;function MP(n,e=null,t=null,s=0,r=null,i=!1){if((!n||n===iP)&&(n=ls),Ud(n)){const a=Gi(n,e,!0);return t&&sm(a,t),Vc>0&&!i&&Ns&&(a.shapeFlag&6?Ns[Ns.indexOf(n)]=a:Ns.push(a)),a.patchFlag=-2,a}if(KP(n)&&(n=n.__vccOpts),e){e=FP(e);let{class:a,style:l}=e;a&&!fn(a)&&(e.class=De(a)),Rt(l)&&(Xg(l)&&!$e(l)&&(l=Ln({},l)),e.style=St(l))}const o=fn(n)?1:m1(n)?128:Q_(n)?64:Rt(n)?4:Ye(n)?2:0;return h(n,e,t,s,r,o,i,!0)}function FP(n){return n?Xg(n)||i1(n)?Ln({},n):n:null}function Gi(n,e,t=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=n,c=e?UP(r||{},e):r,d={__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&A1(c),ref:e&&e.ref?t&&i?$e(i)?i.concat(pd(e)):[i,pd(e)]:pd(e):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Re?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Gi(n.ssContent),ssFallback:n.ssFallback&&Gi(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&s&&Uc(d,l.clone(d)),d}function Fo(n=" ",e=0){return ze(xh,null,n,e)}function w1(n,e){const t=ze(fd,null,n);return t.staticCount=e,t}function he(n="",e=!1){return e?(L(),y1(ls,null,n)):ze(ls,null,n)}function pr(n){return n==null||typeof n=="boolean"?ze(ls):$e(n)?ze(Re,null,n.slice()):Ud(n)?Si(n):ze(xh,null,String(n))}function Si(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Gi(n)}function sm(n,e){let t=0;const{shapeFlag:s}=n;if(e==null)e=null;else if($e(e))t=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),sm(n,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!i1(e)?e._ctx=ks:r===3&&ks&&(ks.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Ye(e)?(e={default:e,_ctx:ks},t=32):(e=String(e),s&64?(t=16,e=[Fo(e)]):t=8);n.children=e,n.shapeFlag|=t}function UP(...n){const e={};for(let t=0;t<n.length;t++){const s=n[t];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=De([e.class,s.class]));else if(r==="style")e.style=St([e.style,s.style]);else if(_h(r)){const i=e[r],o=s[r];o&&i!==o&&!($e(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function ur(n,e,t,s=null){tr(n,e,7,[t,s])}const VP=n1();let $P=0;function HP(n,e,t){const s=n.type,r=(e?e.appContext:n.appContext)||VP,i={uid:$P++,vnode:n,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new hS(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:a1(s,r),emitsOptions:g1(s,r),emit:null,emitted:null,propsDefaults:kt,inheritAttrs:s.inheritAttrs,ctx:kt,data:kt,props:kt,attrs:kt,slots:kt,refs:kt,setupState:kt,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=RP.bind(null,i),n.ce&&n.ce(i),i}let Zn=null;const _1=()=>Zn||ks;let Vd,Fp;{const n=Ih(),e=(t,s)=>{let r;return(r=n[t])||(r=n[t]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Vd=e("__VUE_INSTANCE_SETTERS__",t=>Zn=t),Fp=e("__VUE_SSR_SETTERS__",t=>$c=t)}const fu=n=>{const e=Zn;return Vd(n),n.scope.on(),()=>{n.scope.off(),Vd(e)}},py=()=>{Zn&&Zn.scope.off(),Vd(null)};function E1(n){return n.vnode.shapeFlag&4}let $c=!1;function GP(n,e=!1,t=!1){e&&Fp(e);const{props:s,children:r}=n.vnode,i=E1(n);gP(n,s,i,e),AP(n,r,t||e);const o=i?QP(n,e):void 0;return e&&Fp(!1),o}function QP(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,aP);const{setup:s}=t;if(s){Zr();const r=n.setupContext=s.length>1?zP(n):null,i=fu(n),o=hu(s,n,0,[n.props,r]),a=p_(o);if(ei(),i(),(a||n.sp)&&!bc(n)&&Y_(n),a){if(o.then(py,py),e)return o.then(l=>{gy(n,l)}).catch(l=>{Th(l,n,0)});n.asyncDep=o}else gy(n,o)}else b1(n)}function gy(n,e,t){Ye(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Rt(e)&&(n.setupState=M_(e)),b1(n)}function b1(n,e,t){const s=n.type;n.render||(n.render=s.render||yr);{const r=fu(n);Zr();try{lP(n)}finally{ei(),r()}}}const jP={get(n,e){return Yn(n,"get",""),n[e]}};function zP(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,jP),slots:n.slots,emit:n.emit,expose:e}}function kh(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(M_(NS(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in Ic)return Ic[t](n)},has(e,t){return t in e||t in Ic}})):n.proxy}function WP(n,e=!0){return Ye(n)?n.displayName||n.name:n.name||e&&n.__name}function KP(n){return Ye(n)&&"__vccOpts"in n}const pe=(n,e)=>MS(n,e,$c);function rm(n,e,t){try{Fd(-1);const s=arguments.length;return s===2?Rt(e)&&!$e(e)?Ud(e)?ze(n,null,[e]):ze(n,e):ze(n,null,e):(s>3?t=Array.prototype.slice.call(arguments,2):s===3&&Ud(t)&&(t=[t]),ze(n,e,t))}finally{Fd(1)}}const qP="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Up;const my=typeof window<"u"&&window.trustedTypes;if(my)try{Up=my.createPolicy("vue",{createHTML:n=>n})}catch{}const I1=Up?n=>Up.createHTML(n):n=>n,JP="http://www.w3.org/2000/svg",YP="http://www.w3.org/1998/Math/MathML",Or=typeof document<"u"?document:null,vy=Or&&Or.createElement("template"),XP={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,s)=>{const r=e==="svg"?Or.createElementNS(JP,n):e==="mathml"?Or.createElementNS(YP,n):t?Or.createElement(n,{is:t}):Or.createElement(n);return n==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:n=>Or.createTextNode(n),createComment:n=>Or.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Or.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,s,r,i){const o=t?t.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===i||!(r=r.nextSibling)););else{vy.innerHTML=I1(s==="svg"?`<svg>${n}</svg>`:s==="mathml"?`<math>${n}</math>`:n);const a=vy.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},yi="transition",ic="animation",Hc=Symbol("_vtc"),C1={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ZP=Ln({},j_,C1),eR=n=>(n.displayName="Transition",n.props=ZP,n),tR=eR((n,{slots:e})=>rm(zS,nR(n),e)),ho=(n,e=[])=>{$e(n)?n.forEach(t=>t(...e)):n&&n(...e)},yy=n=>n?$e(n)?n.some(e=>e.length>1):n.length>1:!1;function nR(n){const e={};for(const D in n)D in C1||(e[D]=n[D]);if(n.css===!1)return e;const{name:t="v",type:s,duration:r,enterFromClass:i=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:d=a,leaveFromClass:f=`${t}-leave-from`,leaveActiveClass:p=`${t}-leave-active`,leaveToClass:m=`${t}-leave-to`}=n,_=sR(r),y=_&&_[0],A=_&&_[1],{onBeforeEnter:w,onEnter:I,onEnterCancelled:C,onLeave:M,onLeaveCancelled:Q,onBeforeAppear:q=w,onAppear:x=I,onAppearCancelled:T=C}=e,P=(D,k,ke,ie)=>{D._enterCancelled=ie,fo(D,k?d:a),fo(D,k?c:o),ke&&ke()},S=(D,k)=>{D._isLeaving=!1,fo(D,f),fo(D,m),fo(D,p),k&&k()},b=D=>(k,ke)=>{const ie=D?x:I,H=()=>P(k,D,ke);ho(ie,[k,H]),Ay(()=>{fo(k,D?l:i),Nr(k,D?d:a),yy(ie)||wy(k,s,y,H)})};return Ln(e,{onBeforeEnter(D){ho(w,[D]),Nr(D,i),Nr(D,o)},onBeforeAppear(D){ho(q,[D]),Nr(D,l),Nr(D,c)},onEnter:b(!1),onAppear:b(!0),onLeave(D,k){D._isLeaving=!0;const ke=()=>S(D,k);Nr(D,f),D._enterCancelled?(Nr(D,p),by(D)):(by(D),Nr(D,p)),Ay(()=>{D._isLeaving&&(fo(D,f),Nr(D,m),yy(M)||wy(D,s,A,ke))}),ho(M,[D,ke])},onEnterCancelled(D){P(D,!1,void 0,!0),ho(C,[D])},onAppearCancelled(D){P(D,!0,void 0,!0),ho(T,[D])},onLeaveCancelled(D){S(D),ho(Q,[D])}})}function sR(n){if(n==null)return null;if(Rt(n))return[Ff(n.enter),Ff(n.leave)];{const e=Ff(n);return[e,e]}}function Ff(n){return rS(n)}function Nr(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[Hc]||(n[Hc]=new Set)).add(e)}function fo(n,e){e.split(/\s+/).forEach(s=>s&&n.classList.remove(s));const t=n[Hc];t&&(t.delete(e),t.size||(n[Hc]=void 0))}function Ay(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let rR=0;function wy(n,e,t,s){const r=n._endId=++rR,i=()=>{r===n._endId&&s()};if(t!=null)return setTimeout(i,t);const{type:o,timeout:a,propCount:l}=iR(n,e);if(!o)return s();const c=o+"end";let d=0;const f=()=>{n.removeEventListener(c,p),i()},p=m=>{m.target===n&&++d>=l&&f()};setTimeout(()=>{d<l&&f()},a+1),n.addEventListener(c,p)}function iR(n,e){const t=window.getComputedStyle(n),s=_=>(t[_]||"").split(", "),r=s(`${yi}Delay`),i=s(`${yi}Duration`),o=_y(r,i),a=s(`${ic}Delay`),l=s(`${ic}Duration`),c=_y(a,l);let d=null,f=0,p=0;e===yi?o>0&&(d=yi,f=o,p=i.length):e===ic?c>0&&(d=ic,f=c,p=l.length):(f=Math.max(o,c),d=f>0?o>c?yi:ic:null,p=d?d===yi?i.length:l.length:0);const m=d===yi&&/\b(?:transform|all)(?:,|$)/.test(s(`${yi}Property`).toString());return{type:d,timeout:f,propCount:p,hasTransform:m}}function _y(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,s)=>Ey(t)+Ey(n[s])))}function Ey(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function by(n){return(n?n.ownerDocument:document).body.offsetHeight}function oR(n,e,t){const s=n[Hc];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const $d=Symbol("_vod"),T1=Symbol("_vsh"),S1={name:"show",beforeMount(n,{value:e},{transition:t}){n[$d]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):oc(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:s}){!e!=!t&&(s?e?(s.beforeEnter(n),oc(n,!0),s.enter(n)):s.leave(n,()=>{oc(n,!1)}):oc(n,e))},beforeUnmount(n,{value:e}){oc(n,e)}};function oc(n,e){n.style.display=e?n[$d]:"none",n[T1]=!e}const aR=Symbol(""),lR=/(?:^|;)\s*display\s*:/;function cR(n,e,t){const s=n.style,r=fn(t);let i=!1;if(t&&!r){if(e)if(fn(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&gd(s,a,"")}else for(const o in e)t[o]==null&&gd(s,o,"");for(const o in t)o==="display"&&(i=!0),gd(s,o,t[o])}else if(r){if(e!==t){const o=s[aR];o&&(t+=";"+o),s.cssText=t,i=lR.test(t)}}else e&&n.removeAttribute("style");$d in n&&(n[$d]=i?s.display:"",n[T1]&&(s.display="none"))}const Iy=/\s*!important$/;function gd(n,e,t){if($e(t))t.forEach(s=>gd(n,e,s));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const s=uR(n,e);Iy.test(t)?n.setProperty(eo(s),t.replace(Iy,""),"important"):n[s]=t}}const Cy=["Webkit","Moz","ms"],Uf={};function uR(n,e){const t=Uf[e];if(t)return t;let s=Gs(e);if(s!=="filter"&&s in n)return Uf[e]=s;s=bh(s);for(let r=0;r<Cy.length;r++){const i=Cy[r]+s;if(i in n)return Uf[e]=i}return e}const Ty="http://www.w3.org/1999/xlink";function Sy(n,e,t,s,r,i=uS(e)){s&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(Ty,e.slice(6,e.length)):n.setAttributeNS(Ty,e,t):t==null||i&&!y_(t)?n.removeAttribute(e):n.setAttribute(e,i?"":Tr(t)?String(t):t)}function Py(n,e,t,s,r){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?I1(t):t);return}const i=n.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=y_(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(r||e)}function Vr(n,e,t,s){n.addEventListener(e,t,s)}function dR(n,e,t,s){n.removeEventListener(e,t,s)}const Ry=Symbol("_vei");function hR(n,e,t,s,r=null){const i=n[Ry]||(n[Ry]={}),o=i[e];if(s&&o)o.value=s;else{const[a,l]=fR(e);if(s){const c=i[e]=mR(s,r);Vr(n,a,c,l)}else o&&(dR(n,a,o,l),i[e]=void 0)}}const xy=/(?:Once|Passive|Capture)$/;function fR(n){let e;if(xy.test(n)){e={};let s;for(;s=n.match(xy);)n=n.slice(0,n.length-s[0].length),e[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):eo(n.slice(2)),e]}let Vf=0;const pR=Promise.resolve(),gR=()=>Vf||(pR.then(()=>Vf=0),Vf=Date.now());function mR(n,e){const t=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=t.attached)return;tr(vR(s,t.value),e,5,[s])};return t.value=n,t.attached=gR(),t}function vR(n,e){if($e(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const ky=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,yR=(n,e,t,s,r,i)=>{const o=r==="svg";e==="class"?oR(n,s,o):e==="style"?cR(n,t,s):_h(e)?Hg(e)||hR(n,e,t,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):AR(n,e,s,o))?(Py(n,e,s),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Sy(n,e,s,o,i,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!fn(s))?Py(n,Gs(e),s,i,e):(e==="true-value"?n._trueValue=s:e==="false-value"&&(n._falseValue=s),Sy(n,e,s,o))};function AR(n,e,t,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in n&&ky(e)&&Ye(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=n.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return ky(e)&&fn(t)?!1:e in n}const Qi=n=>{const e=n.props["onUpdate:modelValue"]||!1;return $e(e)?t=>dd(e,t):e};function wR(n){n.target.composing=!0}function Ny(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const $s=Symbol("_assign"),gs={created(n,{modifiers:{lazy:e,trim:t,number:s}},r){n[$s]=Qi(r);const i=s||r.props&&r.props.type==="number";Vr(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),i&&(a=kd(a)),n[$s](a)}),t&&Vr(n,"change",()=>{n.value=n.value.trim()}),e||(Vr(n,"compositionstart",wR),Vr(n,"compositionend",Ny),Vr(n,"change",Ny))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:s,trim:r,number:i}},o){if(n[$s]=Qi(o),n.composing)return;const a=(i||n.type==="number")&&!/^0\d/.test(n.value)?kd(n.value):n.value,l=e??"";a!==l&&(document.activeElement===n&&n.type!=="range"&&(s&&e===t||r&&n.value.trim()===l)||(n.value=l))}},_R={deep:!0,created(n,e,t){n[$s]=Qi(t),Vr(n,"change",()=>{const s=n._modelValue,r=Ba(n),i=n.checked,o=n[$s];if($e(s)){const a=jg(s,r),l=a!==-1;if(i&&!l)o(s.concat(r));else if(!i&&l){const c=[...s];c.splice(a,1),o(c)}}else if(tl(s)){const a=new Set(s);i?a.add(r):a.delete(r),o(a)}else o(P1(n,i))})},mounted:Dy,beforeUpdate(n,e,t){n[$s]=Qi(t),Dy(n,e,t)}};function Dy(n,{value:e,oldValue:t},s){n._modelValue=e;let r;if($e(e))r=jg(e,s.props.value)>-1;else if(tl(e))r=e.has(s.props.value);else{if(e===t)return;r=Mo(e,P1(n,!0))}n.checked!==r&&(n.checked=r)}const ER={created(n,{value:e},t){n.checked=Mo(e,t.props.value),n[$s]=Qi(t),Vr(n,"change",()=>{n[$s](Ba(n))})},beforeUpdate(n,{value:e,oldValue:t},s){n[$s]=Qi(s),e!==t&&(n.checked=Mo(e,s.props.value))}},Di={deep:!0,created(n,{value:e,modifiers:{number:t}},s){const r=tl(e);Vr(n,"change",()=>{const i=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>t?kd(Ba(o)):Ba(o));n[$s](n.multiple?r?new Set(i):i:i[0]),n._assigning=!0,Zg(()=>{n._assigning=!1})}),n[$s]=Qi(s)},mounted(n,{value:e}){Oy(n,e)},beforeUpdate(n,e,t){n[$s]=Qi(t)},updated(n,{value:e}){n._assigning||Oy(n,e)}};function Oy(n,e){const t=n.multiple,s=$e(e);if(!(t&&!s&&!tl(e))){for(let r=0,i=n.options.length;r<i;r++){const o=n.options[r],a=Ba(o);if(t)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=jg(e,a)>-1}else o.selected=e.has(a);else if(Mo(Ba(o),e)){n.selectedIndex!==r&&(n.selectedIndex=r);return}}!t&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function Ba(n){return"_value"in n?n._value:n.value}function P1(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const bR={created(n,e,t){Wu(n,e,t,null,"created")},mounted(n,e,t){Wu(n,e,t,null,"mounted")},beforeUpdate(n,e,t,s){Wu(n,e,t,s,"beforeUpdate")},updated(n,e,t,s){Wu(n,e,t,s,"updated")}};function IR(n,e){switch(n){case"SELECT":return Di;case"TEXTAREA":return gs;default:switch(e){case"checkbox":return _R;case"radio":return ER;default:return gs}}}function Wu(n,e,t,s,r){const o=IR(n.tagName,t.props&&t.props.type)[r];o&&o(n,e,t,s)}const CR=["ctrl","shift","alt","meta"],TR={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>CR.some(t=>n[`${t}Key`]&&!e.includes(t))},kn=(n,e)=>{const t=n._withMods||(n._withMods={}),s=e.join(".");return t[s]||(t[s]=((r,...i)=>{for(let o=0;o<e.length;o++){const a=TR[e[o]];if(a&&a(r,e))return}return n(r,...i)}))},SR={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},R1=(n,e)=>{const t=n._withKeys||(n._withKeys={}),s=e.join(".");return t[s]||(t[s]=(r=>{if(!("key"in r))return;const i=eo(r.key);if(e.some(o=>o===i||SR[o]===i))return n(r)}))},PR=Ln({patchProp:yR},XP);let Ly;function RR(){return Ly||(Ly=_P(PR))}const xR=((...n)=>{const e=RR().createApp(...n),{mount:t}=e;return e.mount=s=>{const r=NR(s);if(!r)return;const i=e._component;!Ye(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=t(r,!1,kR(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e});function kR(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function NR(n){return fn(n)?document.querySelector(n):n}/*!
 * vue-router v4.6.0
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const ua=typeof document<"u";function x1(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function DR(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&x1(n.default)}const _t=Object.assign;function $f(n,e){const t={};for(const s in e){const r=e[s];t[s]=nr(r)?r.map(n):n(r)}return t}const Tc=()=>{},nr=Array.isArray;function By(n,e){const t={};for(const s in n)t[s]=s in e?e[s]:n[s];return t}const k1=/#/g,OR=/&/g,LR=/\//g,BR=/=/g,MR=/\?/g,N1=/\+/g,FR=/%5B/g,UR=/%5D/g,D1=/%5E/g,VR=/%60/g,O1=/%7B/g,$R=/%7C/g,L1=/%7D/g,HR=/%20/g;function im(n){return n==null?"":encodeURI(""+n).replace($R,"|").replace(FR,"[").replace(UR,"]")}function GR(n){return im(n).replace(O1,"{").replace(L1,"}").replace(D1,"^")}function Vp(n){return im(n).replace(N1,"%2B").replace(HR,"+").replace(k1,"%23").replace(OR,"%26").replace(VR,"`").replace(O1,"{").replace(L1,"}").replace(D1,"^")}function QR(n){return Vp(n).replace(BR,"%3D")}function jR(n){return im(n).replace(k1,"%23").replace(MR,"%3F")}function zR(n){return jR(n).replace(LR,"%2F")}function Gc(n){if(n==null)return null;try{return decodeURIComponent(""+n)}catch{}return""+n}const WR=/\/$/,KR=n=>n.replace(WR,"");function Hf(n,e,t="/"){let s,r={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(s=e.slice(0,l),i=e.slice(l,a>0?a:e.length),r=n(i)),a>=0&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=XR(s??e,t),{fullPath:s+i+o,path:s,query:r,hash:Gc(o)}}function qR(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function My(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function JR(n,e,t){const s=e.matched.length-1,r=t.matched.length-1;return s>-1&&s===r&&Ma(e.matched[s],t.matched[r])&&B1(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function Ma(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function B1(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!YR(n[t],e[t]))return!1;return!0}function YR(n,e){return nr(n)?Fy(n,e):nr(e)?Fy(e,n):n===e}function Fy(n,e){return nr(e)?n.length===e.length&&n.every((t,s)=>t===e[s]):n.length===1&&n[0]===e}function XR(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),s=n.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=t.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return t.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const Ai={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let $p=(function(n){return n.pop="pop",n.push="push",n})({}),Gf=(function(n){return n.back="back",n.forward="forward",n.unknown="",n})({});function ZR(n){if(!n)if(ua){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),KR(n)}const ex=/^[^#]+#/;function tx(n,e){return n.replace(ex,"#")+e}function nx(n,e){const t=document.documentElement.getBoundingClientRect(),s=n.getBoundingClientRect();return{behavior:e.behavior,left:s.left-t.left-(e.left||0),top:s.top-t.top-(e.top||0)}}const Nh=()=>({left:window.scrollX,top:window.scrollY});function sx(n){let e;if("el"in n){const t=n.el,s=typeof t=="string"&&t.startsWith("#"),r=typeof t=="string"?s?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!r)return;e=nx(r,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Uy(n,e){return(history.state?history.state.position-e:-1)+n}const Hp=new Map;function rx(n,e){Hp.set(n,e)}function ix(n){const e=Hp.get(n);return Hp.delete(n),e}function ox(n){return typeof n=="string"||n&&typeof n=="object"}function M1(n){return typeof n=="string"||typeof n=="symbol"}let Zt=(function(n){return n[n.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",n[n.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",n[n.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",n[n.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",n[n.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",n})({});const F1=Symbol("");Zt.MATCHER_NOT_FOUND+"",Zt.NAVIGATION_GUARD_REDIRECT+"",Zt.NAVIGATION_ABORTED+"",Zt.NAVIGATION_CANCELLED+"",Zt.NAVIGATION_DUPLICATED+"";function Fa(n,e){return _t(new Error,{type:n,[F1]:!0},e)}function Dr(n,e){return n instanceof Error&&F1 in n&&(e==null||!!(n.type&e))}const ax=["params","query","hash"];function lx(n){if(typeof n=="string")return n;if(n.path!=null)return n.path;const e={};for(const t of ax)t in n&&(e[t]=n[t]);return JSON.stringify(e,null,2)}function cx(n){const e={};if(n===""||n==="?")return e;const t=(n[0]==="?"?n.slice(1):n).split("&");for(let s=0;s<t.length;++s){const r=t[s].replace(N1," "),i=r.indexOf("="),o=Gc(i<0?r:r.slice(0,i)),a=i<0?null:Gc(r.slice(i+1));if(o in e){let l=e[o];nr(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function Vy(n){let e="";for(let t in n){const s=n[t];if(t=QR(t),s==null){s!==void 0&&(e+=(e.length?"&":"")+t);continue}(nr(s)?s.map(r=>r&&Vp(r)):[s&&Vp(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+t,r!=null&&(e+="="+r))})}return e}function ux(n){const e={};for(const t in n){const s=n[t];s!==void 0&&(e[t]=nr(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const dx=Symbol(""),$y=Symbol(""),Dh=Symbol(""),om=Symbol(""),Gp=Symbol("");function ac(){let n=[];function e(s){return n.push(s),()=>{const r=n.indexOf(s);r>-1&&n.splice(r,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function Pi(n,e,t,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const c=p=>{p===!1?l(Fa(Zt.NAVIGATION_ABORTED,{from:t,to:e})):p instanceof Error?l(p):ox(p)?l(Fa(Zt.NAVIGATION_GUARD_REDIRECT,{from:e,to:p})):(o&&s.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),a())},d=i(()=>n.call(s&&s.instances[r],e,t,c));let f=Promise.resolve(d);n.length<3&&(f=f.then(c)),f.catch(p=>l(p))})}function Qf(n,e,t,s,r=i=>i()){const i=[];for(const o of n)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(x1(l)){const c=(l.__vccOpts||l)[e];c&&i.push(Pi(c,t,s,o,a,r))}else{let c=l();i.push(()=>c.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=DR(d)?d.default:d;o.mods[a]=d,o.components[a]=f;const p=(f.__vccOpts||f)[e];return p&&Pi(p,t,s,o,a,r)()}))}}return i}function hx(n,e){const t=[],s=[],r=[],i=Math.max(e.matched.length,n.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(n.matched.find(c=>Ma(c,a))?s.push(a):t.push(a));const l=n.matched[o];l&&(e.matched.find(c=>Ma(c,l))||r.push(l))}return[t,s,r]}/*!
 * vue-router v4.6.0
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let fx=()=>location.protocol+"//"+location.host;function U1(n,e){const{pathname:t,search:s,hash:r}=e,i=n.indexOf("#");if(i>-1){let o=r.includes(n.slice(i))?n.slice(i).length:1,a=r.slice(o);return a[0]!=="/"&&(a="/"+a),My(a,"")}return My(t,n)+s+r}function px(n,e,t,s){let r=[],i=[],o=null;const a=({state:p})=>{const m=U1(n,location),_=t.value,y=e.value;let A=0;if(p){if(t.value=m,e.value=p,o&&o===_){o=null;return}A=y?p.position-y.position:0}else s(m);r.forEach(w=>{w(t.value,_,{delta:A,type:$p.pop,direction:A?A>0?Gf.forward:Gf.back:Gf.unknown})})};function l(){o=t.value}function c(p){r.push(p);const m=()=>{const _=r.indexOf(p);_>-1&&r.splice(_,1)};return i.push(m),m}function d(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(_t({},p.state,{scroll:Nh()}),"")}}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:l,listen:c,destroy:f}}function Hy(n,e,t,s=!1,r=!1){return{back:n,current:e,forward:t,replaced:s,position:window.history.length,scroll:r?Nh():null}}function gx(n){const{history:e,location:t}=window,s={value:U1(n,t)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,d){const f=n.indexOf("#"),p=f>-1?(t.host&&document.querySelector("base")?n:n.slice(f))+l:fx()+n+l;try{e[d?"replaceState":"pushState"](c,"",p),r.value=c}catch(m){console.error(m),t[d?"replace":"assign"](p)}}function o(l,c){i(l,_t({},e.state,Hy(r.value.back,l,r.value.forward,!0),c,{position:r.value.position}),!0),s.value=l}function a(l,c){const d=_t({},r.value,e.state,{forward:l,scroll:Nh()});i(d.current,d,!0),i(l,_t({},Hy(s.value,l,null),{position:d.position+1},c),!1),s.value=l}return{location:s,state:r,push:a,replace:o}}function mx(n){n=ZR(n);const e=gx(n),t=px(n,e.state,e.location,e.replace);function s(i,o=!0){o||t.pauseListeners(),history.go(i)}const r=_t({location:"",base:n,go:s,createHref:tx.bind(null,n)},e,t);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function vx(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),mx(n)}let Io=(function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.Group=2]="Group",n})({});var Cn=(function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.ParamRegExp=2]="ParamRegExp",n[n.ParamRegExpEnd=3]="ParamRegExpEnd",n[n.EscapeNext=4]="EscapeNext",n})(Cn||{});const yx={type:Io.Static,value:""},Ax=/[a-zA-Z0-9_]/;function wx(n){if(!n)return[[]];if(n==="/")return[[yx]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(m){throw new Error(`ERR (${t})/"${c}": ${m}`)}let t=Cn.Static,s=t;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,c="",d="";function f(){c&&(t===Cn.Static?i.push({type:Io.Static,value:c}):t===Cn.Param||t===Cn.ParamRegExp||t===Cn.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Io.Param,value:c,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function p(){c+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==Cn.ParamRegExp){s=t,t=Cn.EscapeNext;continue}switch(t){case Cn.Static:l==="/"?(c&&f(),o()):l===":"?(f(),t=Cn.Param):p();break;case Cn.EscapeNext:p(),t=s;break;case Cn.Param:l==="("?t=Cn.ParamRegExp:Ax.test(l)?p():(f(),t=Cn.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case Cn.ParamRegExp:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:t=Cn.ParamRegExpEnd:d+=l;break;case Cn.ParamRegExpEnd:f(),t=Cn.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:e("Unknown state");break}}return t===Cn.ParamRegExp&&e(`Unfinished custom RegExp for param "${c}"`),f(),o(),r}const Gy="[^/]+?",_x={sensitive:!1,strict:!1,start:!0,end:!0};var is=(function(n){return n[n._multiplier=10]="_multiplier",n[n.Root=90]="Root",n[n.Segment=40]="Segment",n[n.SubSegment=30]="SubSegment",n[n.Static=40]="Static",n[n.Dynamic=20]="Dynamic",n[n.BonusCustomRegExp=10]="BonusCustomRegExp",n[n.BonusWildcard=-50]="BonusWildcard",n[n.BonusRepeatable=-20]="BonusRepeatable",n[n.BonusOptional=-8]="BonusOptional",n[n.BonusStrict=.7000000000000001]="BonusStrict",n[n.BonusCaseSensitive=.25]="BonusCaseSensitive",n})(is||{});const Ex=/[.+*?^${}()[\]/\\]/g;function bx(n,e){const t=_t({},_x,e),s=[];let r=t.start?"^":"";const i=[];for(const c of n){const d=c.length?[]:[is.Root];t.strict&&!c.length&&(r+="/");for(let f=0;f<c.length;f++){const p=c[f];let m=is.Segment+(t.sensitive?is.BonusCaseSensitive:0);if(p.type===Io.Static)f||(r+="/"),r+=p.value.replace(Ex,"\\$&"),m+=is.Static;else if(p.type===Io.Param){const{value:_,repeatable:y,optional:A,regexp:w}=p;i.push({name:_,repeatable:y,optional:A});const I=w||Gy;if(I!==Gy){m+=is.BonusCustomRegExp;try{`${I}`}catch(M){throw new Error(`Invalid custom RegExp for param "${_}" (${I}): `+M.message)}}let C=y?`((?:${I})(?:/(?:${I}))*)`:`(${I})`;f||(C=A&&c.length<2?`(?:/${C})`:"/"+C),A&&(C+="?"),r+=C,m+=is.Dynamic,A&&(m+=is.BonusOptional),y&&(m+=is.BonusRepeatable),I===".*"&&(m+=is.BonusWildcard)}d.push(m)}s.push(d)}if(t.strict&&t.end){const c=s.length-1;s[c][s[c].length-1]+=is.BonusStrict}t.strict||(r+="/?"),t.end?r+="$":t.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,t.sensitive?"":"i");function a(c){const d=c.match(o),f={};if(!d)return null;for(let p=1;p<d.length;p++){const m=d[p]||"",_=i[p-1];f[_.name]=m&&_.repeatable?m.split("/"):m}return f}function l(c){let d="",f=!1;for(const p of n){(!f||!d.endsWith("/"))&&(d+="/"),f=!1;for(const m of p)if(m.type===Io.Static)d+=m.value;else if(m.type===Io.Param){const{value:_,repeatable:y,optional:A}=m,w=_ in c?c[_]:"";if(nr(w)&&!y)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const I=nr(w)?w.join("/"):w;if(!I)if(A)p.length<2&&(d.endsWith("/")?d=d.slice(0,-1):f=!0);else throw new Error(`Missing required param "${_}"`);d+=I}}return d||"/"}return{re:o,score:s,keys:i,parse:a,stringify:l}}function Ix(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=e[t]-n[t];if(s)return s;t++}return n.length<e.length?n.length===1&&n[0]===is.Static+is.Segment?-1:1:n.length>e.length?e.length===1&&e[0]===is.Static+is.Segment?1:-1:0}function V1(n,e){let t=0;const s=n.score,r=e.score;for(;t<s.length&&t<r.length;){const i=Ix(s[t],r[t]);if(i)return i;t++}if(Math.abs(r.length-s.length)===1){if(Qy(s))return 1;if(Qy(r))return-1}return r.length-s.length}function Qy(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const Cx={strict:!1,end:!0,sensitive:!1};function Tx(n,e,t){const s=bx(wx(n.path),t),r=_t(s,{record:n,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function Sx(n,e){const t=[],s=new Map;e=By(Cx,e);function r(f){return s.get(f)}function i(f,p,m){const _=!m,y=zy(f);y.aliasOf=m&&m.record;const A=By(e,f),w=[y];if("alias"in f){const M=typeof f.alias=="string"?[f.alias]:f.alias;for(const Q of M)w.push(zy(_t({},y,{components:m?m.record.components:y.components,path:Q,aliasOf:m?m.record:y})))}let I,C;for(const M of w){const{path:Q}=M;if(p&&Q[0]!=="/"){const q=p.record.path,x=q[q.length-1]==="/"?"":"/";M.path=p.record.path+(Q&&x+Q)}if(I=Tx(M,p,A),m?m.alias.push(I):(C=C||I,C!==I&&C.alias.push(I),_&&f.name&&!Wy(I)&&o(f.name)),$1(I)&&l(I),y.children){const q=y.children;for(let x=0;x<q.length;x++)i(q[x],I,m&&m.children[x])}m=m||I}return C?()=>{o(C)}:Tc}function o(f){if(M1(f)){const p=s.get(f);p&&(s.delete(f),t.splice(t.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=t.indexOf(f);p>-1&&(t.splice(p,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return t}function l(f){const p=xx(f,t);t.splice(p,0,f),f.record.name&&!Wy(f)&&s.set(f.record.name,f)}function c(f,p){let m,_={},y,A;if("name"in f&&f.name){if(m=s.get(f.name),!m)throw Fa(Zt.MATCHER_NOT_FOUND,{location:f});A=m.record.name,_=_t(jy(p.params,m.keys.filter(C=>!C.optional).concat(m.parent?m.parent.keys.filter(C=>C.optional):[]).map(C=>C.name)),f.params&&jy(f.params,m.keys.map(C=>C.name))),y=m.stringify(_)}else if(f.path!=null)y=f.path,m=t.find(C=>C.re.test(y)),m&&(_=m.parse(y),A=m.record.name);else{if(m=p.name?s.get(p.name):t.find(C=>C.re.test(p.path)),!m)throw Fa(Zt.MATCHER_NOT_FOUND,{location:f,currentLocation:p});A=m.record.name,_=_t({},p.params,f.params),y=m.stringify(_)}const w=[];let I=m;for(;I;)w.unshift(I.record),I=I.parent;return{name:A,path:y,params:_,matched:w,meta:Rx(w)}}n.forEach(f=>i(f));function d(){t.length=0,s.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:d,getRoutes:a,getRecordMatcher:r}}function jy(n,e){const t={};for(const s of e)s in n&&(t[s]=n[s]);return t}function zy(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:Px(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Px(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const s in n.components)e[s]=typeof t=="object"?t[s]:t;return e}function Wy(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function Rx(n){return n.reduce((e,t)=>_t(e,t.meta),{})}function xx(n,e){let t=0,s=e.length;for(;t!==s;){const i=t+s>>1;V1(n,e[i])<0?s=i:t=i+1}const r=kx(n);return r&&(s=e.lastIndexOf(r,s-1)),s}function kx(n){let e=n;for(;e=e.parent;)if($1(e)&&V1(n,e)===0)return e}function $1({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function Ky(n){const e=er(Dh),t=er(om),s=pe(()=>{const l=Me(n.to);return e.resolve(l)}),r=pe(()=>{const{matched:l}=s.value,{length:c}=l,d=l[c-1],f=t.matched;if(!d||!f.length)return-1;const p=f.findIndex(Ma.bind(null,d));if(p>-1)return p;const m=qy(l[c-2]);return c>1&&qy(d)===m&&f[f.length-1].path!==m?f.findIndex(Ma.bind(null,l[c-2])):p}),i=pe(()=>r.value>-1&&Bx(t.params,s.value.params)),o=pe(()=>r.value>-1&&r.value===t.matched.length-1&&B1(t.params,s.value.params));function a(l={}){if(Lx(l)){const c=e[Me(n.replace)?"replace":"push"](Me(n.to)).catch(Tc);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:pe(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function Nx(n){return n.length===1?n[0]:n}const Dx=J_({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Ky,setup(n,{slots:e}){const t=du(Ky(n)),{options:s}=er(Dh),r=pe(()=>({[Jy(n.activeClass,s.linkActiveClass,"router-link-active")]:t.isActive,[Jy(n.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const i=e.default&&Nx(e.default(t));return n.custom?i:rm("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:r.value},i)}}}),Ox=Dx;function Lx(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function Bx(n,e){for(const t in e){const s=e[t],r=n[t];if(typeof s=="string"){if(s!==r)return!1}else if(!nr(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function qy(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const Jy=(n,e,t)=>n??e??t,Mx=J_({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const s=er(Gp),r=pe(()=>n.route||s.value),i=er($y,0),o=pe(()=>{let c=Me(i);const{matched:d}=r.value;let f;for(;(f=d[c])&&!f.components;)c++;return c}),a=pe(()=>r.value.matched[o.value]);hd($y,pe(()=>o.value+1)),hd(dx,a),hd(Gp,r);const l=U();return qr(()=>[l.value,a.value,n.name],([c,d,f],[p,m,_])=>{d&&(d.instances[f]=c,m&&m!==d&&c&&c===p&&(d.leaveGuards.size||(d.leaveGuards=m.leaveGuards),d.updateGuards.size||(d.updateGuards=m.updateGuards))),c&&d&&(!m||!Ma(d,m)||!p)&&(d.enterCallbacks[f]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=r.value,d=n.name,f=a.value,p=f&&f.components[d];if(!p)return Yy(t.default,{Component:p,route:c});const m=f.props[d],_=m?m===!0?c.params:typeof m=="function"?m(c):m:null,A=rm(p,_t({},_,e,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(f.instances[d]=null)},ref:l}));return Yy(t.default,{Component:A,route:c})||A}}});function Yy(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const Fx=Mx;function Ux(n){const e=Sx(n.routes,n),t=n.parseQuery||cx,s=n.stringifyQuery||Vy,r=n.history,i=ac(),o=ac(),a=ac(),l=DS(Ai);let c=Ai;ua&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=$f.bind(null,Y=>""+Y),f=$f.bind(null,zR),p=$f.bind(null,Gc);function m(Y,ge){let fe,we;return M1(Y)?(fe=e.getRecordMatcher(Y),we=ge):we=Y,e.addRoute(we,fe)}function _(Y){const ge=e.getRecordMatcher(Y);ge&&e.removeRoute(ge)}function y(){return e.getRoutes().map(Y=>Y.record)}function A(Y){return!!e.getRecordMatcher(Y)}function w(Y,ge){if(ge=_t({},ge||l.value),typeof Y=="string"){const G=Hf(t,Y,ge.path),te=e.resolve({path:G.path},ge),W=r.createHref(G.fullPath);return _t(G,te,{params:p(te.params),hash:Gc(G.hash),redirectedFrom:void 0,href:W})}let fe;if(Y.path!=null)fe=_t({},Y,{path:Hf(t,Y.path,ge.path).path});else{const G=_t({},Y.params);for(const te in G)G[te]==null&&delete G[te];fe=_t({},Y,{params:f(G)}),ge.params=f(ge.params)}const we=e.resolve(fe,ge),Qe=Y.hash||"";we.params=d(p(we.params));const N=qR(s,_t({},Y,{hash:GR(Qe),path:we.path})),O=r.createHref(N);return _t({fullPath:N,hash:Qe,query:s===Vy?ux(Y.query):Y.query||{}},we,{redirectedFrom:void 0,href:O})}function I(Y){return typeof Y=="string"?Hf(t,Y,l.value.path):_t({},Y)}function C(Y,ge){if(c!==Y)return Fa(Zt.NAVIGATION_CANCELLED,{from:ge,to:Y})}function M(Y){return x(Y)}function Q(Y){return M(_t(I(Y),{replace:!0}))}function q(Y,ge){const fe=Y.matched[Y.matched.length-1];if(fe&&fe.redirect){const{redirect:we}=fe;let Qe=typeof we=="function"?we(Y,ge):we;return typeof Qe=="string"&&(Qe=Qe.includes("?")||Qe.includes("#")?Qe=I(Qe):{path:Qe},Qe.params={}),_t({query:Y.query,hash:Y.hash,params:Qe.path!=null?{}:Y.params},Qe)}}function x(Y,ge){const fe=c=w(Y),we=l.value,Qe=Y.state,N=Y.force,O=Y.replace===!0,G=q(fe,we);if(G)return x(_t(I(G),{state:typeof G=="object"?_t({},Qe,G.state):Qe,force:N,replace:O}),ge||fe);const te=fe;te.redirectedFrom=ge;let W;return!N&&JR(s,we,fe)&&(W=Fa(Zt.NAVIGATION_DUPLICATED,{to:te,from:we}),Ne(we,we,!0,!1)),(W?Promise.resolve(W):S(te,we)).catch(F=>Dr(F)?Dr(F,Zt.NAVIGATION_GUARD_REDIRECT)?F:Ve(F):Z(F,te,we)).then(F=>{if(F){if(Dr(F,Zt.NAVIGATION_GUARD_REDIRECT))return x(_t({replace:O},I(F.to),{state:typeof F.to=="object"?_t({},Qe,F.to.state):Qe,force:N}),ge||te)}else F=D(te,we,!0,O,Qe);return b(te,we,F),F})}function T(Y,ge){const fe=C(Y,ge);return fe?Promise.reject(fe):Promise.resolve()}function P(Y){const ge=ue.values().next().value;return ge&&typeof ge.runWithContext=="function"?ge.runWithContext(Y):Y()}function S(Y,ge){let fe;const[we,Qe,N]=hx(Y,ge);fe=Qf(we.reverse(),"beforeRouteLeave",Y,ge);for(const G of we)G.leaveGuards.forEach(te=>{fe.push(Pi(te,Y,ge))});const O=T.bind(null,Y,ge);return fe.push(O),tt(fe).then(()=>{fe=[];for(const G of i.list())fe.push(Pi(G,Y,ge));return fe.push(O),tt(fe)}).then(()=>{fe=Qf(Qe,"beforeRouteUpdate",Y,ge);for(const G of Qe)G.updateGuards.forEach(te=>{fe.push(Pi(te,Y,ge))});return fe.push(O),tt(fe)}).then(()=>{fe=[];for(const G of N)if(G.beforeEnter)if(nr(G.beforeEnter))for(const te of G.beforeEnter)fe.push(Pi(te,Y,ge));else fe.push(Pi(G.beforeEnter,Y,ge));return fe.push(O),tt(fe)}).then(()=>(Y.matched.forEach(G=>G.enterCallbacks={}),fe=Qf(N,"beforeRouteEnter",Y,ge,P),fe.push(O),tt(fe))).then(()=>{fe=[];for(const G of o.list())fe.push(Pi(G,Y,ge));return fe.push(O),tt(fe)}).catch(G=>Dr(G,Zt.NAVIGATION_CANCELLED)?G:Promise.reject(G))}function b(Y,ge,fe){a.list().forEach(we=>P(()=>we(Y,ge,fe)))}function D(Y,ge,fe,we,Qe){const N=C(Y,ge);if(N)return N;const O=ge===Ai,G=ua?history.state:{};fe&&(we||O?r.replace(Y.fullPath,_t({scroll:O&&G&&G.scroll},Qe)):r.push(Y.fullPath,Qe)),l.value=Y,Ne(Y,ge,fe,O),Ve()}let k;function ke(){k||(k=r.listen((Y,ge,fe)=>{if(!Pe.listening)return;const we=w(Y),Qe=q(we,Pe.currentRoute.value);if(Qe){x(_t(Qe,{replace:!0,force:!0}),we).catch(Tc);return}c=we;const N=l.value;ua&&rx(Uy(N.fullPath,fe.delta),Nh()),S(we,N).catch(O=>Dr(O,Zt.NAVIGATION_ABORTED|Zt.NAVIGATION_CANCELLED)?O:Dr(O,Zt.NAVIGATION_GUARD_REDIRECT)?(x(_t(I(O.to),{force:!0}),we).then(G=>{Dr(G,Zt.NAVIGATION_ABORTED|Zt.NAVIGATION_DUPLICATED)&&!fe.delta&&fe.type===$p.pop&&r.go(-1,!1)}).catch(Tc),Promise.reject()):(fe.delta&&r.go(-fe.delta,!1),Z(O,we,N))).then(O=>{O=O||D(we,N,!1),O&&(fe.delta&&!Dr(O,Zt.NAVIGATION_CANCELLED)?r.go(-fe.delta,!1):fe.type===$p.pop&&Dr(O,Zt.NAVIGATION_ABORTED|Zt.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),b(we,N,O)}).catch(Tc)}))}let ie=ac(),H=ac(),V;function Z(Y,ge,fe){Ve(Y);const we=H.list();return we.length?we.forEach(Qe=>Qe(Y,ge,fe)):console.error(Y),Promise.reject(Y)}function me(){return V&&l.value!==Ai?Promise.resolve():new Promise((Y,ge)=>{ie.add([Y,ge])})}function Ve(Y){return V||(V=!Y,ke(),ie.list().forEach(([ge,fe])=>Y?fe(Y):ge()),ie.reset()),Y}function Ne(Y,ge,fe,we){const{scrollBehavior:Qe}=n;if(!ua||!Qe)return Promise.resolve();const N=!fe&&ix(Uy(Y.fullPath,0))||(we||!fe)&&history.state&&history.state.scroll||null;return Zg().then(()=>Qe(Y,ge,N)).then(O=>O&&sx(O)).catch(O=>Z(O,Y,ge))}const se=Y=>r.go(Y);let z;const ue=new Set,Pe={currentRoute:l,listening:!0,addRoute:m,removeRoute:_,clearRoutes:e.clearRoutes,hasRoute:A,getRoutes:y,resolve:w,options:n,push:M,replace:Q,go:se,back:()=>se(-1),forward:()=>se(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:H.add,isReady:me,install(Y){Y.component("RouterLink",Ox),Y.component("RouterView",Fx),Y.config.globalProperties.$router=Pe,Object.defineProperty(Y.config.globalProperties,"$route",{enumerable:!0,get:()=>Me(l)}),ua&&!z&&l.value===Ai&&(z=!0,M(r.location).catch(we=>{}));const ge={};for(const we in Ai)Object.defineProperty(ge,we,{get:()=>l.value[we],enumerable:!0});Y.provide(Dh,Pe),Y.provide(om,L_(ge)),Y.provide(Gp,l);const fe=Y.unmount;ue.add(Y),Y.unmount=function(){ue.delete(Y),ue.size<1&&(c=Ai,k&&k(),k=null,l.value=Ai,z=!1,V=!1),fe()}}};function tt(Y){return Y.reduce((ge,fe)=>ge.then(()=>P(fe)),Promise.resolve())}return Pe}function Pn(){return er(Dh)}function H1(n){return er(om)}const Vx="modulepreload",$x=function(n){return"/tdl/"+n},Xy={},md=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){let l=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");r=l(t.map(c=>{if(c=$x(c),c in Xy)return;Xy[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":Vx,d||(p.as="script"),p.crossOrigin="",p.href=c,a&&p.setAttribute("nonce",a),document.head.appendChild(p),d)return new Promise((m,_)=>{p.addEventListener("load",m),p.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},ti=()=>JSON.parse(localStorage.getItem("users")||"[]"),dt=()=>{const n=localStorage.getItem("currentUser");if(n)try{return JSON.parse(n)}catch(t){console.error("localStorage    :",t)}const e=sessionStorage.getItem("currentUser");if(e)try{return JSON.parse(e)}catch(t){console.error("sessionStorage    :",t)}return null},am=n=>ti().find(t=>t.id===n||t.walletAddress===n),G1=n=>{const e=ti(),t=am(n);if(t)return t;const r=(o=>{const a=o.toString().split("").reduce((f,p)=>(f<<5)-f+p.charCodeAt(0),0),l="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let c="",d=Math.abs(a);for(let f=0;f<6;f++)c+=l[d%l.length],d=Math.floor(d/l.length);return c})(n),i={id:n,walletAddress:n,loginType:"wallet",inviteCode:r,createdAt:new Date().toISOString(),referrals:[],gameData:{level:1,coins:0,totalCoin:0,catFragments:50,nftCount:0,miningLevel:1,huntingLevel:1,explorationLevel:1,productionLevel:1,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}};return e.push(i),localStorage.setItem("users",JSON.stringify(e)),i},Qc=async(n,e)=>{const t=dt(),s=ti(),r=s.findIndex(i=>i.id===n);return r!==-1?(s[r].gameData={...s[r].gameData,...e},localStorage.setItem("users",JSON.stringify(s)),t&&t.id===n&&(t.gameData={...t.gameData,...e},sessionStorage.setItem("currentUser",JSON.stringify(t))),!0):!1},Q1=()=>{sessionStorage.removeItem("currentUser")},j1=()=>{const n=localStorage.getItem("appLanguage");return!n||n===""?(localStorage.setItem("appLanguage","English"),"English"):n},ms=()=>{const n=j1();return{ko:{home:"",game:"",exchange:"",quest:"",inventory:"",factory:"",mining:"",hunting:"",exploration:"",production:"",back:" ",settings:"",notification:"",login:"",signup:"",email:"",password:"",loginButton:"",signupButton:"",walletConnect:" ",createCat:" ",catFragments:" ",coin:"",point:"",energy:"",level:"",complete:"",confirm:"",cancel:"",close:"",success:"",error:"",loading:" ...",insufficient:"",required:"",optional:"",daily:"",weekly:"",monthly:"",quest:"",reward:"",receive:"",received:"",inProgress:" ",completed:"",buy:"",sell:"",shop:"",profile:"",attendance:"",nft:"NFT",inventory:"",factory:"",exchange:"",settings:"",logout:"",language:"",sound:"",vibration:"",totalPoints:" ",totalCoins:" ",createCatSuccess:"  !",newCatAdded:"   !",enterEmail:" ",enterPassword:" ",enterAllFields:"  ",loginError:"   ",invalidCredentials:"    ",walletNotInstalled:"MetaMask   ",installMetaMask:"MetaMask ?",walletConnectFailed:"  ",walletConnectError:"    ",insufficientCoins:" ",insufficientFragments:"  ",insufficientPoints:" ",insufficientEnergy:" ",purchaseSuccess:" !",purchaseFailed:" ",tradeSuccess:" !",tradeFailed:" ",createSuccess:" !",createFailed:" ",rewardReceived:" ",alreadyReceived:"  ",questNotCompleted:"  ",loginRequired:" ",copySuccess:"",saveSuccess:"",saveFailed:" ",common:"",rare:"",epic:"",legendary:"",stars:"",stats:"",exp:"",maxExp:" ",levelUp:"",levelUpCost:" ",select:"",selected:"",filter:"",sort:"",search:"",newest:"",oldest:"",byLevel:"",byStars:"",byRarity:"",byName:"",all:"",miningEfficiency:" ",huntingDamage:" ",explorationReward:" ",productionSpeed:" ",strength:"",health:"",intelligence:"",dexterity:"",courage:"",luck:"",earned:"",pointsEarned:"point !",fragmentsEarned:" ",fragmentsEarnedCount:" !",miningComplete:" !",huntingComplete:" !",explorationComplete:" !",productionComplete:" !",miningCatList:"  ",huntingCatList:"  ",explorationCatList:"  ",productionCatList:"  ",levelUp:"!",progress:"",miningProgress:" ",huntingProgress:" ",explorationProgress:" ",productionProgress:" ",miningSuccess:" !",oreFound:" !",moneyEarned:"!",digMore:" !",monsterKilled:" !",expEarned:" !",goldEarned:" !",newAreaFound:"  !",treasureFound:" !",adventureSuccess:" !",mysteriousDiscovery:" !",craftComplete:" !",itemCreated:" !",skillImproved:" !",perfectWork:" !",success:"!",good:"!",complete:"!",amazing:"!",selectCat:" ",removeCat:" ",ownedPoints:" ",ownedCoins:" ",exchangeRate:"",buyCoinAmount:"  ",sellCoinAmount:"  ",requiredPoints:" ",pointsToReceive:" ",buyButton:"",sellButton:"",exampleAmount:": 1",coinBuy:"Coin ",coinSell:"Coin ",pointUsed:" ",pointReceived:" ",inProgress:"",completed:"",receive:"",rewardReceived:"  !",earnedReward:" .",emptyInventory:"Inventory is empty",totalItems:"Total",items:"items",searchAndFilter:"Search & Filter",searchPlaceholder:"Search by NFT name or ID...",starRating:"Star Rating",levelFilter:"Level",rarityFilter:"Rarity",sortBy:"Sort By",stars:"Stars",levelHighToLow:"Level (High to Low)",starsHighToLow:"Stars (High to Low)",rarityHighToLow:"Rarity (High to Low)",nameOrder:"Name Order",reset:"Reset",apply:"Apply",stats:"Stats",imageId:"Image ID",createdAt:"Created At",levelUpButton:"Level Up",selectButton:"Select",doubleClickDetail:"Double-click for details",noNFTs:"No NFTs",createCatInFactory:"Create cats in the Factory!",selectedCharacter:"Selected Character",cat:"Cat",userSettings:" ",walletConnection:" ",connected:"",address:"",balance:"",depositFromWallet:" ",disconnect:" ",walletNotConnected:"  ",walletConnectDesc:"NFT    ",connecting:" ...",attendance:"",doAttendanceCheck:" ",selectDepositMethod:"  ",selectExchangeToDeposit:"  ",goToPhantomWallet:"  ",goToUpbitExchange:"  ",copyWalletAddressAndDeposit:"    ",copyWalletAddress:"  ",walletConnected:" !",disconnectWalletConfirm:"  ?",walletAddressCopied:"  !",copyFailed:" ",refreshBalance:" ",alreadyCheckedIn:"   !",checkInComplete:" !",wallet:"",energy100:" 100",energy500:" 500",energy1000:" 1000",energy2000:" 2000",energyRecover:"",energyRecovered:"",purchaseComplete:" !",currentEnergy:"",loginRequired:" .",insufficientPoints:" .",insufficientCoins:" .",purchaseFailed:" .  .",buy:"",back:" ",mining:"",miningLevel:" ",miningStart:" ",miningInProgress:" ...",ownedResources:" ",stone:"",iron:"",gold:"",diamond:"",hunting:"",playerInfo:" ",health:"",attack:"",exp:"",monsterSelection:" ",huntingStart:" ",huntingInProgress:" ...",exploration:"",explorationLevel:" ",explorationArea:" ",undiscovered:"",exploring:" ",explorationStart:" ",explorationInProgress:" ...",explorationRewards:" ",production:"",productionLevel:" ",materialInventory:" ",recipe:" ",productionStart:" ",productionInProgress:" ...",notification:"",markAllRead:" ",noNotifications:" .",attendance:"",attendanceCheck:"",day:"Day",attendanceComplete:" !",pointsEarned:" !",alreadyCheckedToday:"   !   .",alreadyChecked:"  .",nextOrderOnly:"   .",marketplace:"",inviteFriends:" ",inviteCode:" ",copyInviteCode:"  ",shareKakao:" ",inviteDescription:"   !",inviteReward:" ",inviteRewardDesc:" 1   100 ",newUserReward:"  : 50 ",totalInvites:" ",invites:"",codeCopied:"  !",shareSuccess:"  !",shareFailed:"  .",inviteStats:" ",shareLink:" ",copyLink:" ",linkCopied:" !",shareNative:"",myNFTs:" NFT",myListings:" ",onSale:" ",totalVolume:" ",itemsCount:"",noNFTsInWallet:"NFT ",allRarity:" ",allPrice:" ",under1000Coins:"1,000  ",midPriceRange:"1,000 - 5,000 ",over5000Coins:"5,000  ",oldest:"",priceLow:" ",priceHigh:" ",levelHigh:" ",starsHigh:"  ",price:"",buy:"",noNFTsOnSale:"  NFT ",myNFTsCount:" NFT",ownedCoins:" ",sell:"",noNFTsAvailableForSale:"  NFT ",mySalesList:"  ",salePrice:" ",cancelSale:" ",noNFTsOnSaleList:"  NFT ",confirmCancelSale:"  ?",enterValidPrice:"  .",loginRequired:" .",nftListedOnMarketplace:"NFT  !",saleCancelled:" .",insufficientCoinsForPurchase:" .",nftPurchased:"NFT !",coinsPaid:" ",sellNFT:"NFT ",starsRating:"",sellPriceLabel:"  ()",enterPrice:" ",currentOwnedCoins:"  ",cancel:"",registerSale:" ",buyNFT:"NFT ",insufficientCoinsWarning:" !",imageId:" ID",send:"",sendFeatureComingSoon:"   .",buyFeatureComingSoon:"   .",receive:"",receiveFeatureComingSoon:"   .",searchNFT:"",searchPlaceholderNFT:"NFT   ID ...",reset:"",apply:""},en:{home:"Home",game:"Game",exchange:"Exchange",quest:"Quest",inventory:"Inventory",factory:"Factory",mining:"Mining",hunting:"Hunting",exploration:"Exploration",production:"Production",back:" Back",settings:"Settings",notification:"Notification",login:"Log in",signup:"Sign Up",email:"Email",password:"Password",loginButton:"Log in",signupButton:"Sign Up",walletConnect:"Connect Wallet",createCat:"Create Cat",catFragments:"Cat Fragments",coin:"Coin",point:"Point",energy:"Energy",level:"Level",complete:"Complete",confirm:"Confirm",cancel:"Cancel",close:"Close",success:"Success",error:"Error",loading:"Loading...",insufficient:"Insufficient",required:"Required",optional:"Optional",daily:"Daily",weekly:"Weekly",monthly:"Monthly",quest:"Quest",reward:"Reward",receive:"Receive",received:"Received",inProgress:"In Progress",completed:"Completed",buy:"Buy",sell:"Sell",shop:"Shop",profile:"Profile",attendance:"Attendance",nft:"NFT",inventory:"Inventory",factory:"Factory",exchange:"Exchange",settings:"Settings",logout:"Logout",language:"Language",sound:"Sound",vibration:"Vibration",totalPoints:"Total Points",totalCoins:"Total Coins",createCatSuccess:"Cat Created Successfully!",newCatAdded:"A new cat has been added to your inventory!",enterEmail:"Please enter your email",enterPassword:"Please enter your password",enterAllFields:"Please enter all fields",loginError:"An error occurred during login",invalidCredentials:"Email or password is incorrect",walletNotInstalled:"MetaMask is not installed",installMetaMask:"Would you like to install MetaMask?",walletConnectFailed:"Failed to connect wallet",walletConnectError:"An error occurred while connecting wallet",insufficientCoins:"Insufficient coins",insufficientFragments:"Insufficient cat fragments",insufficientPoints:"Insufficient points",insufficientEnergy:"Insufficient energy",purchaseSuccess:"Purchase successful!",purchaseFailed:"Purchase failed",tradeSuccess:"Trade successful!",tradeFailed:"Trade failed",createSuccess:"Creation successful!",createFailed:"Creation failed",rewardReceived:"Reward received",alreadyReceived:"Reward already received",questNotCompleted:"Quest not completed",loginRequired:"Login required",copySuccess:"Copied successfully",saveSuccess:"Saved successfully",saveFailed:"Failed to save",common:"Common",rare:"Rare",epic:"Epic",legendary:"Legendary",stars:"Stars",stats:"Stats",exp:"EXP",maxExp:"Max EXP",levelUp:"Level Up",levelUpCost:"Level Up Cost",select:"Select",selected:"Selected",filter:"Filter",sort:"Sort",search:"Search",newest:"Newest",oldest:"Oldest",byLevel:"By Level",byStars:"By Stars",byRarity:"By Rarity",byName:"By Name",all:"All",miningEfficiency:"Mining Efficiency",huntingDamage:"Hunting Damage",explorationReward:"Exploration Reward",productionSpeed:"Production Speed",strength:"Strength",health:"Health",intelligence:"Intelligence",dexterity:"Dexterity",courage:"Courage",luck:"Luck",earned:"Earned",pointsEarned:"points earned!",fragmentsEarned:"Cat Fragments",fragmentsEarnedCount:"earned!",miningComplete:"Mining Complete!",huntingComplete:"Hunting Complete!",explorationComplete:"Exploration Complete!",productionComplete:"Production Complete!",miningCatList:"Mining Cats",huntingCatList:"Hunting Cats",explorationCatList:"Exploration Cats",productionCatList:"Production Cats",levelUp:"Level Up!",progress:"Progress",miningProgress:"Mining Progress",huntingProgress:"Hunting Progress",explorationProgress:"Exploration Progress",productionProgress:"Production Progress",miningSuccess:"Mining Success!",oreFound:"Ore Found!",moneyEarned:"Money Earned!",digMore:"Dig More!",monsterKilled:"Monster Killed!",expEarned:"EXP Earned!",goldEarned:"Gold Earned!",newAreaFound:"New Area Found!",treasureFound:"Treasure Found!",adventureSuccess:"Adventure Success!",mysteriousDiscovery:"Mysterious Discovery!",craftComplete:"Craft Complete!",itemCreated:"Item Created!",skillImproved:"Skill Improved!",perfectWork:"Perfect Work!",success:"Success!",good:"Good!",complete:"Complete!",amazing:"Amazing!",selectCat:"Select Cat",removeCat:"Remove Cat",ownedPoints:"Owned Points",ownedCoins:"Owned Coins",exchangeRate:"Exchange Rate",buyCoinAmount:"Amount of Coins to Buy",sellCoinAmount:"Amount of Coins to Sell",requiredPoints:"Required Points",pointsToReceive:"Points to Receive",buyButton:"Buy",sellButton:"Sell",exampleAmount:"Ex: 1",coinBuy:"Buy Coin",coinSell:"Sell Coin",pointUsed:"Points Used",pointReceived:"Points Received",inProgress:"In Progress",completed:"Completed",receive:"Claim Reward",rewardReceived:"Reward Received!",earnedReward:"earned.",emptyInventory:"Inventory is empty",totalItems:"Total",items:"items",searchAndFilter:"Search & Filter",searchPlaceholder:"Search by NFT name or ID...",starRating:"Star Rating",levelFilter:"Level",rarityFilter:"Rarity",sortBy:"Sort By",stars:"Stars",levelHighToLow:"Level (High to Low)",starsHighToLow:"Stars (High to Low)",rarityHighToLow:"Rarity (High to Low)",nameOrder:"Name Order",reset:"Reset",apply:"Apply",stats:"Stats",imageId:"Image ID",createdAt:"Created At",levelUpButton:"Level Up",selectButton:"Select",doubleClickDetail:"Double-click for details",noNFTs:"No NFTs",createCatInFactory:"Create cats in the Factory!",selectedCharacter:"Selected Character",cat:"Cat",userSettings:"User Settings",walletConnection:"Wallet Connection",connected:"Connected",address:"Address",balance:"Balance",depositFromWallet:"Deposit from Wallet",disconnect:"Disconnect",walletNotConnected:"Wallet is not connected",walletConnectDesc:"Please connect your wallet to enjoy NFT games",connecting:"Connecting...",attendance:"Attendance Check",doAttendanceCheck:"Do Attendance Check",selectDepositMethod:"Select Deposit Method",selectExchangeToDeposit:"Please select an exchange to deposit",goToPhantomWallet:"Go to Phantom Wallet",goToUpbitExchange:"Go to Upbit Exchange",copyWalletAddressAndDeposit:"Copy wallet address and deposit at exchange",copyWalletAddress:"Copy Wallet Address",walletConnected:"Wallet connected!",disconnectWalletConfirm:"Are you sure you want to disconnect your wallet?",walletAddressCopied:"Wallet address copied!",copyFailed:"Copy failed",refreshBalance:"Refresh Balance",alreadyCheckedIn:"You have already checked in today!",checkInComplete:"Check-in complete! You received",wallet:"Wallet",marketplace:"Marketplace",myNFTs:"My NFTs",myListings:"My Sales",onSale:"On Sale",totalVolume:"Total Volume",itemsCount:"items",noNFTsInWallet:"No NFTs",allRarity:"All Rarity",allPrice:"All Price",under1000Coins:"Under 1,000 Coins",midPriceRange:"1,000 - 5,000 Coins",over5000Coins:"Over 5,000 Coins",oldest:"Oldest",priceLow:"Price Low",priceHigh:"Price High",levelHigh:"Level High",starsHigh:"Stars High",price:"Price",buy:"Buy",noNFTsOnSale:"No NFTs on sale",myNFTsCount:"My NFTs",ownedCoins:"Owned Coins",sell:"Sell",noNFTsAvailableForSale:"No NFTs available for sale",mySalesList:"My Sales List",salePrice:"Sale Price",cancelSale:"Cancel Sale",noNFTsOnSaleList:"No NFTs on sale",confirmCancelSale:"Are you sure you want to cancel the sale?",enterValidPrice:"Please enter a valid price.",loginRequired:"Login required.",nftListedOnMarketplace:"NFT listed on marketplace!",saleCancelled:"Sale cancelled.",insufficientCoinsForPurchase:"Insufficient coins.",nftPurchased:"NFT purchased!",coinsPaid:"coins paid",sellNFT:"Sell NFT",starsRating:"Stars",sellPriceLabel:"Sale Price (Coins)",enterPrice:"Enter price",currentOwnedCoins:"Current Owned Coins",cancel:"Cancel",registerSale:"Register Sale",buyNFT:"Buy NFT",insufficientCoinsWarning:"Insufficient coins!",imageId:"Image ID",send:"Send",sendFeatureComingSoon:"Send feature is coming soon.",buyFeatureComingSoon:"Buy feature is coming soon.",receive:"Receive",receiveFeatureComingSoon:"Receive feature is coming soon.",searchNFT:"Search",searchPlaceholderNFT:"Search by NFT name or ID...",reset:"Reset",apply:"Apply",energy100:"Energy 100",energy500:"Energy 500",energy1000:"Energy 1000",energy2000:"Energy 2000",energyRecover:"Recovers",energyRecovered:"energy recovered",purchaseComplete:"Purchase complete!",currentEnergy:"Current",loginRequired:"Login required.",insufficientPoints:"Insufficient points.",insufficientCoins:"Insufficient coins.",purchaseFailed:"Purchase failed. Please try again.",buy:"Buy",back:" Back",mining:"Mining",miningLevel:"Mining Level",miningStart:"Start Mining",miningInProgress:"Mining...",ownedResources:"Owned Resources",stone:"Stone",iron:"Iron",gold:"Gold",diamond:"Diamond",hunting:"Hunting",playerInfo:"Player Info",health:"Health",attack:"Attack",exp:"EXP",monsterSelection:"Monster Selection",huntingStart:"Start Hunting",huntingInProgress:"Hunting...",exploration:"Exploration",explorationLevel:"Exploration Level",explorationArea:"Exploration Area",undiscovered:"Undiscovered",exploring:"Exploring",explorationStart:"Start Exploration",explorationInProgress:"Exploring...",explorationRewards:"Exploration Rewards",production:"Production",productionLevel:"Production Level",materialInventory:"Material Inventory",recipe:"Recipe",productionStart:"Start Production",productionInProgress:"Producing...",notification:"Notification",markAllRead:"Mark All Read",noNotifications:"No notifications.",attendance:"Attendance",attendanceCheck:"Attendance Check",day:"Day",attendanceComplete:"Attendance complete!",pointsEarned:"points earned!",alreadyCheckedToday:"Already checked in today! Please try again tomorrow.",alreadyChecked:"Already checked.",nextOrderOnly:"Only the next order can be checked.",inviteFriends:"Invite Friends",inviteCode:"Invite Code",copyInviteCode:"Copy Invite Code",shareKakao:"Share via KakaoTalk",inviteDescription:"Invite friends and get rewards!",inviteReward:"Invite Reward",inviteRewardDesc:"100 Points per friend invited",newUserReward:"New User Reward: 50 Points",totalInvites:"Total Invites",invites:"friends",codeCopied:"Invite code copied!",shareSuccess:"Shared via KakaoTalk successfully!",shareFailed:"Failed to share via KakaoTalk.",inviteStats:"Invite Statistics",shareLink:"Share Link",copyLink:"Copy Link",linkCopied:"Link copied!",shareNative:"Share"}}[n===""?"ko":"en"]},Hx=Object.freeze(Object.defineProperty({__proto__:null,createWalletUser:G1,getAllUsers:ti,getCurrentLanguage:j1,getCurrentUser:dt,getI18nTexts:ms,getUserByWalletAddress:am,logoutUser:Q1,updateUserGameData:Qc},Symbol.toStringTag,{value:"Module"})),Gx="6.15.0";function Qx(n,e,t){const s=e.split("|").map(i=>i.trim());for(let i=0;i<s.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof n===e)return}const r=new Error(`invalid value for type ${e}`);throw r.code="INVALID_ARGUMENT",r.argument=`value.${t}`,r.value=n,r}async function os(n){const e=Object.keys(n);return(await Promise.all(e.map(s=>Promise.resolve(n[s])))).reduce((s,r,i)=>(s[e[i]]=r,s),{})}function Ge(n,e,t){for(let s in e){let r=e[s];const i=t?t[s]:null;i&&Qx(r,i,s),Object.defineProperty(n,s,{enumerable:!0,value:r,writable:!1})}}function ma(n,e){if(n==null)return"null";if(e==null&&(e=new Set),typeof n=="object"){if(e.has(n))return"[Circular]";e.add(n)}if(Array.isArray(n))return"[ "+n.map(t=>ma(t,e)).join(", ")+" ]";if(n instanceof Uint8Array){const t="0123456789abcdef";let s="0x";for(let r=0;r<n.length;r++)s+=t[n[r]>>4],s+=t[n[r]&15];return s}if(typeof n=="object"&&typeof n.toJSON=="function")return ma(n.toJSON(),e);switch(typeof n){case"boolean":case"number":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"string":return JSON.stringify(n);case"object":{const t=Object.keys(n);return t.sort(),"{ "+t.map(s=>`${ma(s,e)}: ${ma(n[s],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Hn(n,e){return n&&n.code===e}function lm(n){return Hn(n,"CALL_EXCEPTION")}function Gt(n,e,t){let s=n;{const i=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${ma(t)}`);for(const o in t){if(o==="shortMessage")continue;const a=t[o];i.push(o+"="+ma(a))}}i.push(`code=${e}`),i.push(`version=${Gx}`),i.length&&(n+=" ("+i.join(", ")+")")}let r;switch(e){case"INVALID_ARGUMENT":r=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":r=new RangeError(n);break;default:r=new Error(n)}return Ge(r,{code:e}),t&&Object.assign(r,t),r.shortMessage==null&&Ge(r,{shortMessage:s}),r}function ce(n,e,t,s){if(!n)throw Gt(e,t,s)}function $(n,e,t,s){ce(n,e,"INVALID_ARGUMENT",{argument:t,value:s})}function z1(n,e,t){t==null&&(t=""),t&&(t=": "+t),ce(n>=e,"missing argument"+t,"MISSING_ARGUMENT",{count:n,expectedCount:e}),ce(n<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:n,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((n,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");n.push(e)}catch{}return n},[]);function pu(n,e,t){if(t==null&&(t=""),n!==e){let s=t,r="new";t&&(s+=".",r+=" "+t),ce(!1,`private constructor; use ${s}from* methods`,"UNSUPPORTED_OPERATION",{operation:r})}}function W1(n,e,t){if(n instanceof Uint8Array)return t?new Uint8Array(n):n;if(typeof n=="string"&&n.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const s=new Uint8Array((n.length-2)/2);let r=2;for(let i=0;i<s.length;i++)s[i]=parseInt(n.substring(r,r+2),16),r+=2;return s}$(!1,"invalid BytesLike value",e||"value",n)}function ot(n,e){return W1(n,e,!1)}function cs(n,e){return W1(n,e,!0)}function Bt(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&n.length!==2+2*e||e===!0&&n.length%2!==0)}function cm(n){return Bt(n,!0)||n instanceof Uint8Array}const Zy="0123456789abcdef";function _e(n){const e=ot(n);let t="0x";for(let s=0;s<e.length;s++){const r=e[s];t+=Zy[(r&240)>>4]+Zy[r&15]}return t}function sn(n){return"0x"+n.map(e=>_e(e).substring(2)).join("")}function Ca(n){return Bt(n,!0)?(n.length-2)/2:ot(n).length}function en(n,e,t){const s=ot(n);return t!=null&&t>s.length&&ce(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:s,length:s.length,offset:t}),_e(s.slice(e??0,t??s.length))}function K1(n,e,t){const s=ot(n);ce(e>=s.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(s),length:e,offset:e+1});const r=new Uint8Array(e);return r.fill(0),t?r.set(s,e-s.length):r.set(s,0),_e(r)}function ni(n,e){return K1(n,e,!0)}function jx(n,e){return K1(n,e,!1)}const Oh=BigInt(0),Ys=BigInt(1),va=9007199254740991;function Hd(n,e){const t=Lh(n,"value"),s=BigInt(rt(e,"width"));if(ce(t>>s===Oh,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:n}),t>>s-Ys){const r=(Ys<<s)-Ys;return-((~t&r)+Ys)}return t}function q1(n,e){let t=Se(n,"value");const s=BigInt(rt(e,"width")),r=Ys<<s-Ys;if(t<Oh){t=-t,ce(t<=r,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});const i=(Ys<<s)-Ys;return(~t&i)+Ys}else ce(t<r,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});return t}function Co(n,e){const t=Lh(n,"value"),s=BigInt(rt(e,"bits"));return t&(Ys<<s)-Ys}function Se(n,e){switch(typeof n){case"bigint":return n;case"number":return $(Number.isInteger(n),"underflow",e||"value",n),$(n>=-va&&n<=va,"overflow",e||"value",n),BigInt(n);case"string":try{if(n==="")throw new Error("empty string");return n[0]==="-"&&n[1]!=="-"?-BigInt(n.substring(1)):BigInt(n)}catch(t){$(!1,`invalid BigNumberish string: ${t.message}`,e||"value",n)}}$(!1,"invalid BigNumberish value",e||"value",n)}function Lh(n,e){const t=Se(n,e);return ce(t>=Oh,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n}),t}const e0="0123456789abcdef";function Bh(n){if(n instanceof Uint8Array){let e="0x0";for(const t of n)e+=e0[t>>4],e+=e0[t&15];return BigInt(e)}return Se(n)}function rt(n,e){switch(typeof n){case"bigint":return $(n>=-va&&n<=va,"overflow",e||"value",n),Number(n);case"number":return $(Number.isInteger(n),"underflow",e||"value",n),$(n>=-va&&n<=va,"overflow",e||"value",n),n;case"string":try{if(n==="")throw new Error("empty string");return rt(BigInt(n),e)}catch(t){$(!1,`invalid numeric string: ${t.message}`,e||"value",n)}}$(!1,"invalid numeric value",e||"value",n)}function zx(n){return rt(Bh(n))}function ji(n,e){let s=Lh(n,"value").toString(16);if(e==null)s.length%2&&(s="0"+s);else{const r=rt(e,"width");for(ce(r*2>=s.length,`value exceeds width (${r} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});s.length<r*2;)s="0"+s}return"0x"+s}function Tn(n){const e=Lh(n,"value");if(e===Oh)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const s=new Uint8Array(t.length/2);for(let r=0;r<s.length;r++){const i=r*2;s[r]=parseInt(t.substring(i,i+2),16)}return s}function Js(n){let e=_e(cm(n)?n:Tn(n)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const t0="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const n0=BigInt(58);function Wx(n){const e=ot(n);let t=Bh(e),s="";for(;t;)s=t0[Number(t%n0)]+s,t/=n0;for(let r=0;r<e.length&&!e[r];r++)s=t0[0]+s;return s}function Kx(n){n=atob(n);const e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return ot(e)}function qx(n){const e=ot(n);let t="";for(let s=0;s<e.length;s++)t+=String.fromCharCode(e[s]);return btoa(t)}class J1{filter;emitter;#e;constructor(e,t,s){this.#e=t,Ge(this,{emitter:e,filter:s})}async removeListener(){this.#e!=null&&await this.emitter.off(this.filter,this.#e)}}function Jx(n,e,t,s,r){$(!1,`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function Y1(n,e,t,s,r){if(n==="BAD_PREFIX"||n==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)i++;return i}return n==="OVERRUN"?t.length-e-1:0}function Yx(n,e,t,s,r){return n==="OVERLONG"?($(typeof r=="number","invalid bad code point for replacement","badCodepoint",r),s.push(r),0):(s.push(65533),Y1(n,e,t))}const Xx=Object.freeze({error:Jx,ignore:Y1,replace:Yx});function Zx(n,e){e==null&&(e=Xx.error);const t=ot(n,"bytes"),s=[];let r=0;for(;r<t.length;){const i=t[r++];if(i>>7===0){s.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?r+=e("UNEXPECTED_CONTINUE",r-1,t,s):r+=e("BAD_PREFIX",r-1,t,s);continue}if(r-1+o>=t.length){r+=e("OVERRUN",r-1,t,s);continue}let l=i&(1<<8-o-1)-1;for(let c=0;c<o;c++){let d=t[r];if((d&192)!=128){r+=e("MISSING_CONTINUE",r,t,s),l=null;break}l=l<<6|d&63,r++}if(l!==null){if(l>1114111){r+=e("OUT_OF_RANGE",r-1-o,t,s,l);continue}if(l>=55296&&l<=57343){r+=e("UTF16_SURROGATE",r-1-o,t,s,l);continue}if(l<=a){r+=e("OVERLONG",r-1-o,t,s,l);continue}s.push(l)}}return s}function Jr(n,e){$(typeof n=="string","invalid string value","str",n);let t=[];for(let s=0;s<n.length;s++){const r=n.charCodeAt(s);if(r<128)t.push(r);else if(r<2048)t.push(r>>6|192),t.push(r&63|128);else if((r&64512)==55296){s++;const i=n.charCodeAt(s);$(s<n.length&&(i&64512)===56320,"invalid surrogate pair","str",n);const o=65536+((r&1023)<<10)+(i&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(r>>12|224),t.push(r>>6&63|128),t.push(r&63|128)}return new Uint8Array(t)}function ek(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Gd(n,e){return ek(Zx(n,e))}function X1(n){async function e(t,s){ce(s==null||!s.cancelled,"request cancelled before sending","CANCELLED");const r=t.url.split(":")[0].toLowerCase();ce(r==="http"||r==="https",`unsupported protocol ${r}`,"UNSUPPORTED_OPERATION",{info:{protocol:r},operation:"request"}),ce(r==="https"||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=Gt("request timeout","TIMEOUT"),o.abort()},t.timeout);s&&s.addListener(()=>{i=Gt("request cancelled","CANCELLED"),o.abort()});const l=Object.assign({},n,{method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:o.signal});let c;try{c=await fetch(t.url,l)}catch(m){throw clearTimeout(a),i||m}clearTimeout(a);const d={};c.headers.forEach((m,_)=>{d[_.toLowerCase()]=m});const f=await c.arrayBuffer(),p=f==null?null:new Uint8Array(f);return{statusCode:c.status,statusMessage:c.statusText,headers:d,body:p}}return e}const tk=12,nk=250;let s0=X1();const sk=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),rk=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let jf=!1;async function Z1(n,e){try{const t=n.match(sk);if(!t)throw new Error("invalid data");return new Mi(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?Kx(t[3]):ok(t[3]))}catch{return new Mi(599,"BAD REQUEST (invalid data: URI)",{},null,new si(n))}}function eE(n){async function e(t,s){try{const r=t.match(rk);if(!r)throw new Error("invalid link");return new si(`${n}${r[2]}`)}catch{return new Mi(599,"BAD REQUEST (invalid IPFS URI)",{},null,new si(t))}}return e}const Ku={data:Z1,ipfs:eE("https://gateway.ipfs.io/ipfs/")},tE=new WeakMap;class ik{#e;#t;constructor(e){this.#e=[],this.#t=!1,tE.set(e,()=>{if(!this.#t){this.#t=!0;for(const t of this.#e)setTimeout(()=>{t()},0);this.#e=[]}})}addListener(e){ce(!this.#t,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#e.push(e)}get cancelled(){return this.#t}checkSignal(){ce(!this.cancelled,"cancelled","CANCELLED",{})}}function qu(n){if(n==null)throw new Error("missing signal; should not happen");return n.checkSignal(),n}class si{#e;#t;#n;#s;#r;#o;#i;#a;#d;#c;#p;#g;#l;#u;#h;get url(){return this.#o}set url(e){this.#o=String(e)}get body(){return this.#i==null?null:new Uint8Array(this.#i)}set body(e){if(e==null)this.#i=void 0,this.#a=void 0;else if(typeof e=="string")this.#i=Jr(e),this.#a="text/plain";else if(e instanceof Uint8Array)this.#i=e,this.#a="application/octet-stream";else if(typeof e=="object")this.#i=Jr(JSON.stringify(e)),this.#a="application/json";else throw new Error("invalid body")}hasBody(){return this.#i!=null}get method(){return this.#s?this.#s:this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),this.#s=String(e).toUpperCase()}get headers(){const e=Object.assign({},this.#n);return this.#d&&(e.authorization=`Basic ${qx(Jr(this.#d))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&this.#a&&(e["content-type"]=this.#a),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){this.#n[String(e).toLowerCase()]=String(t)}clearHeaders(){this.#n={}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let s=0;return{next:()=>{if(s<t.length){const r=t[s++];return{value:[r,e[r]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#d||null}setCredentials(e,t){$(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#d=`${e}:${t}`}get allowGzip(){return this.#t}set allowGzip(e){this.#t=!!e}get allowInsecureAuthentication(){return!!this.#e}set allowInsecureAuthentication(e){this.#e=!!e}get timeout(){return this.#r}set timeout(e){$(e>=0,"timeout must be non-zero","timeout",e),this.#r=e}get preflightFunc(){return this.#c||null}set preflightFunc(e){this.#c=e}get processFunc(){return this.#p||null}set processFunc(e){this.#p=e}get retryFunc(){return this.#g||null}set retryFunc(e){this.#g=e}get getUrlFunc(){return this.#h||s0}set getUrlFunc(e){this.#h=e}constructor(e){this.#o=String(e),this.#e=!1,this.#t=!0,this.#n={},this.#s="",this.#r=3e5,this.#u={slotInterval:nk,maxAttempts:tk},this.#h=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#i?_e(this.#i):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(this.#u.slotInterval=e.slotInterval),e.maxAttempts!=null&&(this.#u.maxAttempts=e.maxAttempts)}async#f(e,t,s,r,i){if(e>=this.#u.maxAttempts)return i.makeServerError("exceeded maximum retry limit");ce(r0()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:r}),s>0&&await ak(s);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in Ku){const d=await Ku[a](o.url,qu(r.#l));if(d instanceof Mi){let f=d;if(this.processFunc){qu(r.#l);try{f=await this.processFunc(o,f)}catch(p){(p.throttle==null||typeof p.stall!="number")&&f.makeServerError("error in post-processing function",p).assertOk()}}return f}o=d}this.preflightFunc&&(o=await this.preflightFunc(o));const l=await this.getUrlFunc(o,qu(r.#l));let c=new Mi(l.statusCode,l.statusMessage,l.headers,l.body,r);if(c.statusCode===301||c.statusCode===302){try{const d=c.headers.location||"";return o.redirect(d).#f(e+1,t,0,r,c)}catch{}return c}else if(c.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,c,e))){const d=c.headers["retry-after"];let f=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof d=="string"&&d.match(/^[1-9][0-9]*$/)&&(f=parseInt(d)),o.clone().#f(e+1,t,f,r,c)}if(this.processFunc){qu(r.#l);try{c=await this.processFunc(o,c)}catch(d){(d.throttle==null||typeof d.stall!="number")&&c.makeServerError("error in post-processing function",d).assertOk();let f=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return d.stall>=0&&(f=d.stall),o.clone().#f(e+1,t,f,r,c)}}return c}send(){return ce(this.#l==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#l=new ik(this),this.#f(0,r0()+this.timeout,0,this,new Mi(0,"",{},null,this))}cancel(){ce(this.#l!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=tE.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),s=e.split(":")[0].toLowerCase();ce(this.method==="GET"&&(t!=="https"||s!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const r=new si(e);return r.method="GET",r.allowGzip=this.allowGzip,r.timeout=this.timeout,r.#n=Object.assign({},this.#n),this.#i&&(r.#i=new Uint8Array(this.#i)),r.#a=this.#a,r}clone(){const e=new si(this.url);return e.#s=this.#s,this.#i&&(e.#i=this.#i),e.#a=this.#a,e.#n=Object.assign({},this.#n),e.#d=this.#d,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#c=this.#c,e.#p=this.#p,e.#g=this.#g,e.#u=Object.assign({},this.#u),e.#h=this.#h,e}static lockConfig(){jf=!0}static getGateway(e){return Ku[e.toLowerCase()]||null}static registerGateway(e,t){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(jf)throw new Error("gateways locked");Ku[e]=t}static registerGetUrl(e){if(jf)throw new Error("gateways locked");s0=e}static createGetUrlFunc(e){return X1(e)}static createDataGateway(){return Z1}static createIpfsGatewayFunc(e){return eE(e)}}class Mi{#e;#t;#n;#s;#r;#o;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#s?_e(this.#s):"null"}>`}get statusCode(){return this.#e}get statusMessage(){return this.#t}get headers(){return Object.assign({},this.#n)}get body(){return this.#s==null?null:new Uint8Array(this.#s)}get bodyText(){try{return this.#s==null?"":Gd(this.#s)}catch{ce(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{ce(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let s=0;return{next:()=>{if(s<t.length){const r=t[s++];return{value:[r,e[r]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,t,s,r,i){this.#e=e,this.#t=t,this.#n=Object.keys(s).reduce((o,a)=>(o[a.toLowerCase()]=String(s[a]),o),{}),this.#s=r==null?null:new Uint8Array(r),this.#r=i||null,this.#o={message:""}}makeServerError(e,t){let s;e?s=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,s=`CLIENT ESCALATED SERVER ERROR (${e})`);const r=new Mi(599,s,this.headers,this.body,this.#r||void 0);return r.#o={message:e,error:t},r}throwThrottleError(e,t){t==null?t=-1:$(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const s=new Error(e||"throttling requests");throw Ge(s,{stall:t,throttle:!0}),s}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return this.#s!=null}get request(){return this.#r}ok(){return this.#o.message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=this.#o;e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let s=null;this.request&&(s=this.request.url);let r=null;try{this.#s&&(r=Gd(this.#s))}catch{}ce(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:s,responseBody:r,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function r0(){return new Date().getTime()}function ok(n){return Jr(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function ak(n){return new Promise(e=>setTimeout(e,n))}const lk=BigInt(-1),zs=BigInt(0),ya=BigInt(1),ck=BigInt(5),oa={};let Ta="0000";for(;Ta.length<80;)Ta+=Ta;function po(n){let e=Ta;for(;e.length<n;)e+=e;return BigInt("1"+e.substring(0,n))}function lc(n,e,t){const s=BigInt(e.width);if(e.signed){const r=ya<<s-ya;ce(t==null||n>=-r&&n<r,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n>zs?n=Hd(Co(n,s),s):n=-Hd(Co(-n,s),s)}else{const r=ya<<s;ce(t==null||n>=0&&n<r,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n=(n%r+r)%r&r-ya}return n}function zf(n){typeof n=="number"&&(n=`fixed128x${n}`);let e=!0,t=128,s=18;if(typeof n=="string"){if(n!=="fixed")if(n==="ufixed")e=!1;else{const i=n.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);$(i,"invalid fixed format","format",n),e=i[1]!=="u",t=parseInt(i[2]),s=parseInt(i[3])}}else if(n){const i=n,o=(a,l,c)=>i[a]==null?c:($(typeof i[a]===l,"invalid fixed format ("+a+" not "+l+")","format."+a,i[a]),i[a]);e=o("signed","boolean",e),t=o("width","number",t),s=o("decimals","number",s)}$(t%8===0,"invalid FixedNumber width (not byte aligned)","format.width",t),$(s<=80,"invalid FixedNumber decimals (too large)","format.decimals",s);const r=(e?"":"u")+"fixed"+String(t)+"x"+String(s);return{signed:e,width:t,decimals:s,name:r}}function uk(n,e){let t="";n<zs&&(t="-",n*=lk);let s=n.toString();if(e===0)return t+s;for(;s.length<=e;)s=Ta+s;const r=s.length-e;for(s=s.substring(0,r)+"."+s.substring(r);s[0]==="0"&&s[1]!==".";)s=s.substring(1);for(;s[s.length-1]==="0"&&s[s.length-2]!==".";)s=s.substring(0,s.length-1);return t+s}class Ri{format;#e;#t;#n;_value;constructor(e,t,s){pu(e,oa,"FixedNumber"),this.#t=t,this.#e=s;const r=uk(t,s.decimals);Ge(this,{format:s.name,_value:r}),this.#n=po(s.decimals)}get signed(){return this.#e.signed}get width(){return this.#e.width}get decimals(){return this.#e.decimals}get value(){return this.#t}#s(e){$(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#r(e,t){return e=lc(e,this.#e,t),new Ri(oa,e,this.#e)}#o(e,t){return this.#s(e),this.#r(this.#t+e.#t,t)}addUnsafe(e){return this.#o(e)}add(e){return this.#o(e,"add")}#i(e,t){return this.#s(e),this.#r(this.#t-e.#t,t)}subUnsafe(e){return this.#i(e)}sub(e){return this.#i(e,"sub")}#a(e,t){return this.#s(e),this.#r(this.#t*e.#t/this.#n,t)}mulUnsafe(e){return this.#a(e)}mul(e){return this.#a(e,"mul")}mulSignal(e){this.#s(e);const t=this.#t*e.#t;return ce(t%this.#n===zs,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#r(t/this.#n,"mulSignal")}#d(e,t){return ce(e.#t!==zs,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#s(e),this.#r(this.#t*this.#n/e.#t,t)}divUnsafe(e){return this.#d(e)}div(e){return this.#d(e,"div")}divSignal(e){ce(e.#t!==zs,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#s(e);const t=this.#t*this.#n;return ce(t%e.#t===zs,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#r(t/e.#t,"divSignal")}cmp(e){let t=this.value,s=e.value;const r=this.decimals-e.decimals;return r>0?s*=po(r):r<0&&(t*=po(-r)),t<s?-1:t>s?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#t;return this.#t<zs&&(e-=this.#n-ya),e=this.#t/this.#n*this.#n,this.#r(e,"floor")}ceiling(){let e=this.#t;return this.#t>zs&&(e+=this.#n-ya),e=this.#t/this.#n*this.#n,this.#r(e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,s=ck*po(t-1);let r=this.value+s;const i=po(t);return r=r/i*i,lc(r,this.#e,"round"),new Ri(oa,r,this.#e)}isZero(){return this.#t===zs}isNegative(){return this.#t<zs}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Ri.fromString(this.toString(),e)}static fromValue(e,t,s){const r=t==null?0:rt(t),i=zf(s);let o=Se(e,"value");const a=r-i.decimals;if(a>0){const l=po(a);ce(o%l===zs,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=l}else a<0&&(o*=po(-a));return lc(o,i,"fromValue"),new Ri(oa,o,i)}static fromString(e,t){const s=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);$(s&&s[2].length+s[3].length>0,"invalid FixedNumber string value","value",e);const r=zf(t);let i=s[2]||"0",o=s[3]||"";for(;o.length<r.decimals;)o+=Ta;ce(o.substring(r.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,r.decimals);const a=BigInt(s[1]+i+o);return lc(a,r,"fromString"),new Ri(oa,a,r)}static fromBytes(e,t){let s=Bh(ot(e,"value"));const r=zf(t);return r.signed&&(s=Hd(s,r.width)),lc(s,r,"fromBytes"),new Ri(oa,s,r)}}function dk(n){let e=n.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function i0(n,e,t){let s=0;for(let r=0;r<t;r++)s=s*256+n[e+r];return s}function o0(n,e,t,s){const r=[];for(;t<e+1+s;){const i=nE(n,t);r.push(i.result),t+=i.consumed,ce(t<=e+1+s,"child data too short","BUFFER_OVERRUN",{buffer:n,length:s,offset:e})}return{consumed:1+s,result:r}}function nE(n,e){ce(n.length!==0,"data too short","BUFFER_OVERRUN",{buffer:n,length:0,offset:1});const t=s=>{ce(s<=n.length,"data short segment too short","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:s})};if(n[e]>=248){const s=n[e]-247;t(e+1+s);const r=i0(n,e+1,s);return t(e+1+s+r),o0(n,e,e+1+s,s+r)}else if(n[e]>=192){const s=n[e]-192;return t(e+1+s),o0(n,e,e+1,s)}else if(n[e]>=184){const s=n[e]-183;t(e+1+s);const r=i0(n,e+1,s);t(e+1+s+r);const i=_e(n.slice(e+1+s,e+1+s+r));return{consumed:1+s+r,result:i}}else if(n[e]>=128){const s=n[e]-128;t(e+1+s);const r=_e(n.slice(e+1,e+1+s));return{consumed:1+s,result:r}}return{consumed:1,result:dk(n[e])}}function gu(n){const e=ot(n,"data"),t=nE(e,0);return $(t.consumed===e.length,"unexpected junk after rlp payload","data",n),t.result}function a0(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function sE(n){if(Array.isArray(n)){let s=[];if(n.forEach(function(i){s=s.concat(sE(i))}),s.length<=55)return s.unshift(192+s.length),s;const r=a0(s.length);return r.unshift(247+r.length),r.concat(s)}const e=Array.prototype.slice.call(ot(n,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=a0(e.length);return t.unshift(183+t.length),t.concat(e)}const l0="0123456789abcdef";function zi(n){let e="0x";for(const t of sE(n))e+=l0[t>>4],e+=l0[t&15];return e}function hk(n,e){let t=18;return t=rt(e,"unit"),Ri.fromValue(n,t,{decimals:t,width:512}).toString()}function rE(n){return hk(n,18)}const ds=32,Qp=new Uint8Array(ds),fk=["then"],Ju={},iE=new WeakMap;function wo(n){return iE.get(n)}function c0(n,e){iE.set(n,e)}function cc(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);throw t.error=e,t}function jp(n,e,t){return n.indexOf(null)>=0?e.map((s,r)=>s instanceof jr?jp(wo(s),s,t):s):n.reduce((s,r,i)=>{let o=e.getValue(r);return r in s||(t&&o instanceof jr&&(o=jp(wo(o),o,t)),s[r]=o),s},{})}class jr extends Array{#e;constructor(...e){const t=e[0];let s=e[1],r=(e[2]||[]).slice(),i=!0;t!==Ju&&(s=e,r=[],i=!1),super(s.length),s.forEach((l,c)=>{this[c]=l});const o=r.reduce((l,c)=>(typeof c=="string"&&l.set(c,(l.get(c)||0)+1),l),new Map);if(c0(this,Object.freeze(s.map((l,c)=>{const d=r[c];return d!=null&&o.get(d)===1?d:null}))),this.#e=[],this.#e==null&&this.#e,!i)return;Object.freeze(this);const a=new Proxy(this,{get:(l,c,d)=>{if(typeof c=="string"){if(c.match(/^[0-9]+$/)){const p=rt(c,"%index");if(p<0||p>=this.length)throw new RangeError("out of result range");const m=l[p];return m instanceof Error&&cc(`index ${p}`,m),m}if(fk.indexOf(c)>=0)return Reflect.get(l,c,d);const f=l[c];if(f instanceof Function)return function(...p){return f.apply(this===d?l:this,p)};if(!(c in l))return l.getValue.apply(this===d?l:this,[c])}return Reflect.get(l,c,d)}});return c0(a,wo(this)),a}toArray(e){const t=[];return this.forEach((s,r)=>{s instanceof Error&&cc(`index ${r}`,s),e&&s instanceof jr&&(s=s.toArray(e)),t.push(s)}),t}toObject(e){const t=wo(this);return t.reduce((s,r,i)=>(ce(r!=null,`value at index ${i} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),jp(t,this,e)),{})}slice(e,t){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),t==null&&(t=this.length),t<0&&(t+=this.length,t<0&&(t=0)),t>this.length&&(t=this.length);const s=wo(this),r=[],i=[];for(let o=e;o<t;o++)r.push(this[o]),i.push(s[o]);return new jr(Ju,r,i)}filter(e,t){const s=wo(this),r=[],i=[];for(let o=0;o<this.length;o++){const a=this[o];a instanceof Error&&cc(`index ${o}`,a),e.call(t,a,o,this)&&(r.push(a),i.push(s[o]))}return new jr(Ju,r,i)}map(e,t){const s=[];for(let r=0;r<this.length;r++){const i=this[r];i instanceof Error&&cc(`index ${r}`,i),s.push(e.call(t,i,r,this))}return s}getValue(e){const t=wo(this).indexOf(e);if(t===-1)return;const s=this[t];return s instanceof Error&&cc(`property ${JSON.stringify(e)}`,s.error),s}static fromItems(e,t){return new jr(Ju,e,t)}}function u0(n){let e=Tn(n);return ce(e.length<=ds,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:ds,offset:e.length}),e.length!==ds&&(e=cs(sn([Qp.slice(e.length%ds),e]))),e}class hi{name;type;localName;dynamic;constructor(e,t,s,r){Ge(this,{name:e,type:t,localName:s,dynamic:r},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){$(!1,e,this.localName,t)}}class zp{#e;#t;constructor(){this.#e=[],this.#t=0}get data(){return sn(this.#e)}get length(){return this.#t}#n(e){return this.#e.push(e),this.#t+=e.length,e.length}appendWriter(e){return this.#n(cs(e.data))}writeBytes(e){let t=cs(e);const s=t.length%ds;return s&&(t=cs(sn([t,Qp.slice(s)]))),this.#n(t)}writeValue(e){return this.#n(u0(e))}writeUpdatableValue(){const e=this.#e.length;return this.#e.push(Qp),this.#t+=ds,t=>{this.#e[e]=u0(t)}}}class um{allowLoose;#e;#t;#n;#s;#r;constructor(e,t,s){Ge(this,{allowLoose:!!t}),this.#e=cs(e),this.#n=0,this.#s=null,this.#r=s??1024,this.#t=0}get data(){return _e(this.#e)}get dataLength(){return this.#e.length}get consumed(){return this.#t}get bytes(){return new Uint8Array(this.#e)}#o(e){if(this.#s)return this.#s.#o(e);this.#n+=e,ce(this.#r<1||this.#n<=this.#r*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#r} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:cs(this.#e),offset:this.#t,length:e,info:{bytesRead:this.#n,dataLength:this.dataLength}})}#i(e,t,s){let r=Math.ceil(t/ds)*ds;return this.#t+r>this.#e.length&&(this.allowLoose&&s&&this.#t+t<=this.#e.length?r=t:ce(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:cs(this.#e),length:this.#e.length,offset:this.#t+r})),this.#e.slice(this.#t,this.#t+r)}subReader(e){const t=new um(this.#e.slice(this.#t+e),this.allowLoose,this.#r);return t.#s=this,t}readBytes(e,t){let s=this.#i(0,e,!!t);return this.#o(e),this.#t+=s.length,s.slice(0,e)}readValue(){return Bh(this.readBytes(ds))}readIndex(){return zx(this.readBytes(ds))}}function Qd(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function dm(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function pk(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Qd(n.outputLen),Qd(n.blockLen)}function Ua(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function oE(n,e){dm(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Wf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const aE=n=>n instanceof Uint8Array,gk=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),Kf=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),dr=(n,e)=>n<<32-e|n>>>e,mk=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!mk)throw new Error("Non little-endian hardware is not supported");function vk(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Mh(n){if(typeof n=="string"&&(n=vk(n)),!aE(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function yk(...n){const e=new Uint8Array(n.reduce((s,r)=>s+r.length,0));let t=0;return n.forEach(s=>{if(!aE(s))throw new Error("Uint8Array expected");e.set(s,t),t+=s.length}),e}class hm{clone(){return this._cloneInto()}}function fm(n){const e=s=>n().update(Mh(s)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function Ak(n=32){if(Wf&&typeof Wf.getRandomValues=="function")return Wf.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}class lE extends hm{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,pk(e);const s=Mh(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(s.length>r?e.create().update(s).digest():s);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Ua(this),this.iHash.update(e),this}digestInto(e){Ua(this),dm(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:s,finished:r,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=s._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const cE=(n,e,t)=>new lE(n,e).update(t).digest();cE.create=(n,e)=>new lE(n,e);function wk(n,e,t,s){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,s);const r=BigInt(32),i=BigInt(4294967295),o=Number(t>>r&i),a=Number(t&i),l=s?4:0,c=s?0:4;n.setUint32(e+l,o,s),n.setUint32(e+c,a,s)}class uE extends hm{constructor(e,t,s,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=s,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Kf(this.buffer)}update(e){Ua(this);const{view:t,buffer:s,blockLen:r}=this;e=Mh(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(r-this.pos,i-o);if(a===r){const l=Kf(e);for(;r<=i-o;o+=r)this.process(l,o);continue}s.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===r&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ua(this),oE(e,this),this.finished=!0;const{buffer:t,view:s,blockLen:r,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(s,0),o=0);for(let f=o;f<r;f++)t[f]=0;wk(s,r-8,BigInt(this.length*8),i),this.process(s,0);const a=Kf(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,d=this.get();if(c>d.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<c;f++)a.setUint32(4*f,d[f],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const s=e.slice(0,t);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:s,length:r,finished:i,destroyed:o,pos:a}=this;return e.length=r,e.pos=a,e.finished=i,e.destroyed=o,r%t&&e.buffer.set(s),e}}const _k=(n,e,t)=>n&e^~n&t,Ek=(n,e,t)=>n&e^n&t^e&t,bk=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),wi=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),_i=new Uint32Array(64);class Ik extends uE{constructor(){super(64,32,8,!1),this.A=wi[0]|0,this.B=wi[1]|0,this.C=wi[2]|0,this.D=wi[3]|0,this.E=wi[4]|0,this.F=wi[5]|0,this.G=wi[6]|0,this.H=wi[7]|0}get(){const{A:e,B:t,C:s,D:r,E:i,F:o,G:a,H:l}=this;return[e,t,s,r,i,o,a,l]}set(e,t,s,r,i,o,a,l){this.A=e|0,this.B=t|0,this.C=s|0,this.D=r|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,t){for(let f=0;f<16;f++,t+=4)_i[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){const p=_i[f-15],m=_i[f-2],_=dr(p,7)^dr(p,18)^p>>>3,y=dr(m,17)^dr(m,19)^m>>>10;_i[f]=y+_i[f-7]+_+_i[f-16]|0}let{A:s,B:r,C:i,D:o,E:a,F:l,G:c,H:d}=this;for(let f=0;f<64;f++){const p=dr(a,6)^dr(a,11)^dr(a,25),m=d+p+_k(a,l,c)+bk[f]+_i[f]|0,y=(dr(s,2)^dr(s,13)^dr(s,22))+Ek(s,r,i)|0;d=c,c=l,l=a,a=o+m|0,o=i,i=r,r=s,s=m+y|0}s=s+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,d=d+this.H|0,this.set(s,r,i,o,a,l,c,d)}roundClean(){_i.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const dE=fm(()=>new Ik),Yu=BigInt(2**32-1),Wp=BigInt(32);function hE(n,e=!1){return e?{h:Number(n&Yu),l:Number(n>>Wp&Yu)}:{h:Number(n>>Wp&Yu)|0,l:Number(n&Yu)|0}}function fE(n,e=!1){let t=new Uint32Array(n.length),s=new Uint32Array(n.length);for(let r=0;r<n.length;r++){const{h:i,l:o}=hE(n[r],e);[t[r],s[r]]=[i,o]}return[t,s]}const Ck=(n,e)=>BigInt(n>>>0)<<Wp|BigInt(e>>>0),Tk=(n,e,t)=>n>>>t,Sk=(n,e,t)=>n<<32-t|e>>>t,Pk=(n,e,t)=>n>>>t|e<<32-t,Rk=(n,e,t)=>n<<32-t|e>>>t,xk=(n,e,t)=>n<<64-t|e>>>t-32,kk=(n,e,t)=>n>>>t-32|e<<64-t,Nk=(n,e)=>e,Dk=(n,e)=>n,pE=(n,e,t)=>n<<t|e>>>32-t,gE=(n,e,t)=>e<<t|n>>>32-t,mE=(n,e,t)=>e<<t-32|n>>>64-t,vE=(n,e,t)=>n<<t-32|e>>>64-t;function Ok(n,e,t,s){const r=(e>>>0)+(s>>>0);return{h:n+t+(r/2**32|0)|0,l:r|0}}const Lk=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),Bk=(n,e,t,s)=>e+t+s+(n/2**32|0)|0,Mk=(n,e,t,s)=>(n>>>0)+(e>>>0)+(t>>>0)+(s>>>0),Fk=(n,e,t,s,r)=>e+t+s+r+(n/2**32|0)|0,Uk=(n,e,t,s,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(s>>>0)+(r>>>0),Vk=(n,e,t,s,r,i)=>e+t+s+r+i+(n/2**32|0)|0,st={fromBig:hE,split:fE,toBig:Ck,shrSH:Tk,shrSL:Sk,rotrSH:Pk,rotrSL:Rk,rotrBH:xk,rotrBL:kk,rotr32H:Nk,rotr32L:Dk,rotlSH:pE,rotlSL:gE,rotlBH:mE,rotlBL:vE,add:Ok,add3L:Lk,add3H:Bk,add4L:Mk,add4H:Fk,add5H:Vk,add5L:Uk},[$k,Hk]=st.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Ei=new Uint32Array(80),bi=new Uint32Array(80);class Gk extends uE{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:s,Bl:r,Ch:i,Cl:o,Dh:a,Dl:l,Eh:c,El:d,Fh:f,Fl:p,Gh:m,Gl:_,Hh:y,Hl:A}=this;return[e,t,s,r,i,o,a,l,c,d,f,p,m,_,y,A]}set(e,t,s,r,i,o,a,l,c,d,f,p,m,_,y,A){this.Ah=e|0,this.Al=t|0,this.Bh=s|0,this.Bl=r|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=d|0,this.Fh=f|0,this.Fl=p|0,this.Gh=m|0,this.Gl=_|0,this.Hh=y|0,this.Hl=A|0}process(e,t){for(let C=0;C<16;C++,t+=4)Ei[C]=e.getUint32(t),bi[C]=e.getUint32(t+=4);for(let C=16;C<80;C++){const M=Ei[C-15]|0,Q=bi[C-15]|0,q=st.rotrSH(M,Q,1)^st.rotrSH(M,Q,8)^st.shrSH(M,Q,7),x=st.rotrSL(M,Q,1)^st.rotrSL(M,Q,8)^st.shrSL(M,Q,7),T=Ei[C-2]|0,P=bi[C-2]|0,S=st.rotrSH(T,P,19)^st.rotrBH(T,P,61)^st.shrSH(T,P,6),b=st.rotrSL(T,P,19)^st.rotrBL(T,P,61)^st.shrSL(T,P,6),D=st.add4L(x,b,bi[C-7],bi[C-16]),k=st.add4H(D,q,S,Ei[C-7],Ei[C-16]);Ei[C]=k|0,bi[C]=D|0}let{Ah:s,Al:r,Bh:i,Bl:o,Ch:a,Cl:l,Dh:c,Dl:d,Eh:f,El:p,Fh:m,Fl:_,Gh:y,Gl:A,Hh:w,Hl:I}=this;for(let C=0;C<80;C++){const M=st.rotrSH(f,p,14)^st.rotrSH(f,p,18)^st.rotrBH(f,p,41),Q=st.rotrSL(f,p,14)^st.rotrSL(f,p,18)^st.rotrBL(f,p,41),q=f&m^~f&y,x=p&_^~p&A,T=st.add5L(I,Q,x,Hk[C],bi[C]),P=st.add5H(T,w,M,q,$k[C],Ei[C]),S=T|0,b=st.rotrSH(s,r,28)^st.rotrBH(s,r,34)^st.rotrBH(s,r,39),D=st.rotrSL(s,r,28)^st.rotrBL(s,r,34)^st.rotrBL(s,r,39),k=s&i^s&a^i&a,ke=r&o^r&l^o&l;w=y|0,I=A|0,y=m|0,A=_|0,m=f|0,_=p|0,{h:f,l:p}=st.add(c|0,d|0,P|0,S|0),c=a|0,d=l|0,a=i|0,l=o|0,i=s|0,o=r|0;const ie=st.add3L(S,D,ke);s=st.add3H(ie,P,b,k),r=ie|0}({h:s,l:r}=st.add(this.Ah|0,this.Al|0,s|0,r|0)),{h:i,l:o}=st.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l}=st.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:d}=st.add(this.Dh|0,this.Dl|0,c|0,d|0),{h:f,l:p}=st.add(this.Eh|0,this.El|0,f|0,p|0),{h:m,l:_}=st.add(this.Fh|0,this.Fl|0,m|0,_|0),{h:y,l:A}=st.add(this.Gh|0,this.Gl|0,y|0,A|0),{h:w,l:I}=st.add(this.Hh|0,this.Hl|0,w|0,I|0),this.set(s,r,i,o,a,l,c,d,f,p,m,_,y,A,w,I)}roundClean(){Ei.fill(0),bi.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Qk=fm(()=>new Gk);function jk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const d0=jk();d0.crypto||d0.msCrypto;function zk(n){switch(n){case"sha256":return dE.create();case"sha512":return Qk.create()}$(!1,"invalid hashing algorithm name","algorithm",n)}const[yE,AE,wE]=[[],[],[]],Wk=BigInt(0),uc=BigInt(1),Kk=BigInt(2),qk=BigInt(7),Jk=BigInt(256),Yk=BigInt(113);for(let n=0,e=uc,t=1,s=0;n<24;n++){[t,s]=[s,(2*t+3*s)%5],yE.push(2*(5*s+t)),AE.push((n+1)*(n+2)/2%64);let r=Wk;for(let i=0;i<7;i++)e=(e<<uc^(e>>qk)*Yk)%Jk,e&Kk&&(r^=uc<<(uc<<BigInt(i))-uc);wE.push(r)}const[Xk,Zk]=fE(wE,!0),h0=(n,e,t)=>t>32?mE(n,e,t):pE(n,e,t),f0=(n,e,t)=>t>32?vE(n,e,t):gE(n,e,t);function e2(n,e=24){const t=new Uint32Array(10);for(let s=24-e;s<24;s++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=t[l],d=t[l+1],f=h0(c,d,1)^t[a],p=f0(c,d,1)^t[a+1];for(let m=0;m<50;m+=10)n[o+m]^=f,n[o+m+1]^=p}let r=n[2],i=n[3];for(let o=0;o<24;o++){const a=AE[o],l=h0(r,i,a),c=f0(r,i,a),d=yE[o];r=n[d],i=n[d+1],n[d]=l,n[d+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=n[o+a];for(let a=0;a<10;a++)n[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}n[0]^=Xk[s],n[1]^=Zk[s]}t.fill(0)}class pm extends hm{constructor(e,t,s,r=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=s,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Qd(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=gk(this.state)}keccak(){e2(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Ua(this);const{blockLen:t,state:s}=this;e=Mh(e);const r=e.length;for(let i=0;i<r;){const o=Math.min(t-this.pos,r-i);for(let a=0;a<o;a++)s[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:s,blockLen:r}=this;e[s]^=t,(t&128)!==0&&s===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){Ua(this,!1),dm(e),this.finish();const t=this.state,{blockLen:s}=this;for(let r=0,i=e.length;r<i;){this.posOut>=s&&this.keccak();const o=Math.min(s-this.posOut,i-r);e.set(t.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Qd(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(oE(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:s,outputLen:r,rounds:i,enableXOF:o}=this;return e||(e=new pm(t,s,r,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=s,e.outputLen=r,e.enableXOF=o,e.destroyed=this.destroyed,e}}const t2=(n,e,t)=>fm(()=>new pm(e,n,t)),n2=t2(1,136,256/8);let _E=!1;const EE=function(n){return n2(n)};let bE=EE;function vn(n){const e=ot(n,"data");return _e(bE(e))}vn._=EE;vn.lock=function(){_E=!0};vn.register=function(n){if(_E)throw new TypeError("keccak256 is locked");bE=n};Object.freeze(vn);const IE=function(n){return zk("sha256").update(n).digest()};let CE=IE,TE=!1;function nl(n){const e=ot(n,"data");return _e(CE(e))}nl._=IE;nl.lock=function(){TE=!0};nl.register=function(n){if(TE)throw new Error("sha256 is locked");CE=n};Object.freeze(nl);Object.freeze(nl);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const SE=BigInt(0),Fh=BigInt(1),s2=BigInt(2),Uh=n=>n instanceof Uint8Array,r2=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Va(n){if(!Uh(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=r2[n[t]];return e}function PE(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function gm(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function $a(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let s=0;s<t.length;s++){const r=s*2,i=n.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[s]=o}return t}function No(n){return gm(Va(n))}function mm(n){if(!Uh(n))throw new Error("Uint8Array expected");return gm(Va(Uint8Array.from(n).reverse()))}function Ha(n,e){return $a(n.toString(16).padStart(e*2,"0"))}function vm(n,e){return Ha(n,e).reverse()}function i2(n){return $a(PE(n))}function Ws(n,e,t){let s;if(typeof e=="string")try{s=$a(e)}catch(i){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${i}`)}else if(Uh(e))s=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const r=s.length;if(typeof t=="number"&&r!==t)throw new Error(`${n} expected ${t} bytes, got ${r}`);return s}function jc(...n){const e=new Uint8Array(n.reduce((s,r)=>s+r.length,0));let t=0;return n.forEach(s=>{if(!Uh(s))throw new Error("Uint8Array expected");e.set(s,t),t+=s.length}),e}function o2(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function a2(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function l2(n){let e;for(e=0;n>SE;n>>=Fh,e+=1);return e}function c2(n,e){return n>>BigInt(e)&Fh}const u2=(n,e,t)=>n|(t?Fh:SE)<<BigInt(e),ym=n=>(s2<<BigInt(n-1))-Fh,qf=n=>new Uint8Array(n),p0=n=>Uint8Array.from(n);function RE(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let s=qf(n),r=qf(n),i=0;const o=()=>{s.fill(1),r.fill(0),i=0},a=(...f)=>t(r,s,...f),l=(f=qf())=>{r=a(p0([0]),f),s=a(),f.length!==0&&(r=a(p0([1]),f),s=a())},c=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){s=a();const m=s.slice();p.push(m),f+=s.length}return jc(...p)};return(f,p)=>{o(),l(f);let m;for(;!(m=p(c()));)l();return o(),m}}const d2={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function mu(n,e,t={}){const s=(r,i,o)=>{const a=d2[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const l=n[r];if(!(o&&l===void 0)&&!a(l,n))throw new Error(`Invalid param ${String(r)}=${l} (${typeof l}), expected ${i}`)};for(const[r,i]of Object.entries(e))s(r,i,!1);for(const[r,i]of Object.entries(t))s(r,i,!0);return n}const h2=Object.freeze(Object.defineProperty({__proto__:null,bitGet:c2,bitLen:l2,bitMask:ym,bitSet:u2,bytesToHex:Va,bytesToNumberBE:No,bytesToNumberLE:mm,concatBytes:jc,createHmacDrbg:RE,ensureBytes:Ws,equalBytes:o2,hexToBytes:$a,hexToNumber:gm,numberToBytesBE:Ha,numberToBytesLE:vm,numberToHexUnpadded:PE,numberToVarBytesBE:i2,utf8ToBytes:a2,validateObject:mu},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const On=BigInt(0),dn=BigInt(1),_o=BigInt(2),f2=BigInt(3),Kp=BigInt(4),g0=BigInt(5),m0=BigInt(8);BigInt(9);BigInt(16);function _s(n,e){const t=n%e;return t>=On?t:e+t}function p2(n,e,t){if(t<=On||e<On)throw new Error("Expected power/modulo > 0");if(t===dn)return On;let s=dn;for(;e>On;)e&dn&&(s=s*n%t),n=n*n%t,e>>=dn;return s}function Ms(n,e,t){let s=n;for(;e-- >On;)s*=s,s%=t;return s}function qp(n,e){if(n===On||e<=On)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=_s(n,e),s=e,r=On,i=dn;for(;t!==On;){const a=s/t,l=s%t,c=r-i*a;s=t,t=l,r=i,i=c}if(s!==dn)throw new Error("invert: does not exist");return _s(r,e)}function g2(n){const e=(n-dn)/_o;let t,s,r;for(t=n-dn,s=0;t%_o===On;t/=_o,s++);for(r=_o;r<n&&p2(r,e,n)!==n-dn;r++);if(s===1){const o=(n+dn)/Kp;return function(l,c){const d=l.pow(c,o);if(!l.eql(l.sqr(d),c))throw new Error("Cannot find square root");return d}}const i=(t+dn)/_o;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=s,d=a.pow(a.mul(a.ONE,r),t),f=a.pow(l,i),p=a.pow(l,t);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let m=1;for(let y=a.sqr(p);m<c&&!a.eql(y,a.ONE);m++)y=a.sqr(y);const _=a.pow(d,dn<<BigInt(c-m-1));d=a.sqr(_),f=a.mul(f,_),p=a.mul(p,d),c=m}return f}}function m2(n){if(n%Kp===f2){const e=(n+dn)/Kp;return function(s,r){const i=s.pow(r,e);if(!s.eql(s.sqr(i),r))throw new Error("Cannot find square root");return i}}if(n%m0===g0){const e=(n-g0)/m0;return function(s,r){const i=s.mul(r,_o),o=s.pow(i,e),a=s.mul(r,o),l=s.mul(s.mul(a,_o),o),c=s.mul(a,s.sub(l,s.ONE));if(!s.eql(s.sqr(c),r))throw new Error("Cannot find square root");return c}}return g2(n)}const v2=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function y2(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=v2.reduce((s,r)=>(s[r]="function",s),e);return mu(n,t)}function A2(n,e,t){if(t<On)throw new Error("Expected power > 0");if(t===On)return n.ONE;if(t===dn)return e;let s=n.ONE,r=e;for(;t>On;)t&dn&&(s=n.mul(s,r)),r=n.sqr(r),t>>=dn;return s}function w2(n,e){const t=new Array(e.length),s=e.reduce((i,o,a)=>n.is0(o)?i:(t[a]=i,n.mul(i,o)),n.ONE),r=n.inv(s);return e.reduceRight((i,o,a)=>n.is0(o)?i:(t[a]=n.mul(i,t[a]),n.mul(i,o)),r),t}function xE(n,e){const t=e!==void 0?e:n.toString(2).length,s=Math.ceil(t/8);return{nBitLength:t,nByteLength:s}}function _2(n,e,t=!1,s={}){if(n<=On)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:r,nByteLength:i}=xE(n,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=m2(n),a=Object.freeze({ORDER:n,BITS:r,BYTES:i,MASK:ym(r),ZERO:On,ONE:dn,create:l=>_s(l,n),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return On<=l&&l<n},is0:l=>l===On,isOdd:l=>(l&dn)===dn,neg:l=>_s(-l,n),eql:(l,c)=>l===c,sqr:l=>_s(l*l,n),add:(l,c)=>_s(l+c,n),sub:(l,c)=>_s(l-c,n),mul:(l,c)=>_s(l*c,n),pow:(l,c)=>A2(a,l,c),div:(l,c)=>_s(l*qp(c,n),n),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>qp(l,n),sqrt:s.sqrt||(l=>o(a,l)),invertBatch:l=>w2(a,l),cmov:(l,c,d)=>d?c:l,toBytes:l=>t?vm(l,i):Ha(l,i),fromBytes:l=>{if(l.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${l.length}`);return t?mm(l):No(l)}});return Object.freeze(a)}function kE(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function NE(n){const e=kE(n);return e+Math.ceil(e/2)}function E2(n,e,t=!1){const s=n.length,r=kE(e),i=NE(e);if(s<16||s<i||s>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${s}`);const o=t?No(n):mm(n),a=_s(o,e-dn)+dn;return t?vm(a,r):Ha(a,r)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const b2=BigInt(0),Jf=BigInt(1);function I2(n,e){const t=(r,i)=>{const o=i.negate();return r?o:i},s=r=>{const i=Math.ceil(e/r)+1,o=2**(r-1);return{windows:i,windowSize:o}};return{constTimeNegate:t,unsafeLadder(r,i){let o=n.ZERO,a=r;for(;i>b2;)i&Jf&&(o=o.add(a)),a=a.double(),i>>=Jf;return o},precomputeWindow(r,i){const{windows:o,windowSize:a}=s(i),l=[];let c=r,d=c;for(let f=0;f<o;f++){d=c,l.push(d);for(let p=1;p<a;p++)d=d.add(c),l.push(d);c=d.double()}return l},wNAF(r,i,o){const{windows:a,windowSize:l}=s(r);let c=n.ZERO,d=n.BASE;const f=BigInt(2**r-1),p=2**r,m=BigInt(r);for(let _=0;_<a;_++){const y=_*l;let A=Number(o&f);o>>=m,A>l&&(A-=p,o+=Jf);const w=y,I=y+Math.abs(A)-1,C=_%2!==0,M=A<0;A===0?d=d.add(t(C,i[w])):c=c.add(t(M,i[I]))}return{p:c,f:d}},wNAFCached(r,i,o,a){const l=r._WINDOW_SIZE||1;let c=i.get(r);return c||(c=this.precomputeWindow(r,l),l!==1&&i.set(r,a(c))),this.wNAF(l,c,o)}}}function DE(n){return y2(n.Fp),mu(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...xE(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function C2(n){const e=DE(n);mu(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:s,a:r}=e;if(t){if(!s.eql(r,s.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:T2,hexToBytes:S2}=h2,To={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=To;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],s=n.subarray(2,t+2);if(!t||s.length!==t)throw new e("Invalid signature integer: wrong length");if(s[0]&128)throw new e("Invalid signature integer: negative");if(s[0]===0&&!(s[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:T2(s),l:n.subarray(t+2)}},toSig(n){const{Err:e}=To,t=typeof n=="string"?S2(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let s=t.length;if(s<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==s-2)throw new e("Invalid signature: incorrect length");const{d:r,l:i}=To._parseInt(t.subarray(2)),{d:o,l:a}=To._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r,s:o}},hexFromSig(n){const e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,t=c=>{const d=c.toString(16);return d.length&1?`0${d}`:d},s=e(t(n.s)),r=e(t(n.r)),i=s.length/2,o=r.length/2,a=t(i),l=t(o);return`30${t(o+i+4)}02${l}${r}02${a}${s}`}},$r=BigInt(0),Fs=BigInt(1);BigInt(2);const v0=BigInt(3);BigInt(4);function P2(n){const e=C2(n),{Fp:t}=e,s=e.toBytes||((_,y,A)=>{const w=y.toAffine();return jc(Uint8Array.from([4]),t.toBytes(w.x),t.toBytes(w.y))}),r=e.fromBytes||(_=>{const y=_.subarray(1),A=t.fromBytes(y.subarray(0,t.BYTES)),w=t.fromBytes(y.subarray(t.BYTES,2*t.BYTES));return{x:A,y:w}});function i(_){const{a:y,b:A}=e,w=t.sqr(_),I=t.mul(w,_);return t.add(t.add(I,t.mul(_,y)),A)}if(!t.eql(t.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(_){return typeof _=="bigint"&&$r<_&&_<e.n}function a(_){if(!o(_))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(_){const{allowedPrivateKeyLengths:y,nByteLength:A,wrapPrivateKey:w,n:I}=e;if(y&&typeof _!="bigint"){if(_ instanceof Uint8Array&&(_=Va(_)),typeof _!="string"||!y.includes(_.length))throw new Error("Invalid key");_=_.padStart(A*2,"0")}let C;try{C=typeof _=="bigint"?_:No(Ws("private key",_,A))}catch{throw new Error(`private key must be ${A} bytes, hex or bigint, not ${typeof _}`)}return w&&(C=_s(C,I)),a(C),C}const c=new Map;function d(_){if(!(_ instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(y,A,w){if(this.px=y,this.py=A,this.pz=w,y==null||!t.isValid(y))throw new Error("x required");if(A==null||!t.isValid(A))throw new Error("y required");if(w==null||!t.isValid(w))throw new Error("z required")}static fromAffine(y){const{x:A,y:w}=y||{};if(!y||!t.isValid(A)||!t.isValid(w))throw new Error("invalid affine point");if(y instanceof f)throw new Error("projective point not allowed");const I=C=>t.eql(C,t.ZERO);return I(A)&&I(w)?f.ZERO:new f(A,w,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){const A=t.invertBatch(y.map(w=>w.pz));return y.map((w,I)=>w.toAffine(A[I])).map(f.fromAffine)}static fromHex(y){const A=f.fromAffine(r(Ws("pointHex",y)));return A.assertValidity(),A}static fromPrivateKey(y){return f.BASE.multiply(l(y))}_setWindowSize(y){this._WINDOW_SIZE=y,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:y,y:A}=this.toAffine();if(!t.isValid(y)||!t.isValid(A))throw new Error("bad point: x or y not FE");const w=t.sqr(A),I=i(y);if(!t.eql(w,I))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y}=this.toAffine();if(t.isOdd)return!t.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){d(y);const{px:A,py:w,pz:I}=this,{px:C,py:M,pz:Q}=y,q=t.eql(t.mul(A,Q),t.mul(C,I)),x=t.eql(t.mul(w,Q),t.mul(M,I));return q&&x}negate(){return new f(this.px,t.neg(this.py),this.pz)}double(){const{a:y,b:A}=e,w=t.mul(A,v0),{px:I,py:C,pz:M}=this;let Q=t.ZERO,q=t.ZERO,x=t.ZERO,T=t.mul(I,I),P=t.mul(C,C),S=t.mul(M,M),b=t.mul(I,C);return b=t.add(b,b),x=t.mul(I,M),x=t.add(x,x),Q=t.mul(y,x),q=t.mul(w,S),q=t.add(Q,q),Q=t.sub(P,q),q=t.add(P,q),q=t.mul(Q,q),Q=t.mul(b,Q),x=t.mul(w,x),S=t.mul(y,S),b=t.sub(T,S),b=t.mul(y,b),b=t.add(b,x),x=t.add(T,T),T=t.add(x,T),T=t.add(T,S),T=t.mul(T,b),q=t.add(q,T),S=t.mul(C,M),S=t.add(S,S),T=t.mul(S,b),Q=t.sub(Q,T),x=t.mul(S,P),x=t.add(x,x),x=t.add(x,x),new f(Q,q,x)}add(y){d(y);const{px:A,py:w,pz:I}=this,{px:C,py:M,pz:Q}=y;let q=t.ZERO,x=t.ZERO,T=t.ZERO;const P=e.a,S=t.mul(e.b,v0);let b=t.mul(A,C),D=t.mul(w,M),k=t.mul(I,Q),ke=t.add(A,w),ie=t.add(C,M);ke=t.mul(ke,ie),ie=t.add(b,D),ke=t.sub(ke,ie),ie=t.add(A,I);let H=t.add(C,Q);return ie=t.mul(ie,H),H=t.add(b,k),ie=t.sub(ie,H),H=t.add(w,I),q=t.add(M,Q),H=t.mul(H,q),q=t.add(D,k),H=t.sub(H,q),T=t.mul(P,ie),q=t.mul(S,k),T=t.add(q,T),q=t.sub(D,T),T=t.add(D,T),x=t.mul(q,T),D=t.add(b,b),D=t.add(D,b),k=t.mul(P,k),ie=t.mul(S,ie),D=t.add(D,k),k=t.sub(b,k),k=t.mul(P,k),ie=t.add(ie,k),b=t.mul(D,ie),x=t.add(x,b),b=t.mul(H,ie),q=t.mul(ke,q),q=t.sub(q,b),b=t.mul(ke,D),T=t.mul(H,T),T=t.add(T,b),new f(q,x,T)}subtract(y){return this.add(y.negate())}is0(){return this.equals(f.ZERO)}wNAF(y){return m.wNAFCached(this,c,y,A=>{const w=t.invertBatch(A.map(I=>I.pz));return A.map((I,C)=>I.toAffine(w[C])).map(f.fromAffine)})}multiplyUnsafe(y){const A=f.ZERO;if(y===$r)return A;if(a(y),y===Fs)return this;const{endo:w}=e;if(!w)return m.unsafeLadder(this,y);let{k1neg:I,k1:C,k2neg:M,k2:Q}=w.splitScalar(y),q=A,x=A,T=this;for(;C>$r||Q>$r;)C&Fs&&(q=q.add(T)),Q&Fs&&(x=x.add(T)),T=T.double(),C>>=Fs,Q>>=Fs;return I&&(q=q.negate()),M&&(x=x.negate()),x=new f(t.mul(x.px,w.beta),x.py,x.pz),q.add(x)}multiply(y){a(y);let A=y,w,I;const{endo:C}=e;if(C){const{k1neg:M,k1:Q,k2neg:q,k2:x}=C.splitScalar(A);let{p:T,f:P}=this.wNAF(Q),{p:S,f:b}=this.wNAF(x);T=m.constTimeNegate(M,T),S=m.constTimeNegate(q,S),S=new f(t.mul(S.px,C.beta),S.py,S.pz),w=T.add(S),I=P.add(b)}else{const{p:M,f:Q}=this.wNAF(A);w=M,I=Q}return f.normalizeZ([w,I])[0]}multiplyAndAddUnsafe(y,A,w){const I=f.BASE,C=(Q,q)=>q===$r||q===Fs||!Q.equals(I)?Q.multiplyUnsafe(q):Q.multiply(q),M=C(this,A).add(C(y,w));return M.is0()?void 0:M}toAffine(y){const{px:A,py:w,pz:I}=this,C=this.is0();y==null&&(y=C?t.ONE:t.inv(I));const M=t.mul(A,y),Q=t.mul(w,y),q=t.mul(I,y);if(C)return{x:t.ZERO,y:t.ZERO};if(!t.eql(q,t.ONE))throw new Error("invZ was invalid");return{x:M,y:Q}}isTorsionFree(){const{h:y,isTorsionFree:A}=e;if(y===Fs)return!0;if(A)return A(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:y,clearCofactor:A}=e;return y===Fs?this:A?A(f,this):this.multiplyUnsafe(e.h)}toRawBytes(y=!0){return this.assertValidity(),s(f,this,y)}toHex(y=!0){return Va(this.toRawBytes(y))}}f.BASE=new f(e.Gx,e.Gy,t.ONE),f.ZERO=new f(t.ZERO,t.ONE,t.ZERO);const p=e.nBitLength,m=I2(f,e.endo?Math.ceil(p/2):p);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:l,weierstrassEquation:i,isWithinCurveOrder:o}}function R2(n){const e=DE(n);return mu(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function x2(n){const e=R2(n),{Fp:t,n:s}=e,r=t.BYTES+1,i=2*t.BYTES+1;function o(ie){return $r<ie&&ie<t.ORDER}function a(ie){return _s(ie,s)}function l(ie){return qp(ie,s)}const{ProjectivePoint:c,normPrivateKeyToScalar:d,weierstrassEquation:f,isWithinCurveOrder:p}=P2({...e,toBytes(ie,H,V){const Z=H.toAffine(),me=t.toBytes(Z.x),Ve=jc;return V?Ve(Uint8Array.from([H.hasEvenY()?2:3]),me):Ve(Uint8Array.from([4]),me,t.toBytes(Z.y))},fromBytes(ie){const H=ie.length,V=ie[0],Z=ie.subarray(1);if(H===r&&(V===2||V===3)){const me=No(Z);if(!o(me))throw new Error("Point is not on curve");const Ve=f(me);let Ne=t.sqrt(Ve);const se=(Ne&Fs)===Fs;return(V&1)===1!==se&&(Ne=t.neg(Ne)),{x:me,y:Ne}}else if(H===i&&V===4){const me=t.fromBytes(Z.subarray(0,t.BYTES)),Ve=t.fromBytes(Z.subarray(t.BYTES,2*t.BYTES));return{x:me,y:Ve}}else throw new Error(`Point of length ${H} was invalid. Expected ${r} compressed bytes or ${i} uncompressed bytes`)}}),m=ie=>Va(Ha(ie,e.nByteLength));function _(ie){const H=s>>Fs;return ie>H}function y(ie){return _(ie)?a(-ie):ie}const A=(ie,H,V)=>No(ie.slice(H,V));class w{constructor(H,V,Z){this.r=H,this.s=V,this.recovery=Z,this.assertValidity()}static fromCompact(H){const V=e.nByteLength;return H=Ws("compactSignature",H,V*2),new w(A(H,0,V),A(H,V,2*V))}static fromDER(H){const{r:V,s:Z}=To.toSig(Ws("DER",H));return new w(V,Z)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(H){return new w(this.r,this.s,H)}recoverPublicKey(H){const{r:V,s:Z,recovery:me}=this,Ve=x(Ws("msgHash",H));if(me==null||![0,1,2,3].includes(me))throw new Error("recovery id invalid");const Ne=me===2||me===3?V+e.n:V;if(Ne>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const se=(me&1)===0?"02":"03",z=c.fromHex(se+m(Ne)),ue=l(Ne),Pe=a(-Ve*ue),tt=a(Z*ue),Y=c.BASE.multiplyAndAddUnsafe(z,Pe,tt);if(!Y)throw new Error("point at infinify");return Y.assertValidity(),Y}hasHighS(){return _(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return $a(this.toDERHex())}toDERHex(){return To.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return $a(this.toCompactHex())}toCompactHex(){return m(this.r)+m(this.s)}}const I={isValidPrivateKey(ie){try{return d(ie),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const ie=NE(e.n);return E2(e.randomBytes(ie),e.n)},precompute(ie=8,H=c.BASE){return H._setWindowSize(ie),H.multiply(BigInt(3)),H}};function C(ie,H=!0){return c.fromPrivateKey(ie).toRawBytes(H)}function M(ie){const H=ie instanceof Uint8Array,V=typeof ie=="string",Z=(H||V)&&ie.length;return H?Z===r||Z===i:V?Z===2*r||Z===2*i:ie instanceof c}function Q(ie,H,V=!0){if(M(ie))throw new Error("first arg must be private key");if(!M(H))throw new Error("second arg must be public key");return c.fromHex(H).multiply(d(ie)).toRawBytes(V)}const q=e.bits2int||function(ie){const H=No(ie),V=ie.length*8-e.nBitLength;return V>0?H>>BigInt(V):H},x=e.bits2int_modN||function(ie){return a(q(ie))},T=ym(e.nBitLength);function P(ie){if(typeof ie!="bigint")throw new Error("bigint expected");if(!($r<=ie&&ie<T))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Ha(ie,e.nByteLength)}function S(ie,H,V=b){if(["recovered","canonical"].some(fe=>fe in V))throw new Error("sign() legacy options not supported");const{hash:Z,randomBytes:me}=e;let{lowS:Ve,prehash:Ne,extraEntropy:se}=V;Ve==null&&(Ve=!0),ie=Ws("msgHash",ie),Ne&&(ie=Ws("prehashed msgHash",Z(ie)));const z=x(ie),ue=d(H),Pe=[P(ue),P(z)];if(se!=null){const fe=se===!0?me(t.BYTES):se;Pe.push(Ws("extraEntropy",fe))}const tt=jc(...Pe),Y=z;function ge(fe){const we=q(fe);if(!p(we))return;const Qe=l(we),N=c.BASE.multiply(we).toAffine(),O=a(N.x);if(O===$r)return;const G=a(Qe*a(Y+O*ue));if(G===$r)return;let te=(N.x===O?0:2)|Number(N.y&Fs),W=G;return Ve&&_(G)&&(W=y(G),te^=1),new w(O,W,te)}return{seed:tt,k2sig:ge}}const b={lowS:e.lowS,prehash:!1},D={lowS:e.lowS,prehash:!1};function k(ie,H,V=b){const{seed:Z,k2sig:me}=S(ie,H,V),Ve=e;return RE(Ve.hash.outputLen,Ve.nByteLength,Ve.hmac)(Z,me)}c.BASE._setWindowSize(8);function ke(ie,H,V,Z=D){const me=ie;if(H=Ws("msgHash",H),V=Ws("publicKey",V),"strict"in Z)throw new Error("options.strict was renamed to lowS");const{lowS:Ve,prehash:Ne}=Z;let se,z;try{if(typeof me=="string"||me instanceof Uint8Array)try{se=w.fromDER(me)}catch(N){if(!(N instanceof To.Err))throw N;se=w.fromCompact(me)}else if(typeof me=="object"&&typeof me.r=="bigint"&&typeof me.s=="bigint"){const{r:N,s:O}=me;se=new w(N,O)}else throw new Error("PARSE");z=c.fromHex(V)}catch(N){if(N.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Ve&&se.hasHighS())return!1;Ne&&(H=e.hash(H));const{r:ue,s:Pe}=se,tt=x(H),Y=l(Pe),ge=a(tt*Y),fe=a(ue*Y),we=c.BASE.multiplyAndAddUnsafe(z,ge,fe)?.toAffine();return we?a(we.x)===ue:!1}return{CURVE:e,getPublicKey:C,getSharedSecret:Q,sign:k,verify:ke,ProjectivePoint:c,Signature:w,utils:I}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function k2(n){return{hash:n,hmac:(e,...t)=>cE(n,e,yk(...t)),randomBytes:Ak}}function N2(n,e){const t=s=>x2({...n,...k2(s)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const OE=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),y0=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),D2=BigInt(1),Jp=BigInt(2),A0=(n,e)=>(n+e/Jp)/e;function O2(n){const e=OE,t=BigInt(3),s=BigInt(6),r=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=n*n*n%e,d=c*c*n%e,f=Ms(d,t,e)*d%e,p=Ms(f,t,e)*d%e,m=Ms(p,Jp,e)*c%e,_=Ms(m,r,e)*m%e,y=Ms(_,i,e)*_%e,A=Ms(y,a,e)*y%e,w=Ms(A,l,e)*A%e,I=Ms(w,a,e)*y%e,C=Ms(I,t,e)*d%e,M=Ms(C,o,e)*_%e,Q=Ms(M,s,e)*c%e,q=Ms(Q,Jp,e);if(!Yp.eql(Yp.sqr(q),n))throw new Error("Cannot find square root");return q}const Yp=_2(OE,void 0,void 0,{sqrt:O2}),Ci=N2({a:BigInt(0),b:BigInt(7),Fp:Yp,n:y0,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=y0,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),s=-D2*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,o=BigInt("0x100000000000000000000000000000000"),a=A0(i*n,e),l=A0(-s*n,e);let c=_s(n-a*t-l*r,e),d=_s(-a*s-l*i,e);const f=c>o,p=d>o;if(f&&(c=e-c),p&&(d=e-d),c>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:f,k1:c,k2neg:p,k2:d}}}},dE);BigInt(0);Ci.ProjectivePoint;const zc="0x0000000000000000000000000000000000000000",w0="0x0000000000000000000000000000000000000000000000000000000000000000",_0=BigInt(0),E0=BigInt(1),b0=BigInt(2),I0=BigInt(27),C0=BigInt(28),Xu=BigInt(35),aa={};function T0(n){return ni(Tn(n),32)}class tn{#e;#t;#n;#s;get r(){return this.#e}set r(e){$(Ca(e)===32,"invalid r","value",e),this.#e=_e(e)}get s(){return $(parseInt(this.#t.substring(0,3))<8,"non-canonical s; use ._s","s",this.#t),this.#t}set s(e){$(Ca(e)===32,"invalid s","value",e),this.#t=_e(e)}get _s(){return this.#t}isValid(){return parseInt(this.#t.substring(0,3))<8}get v(){return this.#n}set v(e){const t=rt(e,"value");$(t===27||t===28,"invalid v","v",e),this.#n=t}get networkV(){return this.#s}get legacyChainId(){const e=this.networkV;return e==null?null:tn.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=ot(this.s);return this.yParity&&(e[0]|=128),_e(e)}get compactSerialized(){return sn([this.r,this.yParityAndS])}get serialized(){return sn([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,s,r){pu(e,aa,"Signature"),this.#e=t,this.#t=s,this.#n=r,this.#s=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new tn(aa,this.r,this._s,this.v);return this.networkV&&(e.#s=this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const t=Se(e,"v");return t==I0||t==C0?_0:($(t>=Xu,"invalid EIP-155 v","v",e),(t-Xu)/b0)}static getChainIdV(e,t){return Se(e)*b0+BigInt(35+t-27)}static getNormalizedV(e){const t=Se(e);return t===_0||t===I0?27:t===E0||t===C0?28:($(t>=Xu,"invalid v","v",e),t&E0?27:28)}static from(e){function t(c,d){$(c,d,"signature",e)}if(e==null)return new tn(aa,w0,w0,27);if(typeof e=="string"){const c=ot(e,"signature");if(c.length===64){const d=_e(c.slice(0,32)),f=c.slice(32,64),p=f[0]&128?28:27;return f[0]&=127,new tn(aa,d,_e(f),p)}if(c.length===65){const d=_e(c.slice(0,32)),f=_e(c.slice(32,64)),p=tn.getNormalizedV(c[64]);return new tn(aa,d,f,p)}t(!1,"invalid raw signature length")}if(e instanceof tn)return e.clone();const s=e.r;t(s!=null,"missing r");const r=T0(s),i=(function(c,d){if(c!=null)return T0(c);if(d!=null){t(Bt(d,32),"invalid yParityAndS");const f=ot(d);return f[0]&=127,_e(f)}t(!1,"missing s")})(e.s,e.yParityAndS),{networkV:o,v:a}=(function(c,d,f){if(c!=null){const p=Se(c);return{networkV:p>=Xu?p:void 0,v:tn.getNormalizedV(p)}}if(d!=null)return t(Bt(d,32),"invalid yParityAndS"),{v:ot(d)[0]&128?28:27};if(f!=null){switch(rt(f,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),l=new tn(aa,r,i,a);return o&&(l.#s=o),t(e.yParity==null||rt(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}}class Hr{#e;constructor(e){$(Ca(e)===32,"invalid private key","privateKey","[REDACTED]"),this.#e=_e(e)}get privateKey(){return this.#e}get publicKey(){return Hr.computePublicKey(this.#e)}get compressedPublicKey(){return Hr.computePublicKey(this.#e,!0)}sign(e){$(Ca(e)===32,"invalid digest length","digest",e);const t=Ci.sign(cs(e),cs(this.#e),{lowS:!0});return tn.from({r:ji(t.r,32),s:ji(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=Hr.computePublicKey(e);return _e(Ci.getSharedSecret(cs(this.#e),ot(t),!1))}static computePublicKey(e,t){let s=ot(e,"key");if(s.length===32){const i=Ci.getPublicKey(s,!!t);return _e(i)}if(s.length===64){const i=new Uint8Array(65);i[0]=4,i.set(s,1),s=i}const r=Ci.ProjectivePoint.fromHex(s);return _e(r.toRawBytes(t))}static recoverPublicKey(e,t){$(Ca(e)===32,"invalid digest length","digest",e);const s=tn.from(t);let r=Ci.Signature.fromCompact(cs(sn([s.r,s.s])));r=r.addRecoveryBit(s.yParity);const i=r.recoverPublicKey(cs(e));return $(i!=null,"invalid signature for digest","signature",t),"0x"+i.toHex(!1)}static addPoints(e,t,s){const r=Ci.ProjectivePoint.fromHex(Hr.computePublicKey(e).substring(2)),i=Ci.ProjectivePoint.fromHex(Hr.computePublicKey(t).substring(2));return"0x"+r.add(i).toHex(!!s)}}const L2=BigInt(0),B2=BigInt(36);function S0(n){n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let r=0;r<40;r++)t[r]=e[r].charCodeAt(0);const s=ot(vn(t));for(let r=0;r<40;r+=2)s[r>>1]>>4>=8&&(e[r]=e[r].toUpperCase()),(s[r>>1]&15)>=8&&(e[r+1]=e[r+1].toUpperCase());return"0x"+e.join("")}const Am={};for(let n=0;n<10;n++)Am[String(n)]=String(n);for(let n=0;n<26;n++)Am[String.fromCharCode(65+n)]=String(10+n);const P0=15;function M2(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(s=>Am[s]).join("");for(;e.length>=P0;){let s=e.substring(0,P0);e=parseInt(s,10)%97+e.substring(s.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const F2=(function(){const n={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];n[t]=BigInt(e)}return n})();function U2(n){n=n.toLowerCase();let e=L2;for(let t=0;t<n.length;t++)e=e*B2+F2[n[t]];return e}function bt(n){if($(typeof n=="string","invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/)){n.startsWith("0x")||(n="0x"+n);const e=S0(n);return $(!n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===n,"bad address checksum","address",n),e}if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){$(n.substring(2,4)===M2(n),"bad icap checksum","address",n);let e=U2(n.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return S0("0x"+e)}$(!1,"invalid address","address",n)}function V2(n){const e=bt(n.from);let s=Se(n.nonce,"tx.nonce").toString(16);return s==="0"?s="0x":s.length%2?s="0x0"+s:s="0x"+s,bt(en(vn(zi([e,s])),12))}function LE(n){return n&&typeof n.getAddress=="function"}async function Yf(n,e){const t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(ce(typeof n!="string","unconfigured name","UNCONFIGURED_NAME",{value:n}),$(!1,"invalid AddressLike value; did not resolve to a value address","target",n)),bt(t)}function hs(n,e){if(typeof n=="string")return n.match(/^0x[0-9a-f]{40}$/i)?bt(n):(ce(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Yf(n,e.resolveName(n)));if(LE(n))return Yf(n,n.getAddress());if(n&&typeof n.then=="function")return Yf(n,n);$(!1,"unsupported addressable value","target",n)}const Lr={};function Te(n,e){let t=!1;return e<0&&(t=!0,e*=-1),new nn(Lr,`${t?"":"u"}int${e}`,n,{signed:t,width:e})}function mt(n,e){return new nn(Lr,`bytes${e||""}`,n,{size:e})}const R0=Symbol.for("_ethers_typed");class nn{type;value;#e;_typedSymbol;constructor(e,t,s,r){r==null&&(r=null),pu(Lr,e,"Typed"),Ge(this,{_typedSymbol:R0,type:t,value:s}),this.#e=r,this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return this.#e}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return this.#e===!0?-1:this.#e===!1?this.value.length:null}static from(e,t){return new nn(Lr,e,t)}static uint8(e){return Te(e,8)}static uint16(e){return Te(e,16)}static uint24(e){return Te(e,24)}static uint32(e){return Te(e,32)}static uint40(e){return Te(e,40)}static uint48(e){return Te(e,48)}static uint56(e){return Te(e,56)}static uint64(e){return Te(e,64)}static uint72(e){return Te(e,72)}static uint80(e){return Te(e,80)}static uint88(e){return Te(e,88)}static uint96(e){return Te(e,96)}static uint104(e){return Te(e,104)}static uint112(e){return Te(e,112)}static uint120(e){return Te(e,120)}static uint128(e){return Te(e,128)}static uint136(e){return Te(e,136)}static uint144(e){return Te(e,144)}static uint152(e){return Te(e,152)}static uint160(e){return Te(e,160)}static uint168(e){return Te(e,168)}static uint176(e){return Te(e,176)}static uint184(e){return Te(e,184)}static uint192(e){return Te(e,192)}static uint200(e){return Te(e,200)}static uint208(e){return Te(e,208)}static uint216(e){return Te(e,216)}static uint224(e){return Te(e,224)}static uint232(e){return Te(e,232)}static uint240(e){return Te(e,240)}static uint248(e){return Te(e,248)}static uint256(e){return Te(e,256)}static uint(e){return Te(e,256)}static int8(e){return Te(e,-8)}static int16(e){return Te(e,-16)}static int24(e){return Te(e,-24)}static int32(e){return Te(e,-32)}static int40(e){return Te(e,-40)}static int48(e){return Te(e,-48)}static int56(e){return Te(e,-56)}static int64(e){return Te(e,-64)}static int72(e){return Te(e,-72)}static int80(e){return Te(e,-80)}static int88(e){return Te(e,-88)}static int96(e){return Te(e,-96)}static int104(e){return Te(e,-104)}static int112(e){return Te(e,-112)}static int120(e){return Te(e,-120)}static int128(e){return Te(e,-128)}static int136(e){return Te(e,-136)}static int144(e){return Te(e,-144)}static int152(e){return Te(e,-152)}static int160(e){return Te(e,-160)}static int168(e){return Te(e,-168)}static int176(e){return Te(e,-176)}static int184(e){return Te(e,-184)}static int192(e){return Te(e,-192)}static int200(e){return Te(e,-200)}static int208(e){return Te(e,-208)}static int216(e){return Te(e,-216)}static int224(e){return Te(e,-224)}static int232(e){return Te(e,-232)}static int240(e){return Te(e,-240)}static int248(e){return Te(e,-248)}static int256(e){return Te(e,-256)}static int(e){return Te(e,-256)}static bytes1(e){return mt(e,1)}static bytes2(e){return mt(e,2)}static bytes3(e){return mt(e,3)}static bytes4(e){return mt(e,4)}static bytes5(e){return mt(e,5)}static bytes6(e){return mt(e,6)}static bytes7(e){return mt(e,7)}static bytes8(e){return mt(e,8)}static bytes9(e){return mt(e,9)}static bytes10(e){return mt(e,10)}static bytes11(e){return mt(e,11)}static bytes12(e){return mt(e,12)}static bytes13(e){return mt(e,13)}static bytes14(e){return mt(e,14)}static bytes15(e){return mt(e,15)}static bytes16(e){return mt(e,16)}static bytes17(e){return mt(e,17)}static bytes18(e){return mt(e,18)}static bytes19(e){return mt(e,19)}static bytes20(e){return mt(e,20)}static bytes21(e){return mt(e,21)}static bytes22(e){return mt(e,22)}static bytes23(e){return mt(e,23)}static bytes24(e){return mt(e,24)}static bytes25(e){return mt(e,25)}static bytes26(e){return mt(e,26)}static bytes27(e){return mt(e,27)}static bytes28(e){return mt(e,28)}static bytes29(e){return mt(e,29)}static bytes30(e){return mt(e,30)}static bytes31(e){return mt(e,31)}static bytes32(e){return mt(e,32)}static address(e){return new nn(Lr,"address",e)}static bool(e){return new nn(Lr,"bool",!!e)}static bytes(e){return new nn(Lr,"bytes",e)}static string(e){return new nn(Lr,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new nn(Lr,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===R0}static dereference(e,t){if(nn.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}}class $2 extends hi{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let s=nn.dereference(t,"string");try{s=bt(s)}catch(r){return this._throwError(r.message,t)}return e.writeValue(s)}decode(e){return bt(ji(e.readValue(),20))}}class H2 extends hi{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function BE(n,e,t){let s=[];if(Array.isArray(t))s=t;else if(t&&typeof t=="object"){let l={};s=e.map(c=>{const d=c.localName;return ce(d,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:t}),ce(!l[d],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:t}),l[d]=!0,t[d]})}else $(!1,"invalid tuple value","tuple",t);$(e.length===s.length,"types/value length mismatch","tuple",t);let r=new zp,i=new zp,o=[];e.forEach((l,c)=>{let d=s[c];if(l.dynamic){let f=i.length;l.encode(i,d);let p=r.writeUpdatableValue();o.push(m=>{p(m+f)})}else l.encode(r,d)}),o.forEach(l=>{l(r.length)});let a=n.appendWriter(r);return a+=n.appendWriter(i),a}function ME(n,e){let t=[],s=[],r=n.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=n.readIndex(),l=r.subReader(a);try{o=i.decode(l)}catch(c){if(Hn(c,"BUFFER_OVERRUN"))throw c;o=c,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(n)}catch(a){if(Hn(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");t.push(o),s.push(i.localName||null)}),jr.fromItems(t,s)}class G2 extends hi{coder;length;constructor(e,t,s){const r=e.type+"["+(t>=0?t:"")+"]",i=t===-1||e.dynamic;super("array",r,s,i),Ge(this,{coder:e,length:t})}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let s=0;s<this.length;s++)t.push(e);return t}encode(e,t){const s=nn.dereference(t,"array");Array.isArray(s)||this._throwError("expected array value",s);let r=this.length;r===-1&&(r=s.length,e.writeValue(s.length)),z1(s.length,r,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let o=0;o<s.length;o++)i.push(this.coder);return BE(e,i,s)}decode(e){let t=this.length;t===-1&&(t=e.readIndex(),ce(t*ds<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*ds,length:e.dataLength}));let s=[];for(let r=0;r<t;r++)s.push(new H2(this.coder));return ME(e,s)}}class Q2 extends hi{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const s=nn.dereference(t,"bool");return e.writeValue(s?1:0)}decode(e){return!!e.readValue()}}class FE extends hi{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=cs(t);let s=e.writeValue(t.length);return s+=e.writeBytes(t),s}decode(e){return e.readBytes(e.readIndex(),!0)}}class j2 extends FE{constructor(e){super("bytes",e)}decode(e){return _e(super.decode(e))}}class z2 extends hi{size;constructor(e,t){let s="bytes"+String(e);super(s,s,t,!1),Ge(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let s=cs(nn.dereference(t,this.type));return s.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(s)}decode(e){return _e(e.readBytes(this.size))}}const W2=new Uint8Array([]);class K2 extends hi{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(W2)}decode(e){return e.readBytes(0),null}}const q2=BigInt(0),J2=BigInt(1),Y2=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class X2 extends hi{size;signed;constructor(e,t,s){const r=(t?"int":"uint")+e*8;super(r,r,s,!1),Ge(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let s=Se(nn.dereference(t,this.type)),r=Co(Y2,ds*8);if(this.signed){let i=Co(r,this.size*8-1);(s>i||s<-(i+J2))&&this._throwError("value out-of-bounds",t),s=q1(s,8*ds)}else(s<q2||s>Co(r,this.size*8))&&this._throwError("value out-of-bounds",t);return e.writeValue(s)}decode(e){let t=Co(e.readValue(),this.size*8);return this.signed&&(t=Hd(t,this.size*8)),t}}class Z2 extends FE{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Jr(nn.dereference(t,"string")))}decode(e){return Gd(super.decode(e))}}class Zu extends hi{coders;constructor(e,t){let s=!1;const r=[];e.forEach(o=>{o.dynamic&&(s=!0),r.push(o.type)});const i="tuple("+r.join(",")+")";super("tuple",i,t,s),Ge(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(s=>{e.push(s.defaultValue())});const t=this.coders.reduce((s,r)=>{const i=r.localName;return i&&(s[i]||(s[i]=0),s[i]++),s},{});return this.coders.forEach((s,r)=>{let i=s.localName;!i||t[i]!==1||(i==="length"&&(i="_length"),e[i]==null&&(e[i]=e[r]))}),Object.freeze(e)}encode(e,t){const s=nn.dereference(t,"tuple");return BE(e,this.coders,s)}decode(e){return ME(e,this.coders)}}function Xf(n,e){return{address:bt(n),storageKeys:e.map((t,s)=>($(Bt(t,32),"invalid slot",`storageKeys[${s}]`,t),t.toLowerCase()))}}function Ko(n){if(Array.isArray(n))return n.map((t,s)=>Array.isArray(t)?($(t.length===2,"invalid slot set",`value[${s}]`,t),Xf(t[0],t[1])):($(t!=null&&typeof t=="object","invalid address-slot set","value",n),Xf(t.address,t.storageKeys)));$(n!=null&&typeof n=="object","invalid access list","value",n);const e=Object.keys(n).map(t=>{const s=n[t].reduce((r,i)=>(r[i]=!0,r),{});return Xf(t,Object.keys(s).sort())});return e.sort((t,s)=>t.address.localeCompare(s.address)),e}function UE(n){return{address:bt(n.address),nonce:Se(n.nonce!=null?n.nonce:0),chainId:Se(n.chainId!=null?n.chainId:0),signature:tn.from(n.signature)}}function eN(n){let e;return typeof n=="string"?e=Hr.computePublicKey(n,!1):e=n.publicKey,bt(vn("0x"+e.substring(4)).substring(26))}function tN(n,e){return eN(Hr.recoverPublicKey(n,e))}const Dn=BigInt(0),nN=BigInt(2),sN=BigInt(27),rN=BigInt(28),iN=BigInt(35),oN=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Zf=4096*32;function aN(n){return{blobToKzgCommitment:s=>{if("computeBlobProof"in n){if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return ot(n.blobToKzgCommitment(_e(s)))}else if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return ot(n.blobToKzgCommitment(s));if("blobToKZGCommitment"in n&&typeof n.blobToKZGCommitment=="function")return ot(n.blobToKZGCommitment(_e(s)));$(!1,"unsupported KZG library","kzg",n)},computeBlobKzgProof:(s,r)=>{if("computeBlobProof"in n&&typeof n.computeBlobProof=="function")return ot(n.computeBlobProof(_e(s),_e(r)));if("computeBlobKzgProof"in n&&typeof n.computeBlobKzgProof=="function")return n.computeBlobKzgProof(s,r);if("computeBlobKZGProof"in n&&typeof n.computeBlobKZGProof=="function")return ot(n.computeBlobKZGProof(_e(s),_e(r)));$(!1,"unsupported KZG library","kzg",n)}}}function x0(n,e){let t=n.toString(16);for(;t.length<2;)t="0"+t;return t+=nl(e).substring(4),"0x"+t}function sl(n){return n==="0x"?null:bt(n)}function Vh(n,e){try{return Ko(n)}catch(t){$(!1,t.message,e,n)}}function lN(n,e){try{if(!Array.isArray(n))throw new Error("authorizationList: invalid array");const t=[];for(let s=0;s<n.length;s++){const r=n[s];if(!Array.isArray(r))throw new Error(`authorization[${s}]: invalid array`);if(r.length!==6)throw new Error(`authorization[${s}]: wrong length`);if(!r[1])throw new Error(`authorization[${s}]: null address`);t.push({address:sl(r[1]),nonce:Pt(r[2],"nonce"),chainId:Pt(r[0],"chainId"),signature:tn.from({yParity:qo(r[3],"yParity"),r:ni(r[4],32),s:ni(r[5],32)})})}return t}catch(t){$(!1,t.message,e,n)}}function qo(n,e){return n==="0x"?0:rt(n,e)}function Pt(n,e){if(n==="0x")return Dn;const t=Se(n,e);return $(t<=oN,"value exceeds uint size",e,t),t}function pt(n,e){const t=Se(n,"value"),s=Tn(t);return $(s.length<=32,"value too large",`tx.${e}`,t),s}function $h(n){return Ko(n).map(e=>[e.address,e.storageKeys])}function cN(n){return n.map(e=>[pt(e.chainId,"chainId"),e.address,pt(e.nonce,"nonce"),pt(e.signature.yParity,"yParity"),Tn(e.signature.r),Tn(e.signature.s)])}function uN(n,e){$(Array.isArray(n),`invalid ${e}`,"value",n);for(let t=0;t<n.length;t++)$(Bt(n[t],32),"invalid ${ param } hash",`value[${t}]`,n[t]);return n}function dN(n){const e=gu(n);$(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",n);const t={type:0,nonce:qo(e[0],"nonce"),gasPrice:Pt(e[1],"gasPrice"),gasLimit:Pt(e[2],"gasLimit"),to:sl(e[3]),value:Pt(e[4],"value"),data:_e(e[5]),chainId:Dn};if(e.length===6)return t;const s=Pt(e[6],"v"),r=Pt(e[7],"r"),i=Pt(e[8],"s");if(r===Dn&&i===Dn)t.chainId=s;else{let o=(s-iN)/nN;o<Dn&&(o=Dn),t.chainId=o,$(o!==Dn||s===sN||s===rN,"non-canonical legacy v","v",e[6]),t.signature=tn.from({r:ni(e[7],32),s:ni(e[8],32),v:s})}return t}function hN(n,e){const t=[pt(n.nonce,"nonce"),pt(n.gasPrice||0,"gasPrice"),pt(n.gasLimit,"gasLimit"),n.to||"0x",pt(n.value,"value"),n.data];let s=Dn;if(n.chainId!=Dn)s=Se(n.chainId,"tx.chainId"),$(!e||e.networkV==null||e.legacyChainId===s,"tx.chainId/sig.v mismatch","sig",e);else if(n.signature){const i=n.signature.legacyChainId;i!=null&&(s=i)}if(!e)return s!==Dn&&(t.push(Tn(s)),t.push("0x"),t.push("0x")),zi(t);let r=BigInt(27+e.yParity);return s!==Dn?r=tn.getChainIdV(s,e.v):BigInt(e.v)!==r&&$(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(Tn(r)),t.push(Tn(e.r)),t.push(Tn(e.s)),zi(t)}function Hh(n,e){let t;try{if(t=qo(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{$(!1,"invalid yParity","yParity",e[0])}const s=ni(e[1],32),r=ni(e[2],32),i=tn.from({r:s,s:r,yParity:t});n.signature=i}function fN(n){const e=gu(ot(n).slice(1));$(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",_e(n));const t={type:2,chainId:Pt(e[0],"chainId"),nonce:qo(e[1],"nonce"),maxPriorityFeePerGas:Pt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Pt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Pt(e[4],"gasLimit"),to:sl(e[5]),value:Pt(e[6],"value"),data:_e(e[7]),accessList:Vh(e[8],"accessList")};return e.length===9||Hh(t,e.slice(9)),t}function pN(n,e){const t=[pt(n.chainId,"chainId"),pt(n.nonce,"nonce"),pt(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),pt(n.maxFeePerGas||0,"maxFeePerGas"),pt(n.gasLimit,"gasLimit"),n.to||"0x",pt(n.value,"value"),n.data,$h(n.accessList||[])];return e&&(t.push(pt(e.yParity,"yParity")),t.push(Tn(e.r)),t.push(Tn(e.s))),sn(["0x02",zi(t)])}function gN(n){const e=gu(ot(n).slice(1));$(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",_e(n));const t={type:1,chainId:Pt(e[0],"chainId"),nonce:qo(e[1],"nonce"),gasPrice:Pt(e[2],"gasPrice"),gasLimit:Pt(e[3],"gasLimit"),to:sl(e[4]),value:Pt(e[5],"value"),data:_e(e[6]),accessList:Vh(e[7],"accessList")};return e.length===8||Hh(t,e.slice(8)),t}function mN(n,e){const t=[pt(n.chainId,"chainId"),pt(n.nonce,"nonce"),pt(n.gasPrice||0,"gasPrice"),pt(n.gasLimit,"gasLimit"),n.to||"0x",pt(n.value,"value"),n.data,$h(n.accessList||[])];return e&&(t.push(pt(e.yParity,"recoveryParam")),t.push(Tn(e.r)),t.push(Tn(e.s))),sn(["0x01",zi(t)])}function vN(n){let e=gu(ot(n).slice(1)),t="3",s=null;if(e.length===4&&Array.isArray(e[0])){t="3 (network format)";const i=e[1],o=e[2],a=e[3];$(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),$(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),$(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),$(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),$(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),s=[];for(let l=0;l<e[1].length;l++)s.push({data:i[l],commitment:o[l],proof:a[l]});e=e[0]}$(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${t}`,"data",_e(n));const r={type:3,chainId:Pt(e[0],"chainId"),nonce:qo(e[1],"nonce"),maxPriorityFeePerGas:Pt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Pt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Pt(e[4],"gasLimit"),to:sl(e[5]),value:Pt(e[6],"value"),data:_e(e[7]),accessList:Vh(e[8],"accessList"),maxFeePerBlobGas:Pt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};s&&(r.blobs=s),$(r.to!=null,`invalid address for transaction type: ${t}`,"data",n),$(Array.isArray(r.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",n);for(let i=0;i<r.blobVersionedHashes.length;i++)$(Bt(r.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",n);return e.length===11||Hh(r,e.slice(11)),r}function yN(n,e,t){const s=[pt(n.chainId,"chainId"),pt(n.nonce,"nonce"),pt(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),pt(n.maxFeePerGas||0,"maxFeePerGas"),pt(n.gasLimit,"gasLimit"),n.to||zc,pt(n.value,"value"),n.data,$h(n.accessList||[]),pt(n.maxFeePerBlobGas||0,"maxFeePerBlobGas"),uN(n.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(s.push(pt(e.yParity,"yParity")),s.push(Tn(e.r)),s.push(Tn(e.s)),t)?sn(["0x03",zi([s,t.map(r=>r.data),t.map(r=>r.commitment),t.map(r=>r.proof)])]):sn(["0x03",zi(s)])}function AN(n){const e=gu(ot(n).slice(1));$(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",_e(n));const t={type:4,chainId:Pt(e[0],"chainId"),nonce:qo(e[1],"nonce"),maxPriorityFeePerGas:Pt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Pt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Pt(e[4],"gasLimit"),to:sl(e[5]),value:Pt(e[6],"value"),data:_e(e[7]),accessList:Vh(e[8],"accessList"),authorizationList:lN(e[9],"authorizationList")};return e.length===10||Hh(t,e.slice(10)),t}function wN(n,e){const t=[pt(n.chainId,"chainId"),pt(n.nonce,"nonce"),pt(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),pt(n.maxFeePerGas||0,"maxFeePerGas"),pt(n.gasLimit,"gasLimit"),n.to||"0x",pt(n.value,"value"),n.data,$h(n.accessList||[]),cN(n.authorizationList||[])];return e&&(t.push(pt(e.yParity,"yParity")),t.push(Tn(e.r)),t.push(Tn(e.s))),sn(["0x04",zi(t)])}class Ks{#e;#t;#n;#s;#r;#o;#i;#a;#d;#c;#p;#g;#l;#u;#h;#f;#v;get type(){return this.#e}set type(e){switch(e){case null:this.#e=null;break;case 0:case"legacy":this.#e=0;break;case 1:case"berlin":case"eip-2930":this.#e=1;break;case 2:case"london":case"eip-1559":this.#e=2;break;case 3:case"cancun":case"eip-4844":this.#e=3;break;case 4:case"pectra":case"eip-7702":this.#e=4;break;default:$(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=this.#t;return e==null&&this.type===3?zc:e}set to(e){this.#t=e==null?null:bt(e)}get nonce(){return this.#s}set nonce(e){this.#s=rt(e,"value")}get gasLimit(){return this.#r}set gasLimit(e){this.#r=Se(e)}get gasPrice(){const e=this.#o;return e==null&&(this.type===0||this.type===1)?Dn:e}set gasPrice(e){this.#o=e==null?null:Se(e,"gasPrice")}get maxPriorityFeePerGas(){const e=this.#i;return e??(this.type===2||this.type===3?Dn:null)}set maxPriorityFeePerGas(e){this.#i=e==null?null:Se(e,"maxPriorityFeePerGas")}get maxFeePerGas(){const e=this.#a;return e??(this.type===2||this.type===3?Dn:null)}set maxFeePerGas(e){this.#a=e==null?null:Se(e,"maxFeePerGas")}get data(){return this.#n}set data(e){this.#n=_e(e)}get value(){return this.#d}set value(e){this.#d=Se(e,"value")}get chainId(){return this.#c}set chainId(e){this.#c=Se(e)}get signature(){return this.#p||null}set signature(e){this.#p=e==null?null:tn.from(e)}get accessList(){const e=this.#g||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){this.#g=e==null?null:Ko(e)}get authorizationList(){const e=this.#v||null;return e==null&&this.type===4?[]:e}set authorizationList(e){this.#v=e==null?null:e.map(t=>UE(t))}get maxFeePerBlobGas(){const e=this.#l;return e==null&&this.type===3?Dn:e}set maxFeePerBlobGas(e){this.#l=e==null?null:Se(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#u;return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){$(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)$(Bt(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}this.#u=e}get blobs(){return this.#f==null?null:this.#f.map(e=>Object.assign({},e))}set blobs(e){if(e==null){this.#f=null;return}const t=[],s=[];for(let r=0;r<e.length;r++){const i=e[r];if(cm(i)){ce(this.#h,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=ot(i);if($(o.length<=Zf,"blob is too large",`blobs[${r}]`,i),o.length!==Zf){const c=new Uint8Array(Zf);c.set(o),o=c}const a=this.#h.blobToKzgCommitment(o),l=_e(this.#h.computeBlobKzgProof(o,a));t.push({data:_e(o),commitment:_e(a),proof:l}),s.push(x0(1,a))}else{const o=_e(i.commitment);t.push({data:_e(i.data),commitment:o,proof:_e(i.proof)}),s.push(x0(1,o))}}this.#f=t,this.#u=s}get kzg(){return this.#h}set kzg(e){e==null?this.#h=null:this.#h=aN(e)}constructor(){this.#e=null,this.#t=null,this.#s=0,this.#r=Dn,this.#o=null,this.#i=null,this.#a=null,this.#n="0x",this.#d=Dn,this.#c=Dn,this.#p=null,this.#g=null,this.#l=null,this.#u=null,this.#h=null,this.#f=null,this.#v=null}get hash(){return this.signature==null?null:vn(this.#m(!0,!1))}get unsignedHash(){return vn(this.unsignedSerialized)}get from(){return this.signature==null?null:tN(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:Hr.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}#m(e,t){ce(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const s=e?this.signature:null;switch(this.inferType()){case 0:return hN(this,s);case 1:return mN(this,s);case 2:return pN(this,s);case 3:return yN(this,s,t?this.blobs:null);case 4:return wN(this,s)}ce(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#m(!0,!0)}get unsignedSerialized(){return this.#m(!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,s=this.accessList!=null,r=this.#l!=null||this.#u;this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&ce(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),ce(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),ce(this.type!==0||!s,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):t?i.push(2):e?(i.push(1),s||i.push(0)):s?(i.push(1),i.push(2)):(r&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Ks.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new Ks;if(typeof e=="string"){const s=ot(e);if(s[0]>=127)return Ks.from(dN(s));switch(s[0]){case 1:return Ks.from(gN(s));case 2:return Ks.from(fN(s));case 3:return Ks.from(vN(s));case 4:return Ks.from(AN(s))}ce(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new Ks;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=tn.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.authorizationList!=null&&(t.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&($(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),$(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&($(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),$(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}}function Uo(n){return vn(Jr(n))}var _N="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const k0=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),N0=4;function EN(n){let e=0;function t(){return n[e++]<<8|n[e++]}let s=t(),r=1,i=[0,1];for(let Q=1;Q<s;Q++)i.push(r+=t());let o=t(),a=e;e+=o;let l=0,c=0;function d(){return l==0&&(c=c<<8|n[e++],l=8),c>>--l&1}const f=31,p=2**f,m=p>>>1,_=m>>1,y=p-1;let A=0;for(let Q=0;Q<f;Q++)A=A<<1|d();let w=[],I=0,C=p;for(;;){let Q=Math.floor(((A-I+1)*r-1)/C),q=0,x=s;for(;x-q>1;){let S=q+x>>>1;Q<i[S]?x=S:q=S}if(q==0)break;w.push(q);let T=I+Math.floor(C*i[q]/r),P=I+Math.floor(C*i[q+1]/r)-1;for(;((T^P)&m)==0;)A=A<<1&y|d(),T=T<<1&y,P=P<<1&y|1;for(;T&~P&_;)A=A&m|A<<1&y>>>1|d(),T=T<<1^m,P=(P^m)<<1|m|1;I=T,C=1+P-T}let M=s-4;return w.map(Q=>{switch(Q-M){case 3:return M+65792+(n[a++]<<16|n[a++]<<8|n[a++]);case 2:return M+256+(n[a++]<<8|n[a++]);case 1:return M+n[a++];default:return Q-1}})}function bN(n){let e=0;return()=>n[e++]}function VE(n){return bN(EN(IN(n)))}function IN(n){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((r,i)=>e[r.charCodeAt(0)]=i);let t=n.length,s=new Uint8Array(6*t>>3);for(let r=0,i=0,o=0,a=0;r<t;r++)a=a<<6|e[n.charCodeAt(r)],o+=6,o>=8&&(s[i++]=a>>(o-=8));return s}function CN(n){return n&1?~n>>1:n>>1}function TN(n,e){let t=Array(n);for(let s=0,r=0;s<n;s++)t[s]=r+=CN(e());return t}function Wc(n,e=0){let t=[];for(;;){let s=n(),r=n();if(!r)break;e+=s;for(let i=0;i<r;i++)t.push(e+i);e+=r+1}return t}function $E(n){return Kc(()=>{let e=Wc(n);if(e.length)return e})}function HE(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(SN(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(PN(t,n))}return e.flat()}function Kc(n){let e=[];for(;;){let t=n(e.length);if(!t)break;e.push(t)}return e}function GE(n,e,t){let s=Array(n).fill().map(()=>[]);for(let r=0;r<e;r++)TN(n,t).forEach((i,o)=>s[o].push(i));return s}function SN(n,e){let t=1+e(),s=e(),r=Kc(e);return GE(r.length,1+n,e).flatMap((o,a)=>{let[l,...c]=o;return Array(r[a]).fill().map((d,f)=>{let p=f*s;return[l+f*t,c.map(m=>m+p)]})})}function PN(n,e){let t=1+e();return GE(t,1+n,e).map(r=>[r[0],r.slice(1)])}function RN(n){let e=[],t=Wc(n);return r(s([]),[]),e;function s(i){let o=n(),a=Kc(()=>{let l=Wc(n).map(c=>t[c]);if(l.length)return s(l)});return{S:o,B:a,Q:i}}function r({S:i,B:o},a,l){if(!(i&4&&l===a[a.length-1])){i&2&&(l=a[a.length-1]),i&1&&e.push(a);for(let c of o)for(let d of c.Q)r(c,[...a,d],l)}}}function xN(n){return n.toString(16).toUpperCase().padStart(2,"0")}function QE(n){return`{${xN(n)}}`}function kN(n){let e=[];for(let t=0,s=n.length;t<s;){let r=n.codePointAt(t);t+=r<65536?1:2,e.push(r)}return e}function Ga(n){let t=n.length;if(t<4096)return String.fromCodePoint(...n);let s=[];for(let r=0;r<t;)s.push(String.fromCodePoint(...n.slice(r,r+=4096)));return s.join("")}function NN(n,e){let t=n.length,s=t-e.length;for(let r=0;s==0&&r<t;r++)s=n[r]-e[r];return s}var DN="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const qc=44032,jd=4352,zd=4449,Wd=4519,jE=19,zE=21,Qa=28,Kd=zE*Qa,ON=jE*Kd,LN=qc+ON,BN=jd+jE,MN=zd+zE,FN=Wd+Qa;function hc(n){return n>>24&255}function WE(n){return n&16777215}let Xp,D0,Zp,vd;function UN(){let n=VE(DN);Xp=new Map($E(n).flatMap((e,t)=>e.map(s=>[s,t+1<<24]))),D0=new Set(Wc(n)),Zp=new Map,vd=new Map;for(let[e,t]of HE(n)){if(!D0.has(e)&&t.length==2){let[s,r]=t,i=vd.get(s);i||(i=new Map,vd.set(s,i)),i.set(r,e)}Zp.set(e,t.reverse())}}function KE(n){return n>=qc&&n<LN}function VN(n,e){if(n>=jd&&n<BN&&e>=zd&&e<MN)return qc+(n-jd)*Kd+(e-zd)*Qa;if(KE(n)&&e>Wd&&e<FN&&(n-qc)%Qa==0)return n+(e-Wd);{let t=vd.get(n);return t&&(t=t.get(e),t)?t:-1}}function qE(n){Xp||UN();let e=[],t=[],s=!1;function r(i){let o=Xp.get(i);o&&(s=!0,i|=o),e.push(i)}for(let i of n)for(;;){if(i<128)e.push(i);else if(KE(i)){let o=i-qc,a=o/Kd|0,l=o%Kd/Qa|0,c=o%Qa;r(jd+a),r(zd+l),c>0&&r(Wd+c)}else{let o=Zp.get(i);o?t.push(...o):r(i)}if(!t.length)break;i=t.pop()}if(s&&e.length>1){let i=hc(e[0]);for(let o=1;o<e.length;o++){let a=hc(e[o]);if(a==0||i<=a){i=a;continue}let l=o-1;for(;;){let c=e[l+1];if(e[l+1]=e[l],e[l]=c,!l||(i=hc(e[--l]),i<=a))break}i=hc(e[o])}}return e}function $N(n){let e=[],t=[],s=-1,r=0;for(let i of n){let o=hc(i),a=WE(i);if(s==-1)o==0?s=a:e.push(a);else if(r>0&&r>=o)o==0?(e.push(s,...t),t.length=0,s=a):t.push(a),r=o;else{let l=VN(s,a);l>=0?s=l:r==0&&o==0?(e.push(s),s=a):(t.push(a),r=o)}}return s>=0&&e.push(s,...t),e}function JE(n){return qE(n).map(WE)}function HN(n){return $N(qE(n))}const O0=45,YE=".",XE=65039,ZE=1,qd=n=>Array.from(n);function Jc(n,e){return n.P.has(e)||n.Q.has(e)}class GN extends Array{get is_emoji(){return!0}}let eg,eb,So,tg,tb,Sa,ep,da,vo,L0,ng;function wm(){if(eg)return;let n=VE(_N);const e=()=>Wc(n),t=()=>new Set(e()),s=(d,f)=>f.forEach(p=>d.add(p));eg=new Map(HE(n)),eb=t(),So=e(),tg=new Set(e().map(d=>So[d])),So=new Set(So),tb=t(),t();let r=$E(n),i=n();const o=()=>{let d=new Set;return e().forEach(f=>s(d,r[f])),s(d,e()),d};Sa=Kc(d=>{let f=Kc(n).map(p=>p+96);if(f.length){let p=d>=i;f[0]-=32,f=Ga(f),p&&(f=`Restricted[${f}]`);let m=o(),_=o(),y=!n();return{N:f,P:m,Q:_,M:y,R:p}}}),ep=t(),da=new Map;let a=e().concat(qd(ep)).sort((d,f)=>d-f);a.forEach((d,f)=>{let p=n(),m=a[f]=p?a[f-p]:{V:[],M:new Map};m.V.push(d),ep.has(d)||da.set(d,m)});for(let{V:d,M:f}of new Set(da.values())){let p=[];for(let _ of d){let y=Sa.filter(w=>Jc(w,_)),A=p.find(({G:w})=>y.some(I=>w.has(I)));A||(A={G:new Set,V:[]},p.push(A)),A.V.push(_),s(A.G,y)}let m=p.flatMap(_=>qd(_.G));for(let{G:_,V:y}of p){let A=new Set(m.filter(w=>!_.has(w)));for(let w of y)f.set(w,A)}}vo=new Set;let l=new Set;const c=d=>vo.has(d)?l.add(d):vo.add(d);for(let d of Sa){for(let f of d.P)c(f);for(let f of d.Q)c(f)}for(let d of vo)!da.has(d)&&!l.has(d)&&da.set(d,ZE);s(vo,JE(vo)),L0=RN(n).map(d=>GN.from(d)).sort(NN),ng=new Map;for(let d of L0){let f=[ng];for(let p of d){let m=f.map(_=>{let y=_.get(p);return y||(y=new Map,_.set(p,y)),y});p===XE?f.push(...m):f=m}for(let p of f)p.V=d}}function _m(n){return(nb(n)?"":`${Em(Gh([n]))} `)+QE(n)}function Em(n){return`"${n}"`}function QN(n){if(n.length>=4&&n[2]==O0&&n[3]==O0)throw new Error(`invalid label extension: "${Ga(n.slice(0,4))}"`)}function jN(n){for(let t=n.lastIndexOf(95);t>0;)if(n[--t]!==95)throw new Error("underscore allowed only at start")}function zN(n){let e=n[0],t=k0.get(e);if(t)throw Sc(`leading ${t}`);let s=n.length,r=-1;for(let i=1;i<s;i++){e=n[i];let o=k0.get(e);if(o){if(r==i)throw Sc(`${t} + ${o}`);r=i+1,t=o}}if(r==s)throw Sc(`trailing ${t}`)}function Gh(n,e=1/0,t=QE){let s=[];WN(n[0])&&s.push(""),n.length>e&&(e>>=1,n=[...n.slice(0,e),8230,...n.slice(-e)]);let r=0,i=n.length;for(let o=0;o<i;o++){let a=n[o];nb(a)&&(s.push(Ga(n.slice(r,o))),s.push(t(a)),r=o+1)}return s.push(Ga(n.slice(r,i))),s.join("")}function WN(n){return wm(),So.has(n)}function nb(n){return wm(),tb.has(n)}function KN(n){return XN(qN(n,HN,tD))}function qN(n,e,t){if(!n)return[];wm();let s=0;return n.split(YE).map(r=>{let i=kN(r),o={input:i,offset:s};s+=i.length+1;try{let a=o.tokens=eD(i,e,t),l=a.length,c;if(!l)throw new Error("empty label");let d=o.output=a.flat();if(jN(d),!(o.emoji=l>1||a[0].is_emoji)&&d.every(p=>p<128))QN(d),c="ASCII";else{let p=a.flatMap(m=>m.is_emoji?[]:m);if(!p.length)c="Emoji";else{if(So.has(d[0]))throw Sc("leading combining mark");for(let y=1;y<l;y++){let A=a[y];if(!A.is_emoji&&So.has(A[0]))throw Sc(`emoji + combining mark: "${Ga(a[y-1])} + ${Gh([A[0]])}"`)}zN(d);let m=qd(new Set(p)),[_]=YN(m);ZN(_,p),JN(_,m),c=_.N}}o.type=c}catch(a){o.error=a}return o})}function JN(n,e){let t,s=[];for(let r of e){let i=da.get(r);if(i===ZE)return;if(i){let o=i.M.get(r);if(t=t?t.filter(a=>o.has(a)):qd(o),!t.length)return}else s.push(r)}if(t){for(let r of t)if(s.every(i=>Jc(r,i)))throw new Error(`whole-script confusable: ${n.N}/${r.N}`)}}function YN(n){let e=Sa;for(let t of n){let s=e.filter(r=>Jc(r,t));if(!s.length)throw Sa.some(r=>Jc(r,t))?rb(e[0],t):sb(t);if(e=s,s.length==1)break}return e}function XN(n){return n.map(({input:e,error:t,output:s})=>{if(t){let r=t.message;throw new Error(n.length==1?r:`Invalid label ${Em(Gh(e,63))}: ${r}`)}return Ga(s)}).join(YE)}function sb(n){return new Error(`disallowed character: ${_m(n)}`)}function rb(n,e){let t=_m(e),s=Sa.find(r=>r.P.has(e));return s&&(t=`${s.N} ${t}`),new Error(`illegal mixture: ${n.N} + ${t}`)}function Sc(n){return new Error(`illegal placement: ${n}`)}function ZN(n,e){for(let t of e)if(!Jc(n,t))throw rb(n,t);if(n.M){let t=JE(e);for(let s=1,r=t.length;s<r;s++)if(tg.has(t[s])){let i=s+1;for(let o;i<r&&tg.has(o=t[i]);i++)for(let a=s;a<i;a++)if(t[a]==o)throw new Error(`duplicate non-spacing marks: ${_m(o)}`);if(i-s>N0)throw new Error(`excessive non-spacing marks: ${Em(Gh(t.slice(s-1,i)))} (${i-s}/${N0})`);s=i}}}function eD(n,e,t){let s=[],r=[];for(n=n.slice().reverse();n.length;){let i=nD(n);if(i)r.length&&(s.push(e(r)),r=[]),s.push(t(i));else{let o=n.pop();if(vo.has(o))r.push(o);else{let a=eg.get(o);if(a)r.push(...a);else if(!eb.has(o))throw sb(o)}}}return r.length&&s.push(e(r)),s}function tD(n){return n.filter(e=>e!=XE)}function nD(n,e){let t=ng,s,r=n.length;for(;r&&(t=t.get(n[--r]),!!t);){let{V:i}=t;i&&(s=i,n.length=r)}return s}const ib=new Uint8Array(32);ib.fill(0);function B0(n){return $(n.length!==0,"invalid ENS name; empty component","comp",n),n}function ob(n){const e=Jr(sD(n)),t=[];if(n.length===0)return t;let s=0;for(let r=0;r<e.length;r++)e[r]===46&&(t.push(B0(e.slice(s,r))),s=r+1);return $(s<e.length,"invalid ENS name; empty component","name",n),t.push(B0(e.slice(s))),t}function sD(n){try{if(n.length===0)throw new Error("empty label");return KN(n)}catch(e){$(!1,`invalid ENS name (${e.message})`,"name",n)}}function sg(n){$(typeof n=="string","invalid ENS name; not a string","name",n),$(n.length,"invalid ENS name (empty label)","name",n);let e=ib;const t=ob(n);for(;t.length;)e=vn(sn([e,vn(t.pop())]));return _e(e)}function rD(n,e){const t=e;return $(t<=255,"DNS encoded label cannot exceed 255","length",t),_e(sn(ob(n).map(s=>{$(s.length<=t,`label ${JSON.stringify(n)} exceeds ${t} bytes`,"name",n);const r=new Uint8Array(s.length+1);return r.set(s,1),r[0]=r.length-1,r})))+"00"}const ab=new Uint8Array(32);ab.fill(0);const iD=BigInt(-1),lb=BigInt(0),cb=BigInt(1),oD=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function aD(n){const e=ot(n),t=e.length%32;return t?sn([e,ab.slice(t)]):_e(e)}const lD=ji(cb,32),cD=ji(lb,32),M0={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},tp=["name","version","chainId","verifyingContract","salt"];function F0(n){return function(e){return $(typeof e=="string",`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const uD={name:F0("name"),version:F0("version"),chainId:function(n){const e=Se(n,"domain.chainId");return $(e>=0,"invalid chain ID","domain.chainId",n),Number.isSafeInteger(e)?Number(e):Js(e)},verifyingContract:function(n){try{return bt(n).toLowerCase()}catch{}$(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){const e=ot(n,"domain.salt");return $(e.length===32,'invalid domain value "salt"',"domain.salt",n),_e(e)}};function np(n){{const e=n.match(/^(u?)int(\d+)$/);if(e){const t=e[1]==="",s=parseInt(e[2]);$(s%8===0&&s!==0&&s<=256&&e[2]===String(s),"invalid numeric width","type",n);const r=Co(oD,t?s-1:s),i=t?(r+cb)*iD:lb;return function(o){const a=Se(o,"value");return $(a>=i&&a<=r,`value out-of-bounds for ${n}`,"value",a),ji(t?q1(a,256):a,32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return $(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",n),function(s){const r=ot(s);return $(r.length===t,`invalid length for ${n}`,"value",s),aD(s)}}}switch(n){case"address":return function(e){return ni(bt(e),32)};case"bool":return function(e){return e?lD:cD};case"bytes":return function(e){return vn(e)};case"string":return function(e){return Uo(e)}}return null}function U0(n,e){return`${n}(${e.map(({name:t,type:s})=>s+" "+t).join(",")})`}function ed(n){const e=n.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:n}}class Rs{primaryType;#e;get types(){return JSON.parse(this.#e)}#t;#n;constructor(e){this.#t=new Map,this.#n=new Map;const t=new Map,s=new Map,r=new Map,i={};Object.keys(e).forEach(l=>{i[l]=e[l].map(({name:c,type:d})=>{let{base:f,index:p}=ed(d);return f==="int"&&!e.int&&(f="int256"),f==="uint"&&!e.uint&&(f="uint256"),{name:c,type:f+(p||"")}}),t.set(l,new Set),s.set(l,[]),r.set(l,new Set)}),this.#e=JSON.stringify(i);for(const l in i){const c=new Set;for(const d of i[l]){$(!c.has(d.name),`duplicate variable name ${JSON.stringify(d.name)} in ${JSON.stringify(l)}`,"types",e),c.add(d.name);const f=ed(d.type).base;$(f!==l,`circular type reference to ${JSON.stringify(f)}`,"types",e),!np(f)&&($(s.has(f),`unknown type ${JSON.stringify(f)}`,"types",e),s.get(f).push(l),t.get(l).add(f))}}const o=Array.from(s.keys()).filter(l=>s.get(l).length===0);$(o.length!==0,"missing primary type","types",e),$(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),Ge(this,{primaryType:o[0]});function a(l,c){$(!c.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",e),c.add(l);for(const d of t.get(l))if(s.has(d)){a(d,c);for(const f of c)r.get(f).add(d)}c.delete(l)}a(this.primaryType,new Set);for(const[l,c]of r){const d=Array.from(c);d.sort(),this.#t.set(l,U0(l,i[l])+d.map(f=>U0(f,i[f])).join(""))}}getEncoder(e){let t=this.#n.get(e);return t||(t=this.#s(e),this.#n.set(e,t)),t}#s(e){{const r=np(e);if(r)return r}const t=ed(e).array;if(t){const r=t.prefix,i=this.getEncoder(r);return o=>{$(t.count===-1||t.count===o.length,`array length mismatch; expected length ${t.count}`,"value",o);let a=o.map(i);return this.#t.has(r)&&(a=a.map(vn)),vn(sn(a))}}const s=this.types[e];if(s){const r=Uo(this.#t.get(e));return i=>{const o=s.map(({name:a,type:l})=>{const c=this.getEncoder(l)(i[a]);return this.#t.has(l)?vn(c):c});return o.unshift(r),sn(o)}}$(!1,`unknown type: ${e}`,"type",e)}encodeType(e){const t=this.#t.get(e);return $(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return vn(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,s){if(np(e))return s(e,t);const r=ed(e).array;if(r)return $(r.count===-1||r.count===t.length,`array length mismatch; expected length ${r.count}`,"value",t),t.map(o=>this._visit(r.prefix,o,s));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,t[a],s),o),{});$(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Rs(e)}static getPrimaryType(e){return Rs.from(e).primaryType}static hashStruct(e,t,s){return Rs.from(t).hashStruct(e,s)}static hashDomain(e){const t=[];for(const s in e){if(e[s]==null)continue;const r=M0[s];$(r,`invalid typed-data domain key: ${JSON.stringify(s)}`,"domain",e),t.push({name:s,type:r})}return t.sort((s,r)=>tp.indexOf(s.name)-tp.indexOf(r.name)),Rs.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,s){return sn(["0x1901",Rs.hashDomain(e),Rs.from(t).hash(s)])}static hash(e,t,s){return vn(Rs.encode(e,t,s))}static async resolveNames(e,t,s,r){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!Bt(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=Rs.from(t);o.visit(s,(a,l)=>(a==="address"&&!Bt(l,20)&&(i[l]="0x"),l));for(const a in i)i[a]=await r(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),s=o.visit(s,(a,l)=>a==="address"&&i[l]?i[l]:l),{domain:e,value:s}}static getPayload(e,t,s){Rs.hashDomain(e);const r={},i=[];tp.forEach(l=>{const c=e[l];c!=null&&(r[l]=uD[l](c),i.push({name:l,type:M0[l]}))});const o=Rs.from(t);t=o.types;const a=Object.assign({},t);return $(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),a.EIP712Domain=i,o.encode(s),{types:a,domain:r,primaryType:o.primaryType,message:o.visit(s,(l,c)=>{if(l.match(/^bytes(\d*)/))return _e(ot(c));if(l.match(/^u?int/))return Se(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return $(typeof c=="string","invalid string","value",c),c}$(!1,"unsupported type","type",l)})}}}function fs(n){const e=new Set;return n.forEach(t=>e.add(t)),Object.freeze(e)}const dD="external public payable override",hD=fs(dD.split(" ")),ub="constant external internal payable private public pure view override",fD=fs(ub.split(" ")),db="constructor error event fallback function receive struct",hb=fs(db.split(" ")),fb="calldata memory storage payable indexed",pD=fs(fb.split(" ")),gD="tuple returns",mD=[db,fb,gD,ub].join(" "),vD=fs(mD.split(" ")),yD={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},AD=new RegExp("^(\\s*)"),wD=new RegExp("^([0-9]+)"),_D=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),pb=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),gb=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class Qs{#e;#t;get offset(){return this.#e}get length(){return this.#t.length-this.#e}constructor(e){this.#e=0,this.#t=e.slice()}clone(){return new Qs(this.#t)}reset(){this.#e=0}#n(e=0,t=0){return new Qs(this.#t.slice(e,t).map(s=>Object.freeze(Object.assign({},s,{match:s.match-e,linkBack:s.linkBack-e,linkNext:s.linkNext-e}))))}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=this.#n(this.#e+1,e.match+1);return this.#e=e.match+1,t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=[];for(;this.#e<e.match-1;){const s=this.peek().linkNext;t.push(this.#n(this.#e+1,s)),this.#e=s}return this.#e=e.match+1,t}peek(){if(this.#e>=this.#t.length)throw new Error("out-of-bounds");return this.#t[this.#e]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return this.#e++,e}toString(){const e=[];for(let t=this.#e;t<this.#t.length;t++){const s=this.#t[t];e.push(`${s.type}:${s.text}`)}return`<TokenString ${e.join(" ")}>`}}function to(n){const e=[],t=o=>{const a=i<n.length?JSON.stringify(n[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let s=[],r=[],i=0;for(;i<n.length;){let o=n.substring(i),a=o.match(AD);a&&(i+=a[1].length,o=n.substring(i));const l={depth:s.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(l);let c=yD[o[0]]||"";if(c){if(l.type=c,l.text=o[0],i++,c==="OPEN_PAREN")s.push(e.length-1),r.push(e.length-1);else if(c=="CLOSE_PAREN")s.length===0&&t("no matching open bracket"),l.match=s.pop(),e[l.match].match=e.length-1,l.depth--,l.linkBack=r.pop(),e[l.linkBack].linkNext=e.length-1;else if(c==="COMMA")l.linkBack=r.pop(),e[l.linkBack].linkNext=e.length-1,r.push(e.length-1);else if(c==="OPEN_BRACKET")l.type="BRACKET";else if(c==="CLOSE_BRACKET"){let d=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const f=e.pop().text;d=f+d,e[e.length-1].value=rt(f)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=d}continue}if(a=o.match(_D),a){if(l.text=a[1],i+=l.text.length,vD.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(gb)){l.type="TYPE";continue}l.type="ID";continue}if(a=o.match(wD),a){l.text=a[1],l.type="NUMBER",i+=l.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Qs(e.map(o=>Object.freeze(o)))}function V0(n,e){let t=[];for(const s in e.keys())n.has(s)&&t.push(s);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function Qh(n,e){if(e.peekKeyword(hb)){const t=e.pop().text;if(t!==n)throw new Error(`expected ${n}, got ${t}`)}return e.popType("ID")}function ri(n,e){const t=new Set;for(;;){const s=n.peekType("KEYWORD");if(s==null||e&&!e.has(s))break;if(n.pop(),t.has(s))throw new Error(`duplicate keywords: ${JSON.stringify(s)}`);t.add(s)}return Object.freeze(t)}function mb(n){let e=ri(n,fD);return V0(e,fs("constant payable nonpayable".split(" "))),V0(e,fs("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Yr(n,e){return n.popParams().map(t=>Ot.from(t,e))}function vb(n){if(n.peekType("AT")){if(n.pop(),n.peekType("NUMBER"))return Se(n.pop().text);throw new Error("invalid gas")}return null}function Vo(n){if(n.length)throw new Error(`unexpected tokens at offset ${n.offset}: ${n.toString()}`)}const ED=new RegExp(/^(.*)\[([0-9]*)\]$/);function $0(n){const e=n.match(gb);if($(e,"invalid type","type",n),n==="uint")return"uint256";if(n==="int")return"int256";if(e[2]){const t=parseInt(e[2]);$(t!==0&&t<=32,"invalid bytes length","type",n)}else if(e[3]){const t=parseInt(e[3]);$(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",n)}return n}const zt={},Is=Symbol.for("_ethers_internal"),H0="_ParamTypeInternal",G0="_ErrorInternal",Q0="_EventInternal",j0="_ConstructorInternal",z0="_FallbackInternal",W0="_FunctionInternal",K0="_StructInternal";class Ot{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,s,r,i,o,a,l){if(pu(e,zt,"ParamType"),Object.defineProperty(this,Is,{value:H0}),o&&(o=Object.freeze(o.slice())),r==="array"){if(a==null||l==null)throw new Error("")}else if(a!=null||l!=null)throw new Error("");if(r==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Ge(this,{name:t,type:s,baseType:r,indexed:i,components:o,arrayLength:a,arrayChildren:l})}format(e){if(e==null&&(e="sighash"),e==="json"){const s=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=s,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const r={type:this.baseType==="tuple"?"tuple":this.type,name:s};return typeof this.indexed=="boolean"&&(r.indexed=this.indexed),this.isTuple()&&(r.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(r)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(s=>s.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const s=this;return e.map(r=>s.arrayChildren.walk(r,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const s=this;return e.map((r,i)=>s.components[i].walk(r,t))}return t(this.type,e)}#e(e,t,s,r){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=t.slice();a.forEach((l,c)=>{o.#e(e,l,s,d=>{a[c]=d})}),r(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(t))a=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");a=o.map(l=>{if(!l.name)throw new Error("cannot use object value with unnamed components");if(!(l.name in t))throw new Error(`missing value for component ${l.name}`);return t[l.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((l,c)=>{o[c].#e(e,l,s,d=>{a[c]=d})}),r(a);return}const i=s(this.type,t);i.then?e.push((async function(){r(await i)})()):r(i)}async walkAsync(e,t){const s=[],r=[e];return this.#e(s,e,t,i=>{r[0]=i}),s.length&&await Promise.all(s),r[0]}static from(e,t){if(Ot.isParamType(e))return e;if(typeof e=="string")try{return Ot.from(to(e),t)}catch{$(!1,"invalid param type","obj",e)}else if(e instanceof Qs){let a="",l="",c=null;ri(e,fs(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(l="tuple",c=e.popParams().map(y=>Ot.from(y)),a=`tuple(${c.map(y=>y.format()).join(",")})`):(a=$0(e.popType("TYPE")),l=a);let d=null,f=null;for(;e.length&&e.peekType("BRACKET");){const y=e.pop();d=new Ot(zt,"",a,l,null,c,f,d),f=y.value,a+=y.text,l="array",c=null}let p=null;if(ri(e,pD).has("indexed")){if(!t)throw new Error("");p=!0}const _=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Ot(zt,_,a,l,p,c,f,d)}const s=e.name;$(!s||typeof s=="string"&&s.match(pb),"invalid name","obj.name",s);let r=e.indexed;r!=null&&($(t,"parameter cannot be indexed","obj.indexed",e.indexed),r=!!r);let i=e.type,o=i.match(ED);if(o){const a=parseInt(o[2]||"-1"),l=Ot.from({type:o[1],components:e.components});return new Ot(zt,s||"",i,"array",r,null,a,l)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(c=>Ot.from(c)):null;return new Ot(zt,s||"",i,"tuple",r,a,null,null)}return i=$0(e.type),new Ot(zt,s||"",i,i,r,null,null,null)}static isParamType(e){return e&&e[Is]===H0}}class $o{type;inputs;constructor(e,t,s){pu(e,zt,"Fragment"),s=Object.freeze(s.slice()),Ge(this,{type:t,inputs:s})}static from(e){if(typeof e=="string"){try{$o.from(JSON.parse(e))}catch{}return $o.from(to(e))}if(e instanceof Qs)switch(e.peekKeyword(hb)){case"constructor":return zr.from(e);case"error":return Es.from(e);case"event":return gr.from(e);case"fallback":case"receive":return Mr.from(e);case"function":return mr.from(e);case"struct":return Do.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return zr.from(e);case"error":return Es.from(e);case"event":return gr.from(e);case"fallback":case"receive":return Mr.from(e);case"function":return mr.from(e);case"struct":return Do.from(e)}ce(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}$(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return zr.isFragment(e)}static isError(e){return Es.isFragment(e)}static isEvent(e){return gr.isFragment(e)}static isFunction(e){return mr.isFragment(e)}static isStruct(e){return Do.isFragment(e)}}class jh extends $o{name;constructor(e,t,s,r){super(e,t,r),$(typeof s=="string"&&s.match(pb),"invalid identifier","name",s),r=Object.freeze(r.slice()),Ge(this,{name:s})}}function Yc(n,e){return"("+e.map(t=>t.format(n)).join(n==="full"?", ":",")+")"}class Es extends jh{constructor(e,t,s){super(e,"error",t,s),Object.defineProperty(this,Is,{value:G0})}get selector(){return Uo(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+Yc(e,this.inputs)),t.join(" ")}static from(e){if(Es.isFragment(e))return e;if(typeof e=="string")return Es.from(to(e));if(e instanceof Qs){const t=Qh("error",e),s=Yr(e);return Vo(e),new Es(zt,t,s)}return new Es(zt,e.name,e.inputs?e.inputs.map(Ot.from):[])}static isFragment(e){return e&&e[Is]===G0}}class gr extends jh{anonymous;constructor(e,t,s,r){super(e,"event",t,s),Object.defineProperty(this,Is,{value:Q0}),Ge(this,{anonymous:r})}get topicHash(){return Uo(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const t=[];return e!=="sighash"&&t.push("event"),t.push(this.name+Yc(e,this.inputs)),e!=="sighash"&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){return t=(t||[]).map(r=>Ot.from(r)),new gr(zt,e,t,!1).topicHash}static from(e){if(gr.isFragment(e))return e;if(typeof e=="string")try{return gr.from(to(e))}catch{$(!1,"invalid event fragment","obj",e)}else if(e instanceof Qs){const t=Qh("event",e),s=Yr(e,!0),r=!!ri(e,fs(["anonymous"])).has("anonymous");return Vo(e),new gr(zt,t,s,r)}return new gr(zt,e.name,e.inputs?e.inputs.map(t=>Ot.from(t,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[Is]===Q0}}class zr extends $o{payable;gas;constructor(e,t,s,r,i){super(e,t,s),Object.defineProperty(this,Is,{value:j0}),Ge(this,{payable:r,gas:i})}format(e){if(ce(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const t=[`constructor${Yc(e,this.inputs)}`];return this.payable&&t.push("payable"),this.gas!=null&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(zr.isFragment(e))return e;if(typeof e=="string")try{return zr.from(to(e))}catch{$(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof Qs){ri(e,fs(["constructor"]));const t=Yr(e),s=!!ri(e,hD).has("payable"),r=vb(e);return Vo(e),new zr(zt,"constructor",t,s,r)}return new zr(zt,"constructor",e.inputs?e.inputs.map(Ot.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[Is]===j0}}class Mr extends $o{payable;constructor(e,t,s){super(e,"fallback",t),Object.defineProperty(this,Is,{value:z0}),Ge(this,{payable:s})}format(e){const t=this.inputs.length===0?"receive":"fallback";if(e==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:t,stateMutability:s})}return`${t}()${this.payable?" payable":""}`}static from(e){if(Mr.isFragment(e))return e;if(typeof e=="string")try{return Mr.from(to(e))}catch{$(!1,"invalid fallback fragment","obj",e)}else if(e instanceof Qs){const t=e.toString(),s=e.peekKeyword(fs(["fallback","receive"]));if($(s,"type must be fallback or receive","obj",t),e.popKeyword(fs(["fallback","receive"]))==="receive"){const a=Yr(e);return $(a.length===0,"receive cannot have arguments","obj.inputs",a),ri(e,fs(["payable"])),Vo(e),new Mr(zt,[],!0)}let i=Yr(e);i.length?$(i.length===1&&i[0].type==="bytes","invalid fallback inputs","obj.inputs",i.map(a=>a.format("minimal")).join(", ")):i=[Ot.from("bytes")];const o=mb(e);if($(o==="nonpayable"||o==="payable","fallback cannot be constants","obj.stateMutability",o),ri(e,fs(["returns"])).has("returns")){const a=Yr(e);$(a.length===1&&a[0].type==="bytes","invalid fallback outputs","obj.outputs",a.map(l=>l.format("minimal")).join(", "))}return Vo(e),new Mr(zt,i,o==="payable")}if(e.type==="receive")return new Mr(zt,[],!0);if(e.type==="fallback"){const t=[Ot.from("bytes")],s=e.stateMutability==="payable";return new Mr(zt,t,s)}$(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[Is]===z0}}class mr extends jh{constant;outputs;stateMutability;payable;gas;constructor(e,t,s,r,i,o){super(e,"function",t,r),Object.defineProperty(this,Is,{value:W0}),i=Object.freeze(i.slice()),Ge(this,{constant:s==="view"||s==="pure",gas:o,outputs:i,payable:s==="payable",stateMutability:s})}get selector(){return Uo(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(e))),outputs:this.outputs.map(s=>JSON.parse(s.format(e)))});const t=[];return e!=="sighash"&&t.push("function"),t.push(this.name+Yc(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(Yc(e,this.outputs))),this.gas!=null&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){return t=(t||[]).map(r=>Ot.from(r)),new mr(zt,e,"view",t,[],null).selector}static from(e){if(mr.isFragment(e))return e;if(typeof e=="string")try{return mr.from(to(e))}catch{$(!1,"invalid function fragment","obj",e)}else if(e instanceof Qs){const s=Qh("function",e),r=Yr(e),i=mb(e);let o=[];ri(e,fs(["returns"])).has("returns")&&(o=Yr(e));const a=vb(e);return Vo(e),new mr(zt,s,i,r,o,a)}let t=e.stateMutability;return t==null&&(t="payable",typeof e.constant=="boolean"?(t="view",e.constant||(t="payable",typeof e.payable=="boolean"&&!e.payable&&(t="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(t="nonpayable")),new mr(zt,e.name,t,e.inputs?e.inputs.map(Ot.from):[],e.outputs?e.outputs.map(Ot.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[Is]===W0}}class Do extends jh{constructor(e,t,s){super(e,"struct",t,s),Object.defineProperty(this,Is,{value:K0})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return Do.from(to(e))}catch{$(!1,"invalid struct fragment","obj",e)}else if(e instanceof Qs){const t=Qh("struct",e),s=Yr(e);return Vo(e),new Do(zt,t,s)}return new Do(zt,e.name,e.inputs?e.inputs.map(Ot.from):[])}static isFragment(e){return e&&e[Is]===K0}}const ir=new Map;ir.set(0,"GENERIC_PANIC");ir.set(1,"ASSERT_FALSE");ir.set(17,"OVERFLOW");ir.set(18,"DIVIDE_BY_ZERO");ir.set(33,"ENUM_RANGE_ERROR");ir.set(34,"BAD_STORAGE_DATA");ir.set(49,"STACK_UNDERFLOW");ir.set(50,"ARRAY_RANGE_ERROR");ir.set(65,"OUT_OF_MEMORY");ir.set(81,"UNINITIALIZED_FUNCTION_CALL");const bD=new RegExp(/^bytes([0-9]*)$/),ID=new RegExp(/^(u?int)([0-9]*)$/);let sp=null,q0=1024;function CD(n,e,t,s){let r="missing revert data",i=null;const o=null;let a=null;if(t){r="execution reverted";const c=ot(t);if(t=_e(t),c.length===0)r+=" (no data present; likely require(false) occurred",i="require(false)";else if(c.length%32!==4)r+=" (could not decode reason; invalid data length)";else if(_e(c.slice(0,4))==="0x08c379a0")try{i=s.decode(["string"],c.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},r+=`: ${JSON.stringify(i)}`}catch{r+=" (could not decode reason; invalid string data)"}else if(_e(c.slice(0,4))==="0x4e487b71")try{const d=Number(s.decode(["uint256"],c.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[d]},i=`Panic due to ${ir.get(d)||"UNKNOWN"}(${d})`,r+=`: ${i}`}catch{r+=" (could not decode panic code)"}else r+=" (unknown custom error)"}const l={to:e.to?bt(e.to):null,data:e.data||"0x"};return e.from&&(l.from=bt(e.from)),Gt(r,"CALL_EXCEPTION",{action:n,data:t,reason:i,transaction:l,invocation:o,revert:a})}class ja{#e(e){if(e.isArray())return new G2(this.#e(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new Zu(e.components.map(s=>this.#e(s)),e.name);switch(e.baseType){case"address":return new $2(e.name);case"bool":return new Q2(e.name);case"string":return new Z2(e.name);case"bytes":return new j2(e.name);case"":return new K2(e.name)}let t=e.type.match(ID);if(t){let s=parseInt(t[2]||"256");return $(s!==0&&s<=256&&s%8===0,"invalid "+t[1]+" bit length","param",e),new X2(s/8,t[1]==="int",e.name)}if(t=e.type.match(bD),t){let s=parseInt(t[1]);return $(s!==0&&s<=32,"invalid bytes length","param",e),new z2(s,e.name)}$(!1,"invalid type","type",e.type)}getDefaultValue(e){const t=e.map(r=>this.#e(Ot.from(r)));return new Zu(t,"_").defaultValue()}encode(e,t){z1(t.length,e.length,"types/values length mismatch");const s=e.map(o=>this.#e(Ot.from(o))),r=new Zu(s,"_"),i=new zp;return r.encode(i,t),i.data}decode(e,t,s){const r=e.map(o=>this.#e(Ot.from(o)));return new Zu(r,"_").decode(new um(t,s,q0))}static _setDefaultMaxInflation(e){$(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),q0=e}static defaultAbiCoder(){return sp==null&&(sp=new ja),sp}static getBuiltinCallException(e,t,s){return CD(e,t,s,ja.defaultAbiCoder())}}class TD{fragment;name;signature;topic;args;constructor(e,t,s){const r=e.name,i=e.format();Ge(this,{fragment:e,name:r,signature:i,topic:t,args:s})}}class SD{fragment;name;args;signature;selector;value;constructor(e,t,s,r){const i=e.name,o=e.format();Ge(this,{fragment:e,name:i,args:s,signature:o,selector:t,value:r})}}class PD{fragment;name;args;signature;selector;constructor(e,t,s){const r=e.name,i=e.format();Ge(this,{fragment:e,name:r,args:s,signature:i,selector:t})}}class J0{hash;_isIndexed;static isIndexed(e){return!!(e&&e._isIndexed)}constructor(e){Ge(this,{hash:e,_isIndexed:!0})}}const Y0={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},X0={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:n=>`reverted with reason string ${JSON.stringify(n)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:n=>{let e="unknown panic code";return n>=0&&n<=255&&Y0[n.toString()]&&(e=Y0[n.toString()]),`reverted with panic code 0x${n.toString(16)} (${e})`}}};class Eo{fragments;deploy;fallback;receive;#e;#t;#n;#s;constructor(e){let t=[];typeof e=="string"?t=JSON.parse(e):t=e,this.#n=new Map,this.#e=new Map,this.#t=new Map;const s=[];for(const o of t)try{s.push($o.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}Ge(this,{fragments:Object.freeze(s)});let r=null,i=!1;this.#s=this.getAbiCoder(),this.fragments.forEach((o,a)=>{let l;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Ge(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:($(!r||o.payable!==r.payable,"conflicting fallback fragments",`fragments[${a}]`,o),r=o,i=r.payable);return;case"function":l=this.#n;break;case"event":l=this.#t;break;case"error":l=this.#e;break;default:return}const c=o.format();l.has(c)||l.set(c,o)}),this.deploy||Ge(this,{deploy:zr.from("constructor()")}),Ge(this,{fallback:r,receive:i})}format(e){const t=e?"minimal":"full";return this.fragments.map(r=>r.format(t))}formatJson(){const e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return ja.defaultAbiCoder()}#r(e,t,s){if(Bt(e)){const i=e.toLowerCase();for(const o of this.#n.values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of this.#n)o.split("(")[0]===e&&i.push(a);if(t){const o=t.length>0?t[t.length-1]:null;let a=t.length,l=!0;nn.isTyped(o)&&o.type==="overrides"&&(l=!1,a--);for(let c=i.length-1;c>=0;c--){const d=i[c].inputs.length;d!==a&&(!l||d!==a-1)&&i.splice(c,1)}for(let c=i.length-1;c>=0;c--){const d=i[c].inputs;for(let f=0;f<t.length;f++)if(nn.isTyped(t[f])){if(f>=d.length){if(t[f].type==="overrides")continue;i.splice(c,1);break}if(t[f].type!==d[f].baseType){i.splice(c,1);break}}}}if(i.length===1&&t&&t.length!==i[0].inputs.length){const o=t[t.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&s){const o=i.map(a=>JSON.stringify(a.format())).join(", ");$(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const r=this.#n.get(mr.from(e).format());return r||null}getFunctionName(e){const t=this.#r(e,null,!1);return $(t,"no matching function","key",e),t.name}hasFunction(e){return!!this.#r(e,null,!1)}getFunction(e,t){return this.#r(e,t||null,!0)}forEachFunction(e){const t=Array.from(this.#n.keys());t.sort((s,r)=>s.localeCompare(r));for(let s=0;s<t.length;s++){const r=t[s];e(this.#n.get(r),s)}}#o(e,t,s){if(Bt(e)){const i=e.toLowerCase();for(const o of this.#t.values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of this.#t)o.split("(")[0]===e&&i.push(a);if(t){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<t.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let l=0;l<t.length;l++)if(nn.isTyped(t[l])&&t[l].type!==a[l].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&s){const o=i.map(a=>JSON.stringify(a.format())).join(", ");$(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const r=this.#t.get(gr.from(e).format());return r||null}getEventName(e){const t=this.#o(e,null,!1);return $(t,"no matching event","key",e),t.name}hasEvent(e){return!!this.#o(e,null,!1)}getEvent(e,t){return this.#o(e,t||null,!0)}forEachEvent(e){const t=Array.from(this.#t.keys());t.sort((s,r)=>s.localeCompare(r));for(let s=0;s<t.length;s++){const r=t[s];e(this.#t.get(r),s)}}getError(e,t){if(Bt(e)){const r=e.toLowerCase();if(X0[r])return Es.from(X0[r].signature);for(const i of this.#e.values())if(r===i.selector)return i;return null}if(e.indexOf("(")===-1){const r=[];for(const[i,o]of this.#e)i.split("(")[0]===e&&r.push(o);if(r.length===0)return e==="Error"?Es.from("error Error(string)"):e==="Panic"?Es.from("error Panic(uint256)"):null;if(r.length>1){const i=r.map(o=>JSON.stringify(o.format())).join(", ");$(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return r[0]}if(e=Es.from(e).format(),e==="Error(string)")return Es.from("error Error(string)");if(e==="Panic(uint256)")return Es.from("error Panic(uint256)");const s=this.#e.get(e);return s||null}forEachError(e){const t=Array.from(this.#e.keys());t.sort((s,r)=>s.localeCompare(r));for(let s=0;s<t.length;s++){const r=t[s];e(this.#e.get(r),s)}}_decodeParams(e,t){return this.#s.decode(e,t)}_encodeParams(e,t){return this.#s.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){const s=this.getError(e);$(s,"unknown error","fragment",e),e=s}return $(en(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,en(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){const s=this.getError(e);$(s,"unknown error","fragment",e),e=s}return sn([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){const s=this.getFunction(e);$(s,"unknown function","fragment",e),e=s}return $(en(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,en(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){const s=this.getFunction(e);$(s,"unknown function","fragment",e),e=s}return sn([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){const i=this.getFunction(e);$(i,"unknown function","fragment",e),e=i}let s="invalid length for result data";const r=cs(t);if(r.length%32===0)try{return this.#s.decode(e.outputs,r)}catch{s="could not decode result data"}ce(!1,s,"BAD_DATA",{value:_e(r),info:{method:e.name,signature:e.format()}})}makeError(e,t){const s=ot(e,"data"),r=ja.getBuiltinCallException("call",t,s);if(r.message.startsWith("execution reverted (unknown custom error)")){const a=_e(s.slice(0,4)),l=this.getError(a);if(l)try{const c=this.#s.decode(l.inputs,s.slice(4));r.revert={name:l.name,signature:l.format(),args:c},r.reason=r.revert.signature,r.message=`execution reverted: ${r.reason}`}catch{r.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(t);return o&&(r.invocation={method:o.name,signature:o.signature,args:o.args}),r}encodeFunctionResult(e,t){if(typeof e=="string"){const s=this.getFunction(e);$(s,"unknown function","fragment",e),e=s}return _e(this.#s.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){const i=this.getEvent(e);$(i,"unknown event","eventFragment",e),e=i}ce(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const s=[];e.anonymous||s.push(e.topicHash);const r=(i,o)=>i.type==="string"?Uo(o):i.type==="bytes"?vn(_e(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=ji(o):i.type.match(/^bytes/)?o=jx(o,32):i.type==="address"&&this.#s.encode(["address"],[o]),ni(_e(o),32));for(t.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){$(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?s.push(null):a.baseType==="array"||a.baseType==="tuple"?$(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?s.push(i.map(l=>r(a,l))):s.push(r(a,i))});s.length&&s[s.length-1]===null;)s.pop();return s}encodeEventLog(e,t){if(typeof e=="string"){const o=this.getEvent(e);$(o,"unknown event","eventFragment",e),e=o}const s=[],r=[],i=[];return e.anonymous||s.push(e.topicHash),$(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((o,a)=>{const l=t[a];if(o.indexed)if(o.type==="string")s.push(Uo(l));else if(o.type==="bytes")s.push(vn(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");s.push(this.#s.encode([o.type],[l]))}else r.push(o),i.push(l)}),{data:this.#s.encode(r,i),topics:s}}decodeEventLog(e,t,s){if(typeof e=="string"){const m=this.getEvent(e);$(m,"unknown event","eventFragment",e),e=m}if(s!=null&&!e.anonymous){const m=e.topicHash;$(Bt(s[0],32)&&s[0].toLowerCase()===m,"fragment/topic mismatch","topics[0]",s[0]),s=s.slice(1)}const r=[],i=[],o=[];e.inputs.forEach((m,_)=>{m.indexed?m.type==="string"||m.type==="bytes"||m.baseType==="tuple"||m.baseType==="array"?(r.push(Ot.from({type:"bytes32",name:m.name})),o.push(!0)):(r.push(m),o.push(!1)):(i.push(m),o.push(!1))});const a=s!=null?this.#s.decode(r,sn(s)):null,l=this.#s.decode(i,t,!0),c=[],d=[];let f=0,p=0;return e.inputs.forEach((m,_)=>{let y=null;if(m.indexed)if(a==null)y=new J0(null);else if(o[_])y=new J0(a[p++]);else try{y=a[p++]}catch(A){y=A}else try{y=l[f++]}catch(A){y=A}c.push(y),d.push(m.name||null)}),jr.fromItems(c,d)}parseTransaction(e){const t=ot(e.data,"tx.data"),s=Se(e.value!=null?e.value:0,"tx.value"),r=this.getFunction(_e(t.slice(0,4)));if(!r)return null;const i=this.#s.decode(r.inputs,t.slice(4));return new SD(r,r.selector,i,s)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new TD(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=_e(e),s=this.getError(en(t,0,4));if(!s)return null;const r=this.#s.decode(s.inputs,en(t,4));return new PD(s,s.selector,r)}static from(e){return e instanceof Eo?e:typeof e=="string"?new Eo(JSON.parse(e)):typeof e.formatJson=="function"?new Eo(e.formatJson()):typeof e.format=="function"?new Eo(e.format("json")):new Eo(e)}}const yb=BigInt(0);function Pa(n){return n??null}function un(n){return n==null?null:n.toString()}class Z0{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,t,s){Ge(this,{gasPrice:Pa(e),maxFeePerGas:Pa(t),maxPriorityFeePerGas:Pa(s)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:s}=this;return{_type:"FeeData",gasPrice:un(e),maxFeePerGas:un(t),maxPriorityFeePerGas:un(s)}}}function Jd(n){const e={};n.to&&(e.to=n.to),n.from&&(e.from=n.from),n.data&&(e.data=_e(n.data));const t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const r of t)!(r in n)||n[r]==null||(e[r]=Se(n[r],`request.${r}`));const s="type,nonce".split(/,/);for(const r of s)!(r in n)||n[r]==null||(e[r]=rt(n[r],`request.${r}`));return n.accessList&&(e.accessList=Ko(n.accessList)),n.authorizationList&&(e.authorizationList=n.authorizationList.slice()),"blockTag"in n&&(e.blockTag=n.blockTag),"enableCcipRead"in n&&(e.enableCcipRead=!!n.enableCcipRead),"customData"in n&&(e.customData=n.customData),"blobVersionedHashes"in n&&n.blobVersionedHashes&&(e.blobVersionedHashes=n.blobVersionedHashes.slice()),"kzg"in n&&(e.kzg=n.kzg),"blobs"in n&&n.blobs&&(e.blobs=n.blobs.map(r=>cm(r)?_e(r):Object.assign({},r))),e}class RD{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#e;constructor(e,t){this.#e=e.transactions.map(s=>typeof s!="string"?new yu(s,t):s),Ge(this,{provider:t,hash:Pa(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Pa(e.prevRandao),extraData:e.extraData,baseFeePerGas:Pa(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return this.#e.map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=this.#e.slice();return e.length===0?[]:(ce(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:s,gasLimit:r,gasUsed:i,hash:o,miner:a,prevRandao:l,nonce:c,number:d,parentHash:f,parentBeaconBlockRoot:p,stateRoot:m,receiptsRoot:_,timestamp:y,transactions:A}=this;return{_type:"Block",baseFeePerGas:un(e),difficulty:un(t),extraData:s,gasLimit:un(r),gasUsed:un(i),blobGasUsed:un(this.blobGasUsed),excessBlobGas:un(this.excessBlobGas),hash:o,miner:a,prevRandao:l,nonce:c,number:d,parentHash:f,timestamp:y,parentBeaconBlockRoot:p,stateRoot:m,receiptsRoot:_,transactions:A}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#e.length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let t;if(typeof e=="number")t=this.#e[e];else{const s=e.toLowerCase();for(const r of this.#e)if(typeof r=="string"){if(r!==s)continue;t=r;break}else{if(r.hash!==s)continue;t=r;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(const s of t)if(s.hash===e)return s;$(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return xD(this)}}class vu{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,t){this.provider=t;const s=Object.freeze(e.topics.slice());Ge(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:s,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:s,data:r,index:i,removed:o,topics:a,transactionHash:l,transactionIndex:c}=this;return{_type:"log",address:e,blockHash:t,blockNumber:s,data:r,index:i,removed:o,topics:a,transactionHash:l,transactionIndex:c}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return ce(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return ce(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return ce(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return kD(this)}}class Ab{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#e;constructor(e,t){this.#e=Object.freeze(e.logs.map(r=>new vu(r,t)));let s=yb;e.effectiveGasPrice!=null?s=e.effectiveGasPrice:e.gasPrice!=null&&(s=e.gasPrice),Ge(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:s,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return this.#e}toJSON(){const{to:e,from:t,contractAddress:s,hash:r,index:i,blockHash:o,blockNumber:a,logsBloom:l,logs:c,status:d,root:f}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:s,cumulativeGasUsed:un(this.cumulativeGasUsed),from:t,gasPrice:un(this.gasPrice),blobGasUsed:un(this.blobGasUsed),blobGasPrice:un(this.blobGasPrice),gasUsed:un(this.gasUsed),hash:r,index:i,logs:c,logsBloom:l,root:f,status:d,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return _b(this)}reorderedEvent(e){return ce(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),wb(this,e)}}class yu{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;authorizationList;#e;constructor(e,t){this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,this.#e=-1}toJSON(){const{blockNumber:e,blockHash:t,index:s,hash:r,type:i,to:o,from:a,nonce:l,data:c,signature:d,accessList:f,blobVersionedHashes:p}=this;return{_type:"TransactionResponse",accessList:f,blockNumber:e,blockHash:t,blobVersionedHashes:p,chainId:un(this.chainId),data:c,from:a,gasLimit:un(this.gasLimit),gasPrice:un(this.gasPrice),hash:r,maxFeePerGas:un(this.maxFeePerGas),maxPriorityFeePerGas:un(this.maxPriorityFeePerGas),maxFeePerBlobGas:un(this.maxFeePerBlobGas),nonce:l,signature:d,to:o,index:s,type:i,value:un(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const s=await this.getTransaction();s&&(e=s.blockNumber)}if(e==null)return null;const t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:t,blockNumber:s}=await os({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:s-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const s=e??1,r=t??0;let i=this.#e,o=-1,a=i===-1;const l=async()=>{if(a)return null;const{blockNumber:p,nonce:m}=await os({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(m<this.nonce){i=p;return}if(a)return null;const _=await this.getTransaction();if(!(_&&_.blockNumber!=null))for(o===-1&&(o=i-3,o<this.#e&&(o=this.#e));o<=p;){if(a)return null;const y=await this.provider.getBlock(o,!0);if(y==null)return;for(const A of y)if(A===this.hash)return;for(let A=0;A<y.length;A++){const w=await y.getTransaction(A);if(w.from===this.from&&w.nonce===this.nonce){if(a)return null;const I=await this.provider.getTransactionReceipt(w.hash);if(I==null||p-I.blockNumber+1<s)return;let C="replaced";w.data===this.data&&w.to===this.to&&w.value===this.value?C="repriced":w.data==="0x"&&w.from===w.to&&w.value===yb&&(C="cancelled"),ce(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:C==="replaced"||C==="cancelled",reason:C,replacement:w.replaceableTransaction(i),hash:w.hash,receipt:I})}}o++}},c=p=>{if(p==null||p.status!==0)return p;ce(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:p.to,from:p.from,data:""},receipt:p})},d=await this.provider.getTransactionReceipt(this.hash);if(s===0)return c(d);if(d){if(s===1||await d.confirmations()>=s)return c(d)}else if(await l(),s===0)return null;return await new Promise((p,m)=>{const _=[],y=()=>{_.forEach(w=>w())};if(_.push(()=>{a=!0}),r>0){const w=setTimeout(()=>{y(),m(Gt("wait for transaction timeout","TIMEOUT"))},r);_.push(()=>{clearTimeout(w)})}const A=async w=>{if(await w.confirmations()>=s){y();try{p(c(w))}catch(I){m(I)}}};if(_.push(()=>{this.provider.off(this.hash,A)}),this.provider.on(this.hash,A),i>=0){const w=async()=>{try{await l()}catch(I){if(Hn(I,"TRANSACTION_REPLACED")){y(),m(I);return}}a||this.provider.once("block",w)};_.push(()=>{this.provider.off("block",w)}),this.provider.once("block",w)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return ce(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),_b(this)}reorderedEvent(e){return ce(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ce(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),wb(this,e)}replaceableTransaction(e){$(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new yu(this,this.provider);return t.#e=e,t}}function xD(n){return{orphan:"drop-block",hash:n.hash,number:n.number}}function wb(n,e){return{orphan:"reorder-transaction",tx:n,other:e}}function _b(n){return{orphan:"drop-transaction",tx:n}}function kD(n){return{orphan:"drop-log",log:{transactionHash:n.transactionHash,blockHash:n.blockHash,blockNumber:n.blockNumber,address:n.address,data:n.data,topics:Object.freeze(n.topics.slice()),index:n.index}}}class bm extends vu{interface;fragment;args;constructor(e,t,s){super(e,e.provider);const r=t.decodeEventLog(s,e.data,e.topics);Ge(this,{args:r,fragment:s,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Eb extends vu{error;constructor(e,t){super(e,e.provider),Ge(this,{error:t})}}class ND extends Ab{#e;constructor(e,t,s){super(s,t),this.#e=e}get logs(){return super.logs.map(e=>{const t=e.topics.length?this.#e.getEvent(e.topics[0]):null;if(t)try{return new bm(e,this.#e,t)}catch(s){return new Eb(e,s)}return e})}}class Im extends yu{#e;constructor(e,t,s){super(s,t),this.#e=e}async wait(e,t){const s=await super.wait(e,t);return s==null?null:new ND(this.#e,this.provider,s)}}class bb extends J1{log;constructor(e,t,s,r){super(e,t,s),Ge(this,{log:r})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class DD extends bb{constructor(e,t,s,r,i){super(e,t,s,new bm(i,e.interface,r));const o=e.interface.decodeEventLog(r,this.log.data,this.log.topics);Ge(this,{args:o,fragment:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const eA=BigInt(0);function Ib(n){return n&&typeof n.call=="function"}function Cb(n){return n&&typeof n.estimateGas=="function"}function zh(n){return n&&typeof n.resolveName=="function"}function Tb(n){return n&&typeof n.sendTransaction=="function"}function Sb(n){if(n!=null){if(zh(n))return n;if(n.provider)return n.provider}}class OD{#e;fragment;constructor(e,t,s){if(Ge(this,{fragment:t}),t.inputs.length<s.length)throw new Error("too many arguments");const r=Ho(e.runner,"resolveName"),i=zh(r)?r:null;this.#e=(async function(){const o=await Promise.all(t.inputs.map((a,l)=>s[l]==null?null:a.walkAsync(s[l],(d,f)=>d==="address"?Array.isArray(f)?Promise.all(f.map(p=>hs(p,i))):hs(f,i):f)));return e.interface.encodeFilterTopics(t,o)})()}getTopicFilter(){return this.#e}}function Ho(n,e){return n==null?null:typeof n[e]=="function"?n:n.provider&&typeof n.provider[e]=="function"?n.provider:null}function Po(n){return n==null?null:n.provider||null}async function Pb(n,e){const t=nn.dereference(n,"overrides");$(typeof t=="object","invalid overrides parameter","overrides",n);const s=Jd(t);return $(s.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",s.to),$(s.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",s.data),s.from&&(s.from=s.from),s}async function LD(n,e,t){const s=Ho(n,"resolveName"),r=zh(s)?s:null;return await Promise.all(e.map((i,o)=>i.walkAsync(t[o],(a,l)=>(l=nn.dereference(l,a),a==="address"?hs(l,r):l))))}function BD(n){const e=async function(o){const a=await Pb(o,["data"]);a.to=await n.getAddress(),a.from&&(a.from=await hs(a.from,Sb(n.runner)));const l=n.interface,c=Se(a.value||eA,"overrides.value")===eA,d=(a.data||"0x")==="0x";l.fallback&&!l.fallback.payable&&l.receive&&!d&&!c&&$(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),$(l.fallback||d,"cannot send data to receive-only contract","overrides.data",a.data);const f=l.receive||l.fallback&&l.fallback.payable;return $(f||c,"cannot send value to non-payable fallback","overrides.value",a.value),$(l.fallback||d,"cannot send data to receive-only contract","overrides.data",a.data),a},t=async function(o){const a=Ho(n.runner,"call");ce(Ib(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const l=await e(o);try{return await a.call(l)}catch(c){throw lm(c)&&c.data?n.interface.makeError(c.data,l):c}},s=async function(o){const a=n.runner;ce(Tb(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const l=await a.sendTransaction(await e(o)),c=Po(n.runner);return new Im(n.interface,c,l)},r=async function(o){const a=Ho(n.runner,"estimateGas");return ce(Cb(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await s(o);return Ge(i,{_contract:n,estimateGas:r,populateTransaction:e,send:s,staticCall:t}),i}function MD(n,e){const t=function(...c){const d=n.interface.getFunction(e,c);return ce(d,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:c}}),d},s=async function(...c){const d=t(...c);let f={};if(d.inputs.length+1===c.length&&(f=await Pb(c.pop()),f.from&&(f.from=await hs(f.from,Sb(n.runner)))),d.inputs.length!==c.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const p=await LD(n.runner,d.inputs,c);return Object.assign({},f,await os({to:n.getAddress(),data:n.interface.encodeFunctionData(d,p)}))},r=async function(...c){const d=await a(...c);return d.length===1?d[0]:d},i=async function(...c){const d=n.runner;ce(Tb(d),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const f=await d.sendTransaction(await s(...c)),p=Po(n.runner);return new Im(n.interface,p,f)},o=async function(...c){const d=Ho(n.runner,"estimateGas");return ce(Cb(d),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await d.estimateGas(await s(...c))},a=async function(...c){const d=Ho(n.runner,"call");ce(Ib(d),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const f=await s(...c);let p="0x";try{p=await d.call(f)}catch(_){throw lm(_)&&_.data?n.interface.makeError(_.data,f):_}const m=t(...c);return n.interface.decodeFunctionResult(m,p)},l=async(...c)=>t(...c).constant?await r(...c):await i(...c);return Ge(l,{name:n.interface.getFunctionName(e),_contract:n,_key:e,getFragment:t,estimateGas:o,populateTransaction:s,send:i,staticCall:r,staticCallResult:a}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{const c=n.interface.getFunction(e);return ce(c,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),c}}),l}function FD(n,e){const t=function(...r){const i=n.interface.getEvent(e,r);return ce(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:r}}),i},s=function(...r){return new OD(n,t(...r),r)};return Ge(s,{name:n.interface.getEventName(e),_contract:n,_key:e,getFragment:t}),Object.defineProperty(s,"fragment",{configurable:!1,enumerable:!0,get:()=>{const r=n.interface.getEvent(e);return ce(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),r}}),s}const Yd=Symbol.for("_ethersInternal_contract"),Rb=new WeakMap;function UD(n,e){Rb.set(n[Yd],e)}function xs(n){return Rb.get(n[Yd])}function VD(n){return n&&typeof n=="object"&&"getTopicFilter"in n&&typeof n.getTopicFilter=="function"&&n.fragment}async function Cm(n,e){let t,s=null;if(Array.isArray(e)){const i=function(o){if(Bt(o,32))return o;const a=n.interface.getEvent(o);return $(a,"unknown fragment","name",o),a.topicHash};t=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?t=[null]:typeof e=="string"?Bt(e,32)?t=[e]:(s=n.interface.getEvent(e),$(s,"unknown fragment","event",e),t=[s.topicHash]):VD(e)?t=await e.getTopicFilter():"fragment"in e?(s=e.fragment,t=[s.topicHash]):$(!1,"unknown event name","event",e);t=t.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const r=t.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:s,tag:r,topics:t}}async function fc(n,e){const{subs:t}=xs(n);return t.get((await Cm(n,e)).tag)||null}async function tA(n,e,t){const s=Po(n.runner);ce(s,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:r,tag:i,topics:o}=await Cm(n,t),{addr:a,subs:l}=xs(n);let c=l.get(i);if(!c){const f={address:a||n,topics:o},p=A=>{let w=r;if(w==null)try{w=n.interface.getEvent(A.topics[0])}catch{}if(w){const I=w,C=r?n.interface.decodeEventLog(r,A.data,A.topics):[];ig(n,t,C,M=>new DD(n,M,t,I,A))}else ig(n,t,[],I=>new bb(n,I,t,A))};let m=[];c={tag:i,listeners:[],start:()=>{m.length||m.push(s.on(f,p))},stop:async()=>{if(m.length==0)return;let A=m;m=[],await Promise.all(A),s.off(f,p)}},l.set(i,c)}return c}let rg=Promise.resolve();async function $D(n,e,t,s){await rg;const r=await fc(n,e);if(!r)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:o,once:a})=>{const l=Array.from(t);s&&l.push(s(a?null:o));try{o.call(n,...l)}catch{}return!a}),r.listeners.length===0&&(r.stop(),xs(n).subs.delete(r.tag)),i>0}async function ig(n,e,t,s){try{await rg}catch{}const r=$D(n,e,t,s);return rg=r,await r}const td=["then"];class Pc{target;interface;runner;filters;[Yd];fallback;constructor(e,t,s,r){$(typeof e=="string"||LE(e),"invalid value for Contract target","target",e),s==null&&(s=null);const i=Eo.from(t);Ge(this,{target:e,runner:s,interface:i}),Object.defineProperty(this,Yd,{value:{}});let o,a=null,l=null;if(r){const f=Po(s);l=new Im(this.interface,f,r)}let c=new Map;if(typeof e=="string")if(Bt(e))a=e,o=Promise.resolve(e);else{const f=Ho(s,"resolveName");if(!zh(f))throw Gt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=f.resolveName(e).then(p=>{if(p==null)throw Gt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return xs(this).addr=p,p})}else o=e.getAddress().then(f=>{if(f==null)throw new Error("TODO");return xs(this).addr=f,f});UD(this,{addrPromise:o,addr:a,deployTx:l,subs:c});const d=new Proxy({},{get:(f,p,m)=>{if(typeof p=="symbol"||td.indexOf(p)>=0)return Reflect.get(f,p,m);try{return this.getEvent(p)}catch(_){if(!Hn(_,"INVALID_ARGUMENT")||_.argument!=="key")throw _}},has:(f,p)=>td.indexOf(p)>=0?Reflect.has(f,p):Reflect.has(f,p)||this.interface.hasEvent(String(p))});return Ge(this,{filters:d}),Ge(this,{fallback:i.receive||i.fallback?BD(this):null}),new Proxy(this,{get:(f,p,m)=>{if(typeof p=="symbol"||p in f||td.indexOf(p)>=0)return Reflect.get(f,p,m);try{return f.getFunction(p)}catch(_){if(!Hn(_,"INVALID_ARGUMENT")||_.argument!=="key")throw _}},has:(f,p)=>typeof p=="symbol"||p in f||td.indexOf(p)>=0?Reflect.has(f,p):f.interface.hasFunction(p)})}connect(e){return new Pc(this.target,this.interface,e)}attach(e){return new Pc(e,this.interface,this.runner)}async getAddress(){return await xs(this).addrPromise}async getDeployedCode(){const e=Po(this.runner);ce(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return t==="0x"?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const s=Po(this.runner);return ce(s!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((r,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return r(this);s.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return xs(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),MD(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),FD(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,s){t==null&&(t=0),s==null&&(s="latest");const{addr:r,addrPromise:i}=xs(this),o=r||await i,{fragment:a,topics:l}=await Cm(this,e),c={address:o,topics:l,fromBlock:t,toBlock:s},d=Po(this.runner);return ce(d,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await d.getLogs(c)).map(f=>{let p=a;if(p==null)try{p=this.interface.getEvent(f.topics[0])}catch{}if(p)try{return new bm(f,this.interface,p)}catch(m){return new Eb(f,m)}return new vu(f,d)})}async on(e,t){const s=await tA(this,"on",e);return s.listeners.push({listener:t,once:!1}),s.start(),this}async once(e,t){const s=await tA(this,"once",e);return s.listeners.push({listener:t,once:!0}),s.start(),this}async emit(e,...t){return await ig(this,e,t,null)}async listenerCount(e){if(e){const r=await fc(this,e);return r?r.listeners.length:0}const{subs:t}=xs(this);let s=0;for(const{listeners:r}of t.values())s+=r.length;return s}async listeners(e){if(e){const r=await fc(this,e);return r?r.listeners.map(({listener:i})=>i):[]}const{subs:t}=xs(this);let s=[];for(const{listeners:r}of t.values())s=s.concat(r.map(({listener:i})=>i));return s}async off(e,t){const s=await fc(this,e);if(!s)return this;if(t){const r=s.listeners.map(({listener:i})=>i).indexOf(t);r>=0&&s.listeners.splice(r,1)}return(t==null||s.listeners.length===0)&&(s.stop(),xs(this).subs.delete(s.tag)),this}async removeAllListeners(e){if(e){const t=await fc(this,e);if(!t)return this;t.stop(),xs(this).subs.delete(t.tag)}else{const{subs:t}=xs(this);for(const{tag:s,stop:r}of t.values())r(),t.delete(s)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends Pc{constructor(r,i=null){super(r,e,i)}}return t}static from(e,t,s){return s==null&&(s=null),new this(e,t,s)}}function HD(){return Pc}class Rc extends HD(){}function rp(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):$(!1,"unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}class GD{name;constructor(e){Ge(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const xb=new RegExp("^(ipfs)://(.*)$","i"),nA=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),xb,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class Ra{provider;address;name;#e;#t;constructor(e,t,s){Ge(this,{provider:e,address:t,name:s}),this.#e=null,this.#t=new Rc(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return this.#e==null&&(this.#e=(async()=>{try{return await this.#t.supportsInterface("0x9061b923")}catch(e){if(Hn(e,"CALL_EXCEPTION"))return!1;throw this.#e=null,e}})()),await this.#e}async#n(e,t){t=(t||[]).slice();const s=this.#t.interface;t.unshift(sg(this.name));let r=null;await this.supportsWildcard()&&(r=s.getFunction(e),ce(r,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[rD(this.name,255),s.encodeFunctionData(r,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const i=await this.#t[e](...t);return r?s.decodeFunctionResult(r,i)[0]:i}catch(i){if(!Hn(i,"CALL_EXCEPTION"))throw i}return null}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await this.#n("addr(bytes32)");return i==null||i===zc?null:i}catch(i){if(Hn(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await this.#n("addr(bytes32,uint)",[i]);if(Bt(o,20))return bt(o)}let t=null;for(const i of this.provider.plugins)if(i instanceof GD&&i.supportsCoinType(e)){t=i;break}if(t==null)return null;const s=await this.#n("addr(bytes32,uint)",[e]);if(s==null||s==="0x")return null;const r=await t.decodeAddress(e,s);if(r!=null)return r;ce(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:s}})}async getText(e){const t=await this.#n("text(bytes32,string)",[e]);return t==null||t==="0x"?null:t}async getContentHash(){const e=await this.#n("contenthash(bytes32)");if(e==null||e==="0x")return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const r=t[1]==="e3010170"?"ipfs":"ipns",i=parseInt(t[4],16);if(t[5].length===i*2)return`${r}://${Wx("0x"+t[2])}`}const s=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(s&&s[1].length===64)return`bzz://${s[1]}`;ce(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(t==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let s=0;s<nA.length;s++){const r=t.match(nA[s]);if(r==null)continue;const i=r[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const o=rp(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:t});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const l=(r[2]||"").split("/");if(l.length!==2)return e.push({type:`!${i}caip`,value:r[2]||""}),{url:null,linkage:e};const c=l[1],d=new Rc(l[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const y=await d.ownerOf(c);if(a!==y)return e.push({type:"!owner",value:y}),{url:null,linkage:e};e.push({type:"owner",value:y})}else if(i==="erc1155"){const y=await d.balanceOf(a,c);if(!y)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:y.toString()})}let f=await d[o](c);if(f==null||f==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:f}),i==="erc1155"&&(f=f.replace("{id}",ji(c,32).substring(2)),e.push({type:"metadata-url-expanded",value:f})),f.match(/^ipfs:/i)&&(f=rp(f)),e.push({type:"metadata-url",value:f});let p={};const m=await new si(f).send();m.assertOk();try{p=m.bodyJson}catch{try{e.push({type:"!metadata",value:m.bodyText})}catch{const w=m.body;return w&&e.push({type:"!metadata",value:_e(w)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!p)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(p)});let _=p.image;if(typeof _!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!_.match(/^(https:\/\/|data:)/i)){if(_.match(xb)==null)return e.push({type:"!imageUrl-ipfs",value:_}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:_}),_=rp(_)}return e.push({type:"url",value:_}),{linkage:e,url:_}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),s=t.getPlugin("org.ethers.plugins.network.Ens");return ce(s,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),s.address}static async#s(e,t){const s=await Ra.getEnsAddress(e);try{const i=await new Rc(s,["function resolver(bytes32) view returns (address)"],e).resolver(sg(t),{enableCcipRead:!0});return i===zc?null:i}catch(r){throw r}return null}static async fromName(e,t){let s=t;for(;;){if(s===""||s==="."||t!=="eth"&&s==="eth")return null;const r=await Ra.#s(e,s);if(r!=null){const i=new Ra(e,r,t);return s!==t&&!await i.supportsWildcard()?null:i}s=s.split(".").slice(1).join(".")}}}const sA=BigInt(0);function ft(n,e){return(function(t){return t==null?e:n(t)})}function Xc(n,e){return(t=>{if(e&&t==null)return null;if(!Array.isArray(t))throw new Error("not an array");return t.map(s=>n(s))})}function Au(n,e){return(t=>{const s={};for(const r in n){let i=r;if(e&&r in e&&!(i in t)){for(const o of e[r])if(o in t){i=o;break}}try{const o=n[r](t[i]);o!==void 0&&(s[r]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";ce(!1,`invalid value for value.${r} (${a})`,"BAD_DATA",{value:t})}}return s})}function QD(n){switch(n){case!0:case"true":return!0;case!1:case"false":return!1}$(!1,`invalid boolean; ${JSON.stringify(n)}`,"value",n)}function za(n){return $(Bt(n,!0),"invalid data","value",n),n}function $n(n){return $(Bt(n,32),"invalid hash","value",n),n}const jD=Au({address:bt,blockHash:$n,blockNumber:rt,data:za,index:rt,removed:ft(QD,!1),topics:Xc($n),transactionHash:$n,transactionIndex:rt},{index:["logIndex"]});function zD(n){return jD(n)}const WD=Au({hash:ft($n),parentHash:$n,parentBeaconBlockRoot:ft($n,null),number:rt,timestamp:rt,nonce:ft(za),difficulty:Se,gasLimit:Se,gasUsed:Se,stateRoot:ft($n,null),receiptsRoot:ft($n,null),blobGasUsed:ft(Se,null),excessBlobGas:ft(Se,null),miner:ft(bt),prevRandao:ft($n,null),extraData:za,baseFeePerGas:ft(Se)},{prevRandao:["mixHash"]});function KD(n){const e=WD(n);return e.transactions=n.transactions.map(t=>typeof t=="string"?t:kb(t)),e}const qD=Au({transactionIndex:rt,blockNumber:rt,transactionHash:$n,address:bt,topics:Xc($n),data:za,index:rt,blockHash:$n},{index:["logIndex"]});function JD(n){return qD(n)}const YD=Au({to:ft(bt,null),from:ft(bt,null),contractAddress:ft(bt,null),index:rt,root:ft(_e),gasUsed:Se,blobGasUsed:ft(Se,null),logsBloom:ft(za),blockHash:$n,hash:$n,logs:Xc(JD),blockNumber:rt,cumulativeGasUsed:Se,effectiveGasPrice:ft(Se),blobGasPrice:ft(Se,null),status:ft(rt),type:ft(rt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function XD(n){return YD(n)}function kb(n){n.to&&Se(n.to)===sA&&(n.to="0x0000000000000000000000000000000000000000");const e=Au({hash:$n,index:ft(rt,void 0),type:t=>t==="0x"||t==null?0:rt(t),accessList:ft(Ko,null),blobVersionedHashes:ft(Xc($n,!0),null),authorizationList:ft(Xc(t=>{let s;if(t.signature)s=t.signature;else{let r=t.yParity;r==="0x1b"?r=0:r==="0x1c"&&(r=1),s=Object.assign({},t,{yParity:r})}return{address:bt(t.address),chainId:Se(t.chainId),nonce:Se(t.nonce),signature:tn.from(s)}},!1),null),blockHash:ft($n,null),blockNumber:ft(rt,null),transactionIndex:ft(rt,null),from:bt,gasPrice:ft(Se),maxPriorityFeePerGas:ft(Se),maxFeePerGas:ft(Se),maxFeePerBlobGas:ft(Se,null),gasLimit:Se,to:ft(bt,null),value:Se,nonce:rt,data:za,creates:ft(bt,null),chainId:ft(Se,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(n);if(e.to==null&&e.creates==null&&(e.creates=V2(e)),(n.type===1||n.type===2)&&n.accessList==null&&(e.accessList=[]),n.signature?e.signature=tn.from(n.signature):e.signature=tn.from(n),e.chainId==null){const t=e.signature.legacyChainId;t!=null&&(e.chainId=t)}return e.blockHash&&Se(e.blockHash)===sA&&(e.blockHash=null),e}const ZD="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class wu{name;constructor(e){Ge(this,{name:e})}clone(){return new wu(this.name)}}class Wh extends wu{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,t){e==null&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);const s={effectiveBlock:e};function r(i,o){let a=(t||{})[i];a==null&&(a=o),$(typeof a=="number",`invalud value for ${i}`,"costs",t),s[i]=a}r("txBase",21e3),r("txCreate",32e3),r("txDataZero",4),r("txDataNonzero",16),r("txAccessListStorageKey",1900),r("txAccessListAddress",2400),Ge(this,s)}clone(){return new Wh(this.effectiveBlock,this)}}class Kh extends wu{address;targetNetwork;constructor(e,t){super("org.ethers.plugins.network.Ens"),Ge(this,{address:e||ZD,targetNetwork:t??1})}clone(){return new Kh(this.address,this.targetNetwork)}}class eO extends wu{#e;#t;get url(){return this.#e}get processFunc(){return this.#t}constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#e=e,this.#t=t}clone(){return this}}const ip=new Map;class Ds{#e;#t;#n;constructor(e,t){this.#e=e,this.#t=Se(t),this.#n=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#e}set name(e){this.#e=e}get chainId(){return this.#t}set chainId(e){this.#t=Se(e,"chainId")}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Se(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Se(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Se(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(this.#n.values())}attachPlugin(e){if(this.#n.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#n.set(e.name,e.clone()),this}getPlugin(e){return this.#n.get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){const e=new Ds(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new Wh;let s=t.txBase;if(e.to==null&&(s+=t.txCreate),e.data)for(let r=2;r<e.data.length;r+=2)e.data.substring(r,r+2)==="00"?s+=t.txDataZero:s+=t.txDataNonzero;if(e.accessList){const r=Ko(e.accessList);for(const i in r)s+=t.txAccessListAddress+t.txAccessListStorageKey*r[i].storageKeys.length}return s}static from(e){if(tO(),e==null)return Ds.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const t=ip.get(e);if(t)return t();if(typeof e=="bigint")return new Ds("unknown",e);$(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){$(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const t=new Ds(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&t.attachPlugin(new Kh(e.ensAddress,e.ensNetwork)),t}$(!1,"invalid network","network",e)}static register(e,t){typeof e=="number"&&(e=BigInt(e));const s=ip.get(e);s&&$(!1,`conflicting network for ${JSON.stringify(s.name)}`,"nameOrChainId",e),ip.set(e,t)}}function rA(n,e){const t=String(n);if(!t.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${n}`);const s=t.split(".");if(s.length===1&&s.push(""),s.length!==2)throw new Error(`invalid gwei value: ${n}`);for(;s[1].length<e;)s[1]+="0";if(s[1].length>9){let r=BigInt(s[1].substring(0,9));s[1].substring(9).match(/^0+$/)||r++,s[1]=r.toString()}return BigInt(s[0]+s[1])}function iA(n){return new eO(n,async(e,t,s)=>{s.setHeader("User-Agent","ethers");let r;try{const[i,o]=await Promise.all([s.send(),e()]);r=i;const a=r.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:rA(a.maxFee,9),maxPriorityFeePerGas:rA(a.maxPriorityFee,9)}}catch(i){ce(!1,`error encountered with polygon gas station (${JSON.stringify(s.url)})`,"SERVER_ERROR",{request:s,response:r,error:i})}})}let oA=!1;function tO(){if(oA)return;oA=!0;function n(e,t,s){const r=function(){const i=new Ds(e,t);return s.ensNetwork!=null&&i.attachPlugin(new Kh(null,s.ensNetwork)),i.attachPlugin(new Wh),(s.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Ds.register(e,r),Ds.register(t,r),s.altNames&&s.altNames.forEach(i=>{Ds.register(i,r)})}n("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),n("ropsten",3,{ensNetwork:3}),n("rinkeby",4,{ensNetwork:4}),n("goerli",5,{ensNetwork:5}),n("kovan",42,{ensNetwork:42}),n("sepolia",11155111,{ensNetwork:11155111}),n("holesky",17e3,{ensNetwork:17e3}),n("classic",61,{}),n("classicKotti",6,{}),n("arbitrum",42161,{ensNetwork:1}),n("arbitrum-goerli",421613,{}),n("arbitrum-sepolia",421614,{}),n("base",8453,{ensNetwork:1}),n("base-goerli",84531,{}),n("base-sepolia",84532,{}),n("bnb",56,{ensNetwork:1}),n("bnbt",97,{}),n("linea",59144,{ensNetwork:1}),n("linea-goerli",59140,{}),n("linea-sepolia",59141,{}),n("matic",137,{ensNetwork:1,plugins:[iA("https://gasstation.polygon.technology/v2")]}),n("matic-amoy",80002,{}),n("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[iA("https://gasstation-testnet.polygon.technology/v2")]}),n("optimism",10,{ensNetwork:1,plugins:[]}),n("optimism-goerli",420,{}),n("optimism-sepolia",11155420,{}),n("xdai",100,{ensNetwork:1})}function og(n){return JSON.parse(JSON.stringify(n))}class nO{#e;#t;#n;#s;constructor(e){this.#e=e,this.#t=null,this.#n=4e3,this.#s=-2}get pollingInterval(){return this.#n}set pollingInterval(e){this.#n=e}async#r(){try{const e=await this.#e.getBlockNumber();if(this.#s===-2){this.#s=e;return}if(e!==this.#s){for(let t=this.#s+1;t<=e;t++){if(this.#t==null)return;await this.#e.emit("block",t)}this.#s=e}}catch{}this.#t!=null&&(this.#t=this.#e._setTimeout(this.#r.bind(this),this.#n))}start(){this.#t||(this.#t=this.#e._setTimeout(this.#r.bind(this),this.#n),this.#r())}stop(){this.#t&&(this.#e._clearTimeout(this.#t),this.#t=null)}pause(e){this.stop(),e&&(this.#s=-2)}resume(){this.start()}}class Tm{#e;#t;#n;constructor(e){this.#e=e,this.#n=!1,this.#t=t=>{this._poll(t,this.#e)}}async _poll(e,t){throw new Error("sub-classes must override this")}start(){this.#n||(this.#n=!0,this.#t(-2),this.#e.on("block",this.#t))}stop(){this.#n&&(this.#n=!1,this.#e.off("block",this.#t))}pause(e){this.stop()}resume(){this.start()}}class sO extends Tm{#e;#t;constructor(e,t){super(e),this.#e=t,this.#t=-2}pause(e){e&&(this.#t=-2),super.pause(e)}async _poll(e,t){const s=await t.getBlock(this.#e);s!=null&&(this.#t===-2?this.#t=s.number:s.number>this.#t&&(t.emit(this.#e,s.number),this.#t=s.number))}}class rO extends Tm{#e;constructor(e,t){super(e),this.#e=og(t)}async _poll(e,t){throw new Error("@TODO")}}class iO extends Tm{#e;constructor(e,t){super(e),this.#e=t}async _poll(e,t){const s=await t.getTransactionReceipt(this.#e);s&&t.emit(this.#e,s)}}class Sm{#e;#t;#n;#s;#r;constructor(e,t){this.#e=e,this.#t=og(t),this.#n=this.#o.bind(this),this.#s=!1,this.#r=-2}async#o(e){if(this.#r===-2)return;const t=og(this.#t);t.fromBlock=this.#r+1,t.toBlock=e;const s=await this.#e.getLogs(t);if(s.length===0){this.#r<e-60&&(this.#r=e-60);return}for(const r of s)this.#e.emit(this.#t,r),this.#r=r.blockNumber}start(){this.#s||(this.#s=!0,this.#r===-2&&this.#e.getBlockNumber().then(e=>{this.#r=e}),this.#e.on("block",this.#n))}stop(){this.#s&&(this.#s=!1,this.#e.off("block",this.#n))}pause(e){this.stop(),e&&(this.#r=-2)}resume(){this.start()}}const oO=BigInt(2),aO=10;function nd(n){return n&&typeof n.then=="function"}function yd(n,e){return n+":"+JSON.stringify(e,(t,s)=>{if(s==null)return"null";if(typeof s=="bigint")return`bigint:${s.toString()}`;if(typeof s=="string")return s.toLowerCase();if(typeof s=="object"&&!Array.isArray(s)){const r=Object.keys(s);return r.sort(),r.reduce((i,o)=>(i[o]=s[o],i),{})}return s})}class Nb{name;constructor(e){Ge(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function lO(n){return JSON.parse(JSON.stringify(n))}function ag(n){return n=Array.from(new Set(n).values()),n.sort(),n}async function op(n,e){if(n==null)throw new Error("invalid event");if(Array.isArray(n)&&(n={topics:n}),typeof n=="string")switch(n){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:n,tag:n}}if(Bt(n,32)){const t=n.toLowerCase();return{type:"transaction",tag:yd("tx",{hash:t}),hash:t}}if(n.orphan){const t=n;return{type:"orphan",tag:yd("orphan",t),filter:lO(t)}}if(n.address||n.topics){const t=n,s={topics:(t.topics||[]).map(r=>r==null?null:Array.isArray(r)?ag(r.map(i=>i.toLowerCase())):r.toLowerCase())};if(t.address){const r=[],i=[],o=a=>{Bt(a)?r.push(a):i.push((async()=>{r.push(await hs(a,e))})())};Array.isArray(t.address)?t.address.forEach(o):o(t.address),i.length&&await Promise.all(i),s.address=ag(r.map(a=>a.toLowerCase()))}return{filter:s,tag:yd("event",s),type:"event"}}$(!1,"unknown ProviderEvent","event",n)}function ap(){return new Date().getTime()}const cO={cacheTimeout:250,pollingInterval:4e3};class uO{#e;#t;#n;#s;#r;#o;#i;#a;#d;#c;#p;#g;constructor(e,t){if(this.#g=Object.assign({},cO,t||{}),e==="any")this.#o=!0,this.#r=null;else if(e){const s=Ds.from(e);this.#o=!1,this.#r=Promise.resolve(s),setTimeout(()=>{this.emit("network",s,null)},0)}else this.#o=!1,this.#r=null;this.#a=-1,this.#i=new Map,this.#e=new Map,this.#t=new Map,this.#n=null,this.#s=!1,this.#d=1,this.#c=new Map,this.#p=!1}get pollingInterval(){return this.#g.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#t.values())}attachPlugin(e){if(this.#t.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#t.set(e.name,e.connect(this)),this}getPlugin(e){return this.#t.get(e)||null}get disableCcipRead(){return this.#p}set disableCcipRead(e){this.#p=!!e}async#l(e){const t=this.#g.cacheTimeout;if(t<0)return await this._perform(e);const s=yd(e.method,e);let r=this.#i.get(s);return r||(r=this._perform(e),this.#i.set(s,r),setTimeout(()=>{this.#i.get(s)===r&&this.#i.delete(s)},t)),await r}async ccipReadFetch(e,t,s){if(this.disableCcipRead||s.length===0||e.to==null)return null;const r=e.to.toLowerCase(),i=t.toLowerCase(),o=[];for(let a=0;a<s.length;a++){const l=s[a],c=l.replace("{sender}",r).replace("{data}",i),d=new si(c);l.indexOf("{data}")===-1&&(d.body={data:i,sender:r}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:d,index:a,urls:s});let f="unknown error",p;try{p=await d.send()}catch(m){o.push(m.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:{error:m}});continue}try{const m=p.bodyJson;if(m.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:d,result:m}),m.data;m.message&&(f=m.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:m})}catch{}ce(p.statusCode<400||p.statusCode>=500,`response not found during CCIP fetch: ${f}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:l,errorMessage:f}}),o.push(f)}ce(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:s,errorMessages:o}})}_wrapBlock(e,t){return new RD(KD(e),this)}_wrapLog(e,t){return new vu(zD(e),this)}_wrapTransactionReceipt(e,t){return new Ab(XD(e),this)}_wrapTransactionResponse(e,t){return new yu(kb(e),this)}_detectNetwork(){ce(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){ce(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=rt(await this.#l({method:"getBlockNumber"}),"%response");return this.#a>=0&&(this.#a=e),e}_getAddress(e){return hs(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(Bt(e))return Bt(e,32)?e:Js(e);if(typeof e=="bigint"&&(e=rt(e,"blockTag")),typeof e=="number")return e>=0?Js(e):this.#a>=0?Js(this.#a+e):this.getBlockNumber().then(t=>Js(t+e));$(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const t=(e.topics||[]).map(l=>l==null?null:Array.isArray(l)?ag(l.map(c=>c.toLowerCase())):l.toLowerCase()),s="blockHash"in e?e.blockHash:void 0,r=(l,c,d)=>{let f;switch(l.length){case 0:break;case 1:f=l[0];break;default:l.sort(),f=l}if(s&&(c!=null||d!=null))throw new Error("invalid filter");const p={};return f&&(p.address=f),t.length&&(p.topics=t),c&&(p.fromBlock=c),d&&(p.toBlock=d),s&&(p.blockHash=s),p};let i=[];if(e.address)if(Array.isArray(e.address))for(const l of e.address)i.push(this._getAddress(l));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(l=>typeof l!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(l=>r(l[0],l[1],l[2])):r(i,o,a)}_getTransactionRequest(e){const t=Jd(e),s=[];if(["to","from"].forEach(r=>{if(t[r]==null)return;const i=hs(t[r],this);nd(i)?s.push((async function(){t[r]=await i})()):t[r]=i}),t.blockTag!=null){const r=this._getBlockTag(t.blockTag);nd(r)?s.push((async function(){t.blockTag=await r})()):t.blockTag=r}return s.length?(async function(){return await Promise.all(s),t})():t}async getNetwork(){if(this.#r==null){const r=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw this.#r===r&&(this.#r=null),i}})();return this.#r=r,(await r).clone()}const e=this.#r,[t,s]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==s.chainId&&(this.#o?(this.emit("network",s,t),this.#r===e&&(this.#r=Promise.resolve(s))):ce(!1,`network changed: ${t.chainId} => ${s.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:r,gasPrice:i,priorityFee:o}=await os({_block:this.#v("latest",!1),gasPrice:(async()=>{try{const d=await this.#l({method:"getGasPrice"});return Se(d,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const d=await this.#l({method:"getPriorityFee"});return Se(d,"%response")}catch{}return null})()});let a=null,l=null;const c=this._wrapBlock(r,e);return c&&c.baseFeePerGas&&(l=o??BigInt("1000000000"),a=c.baseFeePerGas*oO+l),new Z0(i,a,l)},s=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(s){const r=new si(s.url),i=await s.processFunc(t,this,r);return new Z0(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return nd(t)&&(t=await t),Se(await this.#l({method:"estimateGas",transaction:t}),"%response")}async#u(e,t,s){ce(s<aO,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const r=Jd(e);try{return _e(await this._perform({method:"call",transaction:r,blockTag:t}))}catch(i){if(!this.disableCcipRead&&lm(i)&&i.data&&s>=0&&t==="latest"&&r.to!=null&&en(i.data,0,4)==="0x556f1830"){const o=i.data,a=await hs(r.to,this);let l;try{l=gO(en(i.data,4))}catch(f){ce(!1,f.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:r,info:{data:o}})}ce(l.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:r,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:l.errorArgs}});const c=await this.ccipReadFetch(r,l.calldata,l.urls);ce(c!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:r,info:{data:i.data,errorArgs:l.errorArgs}});const d={to:a,data:sn([l.selector,pO([c,l.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:d});try{const f=await this.#u(d,t,s+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},d),result:f}),f}catch(f){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},d),error:f}),f}}throw i}}async#h(e){const{value:t}=await os({network:this.getNetwork(),value:e});return t}async call(e){const{tx:t,blockTag:s}=await os({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#h(this.#u(t,s,e.enableCcipRead?0:-1))}async#f(e,t,s){let r=this._getAddress(t),i=this._getBlockTag(s);return(typeof r!="string"||typeof i!="string")&&([r,i]=await Promise.all([r,i])),await this.#h(this.#l(Object.assign(e,{address:r,blockTag:i})))}async getBalance(e,t){return Se(await this.#f({method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return rt(await this.#f({method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return _e(await this.#f({method:"getCode"},e,t))}async getStorage(e,t,s){const r=Se(t,"position");return _e(await this.#f({method:"getStorage",position:r},e,s))}async broadcastTransaction(e){const{blockNumber:t,hash:s,network:r}=await os({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=Ks.from(e);if(i.hash!==s)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,r).replaceableTransaction(t)}async#v(e,t){if(Bt(e,32))return await this.#l({method:"getBlock",blockHash:e,includeTransactions:t});let s=this._getBlockTag(e);return typeof s!="string"&&(s=await s),await this.#l({method:"getBlock",blockTag:s,includeTransactions:t})}async getBlock(e,t){const{network:s,params:r}=await os({network:this.getNetwork(),params:this.#v(e,!!t)});return r==null?null:this._wrapBlock(r,s)}async getTransaction(e){const{network:t,params:s}=await os({network:this.getNetwork(),params:this.#l({method:"getTransaction",hash:e})});return s==null?null:this._wrapTransactionResponse(s,t)}async getTransactionReceipt(e){const{network:t,params:s}=await os({network:this.getNetwork(),params:this.#l({method:"getTransactionReceipt",hash:e})});if(s==null)return null;if(s.gasPrice==null&&s.effectiveGasPrice==null){const r=await this.#l({method:"getTransaction",hash:e});if(r==null)throw new Error("report this; could not find tx or effectiveGasPrice");s.effectiveGasPrice=r.gasPrice}return this._wrapTransactionReceipt(s,t)}async getTransactionResult(e){const{result:t}=await os({network:this.getNetwork(),result:this.#l({method:"getTransactionResult",hash:e})});return t==null?null:_e(t)}async getLogs(e){let t=this._getFilter(e);nd(t)&&(t=await t);const{network:s,params:r}=await os({network:this.getNetwork(),params:this.#l({method:"getLogs",filter:t})});return r.map(i=>this._wrapLog(i,s))}_getProvider(e){ce(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await Ra.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=bt(e);const t=sg(e.substring(2).toLowerCase()+".addr.reverse");try{const s=await Ra.getEnsAddress(this),i=await new Rc(s,["function resolver(bytes32) view returns (address)"],this).resolver(t);if(i==null||i===zc)return null;const a=await new Rc(i,["function name(bytes32) view returns (string)"],this).name(t);return await this.resolveName(a)!==e?null:a}catch(s){if(Hn(s,"BAD_DATA")&&s.value==="0x"||Hn(s,"CALL_EXCEPTION"))return null;throw s}return null}async waitForTransaction(e,t,s){const r=t??1;return r===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const l=(async c=>{try{const d=await this.getTransactionReceipt(e);if(d!=null&&c-d.blockNumber+1>=r){i(d),a&&(clearTimeout(a),a=null);return}}catch(d){console.log("EEE",d)}this.once("block",l)});s!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",l),o(Gt("timeout","TIMEOUT",{reason:"timeout"})))},s)),l(await this.getBlockNumber())})}async waitForBlock(e){ce(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=this.#c.get(e);t&&(t.timer&&clearTimeout(t.timer),this.#c.delete(e))}_setTimeout(e,t){t==null&&(t=0);const s=this.#d++,r=()=>{this.#c.delete(s),e()};if(this.paused)this.#c.set(s,{timer:null,func:r,time:t});else{const i=setTimeout(r,t);this.#c.set(s,{timer:i,func:r,time:ap()})}return s}_forEachSubscriber(e){for(const t of this.#e.values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Nb(e.type);case"block":{const t=new nO(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new sO(this,e.type);case"event":return new Sm(this,e.filter);case"transaction":return new iO(this,e.hash);case"orphan":return new rO(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const s of this.#e.values())if(s.subscriber===e){s.started&&s.subscriber.stop(),s.subscriber=t,s.started&&t.start(),this.#n!=null&&t.pause(this.#n);break}}async#m(e,t){let s=await op(e,this);return s.type==="event"&&t&&t.length>0&&t[0].removed===!0&&(s=await op({orphan:"drop-log",log:t[0]},this)),this.#e.get(s.tag)||null}async#y(e){const t=await op(e,this),s=t.tag;let r=this.#e.get(s);return r||(r={subscriber:this._getSubscriber(t),tag:s,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#e.set(s,r)),r}async on(e,t){const s=await this.#y(e);return s.listeners.push({listener:t,once:!1}),s.started||(s.subscriber.start(),s.started=!0,this.#n!=null&&s.subscriber.pause(this.#n)),this}async once(e,t){const s=await this.#y(e);return s.listeners.push({listener:t,once:!0}),s.started||(s.subscriber.start(),s.started=!0,this.#n!=null&&s.subscriber.pause(this.#n)),this}async emit(e,...t){const s=await this.#m(e,t);if(!s||s.listeners.length===0)return!1;const r=s.listeners.length;return s.listeners=s.listeners.filter(({listener:i,once:o})=>{const a=new J1(this,o?null:i,e);try{i.call(this,...t,a)}catch{}return!o}),s.listeners.length===0&&(s.started&&s.subscriber.stop(),this.#e.delete(s.tag)),r>0}async listenerCount(e){if(e){const s=await this.#m(e);return s?s.listeners.length:0}let t=0;for(const{listeners:s}of this.#e.values())t+=s.length;return t}async listeners(e){if(e){const s=await this.#m(e);return s?s.listeners.map(({listener:r})=>r):[]}let t=[];for(const{listeners:s}of this.#e.values())t=t.concat(s.map(({listener:r})=>r));return t}async off(e,t){const s=await this.#m(e);if(!s)return this;if(t){const r=s.listeners.map(({listener:i})=>i).indexOf(t);r>=0&&s.listeners.splice(r,1)}return(!t||s.listeners.length===0)&&(s.started&&s.subscriber.stop(),this.#e.delete(s.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:s,subscriber:r}=await this.#y(e);s&&r.stop(),this.#e.delete(t)}else for(const[t,{started:s,subscriber:r}]of this.#e)s&&r.stop(),this.#e.delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return this.#s}destroy(){this.removeAllListeners();for(const e of this.#c.keys())this._clearTimeout(e);this.#s=!0}get paused(){return this.#n!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#a=-1,this.#n!=null){if(this.#n==!!e)return;ce(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),this.#n=!!e;for(const t of this.#c.values())t.timer&&clearTimeout(t.timer),t.time=ap()-t.time}resume(){if(this.#n!=null){this._forEachSubscriber(e=>e.resume()),this.#n=null;for(const e of this.#c.values()){let t=e.time;t<0&&(t=0),e.time=ap(),setTimeout(e.func,t)}}}}function dO(n,e){try{const t=lg(n,e);if(t)return Gd(t)}catch{}return null}function lg(n,e){if(n==="0x")return null;try{const t=rt(en(n,e,e+32)),s=rt(en(n,t,t+32));return en(n,t+32,t+32+s)}catch{}return null}function aA(n){const e=Tn(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function hO(n){if(n.length%32===0)return n;const e=new Uint8Array(Math.ceil(n.length/32)*32);return e.set(n),e}const fO=new Uint8Array([]);function pO(n){const e=[];let t=0;for(let s=0;s<n.length;s++)e.push(fO),t+=32;for(let s=0;s<n.length;s++){const r=ot(n[s]);e[s]=aA(t),e.push(aA(r.length)),e.push(hO(r)),t+=32+Math.ceil(r.length/32)*32}return sn(e)}const lA="0x0000000000000000000000000000000000000000000000000000000000000000";function gO(n){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};ce(Ca(n)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const t=en(n,0,32);ce(en(t,0,12)===en(lA,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=en(t,12);try{const s=[],r=rt(en(n,32,64)),i=rt(en(n,r,r+32)),o=en(n,r+32);for(let a=0;a<i;a++){const l=dO(o,a*32);if(l==null)throw new Error("abort");s.push(l)}e.urls=s}catch{ce(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const s=lg(n,64);if(s==null)throw new Error("abort");e.calldata=s}catch{ce(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}ce(en(n,100,128)===en(lA,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=en(n,96,100);try{const s=lg(n,128);if(s==null)throw new Error("abort");e.extraData=s}catch{ce(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(s=>e[s]),e}function go(n,e){if(n.provider)return n.provider;ce(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function cA(n,e){let t=Jd(e);if(t.to!=null&&(t.to=hs(t.to,n)),t.from!=null){const s=t.from;t.from=Promise.all([n.getAddress(),hs(s,n)]).then(([r,i])=>($(r.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),r))}else t.from=n.getAddress();return await os(t)}class mO{provider;constructor(e){Ge(this,{provider:e||null})}async getNonce(e){return go(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await cA(this,e)}async populateTransaction(e){const t=go(this,"populateTransaction"),s=await cA(this,e);s.nonce==null&&(s.nonce=await this.getNonce("pending")),s.gasLimit==null&&(s.gasLimit=await this.estimateGas(s));const r=await this.provider.getNetwork();if(s.chainId!=null){const o=Se(s.chainId);$(o===r.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else s.chainId=r.chainId;const i=s.maxFeePerGas!=null||s.maxPriorityFeePerGas!=null;if(s.gasPrice!=null&&(s.type===2||i)?$(!1,"eip-1559 transaction do not support gasPrice","tx",e):(s.type===0||s.type===1)&&i&&$(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(s.type===2||s.type==null)&&s.maxFeePerGas!=null&&s.maxPriorityFeePerGas!=null)s.type=2;else if(s.type===0||s.type===1){const o=await t.getFeeData();ce(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),s.gasPrice==null&&(s.gasPrice=o.gasPrice)}else{const o=await t.getFeeData();if(s.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(s.authorizationList&&s.authorizationList.length?s.type=4:s.type=2,s.gasPrice!=null){const a=s.gasPrice;delete s.gasPrice,s.maxFeePerGas=a,s.maxPriorityFeePerGas=a}else s.maxFeePerGas==null&&(s.maxFeePerGas=o.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(ce(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),s.gasPrice==null&&(s.gasPrice=o.gasPrice),s.type=0):ce(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(s.type===2||s.type===3||s.type===4)&&(s.maxFeePerGas==null&&(s.maxFeePerGas=o.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await os(s)}async populateAuthorization(e){const t=Object.assign({},e);return t.chainId==null&&(t.chainId=(await go(this,"getNetwork").getNetwork()).chainId),t.nonce==null&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return go(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return go(this,"call").call(await this.populateCall(e))}async resolveName(e){return await go(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=go(this,"sendTransaction"),s=await this.populateTransaction(e);delete s.from;const r=Ks.from(s);return await t.broadcastTransaction(await this.signTransaction(r))}authorize(e){ce(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function vO(n){return JSON.parse(JSON.stringify(n))}class Db{#e;#t;#n;#s;#r;#o;constructor(e){this.#e=e,this.#t=null,this.#n=this.#i.bind(this),this.#s=!1,this.#r=null,this.#o=!1}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}async#i(e){try{this.#t==null&&(this.#t=this._subscribe(this.#e));let t=null;try{t=await this.#t}catch(i){if(!Hn(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(t==null){this.#t=null,this.#e._recoverSubscriber(this,this._recover(this.#e));return}const s=await this.#e.getNetwork();if(this.#r||(this.#r=s),this.#r.chainId!==s.chainId)throw new Error("chaid changed");if(this.#o)return;const r=await this.#e.send("eth_getFilterChanges",[t]);await this._emitResults(this.#e,r)}catch(t){console.log("@TODO",t)}this.#e.once("block",this.#n)}#a(){const e=this.#t;e&&(this.#t=null,e.then(t=>{this.#e.destroyed||this.#e.send("eth_uninstallFilter",[t])}))}start(){this.#s||(this.#s=!0,this.#i(-2))}stop(){this.#s&&(this.#s=!1,this.#o=!0,this.#a(),this.#e.off("block",this.#n))}pause(e){e&&this.#a(),this.#e.off("block",this.#n)}resume(){this.start()}}class yO extends Db{#e;constructor(e,t){super(e),this.#e=vO(t)}_recover(e){return new Sm(e,this.#e)}async _subscribe(e){return await e.send("eth_newFilter",[this.#e])}async _emitResults(e,t){for(const s of t)e.emit(this.#e,e._wrapLog(s,e._network))}}class AO extends Db{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const s of t)e.emit("pending",s)}}const wO="bigint,boolean,function,number,string,symbol".split(/,/g);function Ad(n){if(n==null||wO.indexOf(typeof n)>=0||typeof n.getAddress=="function")return n;if(Array.isArray(n))return n.map(Ad);if(typeof n=="object")return Object.keys(n).reduce((e,t)=>(e[t]=n[t],e),{});throw new Error(`should not happen: ${n} (${typeof n})`)}function _O(n){return new Promise(e=>{setTimeout(e,n)})}function la(n){return n&&n.toLowerCase()}function uA(n){return n&&typeof n.pollingInterval=="number"}const Ob={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class lp extends mO{address;constructor(e,t){super(e),t=bt(t),Ge(this,{address:t})}connect(e){ce(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const t=Ad(e),s=[];if(t.from){const i=t.from;s.push((async()=>{const o=await hs(i,this.provider);$(o!=null&&o.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=o})())}else t.from=this.address;if(t.gasLimit==null&&s.push((async()=>{t.gasLimit=await this.provider.estimateGas({...t,from:this.address})})()),t.to!=null){const i=t.to;s.push((async()=>{t.to=await hs(i,this.provider)})())}s.length&&await Promise.all(s);const r=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[r])}async sendTransaction(e){const t=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(e);return await new Promise((r,i)=>{const o=[1e3,100];let a=0;const l=async()=>{try{const c=await this.provider.getTransaction(s);if(c!=null){r(c.replaceableTransaction(t));return}}catch(c){if(Hn(c,"CANCELLED")||Hn(c,"BAD_DATA")||Hn(c,"NETWORK_ERROR")||Hn(c,"UNSUPPORTED_OPERATION")){c.info==null&&(c.info={}),c.info.sendTransactionHash=s,i(c);return}if(Hn(c,"INVALID_ARGUMENT")&&(a++,c.info==null&&(c.info={}),c.info.sendTransactionHash=s,a>10)){i(c);return}this.provider.emit("error",Gt("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:c}))}this.provider._setTimeout(()=>{l()},o.pop()||4e3)};l()})}async signTransaction(e){const t=Ad(e);if(t.from){const r=await hs(t.from,this.provider);$(r!=null&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=r}else t.from=this.address;const s=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[s])}async signMessage(e){const t=typeof e=="string"?Jr(e):e;return await this.provider.send("personal_sign",[_e(t),this.address.toLowerCase()])}async signTypedData(e,t,s){const r=Ad(s),i=await Rs.resolveNames(e,t,r,async o=>{const a=await hs(o);return $(a!=null,"TypedData does not support null address","value",o),a});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Rs.getPayload(i.domain,t,i.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const t=typeof e=="string"?Jr(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),_e(t)])}}class EO extends uO{#e;#t;#n;#s;#r;#o;#i;#a(){if(this.#s)return;const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");this.#s=setTimeout(()=>{this.#s=null;const t=this.#n;for(this.#n=[];t.length;){const s=[t.shift()];for(;t.length&&s.length!==this.#e.batchMaxCount;)if(s.push(t.shift()),JSON.stringify(s.map(i=>i.payload)).length>this.#e.batchMaxSize){t.unshift(s.pop());break}(async()=>{const r=s.length===1?s[0].payload:s.map(i=>i.payload);this.emit("debug",{action:"sendRpcPayload",payload:r});try{const i=await this._send(r);this.emit("debug",{action:"receiveRpcResult",result:i});for(const{resolve:o,reject:a,payload:l}of s){if(this.destroyed){a(Gt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const c=i.filter(d=>d.id===l.id)[0];if(c==null){const d=Gt("missing response for request","BAD_DATA",{value:i,info:{payload:l}});this.emit("error",d),a(d);continue}if("error"in c){a(this.getRpcError(l,c));continue}o(c.result)}}catch(i){this.emit("debug",{action:"receiveRpcError",error:i});for(const{reject:o}of s)o(i)}})()}},e)}constructor(e,t){super(e,t),this.#t=1,this.#e=Object.assign({},Ob,t||{}),this.#n=[],this.#s=null,this.#o=null,this.#i=null;{let r=null;const i=new Promise(o=>{r=o});this.#r={promise:i,resolve:r}}const s=this._getOption("staticNetwork");typeof s=="boolean"?($(!s||e!=="any","staticNetwork cannot be used on special network 'any'","options",t),s&&e!=null&&(this.#o=Ds.from(e))):s&&($(e==null||s.matches(e),"staticNetwork MUST match network object","options",t),this.#o=s)}_getOption(e){return this.#e[e]}get _network(){return ce(this.#o,"network is not available yet","NETWORK_ERROR"),this.#o}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let s=e.transaction;if(s&&s.type!=null&&Se(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const r=await this.getFeeData();r.maxFeePerGas==null&&r.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},s,{type:void 0})}))}}const t=this.getRpcRequest(e);return t!=null?await this.send(t.method,t.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)if(e===!0){if(this.#o)return this.#o}else return e;return this.#i?await this.#i:this.ready?(this.#i=(async()=>{try{const t=Ds.from(Se(await this.send("eth_chainId",[])));return this.#i=null,t}catch(t){throw this.#i=null,t}})(),await this.#i):(this.#i=(async()=>{const t={id:this.#t++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:t});let s;try{s=(await this._send(t))[0],this.#i=null}catch(r){throw this.#i=null,this.emit("debug",{action:"receiveRpcError",error:r}),r}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Ds.from(Se(s.result));throw this.getRpcError(t,s)})(),await this.#i)}_start(){this.#r==null||this.#r.resolve==null||(this.#r.resolve(),this.#r=null,(async()=>{for(;this.#o==null&&!this.destroyed;)try{this.#o=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Gt("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await _O(1e3)}this.#a()})())}async _waitUntilReady(){if(this.#r!=null)return await this.#r.promise}_getSubscriber(e){return e.type==="pending"?new AO(this):e.type==="event"?this._getOption("polling")?new Sm(this,e.filter):new yO(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new Nb("orphan"):super._getSubscriber(e)}get ready(){return this.#r==null}getRpcTransaction(e){const t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(e[s]==null)return;let r=s;s==="gasLimit"&&(r="gas"),t[r]=Js(Se(e[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{e[s]!=null&&(t[s]=_e(e[s]))}),e.accessList&&(t.accessList=Ko(e.accessList)),e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.map(s=>s.toLowerCase())),e.authorizationList&&(t.authorizationList=e.authorizationList.map(s=>{const r=UE(s);return{address:r.address,nonce:Js(r.nonce),chainId:Js(r.chainId),yParity:Js(r.signature.yParity),r:Js(r.signature.r),s:Js(r.signature.s)}})),t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[la(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[la(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[la(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[la(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(la):e.filter.address=la(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){const{method:s}=e,{error:r}=t;if(s==="eth_estimateGas"&&r.message){const a=r.message;if(!a.match(/revert/i)&&a.match(/insufficient funds/i))return Gt("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:r}});if(a.match(/nonce/i)&&a.match(/too low/i))return Gt("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:r}})}if(s==="eth_call"||s==="eth_estimateGas"){const a=cg(r),l=ja.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",e.params[0],a?a.data:null);return l.info={error:r,payload:e},l}const i=JSON.stringify(IO(r));if(typeof r.message=="string"&&r.message.match(/user denied|ethers-user-denied/i))return Gt("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:e,error:r}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const a=e.params[0];if(i.match(/insufficient funds|base fee exceeds gas limit/i))return Gt("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:a,info:{error:r}});if(i.match(/nonce/i)&&i.match(/too low/i))return Gt("nonce has already been used","NONCE_EXPIRED",{transaction:a,info:{error:r}});if(i.match(/replacement transaction/i)&&i.match(/underpriced/i))return Gt("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:a,info:{error:r}});if(i.match(/only replay-protected/i))return Gt("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:a,info:{error:r}}})}let o=!!i.match(/the method .* does not exist/i);return o||r&&r.details&&r.details.startsWith("Unauthorized method:")&&(o=!0),o?Gt("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:r,payload:e}}):Gt("could not coalesce error","UNKNOWN_ERROR",{error:r,payload:e})}send(e,t){if(this.destroyed)return Promise.reject(Gt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const s=this.#t++,r=new Promise((i,o)=>{this.#n.push({resolve:i,reject:o,payload:{method:e,params:t,id:s,jsonrpc:"2.0"}})});return this.#a(),r}async getSigner(e){e==null&&(e=0);const t=this.send("eth_accounts",[]);if(typeof e=="number"){const r=await t;if(e>=r.length)throw new Error("no such account");return new lp(this,r[e])}const{accounts:s}=await os({network:this.getNetwork(),accounts:t});e=bt(e);for(const r of s)if(bt(r)===e)return new lp(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(t=>new lp(this,t))}destroy(){this.#s&&(clearTimeout(this.#s),this.#s=null);for(const{payload:e,reject:t}of this.#n)t(Gt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#n=[],super.destroy()}}class bO extends EO{#e;constructor(e,t){super(e,t);let s=this._getOption("pollingInterval");s==null&&(s=Ob.pollingInterval),this.#e=s}_getSubscriber(e){const t=super._getSubscriber(e);return uA(t)&&(t.pollingInterval=this.#e),t}get pollingInterval(){return this.#e}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");this.#e=e,this._forEachSubscriber(t=>{uA(t)&&(t.pollingInterval=this.#e)})}}function cg(n){if(n==null)return null;if(typeof n.message=="string"&&n.message.match(/revert/i)&&Bt(n.data))return{message:n.message,data:n.data};if(typeof n=="object"){for(const e in n){const t=cg(n[e]);if(t)return t}return null}if(typeof n=="string")try{return cg(JSON.parse(n))}catch{}return null}function ug(n,e){if(n!=null){if(typeof n.message=="string"&&e.push(n.message),typeof n=="object")for(const t in n)ug(n[t],e);if(typeof n=="string")try{return ug(JSON.parse(n),e)}catch{}}}function IO(n){const e=[];return ug(n,e),e}class bo extends bO{#e;#t;constructor(e,t,s){const r=Object.assign({},s??{},{batchMaxCount:1});$(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(t,r),this.#t=null,s&&s.providerInfo&&(this.#t=s.providerInfo),this.#e=async(i,o)=>{const a={method:i,params:o};this.emit("debug",{action:"sendEip1193Request",payload:a});try{const l=await e.request(a);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const c=new Error(l.message);throw c.code=l.code,c.data=l.data,c.payload=a,this.emit("debug",{action:"receiveEip1193Error",error:c}),c}}}get providerInfo(){return this.#t}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){$(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const t=await this.#e(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){switch(t=JSON.parse(JSON.stringify(t)),t.error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`;break}return super.getRpcError(e,t)}async hasSigner(e){e==null&&(e=0);const t=await this.send("eth_accounts",[]);return typeof e=="number"?t.length>e:(e=e.toLowerCase(),t.filter(s=>s.toLowerCase()===e).length!==0)}async getSigner(e){if(e==null&&(e=0),!await this.hasSigner(e))try{await this.#e("eth_requestAccounts",[])}catch(t){const s=t.payload;throw this.getRpcError(s,{id:s.id,error:t})}return await super.getSigner(e)}static async discover(e){if(e==null&&(e={}),e.provider)return new bo(e.provider);const t=e.window?e.window:typeof window<"u"?window:null;if(t==null)return null;const s=e.anyProvider;if(s&&t.ethereum)return new bo(t.ethereum);if(!("addEventListener"in t&&"dispatchEvent"in t&&"removeEventListener"in t))return null;const r=e.timeout?e.timeout:300;return r===0?null:await new Promise((i,o)=>{let a=[];const l=f=>{a.push(f.detail),s&&c()},c=()=>{if(clearTimeout(d),a.length)if(e&&e.filter){const f=e.filter(a.map(p=>Object.assign({},p.info)));if(f==null)i(null);else if(f instanceof bo)i(f);else{let p=null;if(f.uuid&&(p=a.filter(_=>f.uuid===_.info.uuid)[0]),p){const{provider:m,info:_}=p;i(new bo(m,void 0,{providerInfo:_}))}else o(Gt("filter returned unknown info","UNSUPPORTED_OPERATION",{value:f}))}}else{const{provider:f,info:p}=a[0];i(new bo(f,void 0,{providerInfo:p}))}else i(null);t.removeEventListener("eip6963:announceProvider",l)},d=setTimeout(()=>{c()},r);t.addEventListener("eip6963:announceProvider",l),t.dispatchEvent(new Event("eip6963:requestProvider"))})}}const Pm=()=>typeof window<"u"&&window.ethereum?new bo(window.ethereum):null,_u=()=>typeof window<"u"&&typeof window.ethereum<"u",CO=async()=>{try{if(!_u())return{success:!1,error:"MetaMask   . MetaMask .",needInstall:!0};const n=Pm();if(!n)return{success:!1,error:" Provider   ."};const e=await window.ethereum.request({method:"eth_requestAccounts"});if(e&&e.length>0){const t=e[0],s=await n.getBalance(t),r=rE(s);return{success:!0,address:t,balance:r,provider:n}}return{success:!1,error:"  ."}}catch(n){return console.error("  :",n),n.code===4001?{success:!1,error:"  ."}:{success:!1,error:n.message||"    ."}}},TO=async()=>{try{if(!_u()||!Pm())return null;const e=await window.ethereum.request({method:"eth_accounts"});return e&&e.length>0?e[0]:null}catch(n){return console.error("   :",n),null}},Lb=async n=>{try{const e=Pm();if(!e)return"0";const t=await e.getBalance(n);return rE(t)}catch(e){return console.error("   :",e),"0"}},SO=async()=>{try{const n=await TO();if(!n)return{connected:!1,address:null};const e=await Lb(n);return{connected:!0,address:n,balance:e}}catch(n){return console.error("    :",n),{connected:!1,address:null}}},PO=n=>_u()?(window.ethereum.on("accountsChanged",n),()=>{window.ethereum.removeListener&&window.ethereum.removeListener("accountsChanged",n)}):null,RO=n=>_u()?(window.ethereum.on("chainChanged",n),()=>{window.ethereum.removeListener&&window.ethereum.removeListener("chainChanged",n)}):null,wd=n=>{let e;return typeof n=="string"?e=parseInt(n,10):typeof n=="number"?e=n:e=parseInt(n,10),isNaN(e)||e===null||e===void 0?"0":(e=Math.floor(e),e>=1e9?(e/1e9).toFixed(1).replace(/\.0$/,"")+"B":e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e4?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString())},be=du({isLoggedIn:!1,loginType:null,walletAddress:"",userBalance:"0 ETH",isWalletConnected:!1,walletProvider:null,isLoading:!1,currentUser:null,coins:0,totalCoin:0,catFragments:50,level:1,nftCount:0,miningLevel:1,huntingLevel:1,explorationLevel:1,productionLevel:1,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}),on=()=>{const n=()=>{const C=dt();C?(be.currentUser=C,be.isLoggedIn=!0,e(C.gameData||{})):(be.currentUser=null,be.isLoggedIn=!1)},e=C=>{be.coins=C.coins||0,be.totalCoin=C.totalCoin||0,be.catFragments=C.catFragments||50,be.level=C.level||1,be.nftCount=C.nftCount||0,be.miningLevel=C.miningLevel||1,be.huntingLevel=C.huntingLevel||1,be.explorationLevel=C.explorationLevel||1,be.productionLevel=C.productionLevel||1;const M=Q=>{const q=(Q||[]).slice(0,4);return q.length===4?q:[...q,...Array(4-q.length).fill(null)]};be.miningCats=M(C.miningCats),be.huntingCats=M(C.huntingCats),be.explorationCats=M(C.explorationCats),be.productionCats=M(C.productionCats),be.inventory=C.inventory||[]},t=async C=>{if(!be.currentUser)return console.warn("  ."),!1;try{return await Qc(be.currentUser.id,C)?(e({...be.currentUser.gameData,...C}),be.currentUser&&(be.currentUser.gameData={...be.currentUser.gameData,...C},localStorage.setItem("currentUser",JSON.stringify(be.currentUser)),sessionStorage.setItem("currentUser",JSON.stringify(be.currentUser))),window.dispatchEvent(new CustomEvent("userDataUpdated")),!0):!1}catch(M){return console.error("   :",M),!1}},s=async C=>await t({coins:C}),r=async C=>await t({totalCoin:C}),i=async C=>await t({catFragments:C}),o=async C=>await t({level:C}),a=async C=>await t(C),l=async()=>{try{be.isLoading=!0;const C=await CO();return C.success?(be.isWalletConnected=!0,be.walletAddress=C.address,be.userBalance=`${parseFloat(C.balance).toFixed(4)} ETH`,be.walletProvider=C.provider,be.loginType="wallet",await c(C.address,C.balance),{success:!0,address:C.address,balance:C.balance}):C}catch(C){return console.error("  :",C),{success:!1,error:C.message||"    ."}}finally{be.isLoading=!1}},c=async(C,M)=>{let Q=am(C);Q||(Q=G1(C)),localStorage.setItem("currentUser",JSON.stringify(Q)),sessionStorage.setItem("currentUser",JSON.stringify(Q)),be.currentUser=Q,be.isLoggedIn=!0,be.loginType="wallet",e(Q.gameData||{})},d=()=>{be.isWalletConnected=!1,be.walletAddress="",be.userBalance="0 ETH",be.walletProvider=null,be.loginType=null;const C=dt();C&&C.loginType==="wallet"&&(localStorage.removeItem("currentUser"),sessionStorage.removeItem("currentUser")),A()},f=async()=>{if(be.walletAddress)try{const C=await Lb(be.walletAddress);be.userBalance=`${parseFloat(C).toFixed(4)} ETH`}catch(C){console.error("   :",C)}},p=async()=>{try{const C=dt();if(!C||C.loginType!=="wallet")return{connected:!1};const M=await SO();return M.connected&&M.address===C.walletAddress?(be.isWalletConnected=!0,be.walletAddress=M.address,be.userBalance=`${parseFloat(M.balance).toFixed(4)} ETH`,await c(M.address,M.balance)):d(),M}catch(C){return console.error("   :",C),{connected:!1}}},m=()=>{const C=PO(Q=>{Q&&Q.length>0?c(Q[0]):d()}),M=RO(()=>{});return()=>{C&&C(),M&&M()}},_=(C,M)=>{be.isLoggedIn=!0,be.walletAddress=C,be.userBalance=M,be.loginType=C.startsWith("0x")?"wallet":"email",n()},y=C=>{be.isLoading=C},A=()=>{be.isLoggedIn=!1,be.loginType=null,be.walletAddress="",be.userBalance="0 ETH",be.isWalletConnected=!1,be.walletProvider=null,be.currentUser=null,be.coins=0,be.totalCoin=0,be.catFragments=50,be.level=1,be.nftCount=0,localStorage.removeItem("currentUser"),sessionStorage.removeItem("currentUser")},w=pe(()=>wd(be.coins)),I=pe(()=>wd(be.totalCoin));return{state:xO(be),formattedCoins:w,formattedTotalCoin:I,loadCurrentUser:n,syncGameData:e,updateGameData:t,updateCoins:s,updateTotalCoin:r,updateCatFragments:i,updateLevel:o,updateMultiple:a,setWalletConnected:_,connectWalletToApp:l,disconnectWalletFromApp:d,updateWalletBalance:f,checkWalletStatus:p,setupWalletListeners:m,setUserData:C=>{be.nftCount=C.nftCount||0,be.gameLevel=C.gameLevel||1},setLoading:y,logout:A,formatNumber:wd}},xO=n=>new Proxy(n,{get(e,t){return e[t]},set(){return console.warn("   .  ."),!1}}),kO=()=>{};var dA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},NO=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const r=n[t++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=n[t++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=n[t++],o=n[t++],a=n[t++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=n[t++],o=n[t++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Mb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const i=n[r],o=r+1<n.length,a=o?n[r+1]:0,l=r+2<n.length,c=l?n[r+2]:0,d=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),s.push(t[d],t[f],t[p],t[m])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Bb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):NO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const i=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;const c=r<n.length?t[n.charAt(r)]:64;++r;const f=r<n.length?t[n.charAt(r)]:64;if(++r,i==null||a==null||c==null||f==null)throw new DO;const p=i<<2|a>>4;if(s.push(p),c!==64){const m=a<<4&240|c>>2;if(s.push(m),f!==64){const _=c<<6&192|f;s.push(_)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class DO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OO=function(n){const e=Bb(n);return Mb.encodeByteArray(e,!0)},Xd=function(n){return OO(n).replace(/\./g,"")},Fb=function(n){try{return Mb.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=()=>LO().__FIREBASE_DEFAULTS__,MO=()=>{if(typeof process>"u"||typeof dA>"u")return;const n=dA.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},FO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Fb(n[1]);return e&&JSON.parse(e)},qh=()=>{try{return kO()||BO()||MO()||FO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ub=n=>qh()?.emulatorHosts?.[n],UO=n=>{const e=Ub(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Vb=()=>qh()?.config,$b=n=>qh()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Hb(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",r=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Xd(JSON.stringify(t)),Xd(JSON.stringify(o)),""].join(".")}const xc={};function HO(){const n={prod:[],emulator:[]};for(const e of Object.keys(xc))xc[e]?n.emulator.push(e):n.prod.push(e);return n}function GO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let hA=!1;function Gb(n,e){if(typeof window>"u"||typeof document>"u"||!rl(window.location.host)||xc[n]===e||xc[n]||hA)return;xc[n]=e;function t(p){return`__firebase__banner__${p}`}const s="__firebase__banner",i=HO().prod.length>0;function o(){const p=document.getElementById(s);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{hA=!0,o()},p}function d(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=GO(s),m=t("text"),_=document.getElementById(m)||document.createElement("span"),y=t("learnmore"),A=document.getElementById(y)||document.createElement("a"),w=t("preprendIcon"),I=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const C=p.element;a(C),d(A,y);const M=c();l(I,w),C.append(I,_,A,M),document.body.appendChild(C)}i?(_.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ts())}function jO(){const n=qh()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Qb(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function WO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KO(){const n=ts();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function qO(){return!jO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jb(){try{return typeof indexedDB=="object"}catch{return!1}}function zb(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(t){e(t)}})}function JO(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO="FirebaseError";class or extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=YO,Object.setPrototypeOf(this,or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jo.prototype.create)}}class Jo{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?XO(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new or(r,a,s)}}function XO(n,e){return n.replace(ZO,(t,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const ZO=/\{\$([^}]+)}/g;function eL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Wi(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const r of t){if(!s.includes(r))return!1;const i=n[r],o=e[r];if(fA(i)&&fA(o)){if(!Wi(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!t.includes(r))return!1;return!0}function fA(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function tL(n,e){const t=new nL(n,e);return t.subscribe.bind(t)}class nL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let r;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");sL(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:s},r.next===void 0&&(r.next=cp),r.error===void 0&&(r.error=cp),r.complete===void 0&&(r.complete=cp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function cp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=1e3,iL=2,oL=14400*1e3,aL=.5;function pA(n,e=rL,t=iL){const s=e*Math.pow(t,n),r=Math.round(aL*s*(Math.random()-.5)*2);return Math.min(oL,s+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(n){return n&&n._delegate?n._delegate:n}class sr{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new VO;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uL(e))try{this.getOrInitializeService({instanceIdentifier:yo})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=yo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yo){return this.instances.has(e)}getOptions(e=yo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const r of s)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:cL(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=yo){return this.component?this.component.multipleInstances?e:yo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cL(n){return n===yo?void 0:n}function uL(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lL(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(lt||(lt={}));const hL={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},fL=lt.INFO,pL={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},gL=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),r=pL[e];if(r)console[r](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jh{constructor(e){this.name=e,this._logLevel=fL,this._logHandler=gL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...e),this._logHandler(this,lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...e),this._logHandler(this,lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...e),this._logHandler(this,lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...e),this._logHandler(this,lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...e),this._logHandler(this,lt.ERROR,...e)}}const mL=(n,e)=>e.some(t=>n instanceof t);let gA,mA;function vL(){return gA||(gA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yL(){return mA||(mA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wb=new WeakMap,dg=new WeakMap,Kb=new WeakMap,up=new WeakMap,Rm=new WeakMap;function AL(n){const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{t(Fi(n.result)),r()},o=()=>{s(n.error),r()};n.addEventListener("success",i),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Wb.set(t,n)}).catch(()=>{}),Rm.set(e,n),e}function wL(n){if(dg.has(n))return;const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});dg.set(n,e)}let hg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return dg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Kb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Fi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function _L(n){hg=n(hg)}function EL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(dp(this),e,...t);return Kb.set(s,e.sort?e.sort():[e]),Fi(s)}:yL().includes(n)?function(...e){return n.apply(dp(this),e),Fi(Wb.get(this))}:function(...e){return Fi(n.apply(dp(this),e))}}function bL(n){return typeof n=="function"?EL(n):(n instanceof IDBTransaction&&wL(n),mL(n,vL())?new Proxy(n,hg):n)}function Fi(n){if(n instanceof IDBRequest)return AL(n);if(up.has(n))return up.get(n);const e=bL(n);return e!==n&&(up.set(n,e),Rm.set(e,n)),e}const dp=n=>Rm.get(n);function qb(n,e,{blocked:t,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(n,e),a=Fi(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Fi(o.result),l.oldVersion,l.newVersion,Fi(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const IL=["get","getKey","getAll","getAllKeys","count"],CL=["put","add","delete","clear"],hp=new Map;function vA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hp.get(e))return hp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,r=CL.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(r||IL.includes(t)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),r&&l.done]))[0]};return hp.set(e,i),i}_L(n=>({...n,get:(e,t,s)=>vA(e,t)||n.get(e,t,s),has:(e,t)=>!!vA(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(SL(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function SL(n){return n.getComponent()?.type==="VERSION"}const fg="@firebase/app",yA="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=new Jh("@firebase/app"),PL="@firebase/app-compat",RL="@firebase/analytics-compat",xL="@firebase/analytics",kL="@firebase/app-check-compat",NL="@firebase/app-check",DL="@firebase/auth",OL="@firebase/auth-compat",LL="@firebase/database",BL="@firebase/data-connect",ML="@firebase/database-compat",FL="@firebase/functions",UL="@firebase/functions-compat",VL="@firebase/installations",$L="@firebase/installations-compat",HL="@firebase/messaging",GL="@firebase/messaging-compat",QL="@firebase/performance",jL="@firebase/performance-compat",zL="@firebase/remote-config",WL="@firebase/remote-config-compat",KL="@firebase/storage",qL="@firebase/storage-compat",JL="@firebase/firestore",YL="@firebase/ai",XL="@firebase/firestore-compat",ZL="firebase",eB="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="[DEFAULT]",tB={[fg]:"fire-core",[PL]:"fire-core-compat",[xL]:"fire-analytics",[RL]:"fire-analytics-compat",[NL]:"fire-app-check",[kL]:"fire-app-check-compat",[DL]:"fire-auth",[OL]:"fire-auth-compat",[LL]:"fire-rtdb",[BL]:"fire-data-connect",[ML]:"fire-rtdb-compat",[FL]:"fire-fn",[UL]:"fire-fn-compat",[VL]:"fire-iid",[$L]:"fire-iid-compat",[HL]:"fire-fcm",[GL]:"fire-fcm-compat",[QL]:"fire-perf",[jL]:"fire-perf-compat",[zL]:"fire-rc",[WL]:"fire-rc-compat",[KL]:"fire-gcs",[qL]:"fire-gcs-compat",[JL]:"fire-fst",[XL]:"fire-fst-compat",[YL]:"fire-vertex","fire-js":"fire-js",[ZL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc=new Map,nB=new Map,gg=new Map;function AA(n,e){try{n.container.addComponent(e)}catch(t){ii.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Sr(n){const e=n.name;if(gg.has(e))return ii.debug(`There were multiple attempts to register component ${e}.`),!1;gg.set(e,n);for(const t of Zc.values())AA(t,n);for(const t of nB.values())AA(t,n);return!0}function Yo(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function vr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ui=new Jo("app","Firebase",sB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new sr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=eB;function Jb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:pg,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Ui.create("bad-app-name",{appName:String(r)});if(t||(t=Vb()),!t)throw Ui.create("no-options");const i=Zc.get(r);if(i){if(Wi(t,i.options)&&Wi(s,i.config))return i;throw Ui.create("duplicate-app",{appName:r})}const o=new dL(r);for(const l of gg.values())o.addComponent(l);const a=new rB(t,s,o);return Zc.set(r,a),a}function eu(n=pg){const e=Zc.get(n);if(!e&&n===pg&&Vb())return Jb();if(!e)throw Ui.create("no-app",{appName:n});return e}function wA(){return Array.from(Zc.values())}function Hs(n,e,t){let s=tB[n]??n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ii.warn(o.join(" "));return}Sr(new sr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iB="firebase-heartbeat-database",oB=1,tu="firebase-heartbeat-store";let fp=null;function Yb(){return fp||(fp=qb(iB,oB,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(tu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ui.create("idb-open",{originalErrorMessage:n.message})})),fp}async function aB(n){try{const t=(await Yb()).transaction(tu),s=await t.objectStore(tu).get(Xb(n));return await t.done,s}catch(e){if(e instanceof or)ii.warn(e.message);else{const t=Ui.create("idb-get",{originalErrorMessage:e?.message});ii.warn(t.message)}}}async function _A(n,e){try{const s=(await Yb()).transaction(tu,"readwrite");await s.objectStore(tu).put(e,Xb(n)),await s.done}catch(t){if(t instanceof or)ii.warn(t.message);else{const s=Ui.create("idb-set",{originalErrorMessage:t?.message});ii.warn(s.message)}}}function Xb(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lB=1024,cB=30;class uB{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hB(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=EA();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>cB){const r=fB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ii.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=EA(),{heartbeatsToSend:t,unsentEntries:s}=dB(this._heartbeatsCache.heartbeats),r=Xd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return ii.warn(e),""}}}function EA(){return new Date().toISOString().substring(0,10)}function dB(n,e=lB){const t=[];let s=n.slice();for(const r of n){const i=t.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),bA(t)>e){i.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),bA(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class hB{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jb()?zb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await aB(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return _A(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return _A(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function bA(n){return Xd(JSON.stringify({version:2,heartbeats:n})).length}function fB(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pB(n){Sr(new sr("platform-logger",e=>new TL(e),"PRIVATE")),Sr(new sr("heartbeat",e=>new uB(e),"PRIVATE")),Hs(fg,yA,n),Hs(fg,yA,"esm2020"),Hs("fire-js","")}pB("");var gB="firebase",mB="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hs(gB,mB,"app");function Zb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vB=Zb,eI=new Jo("auth","Firebase",Zb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd=new Jh("@firebase/auth");function yB(n,...e){Zd.logLevel<=lt.WARN&&Zd.warn(`Auth (${il}): ${n}`,...e)}function _d(n,...e){Zd.logLevel<=lt.ERROR&&Zd.error(`Auth (${il}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(n,...e){throw xm(n,...e)}function Ar(n,...e){return xm(n,...e)}function tI(n,e,t){const s={...vB(),[e]:t};return new Jo("auth","Firebase",s).create(e,{appName:n.name})}function Oo(n){return tI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xm(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return eI.create(n,...e)}function Ke(n,e,...t){if(!n)throw xm(e,...t)}function Wr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _d(e),new Error(e)}function ai(n,e){n||Wr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(){return typeof self<"u"&&self.location?.href||""}function AB(){return IA()==="http:"||IA()==="https:"}function IA(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AB()||Qb()||"connection"in navigator)?navigator.onLine:!0}function _B(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ai(t>e,"Short delay should be less than long delay!"),this.isMobile=QO()||WO()}get(){return wB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(n,e){ai(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],IB=new bu(3e4,6e4);function Nm(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ol(n,e,t,s,r={}){return sI(n,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=Eu({key:n.config.apiKey,...o}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c={method:e,headers:l,...i};return zO()||(c.referrerPolicy="no-referrer"),n.emulatorConfig&&rl(n.emulatorConfig.host)&&(c.credentials="include"),nI.fetch()(await rI(n,n.config.apiHost,t,a),c)})}async function sI(n,e,t){n._canInitEmulator=!1;const s={...EB,...e};try{const r=new TB(n),i=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw sd(n,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw sd(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw sd(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw sd(n,"user-disabled",o);const d=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw tI(n,d,c);oi(n,d)}}catch(r){if(r instanceof or)throw r;oi(n,"network-request-failed",{message:String(r)})}}async function CB(n,e,t,s,r={}){const i=await ol(n,e,t,s,r);return"mfaPendingCredential"in i&&oi(n,"multi-factor-auth-required",{_serverResponse:i}),i}async function rI(n,e,t,s){const r=`${e}${t}?${s}`,i=n,o=i.config.emulator?km(n.config,r):`${n.config.apiScheme}://${r}`;return bB.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class TB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Ar(this.auth,"network-request-failed")),IB.get())})}}function sd(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const r=Ar(n,e,s);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SB(n,e){return ol(n,"POST","/v1/accounts:delete",e)}async function eh(n,e){return ol(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PB(n,e=!1){const t=wn(n),s=await t.getIdToken(e),r=Dm(s);Ke(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:kc(pp(r.auth_time)),issuedAtTime:kc(pp(r.iat)),expirationTime:kc(pp(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function pp(n){return Number(n)*1e3}function Dm(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return _d("JWT malformed, contained fewer than 3 sections"),null;try{const r=Fb(t);return r?JSON.parse(r):(_d("Failed to decode base64 JWT payload"),null)}catch(r){return _d("Caught error parsing JWT payload as JSON",r?.toString()),null}}function CA(n){const e=Dm(n);return Ke(e,"internal-error"),Ke(typeof e.exp<"u","internal-error"),Ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof or&&RB(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function RB({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=kc(this.lastLoginAt),this.creationTime=kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function th(n){const e=n.auth,t=await n.getIdToken(),s=await nu(n,eh(e,{idToken:t}));Ke(s?.users.length,e,"internal-error");const r=s.users[0];n._notifyReloadListener(r);const i=r.providerUserInfo?.length?iI(r.providerUserInfo):[],o=NB(n.providerData,i),a=n.isAnonymous,l=!(n.email&&r.passwordHash)&&!o?.length,c=a?l:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new vg(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(n,d)}async function kB(n){const e=wn(n);await th(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NB(n,e){return[...n.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function iI(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DB(n,e){const t=await sI(n,{},async()=>{const s=Eu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=n.config,o=await rI(n,r,"/v1/token",`key=${i}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return n.emulatorConfig&&rl(n.emulatorConfig.host)&&(l.credentials="include"),nI.fetch()(o,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function OB(n,e){return ol(n,"POST","/v2/accounts:revokeToken",Nm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ke(e.idToken,"internal-error"),Ke(typeof e.idToken<"u","internal-error"),Ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):CA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ke(e.length!==0,"internal-error");const t=CA(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:r,expiresIn:i}=await DB(e,t);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:r,expirationTime:i}=t,o=new xa;return s&&(Ke(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(Ke(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(Ke(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xa,this.toJSON())}_performRefresh(){return Wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(n,e){Ke(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Xs{constructor({uid:e,auth:t,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new xB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new vg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await nu(this,this.stsTokenManager.getToken(this.auth,e));return Ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return PB(this,e)}reload(){return kB(this)}_assign(e){this!==e&&(Ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await th(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vr(this.auth.app))return Promise.reject(Oo(this.auth));const e=await this.getIdToken();return await nu(this,SB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,r=t.email??void 0,i=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,l=t._redirectEventId??void 0,c=t.createdAt??void 0,d=t.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:m,providerData:_,stsTokenManager:y}=t;Ke(f&&y,e,"internal-error");const A=xa.fromJSON(this.name,y);Ke(typeof f=="string",e,"internal-error"),Ii(s,e.name),Ii(r,e.name),Ke(typeof p=="boolean",e,"internal-error"),Ke(typeof m=="boolean",e,"internal-error"),Ii(i,e.name),Ii(o,e.name),Ii(a,e.name),Ii(l,e.name),Ii(c,e.name),Ii(d,e.name);const w=new Xs({uid:f,auth:e,email:r,emailVerified:p,displayName:s,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:A,createdAt:c,lastLoginAt:d});return _&&Array.isArray(_)&&(w.providerData=_.map(I=>({...I}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,t,s=!1){const r=new xa;r.updateFromServerResponse(t);const i=new Xs({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await th(i),i}static async _fromGetAccountInfoResponse(e,t,s){const r=t.users[0];Ke(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?iI(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,a=new xa;a.updateFromIdToken(s);const l=new Xs({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new vg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=new Map;function Kr(n){ai(n instanceof Function,"Expected a class definition");let e=TA.get(n);return e?(ai(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,TA.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}oI.type="NONE";const SA=oI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(n,e,t){return`firebase:${n}:${e}:${t}`}class ka{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Ed(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ed("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await eh(this.auth,{idToken:e}).catch(()=>{});return t?Xs._fromGetAccountInfoResponse(this.auth,t,e):null}return Xs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new ka(Kr(SA),e,s);const r=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=r[0]||Kr(SA);const o=Ed(s,e.config.apiKey,e.name);let a=null;for(const c of t)try{const d=await c._get(o);if(d){let f;if(typeof d=="string"){const p=await eh(e,{idToken:d}).catch(()=>{});if(!p)break;f=await Xs._fromGetAccountInfoResponse(e,p,d)}else f=Xs._fromJSON(e,d);c!==i&&(a=f),i=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new ka(i,e,s):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new ka(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hI(e))return"Blackberry";if(fI(e))return"Webos";if(lI(e))return"Safari";if((e.includes("chrome/")||cI(e))&&!e.includes("edge/"))return"Chrome";if(dI(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if(s?.length===2)return s[1]}return"Other"}function aI(n=ts()){return/firefox\//i.test(n)}function lI(n=ts()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cI(n=ts()){return/crios\//i.test(n)}function uI(n=ts()){return/iemobile/i.test(n)}function dI(n=ts()){return/android/i.test(n)}function hI(n=ts()){return/blackberry/i.test(n)}function fI(n=ts()){return/webos/i.test(n)}function Om(n=ts()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function LB(n=ts()){return Om(n)&&!!window.navigator?.standalone}function BB(){return KO()&&document.documentMode===10}function pI(n=ts()){return Om(n)||dI(n)||fI(n)||hI(n)||/windows phone/i.test(n)||uI(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(n,e=[]){let t;switch(n){case"Browser":t=PA(ts());break;case"Worker":t=`${PA(ts())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${il}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});s.onAbort=t,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FB(n,e={}){return ol(n,"GET","/v2/passwordPolicy",Nm(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UB=6;class VB{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??UB,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e,t,s,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new RA(this),this.idTokenSubscription=new RA(this),this.beforeStateQueue=new MB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Kr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ka.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await eh(this,{idToken:e}),s=await Xs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(vr(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(s=a.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await th(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_B()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vr(this.app))return Promise.reject(Oo(this));const t=e?wn(e):null;return t&&Ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vr(this.app)?Promise.reject(Oo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vr(this.app)?Promise.reject(Oo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FB(this),t=new VB(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Jo("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await OB(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Kr(e)||this._popupRedirectResolver;Ke(t,this,"argument-error"),this.redirectPersistenceManager=await ka.create(this,[Kr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,r){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ke(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,s,r);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(vr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&yB(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Yh(n){return wn(n)}class RA{constructor(e){this.auth=e,this.observer=null,this.addObserver=tL(t=>this.observer=t)}get next(){return Ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HB(n){Lm=n}function GB(n){return Lm.loadJS(n)}function QB(){return Lm.gapiScript}function jB(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zB(n,e){const t=Yo(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),i=t.getOptions();if(Wi(i,e??{}))return r;oi(r,"already-initialized")}return t.initialize({options:e})}function WB(n,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Kr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e?.popupRedirectResolver)}function KB(n,e,t){const s=Yh(n);Ke(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=mI(e),{host:o,port:a}=qB(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){Ke(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ke(Wi(c,s.config.emulator)&&Wi(d,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=c,s.emulatorConfig=d,s.settings.appVerificationDisabledForTesting=!0,rl(o)?(Hb(`${i}//${o}${l}`),Gb("Auth",!0)):JB()}function mI(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function qB(n){const e=mI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:xA(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:xA(o)}}}function xA(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function JB(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Wr("not implemented")}_getIdTokenResponse(e){return Wr("not implemented")}_linkToIdToken(e,t){return Wr("not implemented")}_getReauthenticationResolver(e){return Wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Na(n,e){return CB(n,"POST","/v1/accounts:signInWithIdp",Nm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YB="http://localhost";class Go extends vI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Go(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):oi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=t;if(!s||!r)return null;const o=new Go(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Na(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Na(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Na(e,t)}buildRequest(){const e={requestUri:YB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Eu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu extends yI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends Iu{constructor(){super("facebook.com")}static credential(e){return Go._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xi.credential(e.oauthAccessToken)}catch{return null}}}xi.FACEBOOK_SIGN_IN_METHOD="facebook.com";xi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends Iu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Go._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Gr.credential(t,s)}catch{return null}}}Gr.GOOGLE_SIGN_IN_METHOD="google.com";Gr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Iu{constructor(){super("github.com")}static credential(e){return Go._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.GITHUB_SIGN_IN_METHOD="github.com";ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends Iu{constructor(){super("twitter.com")}static credential(e,t){return Go._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ni.credential(t,s)}catch{return null}}}Ni.TWITTER_SIGN_IN_METHOD="twitter.com";Ni.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,r=!1){const i=await Xs._fromIdTokenResponse(e,s,r),o=kA(s);return new Wa({user:i,providerId:o,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const r=kA(s);return new Wa({user:e,providerId:r,_tokenResponse:s,operationType:t})}}function kA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh extends or{constructor(e,t,s,r){super(t.code,t.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,nh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,r){return new nh(e,t,s,r)}}function AI(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?nh._fromErrorAndOperation(n,i,e,s):i})}async function XB(n,e,t=!1){const s=await nu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Wa._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZB(n,e,t=!1){const{auth:s}=n;if(vr(s.app))return Promise.reject(Oo(s));const r="reauthenticate";try{const i=await nu(n,AI(s,r,e,n),t);Ke(i.idToken,s,"internal-error");const o=Dm(i.idToken);Ke(o,s,"internal-error");const{sub:a}=o;return Ke(n.uid===a,s,"user-mismatch"),Wa._forOperation(n,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&oi(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eM(n,e,t=!1){if(vr(n.app))return Promise.reject(Oo(n));const s="signIn",r=await AI(n,s,e),i=await Wa._fromIdTokenResponse(n,s,r);return t||await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(n,e){return wn(n).setPersistence(e)}function nM(n,e,t,s){return wn(n).onIdTokenChanged(e,t,s)}function sM(n,e,t){return wn(n).beforeAuthStateChanged(e,t)}function wX(n,e,t,s){return wn(n).onAuthStateChanged(e,t,s)}const sh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(sh,"1"),this.storage.removeItem(sh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM=1e3,iM=10;class _I extends wI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),r=this.localCache[t];s!==r&&e(t,r,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!t&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);BB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,iM):r()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},rM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}_I.type="LOCAL";const EI=_I;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI extends wI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}bI.type="SESSION";const II=bI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const s=new Xh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async c=>c(t.origin,i)),l=await oM(a);t.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Bm("",20);r.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(){return window}function lM(n){wr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(){return typeof wr().WorkerGlobalScope<"u"&&typeof wr().importScripts=="function"}async function cM(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uM(){return navigator?.serviceWorker?.controller||null}function dM(){return CI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="firebaseLocalStorageDb",hM=1,rh="firebaseLocalStorage",SI="fbase_key";class Cu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Zh(n,e){return n.transaction([rh],e?"readwrite":"readonly").objectStore(rh)}function fM(){const n=indexedDB.deleteDatabase(TI);return new Cu(n).toPromise()}function yg(){const n=indexedDB.open(TI,hM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(rh,{keyPath:SI})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(rh)?e(s):(s.close(),await fM(),e(await yg()))})})}async function NA(n,e,t){const s=Zh(n,!0).put({[SI]:e,value:t});return new Cu(s).toPromise()}async function pM(n,e){const t=Zh(n,!1).get(e),s=await new Cu(t).toPromise();return s===void 0?null:s.value}function DA(n,e){const t=Zh(n,!0).delete(e);return new Cu(t).toPromise()}const gM=800,mM=3;class PI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>mM)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xh._getInstance(dM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await cM(),!this.activeServiceWorker)return;this.sender=new aM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yg();return await NA(e,sh,"1"),await DA(e,sh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>NA(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>pM(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>DA(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=Zh(r,!1).getAll();return new Cu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}PI.type="LOCAL";const vM=PI;new bu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(n,e){return e?Kr(e):(Ke(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm extends vI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Na(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Na(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Na(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function AM(n){return eM(n.auth,new Mm(n),n.bypassAuthState)}function wM(n){const{auth:e,user:t}=n;return Ke(t,e,"internal-error"),ZB(t,new Mm(n),n.bypassAuthState)}async function _M(n){const{auth:e,user:t}=n;return Ke(t,e,"internal-error"),XB(t,new Mm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,t,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AM;case"linkViaPopup":case"linkViaRedirect":return _M;case"reauthViaPopup":case"reauthViaRedirect":return wM;default:oi(this.auth,"internal-error")}}resolve(e){ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM=new bu(2e3,1e4);class Aa extends RI{constructor(e,t,s,r,i){super(e,t,r,i),this.provider=s,this.authWindow=null,this.pollId=null,Aa.currentPopupAction&&Aa.currentPopupAction.cancel(),Aa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ke(e,this.auth,"internal-error"),e}async onExecution(){ai(this.filter.length===1,"Popup operations only handle one event");const e=Bm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Aa.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,EM.get())};e()}}Aa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM="pendingRedirect",bd=new Map;class IM extends RI{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=bd.get(this.auth._key());if(!e){try{const s=await CM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}bd.set(this.auth._key(),e)}return this.bypassAuthState||bd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CM(n,e){const t=PM(e),s=SM(n);if(!await s._isAvailable())return!1;const r=await s._get(t)==="true";return await s._remove(t),r}function TM(n,e){bd.set(n._key(),e)}function SM(n){return Kr(n._redirectPersistence)}function PM(n){return Ed(bM,n.config.apiKey,n.name)}async function RM(n,e){return await Yh(n)._initializationPromise,xI(n,e,!1)}async function xI(n,e,t=!1){if(vr(n.app))return Promise.reject(Oo(n));const s=Yh(n),r=yM(s,e),o=await new IM(s,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM=600*1e3;class kM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!kI(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ar(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xM&&this.cachedEventUids.clear(),this.cachedEventUids.has(OA(e))}saveEventToCache(e){this.cachedEventUids.add(OA(e)),this.lastProcessedEventTime=Date.now()}}function OA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function kI({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function NM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DM(n,e={}){return ol(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LM=/^https?/;async function BM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await DM(n);for(const t of e)try{if(MM(t))return}catch{}oi(n,"unauthorized-domain")}function MM(n){const e=mg(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===s}if(!LM.test(t))return!1;if(OM.test(n))return s===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM=new bu(3e4,6e4);function LA(){const n=wr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function UM(n){return new Promise((e,t)=>{function s(){LA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{LA(),t(Ar(n,"network-request-failed"))},timeout:FM.get()})}if(wr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(wr().gapi?.load)s();else{const r=jB("iframefcb");return wr()[r]=()=>{gapi.load?s():t(Ar(n,"network-request-failed"))},GB(`${QB()}?onload=${r}`).catch(i=>t(i))}}).catch(e=>{throw Id=null,e})}let Id=null;function VM(n){return Id=Id||UM(n),Id}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=new bu(5e3,15e3),HM="__/auth/iframe",GM="emulator/auth/iframe",QM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zM(n){const e=n.config;Ke(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?km(e,GM):`https://${n.config.authDomain}/${HM}`,s={apiKey:e.apiKey,appName:n.name,v:il},r=jM.get(n.config.apiHost);r&&(s.eid=r);const i=n._getFrameworks();return i.length&&(s.fw=i.join(",")),`${t}?${Eu(s).slice(1)}`}async function WM(n){const e=await VM(n),t=wr().gapi;return Ke(t,n,"internal-error"),e.open({where:document.body,url:zM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QM,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Ar(n,"network-request-failed"),a=wr().setTimeout(()=>{i(o)},$M.get());function l(){wr().clearTimeout(a),r(s)}s.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qM=500,JM=600,YM="_blank",XM="http://localhost";class BA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZM(n,e,t,s=qM,r=JM){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...KM,width:s.toString(),height:r.toString(),top:i,left:o},c=ts().toLowerCase();t&&(a=cI(c)?YM:t),aI(c)&&(e=e||XM,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[m,_])=>`${p}${m}=${_},`,"");if(LB(c)&&a!=="_self")return eF(e||"",a),new BA(null);const f=window.open(e||"",a,d);Ke(f,n,"popup-blocked");try{f.focus()}catch{}return new BA(f)}function eF(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF="__/auth/handler",nF="emulator/auth/handler",sF=encodeURIComponent("fac");async function MA(n,e,t,s,r,i){Ke(n.config.authDomain,n,"auth-domain-config-required"),Ke(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:il,eventId:r};if(e instanceof yI){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",eL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof Iu){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await n._getAppCheckToken(),c=l?`#${sF}=${encodeURIComponent(l)}`:"";return`${rF(n)}?${Eu(a).slice(1)}${c}`}function rF({config:n}){return n.emulator?km(n,nF):`https://${n.authDomain}/${tF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="webStorageSupport";class iF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=II,this._completeRedirectFn=xI,this._overrideRedirectResult=TM}async _openPopup(e,t,s,r){ai(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await MA(e,t,s,mg(),r);return ZM(e,i,Bm())}async _openRedirect(e,t,s,r){await this._originValidation(e);const i=await MA(e,t,s,mg(),r);return lM(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:i}=this.eventManagers[t];return r?Promise.resolve(r):(ai(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await WM(e),s=new kM(e);return t.register("authEvent",r=>(Ke(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(gp,{type:gp},r=>{const i=r?.[0]?.[gp];i!==void 0&&t(!!i),oi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=BM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return pI()||lI()||Om()}}const oF=iF;var FA="@firebase/auth",UA="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lF(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cF(n){Sr(new sr("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Ke(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gI(n)},c=new $B(s,r,i,l);return WB(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Sr(new sr("auth-internal",e=>{const t=Yh(e.getProvider("auth").getImmediate());return(s=>new aF(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hs(FA,UA,lF(n)),Hs(FA,UA,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uF=300,dF=$b("authIdTokenMaxAge")||uF;let VA=null;const hF=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>dF)return;const r=t?.token;VA!==r&&(VA=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function fF(n=eu()){const e=Yo(n,"auth");if(e.isInitialized())return e.getImmediate();const t=zB(n,{popupRedirectResolver:oF,persistence:[vM,EI,II]}),s=$b("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=hF(i.toString());sM(t,o,()=>o(t.currentUser)),nM(t,a=>o(a))}}const r=Ub("auth");return r&&KB(t,`http://${r}`),t}function pF(){return document.getElementsByTagName("head")?.[0]??document}HB({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=r=>{const i=Ar("internal-error");i.customData=r,t(i)},s.type="text/javascript",s.charset="UTF-8",pF().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cF("Browser");var $A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vi,NI;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,T){function P(){}P.prototype=T.prototype,x.F=T.prototype,x.prototype=new P,x.prototype.constructor=x,x.D=function(S,b,D){for(var k=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)k[ke-2]=arguments[ke];return T.prototype[b].apply(S,k)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(x,T,P){P||(P=0);const S=Array(16);if(typeof T=="string")for(var b=0;b<16;++b)S[b]=T.charCodeAt(P++)|T.charCodeAt(P++)<<8|T.charCodeAt(P++)<<16|T.charCodeAt(P++)<<24;else for(b=0;b<16;++b)S[b]=T[P++]|T[P++]<<8|T[P++]<<16|T[P++]<<24;T=x.g[0],P=x.g[1],b=x.g[2];let D=x.g[3],k;k=T+(D^P&(b^D))+S[0]+3614090360&4294967295,T=P+(k<<7&4294967295|k>>>25),k=D+(b^T&(P^b))+S[1]+3905402710&4294967295,D=T+(k<<12&4294967295|k>>>20),k=b+(P^D&(T^P))+S[2]+606105819&4294967295,b=D+(k<<17&4294967295|k>>>15),k=P+(T^b&(D^T))+S[3]+3250441966&4294967295,P=b+(k<<22&4294967295|k>>>10),k=T+(D^P&(b^D))+S[4]+4118548399&4294967295,T=P+(k<<7&4294967295|k>>>25),k=D+(b^T&(P^b))+S[5]+1200080426&4294967295,D=T+(k<<12&4294967295|k>>>20),k=b+(P^D&(T^P))+S[6]+2821735955&4294967295,b=D+(k<<17&4294967295|k>>>15),k=P+(T^b&(D^T))+S[7]+4249261313&4294967295,P=b+(k<<22&4294967295|k>>>10),k=T+(D^P&(b^D))+S[8]+1770035416&4294967295,T=P+(k<<7&4294967295|k>>>25),k=D+(b^T&(P^b))+S[9]+2336552879&4294967295,D=T+(k<<12&4294967295|k>>>20),k=b+(P^D&(T^P))+S[10]+4294925233&4294967295,b=D+(k<<17&4294967295|k>>>15),k=P+(T^b&(D^T))+S[11]+2304563134&4294967295,P=b+(k<<22&4294967295|k>>>10),k=T+(D^P&(b^D))+S[12]+1804603682&4294967295,T=P+(k<<7&4294967295|k>>>25),k=D+(b^T&(P^b))+S[13]+4254626195&4294967295,D=T+(k<<12&4294967295|k>>>20),k=b+(P^D&(T^P))+S[14]+2792965006&4294967295,b=D+(k<<17&4294967295|k>>>15),k=P+(T^b&(D^T))+S[15]+1236535329&4294967295,P=b+(k<<22&4294967295|k>>>10),k=T+(b^D&(P^b))+S[1]+4129170786&4294967295,T=P+(k<<5&4294967295|k>>>27),k=D+(P^b&(T^P))+S[6]+3225465664&4294967295,D=T+(k<<9&4294967295|k>>>23),k=b+(T^P&(D^T))+S[11]+643717713&4294967295,b=D+(k<<14&4294967295|k>>>18),k=P+(D^T&(b^D))+S[0]+3921069994&4294967295,P=b+(k<<20&4294967295|k>>>12),k=T+(b^D&(P^b))+S[5]+3593408605&4294967295,T=P+(k<<5&4294967295|k>>>27),k=D+(P^b&(T^P))+S[10]+38016083&4294967295,D=T+(k<<9&4294967295|k>>>23),k=b+(T^P&(D^T))+S[15]+3634488961&4294967295,b=D+(k<<14&4294967295|k>>>18),k=P+(D^T&(b^D))+S[4]+3889429448&4294967295,P=b+(k<<20&4294967295|k>>>12),k=T+(b^D&(P^b))+S[9]+568446438&4294967295,T=P+(k<<5&4294967295|k>>>27),k=D+(P^b&(T^P))+S[14]+3275163606&4294967295,D=T+(k<<9&4294967295|k>>>23),k=b+(T^P&(D^T))+S[3]+4107603335&4294967295,b=D+(k<<14&4294967295|k>>>18),k=P+(D^T&(b^D))+S[8]+1163531501&4294967295,P=b+(k<<20&4294967295|k>>>12),k=T+(b^D&(P^b))+S[13]+2850285829&4294967295,T=P+(k<<5&4294967295|k>>>27),k=D+(P^b&(T^P))+S[2]+4243563512&4294967295,D=T+(k<<9&4294967295|k>>>23),k=b+(T^P&(D^T))+S[7]+1735328473&4294967295,b=D+(k<<14&4294967295|k>>>18),k=P+(D^T&(b^D))+S[12]+2368359562&4294967295,P=b+(k<<20&4294967295|k>>>12),k=T+(P^b^D)+S[5]+4294588738&4294967295,T=P+(k<<4&4294967295|k>>>28),k=D+(T^P^b)+S[8]+2272392833&4294967295,D=T+(k<<11&4294967295|k>>>21),k=b+(D^T^P)+S[11]+1839030562&4294967295,b=D+(k<<16&4294967295|k>>>16),k=P+(b^D^T)+S[14]+4259657740&4294967295,P=b+(k<<23&4294967295|k>>>9),k=T+(P^b^D)+S[1]+2763975236&4294967295,T=P+(k<<4&4294967295|k>>>28),k=D+(T^P^b)+S[4]+1272893353&4294967295,D=T+(k<<11&4294967295|k>>>21),k=b+(D^T^P)+S[7]+4139469664&4294967295,b=D+(k<<16&4294967295|k>>>16),k=P+(b^D^T)+S[10]+3200236656&4294967295,P=b+(k<<23&4294967295|k>>>9),k=T+(P^b^D)+S[13]+681279174&4294967295,T=P+(k<<4&4294967295|k>>>28),k=D+(T^P^b)+S[0]+3936430074&4294967295,D=T+(k<<11&4294967295|k>>>21),k=b+(D^T^P)+S[3]+3572445317&4294967295,b=D+(k<<16&4294967295|k>>>16),k=P+(b^D^T)+S[6]+76029189&4294967295,P=b+(k<<23&4294967295|k>>>9),k=T+(P^b^D)+S[9]+3654602809&4294967295,T=P+(k<<4&4294967295|k>>>28),k=D+(T^P^b)+S[12]+3873151461&4294967295,D=T+(k<<11&4294967295|k>>>21),k=b+(D^T^P)+S[15]+530742520&4294967295,b=D+(k<<16&4294967295|k>>>16),k=P+(b^D^T)+S[2]+3299628645&4294967295,P=b+(k<<23&4294967295|k>>>9),k=T+(b^(P|~D))+S[0]+4096336452&4294967295,T=P+(k<<6&4294967295|k>>>26),k=D+(P^(T|~b))+S[7]+1126891415&4294967295,D=T+(k<<10&4294967295|k>>>22),k=b+(T^(D|~P))+S[14]+2878612391&4294967295,b=D+(k<<15&4294967295|k>>>17),k=P+(D^(b|~T))+S[5]+4237533241&4294967295,P=b+(k<<21&4294967295|k>>>11),k=T+(b^(P|~D))+S[12]+1700485571&4294967295,T=P+(k<<6&4294967295|k>>>26),k=D+(P^(T|~b))+S[3]+2399980690&4294967295,D=T+(k<<10&4294967295|k>>>22),k=b+(T^(D|~P))+S[10]+4293915773&4294967295,b=D+(k<<15&4294967295|k>>>17),k=P+(D^(b|~T))+S[1]+2240044497&4294967295,P=b+(k<<21&4294967295|k>>>11),k=T+(b^(P|~D))+S[8]+1873313359&4294967295,T=P+(k<<6&4294967295|k>>>26),k=D+(P^(T|~b))+S[15]+4264355552&4294967295,D=T+(k<<10&4294967295|k>>>22),k=b+(T^(D|~P))+S[6]+2734768916&4294967295,b=D+(k<<15&4294967295|k>>>17),k=P+(D^(b|~T))+S[13]+1309151649&4294967295,P=b+(k<<21&4294967295|k>>>11),k=T+(b^(P|~D))+S[4]+4149444226&4294967295,T=P+(k<<6&4294967295|k>>>26),k=D+(P^(T|~b))+S[11]+3174756917&4294967295,D=T+(k<<10&4294967295|k>>>22),k=b+(T^(D|~P))+S[2]+718787259&4294967295,b=D+(k<<15&4294967295|k>>>17),k=P+(D^(b|~T))+S[9]+3951481745&4294967295,x.g[0]=x.g[0]+T&4294967295,x.g[1]=x.g[1]+(b+(k<<21&4294967295|k>>>11))&4294967295,x.g[2]=x.g[2]+b&4294967295,x.g[3]=x.g[3]+D&4294967295}s.prototype.v=function(x,T){T===void 0&&(T=x.length);const P=T-this.blockSize,S=this.C;let b=this.h,D=0;for(;D<T;){if(b==0)for(;D<=P;)r(this,x,D),D+=this.blockSize;if(typeof x=="string"){for(;D<T;)if(S[b++]=x.charCodeAt(D++),b==this.blockSize){r(this,S),b=0;break}}else for(;D<T;)if(S[b++]=x[D++],b==this.blockSize){r(this,S),b=0;break}}this.h=b,this.o+=T},s.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var T=1;T<x.length-8;++T)x[T]=0;T=this.o*8;for(var P=x.length-8;P<x.length;++P)x[P]=T&255,T/=256;for(this.v(x),x=Array(16),T=0,P=0;P<4;++P)for(let S=0;S<32;S+=8)x[T++]=this.g[P]>>>S&255;return x};function i(x,T){var P=a;return Object.prototype.hasOwnProperty.call(P,x)?P[x]:P[x]=T(x)}function o(x,T){this.h=T;const P=[];let S=!0;for(let b=x.length-1;b>=0;b--){const D=x[b]|0;S&&D==T||(P[b]=D,S=!1)}this.g=P}var a={};function l(x){return-128<=x&&x<128?i(x,function(T){return new o([T|0],T<0?-1:0)}):new o([x|0],x<0?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return f;if(x<0)return A(c(-x));const T=[];let P=1;for(let S=0;x>=P;S++)T[S]=x/P|0,P*=4294967296;return new o(T,0)}function d(x,T){if(x.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(x.charAt(0)=="-")return A(d(x.substring(1),T));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=c(Math.pow(T,8));let S=f;for(let D=0;D<x.length;D+=8){var b=Math.min(8,x.length-D);const k=parseInt(x.substring(D,D+b),T);b<8?(b=c(Math.pow(T,b)),S=S.j(b).add(c(k))):(S=S.j(P),S=S.add(c(k)))}return S}var f=l(0),p=l(1),m=l(16777216);n=o.prototype,n.m=function(){if(y(this))return-A(this).m();let x=0,T=1;for(let P=0;P<this.g.length;P++){const S=this.i(P);x+=(S>=0?S:4294967296+S)*T,T*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(_(this))return"0";if(y(this))return"-"+A(this).toString(x);const T=c(Math.pow(x,6));var P=this;let S="";for(;;){const b=M(P,T).g;P=w(P,b.j(T));let D=((P.g.length>0?P.g[0]:P.h)>>>0).toString(x);if(P=b,_(P))return D+S;for(;D.length<6;)D="0"+D;S=D+S}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function _(x){if(x.h!=0)return!1;for(let T=0;T<x.g.length;T++)if(x.g[T]!=0)return!1;return!0}function y(x){return x.h==-1}n.l=function(x){return x=w(this,x),y(x)?-1:_(x)?0:1};function A(x){const T=x.g.length,P=[];for(let S=0;S<T;S++)P[S]=~x.g[S];return new o(P,~x.h).add(p)}n.abs=function(){return y(this)?A(this):this},n.add=function(x){const T=Math.max(this.g.length,x.g.length),P=[];let S=0;for(let b=0;b<=T;b++){let D=S+(this.i(b)&65535)+(x.i(b)&65535),k=(D>>>16)+(this.i(b)>>>16)+(x.i(b)>>>16);S=k>>>16,D&=65535,k&=65535,P[b]=k<<16|D}return new o(P,P[P.length-1]&-2147483648?-1:0)};function w(x,T){return x.add(A(T))}n.j=function(x){if(_(this)||_(x))return f;if(y(this))return y(x)?A(this).j(A(x)):A(A(this).j(x));if(y(x))return A(this.j(A(x)));if(this.l(m)<0&&x.l(m)<0)return c(this.m()*x.m());const T=this.g.length+x.g.length,P=[];for(var S=0;S<2*T;S++)P[S]=0;for(S=0;S<this.g.length;S++)for(let b=0;b<x.g.length;b++){const D=this.i(S)>>>16,k=this.i(S)&65535,ke=x.i(b)>>>16,ie=x.i(b)&65535;P[2*S+2*b]+=k*ie,I(P,2*S+2*b),P[2*S+2*b+1]+=D*ie,I(P,2*S+2*b+1),P[2*S+2*b+1]+=k*ke,I(P,2*S+2*b+1),P[2*S+2*b+2]+=D*ke,I(P,2*S+2*b+2)}for(x=0;x<T;x++)P[x]=P[2*x+1]<<16|P[2*x];for(x=T;x<2*T;x++)P[x]=0;return new o(P,0)};function I(x,T){for(;(x[T]&65535)!=x[T];)x[T+1]+=x[T]>>>16,x[T]&=65535,T++}function C(x,T){this.g=x,this.h=T}function M(x,T){if(_(T))throw Error("division by zero");if(_(x))return new C(f,f);if(y(x))return T=M(A(x),T),new C(A(T.g),A(T.h));if(y(T))return T=M(x,A(T)),new C(A(T.g),T.h);if(x.g.length>30){if(y(x)||y(T))throw Error("slowDivide_ only works with positive integers.");for(var P=p,S=T;S.l(x)<=0;)P=Q(P),S=Q(S);var b=q(P,1),D=q(S,1);for(S=q(S,2),P=q(P,2);!_(S);){var k=D.add(S);k.l(x)<=0&&(b=b.add(P),D=k),S=q(S,1),P=q(P,1)}return T=w(x,b.j(T)),new C(b,T)}for(b=f;x.l(T)>=0;){for(P=Math.max(1,Math.floor(x.m()/T.m())),S=Math.ceil(Math.log(P)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),D=c(P),k=D.j(T);y(k)||k.l(x)>0;)P-=S,D=c(P),k=D.j(T);_(D)&&(D=p),b=b.add(D),x=w(x,k)}return new C(b,x)}n.B=function(x){return M(this,x).h},n.and=function(x){const T=Math.max(this.g.length,x.g.length),P=[];for(let S=0;S<T;S++)P[S]=this.i(S)&x.i(S);return new o(P,this.h&x.h)},n.or=function(x){const T=Math.max(this.g.length,x.g.length),P=[];for(let S=0;S<T;S++)P[S]=this.i(S)|x.i(S);return new o(P,this.h|x.h)},n.xor=function(x){const T=Math.max(this.g.length,x.g.length),P=[];for(let S=0;S<T;S++)P[S]=this.i(S)^x.i(S);return new o(P,this.h^x.h)};function Q(x){const T=x.g.length+1,P=[];for(let S=0;S<T;S++)P[S]=x.i(S)<<1|x.i(S-1)>>>31;return new o(P,x.h)}function q(x,T){const P=T>>5;T%=32;const S=x.g.length-P,b=[];for(let D=0;D<S;D++)b[D]=T>0?x.i(D+P)>>>T|x.i(D+P+1)<<32-T:x.i(D+P);return new o(b,x.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,NI=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Vi=o}).apply(typeof $A<"u"?$A:typeof self<"u"?self:typeof window<"u"?window:{});var rd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DI,pc,OI,Cd,Ag,LI,BI,MI;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof rd=="object"&&rd];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=t(this);function r(u,g){if(g)e:{var v=s;u=u.split(".");for(var R=0;R<u.length-1;R++){var K=u[R];if(!(K in v))break e;v=v[K]}u=u[u.length-1],R=v[u],g=g(R),g!=R&&g!=null&&e(v,u,{configurable:!0,writable:!0,value:g})}}r("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(u){return u||function(g){var v=[],R;for(R in g)Object.prototype.hasOwnProperty.call(g,R)&&v.push([R,g[R]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function l(u,g,v){return u.call.apply(u.bind,arguments)}function c(u,g,v){return c=l,c.apply(null,arguments)}function d(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var R=v.slice();return R.push.apply(R,arguments),u.apply(this,R)}}function f(u,g){function v(){}v.prototype=g.prototype,u.Z=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(R,K,X){for(var ye=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)ye[nt-2]=arguments[nt];return g.prototype[K].apply(R,ye)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function m(u){const g=u.length;if(g>0){const v=Array(g);for(let R=0;R<g;R++)v[R]=u[R];return v}return[]}function _(u,g){for(let R=1;R<arguments.length;R++){const K=arguments[R];var v=typeof K;if(v=v!="object"?v:K?Array.isArray(K)?"array":v:"null",v=="array"||v=="object"&&typeof K.length=="number"){v=u.length||0;const X=K.length||0;u.length=v+X;for(let ye=0;ye<X;ye++)u[v+ye]=K[ye]}else u.push(K)}}class y{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function A(u){o.setTimeout(()=>{throw u},0)}function w(){var u=x;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class I{constructor(){this.h=this.g=null}add(g,v){const R=C.get();R.set(g,v),this.h?this.h.next=R:this.g=R,this.h=R}}var C=new y(()=>new M,u=>u.reset());class M{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,q=!1,x=new I,T=()=>{const u=Promise.resolve(void 0);Q=()=>{u.then(P)}};function P(){for(var u;u=w();){try{u.h.call(u.g)}catch(v){A(v)}var g=C;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}q=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var D=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};o.addEventListener("test",v,g),o.removeEventListener("test",v,g)}catch{}return u})();function k(u){return/^[\s\xa0]*$/.test(u)}function ke(u,g){b.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}f(ke,b),ke.prototype.init=function(u,g){const v=this.type=u.type,R=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ke.Z.h.call(this)},ke.prototype.h=function(){ke.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ie="closure_listenable_"+(Math.random()*1e6|0),H=0;function V(u,g,v,R,K){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!R,this.ha=K,this.key=++H,this.da=this.fa=!1}function Z(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function me(u,g,v){for(const R in u)g.call(v,u[R],R,u)}function Ve(u,g){for(const v in u)g.call(void 0,u[v],v,u)}function Ne(u){const g={};for(const v in u)g[v]=u[v];return g}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(u,g){let v,R;for(let K=1;K<arguments.length;K++){R=arguments[K];for(v in R)u[v]=R[v];for(let X=0;X<se.length;X++)v=se[X],Object.prototype.hasOwnProperty.call(R,v)&&(u[v]=R[v])}}function ue(u){this.src=u,this.g={},this.h=0}ue.prototype.add=function(u,g,v,R,K){const X=u.toString();u=this.g[X],u||(u=this.g[X]=[],this.h++);const ye=tt(u,g,R,K);return ye>-1?(g=u[ye],v||(g.fa=!1)):(g=new V(g,this.src,X,!!R,K),g.fa=v,u.push(g)),g};function Pe(u,g){const v=g.type;if(v in u.g){var R=u.g[v],K=Array.prototype.indexOf.call(R,g,void 0),X;(X=K>=0)&&Array.prototype.splice.call(R,K,1),X&&(Z(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function tt(u,g,v,R){for(let K=0;K<u.length;++K){const X=u[K];if(!X.da&&X.listener==g&&X.capture==!!v&&X.ha==R)return K}return-1}var Y="closure_lm_"+(Math.random()*1e6|0),ge={};function fe(u,g,v,R,K){if(Array.isArray(g)){for(let X=0;X<g.length;X++)fe(u,g[X],v,R,K);return null}return v=j(v),u&&u[ie]?u.J(g,v,a(R)?!!R.capture:!1,K):we(u,g,v,!1,R,K)}function we(u,g,v,R,K,X){if(!g)throw Error("Invalid event type");const ye=a(K)?!!K.capture:!!K;let nt=W(u);if(nt||(u[Y]=nt=new ue(u)),v=nt.add(g,v,R,ye,X),v.proxy)return v;if(R=Qe(),v.proxy=R,R.src=u,R.listener=v,u.addEventListener)D||(K=ye),K===void 0&&(K=!1),u.addEventListener(g.toString(),R,K);else if(u.attachEvent)u.attachEvent(G(g.toString()),R);else if(u.addListener&&u.removeListener)u.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Qe(){function u(v){return g.call(u.src,u.listener,v)}const g=te;return u}function N(u,g,v,R,K){if(Array.isArray(g))for(var X=0;X<g.length;X++)N(u,g[X],v,R,K);else R=a(R)?!!R.capture:!!R,v=j(v),u&&u[ie]?(u=u.i,X=String(g).toString(),X in u.g&&(g=u.g[X],v=tt(g,v,R,K),v>-1&&(Z(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete u.g[X],u.h--)))):u&&(u=W(u))&&(g=u.g[g.toString()],u=-1,g&&(u=tt(g,v,R,K)),(v=u>-1?g[u]:null)&&O(v))}function O(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[ie])Pe(g.i,u);else{var v=u.type,R=u.proxy;g.removeEventListener?g.removeEventListener(v,R,u.capture):g.detachEvent?g.detachEvent(G(v),R):g.addListener&&g.removeListener&&g.removeListener(R),(v=W(g))?(Pe(v,u),v.h==0&&(v.src=null,g[Y]=null)):Z(u)}}}function G(u){return u in ge?ge[u]:ge[u]="on"+u}function te(u,g){if(u.da)u=!0;else{g=new ke(g,this);const v=u.listener,R=u.ha||u.src;u.fa&&O(u),u=v.call(R,g)}return u}function W(u){return u=u[Y],u instanceof ue?u:null}var F="__closure_events_fn_"+(Math.random()*1e9>>>0);function j(u){return typeof u=="function"?u:(u[F]||(u[F]=function(g){return u.handleEvent(g)}),u[F])}function ne(){S.call(this),this.i=new ue(this),this.M=this,this.G=null}f(ne,S),ne.prototype[ie]=!0,ne.prototype.removeEventListener=function(u,g,v,R){N(this,u,g,v,R)};function ae(u,g){var v,R=u.G;if(R)for(v=[];R;R=R.G)v.push(R);if(u=u.M,R=g.type||g,typeof g=="string")g=new b(g,u);else if(g instanceof b)g.target=g.target||u;else{var K=g;g=new b(R,u),z(g,K)}K=!0;let X,ye;if(v)for(ye=v.length-1;ye>=0;ye--)X=g.g=v[ye],K=de(X,R,!0,g)&&K;if(X=g.g=u,K=de(X,R,!0,g)&&K,K=de(X,R,!1,g)&&K,v)for(ye=0;ye<v.length;ye++)X=g.g=v[ye],K=de(X,R,!1,g)&&K}ne.prototype.N=function(){if(ne.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const v=u.g[g];for(let R=0;R<v.length;R++)Z(v[R]);delete u.g[g],u.h--}}this.G=null},ne.prototype.J=function(u,g,v,R){return this.i.add(String(u),g,!1,v,R)},ne.prototype.K=function(u,g,v,R){return this.i.add(String(u),g,!0,v,R)};function de(u,g,v,R){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let K=!0;for(let X=0;X<g.length;++X){const ye=g[X];if(ye&&!ye.da&&ye.capture==v){const nt=ye.listener,In=ye.ha||ye.src;ye.fa&&Pe(u.i,ye),K=nt.call(In,R)!==!1&&K}}return K&&!R.defaultPrevented}function Be(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(u,g||0)}function ve(u){u.g=Be(()=>{u.g=null,u.i&&(u.i=!1,ve(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class xe extends S{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ve(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Le(u){S.call(this),this.h=u,this.g={}}f(Le,S);var it=[];function vt(u){me(u.g,function(g,v){this.g.hasOwnProperty(v)&&O(g)},u),u.g={}}Le.prototype.N=function(){Le.Z.N.call(this),vt(this)},Le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var He=o.JSON.stringify,qt=o.JSON.parse,at=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function Bn(){}function ns(){}var Cs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Rr(){b.call(this,"d")}f(Rr,b);function Jt(){b.call(this,"c")}f(Jt,b);var pn={},ro=null;function ar(){return ro=ro||new ne}pn.Ia="serverreachability";function an(u){b.call(this,pn.Ia,u)}f(an,b);function Ut(u){const g=ar();ae(g,new an(g))}pn.STAT_EVENT="statevent";function ln(u,g){b.call(this,pn.STAT_EVENT,u),this.stat=g}f(ln,b);function yt(u){const g=ar();ae(g,new ln(g,u))}pn.Ja="timingevent";function js(u,g){b.call(this,pn.Ja,u),this.size=g}f(js,b);function _n(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function Yt(){this.g=!0}Yt.prototype.ua=function(){this.g=!1};function Ou(u,g,v,R,K,X){u.info(function(){if(u.g)if(X){var ye="",nt=X.split("&");for(let xt=0;xt<nt.length;xt++){var In=nt[xt].split("=");if(In.length>1){const xn=In[0];In=In[1];const cr=xn.split("_");ye=cr.length>=2&&cr[1]=="type"?ye+(xn+"="+In+"&"):ye+(xn+"=redacted&")}}}else ye=null;else ye=X;return"XMLHTTP REQ ("+R+") [attempt "+K+"]: "+g+`
`+v+`
`+ye})}function _f(u,g,v,R,K,X,ye){u.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+K+"]: "+g+`
`+v+`
`+X+" "+ye})}function J(u,g,v,R){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+ee(u,v)+(R?" "+R:"")})}function re(u,g){u.info(function(){return"TIMEOUT: "+g})}Yt.prototype.info=function(){};function ee(u,g){if(!u.g)return g;if(!g)return null;try{const X=JSON.parse(g);if(X){for(u=0;u<X.length;u++)if(Array.isArray(X[u])){var v=X[u];if(!(v.length<2)){var R=v[1];if(Array.isArray(R)&&!(R.length<1)){var K=R[0];if(K!="noop"&&K!="stop"&&K!="close")for(let ye=1;ye<R.length;ye++)R[ye]=""}}}}return He(X)}catch{return g}}var Ae={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Oe={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ze;function qe(){}f(qe,Bn),qe.prototype.g=function(){return new XMLHttpRequest},Ze=new qe;function Ce(u){return encodeURIComponent(String(u))}function wt(u){var g=1;u=u.split(":");const v=[];for(;g>0&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function Vt(u,g,v,R){this.j=u,this.i=g,this.l=v,this.S=R||1,this.V=new Le(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Rn}function Rn(){this.i=null,this.g="",this.h=!1}var vs={},ss={};function jt(u,g,v){u.M=1,u.A=Lu(lr(g)),u.u=v,u.R=!0,Mn(u,null)}function Mn(u,g){u.F=Date.now(),ht(u),u.B=lr(u.A);var v=u.B,R=u.S;Array.isArray(R)||(R=[String(R)]),xv(v.i,"t",R),u.C=0,v=u.j.L,u.h=new Rn,u.g=Kv(u.j,v?g:null,!u.u),u.P>0&&(u.O=new xe(c(u.Y,u,u.g),u.P)),g=u.V,v=u.g,R=u.ba;var K="readystatechange";Array.isArray(K)||(K&&(it[0]=K.toString()),K=it);for(let X=0;X<K.length;X++){const ye=fe(v,K[X],R||g.handleEvent,!1,g.h||g);if(!ye)break;g.g[ye.key]=ye}g=u.J?Ne(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Ut(),Ou(u.i,u.v,u.B,u.l,u.S,u.u)}Vt.prototype.ba=function(u){u=u.target;const g=this.O;g&&gi(u)==3?g.j():this.Y(u)},Vt.prototype.Y=function(u){try{if(u==this.g)e:{const nt=gi(this.g),In=this.g.ya(),xt=this.g.ca();if(!(nt<3)&&(nt!=3||this.g&&(this.h.h||this.g.la()||Mv(this.g)))){this.K||nt!=4||In==7||(In==8||xt<=0?Ut(3):Ut(2)),Fn(this);var g=this.g.ca();this.X=g;var v=En(this);if(this.o=g==200,_f(this.i,this.v,this.B,this.l,this.S,nt,g),this.o){if(this.U&&!this.L){t:{if(this.g){var R,K=this.g;if((R=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(R)){var X=R;break t}}X=null}if(u=X)J(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ht(this,u);else{this.o=!1,this.m=3,yt(12),$t(this),Wn(this);break e}}if(this.R){u=!0;let xn;for(;!this.K&&this.C<v.length;)if(xn=Ue(this,v),xn==ss){nt==4&&(this.m=4,yt(14),u=!1),J(this.i,this.l,null,"[Incomplete Response]");break}else if(xn==vs){this.m=4,yt(15),J(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else J(this.i,this.l,xn,null),Ht(this,xn);if(Ct(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||v.length!=0||this.h.h||(this.m=1,yt(16),u=!1),this.o=this.o&&u,!u)J(this.i,this.l,v,"[Invalid Chunked Response]"),$t(this),Wn(this);else if(v.length>0&&!this.W){this.W=!0;var ye=this.j;ye.g==this&&ye.aa&&!ye.P&&(ye.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Pf(ye),ye.P=!0,yt(11))}}else J(this.i,this.l,v,null),Ht(this,v);nt==4&&$t(this),this.o&&!this.K&&(nt==4?Qv(this.j,this):(this.o=!1,ht(this)))}else XT(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,yt(12)):(this.m=0,yt(13)),$t(this),Wn(this)}}}catch{}finally{}};function En(u){if(!Ct(u))return u.g.la();const g=Mv(u.g);if(g==="")return"";let v="";const R=g.length,K=gi(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return $t(u),Wn(u),"";u.h.i=new o.TextDecoder}for(let X=0;X<R;X++)u.h.h=!0,v+=u.h.i.decode(g[X],{stream:!(K&&X==R-1)});return g.length=0,u.h.g+=v,u.C=0,u.h.g}function Ct(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Ue(u,g){var v=u.C,R=g.indexOf(`
`,v);return R==-1?ss:(v=Number(g.substring(v,R)),isNaN(v)?vs:(R+=1,R+v>g.length?ss:(g=g.slice(R,R+v),u.C=R+v,g)))}Vt.prototype.cancel=function(){this.K=!0,$t(this)};function ht(u){u.T=Date.now()+u.H,ys(u,u.H)}function ys(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=_n(c(u.aa,u),g)}function Fn(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Vt.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(re(this.i,this.B),this.M!=2&&(Ut(),yt(17)),$t(this),this.m=2,Wn(this)):ys(this,this.T-u)};function Wn(u){u.j.I==0||u.K||Qv(u.j,u)}function $t(u){Fn(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,vt(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Ht(u,g){try{var v=u.j;if(v.I!=0&&(v.g==u||io(v.h,u))){if(!u.L&&io(v.h,u)&&v.I==3){try{var R=v.Ba.g.parse(g)}catch{R=null}if(Array.isArray(R)&&R.length==3){var K=R;if(K[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)Vu(v),Fu(v);else break e;Sf(v),yt(18)}}else v.xa=K[1],0<v.xa-v.K&&K[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=_n(c(v.Va,v),6e3));xr(v.h)<=1&&v.ta&&(v.ta=void 0)}else ao(v,11)}else if((u.L||v.g==u)&&Vu(v),!k(g))for(K=v.Ba.g.parse(g),g=0;g<K.length;g++){let xt=K[g];const xn=xt[0];if(!(xn<=v.K))if(v.K=xn,xt=xt[1],v.I==2)if(xt[0]=="c"){v.M=xt[1],v.ba=xt[2];const cr=xt[3];cr!=null&&(v.ka=cr,v.j.info("VER="+v.ka));const lo=xt[4];lo!=null&&(v.za=lo,v.j.info("SVER="+v.za));const mi=xt[5];mi!=null&&typeof mi=="number"&&mi>0&&(R=1.5*mi,v.O=R,v.j.info("backChannelRequestTimeoutMs_="+R)),R=v;const vi=u.g;if(vi){const Hu=vi.g?vi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hu){var X=R.h;X.g||Hu.indexOf("spdy")==-1&&Hu.indexOf("quic")==-1&&Hu.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(ta(X,X.h),X.h=null))}if(R.G){const Rf=vi.g?vi.g.getResponseHeader("X-HTTP-Session-Id"):null;Rf&&(R.wa=Rf,Mt(R.J,R.G,Rf))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),R=v;var ye=u;if(R.na=Wv(R,R.L?R.ba:null,R.W),ye.L){na(R.h,ye);var nt=ye,In=R.O;In&&(nt.H=In),nt.D&&(Fn(nt),ht(nt)),R.g=ye}else Hv(R);v.i.length>0&&Uu(v)}else xt[0]!="stop"&&xt[0]!="close"||ao(v,7);else v.I==3&&(xt[0]=="stop"||xt[0]=="close"?xt[0]=="stop"?ao(v,7):Tf(v):xt[0]!="noop"&&v.l&&v.l.qa(xt),v.A=0)}}Ut(4)}catch{}}var Kn=class{constructor(u,g){this.g=u,this.map=g}};function bn(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ts(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function xr(u){return u.h?1:u.g?u.g.size:0}function io(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function ta(u,g){u.g?u.g.add(g):u.h=g}function na(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}bn.prototype.cancel=function(){if(this.i=Wl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Wl(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const v of u.g.values())g=g.concat(v.G);return g}return m(u.i)}var Kl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ef(u,g){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const R=u[v].indexOf("=");let K,X=null;R>=0?(K=u[v].substring(0,R),X=u[v].substring(R+1)):K=u[v],g(K,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function fi(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof fi?(this.l=u.l,ql(this,u.j),this.o=u.o,this.g=u.g,Jl(this,u.u),this.h=u.h,bf(this,kv(u.i)),this.m=u.m):u&&(g=String(u).match(Kl))?(this.l=!1,ql(this,g[1]||"",!0),this.o=Yl(g[2]||""),this.g=Yl(g[3]||"",!0),Jl(this,g[4]),this.h=Yl(g[5]||"",!0),bf(this,g[6]||"",!0),this.m=Yl(g[7]||"")):(this.l=!1,this.i=new Zl(null,this.l))}fi.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(Xl(g,Tv,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Xl(g,Tv,!0),"@"),u.push(Ce(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Xl(v,v.charAt(0)=="/"?GT:HT,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Xl(v,jT)),u.join("")},fi.prototype.resolve=function(u){const g=lr(this);let v=!!u.j;v?ql(g,u.j):v=!!u.o,v?g.o=u.o:v=!!u.g,v?g.g=u.g:v=u.u!=null;var R=u.h;if(v)Jl(g,u.u);else if(v=!!u.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var K=g.h.lastIndexOf("/");K!=-1&&(R=g.h.slice(0,K+1)+R)}if(K=R,K==".."||K==".")R="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){R=K.lastIndexOf("/",0)==0,K=K.split("/");const X=[];for(let ye=0;ye<K.length;){const nt=K[ye++];nt=="."?R&&ye==K.length&&X.push(""):nt==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),R&&ye==K.length&&X.push("")):(X.push(nt),R=!0)}R=X.join("/")}else R=K}return v?g.h=R:v=u.i.toString()!=="",v?bf(g,kv(u.i)):v=!!u.m,v&&(g.m=u.m),g};function lr(u){return new fi(u)}function ql(u,g,v){u.j=v?Yl(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Jl(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function bf(u,g,v){g instanceof Zl?(u.i=g,zT(u.i,u.l)):(v||(g=Xl(g,QT)),u.i=new Zl(g,u.l))}function Mt(u,g,v){u.i.set(g,v)}function Lu(u){return Mt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Yl(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Xl(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,$T),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function $T(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Tv=/[#\/\?@]/g,HT=/[#\?:]/g,GT=/[#\?]/g,QT=/[#\?@]/g,jT=/#/g;function Zl(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function oo(u){u.g||(u.g=new Map,u.h=0,u.i&&Ef(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}n=Zl.prototype,n.add=function(u,g){oo(this),this.i=null,u=sa(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function Sv(u,g){oo(u),g=sa(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Pv(u,g){return oo(u),g=sa(u,g),u.g.has(g)}n.forEach=function(u,g){oo(this),this.g.forEach(function(v,R){v.forEach(function(K){u.call(g,K,R,this)},this)},this)};function Rv(u,g){oo(u);let v=[];if(typeof g=="string")Pv(u,g)&&(v=v.concat(u.g.get(sa(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)v=v.concat(u[g]);return v}n.set=function(u,g){return oo(this),this.i=null,u=sa(this,u),Pv(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},n.get=function(u,g){return u?(u=Rv(this,u),u.length>0?String(u[0]):g):g};function xv(u,g,v){Sv(u,g),v.length>0&&(u.i=null,u.g.set(sa(u,g),m(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let R=0;R<g.length;R++){var v=g[R];const K=Ce(v);v=Rv(this,v);for(let X=0;X<v.length;X++){let ye=K;v[X]!==""&&(ye+="="+Ce(v[X])),u.push(ye)}}return this.i=u.join("&")};function kv(u){const g=new Zl;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function sa(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function zT(u,g){g&&!u.j&&(oo(u),u.i=null,u.g.forEach(function(v,R){const K=R.toLowerCase();R!=K&&(Sv(this,R),xv(this,K,v))},u)),u.j=g}function WT(u,g){const v=new Yt;if(o.Image){const R=new Image;R.onload=d(pi,v,"TestLoadImage: loaded",!0,g,R),R.onerror=d(pi,v,"TestLoadImage: error",!1,g,R),R.onabort=d(pi,v,"TestLoadImage: abort",!1,g,R),R.ontimeout=d(pi,v,"TestLoadImage: timeout",!1,g,R),o.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=u}else g(!1)}function KT(u,g){const v=new Yt,R=new AbortController,K=setTimeout(()=>{R.abort(),pi(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:R.signal}).then(X=>{clearTimeout(K),X.ok?pi(v,"TestPingServer: ok",!0,g):pi(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(K),pi(v,"TestPingServer: error",!1,g)})}function pi(u,g,v,R,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),R(v)}catch{}}function qT(){this.g=new at}function If(u){this.i=u.Sb||null,this.h=u.ab||!1}f(If,Bn),If.prototype.g=function(){return new Bu(this.i,this.h)};function Bu(u,g){ne.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Bu,ne),n=Bu.prototype,n.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,tc(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ec(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,tc(this)),this.g&&(this.readyState=3,tc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Nv(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Nv(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?ec(this):tc(this),this.readyState==3&&Nv(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,ec(this))},n.Na=function(u){this.g&&(this.response=u,ec(this))},n.ga=function(){this.g&&ec(this)};function ec(u){u.readyState=4,u.l=null,u.j=null,u.B=null,tc(u)}n.setRequestHeader=function(u,g){this.A.append(u,g)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function tc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Bu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Dv(u){let g="";return me(u,function(v,R){g+=R,g+=":",g+=v,g+=`\r
`}),g}function Cf(u,g,v){e:{for(R in v){var R=!1;break e}R=!0}R||(v=Dv(v),typeof u=="string"?v!=null&&Ce(v):Mt(u,g,v))}function Xt(u){ne.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Xt,ne);var JT=/^https?$/i,YT=["POST","PUT"];n=Xt.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,g,v,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ze.g(),this.g.onreadystatechange=p(c(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(X){Ov(this,X);return}if(u=v||"",v=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var K in R)v.set(K,R[K]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const X of R.keys())v.set(X,R.get(X));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(v.keys()).find(X=>X.toLowerCase()=="content-type"),K=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(YT,g,void 0)>=0)||R||K||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ye]of v)this.g.setRequestHeader(X,ye);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(X){Ov(this,X)}};function Ov(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Lv(u),Mu(u)}function Lv(u){u.A||(u.A=!0,ae(u,"complete"),ae(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ae(this,"complete"),ae(this,"abort"),Mu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mu(this,!0)),Xt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Bv(this):this.Xa())},n.Xa=function(){Bv(this)};function Bv(u){if(u.h&&typeof i<"u"){if(u.v&&gi(u)==4)setTimeout(u.Ca.bind(u),0);else if(ae(u,"readystatechange"),gi(u)==4){u.h=!1;try{const X=u.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var R;if(R=X===0){let ye=String(u.D).match(Kl)[1]||null;!ye&&o.self&&o.self.location&&(ye=o.self.location.protocol.slice(0,-1)),R=!JT.test(ye?ye.toLowerCase():"")}v=R}if(v)ae(u,"complete"),ae(u,"success");else{u.o=6;try{var K=gi(u)>2?u.g.statusText:""}catch{K=""}u.l=K+" ["+u.ca()+"]",Lv(u)}}finally{Mu(u)}}}}function Mu(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,g||ae(u,"ready");try{v.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function gi(u){return u.g?u.g.readyState:0}n.ca=function(){try{return gi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),qt(g)}};function Mv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function XT(u){const g={};u=(u.g&&gi(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<u.length;R++){if(k(u[R]))continue;var v=wt(u[R]);const K=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const X=g[K]||[];g[K]=X,X.push(v)}Ve(g,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function nc(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function Fv(u){this.za=0,this.i=[],this.j=new Yt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=nc("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=nc("baseRetryDelayMs",5e3,u),this.Za=nc("retryDelaySeedMs",1e4,u),this.Ta=nc("forwardChannelMaxRetries",2,u),this.va=nc("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new bn(u&&u.concurrentRequestLimit),this.Ba=new qT,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Fv.prototype,n.ka=8,n.I=1,n.connect=function(u,g,v,R){yt(0),this.W=u,this.H=g||{},v&&R!==void 0&&(this.H.OSID=v,this.H.OAID=R),this.F=this.X,this.J=Wv(this,null,this.W),Uu(this)};function Tf(u){if(Uv(u),u.I==3){var g=u.V++,v=lr(u.J);if(Mt(v,"SID",u.M),Mt(v,"RID",g),Mt(v,"TYPE","terminate"),sc(u,v),g=new Vt(u,u.j,g),g.M=2,g.A=Lu(lr(v)),v=!1,o.navigator&&o.navigator.sendBeacon)try{v=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&o.Image&&(new Image().src=g.A,v=!0),v||(g.g=Kv(g.j,null),g.g.ea(g.A)),g.F=Date.now(),ht(g)}zv(u)}function Fu(u){u.g&&(Pf(u),u.g.cancel(),u.g=null)}function Uv(u){Fu(u),u.v&&(o.clearTimeout(u.v),u.v=null),Vu(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Uu(u){if(!Ts(u.h)&&!u.m){u.m=!0;var g=u.Ea;Q||T(),q||(Q(),q=!0),x.add(g,u),u.D=0}}function ZT(u,g){return xr(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=_n(c(u.Ea,u,g),jv(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const K=new Vt(this,this.j,u);let X=this.o;if(this.U&&(X?(X=Ne(X),z(X,this.U)):X=this.U),this.u!==null||this.R||(K.J=X,X=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var R=this.i[v];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(g+=R,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=$v(this,K,g),v=lr(this.J),Mt(v,"RID",u),Mt(v,"CVER",22),this.G&&Mt(v,"X-HTTP-Session-Id",this.G),sc(this,v),X&&(this.R?g="headers="+Ce(Dv(X))+"&"+g:this.u&&Cf(v,this.u,X)),ta(this.h,K),this.Ra&&Mt(v,"TYPE","init"),this.S?(Mt(v,"$req",g),Mt(v,"SID","null"),K.U=!0,jt(K,v,null)):jt(K,v,g),this.I=2}}else this.I==3&&(u?Vv(this,u):this.i.length==0||Ts(this.h)||Vv(this))};function Vv(u,g){var v;g?v=g.l:v=u.V++;const R=lr(u.J);Mt(R,"SID",u.M),Mt(R,"RID",v),Mt(R,"AID",u.K),sc(u,R),u.u&&u.o&&Cf(R,u.u,u.o),v=new Vt(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),g&&(u.i=g.G.concat(u.i)),g=$v(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ta(u.h,v),jt(v,R,g)}function sc(u,g){u.H&&me(u.H,function(v,R){Mt(g,R,v)}),u.l&&me({},function(v,R){Mt(g,R,v)})}function $v(u,g,v){v=Math.min(u.i.length,v);const R=u.l?c(u.l.Ka,u.l,u):null;e:{var K=u.i;let nt=-1;for(;;){const In=["count="+v];nt==-1?v>0?(nt=K[0].g,In.push("ofs="+nt)):nt=0:In.push("ofs="+nt);let xt=!0;for(let xn=0;xn<v;xn++){var X=K[xn].g;const cr=K[xn].map;if(X-=nt,X<0)nt=Math.max(0,K[xn].g-100),xt=!1;else try{X="req"+X+"_"||"";try{var ye=cr instanceof Map?cr:Object.entries(cr);for(const[lo,mi]of ye){let vi=mi;a(mi)&&(vi=He(mi)),In.push(X+lo+"="+encodeURIComponent(vi))}}catch(lo){throw In.push(X+"type="+encodeURIComponent("_badmap")),lo}}catch{R&&R(cr)}}if(xt){ye=In.join("&");break e}}ye=void 0}return u=u.i.splice(0,v),g.G=u,ye}function Hv(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;Q||T(),q||(Q(),q=!0),x.add(g,u),u.A=0}}function Sf(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=_n(c(u.Da,u),jv(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,Gv(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=_n(c(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,yt(10),Fu(this),Gv(this))};function Pf(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function Gv(u){u.g=new Vt(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=lr(u.na);Mt(g,"RID","rpc"),Mt(g,"SID",u.M),Mt(g,"AID",u.K),Mt(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Mt(g,"TO",u.ia),Mt(g,"TYPE","xmlhttp"),sc(u,g),u.u&&u.o&&Cf(g,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=Lu(lr(g)),v.u=null,v.R=!0,Mn(v,u)}n.Va=function(){this.C!=null&&(this.C=null,Fu(this),Sf(this),yt(19))};function Vu(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function Qv(u,g){var v=null;if(u.g==g){Vu(u),Pf(u),u.g=null;var R=2}else if(io(u.h,g))v=g.G,na(u.h,g),R=1;else return;if(u.I!=0){if(g.o)if(R==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var K=u.D;R=ar(),ae(R,new js(R,v)),Uu(u)}else Hv(u);else if(K=g.m,K==3||K==0&&g.X>0||!(R==1&&ZT(u,g)||R==2&&Sf(u)))switch(v&&v.length>0&&(g=u.h,g.i=g.i.concat(v)),K){case 1:ao(u,5);break;case 4:ao(u,10);break;case 3:ao(u,6);break;default:ao(u,2)}}}function jv(u,g){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*g}function ao(u,g){if(u.j.info("Error code "+g),g==2){var v=c(u.bb,u),R=u.Ua;const K=!R;R=new fi(R||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ql(R,"https"),Lu(R),K?WT(R.toString(),v):KT(R.toString(),v)}else yt(2);u.I=0,u.l&&u.l.pa(g),zv(u),Uv(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function zv(u){if(u.I=0,u.ja=[],u.l){const g=Wl(u.h);(g.length!=0||u.i.length!=0)&&(_(u.ja,g),_(u.ja,u.i),u.h.i.length=0,m(u.i),u.i.length=0),u.l.oa()}}function Wv(u,g,v){var R=v instanceof fi?lr(v):new fi(v);if(R.g!="")g&&(R.g=g+"."+R.g),Jl(R,R.u);else{var K=o.location;R=K.protocol,g=g?g+"."+K.hostname:K.hostname,K=+K.port;const X=new fi(null);R&&ql(X,R),g&&(X.g=g),K&&Jl(X,K),v&&(X.h=v),R=X}return v=u.G,g=u.wa,v&&g&&Mt(R,v,g),Mt(R,"VER",u.ka),sc(u,R),R}function Kv(u,g,v){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new Xt(new If({ab:v})):new Xt(u.ma),g.Fa(u.L),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qv(){}n=qv.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function $u(){}$u.prototype.g=function(u,g){return new Ss(u,g)};function Ss(u,g){ne.call(this),this.g=new Fv(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!k(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!k(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new ra(this)}f(Ss,ne),Ss.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ss.prototype.close=function(){Tf(this.g)},Ss.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=He(u),u=v);g.i.push(new Kn(g.Ya++,u)),g.I==3&&Uu(g)},Ss.prototype.N=function(){this.g.l=null,delete this.j,Tf(this.g),delete this.g,Ss.Z.N.call(this)};function Jv(u){Rr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const v in g){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}f(Jv,Rr);function Yv(){Jt.call(this),this.status=1}f(Yv,Jt);function ra(u){this.g=u}f(ra,qv),ra.prototype.ra=function(){ae(this.g,"a")},ra.prototype.qa=function(u){ae(this.g,new Jv(u))},ra.prototype.pa=function(u){ae(this.g,new Yv)},ra.prototype.oa=function(){ae(this.g,"b")},$u.prototype.createWebChannel=$u.prototype.g,Ss.prototype.send=Ss.prototype.o,Ss.prototype.open=Ss.prototype.m,Ss.prototype.close=Ss.prototype.close,MI=function(){return new $u},BI=function(){return ar()},LI=pn,Ag={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,Cd=Ae,Oe.COMPLETE="complete",OI=Oe,ns.EventType=Cs,Cs.OPEN="a",Cs.CLOSE="b",Cs.ERROR="c",Cs.MESSAGE="d",ne.prototype.listen=ne.prototype.J,pc=ns,Xt.prototype.listenOnce=Xt.prototype.K,Xt.prototype.getLastError=Xt.prototype.Ha,Xt.prototype.getLastErrorCode=Xt.prototype.ya,Xt.prototype.getStatus=Xt.prototype.ca,Xt.prototype.getResponseJson=Xt.prototype.La,Xt.prototype.getResponseText=Xt.prototype.la,Xt.prototype.send=Xt.prototype.ea,Xt.prototype.setWithCredentials=Xt.prototype.Fa,DI=Xt}).apply(typeof rd<"u"?rd:typeof self<"u"?self:typeof window<"u"?window:{});const HA="@firebase/firestore",GA="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jn.UNAUTHENTICATED=new Jn(null),Jn.GOOGLE_CREDENTIALS=new Jn("google-credentials-uid"),Jn.FIRST_PARTY=new Jn("first-party-uid"),Jn.MOCK_USER=new Jn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=new Jh("@firebase/firestore");function ha(){return Qo.logLevel}function Ie(n,...e){if(Qo.logLevel<=lt.DEBUG){const t=e.map(Fm);Qo.debug(`Firestore (${al}): ${n}`,...t)}}function li(n,...e){if(Qo.logLevel<=lt.ERROR){const t=e.map(Fm);Qo.error(`Firestore (${al}): ${n}`,...t)}}function Ka(n,...e){if(Qo.logLevel<=lt.WARN){const t=e.map(Fm);Qo.warn(`Firestore (${al}): ${n}`,...t)}}function Fm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,FI(n,s,t)}function FI(n,e,t){let s=`FIRESTORE (${al}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw li(s),new Error(s)}function It(n,e,t,s){let r="Unexpected state";typeof t=="string"?r=t:s=t,n||FI(e,r,s)}function Xe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends or{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Jn.UNAUTHENTICATED)))}shutdown(){}}class mF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class vF{constructor(e){this.t=e,this.currentUser=Jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){It(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,t(l)):Promise.resolve();let i=new Xr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Xr,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await r(this.currentUser)}))},a=l=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Xr)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(It(typeof s.accessToken=="string",31837,{l:s}),new UI(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return It(e===null||typeof e=="string",2055,{h:e}),new Jn(e)}}class yF{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Jn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class AF{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new yF(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Jn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class QA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wF{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){It(this.o===void 0,3512);const s=i=>{i.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>s(i)))};const r=i=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>r(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new QA(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(It(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new QA(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _F(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=_F(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<t&&(s+=e.charAt(r[i]%62))}return s}}function ct(n,e){return n<e?-1:n>e?1:0}function wg(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const r=n.charAt(s),i=e.charAt(s);if(r!==i)return mp(r)===mp(i)?ct(r,i):mp(r)?1:-1}return ct(n.length,e.length)}const EF=55296,bF=57343;function mp(n){const e=n.charCodeAt(0);return e>=EF&&e<=bF}function qa(n,e,t){return n.length===e.length&&n.every(((s,r)=>t(s,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="__name__";class fr{constructor(e,t,s){t===void 0?t=0:t>e.length&&je(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&je(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return fr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let r=0;r<s;r++){const i=fr.compareSegments(e.get(r),t.get(r));if(i!==0)return i}return ct(e.length,t.length)}static compareSegments(e,t){const s=fr.isNumericId(e),r=fr.isNumericId(t);return s&&!r?-1:!s&&r?1:s&&r?fr.extractNumericId(e).compare(fr.extractNumericId(t)):wg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vi.fromString(e.substring(4,e.length-2))}}class Lt extends fr{construct(e,t,s){return new Lt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ee(oe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((r=>r.length>0)))}return new Lt(t)}static emptyPath(){return new Lt([])}}const IF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gn extends fr{construct(e,t,s){return new Gn(e,t,s)}static isValidIdentifier(e){return IF.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jA}static keyField(){return new Gn([jA])}static fromServerFormat(e){const t=[];let s="",r=0;const i=()=>{if(s.length===0)throw new Ee(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new Ee(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ee(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new Ee(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gn(t)}static emptyPath(){return new Gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.path=e}static fromPath(e){return new Fe(Lt.fromString(e))}static fromName(e){return new Fe(Lt.fromString(e).popFirst(5))}static empty(){return new Fe(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fe(new Lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(n,e,t){if(!t)throw new Ee(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function CF(n,e,t,s){if(e===!0&&s===!0)throw new Ee(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function zA(n){if(!Fe.isDocumentKey(n))throw new Ee(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function WA(n){if(Fe.isDocumentKey(n))throw new Ee(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function $I(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ef(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":je(12329,{type:typeof n})}function ci(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ee(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ef(n);throw new Ee(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(n,e){const t={typeString:n};return e&&(t.value=e),t}function Tu(n,e){if(!$I(n))throw new Ee(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const o=n[s];if(r&&typeof o!==r){t=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){t=`Expected '${s}' field to equal '${i.value}'`;break}}if(t)throw new Ee(oe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=-62135596800,qA=1e6;class Ft{static now(){return Ft.fromMillis(Date.now())}static fromDate(e){return Ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*qA);return new Ft(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ee(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ee(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<KA)throw new Ee(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qA}_compareTo(e){return this.seconds===e.seconds?ct(this.nanoseconds,e.nanoseconds):ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Tu(e,Ft._jsonSchema))return new Ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-KA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ft._jsonSchemaVersion="firestore/timestamp/1.0",Ft._jsonSchema={type:An("string",Ft._jsonSchemaVersion),seconds:An("number"),nanoseconds:An("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{static fromTimestamp(e){return new Je(e)}static min(){return new Je(new Ft(0,0))}static max(){return new Je(new Ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=-1;function TF(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=Je.fromTimestamp(s===1e9?new Ft(t+1,0):new Ft(t,s));return new Ki(r,Fe.empty(),e)}function SF(n){return new Ki(n.readTime,n.key,su)}class Ki{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ki(Je.min(),Fe.empty(),su)}static max(){return new Ki(Je.max(),Fe.empty(),su)}}function PF(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Fe.comparator(n.documentKey,e.documentKey),t!==0?t:ct(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==RF)throw n;Ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le(((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(t,i).next(s,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):le.reject(t)}static resolve(e){return new le(((t,s)=>{t(e)}))}static reject(e){return new le(((t,s)=>{s(e)}))}static waitFor(e){return new le(((t,s)=>{let r=0,i=0,o=!1;e.forEach((a=>{++r,a.next((()=>{++i,o&&i===r&&t()}),(l=>s(l)))})),o=!0,i===r&&t()}))}static or(e){let t=le.resolve(!1);for(const s of e)t=t.next((r=>r?le.resolve(r):s()));return t}static forEach(e,t){const s=[];return e.forEach(((r,i)=>{s.push(t.call(this,r,i))})),this.waitFor(s)}static mapArray(e,t){return new le(((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;t(e[c]).next((d=>{o[c]=d,++a,a===i&&s(o)}),(d=>r(d)))}}))}static doWhile(e,t){return new le(((s,r)=>{const i=()=>{e()===!0?t().next((()=>{i()}),r):s()};i()}))}}function kF(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function cl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}tf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm=-1;function nf(n){return n==null}function ih(n){return n===0&&1/n==-1/0}function NF(n){return typeof n=="number"&&Number.isInteger(n)&&!ih(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="";function DF(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=JA(e)),e=OF(n.get(t),e);return JA(e)}function OF(n,e){let t=e;const s=n.length;for(let r=0;r<s;r++){const i=n.charAt(r);switch(i){case"\0":t+="";break;case HI:t+="";break;default:t+=i}}return t}function JA(n){return n+HI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function no(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function GI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,t){this.comparator=e,this.root=t||Un.EMPTY}insert(e,t){return new Kt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Un.BLACK,null,null))}remove(e){return new Kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return t+s.left.size;r<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new id(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new id(this.root,e,this.comparator,!1)}getReverseIterator(){return new id(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new id(this.root,e,this.comparator,!0)}}class id{constructor(e,t,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?s(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Un{constructor(e,t,s,r,i){this.key=e,this.value=t,this.color=s??Un.RED,this.left=r??Un.EMPTY,this.right=i??Un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,r,i){return new Un(e??this.key,t??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,s),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Un.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw je(27949);return e+(this.isRed()?0:1)}}Un.EMPTY=null,Un.RED=!0,Un.BLACK=!1;Un.EMPTY=new class{constructor(){this.size=0}get key(){throw je(57766)}get value(){throw je(16141)}get color(){throw je(16727)}get left(){throw je(29726)}get right(){throw je(36894)}copy(e,t,s,r,i){return this}insert(e,t,s){return new Un(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.comparator=e,this.data=new Kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new XA(this.data.getIterator())}getIteratorFrom(e){return new XA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Sn(this.comparator);return t.data=e,t}}class XA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this.fields=e,e.sort(Gn.comparator)}static empty(){return new Os([])}unionWith(e){let t=new Sn(Gn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Os(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qa(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new QI("Invalid base64 string: "+i):i}})(e);return new Qn(t)}static fromUint8Array(e){const t=(function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i})(e);return new Qn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qn.EMPTY_BYTE_STRING=new Qn("");const LF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qi(n){if(It(!!n,39018),typeof n=="string"){let e=0;const t=LF.exec(n);if(It(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:cn(n.seconds),nanos:cn(n.nanos)}}function cn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ji(n){return typeof n=="string"?Qn.fromBase64String(n):Qn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI="server_timestamp",zI="__type__",WI="__previous_value__",KI="__local_write_time__";function $m(n){return(n?.mapValue?.fields||{})[zI]?.stringValue===jI}function sf(n){const e=n.mapValue.fields[WI];return $m(e)?sf(e):e}function ru(n){const e=qi(n.mapValue.fields[KI].timestampValue);return new Ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e,t,s,r,i,o,a,l,c,d){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const oh="(default)";class iu{constructor(e,t){this.projectId=e,this.database=t||oh}static empty(){return new iu("","")}get isDefaultDatabase(){return this.database===oh}isEqual(e){return e instanceof iu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI="__type__",MF="__max__",od={mapValue:{}},JI="__vector__",ah="value";function Yi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?$m(n)?4:UF(n)?9007199254740991:FF(n)?10:11:je(28295,{value:n})}function Pr(n,e){if(n===e)return!0;const t=Yi(n);if(t!==Yi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ru(n).isEqual(ru(e));case 3:return(function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=qi(r.timestampValue),a=qi(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,i){return Ji(r.bytesValue).isEqual(Ji(i.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,i){return cn(r.geoPointValue.latitude)===cn(i.geoPointValue.latitude)&&cn(r.geoPointValue.longitude)===cn(i.geoPointValue.longitude)})(n,e);case 2:return(function(r,i){if("integerValue"in r&&"integerValue"in i)return cn(r.integerValue)===cn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=cn(r.doubleValue),a=cn(i.doubleValue);return o===a?ih(o)===ih(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return qa(n.arrayValue.values||[],e.arrayValue.values||[],Pr);case 10:case 11:return(function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(YA(o)!==YA(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Pr(o[l],a[l])))return!1;return!0})(n,e);default:return je(52216,{left:n})}}function ou(n,e){return(n.values||[]).find((t=>Pr(t,e)))!==void 0}function Ja(n,e){if(n===e)return 0;const t=Yi(n),s=Yi(e);if(t!==s)return ct(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ct(n.booleanValue,e.booleanValue);case 2:return(function(i,o){const a=cn(i.integerValue||i.doubleValue),l=cn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(n,e);case 3:return ZA(n.timestampValue,e.timestampValue);case 4:return ZA(ru(n),ru(e));case 5:return wg(n.stringValue,e.stringValue);case 6:return(function(i,o){const a=Ji(i),l=Ji(o);return a.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=ct(a[c],l[c]);if(d!==0)return d}return ct(a.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(i,o){const a=ct(cn(i.latitude),cn(o.latitude));return a!==0?a:ct(cn(i.longitude),cn(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return ew(n.arrayValue,e.arrayValue);case 10:return(function(i,o){const a=i.fields||{},l=o.fields||{},c=a[ah]?.arrayValue,d=l[ah]?.arrayValue,f=ct(c?.values?.length||0,d?.values?.length||0);return f!==0?f:ew(c,d)})(n.mapValue,e.mapValue);case 11:return(function(i,o){if(i===od.mapValue&&o===od.mapValue)return 0;if(i===od.mapValue)return 1;if(o===od.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const p=wg(l[f],d[f]);if(p!==0)return p;const m=Ja(a[l[f]],c[d[f]]);if(m!==0)return m}return ct(l.length,d.length)})(n.mapValue,e.mapValue);default:throw je(23264,{he:t})}}function ZA(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ct(n,e);const t=qi(n),s=qi(e),r=ct(t.seconds,s.seconds);return r!==0?r:ct(t.nanos,s.nanos)}function ew(n,e){const t=n.values||[],s=e.values||[];for(let r=0;r<t.length&&r<s.length;++r){const i=Ja(t[r],s[r]);if(i)return i}return ct(t.length,s.length)}function Ya(n){return _g(n)}function _g(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=qi(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ji(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Fe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",r=!0;for(const i of t.values||[])r?r=!1:s+=",",s+=_g(i);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${_g(t.fields[o])}`;return r+"}"})(n.mapValue):je(61005,{value:n})}function Td(n){switch(Yi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=sf(n);return e?16+Td(e):16;case 5:return 2*n.stringValue.length;case 6:return Ji(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,i)=>r+Td(i)),0)})(n.arrayValue);case 10:case 11:return(function(s){let r=0;return no(s.fields,((i,o)=>{r+=i.length+Td(o)})),r})(n.mapValue);default:throw je(13486,{value:n})}}function tw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Eg(n){return!!n&&"integerValue"in n}function Hm(n){return!!n&&"arrayValue"in n}function nw(n){return!!n&&"nullValue"in n}function sw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sd(n){return!!n&&"mapValue"in n}function FF(n){return(n?.mapValue?.fields||{})[qI]?.stringValue===JI}function Nc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return no(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Nc(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Nc(n.arrayValue.values[t]);return e}return{...n}}function UF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===MF}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.value=e}static empty(){return new bs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Sd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nc(t)}setAll(e){let t=Gn.emptyPath(),s={},r=[];e.forEach(((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,s,r),s={},r=[],t=a.popLast()}o?s[a.lastSegment()]=Nc(o):r.push(a.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,s,r)}delete(e){const t=this.field(e.popLast());Sd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=t.mapValue.fields[e.get(s)];Sd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,s){no(t,((r,i)=>e[r]=i));for(const r of s)delete e[r]}clone(){return new bs(Nc(this.value))}}function YI(n){const e=[];return no(n.fields,((t,s)=>{const r=new Gn([t]);if(Sd(s)){const i=YI(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)})),new Os(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,t,s,r,i,o,a){this.key=e,this.documentType=t,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Xn(e,0,Je.min(),Je.min(),Je.min(),bs.empty(),0)}static newFoundDocument(e,t,s,r){return new Xn(e,1,t,Je.min(),s,r,0)}static newNoDocument(e,t){return new Xn(e,2,t,Je.min(),Je.min(),bs.empty(),0)}static newUnknownDocument(e,t){return new Xn(e,3,t,Je.min(),Je.min(),bs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,t){this.position=e,this.inclusive=t}}function rw(n,e,t){let s=0;for(let r=0;r<n.position.length;r++){const i=e[r],o=n.position[r];if(i.field.isKeyField()?s=Fe.comparator(Fe.fromName(o.referenceValue),t.key):s=Ja(o,t.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function iw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,t="asc"){this.field=e,this.dir=t}}function VF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{}class yn extends XI{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new HF(e,t,s):t==="array-contains"?new jF(e,s):t==="in"?new zF(e,s):t==="not-in"?new WF(e,s):t==="array-contains-any"?new KF(e,s):new yn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new GF(e,s):new QF(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ja(t,this.value)):t!==null&&Yi(this.value)===Yi(t)&&this.matchesComparison(Ja(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends XI{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new rr(e,t)}matches(e){return ZI(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ZI(n){return n.op==="and"}function eC(n){return $F(n)&&ZI(n)}function $F(n){for(const e of n.filters)if(e instanceof rr)return!1;return!0}function bg(n){if(n instanceof yn)return n.field.canonicalString()+n.op.toString()+Ya(n.value);if(eC(n))return n.filters.map((e=>bg(e))).join(",");{const e=n.filters.map((t=>bg(t))).join(",");return`${n.op}(${e})`}}function tC(n,e){return n instanceof yn?(function(s,r){return r instanceof yn&&s.op===r.op&&s.field.isEqual(r.field)&&Pr(s.value,r.value)})(n,e):n instanceof rr?(function(s,r){return r instanceof rr&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((i,o,a)=>i&&tC(o,r.filters[a])),!0):!1})(n,e):void je(19439)}function nC(n){return n instanceof yn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ya(t.value)}`})(n):n instanceof rr?(function(t){return t.op.toString()+" {"+t.getFilters().map(nC).join(" ,")+"}"})(n):"Filter"}class HF extends yn{constructor(e,t,s){super(e,t,s),this.key=Fe.fromName(s.referenceValue)}matches(e){const t=Fe.comparator(e.key,this.key);return this.matchesComparison(t)}}class GF extends yn{constructor(e,t){super(e,"in",t),this.keys=sC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class QF extends yn{constructor(e,t){super(e,"not-in",t),this.keys=sC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function sC(n,e){return(e.arrayValue?.values||[]).map((t=>Fe.fromName(t.referenceValue)))}class jF extends yn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Hm(t)&&ou(t.arrayValue,this.value)}}class zF extends yn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ou(this.value.arrayValue,t)}}class WF extends yn{constructor(e,t){super(e,"not-in",t)}matches(e){if(ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ou(this.value.arrayValue,t)}}class KF extends yn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Hm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>ou(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(e,t=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function ow(n,e=null,t=[],s=[],r=null,i=null,o=null){return new qF(n,e,t,s,r,i,o)}function Gm(n){const e=Xe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>bg(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(i){return i.field.canonicalString()+i.dir})(s))).join(","),nf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Ya(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Ya(s))).join(",")),e.Te=t}return e.Te}function Qm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!VF(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!tC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!iw(n.startAt,e.startAt)&&iw(n.endAt,e.endAt)}function Ig(n){return Fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,t=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function JF(n,e,t,s,r,i,o,a){return new Su(n,e,t,s,r,i,o,a)}function jm(n){return new Su(n)}function aw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function rC(n){return n.collectionGroup!==null}function Dc(n){const e=Xe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Sn(Gn.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((c=>{c.isInequality()&&(a=a.add(c.field))}))})),a})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new ch(i,s))})),t.has(Gn.keyField().canonicalString())||e.Ie.push(new ch(Gn.keyField(),s))}return e.Ie}function _r(n){const e=Xe(n);return e.Ee||(e.Ee=YF(e,Dc(n))),e.Ee}function YF(n,e){if(n.limitType==="F")return ow(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const i=r.dir==="desc"?"asc":"desc";return new ch(r.field,i)}));const t=n.endAt?new lh(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new lh(n.startAt.position,n.startAt.inclusive):null;return ow(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Cg(n,e){const t=n.filters.concat([e]);return new Su(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Tg(n,e,t){return new Su(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rf(n,e){return Qm(_r(n),_r(e))&&n.limitType===e.limitType}function iC(n){return`${Gm(_r(n))}|lt:${n.limitType}`}function fa(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((r=>nC(r))).join(", ")}]`),nf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((r=>Ya(r))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((r=>Ya(r))).join(",")),`Target(${s})`})(_r(n))}; limitType=${n.limitType})`}function of(n,e){return e.isFoundDocument()&&(function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):Fe.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)})(n,e)&&(function(s,r){for(const i of Dc(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0})(n,e)&&(function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0})(n,e)&&(function(s,r){return!(s.startAt&&!(function(o,a,l){const c=rw(o,a,l);return o.inclusive?c<=0:c<0})(s.startAt,Dc(s),r)||s.endAt&&!(function(o,a,l){const c=rw(o,a,l);return o.inclusive?c>=0:c>0})(s.endAt,Dc(s),r))})(n,e)}function XF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function oC(n){return(e,t)=>{let s=!1;for(const r of Dc(n)){const i=ZF(r,e,t);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function ZF(n,e,t){const s=n.field.isKeyField()?Fe.comparator(e.key,t.key):(function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Ja(l,c):je(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return je(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[t]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){no(this.inner,((t,s)=>{for(const[r,i]of s)e(r,i)}))}isEmpty(){return GI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=new Kt(Fe.comparator);function ui(){return e4}const aC=new Kt(Fe.comparator);function gc(...n){let e=aC;for(const t of n)e=e.insert(t.key,t);return e}function lC(n){let e=aC;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Ro(){return Oc()}function cC(){return Oc()}function Oc(){return new Xo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const t4=new Kt(Fe.comparator),n4=new Sn(Fe.comparator);function ut(...n){let e=n4;for(const t of n)e=e.add(t);return e}const s4=new Sn(ct);function r4(){return s4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ih(e)?"-0":e}}function uC(n){return{integerValue:""+n}}function i4(n,e){return NF(e)?uC(e):zm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(){this._=void 0}}function o4(n,e,t){return n instanceof uh?(function(r,i){const o={fields:{[zI]:{stringValue:jI},[KI]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&$m(i)&&(i=sf(i)),i&&(o.fields[WI]=i),{mapValue:o}})(t,e):n instanceof au?hC(n,e):n instanceof lu?fC(n,e):(function(r,i){const o=dC(r,i),a=lw(o)+lw(r.Ae);return Eg(o)&&Eg(r.Ae)?uC(a):zm(r.serializer,a)})(n,e)}function a4(n,e,t){return n instanceof au?hC(n,e):n instanceof lu?fC(n,e):t}function dC(n,e){return n instanceof dh?(function(s){return Eg(s)||(function(i){return!!i&&"doubleValue"in i})(s)})(e)?e:{integerValue:0}:null}class uh extends af{}class au extends af{constructor(e){super(),this.elements=e}}function hC(n,e){const t=pC(e);for(const s of n.elements)t.some((r=>Pr(r,s)))||t.push(s);return{arrayValue:{values:t}}}class lu extends af{constructor(e){super(),this.elements=e}}function fC(n,e){let t=pC(e);for(const s of n.elements)t=t.filter((r=>!Pr(r,s)));return{arrayValue:{values:t}}}class dh extends af{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function lw(n){return cn(n.integerValue||n.doubleValue)}function pC(n){return Hm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function l4(n,e){return n.field.isEqual(e.field)&&(function(s,r){return s instanceof au&&r instanceof au||s instanceof lu&&r instanceof lu?qa(s.elements,r.elements,Pr):s instanceof dh&&r instanceof dh?Pr(s.Ae,r.Ae):s instanceof uh&&r instanceof uh})(n.transform,e.transform)}class c4{constructor(e,t){this.version=e,this.transformResults=t}}class Er{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Er}static exists(e){return new Er(void 0,e)}static updateTime(e){return new Er(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class lf{}function gC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new vC(n.key,Er.none()):new Pu(n.key,n.data,Er.none());{const t=n.data,s=bs.empty();let r=new Sn(Gn.comparator);for(let i of e.fields)if(!r.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new so(n.key,s,new Os(r.toArray()),Er.none())}}function u4(n,e,t){n instanceof Pu?(function(r,i,o){const a=r.value.clone(),l=uw(r.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof so?(function(r,i,o){if(!Pd(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=uw(r.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(mC(r)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(n,e,t):(function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Lc(n,e,t,s){return n instanceof Pu?(function(i,o,a,l){if(!Pd(i.precondition,o))return a;const c=i.value.clone(),d=dw(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null})(n,e,t,s):n instanceof so?(function(i,o,a,l){if(!Pd(i.precondition,o))return a;const c=dw(i.fieldTransforms,l,o),d=o.data;return d.setAll(mC(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((f=>f.field)))})(n,e,t,s):(function(i,o,a){return Pd(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function d4(n,e){let t=null;for(const s of n.fieldTransforms){const r=e.data.field(s.field),i=dC(s.transform,r||null);i!=null&&(t===null&&(t=bs.empty()),t.set(s.field,i))}return t||null}function cw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&qa(s,r,((i,o)=>l4(i,o)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Pu extends lf{constructor(e,t,s,r=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class so extends lf{constructor(e,t,s,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function mC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function uw(n,e,t){const s=new Map;It(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const i=n[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,a4(o,a,t[r]))}return s}function dw(n,e,t){const s=new Map;for(const r of n){const i=r.transform,o=t.data.field(r.field);s.set(r.field,o4(i,o,e))}return s}class vC extends lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class h4 extends lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e,t,s,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&u4(i,e,s[r])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Lc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Lc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=cC();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(r.key)?null:a;const l=gC(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Je.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ut())}isEqual(e){return this.batchId===e.batchId&&qa(this.mutations,e.mutations,((t,s)=>cw(t,s)))&&qa(this.baseMutations,e.baseMutations,((t,s)=>cw(t,s)))}}class Wm{constructor(e,t,s,r){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=r}static from(e,t,s){It(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return t4})();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Wm(e,t,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn,gt;function m4(n){switch(n){case oe.OK:return je(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return je(15467,{code:n})}}function yC(n){if(n===void 0)return li("GRPC error has no .code"),oe.UNKNOWN;switch(n){case gn.OK:return oe.OK;case gn.CANCELLED:return oe.CANCELLED;case gn.UNKNOWN:return oe.UNKNOWN;case gn.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case gn.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case gn.INTERNAL:return oe.INTERNAL;case gn.UNAVAILABLE:return oe.UNAVAILABLE;case gn.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case gn.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case gn.NOT_FOUND:return oe.NOT_FOUND;case gn.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case gn.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case gn.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case gn.ABORTED:return oe.ABORTED;case gn.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case gn.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case gn.DATA_LOSS:return oe.DATA_LOSS;default:return je(39323,{code:n})}}(gt=gn||(gn={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4=new Vi([4294967295,4294967295],0);function hw(n){const e=v4().encode(n),t=new NI;return t.update(e),new Uint8Array(t.digest())}function fw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Vi([t,s],0),new Vi([r,i],0)]}class Km{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new mc(`Invalid padding: ${t}`);if(s<0)throw new mc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new mc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new mc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Vi.fromNumber(this.ge)}ye(e,t,s){let r=e.add(t.multiply(Vi.fromNumber(s)));return r.compare(y4)===1&&(r=new Vi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=hw(e),[s,r]=fw(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,t,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Km(i,r,t);return s.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const t=hw(e),[s,r]=fw(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class mc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,t,s,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const r=new Map;return r.set(e,Ru.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new cf(Je.min(),r,new Kt(ct),ui(),ut())}}class Ru{constructor(e,t,s,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ru(s,t,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,t,s,r){this.be=e,this.removedTargetIds=t,this.key=s,this.De=r}}class AC{constructor(e,t){this.targetId=e,this.Ce=t}}class wC{constructor(e,t,s=Qn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=r}}class pw{constructor(){this.ve=0,this.Fe=gw(),this.Me=Qn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ut(),t=ut(),s=ut();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:s=s.add(r);break;default:je(38017,{changeType:i})}})),new Ru(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=gw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,It(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class A4{constructor(e){this.Ge=e,this.ze=new Map,this.je=ui(),this.Je=ad(),this.He=ad(),this.Ye=new Kt(ct)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:je(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,s=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(Ig(i))if(s===0){const o=new Fe(i.path);this.et(t,o,Xn.newNoDocument(o,Je.min()))}else It(s===1,20013,{expectedCount:s});else{const o=this._t(t);if(o!==s){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,c)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=t;let o,a;try{o=Ji(s).toUint8Array()}catch(l){if(l instanceof QI)return Ka("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Km(o,r,i)}catch(l){return Ka(l instanceof mc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let r=0;return s.forEach((i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(t,i,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Ig(a.target)){const l=new Fe(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Xn.newNoDocument(l,e))}i.Be&&(t.set(o,i.ke()),i.qe())}}));let s=ut();this.He.forEach(((i,o)=>{let a=!0;o.forEachWhile((l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(s=s.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const r=new cf(e,t,this.Ye,this.je,s);return this.je=ui(),this.Je=ad(),this.He=ad(),this.Ye=new Kt(ct),r}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new pw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Sn(ct),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Sn(ct),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ie("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new pw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ad(){return new Kt(Fe.comparator)}function gw(){return new Kt(Fe.comparator)}const w4={asc:"ASCENDING",desc:"DESCENDING"},_4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},E4={and:"AND",or:"OR"};class b4{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Sg(n,e){return n.useProto3Json||nf(e)?e:{value:e}}function hh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _C(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function I4(n,e){return hh(n,e.toTimestamp())}function br(n){return It(!!n,49232),Je.fromTimestamp((function(t){const s=qi(t);return new Ft(s.seconds,s.nanos)})(n))}function qm(n,e){return Pg(n,e).canonicalString()}function Pg(n,e){const t=(function(r){return new Lt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function EC(n){const e=Lt.fromString(n);return It(SC(e),10190,{key:e.toString()}),e}function Rg(n,e){return qm(n.databaseId,e.path)}function vp(n,e){const t=EC(e);if(t.get(1)!==n.databaseId.projectId)throw new Ee(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ee(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Fe(IC(t))}function bC(n,e){return qm(n.databaseId,e)}function C4(n){const e=EC(n);return e.length===4?Lt.emptyPath():IC(e)}function xg(n){return new Lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function IC(n){return It(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function mw(n,e,t){return{name:Rg(n,e),fields:t.value.mapValue.fields}}function T4(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:je(39313,{state:c})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=(function(c,d){return c.useProto3Json?(It(d===void 0||typeof d=="string",58123),Qn.fromBase64String(d||"")):(It(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Qn.fromUint8Array(d||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(c){const d=c.code===void 0?oe.UNKNOWN:yC(c.code);return new Ee(d,c.message||"")})(o);t=new wC(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=vp(n,s.document.name),i=br(s.document.updateTime),o=s.document.createTime?br(s.document.createTime):Je.min(),a=new bs({mapValue:{fields:s.document.fields}}),l=Xn.newFoundDocument(r,i,o,a),c=s.targetIds||[],d=s.removedTargetIds||[];t=new Rd(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=vp(n,s.document),i=s.readTime?br(s.readTime):Je.min(),o=Xn.newNoDocument(r,i),a=s.removedTargetIds||[];t=new Rd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=vp(n,s.document),i=s.removedTargetIds||[];t=new Rd([],i,r,null)}else{if(!("filter"in e))return je(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new g4(r,i),a=s.targetId;t=new AC(a,o)}}return t}function S4(n,e){let t;if(e instanceof Pu)t={update:mw(n,e.key,e.value)};else if(e instanceof vC)t={delete:Rg(n,e.key)};else if(e instanceof so)t={update:mw(n,e.key,e.data),updateMask:B4(e.fieldMask)};else{if(!(e instanceof h4))return je(16599,{Vt:e.type});t={verify:Rg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(i,o){const a=o.transform;if(a instanceof uh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof au)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof lu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof dh)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw je(20930,{transform:o.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(r,i){return i.updateTime!==void 0?{updateTime:I4(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:je(27497)})(n,e.precondition)),t}function P4(n,e){return n&&n.length>0?(It(e!==void 0,14353),n.map((t=>(function(r,i){let o=r.updateTime?br(r.updateTime):br(i);return o.isEqual(Je.min())&&(o=br(i)),new c4(o,r.transformResults||[])})(t,e)))):[]}function R4(n,e){return{documents:[bC(n,e.path)]}}function x4(n,e){const t={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=bC(n,r);const i=(function(c){if(c.length!==0)return TC(rr.create(c,"and"))})(e.filters);i&&(t.structuredQuery.where=i);const o=(function(c){if(c.length!==0)return c.map((d=>(function(p){return{field:pa(p.field),direction:D4(p.dir)}})(d)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=Sg(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(c){return{before:c.inclusive,values:c.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(c){return{before:!c.inclusive,values:c.position}})(e.endAt)),{ft:t,parent:r}}function k4(n){let e=C4(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let r=null;if(s>0){It(s===1,65062);const d=t.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let i=[];t.where&&(i=(function(f){const p=CC(f);return p instanceof rr&&eC(p)?p.getFilters():[p]})(t.where));let o=[];t.orderBy&&(o=(function(f){return f.map((p=>(function(_){return new ch(ga(_.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(p)))})(t.orderBy));let a=null;t.limit&&(a=(function(f){let p;return p=typeof f=="object"?f.value:f,nf(p)?null:p})(t.limit));let l=null;t.startAt&&(l=(function(f){const p=!!f.before,m=f.values||[];return new lh(m,p)})(t.startAt));let c=null;return t.endAt&&(c=(function(f){const p=!f.before,m=f.values||[];return new lh(m,p)})(t.endAt)),JF(e,r,o,i,a,"F",l,c)}function N4(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function CC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=ga(t.unaryFilter.field);return yn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=ga(t.unaryFilter.field);return yn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ga(t.unaryFilter.field);return yn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ga(t.unaryFilter.field);return yn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return je(61313);default:return je(60726)}})(n):n.fieldFilter!==void 0?(function(t){return yn.create(ga(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return je(58110);default:return je(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return rr.create(t.compositeFilter.filters.map((s=>CC(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return je(1026)}})(t.compositeFilter.op))})(n):je(30097,{filter:n})}function D4(n){return w4[n]}function O4(n){return _4[n]}function L4(n){return E4[n]}function pa(n){return{fieldPath:n.canonicalString()}}function ga(n){return Gn.fromServerFormat(n.fieldPath)}function TC(n){return n instanceof yn?(function(t){if(t.op==="=="){if(sw(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NAN"}};if(nw(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(sw(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NAN"}};if(nw(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pa(t.field),op:O4(t.op),value:t.value}}})(n):n instanceof rr?(function(t){const s=t.getFilters().map((r=>TC(r)));return s.length===1?s[0]:{compositeFilter:{op:L4(t.op),filters:s}}})(n):je(54877,{filter:n})}function B4(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function SC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,t,s,r,i=Je.min(),o=Je.min(),a=Qn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Oi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e){this.yt=e}}function F4(n){const e=k4({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Tg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(){this.Cn=new V4}addToCollectionParentIndex(e,t){return this.Cn.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Ki.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(Ki.min())}updateCollectionGroup(e,t,s){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class V4{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t]||new Sn(Lt.comparator),i=!r.has(s);return this.index[t]=r.add(s),i}has(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Sn(Lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PC=41943040;class ws{static withCacheSize(e){return new ws(e,ws.DEFAULT_COLLECTION_PERCENTILE,ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ws.DEFAULT_COLLECTION_PERCENTILE=10,ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ws.DEFAULT=new ws(PC,ws.DEFAULT_COLLECTION_PERCENTILE,ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ws.DISABLED=new ws(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Xa(0)}static cr(){return new Xa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="LruGarbageCollector",$4=1048576;function Aw([n,e],[t,s]){const r=ct(n,t);return r===0?ct(e,s):r}class H4{constructor(e){this.Ir=e,this.buffer=new Sn(Aw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Aw(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class G4{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ie(yw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){cl(t)?Ie(yw,"Ignoring IndexedDB error during garbage collection: ",t):await ll(t)}await this.Vr(3e5)}))}}class Q4{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return le.resolve(tf.ce);const s=new H4(t);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(vw)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,r,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,o=Date.now(),this.nthSequenceNumber(e,r)))).next((f=>(s=f,a=Date.now(),this.removeTargets(e,s,t)))).next((f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,s)))).next((f=>(c=Date.now(),ha()<=lt.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:f}))))}}function j4(n,e){return new Q4(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(){this.changes=new Xo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?le.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e,t,s,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(s!==null&&Lc(s.mutation,r,Os.empty(),Ft.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,ut()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=ut()){const r=Ro();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,s).next((i=>{let o=gc();return i.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const s=Ro();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,ut())))}populateOverlays(e,t,s){const r=[];return s.forEach((i=>{t.has(i)||r.push(i)})),this.documentOverlayCache.getOverlays(e,r).next((i=>{i.forEach(((o,a)=>{t.set(o,a)}))}))}computeViews(e,t,s,r){let i=ui();const o=Oc(),a=(function(){return Oc()})();return t.forEach(((l,c)=>{const d=s.get(c.key);r.has(c.key)&&(d===void 0||d.mutation instanceof so)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Lc(d.mutation,c,d.mutation.getFieldMask(),Ft.now())):o.set(c.key,Os.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((c,d)=>o.set(c,d))),t.forEach(((c,d)=>a.set(c,new W4(d,o.get(c)??null)))),a)))}recalculateAndSaveOverlays(e,t){const s=Oc();let r=new Kt(((o,a)=>o-a)),i=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const a of o)a.keys().forEach((l=>{const c=t.get(l);if(c===null)return;let d=s.get(l)||Os.empty();d=a.applyToLocalView(c,d),s.set(l,d);const f=(r.get(a.batchId)||ut()).add(l);r=r.insert(a.batchId,f)}))})).next((()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,f=cC();d.forEach((p=>{if(!i.has(p)){const m=gC(t.get(p),s.get(p));m!==null&&f.set(p,m),i=i.add(p)}})),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return le.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,r){return(function(o){return Fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):rC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,r):this.getDocumentsMatchingCollectionQuery(e,t,s,r)}getNextDocuments(e,t,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,r-i.size):le.resolve(Ro());let a=su,l=i;return o.next((c=>le.forEach(c,((d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(d)?le.resolve():this.remoteDocumentCache.getEntry(e,d).next((p=>{l=l.insert(d,p)}))))).next((()=>this.populateOverlays(e,c,i))).next((()=>this.computeViews(e,l,c,ut()))).next((d=>({batchId:a,changes:lC(d)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Fe(t)).next((s=>{let r=gc();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,r){const i=t.collectionGroup;let o=gc();return this.indexManager.getCollectionParents(e,i).next((a=>le.forEach(a,(l=>{const c=(function(f,p){return new Su(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(t,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,s,r).next((d=>{d.forEach(((f,p)=>{o=o.insert(f,p)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,i,r)))).next((o=>{i.forEach(((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Xn.newInvalidDocument(d)))}));let a=gc();return o.forEach(((l,c)=>{const d=i.get(l);d!==void 0&&Lc(d.mutation,c,Os.empty(),Ft.now()),of(t,c)&&(a=a.insert(l,c))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return le.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:br(r.createTime)}})(t)),le.resolve()}getNamedQuery(e,t){return le.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:F4(r.bundledQuery),readTime:br(r.readTime)}})(t)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(){this.overlays=new Kt(Fe.comparator),this.qr=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ro();return le.forEach(t,(r=>this.getOverlay(e,r).next((i=>{i!==null&&s.set(r,i)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((r,i)=>{this.St(e,t,i)})),le.resolve()}removeOverlaysForBatchId(e,t,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(s)),le.resolve()}getOverlaysForCollection(e,t,s){const r=Ro(),i=t.length+1,o=new Fe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return le.resolve(r)}getOverlaysForCollectionGroup(e,t,s,r){let i=new Kt(((c,d)=>c-d));const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>s){let d=i.get(c.largestBatchId);d===null&&(d=Ro(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Ro(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((c,d)=>a.set(c,d))),!(a.size()>=r)););return le.resolve(a)}St(e,t,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new p4(t,s));let i=this.qr.get(t);i===void 0&&(i=ut(),this.qr.set(t,i)),this.qr.set(t,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(){this.sessionToken=Qn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(){this.Qr=new Sn(Nn.$r),this.Ur=new Sn(Nn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Nn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Nn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Fe(new Lt([])),s=new Nn(t,e),r=new Nn(t,e+1),i=[];return this.Ur.forEachInRange([s,r],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Fe(new Lt([])),s=new Nn(t,e),r=new Nn(t,e+1);let i=ut();return this.Ur.forEachInRange([s,r],(o=>{i=i.add(o.key)})),i}containsKey(e){const t=new Nn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Nn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Fe.comparator(e.key,t.key)||ct(e.Yr,t.Yr)}static Kr(e,t){return ct(e.Yr,t.Yr)||Fe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Sn(Nn.$r)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new f4(i,t,s,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new Nn(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return le.resolve(o)}lookupMutationBatch(e,t){return le.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,r=this.ei(s),i=r<0?0:r;return le.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?Vm:this.tr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Nn(t,0),r=new Nn(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],(o=>{const a=this.Xr(o.Yr);i.push(a)})),le.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Sn(ct);return t.forEach((r=>{const i=new Nn(r,0),o=new Nn(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(a=>{s=s.add(a.Yr)}))})),le.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,r=s.length+1;let i=s;Fe.isDocumentKey(i)||(i=i.child(""));const o=new Nn(new Fe(i),0);let a=new Sn(ct);return this.Zr.forEachWhile((l=>{const c=l.key.path;return!!s.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.Yr)),!0)}),o),le.resolve(this.ti(a))}ti(e){const t=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){It(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return le.forEach(t.mutations,(r=>{const i=new Nn(r.key,t.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Nn(t,0),r=this.Zr.firstAfterOrEqual(s);return le.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.ri=e,this.docs=(function(){return new Kt(Fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return le.resolve(s?s.document.mutableCopy():Xn.newInvalidDocument(t))}getEntries(e,t){let s=ui();return t.forEach((r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Xn.newInvalidDocument(r))})),le.resolve(s)}getDocumentsMatchingQuery(e,t,s,r){let i=ui();const o=t.path,a=new Fe(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||PF(SF(d),s)<=0||(r.has(d.key)||of(t,d))&&(i=i.insert(d.key,d.mutableCopy()))}return le.resolve(i)}getAllFromCollectionGroup(e,t,s,r){je(9500)}ii(e,t){return le.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new eU(this)}getSize(e){return le.resolve(this.size)}}class eU extends z4{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),le.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e){this.persistence=e,this.si=new Xo((t=>Gm(t)),Qm),this.lastRemoteSnapshotVersion=Je.min(),this.highestTargetId=0,this.oi=0,this._i=new Jm,this.targetCount=0,this.ai=Xa.ur()}forEachTarget(e,t){return this.si.forEach(((s,r)=>t(r))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),le.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Xa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Pr(t),le.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,s){let r=0;const i=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=t&&s.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),le.waitFor(i).next((()=>r))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return le.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),le.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((o=>{i.push(r.markPotentiallyOrphaned(e,o))})),le.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),le.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return le.resolve(s)}containsKey(e,t){return le.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,t){this.ui={},this.overlays={},this.ci=new tf(0),this.li=!1,this.li=!0,this.hi=new Y4,this.referenceDelegate=e(this),this.Pi=new tU(this),this.indexManager=new U4,this.remoteDocumentCache=(function(r){return new Z4(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new M4(t),this.Ii=new q4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new J4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new X4(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){Ie("MemoryPersistence","Starting transaction:",e);const r=new nU(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((i=>this.referenceDelegate.di(r).next((()=>i)))).toPromise().then((i=>(r.raiseOnCommittedEvent(),i)))}Ai(e,t){return le.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class nU extends xF{constructor(e){super(),this.currentSequenceNumber=e}}class Ym{constructor(e){this.persistence=e,this.Ri=new Jm,this.Vi=null}static mi(e){return new Ym(e)}get fi(){if(this.Vi)return this.Vi;throw je(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),le.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),le.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((i=>this.fi.add(i.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.fi,(s=>{const r=Fe.fromPath(s);return this.gi(e,r).next((i=>{i||t.removeEntry(r,Je.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return le.or([()=>le.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class fh{constructor(e,t){this.persistence=e,this.pi=new Xo((s=>DF(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=j4(this,t)}static mi(e,t){return new fh(e,t)}Ei(){}di(e){return le.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((r=>s+r))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return le.forEach(this.pi,((s,r)=>this.br(e,s,r).next((i=>i?le.resolve():t(r)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(o=>this.br(e,o,t).next((a=>{a||(s++,i.removeEntry(o,Je.min()))})))).next((()=>i.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),le.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),le.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),le.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Td(e.data.value)),t}br(e,t,s){return le.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return le.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,t,s,r){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=r}static As(e,t){let s=ut(),r=ut();for(const i of t.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Xm(e,t.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return qO()?8:kF(ts())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,r){const i={result:null};return this.ys(e,t).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,t,r,s).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new sU;return this.Ss(e,t,o).next((a=>{if(i.result=a,this.Vs)return this.bs(e,t,o,a.size)}))})).next((()=>i.result))}bs(e,t,s,r){return s.documentReadCount<this.fs?(ha()<=lt.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",fa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),le.resolve()):(ha()<=lt.DEBUG&&Ie("QueryEngine","Query:",fa(t),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(ha()<=lt.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",fa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_r(t))):le.resolve())}ys(e,t){if(aw(t))return le.resolve(null);let s=_r(t);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=Tg(t,null,"F"),s=_r(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((i=>{const o=ut(...i);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,s).next((l=>{const c=this.Ds(t,a);return this.Cs(t,c,o,l.readTime)?this.ys(e,Tg(t,null,"F")):this.vs(e,c,t,l)}))))})))))}ws(e,t,s,r){return aw(t)||r.isEqual(Je.min())?le.resolve(null):this.ps.getDocuments(e,s).next((i=>{const o=this.Ds(t,i);return this.Cs(t,o,s,r)?le.resolve(null):(ha()<=lt.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fa(t)),this.vs(e,o,t,TF(r,su)).next((a=>a)))}))}Ds(e,t){let s=new Sn(oC(e));return t.forEach(((r,i)=>{of(e,i)&&(s=s.add(i))})),s}Cs(e,t,s,r){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,s){return ha()<=lt.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",fa(t)),this.ps.getDocumentsMatchingQuery(e,t,Ki.min(),s)}vs(e,t,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((i=>(t.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="LocalStore",iU=3e8;class oU{constructor(e,t,s,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Kt(ct),this.xs=new Xo((i=>Gm(i)),Qm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new K4(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function aU(n,e,t,s){return new oU(n,e,t,s)}async function xC(n,e){const t=Xe(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return t.mutationQueue.getAllMutationBatches(s).next((i=>(r=i,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((i=>{const o=[],a=[];let l=ut();for(const c of r){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return t.localDocuments.getDocuments(s,l).next((c=>({Ls:c,removedBatchIds:o,addedBatchIds:a})))}))}))}function lU(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),i=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,c,d){const f=c.batch,p=f.keys();let m=le.resolve();return p.forEach((_=>{m=m.next((()=>d.getEntry(l,_))).next((y=>{const A=c.docVersions.get(_);It(A!==null,48541),y.version.compareTo(A)<0&&(f.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),d.addEntry(y)))}))})),m.next((()=>a.mutationQueue.removeMutationBatch(l,f)))})(t,s,e,i).next((()=>i.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(a){let l=ut();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l})(e)))).next((()=>t.localDocuments.getDocuments(s,r)))}))}function kC(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function cU(n,e){const t=Xe(n),s=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const a=[];e.targetChanges.forEach(((d,f)=>{const p=r.get(f);if(!p)return;a.push(t.Pi.removeMatchingKeys(i,d.removedDocuments,f).next((()=>t.Pi.addMatchingKeys(i,d.addedDocuments,f))));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Qn.EMPTY_BYTE_STRING,Je.min()).withLastLimboFreeSnapshotVersion(Je.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,s)),r=r.insert(f,m),(function(y,A,w){return y.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=iU?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0})(p,m,d)&&a.push(t.Pi.updateTargetData(i,m))}));let l=ui(),c=ut();if(e.documentUpdates.forEach((d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(i,d))})),a.push(uU(i,o,e.documentUpdates).next((d=>{l=d.ks,c=d.qs}))),!s.isEqual(Je.min())){const d=t.Pi.getLastRemoteSnapshotVersion(i).next((f=>t.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s)));a.push(d)}return le.waitFor(a).next((()=>o.apply(i))).next((()=>t.localDocuments.getLocalViewOfDocuments(i,l,c))).next((()=>l))})).then((i=>(t.Ms=r,i)))}function uU(n,e,t){let s=ut(),r=ut();return t.forEach((i=>s=s.add(i))),e.getEntries(n,s).next((i=>{let o=ui();return t.forEach(((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Je.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ie(Zm,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)})),{ks:o,qs:r}}))}function dU(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Vm),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function hU(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return t.Pi.getTargetData(s,e).next((i=>i?(r=i,le.resolve(r)):t.Pi.allocateTargetId(s).next((o=>(r=new Oi(e,o,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=t.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function kg(n,e,t){const s=Xe(n),r=s.Ms.get(e),i=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",i,(o=>s.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!cl(o))throw o;Ie(Zm,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function ww(n,e,t){const s=Xe(n);let r=Je.min(),i=ut();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,c,d){const f=Xe(l),p=f.xs.get(d);return p!==void 0?le.resolve(f.Ms.get(p)):f.Pi.getTargetData(c,d)})(s,o,_r(e)).next((a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{i=l}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,e,t?r:Je.min(),t?i:ut()))).next((a=>(fU(s,XF(e),a),{documents:a,Qs:i})))))}function fU(n,e,t){let s=n.Os.get(e)||Je.min();t.forEach(((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)})),n.Os.set(e,s)}class _w{constructor(){this.activeTargetIds=r4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pU{constructor(){this.Mo=new _w,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new _w,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="ConnectivityMonitor";class bw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ie(Ew,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ie(Ew,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld=null;function Ng(){return ld===null?ld=(function(){return 268435456+Math.round(2147483648*Math.random())})():ld++,"0x"+ld.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="RestConnection",mU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vU{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===oh?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,t,s,r,i){const o=Ng(),a=this.zo(e,t.toUriEncodedString());Ie(yp,`Sending RPC '${e}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,i);const{host:c}=new URL(a),d=rl(c);return this.Jo(e,a,l,s,d).then((f=>(Ie(yp,`Received RPC '${e}' ${o}: `,f),f)),(f=>{throw Ka(yp,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",s),f}))}Ho(e,t,s,r,i,o){return this.Go(e,t,s,r,i)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+al})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,i)=>e[i]=r)),s&&s.headers.forEach(((r,i)=>e[i]=r))}zo(e,t){const s=mU[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn="WebChannelConnection";class AU extends vU{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,r,i){const o=Ng();return new Promise(((a,l)=>{const c=new DI;c.setWithCredentials(!0),c.listenOnce(OI.COMPLETE,(()=>{try{switch(c.getLastErrorCode()){case Cd.NO_ERROR:const f=c.getResponseJson();Ie(qn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Cd.TIMEOUT:Ie(qn,`RPC '${e}' ${o} timed out`),l(new Ee(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Cd.HTTP_ERROR:const p=c.getStatus();if(Ie(qn,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=m?.error;if(_&&_.status&&_.message){const y=(function(w){const I=w.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(I)>=0?I:oe.UNKNOWN})(_.status);l(new Ee(y,_.message))}else l(new Ee(oe.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Ee(oe.UNAVAILABLE,"Connection failed."));break;default:je(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Ie(qn,`RPC '${e}' ${o} completed.`)}}));const d=JSON.stringify(r);Ie(qn,`RPC '${e}' ${o} sending request:`,r),c.send(t,"POST",d,s,15)}))}T_(e,t,s){const r=Ng(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=MI(),a=BI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,s),l.encodeInitMessageHeaders=!0;const d=i.join("");Ie(qn,`Creating RPC '${e}' stream ${r}: ${d}`,l);const f=o.createWebChannel(d,l);this.I_(f);let p=!1,m=!1;const _=new yU({Yo:A=>{m?Ie(qn,`Not sending because RPC '${e}' stream ${r} is closed:`,A):(p||(Ie(qn,`Opening RPC '${e}' stream ${r} transport.`),f.open(),p=!0),Ie(qn,`RPC '${e}' stream ${r} sending:`,A),f.send(A))},Zo:()=>f.close()}),y=(A,w,I)=>{A.listen(w,(C=>{try{I(C)}catch(M){setTimeout((()=>{throw M}),0)}}))};return y(f,pc.EventType.OPEN,(()=>{m||(Ie(qn,`RPC '${e}' stream ${r} transport opened.`),_.o_())})),y(f,pc.EventType.CLOSE,(()=>{m||(m=!0,Ie(qn,`RPC '${e}' stream ${r} transport closed`),_.a_(),this.E_(f))})),y(f,pc.EventType.ERROR,(A=>{m||(m=!0,Ka(qn,`RPC '${e}' stream ${r} transport errored. Name:`,A.name,"Message:",A.message),_.a_(new Ee(oe.UNAVAILABLE,"The operation could not be completed")))})),y(f,pc.EventType.MESSAGE,(A=>{if(!m){const w=A.data[0];It(!!w,16349);const I=w,C=I?.error||I[0]?.error;if(C){Ie(qn,`RPC '${e}' stream ${r} received error:`,C);const M=C.status;let Q=(function(T){const P=gn[T];if(P!==void 0)return yC(P)})(M),q=C.message;Q===void 0&&(Q=oe.INTERNAL,q="Unknown error status: "+M+" with message "+C.message),m=!0,_.a_(new Ee(Q,q)),f.close()}else Ie(qn,`RPC '${e}' stream ${r} received:`,w),_.u_(w)}})),y(a,LI.STAT_EVENT,(A=>{A.stat===Ag.PROXY?Ie(qn,`RPC '${e}' stream ${r} detected buffering proxy`):A.stat===Ag.NOPROXY&&Ie(qn,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{_.__()}),0),_}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Ap(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(n){return new b4(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,t,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-s);r>0&&Ie("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="PersistentStream";class DC{constructor(e,t,s,r,i,o,a,l){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new NC(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(li(t.toString()),li("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===t&&this.G_(s,r)}),(s=>{e((()=>{const r=new Ee(oe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ie(Iw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ie(Iw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class wU extends DC{constructor(e,t,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,r,o),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=T4(this.serializer,e),s=(function(i){if(!("targetChange"in i))return Je.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Je.min():o.readTime?br(o.readTime):Je.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=xg(this.serializer),t.addTarget=(function(i,o){let a;const l=o.target;if(a=Ig(l)?{documents:R4(i,l)}:{query:x4(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=_C(i,o.resumeToken);const c=Sg(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Je.min())>0){a.readTime=hh(i,o.snapshotVersion.toTimestamp());const c=Sg(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a})(this.serializer,e);const s=N4(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=xg(this.serializer),t.removeTarget=e,this.q_(t)}}class _U extends DC{constructor(e,t,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return It(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,It(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){It(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=P4(e.writeResults,e.commitTime),s=br(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=xg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>S4(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{}class bU extends EU{constructor(e,t,s,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Ee(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,Pg(t,s),r,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ee(oe.UNKNOWN,i.toString())}))}Ho(e,t,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,Pg(t,s),r,o,a,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ee(oe.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class IU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(li(t),this.aa=!1):Ie("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo="RemoteStore";class CU{constructor(e,t,s,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{Zo(this)&&(Ie(jo,"Restarting streams for network reachability change."),await(async function(l){const c=Xe(l);c.Ea.add(4),await xu(c),c.Ra.set("Unknown"),c.Ea.delete(4),await df(c)})(this))}))})),this.Ra=new IU(s,r)}}async function df(n){if(Zo(n))for(const e of n.da)await e(!0)}async function xu(n){for(const e of n.da)await e(!1)}function OC(n,e){const t=Xe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),sv(t)?nv(t):ul(t).O_()&&tv(t,e))}function ev(n,e){const t=Xe(n),s=ul(t);t.Ia.delete(e),s.O_()&&LC(t,e),t.Ia.size===0&&(s.O_()?s.L_():Zo(t)&&t.Ra.set("Unknown"))}function tv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Je.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ul(n).Y_(e)}function LC(n,e){n.Va.Ue(e),ul(n).Z_(e)}function nv(n){n.Va=new A4({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ul(n).start(),n.Ra.ua()}function sv(n){return Zo(n)&&!ul(n).x_()&&n.Ia.size>0}function Zo(n){return Xe(n).Ea.size===0}function BC(n){n.Va=void 0}async function TU(n){n.Ra.set("Online")}async function SU(n){n.Ia.forEach(((e,t)=>{tv(n,e)}))}async function PU(n,e){BC(n),sv(n)?(n.Ra.ha(e),nv(n)):n.Ra.set("Unknown")}async function RU(n,e,t){if(n.Ra.set("Online"),e instanceof wC&&e.state===2&&e.cause)try{await(async function(r,i){const o=i.cause;for(const a of i.targetIds)r.Ia.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ia.delete(a),r.Va.removeTarget(a))})(n,e)}catch(s){Ie(jo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await ph(n,s)}else if(e instanceof Rd?n.Va.Ze(e):e instanceof AC?n.Va.st(e):n.Va.tt(e),!t.isEqual(Je.min()))try{const s=await kC(n.localStore);t.compareTo(s)>=0&&await(function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach(((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(Qn.EMPTY_BYTE_STRING,d.snapshotVersion)),LC(i,l);const f=new Oi(d.target,l,c,d.sequenceNumber);tv(i,f)})),i.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(s){Ie(jo,"Failed to raise snapshot:",s),await ph(n,s)}}async function ph(n,e,t){if(!cl(e))throw e;n.Ea.add(1),await xu(n),n.Ra.set("Offline"),t||(t=()=>kC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ie(jo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await df(n)}))}function MC(n,e){return e().catch((t=>ph(n,t,e)))}async function hf(n){const e=Xe(n),t=Xi(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Vm;for(;xU(e);)try{const r=await dU(e.localStore,s);if(r===null){e.Ta.length===0&&t.L_();break}s=r.batchId,kU(e,r)}catch(r){await ph(e,r)}FC(e)&&UC(e)}function xU(n){return Zo(n)&&n.Ta.length<10}function kU(n,e){n.Ta.push(e);const t=Xi(n);t.O_()&&t.X_&&t.ea(e.mutations)}function FC(n){return Zo(n)&&!Xi(n).x_()&&n.Ta.length>0}function UC(n){Xi(n).start()}async function NU(n){Xi(n).ra()}async function DU(n){const e=Xi(n);for(const t of n.Ta)e.ea(t.mutations)}async function OU(n,e,t){const s=n.Ta.shift(),r=Wm.from(s,e,t);await MC(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await hf(n)}async function LU(n,e){e&&Xi(n).X_&&await(async function(s,r){if((function(o){return m4(o)&&o!==oe.ABORTED})(r.code)){const i=s.Ta.shift();Xi(s).B_(),await MC(s,(()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r))),await hf(s)}})(n,e),FC(n)&&UC(n)}async function Cw(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),Ie(jo,"RemoteStore received new credentials");const s=Zo(t);t.Ea.add(3),await xu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await df(t)}async function BU(n,e){const t=Xe(n);e?(t.Ea.delete(2),await df(t)):e||(t.Ea.add(2),await xu(t),t.Ra.set("Unknown"))}function ul(n){return n.ma||(n.ma=(function(t,s,r){const i=Xe(t);return i.sa(),new wU(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(n.datastore,n.asyncQueue,{Xo:TU.bind(null,n),t_:SU.bind(null,n),r_:PU.bind(null,n),H_:RU.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),sv(n)?nv(n):n.Ra.set("Unknown")):(await n.ma.stop(),BC(n))}))),n.ma}function Xi(n){return n.fa||(n.fa=(function(t,s,r){const i=Xe(t);return i.sa(),new _U(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:NU.bind(null,n),r_:LU.bind(null,n),ta:DU.bind(null,n),na:OU.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await hf(n)):(await n.fa.stop(),n.Ta.length>0&&(Ie(jo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,t,s,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,r,i){const o=Date.now()+s,a=new rv(e,t,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function iv(n,e){if(li("AsyncQueue",`${e}: ${n}`),cl(n))return new Ee(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{static emptySet(e){return new Da(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Fe.comparator(t.key,s.key):(t,s)=>Fe.comparator(t.key,s.key),this.keyedMap=gc(),this.sortedSet=new Kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Da)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Da;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(){this.ga=new Kt(Fe.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):je(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Za{constructor(e,t,s,r,i,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,s,r,i){const o=[];return t.forEach((a=>{o.push({type:0,doc:a})})),new Za(e,t,Da.emptySet(t),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==s[r].type||!t[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class FU{constructor(){this.queries=Sw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const r=Xe(t),i=r.queries;r.queries=Sw(),i.forEach(((o,a)=>{for(const l of a.Sa)l.onError(s)}))})(this,new Ee(oe.ABORTED,"Firestore shutting down"))}}function Sw(){return new Xo((n=>iC(n)),rf)}async function VC(n,e){const t=Xe(n);let s=3;const r=e.query;let i=t.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new MU,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await t.onListen(r,!0);break;case 1:i.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){const a=iv(o,`Initialization of query '${fa(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,i),i.Sa.push(e),e.va(t.onlineState),i.wa&&e.Fa(i.wa)&&ov(t)}async function $C(n,e){const t=Xe(n),s=e.query;let r=3;const i=t.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function UU(n,e){const t=Xe(n);let s=!1;for(const r of e){const i=r.query,o=t.queries.get(i);if(o){for(const a of o.Sa)a.Fa(r)&&(s=!0);o.wa=r}}s&&ov(t)}function VU(n,e,t){const s=Xe(n),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(t);s.queries.delete(e)}function ov(n){n.Ca.forEach((e=>{e.next()}))}var Dg,Pw;(Pw=Dg||(Dg={})).Ma="default",Pw.Cache="cache";class HC{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Za(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Za.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Dg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.key=e}}class QC{constructor(e){this.key=e}}class $U{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ut(),this.mutatedKeys=ut(),this.eu=oC(e),this.tu=new Da(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new Tw,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((d,f)=>{const p=r.get(d),m=of(this.query,f)?f:null,_=!!p&&this.mutatedKeys.has(p.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let A=!1;p&&m?p.data.isEqual(m.data)?_!==y&&(s.track({type:3,doc:m}),A=!0):this.su(p,m)||(s.track({type:2,doc:m}),A=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(a=!0)):!p&&m?(s.track({type:0,doc:m}),A=!0):p&&!m&&(s.track({type:1,doc:p}),A=!0,(l||c)&&(a=!0)),A&&(m?(o=o.add(m),i=y?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),s.track({type:1,doc:d})}return{tu:o,iu:s,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((d,f)=>(function(m,_){const y=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je(20277,{Rt:A})}};return y(m)-y(_)})(d.type,f.type)||this.eu(d.doc,f.doc))),this.ou(s),r=r??!1;const a=t&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Za(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Tw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ut(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new QC(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new GC(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=ut();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Za.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const av="SyncEngine";class HU{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class GU{constructor(e){this.key=e,this.hu=!1}}class QU{constructor(e,t,s,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Xo((a=>iC(a)),rf),this.Iu=new Map,this.Eu=new Set,this.du=new Kt(Fe.comparator),this.Au=new Map,this.Ru=new Jm,this.Vu={},this.mu=new Map,this.fu=Xa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function jU(n,e,t=!0){const s=JC(n);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await jC(s,e,t,!0),r}async function zU(n,e){const t=JC(n);await jC(t,e,!0,!1)}async function jC(n,e,t,s){const r=await hU(n.localStore,_r(e)),i=r.targetId,o=n.sharedClientState.addLocalQueryTarget(i,t);let a;return s&&(a=await WU(n,e,i,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&OC(n.remoteStore,r),a}async function WU(n,e,t,s,r){n.pu=(f,p,m)=>(async function(y,A,w,I){let C=A.view.ru(w);C.Cs&&(C=await ww(y.localStore,A.query,!1).then((({documents:x})=>A.view.ru(x,C))));const M=I&&I.targetChanges.get(A.targetId),Q=I&&I.targetMismatches.get(A.targetId)!=null,q=A.view.applyChanges(C,y.isPrimaryClient,M,Q);return xw(y,A.targetId,q.au),q.snapshot})(n,f,p,m);const i=await ww(n.localStore,e,!0),o=new $U(e,i.Qs),a=o.ru(i.documents),l=Ru.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",r),c=o.applyChanges(a,n.isPrimaryClient,l);xw(n,t,c.au);const d=new HU(e,t,o);return n.Tu.set(e,d),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),c.snapshot}async function KU(n,e,t){const s=Xe(n),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter((o=>!rf(o,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await kg(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),t&&ev(s.remoteStore,r.targetId),Og(s,r.targetId)})).catch(ll)):(Og(s,r.targetId),await kg(s.localStore,r.targetId,!0))}async function qU(n,e){const t=Xe(n),s=t.Tu.get(e),r=t.Iu.get(s.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),ev(t.remoteStore,s.targetId))}async function JU(n,e,t){const s=s3(n);try{const r=await(function(o,a){const l=Xe(o),c=Ft.now(),d=a.reduce(((m,_)=>m.add(_.key)),ut());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",(m=>{let _=ui(),y=ut();return l.Ns.getEntries(m,d).next((A=>{_=A,_.forEach(((w,I)=>{I.isValidDocument()||(y=y.add(w))}))})).next((()=>l.localDocuments.getOverlayedDocuments(m,_))).next((A=>{f=A;const w=[];for(const I of a){const C=d4(I,f.get(I.key).overlayedDocument);C!=null&&w.push(new so(I.key,C,YI(C.value.mapValue),Er.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,w,a)})).next((A=>{p=A;const w=A.applyToLocalDocumentSet(f,y);return l.documentOverlayCache.saveOverlays(m,A.batchId,w)}))})).then((()=>({batchId:p.batchId,changes:lC(f)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Kt(ct)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c})(s,r.batchId,t),await ku(s,r.changes),await hf(s.remoteStore)}catch(r){const i=iv(r,"Failed to persist write");t.reject(i)}}async function zC(n,e){const t=Xe(n);try{const s=await cU(t.localStore,e);e.targetChanges.forEach(((r,i)=>{const o=t.Au.get(i);o&&(It(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?It(o.hu,14607):r.removedDocuments.size>0&&(It(o.hu,42227),o.hu=!1))})),await ku(t,s,e)}catch(s){await ll(s)}}function Rw(n,e,t){const s=Xe(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const r=[];s.Tu.forEach(((i,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)})),(function(o,a){const l=Xe(o);l.onlineState=a;let c=!1;l.queries.forEach(((d,f)=>{for(const p of f.Sa)p.va(a)&&(c=!0)})),c&&ov(l)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function YU(n,e,t){const s=Xe(n);s.sharedClientState.updateQueryState(e,"rejected",t);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Kt(Fe.comparator);o=o.insert(i,Xn.newNoDocument(i,Je.min()));const a=ut().add(i),l=new cf(Je.min(),new Map,new Kt(ct),o,a);await zC(s,l),s.du=s.du.remove(i),s.Au.delete(e),lv(s)}else await kg(s.localStore,e,!1).then((()=>Og(s,e,t))).catch(ll)}async function XU(n,e){const t=Xe(n),s=e.batch.batchId;try{const r=await lU(t.localStore,e);KC(t,s,null),WC(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await ku(t,r)}catch(r){await ll(r)}}async function ZU(n,e,t){const s=Xe(n);try{const r=await(function(o,a){const l=Xe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next((f=>(It(f!==null,37113),d=f.keys(),l.mutationQueue.removeMutationBatch(c,f)))).next((()=>l.mutationQueue.performConsistencyCheck(c))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d))).next((()=>l.localDocuments.getDocuments(c,d)))}))})(s.localStore,e);KC(s,e,t),WC(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await ku(s,r)}catch(r){await ll(r)}}function WC(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function KC(n,e,t){const s=Xe(n);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(t?i.reject(t):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Og(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||qC(n,s)}))}function qC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(ev(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),lv(n))}function xw(n,e,t){for(const s of t)s instanceof GC?(n.Ru.addReference(s.key,e),e3(n,s)):s instanceof QC?(Ie(av,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||qC(n,s.key)):je(19791,{wu:s})}function e3(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(Ie(av,"New document in limbo: "+t),n.Eu.add(s),lv(n))}function lv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Fe(Lt.fromString(e)),s=n.fu.next();n.Au.set(s,new GU(t)),n.du=n.du.insert(t,s),OC(n.remoteStore,new Oi(_r(jm(t.path)),s,"TargetPurposeLimboResolution",tf.ce))}}async function ku(n,e,t){const s=Xe(n),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((a,l)=>{o.push(s.pu(l,e,t).then((c=>{if((c||t)&&s.isPrimaryClient){const d=c?!c.fromCache:t?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=Xm.As(l.targetId,c);i.push(d)}})))})),await Promise.all(o),s.Pu.H_(r),await(async function(l,c){const d=Xe(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>le.forEach(c,(p=>le.forEach(p.Es,(m=>d.persistence.referenceDelegate.addReference(f,p.targetId,m))).next((()=>le.forEach(p.ds,(m=>d.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))))))}catch(f){if(!cl(f))throw f;Ie(Zm,"Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=d.Ms.get(p),_=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(_);d.Ms=d.Ms.insert(p,y)}}})(s.localStore,i))}async function t3(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){Ie(av,"User change. New user:",e.toKey());const s=await xC(t.localStore,e);t.currentUser=e,(function(i,o){i.mu.forEach((a=>{a.forEach((l=>{l.reject(new Ee(oe.CANCELLED,o))}))})),i.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ku(t,s.Ls)}}function n3(n,e){const t=Xe(n),s=t.Au.get(e);if(s&&s.hu)return ut().add(s.key);{let r=ut();const i=t.Iu.get(e);if(!i)return r;for(const o of i){const a=t.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function JC(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=zC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=n3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YU.bind(null,e),e.Pu.H_=UU.bind(null,e.eventManager),e.Pu.yu=VU.bind(null,e.eventManager),e}function s3(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZU.bind(null,e),e}class gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=uf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return aU(this.persistence,new rU,e.initialUser,this.serializer)}Cu(e){return new RC(Ym.mi,this.serializer)}Du(e){return new pU}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gh.provider={build:()=>new gh};class r3 extends gh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){It(this.persistence.referenceDelegate instanceof fh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new G4(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ws.withCacheSize(this.cacheSizeBytes):ws.DEFAULT;return new RC((s=>fh.mi(s,t)),this.serializer)}}class Lg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Rw(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=t3.bind(null,this.syncEngine),await BU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new FU})()}createDatastore(e){const t=uf(e.databaseInfo.databaseId),s=(function(i){return new AU(i)})(e.databaseInfo);return(function(i,o,a,l){return new bU(i,o,a,l)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,r,i,o,a){return new CU(s,r,i,o,a)})(this.localStore,this.datastore,e.asyncQueue,(t=>Rw(this.syncEngine,t,0)),(function(){return bw.v()?new bw:new gU})())}createSyncEngine(e,t){return(function(r,i,o,a,l,c,d){const f=new QU(r,i,o,a,l,c);return d&&(f.gu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Xe(t);Ie(jo,"RemoteStore shutting down."),s.Ea.add(5),await xu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Lg.provider={build:()=>new Lg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):li("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi="FirestoreClient";class i3{constructor(e,t,s,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=r,this.user=Jn.UNAUTHENTICATED,this.clientId=Um.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,(async o=>{Ie(Zi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(Ie(Zi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=iv(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function wp(n,e){n.asyncQueue.verifyOperationInProgress(),Ie(Zi,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async r=>{s.isEqual(r)||(await xC(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function kw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await o3(n);Ie(Zi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>Cw(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,r)=>Cw(e.remoteStore,r))),n._onlineComponents=e}async function o3(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ie(Zi,"Using user provided OfflineComponentProvider");try{await wp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===oe.FAILED_PRECONDITION||r.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Ka("Error using user provided cache. Falling back to memory cache: "+t),await wp(n,new gh)}}else Ie(Zi,"Using default OfflineComponentProvider"),await wp(n,new r3(void 0));return n._offlineComponents}async function XC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ie(Zi,"Using user provided OnlineComponentProvider"),await kw(n,n._uninitializedComponentsProvider._online)):(Ie(Zi,"Using default OnlineComponentProvider"),await kw(n,new Lg))),n._onlineComponents}function a3(n){return XC(n).then((e=>e.syncEngine))}async function ZC(n){const e=await XC(n),t=e.eventManager;return t.onListen=jU.bind(null,e.syncEngine),t.onUnlisten=KU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=zU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=qU.bind(null,e.syncEngine),t}function l3(n,e,t={}){const s=new Xr;return n.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,l,c){const d=new YC({next:p=>{d.Nu(),o.enqueueAndForget((()=>$C(i,f)));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new Ee(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new Ee(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new HC(jm(a.path),d,{includeMetadataChanges:!0,qa:!0});return VC(i,f)})(await ZC(n),n.asyncQueue,e,t,s))),s.promise}function c3(n,e,t={}){const s=new Xr;return n.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,l,c){const d=new YC({next:p=>{d.Nu(),o.enqueueAndForget((()=>$C(i,f))),p.fromCache&&l.source==="server"?c.reject(new Ee(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new HC(a,d,{includeMetadataChanges:!0,qa:!0});return VC(i,f)})(await ZC(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="firestore.googleapis.com",Dw=!0;class Ow{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tT,this.ssl=Dw}else this.host=e.host,this.ssl=e.ssl??Dw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=PC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$4)throw new Ee(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ee(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ee(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ee(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ff{constructor(e,t,s,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ow({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ow(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new gF;switch(s.type){case"firstParty":return new AF(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ee(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Nw.get(t);s&&(Ie("ComponentProvider","Removing Datastore"),Nw.delete(t),s.terminate())})(this),Promise.resolve()}}function u3(n,e,t,s={}){n=ci(n,ff);const r=rl(e),i=n._getSettings(),o={...i,emulatorOptions:n._getEmulatorOptions()},a=`${e}:${t}`;r&&(Hb(`https://${a}`),Gb("Firestore",!0)),i.host!==tT&&i.host!==a&&Ka("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:r,emulatorOptions:s};if(!Wi(l,o)&&(n._setSettings(l),s.mockUserToken)){let c,d;if(typeof s.mockUserToken=="string")c=s.mockUserToken,d=Jn.MOCK_USER;else{c=$O(s.mockUserToken,n._app?.options.projectId);const f=s.mockUserToken.sub||s.mockUserToken.user_id;if(!f)throw new Ee(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Jn(f)}n._authCredentials=new mF(new UI(c,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new dl(this.firestore,e,this._query)}}class hn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $i(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hn(this.firestore,e,this._key)}toJSON(){return{type:hn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Tu(t,hn._jsonSchema))return new hn(e,s||null,new Fe(Lt.fromString(t.referencePath)))}}hn._jsonSchemaVersion="firestore/documentReference/1.0",hn._jsonSchema={type:An("string",hn._jsonSchemaVersion),referencePath:An("string")};class $i extends dl{constructor(e,t,s){super(e,t,jm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hn(this.firestore,null,new Fe(e))}withConverter(e){return new $i(this.firestore,e,this._path)}}function d3(n,e,...t){if(n=wn(n),VI("collection","path",e),n instanceof ff){const s=Lt.fromString(e,...t);return WA(s),new $i(n,null,s)}{if(!(n instanceof hn||n instanceof $i))throw new Ee(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Lt.fromString(e,...t));return WA(s),new $i(n.firestore,null,s)}}function Lo(n,e,...t){if(n=wn(n),arguments.length===1&&(e=Um.newId()),VI("doc","path",e),n instanceof ff){const s=Lt.fromString(e,...t);return zA(s),new hn(n,null,new Fe(s))}{if(!(n instanceof hn||n instanceof $i))throw new Ee(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Lt.fromString(e,...t));return zA(s),new hn(n.firestore,n instanceof $i?n.converter:null,new Fe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="AsyncQueue";class Bw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new NC(this,"async_queue_retry"),this._c=()=>{const s=Ap();s&&Ie(Lw,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Ap();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ap();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Xr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!cl(e))throw e;Ie(Lw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,li("INTERNAL UNHANDLED ERROR: ",Mw(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=rv.createAndSchedule(this,e,t,s,(i=>this.hc(i)));return this.tc.push(r),r}uc(){this.nc&&je(47125,{Pc:Mw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Mw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Nu extends ff{constructor(e,t,s,r){super(e,t,s,r),this.type="firestore",this._queue=new Bw,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Bw(e),this._firestoreClient=void 0,await e}}}function h3(n,e){const t=typeof n=="object"?n:eu(),s=typeof n=="string"?n:oh,r=Yo(t,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=UO("firestore");i&&u3(r,...i)}return r}function cv(n){if(n._terminated)throw new Ee(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||f3(n),n._firestoreClient}function f3(n){const e=n._freezeSettings(),t=(function(r,i,o,a){return new BF(r,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,eT(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new i3(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Us(Qn.fromBase64String(e))}catch(t){throw new Ee(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Us(Qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Us._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Tu(e,Us._jsonSchema))return Us.fromBase64String(e.bytes)}}Us._jsonSchemaVersion="firestore/bytes/1.0",Us._jsonSchema={type:An("string",Us._jsonSchemaVersion),bytes:An("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ee(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ee(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ee(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ct(this._lat,e._lat)||ct(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ir._jsonSchemaVersion}}static fromJSON(e){if(Tu(e,Ir._jsonSchema))return new Ir(e.latitude,e.longitude)}}Ir._jsonSchemaVersion="firestore/geoPoint/1.0",Ir._jsonSchema={type:An("string",Ir._jsonSchemaVersion),latitude:An("number"),longitude:An("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Cr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Tu(e,Cr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Cr(e.vectorValues);throw new Ee(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Cr._jsonSchemaVersion="firestore/vectorValue/1.0",Cr._jsonSchema={type:An("string",Cr._jsonSchemaVersion),vectorValues:An("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3=/^__.*__$/;class g3{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new so(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pu(e,this.data,t,this.fieldTransforms)}}class nT{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new so(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je(40011,{Ac:n})}}class dv{constructor(e,t,s,r,i,o){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new dv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return mh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(sT(this.Ac)&&p3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class m3{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||uf(e)}Cc(e,t,s,r=!1){return new dv({Ac:e,methodName:t,Dc:s,path:Gn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hv(n){const e=n._freezeSettings(),t=uf(n._databaseId);return new m3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function v3(n,e,t,s,r,i={}){const o=n.Cc(i.merge||i.mergeFields?2:0,e,t,r);fv("Data must be an object, but it was:",o,s);const a=rT(s,o);let l,c;if(i.merge)l=new Os(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const p=Bg(e,f,t);if(!o.contains(p))throw new Ee(oe.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);oT(d,p)||d.push(p)}l=new Os(d),c=o.fieldTransforms.filter((f=>l.covers(f.field)))}else l=null,c=o.fieldTransforms;return new g3(new bs(a),l,c)}class gf extends uv{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gf}}function y3(n,e,t,s){const r=n.Cc(1,e,t);fv("Data must be an object, but it was:",r,s);const i=[],o=bs.empty();no(s,((l,c)=>{const d=pv(e,l,t);c=wn(c);const f=r.yc(d);if(c instanceof gf)i.push(d);else{const p=Du(c,f);p!=null&&(i.push(d),o.set(d,p))}}));const a=new Os(i);return new nT(o,a,r.fieldTransforms)}function A3(n,e,t,s,r,i){const o=n.Cc(1,e,t),a=[Bg(e,s,t)],l=[r];if(i.length%2!=0)throw new Ee(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Bg(e,i[p])),l.push(i[p+1]);const c=[],d=bs.empty();for(let p=a.length-1;p>=0;--p)if(!oT(c,a[p])){const m=a[p];let _=l[p];_=wn(_);const y=o.yc(m);if(_ instanceof gf)c.push(m);else{const A=Du(_,y);A!=null&&(c.push(m),d.set(m,A))}}const f=new Os(c);return new nT(d,f,o.fieldTransforms)}function w3(n,e,t,s=!1){return Du(t,n.Cc(s?4:3,e))}function Du(n,e){if(iT(n=wn(n)))return fv("Unsupported field value:",e,n),rT(n,e);if(n instanceof uv)return(function(s,r){if(!sT(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const i=[];let o=0;for(const a of s){let l=Du(a,r.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(n,e)}return(function(s,r){if((s=wn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return i4(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Ft.fromDate(s);return{timestampValue:hh(r.serializer,i)}}if(s instanceof Ft){const i=new Ft(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:hh(r.serializer,i)}}if(s instanceof Ir)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Us)return{bytesValue:_C(r.serializer,s._byteString)};if(s instanceof hn){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:qm(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Cr)return(function(o,a){return{mapValue:{fields:{[qI]:{stringValue:JI},[ah]:{arrayValue:{values:o.toArray().map((c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return zm(a.serializer,c)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${ef(s)}`)})(n,e)}function rT(n,e){const t={};return GI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):no(n,((s,r)=>{const i=Du(r,e.mc(s));i!=null&&(t[s]=i)})),{mapValue:{fields:t}}}function iT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ft||n instanceof Ir||n instanceof Us||n instanceof hn||n instanceof uv||n instanceof Cr)}function fv(n,e,t){if(!iT(t)||!$I(t)){const s=ef(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function Bg(n,e,t){if((e=wn(e))instanceof pf)return e._internalPath;if(typeof e=="string")return pv(n,e);throw mh("Field path arguments must be of type string or ",n,!1,void 0,t)}const _3=new RegExp("[~\\*/\\[\\]]");function pv(n,e,t){if(e.search(_3)>=0)throw mh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new pf(...e.split("."))._internalPath}catch{throw mh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function mh(n,e,t,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new Ee(oe.INVALID_ARGUMENT,a+n+l)}function oT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,t,s,r,i){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new E3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(gv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class E3 extends aT{data(){return super.data()}}function gv(n,e){return typeof e=="string"?pv(n,e):e instanceof pf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ee(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mv{}class I3 extends mv{}function C3(n,e,...t){let s=[];e instanceof mv&&s.push(e),s=s.concat(t),(function(i){const o=i.filter((l=>l instanceof vv)).length,a=i.filter((l=>l instanceof mf)).length;if(o>1||o>0&&a>0)throw new Ee(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const r of s)n=r._apply(n);return n}class mf extends I3{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new mf(e,t,s)}_apply(e){const t=this._parse(e);return lT(e._query,t),new dl(e.firestore,e.converter,Cg(e._query,t))}_parse(e){const t=hv(e.firestore);return(function(i,o,a,l,c,d,f){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Ee(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Uw(f,d);const _=[];for(const y of f)_.push(Fw(l,i,y));p={arrayValue:{values:_}}}else p=Fw(l,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Uw(f,d),p=w3(a,o,f,d==="in"||d==="not-in");return yn.create(c,d,p)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function T3(n,e,t){const s=e,r=gv("where",n);return mf._create(r,s,t)}class vv extends mv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vv(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:rr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,i){let o=r;const a=i.getFlattenedFilters();for(const l of a)lT(o,l),o=Cg(o,l)})(e._query,t),new dl(e.firestore,e.converter,Cg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Fw(n,e,t){if(typeof(t=wn(t))=="string"){if(t==="")throw new Ee(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rC(e)&&t.indexOf("/")!==-1)throw new Ee(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Lt.fromString(t));if(!Fe.isDocumentKey(s))throw new Ee(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return tw(n,new Fe(s))}if(t instanceof hn)return tw(n,t._key);throw new Ee(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ef(t)}.`)}function Uw(n,e){if(!Array.isArray(n)||n.length===0)throw new Ee(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lT(n,e){const t=(function(r,i){for(const o of r)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ee(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class S3{convertValue(e,t="none"){switch(Yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw je(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return no(e,((r,i)=>{s[r]=this.convertValue(i,t)})),s}convertVectorValue(e){const t=e.fields?.[ah].arrayValue?.values?.map((s=>cn(s.doubleValue)));return new Cr(t)}convertGeoPoint(e){return new Ir(cn(e.latitude),cn(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=sf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ru(e));default:return null}}convertTimestamp(e){const t=qi(e);return new Ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Lt.fromString(e);It(SC(s),9688,{name:e});const r=new iu(s.get(1),s.get(3)),i=new Fe(s.popFirst(5));return r.isEqual(t)||li(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class vc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bo extends aT{constructor(e,t,s,r,i,o){super(e,t,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(gv("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Bo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Bo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bo._jsonSchema={type:An("string",Bo._jsonSchemaVersion),bundleSource:An("string","DocumentSnapshot"),bundleName:An("string"),bundle:An("string")};class xd extends Bo{data(e={}){return super.data(e)}}class Oa{constructor(e,t,s,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new vc(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new xd(this._firestore,this._userDataWriter,s.key,s,new vc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ee(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((a=>{const l=new xd(r._firestore,r._userDataWriter,a.doc.key,a.doc,new vc(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((a=>i||a.type!==3)).map((a=>{const l=new xd(r._firestore,r._userDataWriter,a.doc.key,a.doc,new vc(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:R3(a.type),doc:l,oldIndex:c,newIndex:d}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Oa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Um.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],r=[];return this.docs.forEach((i=>{i._document!==null&&(t.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function R3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(n){n=ci(n,hn);const e=ci(n.firestore,Nu);return l3(cv(e),n._key).then((t=>N3(e,n,t)))}Oa._jsonSchemaVersion="firestore/querySnapshot/1.0",Oa._jsonSchema={type:An("string",Oa._jsonSchemaVersion),bundleSource:An("string","QuerySnapshot"),bundleName:An("string"),bundle:An("string")};class cT extends S3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Us(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hn(this.firestore,null,t)}}function x3(n){n=ci(n,dl);const e=ci(n.firestore,Nu),t=cv(e),s=new cT(e);return b3(n._query),c3(t,n._query).then((r=>new Oa(e,s,n,r)))}function k3(n,e,t){n=ci(n,hn);const s=ci(n.firestore,Nu),r=P3(n.converter,e);return uT(s,[v3(hv(s),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Er.none())])}function Mg(n,e,t,...s){n=ci(n,hn);const r=ci(n.firestore,Nu),i=hv(r);let o;return o=typeof(e=wn(e))=="string"||e instanceof pf?A3(i,"updateDoc",n._key,e,t,s):y3(i,"updateDoc",n._key,e),uT(r,[o.toMutation(n._key,Er.exists(!0))])}function uT(n,e){return(function(s,r){const i=new Xr;return s.asyncQueue.enqueueAndForget((async()=>JU(await a3(s),r,i))),i.promise})(cv(n),e)}function N3(n,e,t){const s=t.docs.get(e._key),r=new cT(n);return new Bo(n,r,e._key,s,new vc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){al=r})(il),Sr(new sr("firestore",((s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),a=new Nu(new vF(s.getProvider("auth-internal")),new wF(o,s.getProvider("app-check-internal")),(function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ee(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new iu(c.options.projectId,d)})(o,r),o);return i={useFetchStreams:t,...i},a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),Hs(HA,GA,e),Hs(HA,GA,"esm2020")})();const dT="@firebase/installations",yv="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT=1e4,fT=`w:${yv}`,pT="FIS_v2",D3="https://firebaseinstallations.googleapis.com/v1",O3=3600*1e3,L3="installations",B3="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},zo=new Jo(L3,B3,M3);function gT(n){return n instanceof or&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT({projectId:n}){return`${D3}/projects/${n}/installations`}function vT(n){return{token:n.token,requestStatus:2,expiresIn:U3(n.expiresIn),creationTime:Date.now()}}async function yT(n,e){const s=(await e.json()).error;return zo.create("request-failed",{requestName:n,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function AT({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function F3(n,{refreshToken:e}){const t=AT(n);return t.append("Authorization",V3(e)),t}async function wT(n){const e=await n();return e.status>=500&&e.status<600?n():e}function U3(n){return Number(n.replace("s","000"))}function V3(n){return`${pT} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $3({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const s=mT(n),r=AT(n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={fid:t,authVersion:pT,appId:n.appId,sdkVersion:fT},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await wT(()=>fetch(s,a));if(l.ok){const c=await l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:vT(c.authToken)}}else throw await yT("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3=/^[cdef][\w-]{21}$/,Fg="";function Q3(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=j3(n);return G3.test(t)?t:Fg}catch{return Fg}}function j3(n){return H3(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET=new Map;function bT(n,e){const t=vf(n);IT(t,e),z3(t,e)}function IT(n,e){const t=ET.get(n);if(t)for(const s of t)s(e)}function z3(n,e){const t=W3();t&&t.postMessage({key:n,fid:e}),K3()}let xo=null;function W3(){return!xo&&"BroadcastChannel"in self&&(xo=new BroadcastChannel("[Firebase] FID Change"),xo.onmessage=n=>{IT(n.data.key,n.data.fid)}),xo}function K3(){ET.size===0&&xo&&(xo.close(),xo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3="firebase-installations-database",J3=1,Wo="firebase-installations-store";let _p=null;function Av(){return _p||(_p=qb(q3,J3,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Wo)}}})),_p}async function vh(n,e){const t=vf(n),r=(await Av()).transaction(Wo,"readwrite"),i=r.objectStore(Wo),o=await i.get(t);return await i.put(e,t),await r.done,(!o||o.fid!==e.fid)&&bT(n,e.fid),e}async function CT(n){const e=vf(n),s=(await Av()).transaction(Wo,"readwrite");await s.objectStore(Wo).delete(e),await s.done}async function yf(n,e){const t=vf(n),r=(await Av()).transaction(Wo,"readwrite"),i=r.objectStore(Wo),o=await i.get(t),a=e(o);return a===void 0?await i.delete(t):await i.put(a,t),await r.done,a&&(!o||o.fid!==a.fid)&&bT(n,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wv(n){let e;const t=await yf(n.appConfig,s=>{const r=Y3(s),i=X3(n,r);return e=i.registrationPromise,i.installationEntry});return t.fid===Fg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function Y3(n){const e=n||{fid:Q3(),registrationStatus:0};return TT(e)}function X3(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(zo.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=Z3(n,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:eV(n)}:{installationEntry:e}}async function Z3(n,e){try{const t=await $3(n,e);return vh(n.appConfig,t)}catch(t){throw gT(t)&&t.customData.serverCode===409?await CT(n.appConfig):await vh(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function eV(n){let e=await Vw(n.appConfig);for(;e.registrationStatus===1;)await _T(100),e=await Vw(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await wv(n);return s||t}return e}function Vw(n){return yf(n,e=>{if(!e)throw zo.create("installation-not-found");return TT(e)})}function TT(n){return tV(n)?{fid:n.fid,registrationStatus:0}:n}function tV(n){return n.registrationStatus===1&&n.registrationTime+hT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nV({appConfig:n,heartbeatServiceProvider:e},t){const s=sV(n,t),r=F3(n,t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={installation:{sdkVersion:fT,appId:n.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await wT(()=>fetch(s,a));if(l.ok){const c=await l.json();return vT(c)}else throw await yT("Generate Auth Token",l)}function sV(n,{fid:e}){return`${mT(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _v(n,e=!1){let t;const s=await yf(n.appConfig,i=>{if(!ST(i))throw zo.create("not-registered");const o=i.authToken;if(!e&&oV(o))return i;if(o.requestStatus===1)return t=rV(n,e),i;{if(!navigator.onLine)throw zo.create("app-offline");const a=lV(i);return t=iV(n,a),a}});return t?await t:s.authToken}async function rV(n,e){let t=await $w(n.appConfig);for(;t.authToken.requestStatus===1;)await _T(100),t=await $w(n.appConfig);const s=t.authToken;return s.requestStatus===0?_v(n,e):s}function $w(n){return yf(n,e=>{if(!ST(e))throw zo.create("not-registered");const t=e.authToken;return cV(t)?{...e,authToken:{requestStatus:0}}:e})}async function iV(n,e){try{const t=await nV(n,e),s={...e,authToken:t};return await vh(n.appConfig,s),t}catch(t){if(gT(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await CT(n.appConfig);else{const s={...e,authToken:{requestStatus:0}};await vh(n.appConfig,s)}throw t}}function ST(n){return n!==void 0&&n.registrationStatus===2}function oV(n){return n.requestStatus===2&&!aV(n)}function aV(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+O3}function lV(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function cV(n){return n.requestStatus===1&&n.requestTime+hT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uV(n){const e=n,{installationEntry:t,registrationPromise:s}=await wv(e);return s?s.catch(console.error):_v(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dV(n,e=!1){const t=n;return await hV(t),(await _v(t,e)).token}async function hV(n){const{registrationPromise:e}=await wv(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(n){if(!n||!n.options)throw Ep("App Configuration");if(!n.name)throw Ep("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Ep(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Ep(n){return zo.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="installations",pV="installations-internal",gV=n=>{const e=n.getProvider("app").getImmediate(),t=fV(e),s=Yo(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},mV=n=>{const e=n.getProvider("app").getImmediate(),t=Yo(e,PT).getImmediate();return{getId:()=>uV(t),getToken:r=>dV(t,r)}};function vV(){Sr(new sr(PT,gV,"PUBLIC")),Sr(new sr(pV,mV,"PRIVATE"))}vV();Hs(dT,yv);Hs(dT,yv,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh="analytics",yV="firebase_id",AV="origin",wV=60*1e3,_V="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ev="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new Jh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ls=new Jo("analytics","Analytics",EV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(n){if(!n.startsWith(Ev)){const e=Ls.create("invalid-gtag-resource",{gtagURL:n});return ps.warn(e.message),""}return n}function RT(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function IV(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function CV(n,e){const t=IV("firebase-js-sdk-policy",{createScriptURL:bV}),s=document.createElement("script"),r=`${Ev}?l=${n}&id=${e}`;s.src=t?t?.createScriptURL(r):r,s.async=!0,document.head.appendChild(s)}function TV(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function SV(n,e,t,s,r,i){const o=s[r];try{if(o)await e[o];else{const l=(await RT(t)).find(c=>c.measurementId===r);l&&await e[l.appId]}}catch(a){ps.error(a)}n("config",r,i)}async function PV(n,e,t,s,r){try{let i=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=await RT(t);for(const l of o){const c=a.find(f=>f.measurementId===l),d=c&&e[c.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),n("event",s,r||{})}catch(i){ps.error(i)}}function RV(n,e,t,s){async function r(i,...o){try{if(i==="event"){const[a,l]=o;await PV(n,e,t,a,l)}else if(i==="config"){const[a,l]=o;await SV(n,e,t,s,a,l)}else if(i==="consent"){const[a,l]=o;n("consent",a,l)}else if(i==="get"){const[a,l,c]=o;n("get",a,l,c)}else if(i==="set"){const[a]=o;n("set",a)}else n(i,...o)}catch(a){ps.error(a)}}return r}function xV(n,e,t,s,r){let i=function(...o){window[s].push(arguments)};return window[r]&&typeof window[r]=="function"&&(i=window[r]),window[r]=RV(i,n,e,t),{gtagCore:i,wrappedGtag:window[r]}}function kV(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Ev)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=30,DV=1e3;class OV{constructor(e={},t=DV){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const xT=new OV;function LV(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function BV(n){const{appId:e,apiKey:t}=n,s={method:"GET",headers:LV(t)},r=_V.replace("{app-id}",e),i=await fetch(r,s);if(i.status!==200&&i.status!==304){let o="";try{const a=await i.json();a.error?.message&&(o=a.error.message)}catch{}throw Ls.create("config-fetch-failed",{httpStatus:i.status,responseMessage:o})}return i.json()}async function MV(n,e=xT,t){const{appId:s,apiKey:r,measurementId:i}=n.options;if(!s)throw Ls.create("no-app-id");if(!r){if(i)return{measurementId:i,appId:s};throw Ls.create("no-api-key")}const o=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new VV;return setTimeout(async()=>{a.abort()},wV),kT({appId:s,apiKey:r,measurementId:i},o,a,e)}async function kT(n,{throttleEndTimeMillis:e,backoffCount:t},s,r=xT){const{appId:i,measurementId:o}=n;try{await FV(s,e)}catch(a){if(o)return ps.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${a?.message}]`),{appId:i,measurementId:o};throw a}try{const a=await BV(n);return r.deleteThrottleMetadata(i),a}catch(a){const l=a;if(!UV(l)){if(r.deleteThrottleMetadata(i),o)return ps.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:i,measurementId:o};throw a}const c=Number(l?.customData?.httpStatus)===503?pA(t,r.intervalMillis,NV):pA(t,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+c,backoffCount:t+1};return r.setThrottleMetadata(i,d),ps.debug(`Calling attemptFetch again in ${c} millis`),kT(n,d,s,r)}}function FV(n,e){return new Promise((t,s)=>{const r=Math.max(e-Date.now(),0),i=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(i),s(Ls.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function UV(n){if(!(n instanceof or)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class VV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function $V(n,e,t,s,r){if(r&&r.global){n("event",t,s);return}else{const i=await e,o={...s,send_to:i};n("event",t,o)}}async function HV(n,e,t,s){if(s&&s.global){const r={};for(const i of Object.keys(t))r[`user_properties.${i}`]=t[i];return n("set",r),Promise.resolve()}else{const r=await e;n("config",r,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GV(){if(jb())try{await zb()}catch(n){return ps.warn(Ls.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return ps.warn(Ls.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function QV(n,e,t,s,r,i,o){const a=MV(n);a.then(p=>{t[p.measurementId]=p.appId,n.options.measurementId&&p.measurementId!==n.options.measurementId&&ps.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>ps.error(p)),e.push(a);const l=GV().then(p=>{if(p)return s.getId()}),[c,d]=await Promise.all([a,l]);kV(i)||CV(i,c.measurementId),r("js",new Date);const f=o?.config??{};return f[AV]="firebase",f.update=!0,d!=null&&(f[yV]=d),r("config",c.measurementId,f),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e){this.app=e}_delete(){return delete La[this.app.options.appId],Promise.resolve()}}let La={},Hw=[];const Gw={};let bp="dataLayer",zV="gtag",Qw,bv,jw=!1;function WV(){const n=[];if(Qb()&&n.push("This is a browser extension environment."),JO()||n.push("Cookies are not available."),n.length>0){const e=n.map((s,r)=>`(${r+1}) ${s}`).join(" "),t=Ls.create("invalid-analytics-context",{errorInfo:e});ps.warn(t.message)}}function KV(n,e,t){WV();const s=n.options.appId;if(!s)throw Ls.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)ps.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ls.create("no-api-key");if(La[s]!=null)throw Ls.create("already-exists",{id:s});if(!jw){TV(bp);const{wrappedGtag:i,gtagCore:o}=xV(La,Hw,Gw,bp,zV);bv=i,Qw=o,jw=!0}return La[s]=QV(n,Hw,Gw,e,Qw,bp,t),new jV(n)}function qV(n=eu()){n=wn(n);const e=Yo(n,yh);return e.isInitialized()?e.getImmediate():JV(n)}function JV(n,e={}){const t=Yo(n,yh);if(t.isInitialized()){const r=t.getImmediate();if(Wi(e,t.getOptions()))return r;throw Ls.create("already-initialized")}return t.initialize({options:e})}function YV(n,e,t){n=wn(n),HV(bv,La[n.app.options.appId],e,t).catch(s=>ps.error(s))}function XV(n,e,t,s){n=wn(n),$V(bv,La[n.app.options.appId],e,t,s).catch(r=>ps.error(r))}const zw="@firebase/analytics",Ww="0.10.19";function ZV(){Sr(new sr(yh,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return KV(s,r,t)},"PUBLIC")),Sr(new sr("analytics-internal",n,"PRIVATE")),Hs(zw,Ww),Hs(zw,Ww,"esm2020");function n(e){try{const t=e.getProvider(yh).getImmediate();return{logEvent:(s,r,i)=>XV(t,s,r,i),setUserProperties:(s,r)=>YV(t,s,r)}}catch(t){throw Ls.create("interop-component-reg-failed",{reason:t})}}}ZV();const yc={apiKey:"AIzaSyCwvJ8cUWLZPZ26i1deIAXnoLuzToIcB70",authDomain:"tuldung.firebaseapp.com",projectId:"tuldung",storageBucket:"tuldung.firebasestorage.app",messagingSenderId:"1086524417813",appId:"1:1086524417813:web:8199da4b7cebcaffc86b1c",measurementId:"G-EGV6XDKG9R"},e6=n=>{const t=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"].filter(s=>!n[s]);return t.length>0?(console.error("=== Firebase   ==="),console.error(" :",t),console.error("   . .env  ."),console.error(" :    ! (npm run dev)"),!1):!0};let qs=null;e6(yc)||console.error("Firebase   .");try{yc.apiKey&&yc.authDomain&&yc.projectId?wA().length>0?qs=eu():qs=Jb(yc):(console.warn(" Firebase    . Firebase    ."),console.warn(" .env  Firebase     ."),qs=null)}catch(n){if(console.error("Firebase    :",n),n.code==="app/duplicate-app"||n.message?.includes("duplicate"))try{qs=eu()}catch(e){console.error("    :",e);const t=wA();t.length>0?qs=t[0]:(console.error("Firebase    ."),qs=null)}else console.error("Firebase  :",n.message),qs=null}let Tt=null,us=null;if(qs)try{Tt=fF(qs),us=h3(qs),Tt&&tM(Tt,EI).then(()=>{}).catch(n=>{console.error("Firebase Auth   :",n)})}catch(n){console.error(" Firebase Auth/Firestore  :",n)}else console.error(" Firebase   . auth db   .");let NT=null;if(typeof window<"u")try{NT=qV(qs)}catch(n){n.code==="analytics/already-initialized"||n.message?.includes("already")?console.log("Analytics  ."):console.warn("Analytics  :",n.message||n)}new Gr;const DT=async(n,e={})=>{const t=Lo(us,"users",n.uid);if(!(await el(t)).exists()){const r=i=>{const o=i.toString().split("").reduce((d,f)=>(d<<5)-d+f.charCodeAt(0),0),a="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let l="",c=Math.abs(o);for(let d=0;d<6;d++)l+=a[c%a.length],c=Math.floor(c/a.length);return l};await k3(t,{email:n.email,displayName:n.displayName||e.name||n.email?.split("@")[0],photoURL:n.photoURL,phone:e.phone||"",createdAt:new Date().toISOString(),inviteCode:e.inviteCode||r(n.uid),referrals:e.referrals||[],referredBy:e.referredBy||null,referredAt:e.referredAt||null,referralStats:e.referralStats||{totalReferrals:0,rewardsReceived:0},...e,gameData:{level:1,coins:0,totalCoin:0,catFragments:50,nftCount:0,miningLevel:1,huntingLevel:1,explorationLevel:1,productionLevel:1,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}})}};let Ip=!1;const t6=async()=>{if(Ip)return Tt.currentUser?{success:!0,user:Tt.currentUser}:{success:!1,error:" "};try{console.log("handleRedirectResult  - getRedirectResult  ...");const n=await RM(Tt);if(console.log("getRedirectResult :",n?" ":"null"),Ip=!0,n&&n.user){const e=n.user;return console.log("  -  :",e.email,e.uid),await DT(e),console.log("Firestore  "),{success:!0,user:e}}return Tt.currentUser?(console.log("   Firebase   :",Tt.currentUser.email),{success:!0,user:Tt.currentUser}):(console.log("  "),{success:!1,error:"  ."})}catch(n){return Ip=!0,console.error("   :",n),Tt.currentUser?(console.log("  Firebase   :",Tt.currentUser.email),{success:!0,user:Tt.currentUser}):{success:!1,error:n.message}}},Ug=async n=>{try{const e=Lo(us,"users",n),t=await el(e);return t.exists()?t.data():null}catch(e){return console.error("   :",e),null}},n6=Object.freeze(Object.defineProperty({__proto__:null,get analytics(){return NT},get auth(){return Tt},get db(){return us},getUserGameData:Ug,handleRedirectResult:t6,saveUserToFirestore:DT},Symbol.toStringTag,{value:"Module"})),s6={__name:"App",setup(n){const e=Pn(),t=on();Nt(async()=>{try{const{handleGoogleRedirect:l}=await md(async()=>{const{handleGoogleRedirect:d}=await import("./firebaseAuth-5SUwgUGL.js");return{handleGoogleRedirect:d}},[]),c=await l();if(c&&c.success&&c.user){console.log("App.vue: Google  :",c.user.email);let d=null;try{const f=localStorage.getItem("currentUser");f&&(d=JSON.parse(f))}catch{try{const p=sessionStorage.getItem("currentUser");p&&(d=JSON.parse(p))}catch(p){console.error("   :",p)}}(!d||!d.id)&&(localStorage.setItem("currentUser",JSON.stringify(c.user)),sessionStorage.setItem("currentUser",JSON.stringify(c.user)),console.log("App.vue:   ")),t.loadCurrentUser(),(e.currentRoute.value.path==="/login"||e.currentRoute.value.path==="/signup")&&(console.log("App.vue:    "),e.push("/home"));return}}catch{}if(t.loadCurrentUser(),Tt&&Tt.currentUser&&!dt())try{const{getUserGameData:l}=await md(async()=>{const{getUserGameData:p}=await Promise.resolve().then(()=>n6);return{getUserGameData:p}},void 0),{convertFirebaseUserToAppUser:c}=await md(async()=>{const{convertFirebaseUserToAppUser:p}=await import("./firebaseAuth-5SUwgUGL.js");return{convertFirebaseUserToAppUser:p}},[]),d=await l(Tt.currentUser.uid),f=c(Tt.currentUser,d?.gameData);localStorage.setItem("currentUser",JSON.stringify(f)),sessionStorage.setItem("currentUser",JSON.stringify(f)),t.loadCurrentUser(),console.log("App.vue: Firebase Auth    :",f.email)}catch(l){console.error("App.vue:   :",l)}const a=dt();if(a&&a.loginType==="wallet"&&a.walletAddress)try{const l=await t.checkWalletStatus();l.connected&&console.log("App.vue:    :",l.address),t.setupWalletListeners()}catch(l){console.error("App.vue:    :",l)}});const s=U(null),r=U(!1),i=()=>{const a=localStorage.getItem("soundEnabled");return a!==null?a==="true":!0},o=()=>{s.value&&(i()?r.value||s.value.play().then(()=>{r.value=!0}).catch(()=>{}):(s.value.pause(),r.value=!1))};return Nt(()=>{try{s.value=new Audio,s.value.src=new URL("@/assets/audio/bgm.mp3",import.meta.url).href,s.value.loop=!0,s.value.volume=.5,o();const a=()=>{s.value&&i()&&!r.value&&s.value.play().then(()=>{r.value=!0}).catch(()=>{})};document.addEventListener("click",a,{once:!0}),document.addEventListener("touchstart",a,{once:!0}),window.addEventListener("soundSettingChanged",o)}catch{console.log("BGM    .")}}),rn(()=>{s.value&&(s.value.pause(),s.value=null),window.removeEventListener("soundSettingChanged",o)}),(a,l)=>{const c=rP("router-view");return L(),y1(c)}}},r6="/tdl/assets/tdl_splashLogo-b8p6ictM.png",i6="/tdl/assets/tdl_splash_bg-B78B8oeM.png",Qt=(n,e)=>{const t=n.__vccOpts||n;for(const[s,r]of e)t[s]=r;return t},o6={class:"loading-screen"},a6={class:"loading-bar-container"},l6={class:"loading-bar-track"},c6={__name:"LoadingScreen",setup(n){const e=Pn();on();const t=U(0);return Nt(()=>{const i=.5333333333333333,o=setInterval(()=>{t.value+=i,t.value>=100&&(t.value=100,clearInterval(o),setTimeout(()=>{e.push("/main")},200))},16)}),(s,r)=>(L(),B("div",o6,[r[0]||(r[0]=h("div",{class:"logo-top"},[h("img",{src:r6,alt:"TDL Logo",class:"splash-logo"})],-1)),h("div",a6,[h("div",l6,[h("div",{class:"loading-bar-fill",style:St({width:t.value+"%"})},null,4)])]),r[1]||(r[1]=h("div",{class:"splash-bg"},[h("img",{src:i6,alt:"Splash Background",class:"splash-bg-image"})],-1))]))}},u6=Qt(c6,[["__scopeId","data-v-8511a0e0"]]),hl="/tdl/assets/cat1-B_B8VE2s.png",fl="/tdl/assets/cat10-B8AgbljH.png",pl="/tdl/assets/cat11-0fJ86MBw.png",gl="/tdl/assets/cat12-9jWhGICw.png",ml="/tdl/assets/cat13-CHa4qUOi.png",vl="/tdl/assets/cat14-CLrryeLM.png",yl="/tdl/assets/cat15-CCtjZj8M.png",Al="/tdl/assets/cat16-CPcR6OS6.png",wl="/tdl/assets/cat17-EO7rjjtM.png",_l="/tdl/assets/cat18-BGDiOePY.png",El="/tdl/assets/cat19-DxCDtOnA.png",bl="/tdl/assets/cat2-0Y4nM6HW.png",Il="/tdl/assets/cat20-Bz9cd08a.png",Cl="/tdl/assets/cat21-ECTsze2s.png",Tl="/tdl/assets/cat22-BvGXhyri.png",Sl="/tdl/assets/cat23-DqU2B_M0.png",Pl="/tdl/assets/cat24-7cWYLYDN.png",Rl="/tdl/assets/cat25-Cy0mQl6B.png",xl="/tdl/assets/cat26-Bk4tHCwE.png",kl="/tdl/assets/cat27-CvtmCEXM.png",Nl="/tdl/assets/cat28-B9s1wmgo.png",Dl="/tdl/assets/cat29-D_79HmBj.png",Ol="/tdl/assets/cat3-Dp7OJMB9.png",Ll="/tdl/assets/cat30-Cx-HRp0m.png",Bl="/tdl/assets/cat4-DHiuXgwB.png",Ml="/tdl/assets/cat5-BvXrfJAO.png",Fl="/tdl/assets/cat6-DZOiQoo1.png",Ul="/tdl/assets/cat7-CeDKF7mR.png",Vl="/tdl/assets/cat8-mjRhb3fS.png",$l="/tdl/assets/cat9-Bzb-Egme.png",Hl="/tdl/assets/catPoint-t6vwZH27.png",Gl="/tdl/assets/tabIcon5-CFF9Ua2B.png",Ql="/tdl/assets/catProfile01-gY0Djz81.png",jl="/tdl/assets/catProfile02-Cesbpkj5.png",zl="/tdl/assets/cat_ico-Csdt_Q01.png";async function Af(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(s)).map(o=>o.toString(16).padStart(2,"0")).join("")}async function d6(n,e){return await Af(n)===e}const h6="/tdl/assets/urerTown-BuaGLkQ2.png",f6={class:"login-screen"},p6={class:"login-title"},g6={class:"urer-town-container"},m6=["src"],v6={class:"cat-character-wrapper"},y6=["src"],A6={class:"input-group"},w6={class:"input-container"},_6=["placeholder"],E6={class:"input-group"},b6={class:"input-container"},I6=["placeholder"],C6=["disabled"],T6={key:0,class:"btn-content loginBt"},S6={key:1,class:"btn-content"},P6={key:2,class:"btn-content"},R6={class:"signup-link"},x6={__name:"LoginScreen",setup(n){pe(()=>!!Tt);const e=Pn(),t=on(),{setWalletConnected:s,setLoading:r}=t,i=U(!1),o=U(!1);U(!1),U("");const a=U(""),l=pe(()=>ms()),c=()=>{e.push("/signup")},d=U(""),f=U(""),p=async _=>{if(_.preventDefault(),!d.value.trim()||!f.value.trim()){alert("Please enter both email and password.");return}i.value=!0,r(!0);const y=JSON.parse(localStorage.getItem("users")||"[]"),A=y.find(w=>w.email===d.value);setTimeout(async()=>{if(i.value=!1,A){let w=!1;try{if(A.password&&A.password.length<64){if(w=A.password===f.value,w){const I=await Af(f.value);A.password=I;const C=y.findIndex(M=>M.id===A.id);C!==-1&&(y[C]=A,localStorage.setItem("users",JSON.stringify(y)))}}else w=await d6(f.value,A.password)}catch(I){console.error("Password verification error:",I),r(!1),alert("An error occurred during login. Please try again.");return}if(w){o.value=!0;const{password:I,...C}=A;localStorage.setItem("currentUser",JSON.stringify(C)),sessionStorage.setItem("currentUser",JSON.stringify(C)),s(A.email,`${A.gameData?.coins||0} coins`),r(!1),setTimeout(()=>{e.push("/home")},1e3)}else r(!1),alert("Email or password is incorrect.")}else r(!1),alert("Email or password is incorrect.")},2e3)},m=()=>{e.push("/forgot-password")};return Nt(()=>{r(!1);const _=Math.floor(Math.random()*30)+1;try{a.value=new URL(Object.assign({"../assets/img/cat1.png":hl,"../assets/img/cat10.png":fl,"../assets/img/cat11.png":pl,"../assets/img/cat12.png":gl,"../assets/img/cat13.png":ml,"../assets/img/cat14.png":vl,"../assets/img/cat15.png":yl,"../assets/img/cat16.png":Al,"../assets/img/cat17.png":wl,"../assets/img/cat18.png":_l,"../assets/img/cat19.png":El,"../assets/img/cat2.png":bl,"../assets/img/cat20.png":Il,"../assets/img/cat21.png":Cl,"../assets/img/cat22.png":Tl,"../assets/img/cat23.png":Sl,"../assets/img/cat24.png":Pl,"../assets/img/cat25.png":Rl,"../assets/img/cat26.png":xl,"../assets/img/cat27.png":kl,"../assets/img/cat28.png":Nl,"../assets/img/cat29.png":Dl,"../assets/img/cat3.png":Ol,"../assets/img/cat30.png":Ll,"../assets/img/cat4.png":Bl,"../assets/img/cat5.png":Ml,"../assets/img/cat6.png":Fl,"../assets/img/cat7.png":Ul,"../assets/img/cat8.png":Vl,"../assets/img/cat9.png":$l,"../assets/img/catPoint.png":Hl,"../assets/img/catPointPlus.png":Gl,"../assets/img/catProfile01.png":Ql,"../assets/img/catProfile02.png":jl,"../assets/img/cat_ico.png":zl})[`../assets/img/cat${_}.png`],import.meta.url).href}catch(I){console.error("   :",I);try{a.value=new URL("/tdl/assets/cat1-B_B8VE2s.png",import.meta.url).href}catch(C){console.error("   :",C)}}const y=dt(),A=y?.loginType==="guest"||y?.email?.includes("@guest.com")||y?.email==="guest@tdl.com";if(y&&y.id&&!A){e.push("/home");return}const w=document.querySelector(".loginCont");w&&(w.style.opacity="0",w.style.transform="translateY(30px)",setTimeout(()=>{w.style.transition="all 0.6s ease",w.style.opacity="1",w.style.transform="translateY(0)"},100))}),(_,y)=>(L(),B("div",f6,[h("h1",p6,E(l.value.login),1),h("div",g6,[h("img",{src:Me(h6),alt:"Urer Town",class:"urer-town-image"},null,8,m6),h("div",v6,[h("img",{src:a.value,alt:"Cat Character",class:"cat-character-image"},null,8,y6)])]),h("form",{onSubmit:p,class:"login-form"},[h("div",A6,[h("div",w6,[y[2]||(y[2]=h("span",{class:"input-text-label"},"Email",-1)),Wt(h("input",{type:"email","onUpdate:modelValue":y[0]||(y[0]=A=>d.value=A),class:"input-field",placeholder:l.value.enterEmail,required:""},null,8,_6),[[gs,d.value]])])]),h("div",E6,[h("div",b6,[y[3]||(y[3]=h("span",{class:"input-text-label"},"Password",-1)),Wt(h("input",{type:"password","onUpdate:modelValue":y[1]||(y[1]=A=>f.value=A),class:"input-field",placeholder:l.value.enterPassword,required:""},null,8,I6),[[gs,f.value]])])]),h("button",{type:"submit",disabled:i.value||o.value,class:De(["login-button",{connecting:i.value,connected:o.value}])},[!i.value&&!o.value?(L(),B("div",T6,E(l.value.loginButton),1)):he("",!0),i.value?(L(),B("div",S6,[y[4]||(y[4]=h("div",{class:"spinner-small"},null,-1)),Fo(" "+E(l.value.loading),1)])):he("",!0),o.value?(L(),B("div",P6,[y[5]||(y[5]=h("svg",{class:"check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[h("path",{d:"M20 6L9 17l-5-5"})],-1)),Fo(" "+E(l.value.success)+"! ",1)])):he("",!0)],10,C6)],32),he("",!0),he("",!0),h("div",R6,[h("button",{onClick:c,class:"signup-btn"},E(l.value.signupButton),1),y[7]||(y[7]=h("span",{class:"link-separator"},"|",-1)),h("button",{onClick:m,class:"forgot-password-btn"}," Forgot password? ")])]))}},k6=Qt(x6,[["__scopeId","data-v-49244d9a"]]),cd=n=>{const e=n.toString().split("").reduce((i,o)=>(i<<5)-i+o.charCodeAt(0),0),t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let s="",r=Math.abs(e);for(let i=0;i<6;i++)s+=t[r%t.length],r=Math.floor(r/t.length);return s},Li=async n=>{if(!n)return cd(n||"default");const e=ti(),t=e.find(s=>s.id===n);if(t&&t.inviteCode)return t.inviteCode;if(us)try{const s=Lo(us,"users",n),r=await el(s);if(r.exists()){const i=r.data();if(i.inviteCode)return i.inviteCode;const o=cd(n);return await Mg(s,{inviteCode:o}),o}}catch(s){console.error("getOrCreateInviteCode Firestore :",s)}if(t){const s=cd(n);return t.inviteCode=s,localStorage.setItem("users",JSON.stringify(e)),s}return cd(n)},N6=async n=>{if(!n)return null;const t=ti().find(s=>s.inviteCode===n);if(t)return t;if(!us)return null;try{const s=d3(us,"users"),r=C3(s,T3("inviteCode","==",n)),i=await x3(r);if(!i.empty){const o=i.docs[0],a=o.data();return{id:o.id,...a}}return null}catch(s){return console.error("getUserByInviteCode Firestore :",s),null}},D6=async(n,e)=>{if(!e)return{success:!1,error:"  ."};if(!n)return{success:!1,error:" ID ."};const t=await N6(e);if(!t)return{success:!1,error:"   ."};if(t.id===n)return{success:!1,error:"    ."};let s=null;if(us)try{const f=Lo(us,"users",n),p=await el(f);if(p.exists()&&(s={id:p.id,...p.data()},s.referredBy))return{success:!1,error:"  ."}}catch(f){console.error("processInviteCode:    :",f)}if(!s&&(s=ti().find(p=>p.id===n),s&&s.referredBy))return{success:!1,error:"  ."};if(us)try{if(s){const m=Lo(us,"users",n);await Mg(m,{referredBy:t.id,referredAt:new Date().toISOString()})}const f=Lo(us,"users",t.id),p=await el(f);if(p.exists()){const m=p.data(),_=m.referrals||[];_.includes(n)||_.push(n),await Mg(f,{referrals:_,referralStats:{totalReferrals:_.length,rewardsReceived:m.referralStats?.rewardsReceived||0}})}}catch(f){console.error("processInviteCode: Firestore  :",f)}const r=ti(),i=r.find(f=>f.id===n);i&&(i.referredBy=t.id,i.referredAt=new Date().toISOString(),localStorage.setItem("users",JSON.stringify(r)));const o=r.find(f=>f.id===t.id);o&&(o.referrals||(o.referrals=[]),o.referrals.includes(n)||o.referrals.push(n),o.referralStats={totalReferrals:o.referrals.length,rewardsReceived:o.referralStats?.rewardsReceived||0},localStorage.setItem("users",JSON.stringify(r)));const a=on(),l=100,c=(t.gameData?.coins||0)+l;await Qc(t.id,{coins:c});const d=50;if(s){const f=(s.gameData?.coins||0)+d;await Qc(n,{coins:f}),a.state.currentUser?.id===n&&await a.updateCoins(f)}return a.state.currentUser?.id===t.id&&await a.updateCoins(c),window.dispatchEvent(new CustomEvent("userDataUpdated")),{success:!0,inviter:t.displayName||t.name||t.email,inviterReward:l,newUserReward:d}},Kw=async n=>{if(!n)return{inviteCode:null,totalReferrals:0,referrals:[],referralStats:{totalReferrals:0,rewardsReceived:0}};if(us)try{const s=Lo(us,"users",n),r=await el(s);if(r.exists()){const i=r.data();return{inviteCode:i.inviteCode||await Li(n),totalReferrals:i.referrals?.length||0,referrals:i.referrals||[],referralStats:i.referralStats||{totalReferrals:0,rewardsReceived:0}}}}catch(s){console.error("getReferralStats Firestore :",s)}const t=ti().find(s=>s.id===n);return t?{inviteCode:t.inviteCode||await Li(n),totalReferrals:t.referrals?.length||0,referrals:t.referrals||[],referralStats:t.referralStats||{totalReferrals:0,rewardsReceived:0}}:{inviteCode:await Li(n),totalReferrals:0,referrals:[],referralStats:{totalReferrals:0,rewardsReceived:0}}},O6={class:"signup-screen"},L6={class:"input-group"},B6={class:"input-container"},M6={class:"input-group"},F6={class:"input-container"},U6=["type"],V6={class:"input-group"},$6={class:"input-container"},H6={__name:"SignupScreen",setup(n){const e=Pn(),t=H1(),s=U({name:"",email:"",password:""}),r=U(null);Nt(()=>{t.query.invite?r.value=t.query.invite:t.query.ref&&(r.value=t.query.ref)});const i=U(!1),o=()=>{e.go(-1)},a=async l=>{if(l.preventDefault(),!s.value.name.trim()||!s.value.email.trim()||!s.value.password.trim()){alert("Please fill in all fields.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.value.email)){alert("Please enter a valid email address.");return}if(s.value.password.length<6){alert("Password must be at least 6 characters long.");return}const d=JSON.parse(localStorage.getItem("users")||"[]");if(d.some(_=>_.email===s.value.email)){alert("This email is already registered.");return}let p;try{p=await Af(s.value.password)}catch(_){console.error("Password hashing error:",_),alert("An error occurred during signup. Please try again.");return}const m={id:Date.now(),name:s.value.name,email:s.value.email,password:p,createdAt:new Date().toISOString(),gameData:{level:1,coins:0,totalCoin:0,catFragments:50,nftCount:0,miningLevel:1,huntingLevel:1,explorationLevel:1,productionLevel:1,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}};if(d.push(m),localStorage.setItem("users",JSON.stringify(d)),r.value)try{const _=await D6(m.id,r.value);_.success?alert(`Signup completed successfully!
You have signed up with an invitation from ${_.inviter}!
Invitation reward: You received ${_.newUserReward} points!`):alert(`Signup completed successfully!
${_.error}`)}catch(_){console.error("Invitation code processing error:",_),alert("Signup completed successfully!")}else alert("Signup completed successfully!");e.push("/login")};return(l,c)=>(L(),B("div",O6,[h("button",{class:"back-button",onClick:o}," < Back "),h("form",{onSubmit:a,class:"signup-form"},[h("div",L6,[h("div",B6,[c[3]||(c[3]=h("span",{class:"input-text-label"},"Name",-1)),Wt(h("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=d=>s.value.name=d),class:"input-field",placeholder:"Enter your name",required:""},null,512),[[gs,s.value.name]])])]),h("div",M6,[h("div",F6,[c[6]||(c[6]=h("span",{class:"input-text-label"},"Password",-1)),Wt(h("input",{type:i.value?"text":"password","onUpdate:modelValue":c[1]||(c[1]=d=>s.value.password=d),class:"input-field",placeholder:"Enter your password",required:""},null,8,U6),[[bR,s.value.password]]),he("",!0)])]),h("div",V6,[h("div",$6,[c[7]||(c[7]=h("span",{class:"input-text-label"},"Email",-1)),Wt(h("input",{type:"email","onUpdate:modelValue":c[2]||(c[2]=d=>s.value.email=d),class:"input-field",placeholder:"Enter your email",required:""},null,512),[[gs,s.value.email]])])]),c[8]||(c[8]=h("button",{type:"submit",class:"signup-button"}," Create an account ",-1))],32)]))}},G6=Qt(H6,[["__scopeId","data-v-b23370a9"]]);function Q6(n){const e=Date.now(),t=Math.random().toString(36).substring(2,15);return btoa(`${n}:${e}:${t}`).replace(/[+/=]/g,"")}function j6(n,e){const t=JSON.parse(localStorage.getItem("resetTokens")||"{}");t[e]={email:n,createdAt:Date.now(),expiresAt:Date.now()+1440*60*1e3},localStorage.setItem("resetTokens",JSON.stringify(t))}function qw(n){const e=JSON.parse(localStorage.getItem("resetTokens")||"{}"),t=e[n];return t?Date.now()>t.expiresAt?(delete e[n],localStorage.setItem("resetTokens",JSON.stringify(e)),null):t:null}function z6(n){const e=JSON.parse(localStorage.getItem("resetTokens")||"{}");delete e[n],localStorage.setItem("resetTokens",JSON.stringify(e))}function W6(n){return`${window.location.origin+window.location.pathname}#/reset-password?token=${n}`}const K6="/tdl/assets/cat9-Bzb-Egme.png",q6={class:"forgot-password-screen"},J6={class:"cat-character-container"},Y6=["src"],X6={class:"input-group"},Z6={class:"input-container"},e5=["disabled"],t5=["disabled"],n5={key:0,class:"reset-link-container"},s5={class:"reset-link-content"},r5={class:"reset-link-wrapper"},i5=["href"],o5={key:0,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},a5={key:1,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},l5={__name:"ForgotPasswordPage",setup(n){const e=Pn(),t=U(""),s=U(!1),r=U(""),i=U(!1),o=U(!1),a=()=>{e.go(-1)},l=async d=>{if(d.preventDefault(),!t.value.trim()){alert("Please enter your email address.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.value)){alert("Please enter a valid email address.");return}s.value=!0;try{if(!JSON.parse(localStorage.getItem("users")||"[]").find(A=>A.email===t.value)){alert("Email address not found."),s.value=!1;return}const _=Q6(t.value);j6(t.value,_);const y=W6(_);r.value=y,alert("Password reset link has been sent to your email address."),e.push("/login")}catch(p){console.error("Password reset link generation error:",p),alert("An error occurred while generating reset link. Please try again.")}finally{s.value=!1}},c=async()=>{try{await navigator.clipboard.writeText(r.value),o.value=!0,setTimeout(()=>{o.value=!1},2e3)}catch(d){console.error("Failed to copy link:",d);const f=document.createElement("textarea");f.value=r.value,f.style.position="fixed",f.style.opacity="0",document.body.appendChild(f),f.select();try{document.execCommand("copy"),o.value=!0,setTimeout(()=>{o.value=!1},2e3)}catch(p){console.error("Fallback copy failed:",p)}document.body.removeChild(f)}};return(d,f)=>(L(),B("div",q6,[h("button",{class:"back-button",onClick:a}," < Back "),f[5]||(f[5]=h("h1",{class:"forgot-password-title"},"Reset password",-1)),h("div",J6,[h("img",{src:Me(K6),alt:"Cat Character",class:"cat-character-image"},null,8,Y6)]),h("form",{onSubmit:l,class:"forgot-password-form"},[h("div",X6,[h("div",Z6,[f[1]||(f[1]=h("span",{class:"input-text-label"},"Email",-1)),Wt(h("input",{type:"email","onUpdate:modelValue":f[0]||(f[0]=p=>t.value=p),class:"input-field",placeholder:"Enter your email",required:"",disabled:s.value},null,8,e5),[[gs,t.value]])])]),h("button",{type:"submit",class:"reset-button",disabled:s.value},E(s.value?"Sending...":"Reset password"),9,t5),i.value&&r.value?(L(),B("div",n5,[f[4]||(f[4]=w1('<div class="reset-link-header" data-v-fd9c9e74><svg class="link-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-fd9c9e74><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" data-v-fd9c9e74></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" data-v-fd9c9e74></path></svg><p class="reset-link-label" data-v-fd9c9e74>Reset link (development mode)</p></div>',1)),h("div",s5,[h("div",r5,[h("a",{href:r.value,class:"reset-link",target:"_blank"},E(r.value),9,i5)]),h("button",{onClick:c,class:De(["copy-button",{copied:o.value}])},[o.value?(L(),B("svg",a5,[...f[3]||(f[3]=[h("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(L(),B("svg",o5,[...f[2]||(f[2]=[h("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},null,-1),h("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},null,-1)])])),h("span",null,E(o.value?"Copied!":"Copy"),1)],2)])])):he("",!0)],32)]))}},c5=Qt(l5,[["__scopeId","data-v-fd9c9e74"]]),u5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAz4SURBVHgB7d3ddRRXFobhIyJgMpAzwBGgicDjCOwQyMA4AiYDk8FMBmIiMI5AygBn0FMFjQ3or3+q6uy9z/OsVUtccK3vrVPVrdYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAjXDQA7tjtds+nH1fT9XK65n9ffvNfbqfr/XT9cXFx8a4BADnNoz9dP0/X9e44N9P123RdNgAgj2m8X03Xh935/iMEACC4eaxPuOM/xOsGAMSz+3Tcv8Rd/0Nudk4DACCO+Q59t40bEQAAAWw4/iIAACLoMP5fRsDzBgBsq+P4f/amAQDbCTD+n101AGB9uzjjP7tuAMC6drHG/7OrBgCsYxdz/GdOAejOHwMCStp9+ia+X1pc/7i4uPizQSfPGkAxCcZ/9kODjgQAUEqS8Z9dNehIAABlJBr/2YsGHQkAoIRk4z/zrYB05SVAIL2E4//RxaRBJ04AgNSyjj/0JgCAtIw/nE4AACkVGP/bBh0JACCdInf+tw06EgBAKoWO/d836EgAAGkUe+b/rkFHPoICpFDwhT9/C4CunAAA4RUc/7fGn96cAAChFf2o3/dTAHgHgK6cAABhFR3/t8afCJwAACEV/pKf76YAuG3QmRMAIJzC4//a+BOFEwAglMLj/99p/H9sEIQAAMIoPP7zM/9/evOfSAQAEILxh20JAKA74w/bEwBAV8Yf+hAAQDfGH/oRAEAXxh/6EgDA5ow/9CcAgE0Zf4hBAACbMf4QhwAANmH8IRYBAKzO+EM8AgBYlfGHmAQAsBrjD3EJAGAVxh9iEwDA4ow/xCcAgEUZf8hBAACLMf6QhwAAFmH8IRcBAJzN+EM+AgA4i/GHnAQAcDLjD3kJAOAkxh9yEwDA0Yw/5CcAgKMYf6hBAAAHM/5QhwAADmL8oRYBADzJ+EM9AgB4lPGHmgQA8CDjD3UJAOBexh9qEwDAHcYf6hMAwFeMP4xBAAB/Mf4wDgEAfGT8YSwCADD+MCABAIMz/jAmAQADM/4wLgEAgzL+MDYBAAMy/oAAgMEYf2AmAGAgxh/4TADAIIw/8CUBAAMw/sC3BAAUZ/yB+wgAKMz4Aw8RAFCU8QceIwCgIOMPPEUAQDHGHziEAIBCjD9wKAEARRh/4BgCAAow/sCxBAAkZ/yBUwgASMz4A6cSAJCU8QfOIQAgIeMPnEsAQDLGH1iCAIBEjD+wFAEASRh/YEkCABIw/sDSBAAEZ/yBNQgACMz4A2sRABCU8QfWJAAgIOMPrE0AQDDGH9iCAIBAjD+wFQEAQRh/YEsCAAIw/sDWBAB0ZvyBHgQAdGT8gV4EAHRi/IGeBAB0YPyB3gQAbMz4AxEIANiQ8QeiEACwEeMPRCIAYAPGH4hGAMDKjD8QkQCAFRl/ICoBACsx/kBkAgBWYPyB6AQALMz4AxkIAFiQ8QeyEACwEOMPZCIAYAHGH8hGAMCZjD+QkQCAMxh/ICsBACcy/kBmAgBOYPyB7AQAHMn4AxUIADiC8QeqEABwIOMPVCIA4ADGH6hGAMATjD9QkQCARxh/oCoBAA8w/kBlAgDuYfyB6gQAfMP4AyMQAPAF4w+MQgDAnvEHRiIAoBl/YDwCgOEZf2BEAoChGX9gVAKAYRl/YGQCgCEZf2B0AoDhGH8AAcBgjD/AJwKAYRh/gL8JAIZg/AG+JgAoz/gD3CUAKM34A9xPAFCW8Qd4mACgJOMP8DgBQDnGH+BpAoBSjD/AYQQAZRh/gMMJAEow/gDHEQCkZ/wBjicASM34A5xGAJCW8Qc4nQAgJeMPcB4BQDrGH+B8AoBUjD/AMgQAaRh/gOUIAFIw/gDLEgCEZ/wBlicACM34A6xDABCW8QdYjwAgJOMPsC4BQDjGH2B9AoBQpvF/Nf140+ox/kAoAoAwpvG/nH7ctHqMPxDOswZxXLd6jD8QkgAghP1z/8tWi/EHwhIAdLc/+v+p1WL8gdAEABFctVp3/8YfCM9LgHQ3nQDML/5dthqMP5CCEwC6msb/RTP+AJsTAPT2stVg/IFUBAC9XbX8jD+QjgCgt8uWm/EHUhIA9HbZ8jL+QFo+BUBXu0nLyfgDqTkBAIABCQB6y3oHPX988Xo6wHjeABISAPSW+QhdBABpCQB6e99yEwFASgKA3t61/EQAkI4AoLc/Wg0iAEjFxwDpzh8DAtieEwAieNvqcBIApOAEgO72YzmfAlQaTScBQGhOAOhuP5L/brU4CQBCcwJACPuh/L3VeRfgMycBQEhOAAhhP5A/ttxfDHQfJwFASAKAMKYImO+Wf231iAAgHAFAKFMEzO8CvG71iAAgFO8AENI0lL+0miHgnQAgBAFAWCIAYD0CgNBEAMA6BADhiQCA5QkAUhABAMsSAKQhAgCWIwBIRQQALEMAkI4IADifACAlEQBwHgFAWiIA4HQCgNREAMBpBADpiQCA4wkAShABAMcRAJQhAgAOJwAoRQQAHEYAUI4IAHiaAKAkEQDwOAFAWSIA4GECgNJEAMD9BADliQCAuwQAQxABAF8TAAxDBAD8TQAwFBEA8IkAYDgiAEAAMCgRAIxOADAsEQCMTAAwNBEAjEoAMDwRAIxIAEATAcB4BADsiQBgJAIAviACgFEIAPiGCABGIADgHiIAqE4AwANEAFCZAIBHiACgKgEATxABQEUCAA4gAoBqBAAcSAQAlQgAOIIIAKoQAHAkEQBUIADgBCIAyE4AwIlEAJCZAIAziAAgKwEAZxIBQEYCABYgAoBsBAAsRAQAmQgAWJAIALIQALAwEQBkIABgBSIAiE4AwEpEABCZAIAViQAgKgEAKxMBQEQCADYgAoBoBABsRAQAkQgA2JAIAKIQALAxEQBEIACgAxEA9CYAoBMRAPQkAKAjEQD0IgCgMxEA9CAAIAARAGxNAEAQIgDYkgCAQEQAsBUBAMGIAGALAgACEgHA2gQABCUCgDUJAAhMBABrEQAQnAgA1iAAIAERACxNAEASIgBYkgCAREQAsBQBAMmIAGAJAgASEgHAuQQAJCUCgHMIAEhMBACnEgCQnAgATiEAoAARABxLAEARIgA4hgCAQkQAcCgBAMWIAOAQAgAKEgHAUwQAFCUCgMcIAChMBAAPEQBQnAgA7iMAYAAiAPiWAIBBiADgSwIABiICgM8EAAxGBAAzAQADEgGAAIBBiQAYmwCAgYkAGJcAgMGJABiTAABEAAxIAAAfiQAYiwAA/iICYBwCAPiKCIAxCADgDhEA9QkA4F4iAGoTAMCDRADUJQCAR4kAqEkAAE8SAVCPAAAOIgKgFgEAHEwEQB0CADiKCIAaBABwNBEA+QkA4CQiAHITAMDJRADkJQCAs4gAyEkAAGcTAZCPAAAWIQIgFwEALEYEQB4CAFiUCIAcBACwOBEA8QkAYBUiAGITAMBqRADEJQCAVYkAiEkAAKsTARCPAAA2IQIgFgEAbEYEQBwCANiUCIAYBACwOREA/QkAoAsRAH0JAKAbEQD9CACgKxEAfQgAoDsRANsTAEAIIgC2JQCAMEQAbOdZAwhiGshfW80AeDFdvzUIRAAAoRSOgH9NJxyvGgThEQAQUtHHAfMjgO+nyLlt0JkTACCkoicBz5tHAQQhAICwikbA1XS6cdWgMwEAhFY0An5q0Jl3AIAUir0TML8L8J2PBdKTEwAghWInAfO7AC8bdCQAgDSKRcBVg44EAJBKoQh40aAjAQCkUyQCLht05CVAIK3sLwZOIeN3MN04AQDSKvy1wbA6AQCkJgLgNAIASC9pBNw26EgAACUkjIDbBh0JAKCMZBFw26AjAQCUkigC3jUAYFnzRwR3sV02AGB5u7gRcN2gM48AgLICPw542wCAde1inQTcNABgG7s4EfBDAwC2s+sfAW8aALC9jhFwM13PGwDQR4cIuNn52B8A9LdhBNwYfwAIZBrmV9P1Ybee340/AAQ0D/T+Ln1pb3ae+QNAbNNY/7xQCFxP18sGAOSxD4Hr3XE+7O/4DT9pXDQA7tgf38+D/mJ/fXmc/+f+ej9fFxcX/2sAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABU9n/G+xQHTFSybwAAAABJRU5ErkJggg==",d5={class:"reset-password-screen"},h5={class:"email-info"},f5={class:"input-group"},p5={class:"input-container"},g5=["disabled"],m5={class:"input-group"},v5={class:"input-container"},y5=["disabled"],A5=["disabled"],w5={key:1,class:"loading-container"},_5={__name:"ResetPasswordPage",setup(n){const e=Pn(),t=H1(),s=U(""),r=U(""),i=U(!1),o=U(""),a=U(!1),l=U("");Nt(()=>{if(o.value=t.query.token||"",!o.value){alert("Invalid reset link. Please request a new password reset."),e.push("/forgot-password");return}const f=qw(o.value);if(!f){alert("Reset link has expired or is invalid. Please request a new password reset."),e.push("/forgot-password");return}a.value=!0,l.value=f.email});const c=()=>{e.push("/login")},d=async f=>{if(f.preventDefault(),!s.value.trim()||!r.value.trim()){alert("Please enter new password and confirm it.");return}if(s.value!==r.value){alert("Passwords do not match.");return}if(s.value.length<6){alert("Password must be at least 6 characters long.");return}i.value=!0;try{const p=qw(o.value);if(!p){alert("Reset link has expired. Please request a new password reset."),e.push("/forgot-password");return}const m=JSON.parse(localStorage.getItem("users")||"[]"),_=m.findIndex(A=>A.email===p.email);if(_===-1){alert("User not found."),i.value=!1;return}const y=await Af(s.value);m[_].password=y,localStorage.setItem("users",JSON.stringify(m)),z6(o.value),alert("Password has been reset successfully. Please login with your new password."),e.push("/login")}catch(p){console.error("Password reset error:",p),alert("An error occurred while resetting password. Please try again.")}finally{i.value=!1}};return(f,p)=>(L(),B("div",d5,[h("button",{class:"back-button",onClick:c},[...p[2]||(p[2]=[h("img",{src:u5,alt:"back-button",width:"20px"},null,-1)])]),p[6]||(p[6]=h("h1",{class:"reset-password-title"},"Reset Password",-1)),a.value?(L(),B("form",{key:0,onSubmit:d,class:"reset-password-form"},[h("p",h5,"Reset password for: "+E(l.value),1),h("div",f5,[h("div",p5,[p[3]||(p[3]=h("span",{class:"input-text-label"},"password",-1)),Wt(h("input",{type:"password","onUpdate:modelValue":p[0]||(p[0]=m=>s.value=m),class:"input-field",placeholder:"Enter new password",required:"",disabled:i.value},null,8,g5),[[gs,s.value]])])]),h("div",m5,[h("div",v5,[p[4]||(p[4]=h("span",{class:"input-text-label"},"password",-1)),Wt(h("input",{type:"password","onUpdate:modelValue":p[1]||(p[1]=m=>r.value=m),class:"input-field",placeholder:"Confirm new password",required:"",disabled:i.value},null,8,y5),[[gs,r.value]])])]),h("button",{type:"submit",class:"reset-button",disabled:i.value},E(i.value?"Resetting...":"Reset Password"),9,A5)],32)):(L(),B("div",w5,[...p[5]||(p[5]=[h("p",null,"Validating reset link...",-1)])]))]))}},E5=Qt(_5,[["__scopeId","data-v-3509f8b7"]]),b5="/tdl/assets/tul1-CuZ0qR5D.png",I5="/tdl/assets/tul2-Cj7OkHg6.png",C5="/tdl/assets/tul3-CaPMxBJ-.png",T5="/tdl/assets/tul5-CQc-0WLd.png",S5="/tdl/assets/tul6-COB-AGqQ.png",P5="/tdl/assets/energyIcon-BrO4HZx-.png",Vg="/tdl/assets/pointIcon-Cel8s0wp.png",Ah="/tdl/assets/coinIcon-NUhL-dlJ.png",OT="/tdl/assets/catPoint-t6vwZH27.png",R5="/tdl/assets/shopIcon-Cs4Crcae.png",x5="/tdl/assets/setting-CxNpDL9x.png",Jw=4e3,LT=(n,e={value:Jw})=>{const t=new Date().toDateString(),s=localStorage.getItem("energyLastDate"),r=localStorage.getItem("currentEnergy"),i=typeof e.value=="number"?e.value:parseInt(e.value,10)||Jw;if(s!==t)n.value=i,localStorage.setItem("energyLastDate",t),localStorage.setItem("currentEnergy",i.toString());else if(r){const o=parseInt(r,10)||0;n.value=Math.max(0,Math.min(o,i))}else n.value=i,localStorage.setItem("energyLastDate",t),localStorage.setItem("currentEnergy",i.toString());typeof n.value!="number"&&(n.value=parseInt(n.value,10)||0)},k5={class:"headerCont"},N5={class:"headerBar"},D5={class:"resourceValue"},O5={class:"resourceValue"},L5={class:"resourceValue"},B5={class:"resourceValue"},M5={key:0,class:"rightIconButtons"},F5={__name:"Header",props:{hideRightIcons:{type:Boolean,default:!1}},setup(n){const e=U(localStorage.getItem("appLanguage")||"English");pe(()=>ms());const t=Pn(),s=on(),r=pe(()=>s.state.coins),i=pe(()=>s.state.totalCoin),o=pe(()=>s.state.catFragments),l=U((()=>{const w=localStorage.getItem("currentEnergy");if(w){const I=parseInt(w,10);return isNaN(I)?4e3:I}return 4e3})()),c=U(4e3),d=()=>{LT(l,c),typeof l.value!="number"&&(l.value=parseInt(l.value,10)||0)},f=pe(()=>{let w=l.value;if(typeof w=="string"?w=parseInt(w,10):typeof w!="number"&&(w=Number(w)),isNaN(w)||w===null||w===void 0)return"0";const I=Math.floor(w);return A(I)});U(!1);const p=()=>{t.push("/settings")},m=()=>{t.push("/shop")},_=()=>{t.push("/nft")};let y=null;Nt(()=>{s.loadCurrentUser(),d(),y=setInterval(()=>{const I=localStorage.getItem("appLanguage")||"English";I!==e.value&&(e.value=I),d()},500);const w=()=>{s.loadCurrentUser(),d()};window.addEventListener("userDataUpdated",w),rn(()=>{window.removeEventListener("userDataUpdated",w),y&&clearInterval(y)})});const A=s.formatNumber;return(w,I)=>(L(),B("header",null,[h("div",k5,[h("div",N5,[h("button",{class:"resourceItem energyItem",onClick:m},[I[0]||(I[0]=h("img",{src:P5,alt:"",class:"resourceIcon"},null,-1)),h("span",D5,E(f.value),1)]),h("button",{class:"resourceItem",onClick:m},[I[1]||(I[1]=h("img",{src:Vg,alt:"",class:"resourceIcon"},null,-1)),h("span",O5,E(Me(A)(r.value)),1)]),h("button",{class:"resourceItem",onClick:m},[I[2]||(I[2]=h("img",{src:Ah,alt:"",class:"resourceIcon"},null,-1)),h("span",L5,E(Me(A)(i.value)),1)]),h("button",{class:"resourceItem",onClick:m},[I[3]||(I[3]=h("img",{src:OT,alt:"",class:"resourceIcon"},null,-1)),h("span",B5,E(Me(A)(o.value)),1)])]),n.hideRightIcons?he("",!0):(L(),B("div",M5,[h("button",{class:"iconButton nftButton",onClick:_,title:"NFT"},[...I[4]||(I[4]=[h("img",{src:R5,alt:"NFT",class:"icon-img"},null,-1)])]),h("button",{class:"iconButton settingsButton",onClick:p,title:""},[...I[5]||(I[5]=[h("div",{class:"iconCircle settingsIconCircle"},[h("img",{src:x5,alt:"",class:"icon-img"})],-1)])]),he("",!0)]))])]))}},jn=Qt(F5,[["__scopeId","data-v-b3f306da"]]),Yw="/tdl/assets/tabIcon1-BMQwD5kb.png",U5="/tdl/assets/tabIcon2-Ba9ZXsKV.png",Xw="/tdl/assets/tabIcon3-C85F2_hQ.png",Zw="/tdl/assets/tabIcon4-Dfn0WYn7.png",e_="/tdl/assets/tabIcon5-CFF9Ua2B.png",t_="/tdl/assets/optionButton-k0xsRNG2.png",V5={class:"footerCont"},$5={class:"footerBar"},H5=["onClick"],G5={class:"tabContent"},Q5=["src","alt"],j5={key:1,class:"tabEmoji"},z5={__name:"Footer",setup(n){const e=Pn(),t=U("home"),s=U(localStorage.getItem("appLanguage")||"English"),r=pe(()=>ms()),i=d=>{d.key==="appLanguage"&&(s.value=d.newValue||"English")},o=()=>{switch(e.currentRoute.value.path){case"/main":t.value="game";break;case"/home":t.value="home";break;case"/exchange":t.value="exchange";break;case"/social":t.value="social";break;case"/inventory":t.value="inventory";break;case"/factory":t.value="factory";break;case"/settings":t.value="settings";break;default:t.value="home"}};let a=null;Nt(()=>{o(),window.addEventListener("storage",i),a=setInterval(()=>{const d=localStorage.getItem("appLanguage")||"English";d!==s.value&&(s.value=d)},100)}),rn(()=>{window.removeEventListener("storage",i),a&&clearInterval(a)}),qr(()=>e.currentRoute.value.path,()=>{o()}),qr(s,()=>{});const l=pe(()=>[{id:"game",img:Yw,imgActive:Yw,label:r.value.game},{id:"social",img:e_,imgActive:e_,label:"Social"},{id:"home",img:Xw,imgActive:Xw,label:r.value.home},{id:"exchange",img:Zw,imgActive:Zw,label:r.value.exchange},{id:"settings",img:t_,imgActive:t_,label:r.value.settings||"Settings"}]),c=d=>{switch(t.value=d,d){case"home":e.push("/home");break;case"game":e.push("/main");break;case"social":e.push("/social");break;case"exchange":e.push("/exchange");break;case"settings":e.push("/settings");break;case"factory":e.push("/factory");break;case"inventory":e.push("/inventory");break}};return(d,f)=>(L(),B("footer",null,[h("div",V5,[h("div",$5,[(L(!0),B(Re,null,We(l.value,p=>(L(),B("div",{key:p.id,class:De(["tabItem",{active:t.value===p.id}]),onClick:m=>c(p.id)},[h("div",G5,[p.img?(L(),B("img",{key:0,src:t.value===p.id?p.imgActive:p.img,alt:p.label,class:"tabIcon"},null,8,Q5)):he("",!0),p.emoji?(L(),B("span",j5,E(p.emoji),1)):he("",!0)])],10,H5))),128))])])]))}},zn=Qt(z5,[["__scopeId","data-v-9ceca445"]]);function Qr(n){return(n+1)*100}function W5(n){if(!n)return!1;const e=n.exp||0,t=n.maxExp||Qr(n.level||1);return e>=t}function Cp(n){return n*50}function K5(n){if(!n||!n.rarity)return 5;const e={common:1,rare:1.1,epic:1.2,legendary:1.3},t=5,s=e[n.rarity]||1;return Math.floor(t*s)}function wh(n){return n&&{...n,exp:n.exp!==void 0?n.exp:0,maxExp:n.maxExp!==void 0?n.maxExp:Qr(n.level||1)}}const q5="/tdl/assets/mainTab1-2-yTW8RB.png",J5="/tdl/assets/mainTab1_off-CYH0tU-A.png",Y5="/tdl/assets/mainTab2-DYAFv8pb.png",X5="/tdl/assets/mainTab2_off-Cd7YzEgp.png",Z5="/tdl/assets/mainTab3-SUKPiFtY.png",e8="/tdl/assets/mainTab3_off-BBdSbCVr.png",t8="/tdl/assets/mainTab4-wBIEQHF7.png",n8="/tdl/assets/mainTab4_off-BKjmP7bC.png",ud="/tdl/assets/plusMini-HInupkEh.png",s8="/tdl/assets/energyMini-BWyfGT5k.png",r8={class:"mainScreen"},i8=["src"],o8={class:"mainContent"},a8={class:"modeTabs"},l8=["src"],c8={class:"modeTabLevel"},u8=["src"],d8={class:"modeTabLevel"},h8=["src"],f8={class:"modeTabLevel"},p8=["src"],g8={class:"modeTabLevel"},m8={class:"clickerArea"},v8={class:"totalPointsDisplay"},y8={class:"pointAnimations"},A8={class:"clickerAndEnergyContainer"},w8={class:"energySection"},_8=["src"],E8={class:"energyBar"},b8={class:"energyText"},I8={class:"clickerButtonContainer"},C8={key:1,class:"completeMessageContainer"},T8={class:"completeMessageText"},S8={class:"rewardInfo"},P8={class:"rewardItem"},R8={key:0,class:"rewardItem"},x8={key:1,class:"completeMessageContainer"},k8={class:"completeMessageText"},N8={class:"rewardInfo"},D8={class:"rewardItem"},O8={key:0,class:"rewardItem"},L8={key:1,class:"completeMessageContainer"},B8={class:"completeMessageText"},M8={class:"rewardInfo"},F8={class:"rewardItem"},U8={key:0,class:"rewardItem"},V8={key:1,class:"completeMessageContainer"},$8={class:"completeMessageText"},H8={class:"rewardInfo"},G8={class:"rewardItem"},Q8={key:0,class:"rewardItem"},j8={class:"catsSection"},z8={class:"catsListScroll"},W8=["onClick"],K8={key:0,class:"catImage"},q8=["src"],J8={key:1,class:"emptySlotContent"},Y8=["src"],X8=["onClick"],Z8={key:0,class:"catImage"},e9=["src"],t9={key:1,class:"emptySlotContent"},n9=["src"],s9=["onClick"],r9={key:0,class:"catImage"},i9=["src"],o9={key:1,class:"emptySlotContent"},a9=["src"],l9=["onClick"],c9={key:0,class:"catImage"},u9=["src"],d9={key:1,class:"emptySlotContent"},h9=["src"],f9={class:"speechBubbles"},p9={class:"catEmojis"},g9=["src","onError"],m9={class:"catSelectPopupHeader"},v9={class:"catSelectPopupBody"},y9={key:0,class:"removeCatSection"},A9={class:"availableCatsGrid"},w9=["onClick"],_9={class:"availableCatImage"},E9=["src"],b9={class:"availableCatInfo"},I9={class:"availableCatName"},C9={class:"availableCatLevel"},T9={class:"availableCatStars"},S9={__name:"MainScreen",setup(n){const e=on(),t=pe(()=>ms()),s=Pn(),r=()=>{s.push("/inventory")},i=U(null),o=U("mining"),a=pe(()=>e.state.coins),l=pe(()=>e.state.coins),c=pe(()=>e.state.totalCoin),d=pe(()=>e.state.catFragments),f=pe(()=>o.value==="mining"?I.value:o.value==="hunting"?ke.value:o.value==="exploration"?T.value:o.value==="production"?Ve.value:0),p=async J=>{try{await e.updateCoins(J)||console.error("  ")}catch(re){console.error("    :",re)}},m=async J=>{try{await e.updateCatFragments(J)||console.error("   ")}catch(re){console.error("     :",re)}},_=U([]),y=U([]),A=U([]),w=U(null),I=U(0),C=U(0),M=U(1),Q=U(!1),q=U(!0),x=U({points:0,fragments:0}),T=U(0),P=U(0),S=U(1),b=U(!1),D=U(!0),k=U({points:0,fragments:0}),ke=U(0),ie=U(0),H=U(1),V=U(!1),Z=U(!0),me=U({points:0,fragments:0}),Ve=U(0),Ne=U(0),se=U(1),z=U(!1),ue=U(!0),Pe=U({points:0,fragments:0}),tt=J=>Math.pow(2,J-1),Y=(J,re)=>!J||!Array.isArray(J)?0:J.reduce((ee,Ae)=>Ae&&Ae[re]?ee+(Ae[re]||0):ee,0),ge=()=>Y(He.value,"miningEfficiency"),fe=()=>Y(an.value,"huntingDamage"),we=()=>Y(Ut.value,"explorationReward"),Qe=()=>Y(ln.value,"productionSpeed"),N=async(J,re)=>{if(!J||J.length===0)return;const ee=dt();if(!ee)return;const Ae=ee.gameData?.inventory||[],Oe=J.filter(qe=>qe!==null).map(qe=>qe.id);if(Oe.length===0)return;const Ze=Ae.map(qe=>{if(Oe.includes(qe.id)){const Ce=wh(qe),wt=(Ce.exp||0)+re,Vt=Ce.level||1,Rn=Qr(Vt);return{...Ce,exp:wt,maxExp:Rn}}return wh(qe)});try{await e.updateGameData({inventory:Ze})}catch(qe){console.error("NFT   :",qe)}},O=J=>{o.value=J},G=()=>{s.currentRoute.value.path==="/main"&&o.value==="main"&&(o.value="mining")};Nt(()=>{if(i.value=dt(),!i.value){const re={id:"guest_"+Date.now(),email:"guest@tdl.com",name:"Guest",loginType:"guest",gameData:{level:1,coins:0,totalCoin:0,catFragments:50,nftCount:0,miningLevel:1,huntingLevel:1,explorationLevel:1,productionLevel:1,planetLevel:1,planetEnergy:0,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}};localStorage.setItem("currentUser",JSON.stringify(re)),sessionStorage.setItem("currentUser",JSON.stringify(re)),i.value=re}if(e.loadCurrentUser(),i.value){M.value=i.value.gameData?.miningLevel||1,C.value=i.value.gameData?.miningTotalClicks||0,H.value=i.value.gameData?.huntingLevel||1,ie.value=i.value.gameData?.huntingTotalClicks||0,S.value=i.value.gameData?.explorationLevel||1,P.value=i.value.gameData?.explorationTotalClicks||0,se.value=i.value.gameData?.productionLevel||1,Ne.value=i.value.gameData?.productionTotalClicks||0,Be.value=i.value.gameData?.planetLevel||1,ae.value=i.value.gameData?.planetEnergy||0;const re=ee=>{const Ae=(ee||[]).slice(0,4);return Ae.length===4?Ae:[...Ae,...Array(4-Ae.length).fill(null)]};i.value.gameData?.miningCats!==void 0&&(He.value=re(i.value.gameData.miningCats)),i.value.gameData?.huntingCats!==void 0&&(an.value=re(i.value.gameData.huntingCats)),i.value.gameData?.explorationCats!==void 0&&(Ut.value=re(i.value.gameData.explorationCats)),i.value.gameData?.productionCats!==void 0&&(ln.value=re(i.value.gameData.productionCats))}LT(F,j),qr(()=>s.currentRoute.value.path,()=>{G()});try{w.value=new Audio,w.value.src=new URL("/tdl/assets/clickbgm-BvbCQtA-.mp3",import.meta.url).href,w.value.volume=.3}catch{}const J=()=>{!te()&&w.value&&(w.value.pause(),w.value.currentTime=0)};window.addEventListener("soundSettingChanged",J),Yt("mining"),Yt("hunting"),Yt("exploration"),Yt("production"),rn(()=>{_f(),window.removeEventListener("soundSettingChanged",J)})});const te=()=>{const J=localStorage.getItem("soundEnabled");return J!==null?J==="true":!0},W=async J=>{if(w.value&&te()&&(w.value.currentTime=0,w.value.play().catch(()=>{})),F.value<ne.value){alert(" !");return}if(xe()){if(J==="mining"){if(I.value++,C.value++,C.value>=M.value*1e3){M.value++;const re={id:Date.now(),text:`${t.value.mining} ${t.value.levelUp} Lv.${M.value}`,x:Math.random()*(Math.min(window.innerWidth||500,500)-220-40)+20,y:Math.random()*(window.innerHeight||500)+100};if(_.value.push(re),setTimeout(()=>{const ee=_.value.findIndex(Ae=>Ae.id===re.id);ee>-1&&_.value.splice(ee,1)},3e3),i.value)try{await e.updateGameData({miningLevel:M.value,miningTotalClicks:C.value})}catch(ee){console.error("   :",ee)}}if(I.value>=10){const ee=tt(M.value),Ae=ge()/100,Oe=Math.floor(100*ee*(1+Ae)),Ze=a.value+Oe;await p(Ze),I.value=0,Q.value=!0,q.value=!1,await ve();const qe=Math.random();let Ce=0;qe<.3?Ce=1:qe<.4&&(Ce=2),x.value={points:Oe,fragments:Ce};const wt={id:Date.now(),points:Oe,x:50,y:20};if(A.value.push(wt),setTimeout(()=>{const Ue=A.value.findIndex(ht=>ht.id===wt.id);Ue>-1&&A.value.splice(Ue,1)},2e3),Ce>0){const Ue=d.value+Ce;d.value=Ue,await m(Ue);for(let ht=0;ht<Ce;ht++){const ys=Math.floor(Math.random()*6)+1,Fn=Math.min(window.innerWidth||500,500),Wn=window.innerHeight||800,$t=60,Ht=30,Kn={id:Date.now()+ht,x:Math.random()*(Fn-$t-Ht*2)+Ht,y:Math.random()*(Wn-$t-Ht*2-200)+100,imageId:ys};y.value.push(Kn),setTimeout(()=>{const bn=y.value.findIndex(Ts=>Ts.id===Kn.id);bn>-1&&y.value.splice(bn,1)},2e3)}}if(i.value)try{await e.updateGameData({miningTotalClicks:C.value,miningLevel:M.value})}catch(Ue){console.error("   :",Ue)}const Vt=Math.min(window.innerWidth||500,500),Rn=window.innerHeight||800,vs=220,ss=Ce>0?80:60,jt=20,Mn=Math.round(ge());let En=`${t.value.miningComplete}
${Oe.toLocaleString()} ${t.value.pointsEarned}`;Mn>0&&(En+=`
(NFT Bonus: +${Mn}%)`),Ce>0&&(En+=`
${t.value.fragmentsEarned} ${Ce} ${t.value.fragmentsEarnedCount}`);const Ct={id:Date.now(),text:En,x:Math.random()*(Vt-vs-jt*2)+jt,y:Math.random()*(Rn-ss-jt*2-200)+100};_.value.push(Ct),setTimeout(()=>{const Ue=_.value.findIndex(ht=>ht.id===Ct.id);Ue>-1&&_.value.splice(Ue,1)},3e3),setTimeout(()=>{Q.value=!1,q.value=!0,x.value={points:0,fragments:0}},1500)}else{const re=Math.min(window.innerWidth||500,500),ee=window.innerHeight||800,Ae=220,Oe=60,Ze=20,qe={id:Date.now(),text:`${t.value.miningProgress}: ${I.value}/10`,x:Math.random()*(re-Ae-Ze*2)+Ze,y:Math.random()*(ee-Oe-Ze*2-200)+100};_.value.push(qe),setTimeout(()=>{const Ce=_.value.findIndex(wt=>wt.id===qe.id);Ce>-1&&_.value.splice(Ce,1)},2e3)}}else if(J==="exploration"){if(T.value++,P.value++,P.value>=S.value*1e3){S.value++;const re={id:Date.now(),text:`${t.value.exploration} ${t.value.levelUp} Lv.${S.value}`,x:Math.random()*(Math.min(window.innerWidth||500,500)-220-40)+20,y:Math.random()*(window.innerHeight||500)+100};if(_.value.push(re),setTimeout(()=>{const ee=_.value.findIndex(Ae=>Ae.id===re.id);ee>-1&&_.value.splice(ee,1)},3e3),i.value)try{await e.updateGameData({explorationLevel:S.value,explorationTotalClicks:P.value})}catch(ee){console.error("   :",ee)}}if(T.value>=10){const ee=tt(S.value),Ae=we()/100,Oe=Math.floor(100*ee*(1+Ae)),Ze=a.value+Oe;await p(Ze),T.value=0,b.value=!0,D.value=!1,await ve();const qe=Math.random();let Ce=0;qe<.3?Ce=1:qe<.4&&(Ce=2),k.value={points:Oe,fragments:Ce};const wt={id:Date.now(),points:Oe,x:50,y:20};if(A.value.push(wt),setTimeout(()=>{const Ue=A.value.findIndex(ht=>ht.id===wt.id);Ue>-1&&A.value.splice(Ue,1)},2e3),await N(Ut.value,10),Ce>0){const Ue=d.value+Ce;d.value=Ue,await m(Ue);for(let ht=0;ht<Ce;ht++){const ys=Math.floor(Math.random()*6)+1,Fn=Math.min(window.innerWidth||500,500),Wn=window.innerHeight||800,$t=60,Ht=30,Kn={id:Date.now()+ht,x:Math.random()*(Fn-$t-Ht*2)+Ht,y:Math.random()*(Wn-$t-Ht*2-200)+100,imageId:ys};y.value.push(Kn),setTimeout(()=>{const bn=y.value.findIndex(Ts=>Ts.id===Kn.id);bn>-1&&y.value.splice(bn,1)},2e3)}}if(i.value)try{await e.updateGameData({explorationTotalClicks:P.value,explorationLevel:S.value})}catch(Ue){console.error("   :",Ue)}const Vt=Math.min(window.innerWidth||500,500),Rn=window.innerHeight||800,vs=220,ss=Ce>0?80:60,jt=20,Mn=Math.round(we());let En=`${t.value.explorationComplete}
${Oe.toLocaleString()} ${t.value.pointsEarned}`;Mn>0&&(En+=`
(NFT Bonus: +${Mn}%)`),Ce>0&&(En+=`
${t.value.fragmentsEarned} ${Ce} ${t.value.fragmentsEarnedCount}`);const Ct={id:Date.now(),text:En,x:Math.random()*(Vt-vs-jt*2)+jt,y:Math.random()*(Rn-ss-jt*2-200)+100};_.value.push(Ct),setTimeout(()=>{const Ue=_.value.findIndex(ht=>ht.id===Ct.id);Ue>-1&&_.value.splice(Ue,1)},3e3),setTimeout(()=>{b.value=!1,D.value=!0,k.value={points:0,fragments:0}},1500)}else{const re=Math.min(window.innerWidth||500,500),ee=window.innerHeight||800,Ae=220,Oe=60,Ze=20,qe={id:Date.now(),text:`${t.value.explorationProgress}: ${T.value}/10`,x:Math.random()*(re-Ae-Ze*2)+Ze,y:Math.random()*(ee-Oe-Ze*2-200)+100};_.value.push(qe),setTimeout(()=>{const Ce=_.value.findIndex(wt=>wt.id===qe.id);Ce>-1&&_.value.splice(Ce,1)},2e3)}}else if(J==="hunting"){if(ke.value++,ie.value++,ie.value>=H.value*1e3){H.value++;const re={id:Date.now(),text:`${t.value.hunting} ${t.value.levelUp} Lv.${H.value}`,x:Math.random()*(Math.min(window.innerWidth||500,500)-220-40)+20,y:Math.random()*(window.innerHeight||500)+100};if(_.value.push(re),setTimeout(()=>{const ee=_.value.findIndex(Ae=>Ae.id===re.id);ee>-1&&_.value.splice(ee,1)},3e3),i.value)try{await e.updateGameData({huntingLevel:H.value,huntingTotalClicks:ie.value})}catch(ee){console.error("   :",ee)}}if(ke.value>=10){const ee=tt(H.value),Ae=fe()/100,Oe=Math.floor(100*ee*(1+Ae)),Ze=a.value+Oe;await p(Ze),ke.value=0,V.value=!0,Z.value=!1,await ve();const qe=Math.random();let Ce=0;qe<.3?Ce=1:qe<.4&&(Ce=2),me.value={points:Oe,fragments:Ce};const wt={id:Date.now(),points:Oe,x:50,y:20};if(A.value.push(wt),setTimeout(()=>{const Ct=A.value.findIndex(Ue=>Ue.id===wt.id);Ct>-1&&A.value.splice(Ct,1)},2e3),await N(an.value,10),Ce>0){const Ct=d.value+Ce;d.value=Ct,await m(Ct);for(let Ue=0;Ue<Ce;Ue++){const ht=Math.floor(Math.random()*6)+1,ys=Math.min(window.innerWidth||500,500),Fn=window.innerHeight||800,Wn=60,$t=30,Ht={id:Date.now()+Ue,x:Math.random()*(ys-Wn-$t*2)+$t,y:Math.random()*(Fn-Wn-$t*2-200)+100,imageId:ht};y.value.push(Ht),setTimeout(()=>{const Kn=y.value.findIndex(bn=>bn.id===Ht.id);Kn>-1&&y.value.splice(Kn,1)},2e3)}}if(i.value)try{await e.updateGameData({huntingTotalClicks:ie.value,huntingLevel:H.value})}catch(Ct){console.error("   :",Ct)}const Vt=Math.min(window.innerWidth||500,500),Rn=window.innerHeight||800,vs=220,ss=Ce>0?80:60,jt=20;let Mn=`${t.value.huntingComplete}
${Oe.toLocaleString()} ${t.value.pointsEarned}`;Ce>0&&(Mn+=`
${t.value.fragmentsEarned} ${Ce} ${t.value.fragmentsEarnedCount}`);const En={id:Date.now(),text:Mn,x:Math.random()*(Vt-vs-jt*2)+jt,y:Math.random()*(Rn-ss-jt*2-200)+100};_.value.push(En),setTimeout(()=>{const Ct=_.value.findIndex(Ue=>Ue.id===En.id);Ct>-1&&_.value.splice(Ct,1)},3e3),setTimeout(()=>{V.value=!1,Z.value=!0,me.value={points:0,fragments:0}},1500)}else{const re=Math.min(window.innerWidth||500,500),ee=window.innerHeight||800,Ae=220,Oe=60,Ze=20,qe={id:Date.now(),text:`${t.value.huntingProgress}: ${ke.value}/10`,x:Math.random()*(re-Ae-Ze*2)+Ze,y:Math.random()*(ee-Oe-Ze*2-200)+100};_.value.push(qe),setTimeout(()=>{const Ce=_.value.findIndex(wt=>wt.id===qe.id);Ce>-1&&_.value.splice(Ce,1)},2e3)}}else if(J==="production"){if(Ve.value++,Ne.value++,Ne.value>=se.value*1e3){se.value++;const re={id:Date.now(),text:`${t.value.production} ${t.value.levelUp} Lv.${se.value}`,x:Math.random()*(Math.min(window.innerWidth||500,500)-220-40)+20,y:Math.random()*(window.innerHeight||500)+100};if(_.value.push(re),setTimeout(()=>{const ee=_.value.findIndex(Ae=>Ae.id===re.id);ee>-1&&_.value.splice(ee,1)},3e3),i.value)try{await e.updateGameData({productionLevel:se.value,productionTotalClicks:Ne.value})}catch(ee){console.error("   :",ee)}}if(Ve.value>=10){const ee=tt(se.value),Ae=Qe()/100,Oe=Math.floor(100*ee*(1+Ae)),Ze=a.value+Oe;await p(Ze),Ve.value=0,z.value=!0,ue.value=!1,await ve();const qe=Math.random();let Ce=0;qe<.3?Ce=1:qe<.4&&(Ce=2),Pe.value={points:Oe,fragments:Ce};const wt={id:Date.now(),points:Oe,x:50,y:20};if(A.value.push(wt),setTimeout(()=>{const Ue=A.value.findIndex(ht=>ht.id===wt.id);Ue>-1&&A.value.splice(Ue,1)},2e3),await N(ln.value,10),Ce>0){const Ue=d.value+Ce;d.value=Ue,await m(Ue);for(let ht=0;ht<Ce;ht++){const ys=Math.floor(Math.random()*6)+1,Fn=Math.min(window.innerWidth||500,500),Wn=window.innerHeight||800,$t=60,Ht=30,Kn={id:Date.now()+ht,x:Math.random()*(Fn-$t-Ht*2)+Ht,y:Math.random()*(Wn-$t-Ht*2-200)+100,imageId:ys};y.value.push(Kn),setTimeout(()=>{const bn=y.value.findIndex(Ts=>Ts.id===Kn.id);bn>-1&&y.value.splice(bn,1)},2e3)}}if(i.value)try{await e.updateGameData({productionTotalClicks:Ne.value,productionLevel:se.value})}catch(Ue){console.error("   :",Ue)}const Vt=Math.min(window.innerWidth||500,500),Rn=window.innerHeight||800,vs=220,ss=Ce>0?80:60,jt=20,Mn=Math.round(Qe());let En=`${t.value.productionComplete}
${Oe.toLocaleString()} ${t.value.pointsEarned}`;Mn>0&&(En+=`
(NFT Bonus: +${Mn}%)`),Ce>0&&(En+=`
${t.value.fragmentsEarned} ${Ce} ${t.value.fragmentsEarnedCount}`);const Ct={id:Date.now(),text:En,x:Math.random()*(Vt-vs-jt*2)+jt,y:Math.random()*(Rn-ss-jt*2-200)+100};_.value.push(Ct),setTimeout(()=>{const Ue=_.value.findIndex(ht=>ht.id===Ct.id);Ue>-1&&_.value.splice(Ue,1)},3e3),setTimeout(()=>{z.value=!1,ue.value=!0,Pe.value={points:0,fragments:0}},1500)}else{const re=Math.min(window.innerWidth||500,500),ee=window.innerHeight||800,Ae=220,Oe=60,Ze=20,qe={id:Date.now(),text:`${t.value.productionProgress}: ${Ve.value}/10`,x:Math.random()*(re-Ae-Ze*2)+Ze,y:Math.random()*(ee-Oe-Ze*2-200)+100};_.value.push(qe),setTimeout(()=>{const Ce=_.value.findIndex(wt=>wt.id===qe.id);Ce>-1&&_.value.splice(Ce,1)},2e3)}}}};U(0),U(!1),U({stone:0,iron:0,gold:0,diamond:0});const F=U(4e3),j=U(4e3),ne=U(1),ae=U(0),de=U(2e3),Be=U(1),ve=async()=>{if(ae.value=Math.min(de.value,ae.value+50),ae.value>=de.value){if(o.value==="mining"?M.value++:o.value==="hunting"?H.value++:o.value==="exploration"?S.value++:o.value==="production"&&se.value++,ae.value=0,i.value)try{const J={planetEnergy:ae.value,miningLevel:M.value,huntingLevel:H.value,explorationLevel:S.value,productionLevel:se.value};await e.updateGameData(J)}catch(J){console.error("   :",J)}}else if(i.value)try{await e.updateGameData({planetEnergy:ae.value})}catch(J){console.error("   :",J)}},xe=(J=ne.value)=>F.value>=J?(F.value=Math.max(0,F.value-J),localStorage.setItem("currentEnergy",F.value.toString()),localStorage.setItem("energyLastDate",new Date().toDateString()),!0):!1,Le=J=>{try{return new URL(Object.assign({"../assets/img/cat1.png":hl,"../assets/img/cat10.png":fl,"../assets/img/cat11.png":pl,"../assets/img/cat12.png":gl,"../assets/img/cat13.png":ml,"../assets/img/cat14.png":vl,"../assets/img/cat15.png":yl,"../assets/img/cat16.png":Al,"../assets/img/cat17.png":wl,"../assets/img/cat18.png":_l,"../assets/img/cat19.png":El,"../assets/img/cat2.png":bl,"../assets/img/cat20.png":Il,"../assets/img/cat21.png":Cl,"../assets/img/cat22.png":Tl,"../assets/img/cat23.png":Sl,"../assets/img/cat24.png":Pl,"../assets/img/cat25.png":Rl,"../assets/img/cat26.png":xl,"../assets/img/cat27.png":kl,"../assets/img/cat28.png":Nl,"../assets/img/cat29.png":Dl,"../assets/img/cat3.png":Ol,"../assets/img/cat30.png":Ll,"../assets/img/cat4.png":Bl,"../assets/img/cat5.png":Ml,"../assets/img/cat6.png":Fl,"../assets/img/cat7.png":Ul,"../assets/img/cat8.png":Vl,"../assets/img/cat9.png":$l,"../assets/img/catPoint.png":Hl,"../assets/img/catPointPlus.png":Gl,"../assets/img/catProfile01.png":Ql,"../assets/img/catProfile02.png":jl,"../assets/img/cat_ico.png":zl})[`../assets/img/cat${J}.png`],import.meta.url).href}catch{return`/src/assets/img/cat${J}.png`}},it=J=>{try{return new URL(Object.assign({"../assets/img/tul1.png":b5,"../assets/img/tul2.png":I5,"../assets/img/tul3.png":C5,"../assets/img/tul5.png":T5,"../assets/img/tul6.png":S5})[`../assets/img/tul${J}.png`],import.meta.url).href}catch{return`/src/assets/img/tul${J}.png`}},vt=J=>{const re=y.value.findIndex(ee=>ee.id===J);re>-1&&y.value.splice(re,1)},He=U([null,null,null,null]),qt=U(!1),at=U(-1),Bn=U([]),ns=()=>{const J=new Set;return He.value.forEach(re=>{re&&re.id&&J.add(re.id)}),an.value.forEach(re=>{re&&re.id&&J.add(re.id)}),Ut.value.forEach(re=>{re&&re.id&&J.add(re.id)}),ln.value.forEach(re=>{re&&re.id&&J.add(re.id)}),J},Cs=()=>{const J=dt();if(J){const re=J.gameData?.inventory||[],ee=ns(),Ae=Rr();Ae&&Ae.id&&ee.delete(Ae.id),Bn.value=re.filter(Oe=>!ee.has(Oe.id))}else Bn.value=[]},Rr=()=>{const J=yt.value,re=at.value;if(re<0||re>=4)return null;let ee=null;return J==="mining"?ee=He.value:J==="hunting"?ee=an.value:J==="exploration"?ee=Ut.value:J==="production"&&(ee=ln.value),ee&&ee[re]?ee[re]:null},Jt=(J,re,ee)=>{yt.value=re,Cs(),at.value=J,qt.value=!0},pn=async J=>{if(at.value>=0&&at.value<4){const re={id:J.id,level:J.level||1,stars:J.stars||1,imageId:J.imageId||J.id,name:J.name,miningEfficiency:J.miningEfficiency||0,huntingDamage:J.huntingDamage||0,explorationReward:J.explorationReward||0,productionSpeed:J.productionSpeed||0,rarity:J.rarity||null};let ee=[];yt.value==="mining"?ee=He.value:yt.value==="hunting"?ee=an.value:yt.value==="exploration"?ee=Ut.value:yt.value==="production"&&(ee=ln.value);const Ae=ee.findIndex((Ze,qe)=>Ze&&Ze.id===J.id&&qe!==at.value);if(Ae!==-1){ee[Ae]=null;const Ze=yt.value,qe=`${Ze}_${Ae}_${J.id}`;_n.value[Ze][qe]&&delete _n.value[Ze][qe]}if(yt.value==="mining"?(He.value[at.value]=re,Yt("mining")):yt.value==="hunting"?(an.value[at.value]=re,Yt("hunting")):yt.value==="exploration"?(Ut.value[at.value]=re,Yt("exploration")):yt.value==="production"&&(ln.value[at.value]=re,Yt("production")),dt())try{await e.updateGameData({miningCats:He.value,huntingCats:an.value,explorationCats:Ut.value,productionCats:ln.value})}catch(Ze){console.error("   :",Ze)}}qt.value=!1,at.value=-1,yt.value="mining"},ro=async()=>{if(at.value>=0&&at.value<4){const J=yt.value;let re=[];J==="mining"?re=He.value:J==="hunting"?re=an.value:J==="exploration"?re=Ut.value:J==="production"&&(re=ln.value);const ee=re[at.value];if(J==="mining"?(He.value[at.value]=null,Yt("mining")):J==="hunting"?(an.value[at.value]=null,Yt("hunting")):J==="exploration"?(Ut.value[at.value]=null,Yt("exploration")):J==="production"&&(ln.value[at.value]=null,Yt("production")),ee&&ee.id){const Oe=`${J}_${at.value}_${ee.id}`;_n.value[J][Oe]&&delete _n.value[J][Oe]}if(dt())try{await e.updateGameData({miningCats:He.value,huntingCats:an.value,explorationCats:Ut.value,productionCats:ln.value})}catch(Oe){console.error("   :",Oe)}}qt.value=!1,at.value=-1,yt.value="mining"},ar=()=>{qt.value=!1,at.value=-1,yt.value="mining"},an=U([null,null,null,null]),Ut=U([null,null,null,null]),ln=U([null,null,null,null]),yt=U("mining"),js=U({mining:null,hunting:null,exploration:null,production:null}),_n=U({mining:{},hunting:{},exploration:{},production:{}}),Yt=J=>{js.value[J]&&(clearInterval(js.value[J]),js.value[J]=null);let re=[];J==="mining"?re=He.value:J==="hunting"?re=an.value:J==="exploration"?re=Ut.value:J==="production"&&(re=ln.value);const ee=re.filter(Ae=>Ae!==null);ee.length!==0&&(ee.forEach((Ae,Oe)=>{const Ze=`${J}_${Oe}_${Ae.id}`;_n.value[J][Ze]||(_n.value[J][Ze]=0)}),js.value[J]=setInterval(async()=>{let Ae=[];J==="mining"?Ae=He.value:J==="hunting"?Ae=an.value:J==="exploration"?Ae=Ut.value:J==="production"&&(Ae=ln.value);const Oe=Ae.filter(wt=>wt!==null);if(Oe.length===0){Ou(J);return}const qe={mining:t.value.mining,hunting:t.value.hunting,exploration:t.value.exploration,production:t.value.production}[J]||"";let Ce=[];J==="mining"?Ce=He.value:J==="hunting"?Ce=an.value:J==="exploration"?Ce=Ut.value:J==="production"&&(Ce=ln.value);for(const wt of Oe){const Vt=Ce.findIndex(Ue=>Ue&&Ue.id===wt.id);if(Vt===-1)continue;const Rn=`${J}_${Vt}_${wt.id}`;_n.value[J][Rn]||(_n.value[J][Rn]=0),_n.value[J][Rn]+=1;const vs=_n.value[J][Rn],ss=Math.min(window.innerWidth||500,500),jt=window.innerHeight||800,Mn=220,En=60,Ct=20;if(vs>=10){let Ue=1;J==="mining"?Ue=M.value:J==="hunting"?Ue=H.value:J==="exploration"?Ue=S.value:J==="production"&&(Ue=se.value);const ht=100,ys=tt(Ue);let Fn=0;J==="mining"?Fn=ge()/100:J==="hunting"?Fn=fe()/100:J==="exploration"?Fn=we()/100:J==="production"&&(Fn=Qe()/100);const Wn=Math.floor(ht*ys*(1+Fn)),$t=a.value+Wn;a.value=$t,l.value=$t,await p($t),_n.value[J][Rn]=0;let Ht=[];J==="mining"?Ht=He.value:J==="hunting"?Ht=an.value:J==="exploration"?Ht=Ut.value:J==="production"&&(Ht=ln.value),await N(Ht,10),await consumePlanetEnergy();const Kn=Math.random();let bn=0;if(Kn<.3?bn=1:Kn<.4&&(bn=2),bn>0){const Ts=d.value+bn;if(await m(Ts),o.value===J)for(let xr=0;xr<bn;xr++){const io=Math.floor(Math.random()*6)+1,ta=60,na=30,Wl={id:Date.now()+xr+Vt*1e3,x:Math.random()*(ss-ta-na*2)+na,y:Math.random()*(jt-ta-na*2-200)+100,imageId:io};y.value.push(Wl),setTimeout(()=>{const Kl=y.value.findIndex(Ef=>Ef.id===Wl.id);Kl>-1&&y.value.splice(Kl,1)},2e3)}}if(o.value===J){const Ts={id:Date.now()+Vt+wt.id*1e4,text:`${qe} ${t.value.complete}! 100 ${t.value.coin} ${t.value.earned}!`,x:Math.random()*(ss-Mn-Ct*2)+Ct,y:Math.random()*(jt-En-Ct*2-200)+100};_.value.push(Ts),setTimeout(()=>{const xr=_.value.findIndex(io=>io.id===Ts.id);xr>-1&&_.value.splice(xr,1)},3e3)}}else if(o.value===J){const Ue={id:Date.now()+Vt+wt.id*1e3+vs*100,text:`${qe} ${t.value.progress}: ${vs}/10`,x:Math.random()*(ss-Mn-Ct*2)+Ct,y:Math.random()*(jt-En-Ct*2-200)+100};_.value.push(Ue),setTimeout(()=>{const ht=_.value.findIndex(ys=>ys.id===Ue.id);ht>-1&&_.value.splice(ht,1)},2e3)}}},1e3))},Ou=J=>{js.value[J]&&(clearInterval(js.value[J]),js.value[J]=null)},_f=()=>{Object.keys(js.value).forEach(J=>{Ou(J)})};return qr(a,J=>{l.value=J}),qr([He,an,Ut,ln],()=>{["mining","hunting","exploration","production"].forEach(re=>{let ee=[];re==="mining"?ee=He.value:re==="hunting"?ee=an.value:re==="exploration"?ee=Ut.value:re==="production"&&(ee=ln.value);const Ae=ee.map((Oe,Ze)=>Oe?`${re}_${Ze}_${Oe.id}`:null).filter(Oe=>Oe!==null);Object.keys(_n.value[re]).forEach(Oe=>{Ae.includes(Oe)||delete _n.value[re][Oe]})}),Yt("mining"),Yt("hunting"),Yt("exploration"),Yt("production")},{deep:!0}),U(0),U(!1),U([{name:"",level:1,hp:100,maxHp:100,exp:10,gold:5},{name:"",level:2,hp:150,maxHp:150,exp:20,gold:10},{name:"",level:3,hp:200,maxHp:200,exp:35,gold:20}]),U(null),U({level:1,exp:0,maxExp:100,hp:100,maxHp:100,attack:20}),U(0),U(!1),U(null),U([{name:" ",level:1,difficulty:"",rewards:["","",""],description:"      .",discovered:!0},{name:" ",level:2,difficulty:"",rewards:[" ","",""],description:"    .",discovered:!1},{name:" ",level:3,difficulty:"",rewards:[" "," "," "],description:"    .",discovered:!1}]),U({wood:0,fruit:0,herb:0,artifact:0,magicStone:0,gem:0,dragonScale:0,manaCrystal:0,rareGem:0}),U(0),U(!1),U(null),U({wood:10,stone:5,iron:3,gold:1,diamond:0,herb:8,fruit:12}),U([{id:"woodenSword",name:" ",level:1,materials:{wood:5,stone:2},result:{woodenSword:1},time:30,description:"  ."},{id:"ironSword",name:" ",level:2,materials:{wood:3,iron:5,stone:3},result:{ironSword:1},time:60,description:"  ."},{id:"healthPotion",name:" ",level:1,materials:{herb:3,fruit:2},result:{healthPotion:1},time:20,description:"  ."}]),U({woodenSword:0,ironSword:0,healthPotion:0}),(J,re)=>(L(),B("div",r8,[ze(jn,{coinCount:a.value,currentEnergy:F.value,maxEnergy:j.value,totalCoin:c.value,catCount:J.catCount},null,8,["coinCount","currentEnergy","maxEnergy","totalCoin","catCount"]),h("button",{class:"inventoryIconBtn",onClick:r,title:"Inventory"},[h("img",{src:Me(U5),alt:"Inventory",class:"inventoryIcon"},null,8,i8)]),h("main",o8,[h("div",a8,[h("button",{class:De(["modeTab",{active:o.value==="mining"}]),onClick:re[0]||(re[0]=ee=>O("mining"))},[h("img",{src:o.value==="mining"?Me(q5):Me(J5),alt:"Mining",class:"modeTabIcon"},null,8,l8),h("span",c8,"Lv."+E(M.value),1)],2),h("button",{class:De(["modeTab",{active:o.value==="hunting"}]),onClick:re[1]||(re[1]=ee=>O("hunting"))},[h("img",{src:o.value==="hunting"?Me(Y5):Me(X5),alt:"Hunting",class:"modeTabIcon"},null,8,u8),h("span",d8,"Lv."+E(H.value),1)],2),h("button",{class:De(["modeTab",{active:o.value==="exploration"}]),onClick:re[2]||(re[2]=ee=>O("exploration"))},[h("img",{src:o.value==="exploration"?Me(Z5):Me(e8),alt:"Exploration",class:"modeTabIcon"},null,8,h8),h("span",f8,"Lv."+E(S.value),1)],2),h("button",{class:De(["modeTab",{active:o.value==="production"}]),onClick:re[3]||(re[3]=ee=>O("production"))},[h("img",{src:o.value==="production"?Me(t8):Me(n8),alt:"Production",class:"modeTabIcon"},null,8,p8),h("span",g8,"Lv."+E(se.value),1)],2)]),h("div",m8,[h("div",v8,E(f.value),1),h("div",y8,[(L(!0),B(Re,null,We(A.value,ee=>(L(),B("div",{key:ee.id,class:"pointAnimation",style:St({left:ee.x+"%",top:ee.y+"%"})}," +"+E(Me(wd)(ee.points)),5))),128))]),h("div",A8,[h("div",w8,[h("img",{src:Me(s8),alt:"Energy",class:"energyIcon"},null,8,_8),h("div",E8,[h("div",{class:"energyFill",style:St({height:ae.value/de.value*100+"%"})},null,4)]),h("span",b8,E(ae.value.toLocaleString())+"/"+E(de.value.toLocaleString()),1)]),h("div",I8,[o.value==="mining"?(L(),B(Re,{key:0},[q.value&&!Q.value?(L(),B("button",{key:0,onClick:re[4]||(re[4]=ee=>W("mining")),class:De(["clickerBtn miningBtn",{"mining-active":I.value>0}])},null,2)):he("",!0),Q.value?(L(),B("div",C8,[h("div",T8,E(t.value.miningComplete),1),h("div",S8,[h("div",P8,E(x.value.points.toLocaleString())+" "+E(t.value.pointsEarned),1),x.value.fragments>0?(L(),B("div",R8,E(t.value.fragmentsEarned)+" "+E(x.value.fragments)+" "+E(t.value.fragmentsEarnedCount),1)):he("",!0)])])):he("",!0)],64)):he("",!0),o.value==="hunting"?(L(),B(Re,{key:1},[Z.value&&!V.value?(L(),B("button",{key:0,onClick:re[5]||(re[5]=ee=>W("hunting")),class:De(["clickerBtn huntingBtn",{"hunting-active":ke.value>0}])},null,2)):he("",!0),V.value?(L(),B("div",x8,[h("div",k8,E(t.value.huntingComplete),1),h("div",N8,[h("div",D8,E(me.value.points.toLocaleString())+" "+E(t.value.pointsEarned),1),me.value.fragments>0?(L(),B("div",O8,E(t.value.fragmentsEarned)+" "+E(me.value.fragments)+" "+E(t.value.fragmentsEarnedCount),1)):he("",!0)])])):he("",!0)],64)):he("",!0),o.value==="exploration"?(L(),B(Re,{key:2},[D.value&&!b.value?(L(),B("button",{key:0,onClick:re[6]||(re[6]=ee=>W("exploration")),class:De(["clickerBtn explorationBtn",{"exploration-active":T.value>0}])},null,2)):he("",!0),b.value?(L(),B("div",L8,[h("div",B8,E(t.value.explorationComplete),1),h("div",M8,[h("div",F8,E(k.value.points.toLocaleString())+" "+E(t.value.pointsEarned),1),k.value.fragments>0?(L(),B("div",U8,E(t.value.fragmentsEarned)+" "+E(k.value.fragments)+" "+E(t.value.fragmentsEarnedCount),1)):he("",!0)])])):he("",!0)],64)):he("",!0),o.value==="production"?(L(),B(Re,{key:3},[ue.value&&!z.value?(L(),B("button",{key:0,onClick:re[7]||(re[7]=ee=>W("production")),class:De(["clickerBtn productionBtn",{"production-active":Ve.value>0}])},null,2)):he("",!0),z.value?(L(),B("div",V8,[h("div",$8,E(t.value.productionComplete),1),h("div",H8,[h("div",G8,E(Pe.value.points.toLocaleString())+" "+E(t.value.pointsEarned),1),Pe.value.fragments>0?(L(),B("div",Q8,E(t.value.fragmentsEarned)+" "+E(Pe.value.fragments)+" "+E(t.value.fragmentsEarnedCount),1)):he("",!0)])])):he("",!0)],64)):he("",!0)])])]),h("div",j8,[h("div",z8,[o.value==="mining"?(L(!0),B(Re,{key:0},We(He.value,(ee,Ae)=>(L(),B("div",{key:Ae,class:De(["catCard",{emptySlot:!ee,working:ee&&o.value==="mining"}]),onClick:Oe=>Jt(Ae,"mining")},[ee?(L(),B("div",K8,[h("img",{src:Le(ee.imageId),alt:"Cat"},null,8,q8)])):he("",!0),ee?he("",!0):(L(),B("div",J8,[h("img",{src:Me(ud),alt:"+",class:"emptySlotIcon"},null,8,Y8)]))],10,W8))),128)):he("",!0),o.value==="hunting"?(L(!0),B(Re,{key:1},We(an.value,(ee,Ae)=>(L(),B("div",{key:Ae,class:De(["catCard",{emptySlot:!ee,working:ee&&o.value==="hunting"}]),onClick:Oe=>Jt(Ae,"hunting")},[ee?(L(),B("div",Z8,[h("img",{src:Le(ee.imageId),alt:"Cat"},null,8,e9)])):he("",!0),ee?he("",!0):(L(),B("div",t9,[h("img",{src:Me(ud),alt:"+",class:"emptySlotIcon"},null,8,n9)]))],10,X8))),128)):he("",!0),o.value==="exploration"?(L(!0),B(Re,{key:2},We(Ut.value,(ee,Ae)=>(L(),B("div",{key:Ae,class:De(["catCard",{emptySlot:!ee,working:ee&&o.value==="exploration"}]),onClick:Oe=>Jt(Ae,"exploration")},[ee?(L(),B("div",r9,[h("img",{src:Le(ee.imageId),alt:"Cat"},null,8,i9)])):he("",!0),ee?he("",!0):(L(),B("div",o9,[h("img",{src:Me(ud),alt:"+",class:"emptySlotIcon"},null,8,a9)]))],10,s9))),128)):he("",!0),o.value==="production"?(L(!0),B(Re,{key:3},We(ln.value,(ee,Ae)=>(L(),B("div",{key:Ae,class:De(["catCard",{emptySlot:!ee,working:ee&&o.value==="production"}]),onClick:Oe=>Jt(Ae,"production")},[ee?(L(),B("div",c9,[h("img",{src:Le(ee.imageId),alt:"Cat"},null,8,u9)])):he("",!0),ee?he("",!0):(L(),B("div",d9,[h("img",{src:Me(ud),alt:"+",class:"emptySlotIcon"},null,8,h9)]))],10,l9))),128)):he("",!0)])])]),ze(zn),h("div",f9,[(L(!0),B(Re,null,We(_.value,ee=>(L(),B("div",{key:ee.id,class:"speechBubble",style:St({left:ee.x+"px",top:ee.y+"px",transform:"translateX(-50%)"})},E(ee.text),5))),128))]),h("div",p9,[(L(!0),B(Re,null,We(y.value,ee=>(L(),B("div",{key:ee.id,class:"catEmoji",style:St({left:ee.x+"px",top:ee.y+"px"})},[h("img",{src:it(ee.imageId),alt:"",class:"tulImage",onError:Ae=>vt(ee.id)},null,40,g9)],4))),128))]),qt.value?(L(),B("div",{key:0,class:"catSelectPopupOverlay",onClick:ar},[h("div",{class:"catSelectPopupContent",onClick:re[8]||(re[8]=kn(()=>{},["stop"]))},[h("div",m9,[h("h3",null,E(t.value.selectCat),1),h("button",{class:"closePopupBtn",onClick:ar},"")]),h("div",v9,[Rr()?(L(),B("div",y9,[h("button",{class:"removeCatBtn",onClick:ro},E(t.value.removeCat),1)])):he("",!0),h("div",A9,[(L(!0),B(Re,null,We(Bn.value,ee=>(L(),B("div",{key:ee.id,class:"availableCatCard",onClick:Ae=>pn(ee)},[h("div",_9,[h("img",{src:Le(ee.imageId||ee.id),alt:"Cat"},null,8,E9)]),h("div",b9,[h("div",I9,E(ee.name),1),h("div",C9,"Lv "+E(String(ee.level||1).padStart(2,"0")),1),h("div",T9,[(L(!0),B(Re,null,We(ee.stars||1,Ae=>(L(),B("span",{key:Ae,class:"star"},""))),128))])])],8,w9))),128))])])])])):he("",!0)]))}},P9=Qt(S9,[["__scopeId","data-v-17b63c0a"]]),R9={class:"miningPage"},x9={class:"mainContent"},k9={class:"miningContainer"},N9={class:"pageHeader"},D9={class:"levelInfo"},O9={class:"miningProgress"},L9={class:"progressBar"},B9={class:"progressText"},M9=["disabled"],F9={key:0},U9={key:1},V9={class:"resources"},$9={class:"resourceList"},H9={class:"resourceItem"},G9={class:"resourceItem"},Q9={class:"resourceItem"},j9={class:"resourceItem"},z9={__name:"MiningPage",setup(n){const e=Pn(),t=on(),s=pe(()=>t.state.coins),r=pe(()=>ms());Nt(()=>{t.loadCurrentUser();const d=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",d),rn(()=>{window.removeEventListener("userDataUpdated",d)})});const i=U(1),o=U(0),a=U(!1),l=U({stone:0,iron:0,gold:0,diamond:0}),c=()=>{if(a.value)return;a.value=!0,o.value=0;const d=setInterval(()=>{if(o.value+=10,o.value>=100){clearInterval(d),a.value=!1,o.value=0;const f=Math.random();f<.4?l.value.stone++:f<.7?l.value.iron++:f<.9?l.value.gold++:l.value.diamond++}},200)};return(d,f)=>(L(),B("div",R9,[ze(jn,{coinCount:s.value},null,8,["coinCount"]),h("main",x9,[h("div",k9,[h("div",N9,[h("button",{class:"backBtn",onClick:f[0]||(f[0]=p=>Me(e).push("/main"))},E(r.value.back),1),h("h2",null," "+E(r.value.mining),1)]),h("div",D9,[h("span",null,E(r.value.miningLevel)+": "+E(i.value),1)]),h("div",O9,[h("div",L9,[h("div",{class:"progressFill",style:St({width:o.value+"%"})},null,4)]),h("span",B9,E(o.value)+"%",1)]),h("button",{class:De(["miningBtn",{mining:a.value}]),onClick:c,disabled:a.value},[a.value?(L(),B("span",U9," "+E(r.value.miningInProgress),1)):(L(),B("span",F9," "+E(r.value.miningStart),1))],10,M9),h("div",V9,[h("h3",null,E(r.value.ownedResources),1),h("div",$9,[h("div",H9,[h("span",null," "+E(r.value.stone),1),h("span",null,E(l.value.stone),1)]),h("div",G9,[h("span",null," "+E(r.value.iron),1),h("span",null,E(l.value.iron),1)]),h("div",Q9,[h("span",null," "+E(r.value.gold),1),h("span",null,E(l.value.gold),1)]),h("div",j9,[h("span",null," "+E(r.value.diamond),1),h("span",null,E(l.value.diamond),1)])])])])]),ze(zn)]))}},W9=Qt(z9,[["__scopeId","data-v-cea6a28a"]]),K9={class:"huntingPage"},q9={class:"mainContent"},J9={class:"huntingContainer"},Y9={class:"pageHeader"},X9={class:"playerStats"},Z9={class:"statsGrid"},e$={class:"statItem"},t$={class:"statItem"},n$={class:"statItem"},s$={class:"statItem"},r$={class:"monsterSelection"},i$={class:"monsterList"},o$=["onClick"],a$={class:"monsterInfo"},l$={class:"monsterName"},c$={class:"monsterLevel"},u$={class:"monsterRewards"},d$={key:0,class:"currentMonster"},h$={class:"monsterHp"},f$={class:"hpBar"},p$={class:"hpText"},g$={class:"huntingProgress"},m$={class:"progressBar"},v$={class:"progressText"},y$=["disabled"],A$={key:0},w$={key:1},_$={__name:"HuntingPage",setup(n){const e=Pn(),t=on(),s=pe(()=>t.state.coins);Nt(()=>{t.loadCurrentUser();const f=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",f),rn(()=>{window.removeEventListener("userDataUpdated",f)})}),U(1);const r=U(0),i=U(!1),o=U([{name:"",level:1,hp:100,maxHp:100,exp:10,gold:5},{name:"",level:2,hp:150,maxHp:150,exp:20,gold:10},{name:"",level:3,hp:200,maxHp:200,exp:35,gold:20}]),a=U(null),l=U({level:1,exp:0,maxExp:100,hp:100,maxHp:100,attack:20}),c=f=>{a.value={...f}},d=()=>{if(!a.value||i.value)return;i.value=!0,r.value=0;const f=setInterval(()=>{const p=Math.floor(Math.random()*l.value.attack)+10;a.value.hp-=p,a.value.hp<=0?(clearInterval(f),i.value=!1,r.value=100,l.value.exp+=a.value.exp,l.value.hp=l.value.maxHp,l.value.exp>=l.value.maxExp&&(l.value.level++,l.value.exp=0,l.value.maxExp=Math.floor(l.value.maxExp*1.5),l.value.attack+=5,l.value.maxHp+=20,l.value.hp=l.value.maxHp),setTimeout(()=>{a.value=null,r.value=0},2e3)):r.value=(a.value.maxHp-a.value.hp)/a.value.maxHp*100},500)};return(f,p)=>(L(),B("div",K9,[ze(jn,{coinCount:s.value},null,8,["coinCount"]),h("main",q9,[h("div",J9,[h("div",Y9,[h("button",{class:"backBtn",onClick:p[0]||(p[0]=m=>Me(e).push("/main"))}," "),p[1]||(p[1]=h("h2",null," ",-1))]),h("div",X9,[p[6]||(p[6]=h("h3",null," ",-1)),h("div",Z9,[h("div",e$,[p[2]||(p[2]=h("span",null,"",-1)),h("span",null,E(l.value.level),1)]),h("div",t$,[p[3]||(p[3]=h("span",null,"",-1)),h("span",null,E(l.value.hp)+"/"+E(l.value.maxHp),1)]),h("div",n$,[p[4]||(p[4]=h("span",null,"",-1)),h("span",null,E(l.value.attack),1)]),h("div",s$,[p[5]||(p[5]=h("span",null,"",-1)),h("span",null,E(l.value.exp)+"/"+E(l.value.maxExp),1)])])]),h("div",r$,[p[7]||(p[7]=h("h3",null," ",-1)),h("div",i$,[(L(!0),B(Re,null,We(o.value,m=>(L(),B("div",{key:m.name,class:De(["monsterCard",{selected:a.value?.name===m.name}]),onClick:_=>c(m)},[h("div",a$,[h("span",l$,E(m.name),1),h("span",c$,"Lv."+E(m.level),1)]),h("div",u$,[h("span",null,"EXP: "+E(m.exp),1),h("span",null,"Gold: "+E(m.gold),1)])],10,o$))),128))])]),a.value?(L(),B("div",d$,[h("h3",null,E(a.value.name)+" (Lv."+E(a.value.level)+")",1),h("div",h$,[h("div",f$,[h("div",{class:"hpFill",style:St({width:a.value.hp/a.value.maxHp*100+"%"})},null,4)]),h("span",p$,E(a.value.hp)+"/"+E(a.value.maxHp),1)]),h("div",g$,[h("div",m$,[h("div",{class:"progressFill",style:St({width:r.value+"%"})},null,4)]),h("span",v$,E(Math.floor(r.value))+"%",1)]),h("button",{class:De(["huntingBtn",{hunting:i.value}]),onClick:d,disabled:i.value},[i.value?(L(),B("span",w$,"  ...")):(L(),B("span",A$,"  "))],10,y$)])):he("",!0)])]),ze(zn)]))}},E$=Qt(_$,[["__scopeId","data-v-a71dac33"]]),b$={class:"explorationPage"},I$={class:"mainContent"},C$={class:"explorationContainer"},T$={class:"pageHeader"},S$={class:"levelInfo"},P$={class:"locationSelection"},R$={class:"locationList"},x$=["onClick"],k$={class:"locationInfo"},N$={class:"locationHeader"},D$={class:"locationName"},O$={class:"locationLevel"},L$={class:"locationDifficulty"},B$={class:"locationDescription"},M$={class:"locationRewards"},F$={key:0,class:"undiscoveredOverlay"},U$={key:0,class:"currentExploration"},V$={class:"explorationProgress"},$$={class:"progressBar"},H$={class:"progressText"},G$=["disabled"],Q$={key:0},j$={key:1},z$={class:"explorationRewards"},W$={class:"rewardsGrid"},K$={class:"rewardIcon"},q$={class:"rewardAmount"},J$={__name:"ExplorationPage",setup(n){const e=Pn(),t=on(),s=pe(()=>t.state.coins);Nt(()=>{t.loadCurrentUser();const p=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",p),rn(()=>{window.removeEventListener("userDataUpdated",p)})});const r=U(1),i=U(0),o=U(!1),a=U(null);U([]);const l=U([{name:" ",level:1,difficulty:"",rewards:["","",""],description:"      .",discovered:!0},{name:" ",level:2,difficulty:"",rewards:[" ","",""],description:"    .",discovered:!1},{name:" ",level:3,difficulty:"",rewards:[" "," "," "],description:"    .",discovered:!1},{name:" ",level:4,difficulty:" ",rewards:[""," "," "],description:"    .",discovered:!1}]),c=U({wood:0,fruit:0,herb:0,artifact:0,magicStone:0,gem:0,dragonScale:0,manaCrystal:0,rareGem:0,skyStone:0,mysteriousEnergy:0,legendaryItem:0}),d=p=>{p.discovered&&(a.value=p)},f=()=>{if(!a.value||o.value)return;o.value=!0,i.value=0;const p=setInterval(()=>{if(i.value+=5,i.value>=100){clearInterval(p),o.value=!1,i.value=0;const m=Math.floor(Math.random()*a.value.rewards.length),_=a.value.rewards[m],y={:"wood",:"fruit",:"herb"," ":"artifact",:"magicStone",:"gem"," ":"dragonScale"," ":"manaCrystal"," ":"rareGem",:"skyStone"," ":"mysteriousEnergy"," ":"legendaryItem"};if(y[_]&&c.value[y[_]]++,Math.random()<.3){const A=l.value.find(w=>!w.discovered);A&&(A.discovered=!0)}r.value++,setTimeout(()=>{a.value=null},2e3)}},300)};return(p,m)=>(L(),B("div",b$,[ze(jn,{coinCount:s.value},null,8,["coinCount"]),h("main",I$,[h("div",C$,[h("div",T$,[h("button",{class:"backBtn",onClick:m[0]||(m[0]=_=>Me(e).push("/main"))}," "),m[1]||(m[1]=h("h2",null," ",-1))]),h("div",S$,[h("span",null," : "+E(r.value),1)]),h("div",P$,[m[3]||(m[3]=h("h3",null," ",-1)),h("div",R$,[(L(!0),B(Re,null,We(l.value,_=>(L(),B("div",{key:_.name,class:De(["locationCard",{selected:a.value?.name===_.name,undiscovered:!_.discovered}]),onClick:y=>d(_)},[h("div",k$,[h("div",N$,[h("span",D$,E(_.name),1),h("span",O$,"Lv."+E(_.level),1)]),h("span",L$,E(_.difficulty),1),h("p",B$,E(_.description),1),h("div",M$,[(L(!0),B(Re,null,We(_.rewards,y=>(L(),B("span",{key:y,class:"rewardTag"},E(y),1))),128))])]),_.discovered?he("",!0):(L(),B("div",F$,[...m[2]||(m[2]=[h("span",null," ",-1)])]))],10,x$))),128))])]),a.value?(L(),B("div",U$,[h("h3",null,E(a.value.name)+"  ",1),h("div",V$,[h("div",$$,[h("div",{class:"progressFill",style:St({width:i.value+"%"})},null,4)]),h("span",H$,E(i.value)+"%",1)]),h("button",{class:De(["explorationBtn",{exploring:o.value}]),onClick:f,disabled:o.value},[o.value?(L(),B("span",j$,"  ...")):(L(),B("span",Q$,"  "))],10,G$)])):he("",!0),h("div",z$,[m[4]||(m[4]=h("h3",null," ",-1)),h("div",W$,[(L(!0),B(Re,null,We(c.value,(_,y)=>Wt((L(),B("div",{key:y,class:"rewardItem"},[h("span",K$,E(y==="wood"?"":y==="fruit"?"":y==="herb"?"":y==="artifact"?"":y==="magicStone"||y==="gem"?"":y==="dragonScale"?"":y==="manaCrystal"?"":y==="rareGem"?"":y==="skyStone"?"":y==="mysteriousEnergy"?"":y==="legendaryItem"?"":""),1),h("span",q$,E(_),1)])),[[S1,_>0]])),128))])])])]),ze(zn)]))}},Y$=Qt(J$,[["__scopeId","data-v-588d2c1d"]]),X$={class:"productionPage"},Z$={class:"mainContent"},eH={class:"productionContainer"},tH={class:"pageHeader"},nH={class:"levelInfo"},sH={class:"inventory"},rH={class:"inventoryGrid"},iH={class:"materialIcon"},oH={class:"materialName"},aH={class:"materialAmount"},lH={class:"recipes"},cH={class:"recipeList"},uH=["onClick"],dH={class:"recipeInfo"},hH={class:"recipeHeader"},fH={class:"recipeName"},pH={class:"recipeLevel"},gH={class:"recipeDescription"},mH={class:"recipeMaterials"},vH={class:"recipeTime"},yH={key:0,class:"currentProduction"},AH={class:"productionProgress"},wH={class:"progressBar"},_H={class:"progressText"},EH=["disabled"],bH={key:0},IH={key:1},CH={class:"producedItems"},TH={class:"itemsGrid"},SH={class:"itemIcon"},PH={class:"itemName"},RH={class:"itemAmount"},xH={__name:"ProductionPage",setup(n){const e=Pn(),t=on(),s=pe(()=>t.state.coins);Nt(()=>{t.loadCurrentUser();const _=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",_),rn(()=>{window.removeEventListener("userDataUpdated",_)})});const r=U(1),i=U(0),o=U(!1),a=U(null),l=U({wood:10,stone:5,iron:3,gold:1,diamond:0,herb:8,fruit:12}),c=U([{id:"woodenSword",name:" ",level:1,materials:{wood:5,stone:2},result:{woodenSword:1},time:30,description:"  ."},{id:"ironSword",name:" ",level:2,materials:{wood:3,iron:5,stone:3},result:{ironSword:1},time:60,description:"  ."},{id:"goldenSword",name:" ",level:3,materials:{iron:3,gold:8,diamond:1},result:{goldenSword:1},time:120,description:"   ."},{id:"healthPotion",name:" ",level:1,materials:{herb:3,fruit:2},result:{healthPotion:1},time:20,description:"  ."},{id:"manaPotion",name:" ",level:2,materials:{herb:5,fruit:3,stone:1},result:{manaPotion:1},time:40,description:"  ."},{id:"magicRing",name:" ",level:3,materials:{gold:5,diamond:2,herb:4},result:{magicRing:1},time:90,description:"  ."}]),d=U({woodenSword:0,ironSword:0,goldenSword:0,healthPotion:0,manaPotion:0,magicRing:0}),f=_=>{Object.entries(_.materials).every(([A,w])=>l.value[A]>=w)&&_.level<=r.value&&(a.value=_)},p=()=>{if(!a.value||o.value)return;Object.entries(a.value.materials).forEach(([y,A])=>{l.value[y]-=A}),o.value=!0,i.value=0;const _=setInterval(()=>{i.value+=100/(a.value.time/.1),i.value>=100&&(clearInterval(_),o.value=!1,i.value=0,Object.entries(a.value.result).forEach(([y,A])=>{d.value[y]+=A}),Math.random()<.1&&r.value++,setTimeout(()=>{a.value=null},2e3))},100)},m=_=>Object.entries(_.materials).every(([A,w])=>l.value[A]>=w)&&_.level<=r.value;return(_,y)=>(L(),B("div",X$,[ze(jn,{coinCount:s.value},null,8,["coinCount"]),h("main",Z$,[h("div",eH,[h("div",tH,[h("button",{class:"backBtn",onClick:y[0]||(y[0]=A=>Me(e).push("/main"))}," "),y[1]||(y[1]=h("h2",null," ",-1))]),h("div",nH,[h("span",null," : "+E(r.value),1)]),h("div",sH,[y[2]||(y[2]=h("h3",null," ",-1)),h("div",rH,[(L(!0),B(Re,null,We(l.value,(A,w)=>(L(),B("div",{key:w,class:"inventoryItem"},[h("span",iH,E(w==="wood"?"":w==="stone"?"":w==="iron"?"":w==="gold"?"":w==="diamond"?"":w==="herb"?"":w==="fruit"?"":""),1),h("span",oH,E(w),1),h("span",aH,E(A),1)]))),128))])]),h("div",lH,[y[3]||(y[3]=h("h3",null," ",-1)),h("div",cH,[(L(!0),B(Re,null,We(c.value,A=>(L(),B("div",{key:A.id,class:De(["recipeCard",{selected:a.value?.id===A.id,disabled:!m(A)}]),onClick:w=>f(A)},[h("div",dH,[h("div",hH,[h("span",fH,E(A.name),1),h("span",pH,"Lv."+E(A.level),1)]),h("p",gH,E(A.description),1),h("div",mH,[(L(!0),B(Re,null,We(A.materials,(w,I)=>(L(),B("span",{key:I,class:"materialTag"},E(I)+" x"+E(w),1))),128))]),h("div",vH,[h("span",null," "+E(A.time)+"",1)])])],10,uH))),128))])]),a.value?(L(),B("div",yH,[h("h3",null,E(a.value.name)+"  ",1),h("div",AH,[h("div",wH,[h("div",{class:"progressFill",style:St({width:i.value+"%"})},null,4)]),h("span",_H,E(Math.floor(i.value))+"%",1)]),h("button",{class:De(["productionBtn",{producing:o.value}]),onClick:p,disabled:o.value},[o.value?(L(),B("span",IH,"  ...")):(L(),B("span",bH,"  "))],10,EH)])):he("",!0),h("div",CH,[y[4]||(y[4]=h("h3",null," ",-1)),h("div",TH,[(L(!0),B(Re,null,We(d.value,(A,w)=>Wt((L(),B("div",{key:w,class:"itemCard"},[h("span",SH,E(w==="woodenSword"?"":w==="ironSword"?"":w==="goldenSword"?"":w==="healthPotion"?"":w==="manaPotion"?"":w==="magicRing"?"":""),1),h("span",PH,E(w),1),h("span",RH,E(A),1)])),[[S1,A>0]])),128))])])])]),ze(zn)]))}},kH=Qt(xH,[["__scopeId","data-v-61ce148b"]]),n_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAB3CAYAAACwoUjjAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA1gSURBVHgB7V1pbBTXHX+za+/6PrkCJALiJAiQRUODDbQBVIUGmqgpigtKqSBNpab90EMqapIPsaJ8bEibRqIpbT9wqG0oSKmSCholIQelLYl6pClHnYai2Oaw8XrX6/XeL7/f7hv8WO+uvXj2mA0/6a+ZnZl3/N/xv97MWyEKiBUrVlT6/f4NUsrDoNdAO0FNohwBxoyNGze6R0dH74vH45fxOwyKgvw+n2/vhg0bakWZwQgEAvPRw8+CyT45EWNDQ0NPrFq1qlqUC9atW1eBHv4Oe1VmAHp/xOPxfJ/DX5QDOjo6GjCED6vhLLMw/jEOS5HEEHYGmKgHw7tisZhfTo4I6LdMI+yKtrY2Nxh+AkyMyqljFHP/a5wSwoYwxsbGFmHIXpC5IYY07+K4UNhsmBuodCPo12rI5oooGD/u9XpvE3ZhvKurywkV1YXKe+X1IzwyMvI8p4iwA5YvX96EXnodFY/L6eEKGm81jqXd26hgC3roOUjroJw+wsjnVzhWiVIFhyKElymtp9vLJi6Hw+FOWaK9TeF1KwRQn7QWlOZv4NggLIRDWABUinbzDw3DmCmshQN5dmAE3VtyujsYDN4GxvtlfsCpchpkmQqbdk+3t7fXYt49itNWkR+QUTbqT0E1othAJRgU+Drm3aDMP8bgrX2r6J4YKtIKeltaJ62zAo17ESpxbXd3tyWyKGewxeFQfFPm5lBMFzRr6abWiWIABc+D8fBvWaBe1uCjmVtwab5gwYIqDLNuVMAKyytXYJTHT2N+31WwYc4WjkQiq9DL/5fFA6Mwb0F/F8QFdcCZ6ERLn5WFH9apCGK0PblkyRKXyCcYsYSK+plMhnCLDZqo7+W1tzl/IEA+p+LWpQL2dnfeehsFtIBhrkrEZGmhDxah9UINGVdDcD2G45gsPbAT/gq6VUxxmE/aOmzBaDTa6XA4foCfpejQk4c7Mcx3QuZYUz+0YB16+UV5fUG+ggFTzwPN8tC0jRYG+WAEfAl5+mTxVdRkYKe8IqdpojJ2vQCZnJSlz7CJEdA3QFk9sYxzGsPEiWF9N07ttL7EJd+doOuL4KC1ZjHoLu3TyyZC6KyfyCxxtbQ9DbexBpbX04hP3SXst4rogqZ5BLr7HsqkqSbiIvpK9PIVaV/QIXkVHTc7HYOpPc1QbnN1dfVO9HKjsC/Yw2vBw3cnWxpKLLxhPjAARz/ZbnM5HXowam9OZVTvaToU6zEftuOcrWPvNwKSuBnT9NupvX2VaQgvNx54EKfFiT/lB+7a2tptPT098/SLJtPGiRMn2vDAF3Buy7cAsmAWBNrDE+Y2xn4d6AVZGsEBy0FNNDQ0dL+pwjhvHYx5VVRUvITzGaI8EQW9Ck9se0NDw6ADc9mJtagVuGjft3omB6fsetCX6YWxl10YAWtF+c3lVLjq6uq+euzYMZcB1/GzMEZehiKfI8ofvaB1FTU1NZ8RSe/k0wDyeTNV1qAoD0NkKhgDBRwQYn+HJdbDtRJR3oghKPIhjh86jx49GnC5XGNz5869BcdmzO24aoBEI+A39XjiqEGa99V5KhLpkc7Q0iVUZlJtxmPqnA/ESVo+PNcLM1LKMeuWsVyh1U2VF/d4PB8dOXJk35YtW04wwya3271y3rx59Tt27LgVmFlfX187Y8aM5jlz5syHLe6qrKx0V1VVNfEcmUTRYsOhUMiL35WosBuNVQ2qwj0og0gUo2cIEdQQBOQs5F1N3nCdq40eWEee4eFhHxybGKRpLfKtgyVYAzvBjbycqF8E5c/FucS1SpTB91kM5geMIG8ffGU/64Qya5C+xel0UguNMX88E0AagbIbcb0Cy8kDg4ODA/v27XvnwIEDPRDcfybTt4CWgRyooIEHE02Eo3meOC5cuLCmpaWlEi0Wgy07arY0782fP79q9uzZVShYDgwMhM6fPx/Edd43mpubXaiYAUbZWOT1mh4yyzN7FIzKzs7O1sbGxgo0RgUYiTPRxYsXw2fOnPEzD1V2ol5Lly6tQ/4VyD9y+vTpUZWfRIM4mB4MR9jzyEcgGxopJ1kQVRWNE6fKLN2wuVpBJMx4j8h0PxeYja1dktnyzlYvDcwvBDpJg8SrqFndyCTJpZaxkeWefl+muTYpUkeDSD/Hp1Kva54D+UCjbNKY+sE3d6rFJL1tIQpRhg4PqAfk11uGsWJGEN3qnEsk9K2py53qN88pGcOgoLruUM+b04ONGFJHNqJp3kZUmqBKL9S9CpWeR0PlX6POHVr6mMojpI5Olc6tnjPvRdXzLnU9IJL6uR+UkEXphoN+TY+sONU9kzGR8pz5rK5SjJTrQlw7kjIN20otz7jGdFTLw9DqZT4X0/J2pJRX7nbIDdzADXyakCo9zd+65DNhqhRTeqcaHk4xrl5M1UOKpJQpM9TD0PLXn0vVDKl2hC694ynpZbpyDe1InTxXJPVxjRjXxybDpv6OqesR9Yx+zzSko1oFAqpSUl2PiHGda4hxm4B5uLT0AS1vk7GoKttUQS4xrqd1+4D3/GJcp1NP+9Q9abYuo6CLQanfMuv60GycTJbUBFs5DfT8JjNRpZi66ZpaL5nm2gDoLMhrWjVceJ+RIbNckDqkjCz56UNaWFB2urRm/hwJHMmM+A5w+DBu1CCm4GGZSOfRpPGMzGenZWPrrme6vCarl4LZ8+SzkUwnBBATI0jIFjEQQHDB2Y7AWTdNN+P222+vpT+N67FTp06NaBUw4LA7Fy9eXAef2g1/2MF88FwUDnwEy0UevbJaxa4OX5aNPCqampoqESSIMZ1KY9BXnzlzphtBA6O/vz944cKFoF4264UAfsKfPnfuXMC8x3K0c4ngglmmi0wH4WxHtm/fvmDbtm2fb21tnYnfs+hwMzrCeAuCCzW41gyGqhnqgSPvQYMEEDQIwVmnE98AqkflGVnhkm+AERDkYYCBCyrCEg0zUSAwivQIoPgZpnIgetKISjeB6Wb8Tow4REkCSDeIchmAYLkuRkFQXhBZMBLBVywiuN+IdIzoJCIuyNvLD+FAYQQzehFAGPJ6vQE0xsCePXs+unTpUpA8Cb5XefDgwe/hgbPMSCY/8GT8ii+cRhVdjWmpI+/F0tyT2jNxhZhGUZYBpkj8wi7MysrkmwNxjRLPpl7X6hXT7snUevEe82aICYTBEwz09fW9t3v37oe5wsFeaUHLv4QWWyMs+k6rFMEGAZ/vY1R8hcP7NjDcJsqYYYJBR8ga8nknGaWjX7ofcVqPVjLN9Z1RUf7gvB+FsPuHAxLtAib9KTExGlJuoCo80dbWdtqxdevWEFTBi2Lczi5XRKES37zjjjvCCeMA3U4TdC/oi2LcaSg3DEJ6PwBh9peExF6/fv0wVi5ewOmwKE/Q0zoMLfVPoQcIobSrYDo+jV4PyfICbZp+WGLtIp0To/Ym+ViWFyIQYPtvuummq58hX2OQbN68uQ8ifb8oL6E2Arv9MByVkHlhQnejZfgu5RugNmF/BDFyfwHTsxsWmde8OMH03LRp02V4QAdFMtRiZ9AheQUMP6UzTKSNTuDh2aD9eJivTdrSJkf9+WLAvdDN76beS8sQVNgVuGN7hH3N0zCE8u8XLVr0QU6p0FIN6lsIu70vSn/6HdCsTLxlHLoY2j7otmdw+j9R+LXk6YBBgz2o/1CmB7LOV1gwl3H4sUjGoO0A9vR/cHxbZHGgsjKN1qL5RmfkTWEPL8yPGNpTGzdu7BPTGZ2MKfEbRr6KJUsbjLX9Tlq1Mwa/kIdd/nNZ2kKNe6CsFxa+8mnuQvU3WXofjRMB0I9AU9qpLhff2dvZ2fkvxKDvx1wvpRfiKWsouB5DvfzCanR1dXHl40lZnP1N0oJ7NHCvBmHhsE4FPy9eiLK4zWUpfKwWhp/wHJZ+ctpHOFe7WsL97EdBL4viu59k+hwcit/09vYGRZ5BocbefksWT6gxGnKOXxnl8uWsiesNAvpWrlz5AYTa3RAe3Hyt0F8GhDDNnl+2bNmh48ePR0ShQKNFbYrqk4UFe/l9HOeJYkAmv9ybdBtri+GHBnmkaBstcj5hmK3ljnCyMKAMoSzJ136GUwN3oIP596jM/243HNYD0BzbcF78D+dQiVrQH2V+h3loeHh4F/drECUCqjFuc8n9PfNhtDDPPgQHLInQWhX0k4irncP87hbJl9itBl+a+4Pb7e4XpQb0RgOI21xbarRgLveil6e8C9VksHqFMtLR0XG2srLyAWHd95sBjKBn29vb/zQ0NBQVpQh0DD8++6W0YFcr9PAYNAN342gWpQy1fT13YJ/u5jAxMPwapLU99lvhsi/33JfTCy950XgPXo9DUSxQhbWpDZ+uR3ezsbh1ve121TFd0Jz3M+MiurThf3EkoDyxh2Tu/7ryeN43Qc0nwEQ91sT4nzmTSXPa1iNg+BmZ/H8d+/WyBgNrYkun8FpHFMLv0Jo1a/IeaS3E2rNcvXr1f8EQFwOzhWiDiHe9DsNmTJQLuEoCL+lxGhxperkXw3qXTEZDbD2sJ4B/agDm9srkv6RxjvNl9cs+n+8+taFSeTFswuPxNMnkvxxyX+FDcCTuUaGfgjH8CaOAK+b7pW9IAAAAAElFTkSuQmCC",NH={class:"exchangePage"},DH={class:"mainContent"},OH={class:"contentWrapper"},LH={class:"tabButtons"},BH={class:"tradeSection"},MH={class:"sectionTitle"},FH={class:"exchangeDisplay"},UH={class:"exchangeItem"},VH={class:"exchangeItem"},$H={class:"exchangeValue"},HH=["disabled"],GH={class:"tradeSection"},QH={class:"sectionTitle"},jH={class:"exchangeDisplay"},zH={class:"exchangeItem"},WH={class:"exchangeItem"},KH={class:"exchangeValue"},qH=["disabled"],s_=1e3,JH={__name:"ExchangePage",setup(n){const e=Pn(),t=on(),s=pe(()=>ms()),r=U("exchange"),i=pe(()=>t.state.coins),o=pe(()=>t.state.totalCoin),a=U(null),l=U(""),c=U(""),d=pe(()=>{if(!l.value)return 0;const A=parseFloat(l.value)||0;return Math.floor(A/s_)}),f=pe(()=>{if(!c.value)return 0;const A=parseFloat(c.value)||0;return Math.floor(A*s_)}),p=()=>{const A=dt();A&&(a.value=A),t.loadCurrentUser()},m=async()=>{if(!a.value){alert(s.value.loginRequired);return}if(!l.value||parseFloat(l.value)<=0){alert("Please enter the point amount.");return}const A=parseFloat(l.value),w=d.value;if(i.value<A){alert(`${s.value.insufficientPoints}
Required: ${A.toLocaleString()} Point
Owned: ${i.value.toLocaleString()} Point`);return}if(w<=0){alert("Not enough points to buy at least 1 coin.");return}const I=i.value-A,C=o.value+w;await t.updateMultiple({coins:I,totalCoin:C})?(alert(`${s.value.purchaseSuccess}
${w} ${s.value.coin} ${s.value.buy}
${s.value.pointUsed}: ${A.toLocaleString()}`),l.value=""):alert(s.value.tradeFailed)},_=async()=>{if(!a.value){alert(s.value.loginRequired);return}if(!c.value||parseFloat(c.value)<=0){alert("Please enter the coin amount.");return}const A=parseFloat(c.value),w=A;if(o.value<w){alert(`${s.value.insufficientCoins}
Required: ${A} ${s.value.coin}
Owned: ${o.value.toLocaleString()} ${s.value.coin}`);return}const I=f.value,C=i.value+I,M=o.value-w;await t.updateMultiple({coins:C,totalCoin:M})?(alert(`${s.value.tradeSuccess}
${A} ${s.value.coin} ${s.value.sell}
${s.value.pointReceived}: ${I.toLocaleString()}`),c.value=""):alert(s.value.tradeFailed)};Nt(()=>{p();const A=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",A),rn(()=>{window.removeEventListener("userDataUpdated",A)})});const y=A=>{A==="exchange"?r.value="exchange":A==="catcraft"&&e.push("/factory")};return(A,w)=>(L(),B("div",NH,[ze(jn,{coinCount:i.value,hideRightIcons:!0},null,8,["coinCount"]),h("main",DH,[h("div",OH,[h("div",LH,[h("button",{class:De(["tabButton",{active:r.value==="exchange"}]),onClick:w[0]||(w[0]=I=>y("exchange"))}," Exchange ",2),h("button",{class:De(["tabButton",{active:r.value==="catcraft"}]),onClick:w[1]||(w[1]=I=>y("catcraft"))}," Cat craft ",2)]),h("div",BH,[h("h3",MH,E(s.value.buy)+" "+E(s.value.coin),1),h("div",FH,[h("div",UH,[w[4]||(w[4]=h("img",{src:Vg,alt:"Point",class:"exchangeIcon"},null,-1)),Wt(h("input",{type:"number","onUpdate:modelValue":w[2]||(w[2]=I=>l.value=I),placeholder:"0",class:"exchangeInput",step:"1",min:"0"},null,512),[[gs,l.value]])]),w[6]||(w[6]=h("img",{src:n_,alt:"Arrow",class:"exchangeArrow"},null,-1)),h("div",VH,[w[5]||(w[5]=h("img",{src:Ah,alt:"Coin",class:"exchangeIcon"},null,-1)),h("div",$H,E(d.value),1)])]),h("button",{class:"submitBtn",onClick:m,disabled:!l.value||parseFloat(l.value)<=0||d.value<=0},E(s.value.buyButton),9,HH)]),h("div",GH,[h("h3",QH,E(s.value.sell)+" "+E(s.value.coin),1),h("div",jH,[h("div",zH,[w[7]||(w[7]=h("img",{src:Ah,alt:"Coin",class:"exchangeIcon"},null,-1)),Wt(h("input",{type:"number","onUpdate:modelValue":w[3]||(w[3]=I=>c.value=I),placeholder:"0",class:"exchangeInput",step:"0.01",min:"0"},null,512),[[gs,c.value]])]),w[9]||(w[9]=h("img",{src:n_,alt:"Arrow",class:"exchangeArrow"},null,-1)),h("div",WH,[w[8]||(w[8]=h("img",{src:Vg,alt:"Point",class:"exchangeIcon"},null,-1)),h("div",KH,E(f.value),1)])]),h("button",{class:"submitBtn sellBtn",onClick:_,disabled:!c.value||parseFloat(c.value)<=0||f.value<=0},E(s.value.sellButton),9,qH)])])]),ze(zn)]))}},YH=Qt(JH,[["__scopeId","data-v-3a233fe4"]]),wf=()=>{const n=localStorage.getItem("questProgress");return n?JSON.parse(n):{}},BT=n=>{localStorage.setItem("questProgress",JSON.stringify(n))},Tp=n=>{const e=wf();n.forEach(t=>{delete e[t]}),BT(e)},XH=(n,e=1)=>{const t=wf();({mining:[1,9,20],hunting:[2,10,21],exploration:[3,11,22],production:[4,12,23],coinEarned:[5,13,17],levelUp:[6,14,18],nftCreated:[25,26,27],nftOwned:[28,29,30]}[n]||[]).forEach(i=>{t[i]||(t[i]=0),t[i]+=e}),BT(t),window.dispatchEvent(new CustomEvent("questProgressUpdated"))},MT=(n,e)=>{const s=wf()[n]||0;switch(n){case 5:case 13:case 17:return Math.max(s,e?.totalCoin||0);case 6:case 14:case 18:return e?.level||1;case 25:case 26:case 27:return s;case 28:case 29:case 30:const r=e?.inventory||[];return n===28?r.filter(i=>i.stars>=3).length:n===29?r.filter(i=>i.stars>=4).length:n===30?r.filter(i=>i.stars>=5).length:0;default:return s}},ZH=(n,e)=>MT(n.id,e)>=n.total,e7={class:"questPage"},t7={class:"mainContent"},n7={class:"filterTabs"},s7={class:"mainTabs"},r7={class:"questList"},i7={class:"questContent"},o7={class:"questInfo"},a7={class:"questTitle"},l7={class:"questDescription"},c7={key:0,class:"questRewards"},u7={key:0,class:"rewardItem"},d7={key:1,class:"rewardItem"},h7={key:2,class:"rewardItem"},f7=["onClick"],p7={key:1,class:"completedBadge"},g7={key:2,class:"progressBar"},m7={class:"progressText"},v7={__name:"QuestPage",setup(n){const e=on(),t=pe(()=>ms()),s=pe(()=>e.state.coins),r=U("inProgress"),i=U("daily"),o=()=>new Date().toDateString(),a=()=>{const y=localStorage.getItem("questLastDate"),A=o();return y!==A?(localStorage.setItem("questLastDate",A),localStorage.removeItem("rewardedQuests"),!0):!1},l=()=>{const y=localStorage.getItem("rewardedQuests");return y?JSON.parse(y):[]},c=y=>{localStorage.setItem("rewardedQuests",JSON.stringify(y)),localStorage.setItem("questLastDate",o())};t.value.coin,t.value.catFragments,t.value.exp;const d=U([{id:1,title:"Daily Mining 10 Times",description:"Complete 10 mining activities today",completed:!1,rewardReceived:!1,progress:0,total:10,type:"daily",reward:{coins:100,catFragments:5},actionType:"mining"},{id:2,title:"Daily Hunting 5 Times",description:"Defeat 5 monsters",completed:!1,rewardReceived:!1,progress:0,total:5,type:"daily",reward:{coins:100,catFragments:5},actionType:"hunting"},{id:3,title:"Daily Exploration 1 Time",description:"Complete 1 exploration activity",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:150,catFragments:10},actionType:"exploration"},{id:4,title:"Daily Production 3 Items",description:"Produce 3 or more items",completed:!1,rewardReceived:!1,progress:0,total:3,type:"daily",reward:{coins:120,catFragments:8},actionType:"production"},{id:5,title:"Daily Coin 1,000 Acquisition",description:"Acquire 1,000 or more coins",completed:!1,rewardReceived:!1,progress:0,total:1e3,type:"daily",reward:{coins:200,catFragments:15},actionType:"coinEarned"},{id:6,title:"Daily Level Up 1 Time",description:"Level up 1 or more levels",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:300,catFragments:20},actionType:"levelUp"},{id:7,title:"Daily Check-in",description:"Log in to the game and check daily quests",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:50,catFragments:3},actionType:"login"},{id:8,title:"Daily NFT Creation 1",description:"Create 1 cat NFT",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:500,catFragments:30},actionType:"nftCreated"},{id:9,title:"Weekly Quest: Mining Master",description:"Complete 50 mining activities in a week",completed:!1,rewardReceived:!1,progress:0,total:50,type:"weekly",reward:{coins:1e3,catFragments:50},actionType:"mining"},{id:10,title:"Weekly Quest: Hunter",description:"Defeat 100 monsters in a week",completed:!1,rewardReceived:!1,progress:0,total:100,type:"weekly",reward:{coins:2e3,catFragments:100},actionType:"hunting"},{id:11,title:"Weekly Quest: Explorer",description:"Explore 5 new areas",completed:!1,rewardReceived:!1,progress:0,total:5,type:"weekly",reward:{coins:1500,catFragments:80},actionType:"exploration"},{id:12,title:"Weekly Quest: Producer",description:"Produce 50 or more items",completed:!1,rewardReceived:!1,progress:0,total:50,type:"weekly",reward:{coins:1800,catFragments:90},actionType:"production"},{id:13,title:"Weekly Quest: Coin Collector",description:"Acquire 50,000 or more coins",completed:!1,rewardReceived:!1,progress:0,total:5e4,type:"weekly",reward:{coins:5e3,catFragments:200},actionType:"coinEarned"},{id:14,title:"Weekly Quest: Level Up 5",description:"Level up 5 or more levels",completed:!1,rewardReceived:!1,progress:0,total:5,type:"weekly",reward:{coins:3e3,catFragments:150},actionType:"levelUp"},{id:15,title:"Weekly Quest: NFT Collector",description:"Create 5 or more NFTs",completed:!1,rewardReceived:!1,progress:0,total:5,type:"weekly",reward:{coins:4e3,catFragments:250},actionType:"nftCreated"},{id:16,title:"Weekly Quest: Own Rare NFT",description:"Own 1 or more Rare grade (3-star or higher) NFTs",completed:!1,rewardReceived:!1,progress:0,total:1,type:"weekly",reward:{coins:5e3,catFragments:300},actionType:"nftOwned"},{id:17,title:"Monthly Quest: Coin King",description:"Acquire 200,000 or more coins this month",completed:!1,rewardReceived:!1,progress:0,total:2e5,type:"monthly",reward:{coins:2e4,catFragments:1e3},actionType:"coinEarned"},{id:18,title:"Monthly Quest: Extreme Level Up",description:"Level up 20 or more levels",completed:!1,rewardReceived:!1,progress:0,total:20,type:"monthly",reward:{coins:15e3,catFragments:800},actionType:"levelUp"},{id:19,title:"Monthly Quest: NFT Master",description:"Create 20 or more NFTs",completed:!1,rewardReceived:!1,progress:0,total:20,type:"monthly",reward:{coins:25e3,catFragments:1500},actionType:"nftCreated"},{id:20,title:"Monthly Quest: Master Miner",description:"Complete 500 or more mining activities",completed:!1,rewardReceived:!1,progress:0,total:500,type:"monthly",reward:{coins:1e4,catFragments:500},actionType:"mining"},{id:21,title:"Monthly Quest: Warrior",description:"Defeat 500 monsters",completed:!1,rewardReceived:!1,progress:0,total:500,type:"monthly",reward:{coins:12e3,catFragments:600},actionType:"hunting"},{id:22,title:"Monthly Quest: Great Explorer",description:"Explore 20 new areas",completed:!1,rewardReceived:!1,progress:0,total:20,type:"monthly",reward:{coins:1e4,catFragments:500},actionType:"exploration"},{id:23,title:"Monthly Quest: Perfect Producer",description:"Produce 200 various items",completed:!1,rewardReceived:!1,progress:0,total:200,type:"monthly",reward:{coins:15e3,catFragments:700},actionType:"production"},{id:24,title:"Monthly Quest: Own Epic NFT",description:"Own 1 or more Epic grade (4-star or higher) NFTs",completed:!1,rewardReceived:!1,progress:0,total:1,type:"monthly",reward:{coins:3e4,catFragments:2e3},actionType:"nftOwned"},{id:25,title:"Daily NFT Creation 1",description:"Create 1 cat NFT",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:500,catFragments:30},actionType:"nftCreated"},{id:26,title:"Weekly NFT Creation 5",description:"Create 5 cat NFTs",completed:!1,rewardReceived:!1,progress:0,total:5,type:"weekly",reward:{coins:4e3,catFragments:250},actionType:"nftCreated"},{id:27,title:"Monthly NFT Creation 20",description:"Create 20 cat NFTs",completed:!1,rewardReceived:!1,progress:0,total:20,type:"monthly",reward:{coins:25e3,catFragments:1500},actionType:"nftCreated"},{id:28,title:"Own Rare NFT",description:"Own 1 or more Rare grade (3-star or higher) NFTs",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:1e3,catFragments:50},actionType:"nftOwned"},{id:29,title:"Own Epic NFT",description:"Own 1 or more Epic grade (4-star or higher) NFTs",completed:!1,rewardReceived:!1,progress:0,total:1,type:"weekly",reward:{coins:5e3,catFragments:300},actionType:"nftOwned"},{id:30,title:"Own Legendary NFT",description:"Own 1 or more Legendary grade (5-star) NFTs",completed:!1,rewardReceived:!1,progress:0,total:1,type:"monthly",reward:{coins:5e4,catFragments:5e3},actionType:"nftOwned"}]),f=()=>{const y=dt();!y||!y.gameData||d.value.forEach(A=>{const w=MT(A.id,y.gameData);A.progress=w,A.completed=ZH(A,y.gameData)})},p=async y=>{const A=d.value.find(q=>q.id===y);if(!A||!A.completed||A.rewardReceived)return;const w=dt();if(!w){alert(t.value.loginRequired);return}const I=A.reward||{},C={};if(I.coins&&(C.totalCoin=(w.gameData?.totalCoin||0)+I.coins),I.catFragments&&(C.catFragments=(w.gameData?.catFragments||50)+I.catFragments),I.exp){const q=w.gameData?.level||1,x=I.exp,T=Math.floor(x/100);T>0&&(C.level=q+T)}await e.updateGameData(C),A.rewardReceived=!0;const M=l();M.includes(y)||(M.push(y),c(M)),window.dispatchEvent(new CustomEvent("userDataUpdated"));const Q=[];I.coins&&Q.push(`${I.coins} ${t.value.coin}`),I.catFragments&&Q.push(`${I.catFragments} ${t.value.catFragments}`),I.exp&&Q.push(`${I.exp} ${t.value.exp}`),alert(`${t.value.rewardReceived}
You have earned ${Q.join(", ")}.`)},m=pe(()=>{let y=d.value.filter(A=>A.type===i.value);return r.value==="inProgress"?y=y.filter(A=>!A.completed||A.completed&&!A.rewardReceived):r.value==="completed"&&(y=y.filter(A=>A.completed&&A.rewardReceived)),y.sort((A,w)=>A.completed&&!A.rewardReceived&&(w.rewardReceived||!w.completed)?-1:(A.rewardReceived||!A.completed)&&w.completed&&!w.rewardReceived?1:0)}),_=()=>{const y=o();if(localStorage.getItem("questResetDate")!==y){const x=d.value.filter(S=>S.type==="daily").map(S=>S.id);Tp(x);const T=l();T.filter(S=>x.includes(S)).forEach(S=>{const b=T.indexOf(S);b>-1&&T.splice(b,1)}),c(T),d.value.forEach(S=>{S.type==="daily"&&(S.rewardReceived=!1,S.completed=!1,S.progress=0)}),localStorage.setItem("questResetDate",y)}const w=new Date,I=w.getDay(),C=localStorage.getItem("questWeeklyResetDate"),M=new Date(w.setDate(w.getDate()-I+1)).toDateString();if(C!==M){const x=d.value.filter(S=>S.type==="weekly").map(S=>S.id);Tp(x);const T=l();T.filter(S=>x.includes(S)).forEach(S=>{const b=T.indexOf(S);b>-1&&T.splice(b,1)}),c(T),d.value.forEach(S=>{S.type==="weekly"&&(S.rewardReceived=!1,S.completed=!1,S.progress=0)}),localStorage.setItem("questWeeklyResetDate",M)}const Q=localStorage.getItem("questMonthlyResetDate"),q=new Date(w.getFullYear(),w.getMonth(),1).toDateString();if(Q!==q){const x=d.value.filter(S=>S.type==="monthly").map(S=>S.id);Tp(x);const T=l();T.filter(S=>x.includes(S)).forEach(S=>{const b=T.indexOf(S);b>-1&&T.splice(b,1)}),c(T),d.value.forEach(S=>{S.type==="monthly"&&(S.rewardReceived=!1,S.completed=!1,S.progress=0)}),localStorage.setItem("questMonthlyResetDate",q)}};return Nt(()=>{e.loadCurrentUser();const y=()=>{e.loadCurrentUser()};window.addEventListener("userDataUpdated",y),rn(()=>{window.removeEventListener("userDataUpdated",y)}),a(),_();const A=l();d.value.forEach(I=>{A.includes(I.id)&&(I.rewardReceived=!0)}),f();const w=d.value.find(I=>I.id===7&&I.type==="daily");if(w&&!w.completed){w.progress=1,w.completed=!0;const I=wf();I[7]=1,localStorage.setItem("questProgress",JSON.stringify(I))}window.addEventListener("questProgressUpdated",f),window.addEventListener("userDataUpdated",f)}),rn(()=>{window.removeEventListener("questProgressUpdated",f),window.removeEventListener("userDataUpdated",f)}),(y,A)=>(L(),B("div",e7,[ze(jn,{coinCount:s.value},null,8,["coinCount"]),h("main",t7,[h("div",n7,[h("button",{class:De(["filterTab",{active:i.value==="daily"}]),onClick:A[0]||(A[0]=w=>i.value="daily")}," Daily ",2),h("button",{class:De(["filterTab",{active:i.value==="weekly"}]),onClick:A[1]||(A[1]=w=>i.value="weekly")}," Weekly ",2),h("button",{class:De(["filterTab",{active:i.value==="monthly"}]),onClick:A[2]||(A[2]=w=>i.value="monthly")}," Monthly ",2)]),h("div",s7,[h("button",{class:De(["mainTab",{active:r.value==="inProgress"}]),onClick:A[3]||(A[3]=w=>r.value="inProgress")},E(t.value.inProgress),3),h("button",{class:De(["mainTab",{active:r.value==="completed"}]),onClick:A[4]||(A[4]=w=>r.value="completed")},E(t.value.completed),3)]),h("div",r7,[(L(!0),B(Re,null,We(m.value,w=>(L(),B("div",{key:w.id,class:"questCard"},[h("div",i7,[h("div",o7,[h("h3",a7,E(w.title),1),h("p",l7,E(w.description),1),w.reward?(L(),B("div",c7,[w.reward.coins?(L(),B("span",u7,"  "+E(w.reward.coins),1)):he("",!0),w.reward.catFragments?(L(),B("span",d7,"  "+E(w.reward.catFragments),1)):he("",!0),w.reward.exp?(L(),B("span",h7,"  "+E(w.reward.exp),1)):he("",!0)])):he("",!0)]),A[5]||(A[5]=h("div",{class:"questCharacter"},[h("div",{class:"characterImg"},"")],-1))]),w.completed&&!w.rewardReceived?(L(),B("button",{key:0,class:"rewardBtn",onClick:I=>p(w.id)},E(t.value.receive),9,f7)):w.completed&&w.rewardReceived?(L(),B("div",p7,"  "+E(t.value.completed),1)):(L(),B("div",g7,[h("div",{class:"progressFill",style:St({width:w.progress/w.total*100+"%"})},null,4),h("span",m7,E(w.progress)+"/"+E(w.total),1)]))]))),128))])]),ze(zn)]))}},y7=Qt(v7,[["__scopeId","data-v-ff25a02c"]]),et={COMMON:"common",RARE:"rare",EPIC:"epic",LEGENDARY:"legendary"},Sp={[et.COMMON]:.7,[et.RARE]:.9,[et.EPIC]:.98,[et.LEGENDARY]:1},r_={[et.COMMON]:{min:2,max:3},[et.RARE]:{min:3,max:4},[et.EPIC]:{min:4,max:5},[et.LEGENDARY]:{min:5,max:5}},i_={[et.COMMON]:{miningEfficiency:{min:5,max:15},huntingDamage:{min:5,max:15},explorationReward:{min:5,max:15},productionSpeed:{min:5,max:15}},[et.RARE]:{miningEfficiency:{min:15,max:30},huntingDamage:{min:15,max:30},explorationReward:{min:15,max:30},productionSpeed:{min:15,max:30}},[et.EPIC]:{miningEfficiency:{min:30,max:60},huntingDamage:{min:30,max:60},explorationReward:{min:30,max:60},productionSpeed:{min:30,max:60}},[et.LEGENDARY]:{miningEfficiency:{min:60,max:100},huntingDamage:{min:60,max:100},explorationReward:{min:60,max:100},productionSpeed:{min:60,max:100}}},o_={[et.COMMON]:{primary:"#9E9E9E",secondary:"#BDBDBD",border:"#757575",glow:"rgba(158, 158, 158, 0.3)"},[et.RARE]:{primary:"#2196F3",secondary:"#64B5F6",border:"#1976D2",glow:"rgba(33, 150, 243, 0.3)"},[et.EPIC]:{primary:"#9C27B0",secondary:"#BA68C8",border:"#7B1FA2",glow:"rgba(156, 39, 176, 0.3)"},[et.LEGENDARY]:{primary:"#FF9800",secondary:"#FFB74D",border:"#F57C00",glow:"rgba(255, 152, 0, 0.4)"}},a_={[et.COMMON]:"",[et.RARE]:"",[et.EPIC]:"",[et.LEGENDARY]:""},l_={[et.COMMON]:"Common",[et.RARE]:"Rare",[et.EPIC]:"Epic",[et.LEGENDARY]:"Legendary"};function A7(){const n=Math.random();return n<Sp[et.COMMON]?et.COMMON:n<Sp[et.RARE]?et.RARE:n<Sp[et.EPIC]?et.EPIC:et.LEGENDARY}function w7(n){const e=r_[n]||r_[et.COMMON];return Math.floor(Math.random()*(e.max-e.min+1))+e.min}function _7(n){const e=i_[n]||i_[et.COMMON],t=s=>Math.floor(Math.random()*(s.max-s.min+1))+s.min;return{miningEfficiency:t(e.miningEfficiency),huntingDamage:t(e.huntingDamage),explorationReward:t(e.explorationReward),productionSpeed:t(e.productionSpeed)}}function FT(n){if(n.rarity)return n;const e=A7(),t=n.stars||w7(e),s=_7(e);return{...n,rarity:e,stars:t,...s}}function cu(n){if(!n)return{};const e=o_[n]||o_[et.COMMON];return{"--rarity-color":e.primary,"--rarity-secondary":e.secondary,"--rarity-border":e.border,"--rarity-glow":e.glow}}function Iv(n){return(localStorage.getItem("appLanguage")||"English")==="English"?l_[n]||l_[et.COMMON]:a_[n]||a_[et.COMMON]}const E7="/tdl/assets/statStar1-DQ3NLFmi.png",b7="/tdl/assets/statStar2-7A5sNtwf.png",c_="/tdl/assets/inventoryTab_off-CzoQXsFX.png",u_="/tdl/assets/inventoryTab_on-BM74KYxp.png",I7="/tdl/assets/affline-CHli_Lq2.png",C7="/tdl/assets/exline-CK0DXNtO.png",T7={class:"inventoryPage"},S7={class:"mainContent"},P7={class:"tabButtons"},R7=["src"],x7=["src"],k7={key:0,class:"topSection"},N7={class:"panelTitle"},D7={class:"levelBadge"},O7={class:"magicPanelContainer"},L7={class:"magicPanel"},B7={class:"characterBox"},M7=["src","alt"],F7={class:"profilePanel"},U7={class:"progressBars"},V7={class:"progressBar noBar"},$7={class:"value"},H7={class:"progressBar"},G7={class:"barBg"},Q7=["src"],j7={class:"value"},z7={class:"progressBar noBar"},W7={class:"value"},K7={class:"progressBar"},q7={class:"barBg"},J7=["src"],Y7={class:"value"},X7={key:1,class:"inventoryHeader"},Z7={class:"inventoryCount"},eG={key:2,class:"inventoryGrid"},tG=["onClick","onDblclick"],nG={key:0,class:"newBadge"},sG={class:"catNameBadge"},rG={class:"starBadge"},iG=["src"],oG={class:"levelBadge"},aG=["src","alt"],lG={key:3,class:"emptyInventory"},cG={class:"emptyText"},uG={class:"emptySubtext"},dG={key:4,class:"itemGrid"},hG={class:"searchModalHeader"},fG={class:"searchModalTitle"},pG={class:"searchModalBody"},gG={class:"searchBox"},mG=["placeholder"],vG={class:"filterControls"},yG={class:"filterGroup"},AG={class:"filterLabel"},wG={value:"all"},_G={value:"2"},EG={value:"3"},bG={value:"4"},IG={value:"5"},CG={class:"filterGroup"},TG={class:"filterLabel"},SG={value:"all"},PG={class:"filterGroup"},RG={class:"filterLabel"},xG={value:"all"},kG={value:"common"},NG={value:"rare"},DG={value:"epic"},OG={value:"legendary"},LG={class:"filterGroup"},BG={class:"filterLabel"},MG={value:"newest"},FG={value:"oldest"},UG={value:"level"},VG={value:"stars"},$G={value:"rarity"},HG={value:"name"},GG={class:"searchModalFooter"},QG={class:"modalHeader"},jG={class:"modalTitle"},zG={class:"modalBody"},WG={class:"modalImageSection"},KG=["src"],qG={class:"modalBadges"},JG={class:"modalBadge stars"},YG={class:"modalBadge level"},XG={class:"modalStatsSection"},ZG={class:"sectionTitle"},eQ={class:"modalStats"},tQ={class:"modalStatLabel"},nQ={class:"modalStatBar"},sQ={class:"modalStatValue"},rQ={class:"modalInfoSection"},iQ={class:"infoRow"},oQ={class:"infoValue"},aQ={class:"infoRow"},lQ={class:"infoLabel"},cQ={class:"infoValue"},uQ={class:"infoRow"},dQ={class:"infoLabel"},hQ={class:"infoValue"},fQ={class:"expSection"},pQ={class:"expLabel"},gQ={class:"expBar"},mQ={class:"expText"},vQ={class:"modalFooter"},yQ=["disabled"],AQ={__name:"InventoryPage",setup(n){const e=on(),t=pe(()=>ms()),s=pe(()=>e.state.coins),r=U(""),i=U("all"),o=U("all"),a=U("all"),l=U("newest"),c=U(!1),d=U(null),f=U(!1),p=U("cat"),m=H=>[{name:t.value.strength,value:H[0],progress:H[0],color:"#FF6B6B"},{name:t.value.health,value:H[1],progress:H[1],color:"#FF8A80"},{name:t.value.intelligence,value:H[2],progress:H[2],color:"#9C27B0"},{name:t.value.dexterity,value:H[3],progress:H[3],color:"#FFA726"},{name:t.value.courage,value:H[4],progress:H[4],color:"#00BCD4"},{name:t.value.luck,value:H[5],progress:H[5],color:"#66BB6A"}],_=["Active","Quiet","Playful","Friendly","Independent","Affectionate","Curious","Brave"],y=H=>{if(H.stats)H.stats=H.stats.map((V,Z)=>{const me=[t.value.strength,t.value.health,t.value.intelligence,t.value.dexterity,t.value.courage,t.value.luck];return{...V,name:me[Z]||V.name}});else{const V=H.stars*15+Math.floor(Math.random()*20);H.stats=m([V+Math.floor(Math.random()*20),V+Math.floor(Math.random()*20),V+Math.floor(Math.random()*20),V+Math.floor(Math.random()*20),V+Math.floor(Math.random()*20),V+Math.floor(Math.random()*20)])}return H.personality||(H.personality=_[Math.floor(Math.random()*_.length)]),H.affinity===void 0&&(H.affinity=30+Math.floor(Math.random()*71)),H},A=U([]),w=pe(()=>{let H=[...A.value];if(r.value.trim()){const V=r.value.toLowerCase();H=H.filter(Z=>Z.name.toLowerCase().includes(V)||String(Z.imageId).includes(V))}return i.value!=="all"&&(H=H.filter(V=>V.stars===parseInt(i.value))),o.value!=="all"&&(o.value==="1-5"?H=H.filter(V=>V.level>=1&&V.level<=5):o.value==="6-10"?H=H.filter(V=>V.level>=6&&V.level<=10):o.value==="11+"&&(H=H.filter(V=>V.level>=11))),H=[...H].sort((V,Z)=>{switch(l.value){case"newest":return(Z.isNew?1:0)-(V.isNew?1:0)||Z.id-V.id;case"oldest":return V.id-Z.id;case"level":return Z.level-V.level;case"stars":return Z.stars-V.stars;case"rarity":const me={[et.LEGENDARY]:4,[et.EPIC]:3,[et.RARE]:2,[et.COMMON]:1},Ve=me[V.rarity||et.COMMON]||0;return(me[Z.rarity||et.COMMON]||0)-Ve;case"name":return V.name.localeCompare(Z.name);default:return 0}}),H});pe(()=>{const H=A.value.find(V=>V.selected);return H?y(H).stats:m([33,7,29,10,11,10])});const I=pe(()=>{const H=A.value.find(V=>V.selected);return H&&y(H).personality||"Active"}),C=pe(()=>{const H=A.value.find(V=>V.selected);return H&&y(H).affinity||50}),M=pe(()=>{const H=A.value.find(V=>V.selected);return H?H.name:"Inventory is empty"}),Q=pe(()=>{const H=A.value.find(V=>V.selected);return H&&H.level||1}),q=pe(()=>{const H=A.value.find(V=>V.selected);if(H){const V=y(H),Z=V.exp||0,me=V.maxExp||Qr(V.level||1);return{current:Z,max:me,percentage:me>0?Math.min(Z/me*100,100):0}}return{current:0,max:100,percentage:0}}),x=pe(()=>{const H=A.value.find(V=>V.selected);if(H){const V=y(H);if(V.stats&&V.stats.length>0){const Z=V.stats.reduce((me,Ve)=>me+(Ve.value||0),0);return Math.round(Z/V.stats.length)}}return 0}),T=H=>{try{return new URL(Object.assign({"../assets/img/cat1.png":hl,"../assets/img/cat10.png":fl,"../assets/img/cat11.png":pl,"../assets/img/cat12.png":gl,"../assets/img/cat13.png":ml,"../assets/img/cat14.png":vl,"../assets/img/cat15.png":yl,"../assets/img/cat16.png":Al,"../assets/img/cat17.png":wl,"../assets/img/cat18.png":_l,"../assets/img/cat19.png":El,"../assets/img/cat2.png":bl,"../assets/img/cat20.png":Il,"../assets/img/cat21.png":Cl,"../assets/img/cat22.png":Tl,"../assets/img/cat23.png":Sl,"../assets/img/cat24.png":Pl,"../assets/img/cat25.png":Rl,"../assets/img/cat26.png":xl,"../assets/img/cat27.png":kl,"../assets/img/cat28.png":Nl,"../assets/img/cat29.png":Dl,"../assets/img/cat3.png":Ol,"../assets/img/cat30.png":Ll,"../assets/img/cat4.png":Bl,"../assets/img/cat5.png":Ml,"../assets/img/cat6.png":Fl,"../assets/img/cat7.png":Ul,"../assets/img/cat8.png":Vl,"../assets/img/cat9.png":$l,"../assets/img/catPoint.png":Hl,"../assets/img/catPointPlus.png":Gl,"../assets/img/catProfile01.png":Ql,"../assets/img/catProfile02.png":jl,"../assets/img/cat_ico.png":zl})[`../assets/img/cat${H}.png`],import.meta.url).href}catch{return`/src/assets/img/cat${H}.png`}},P=pe(()=>{const H=A.value.find(V=>V.selected);return T(H?H.imageId||H.id:1)}),S=H=>{const V=wh(H);d.value=y({...V}),c.value=!0},b=()=>{c.value=!1,d.value=null},D=async H=>{if(A.value.forEach(V=>V.selected=!1),H.selected=!0,H.isNew&&(H.isNew=!1,dt())){const Z=A.value.map(me=>({...me,isNew:me.id===H.id?!1:me.isNew}));await e.updateGameData({inventory:Z})}},k=()=>{r.value="",i.value="all",o.value="all",a.value="all",l.value="newest"},ke=async()=>{if(!d.value)return;const H=Cp(d.value.level||1);if(s.value<H){alert(`${t.value.insufficientCoins} (Required: ${H})`);return}const V=dt();if(V){const me=(V.gameData?.inventory||[]).map(Ne=>{if(Ne.id===d.value.id){const z=(Ne.level||1)+1,ue=Qr(z),Pe=K5(Ne),tt=(Ne.miningEfficiency||0)+Pe,Y=(Ne.huntingDamage||0)+Pe,ge=(Ne.explorationReward||0)+Pe,fe=(Ne.productionSpeed||0)+Pe;return{...Ne,level:z,exp:0,maxExp:ue,miningEfficiency:tt,huntingDamage:Y,explorationReward:ge,productionSpeed:fe}}return Ne}),Ve=s.value-H;try{await e.updateMultiple({coins:Ve}),await e.updateGameData({inventory:me});const Ne=me.find(se=>se.id===d.value.id);Ne&&(d.value=y({...Ne})),ie(),alert(`${t.value.levelUp} Success! Level ${newLevel}`)}catch(Ne){console.error(" :",Ne),alert("An error occurred during level up.")}}},ie=async()=>{const H=dt();if(H){e.loadCurrentUser();const V=H.gameData?.inventory||[];if(V.length>0){const Z=V.map(Ve=>{const Ne=Ve.rarity?Ve:FT(Ve),se=y({...Ne}),z=wh(se);if(!z.exp||z.exp===0){const ue=z.maxExp||Qr(z.level||1);z.exp=Math.floor(Math.random()*ue)}return z.personality||(z.personality=_[Math.floor(Math.random()*_.length)]),z.affinity===void 0&&(z.affinity=30+Math.floor(Math.random()*71)),z});A.value=Z,dt()&&Z.some((Ne,se)=>{const z=V[se];return!z.exp||z.exp===0||!z.personality||z.affinity===void 0})&&await e.updateGameData({inventory:Z})}else A.value=[]}else A.value=[]};return Nt(()=>{ie(),window.addEventListener("userDataUpdated",ie)}),rn(()=>{window.removeEventListener("userDataUpdated",ie)}),(H,V)=>(L(),B("div",T7,[ze(jn,{coinCount:s.value,hideRightIcons:!0},null,8,["coinCount"]),h("main",S7,[h("div",P7,[h("button",{class:De(["tabButton",{active:p.value==="cat"}]),onClick:V[0]||(V[0]=Z=>p.value="cat")},[h("img",{src:p.value==="cat"?Me(u_):Me(c_),alt:"Cat",class:"tabButtonImg"},null,8,R7),V[15]||(V[15]=h("span",{class:"tabButtonText"},"Cat",-1))],2),h("button",{class:De(["tabButton",{active:p.value==="item"}]),onClick:V[1]||(V[1]=Z=>p.value="item")},[h("img",{src:p.value==="item"?Me(u_):Me(c_),alt:"Item",class:"tabButtonImg"},null,8,x7),V[16]||(V[16]=h("span",{class:"tabButtonText"},"Item",-1))],2)]),p.value==="cat"?(L(),B("div",k7,[h("div",N7,[h("span",null,E(M.value),1),h("span",D7,"Lv."+E(Q.value),1)]),h("div",O7,[h("div",L7,[h("div",B7,[h("img",{src:P.value,alt:t.value.selectedCharacter,class:"selectedCharacter"},null,8,M7)])]),h("div",F7,[h("div",U7,[h("div",V7,[V[17]||(V[17]=h("div",{class:"statLabel"},"Personality:",-1)),h("span",$7,E(I.value),1)]),h("div",H7,[V[18]||(V[18]=h("div",{class:"statLabel"},"Affinity",-1)),h("div",G7,[h("div",{style:St({width:C.value+"%"}),class:"barFill barFillAffinity"},[h("img",{src:Me(I7),alt:"Affinity Graph",class:"barFillImage"},null,8,Q7)],4)]),h("span",j7,E(C.value)+"%",1)]),h("div",z7,[V[19]||(V[19]=h("div",{class:"statLabel"},"Ability",-1)),h("span",W7,E(x.value),1)]),h("div",K7,[V[20]||(V[20]=h("div",{class:"statLabel"},"Experience",-1)),h("div",q7,[h("div",{style:St({width:q.value.percentage+"%"}),class:"barFill barFillExperience"},[h("img",{src:Me(C7),alt:"Experience Graph",class:"barFillImage"},null,8,J7)],4)]),h("span",Y7,E(q.value.percentage.toFixed(0))+"%",1)])])])])])):he("",!0),p.value==="cat"?(L(),B("div",X7,[h("div",Z7,E(t.value.totalItems)+" "+E(w.value.length)+" / "+E(A.value.length)+" "+E(t.value.items),1),h("button",{class:"searchBtn",onClick:V[2]||(V[2]=Z=>f.value=!0)},[V[21]||(V[21]=h("span",{class:"searchIcon"},"",-1)),h("span",null,E(t.value.search),1)])])):he("",!0),p.value==="cat"&&w.value.length>0?(L(),B("div",eG,[(L(!0),B(Re,null,We(w.value,Z=>(L(),B("div",{key:Z.id,class:De(["inventoryItem",{selected:Z.selected,[`rarity-${Z.rarity||"common"}`]:!0}]),style:St(Me(cu)(Z.rarity)),onClick:me=>D(Z),onDblclick:me=>S(Z)},[Z.isNew?(L(),B("div",nG,"NEW")):he("",!0),h("div",sG,E(Z.name),1),h("div",rG,[(L(),B(Re,null,We(5,me=>h("img",{key:me,src:me<=Z.stars?Me(E7):Me(b7),alt:"",class:"starIcon"},null,8,iG)),64))]),h("div",oG," Lv "+E(String(Z.level).padStart(2,"0")),1),h("img",{src:T(Z.imageId||Z.id),alt:t.value.cat,class:"itemIcon"},null,8,aG)],46,tG))),128))])):he("",!0),p.value==="cat"&&w.value.length===0?(L(),B("div",lG,[V[22]||(V[22]=h("div",{class:"emptyIcon"},"",-1)),h("div",cG,E(t.value.noNFTs),1),h("div",uG,E(t.value.createCatInFactory),1)])):he("",!0),p.value==="item"?(L(),B("div",dG,[(L(),B(Re,null,We(9,Z=>h("div",{key:Z,class:"itemBox"},[...V[23]||(V[23]=[h("span",{class:"noItemText"},"no item",-1)])])),64))])):he("",!0)]),ze(zn),f.value?(L(),B("div",{key:0,class:"modalOverlay",onClick:V[12]||(V[12]=Z=>f.value=!1)},[h("div",{class:"searchModal",onClick:V[11]||(V[11]=kn(()=>{},["stop"]))},[h("div",hG,[h("h3",fG,E(t.value.searchAndFilter),1),h("button",{class:"searchModalClose",onClick:V[3]||(V[3]=Z=>f.value=!1)},"")]),h("div",pG,[h("div",gG,[Wt(h("input",{type:"text","onUpdate:modelValue":V[4]||(V[4]=Z=>r.value=Z),placeholder:t.value.searchPlaceholder,class:"searchInput",onKeyup:V[5]||(V[5]=R1(Z=>f.value=!1,["enter"]))},null,40,mG),[[gs,r.value]])]),h("div",vG,[h("div",yG,[h("label",AG,E(t.value.starRating),1),Wt(h("select",{"onUpdate:modelValue":V[6]||(V[6]=Z=>i.value=Z),class:"filterSelect"},[h("option",wG,E(t.value.all),1),h("option",_G,"2 "+E(t.value.stars),1),h("option",EG,"3 "+E(t.value.stars),1),h("option",bG,"4 "+E(t.value.stars),1),h("option",IG,"5 "+E(t.value.stars),1)],512),[[Di,i.value]])]),h("div",CG,[h("label",TG,E(t.value.levelFilter),1),Wt(h("select",{"onUpdate:modelValue":V[7]||(V[7]=Z=>o.value=Z),class:"filterSelect"},[h("option",SG,E(t.value.all),1),V[24]||(V[24]=h("option",{value:"1-5"},"1-5",-1)),V[25]||(V[25]=h("option",{value:"6-10"},"6-10",-1)),V[26]||(V[26]=h("option",{value:"11+"},"11+",-1))],512),[[Di,o.value]])]),h("div",PG,[h("label",RG,E(t.value.rarityFilter),1),Wt(h("select",{"onUpdate:modelValue":V[8]||(V[8]=Z=>a.value=Z),class:"filterSelect"},[h("option",xG,E(t.value.all),1),h("option",kG,E(t.value.common),1),h("option",NG,E(t.value.rare),1),h("option",DG,E(t.value.epic),1),h("option",OG,E(t.value.legendary),1)],512),[[Di,a.value]])]),h("div",LG,[h("label",BG,E(t.value.sortBy),1),Wt(h("select",{"onUpdate:modelValue":V[9]||(V[9]=Z=>l.value=Z),class:"filterSelect"},[h("option",MG,E(t.value.newest),1),h("option",FG,E(t.value.oldest),1),h("option",UG,E(t.value.levelHighToLow),1),h("option",VG,E(t.value.starsHighToLow),1),h("option",$G,E(t.value.rarityHighToLow),1),h("option",HG,E(t.value.nameOrder),1)],512),[[Di,l.value]])])]),h("div",GG,[h("button",{class:"resetFilterBtn",onClick:k},E(t.value.reset),1),h("button",{class:"applyFilterBtn",onClick:V[10]||(V[10]=Z=>f.value=!1)},E(t.value.apply),1)])])])])):he("",!0),c.value&&d.value?(L(),B("div",{key:1,class:"modalOverlay",onClick:b},[h("div",{class:"modalContent",onClick:V[14]||(V[14]=kn(()=>{},["stop"]))},[h("div",QG,[h("h3",jG,E(d.value.name),1),h("button",{class:"modalClose",onClick:b},"")]),h("div",zG,[h("div",WG,[h("img",{src:T(d.value.imageId||d.value.id),alt:"NFT",class:"modalImage"},null,8,KG),h("div",qG,[d.value.rarity?(L(),B("div",{key:0,class:"modalBadge rarity",style:St(Me(cu)(d.value.rarity))},E(Me(Iv)(d.value.rarity)),5)):he("",!0),h("div",JG,[(L(),B(Re,null,We(5,Z=>h("span",{key:Z,class:"star"},E(Z<=d.value.stars?"":""),1)),64))]),h("div",YG,"Lv "+E(d.value.level),1)])]),h("div",XG,[h("h4",ZG,E(t.value.stats),1),h("div",eQ,[(L(!0),B(Re,null,We(d.value.stats,(Z,me)=>(L(),B("div",{key:me,class:"modalStat"},[h("div",tQ,E(Z.name),1),h("div",nQ,[h("div",{style:St({width:Z.progress+"%",backgroundColor:Z.color}),class:"modalStatFill"},null,4)]),h("div",sQ,E(Z.value)+"%",1)]))),128))])]),h("div",rQ,[h("div",iQ,[V[27]||(V[27]=h("span",{class:"infoLabel"},"NFT ID:",-1)),h("span",oQ,"#"+E(d.value.id),1)]),h("div",aQ,[h("span",lQ,E(t.value.imageId)+":",1),h("span",cQ,"#"+E(d.value.imageId),1)]),h("div",uQ,[h("span",dQ,E(t.value.createdAt)+":",1),h("span",hQ,E(new Date(d.value.id).toLocaleDateString()),1)])]),h("div",fQ,[h("div",pQ,E(t.value.exp),1),h("div",gQ,[h("div",{class:"expFill",style:St({width:Math.min((d.value.exp||0)/(d.value.maxExp||Me(Qr)(d.value.level||1))*100,100)+"%"})},null,4)]),h("div",mQ,E(d.value.exp||0)+" / "+E(d.value.maxExp||Me(Qr)(d.value.level||1)),1)])]),h("div",vQ,[Me(W5)(d.value)?(L(),B("button",{key:0,class:"modalBtn levelUpBtn",onClick:ke,disabled:s.value<Me(Cp)(d.value.level||1)},E(t.value.levelUpButton)+" ("+E(Me(Cp)(d.value.level||1))+" "+E(t.value.coin)+") ",9,yQ)):he("",!0),h("button",{class:"modalBtn selectBtn",onClick:V[13]||(V[13]=Z=>{D(d.value),b()})},E(t.value.selectButton),1)])])])):he("",!0)]))}},wQ=Qt(AQ,[["__scopeId","data-v-bb74b58f"]]),_Q="/tdl/assets/factory_cat-DD06P-8u.png",EQ={class:"factoryPage"},bQ={class:"mainContent"},IQ={class:"tabButtons"},CQ={class:"materialsSection"},TQ=["alt"],SQ={class:"materialText"},PQ={class:"materialCount"},RQ={class:"materialText"},xQ={class:"materialCount"},kQ=["disabled"],NQ=["src"],DQ={class:"popupTitle"},OQ={class:"popupMessage"},LQ={__name:"FactoryPage",setup(n){const e=Pn(),t=pe(()=>ms()),s=on(),r=pe(()=>s.state.totalCoin),i=pe(()=>s.state.catFragments),o=U(100),a=U(3),l=U("catcraft"),c=U(!1),d=U(1),f=U(null);Nt(()=>{s.loadCurrentUser();const M=()=>{s.loadCurrentUser()};window.addEventListener("userDataUpdated",M),rn(()=>{window.removeEventListener("userDataUpdated",M)})});const p=async()=>{if(r.value<o.value){alert(`${t.value.insufficientCoins} (Required: ${o.value})`);return}if(i.value<a.value){alert(`${t.value.insufficientFragments} (Required: ${a.value})`);return}const M=dt();if(M){const Q=r.value-o.value,q=i.value-a.value;d.value=A();const x=M.gameData?.inventory||[];x.length+1;const T=Qr(1),P=Math.floor(Math.random()*T),S={id:Date.now(),imageId:d.value,name:`Cat ${d.value}`,level:1,exp:P,maxExp:T,selected:!1,isNew:!0},b=FT(S);f.value=b.rarity;const D=[b,...x];await s.updateGameData({totalCoin:Q,catFragments:q,inventory:D}),XH("nftCreated",1),c.value=!0}},m=pe(()=>r.value>=o.value&&i.value>=a.value),_=pe(()=>r.value>=o.value),y=pe(()=>i.value>=a.value),A=()=>Math.floor(Math.random()*30)+1,w=M=>{try{return new URL(Object.assign({"../assets/img/cat1.png":hl,"../assets/img/cat10.png":fl,"../assets/img/cat11.png":pl,"../assets/img/cat12.png":gl,"../assets/img/cat13.png":ml,"../assets/img/cat14.png":vl,"../assets/img/cat15.png":yl,"../assets/img/cat16.png":Al,"../assets/img/cat17.png":wl,"../assets/img/cat18.png":_l,"../assets/img/cat19.png":El,"../assets/img/cat2.png":bl,"../assets/img/cat20.png":Il,"../assets/img/cat21.png":Cl,"../assets/img/cat22.png":Tl,"../assets/img/cat23.png":Sl,"../assets/img/cat24.png":Pl,"../assets/img/cat25.png":Rl,"../assets/img/cat26.png":xl,"../assets/img/cat27.png":kl,"../assets/img/cat28.png":Nl,"../assets/img/cat29.png":Dl,"../assets/img/cat3.png":Ol,"../assets/img/cat30.png":Ll,"../assets/img/cat4.png":Bl,"../assets/img/cat5.png":Ml,"../assets/img/cat6.png":Fl,"../assets/img/cat7.png":Ul,"../assets/img/cat8.png":Vl,"../assets/img/cat9.png":$l,"../assets/img/catPoint.png":Hl,"../assets/img/catPointPlus.png":Gl,"../assets/img/catProfile01.png":Ql,"../assets/img/catProfile02.png":jl,"../assets/img/cat_ico.png":zl})[`../assets/img/cat${M}.png`],import.meta.url).href}catch{return`/src/assets/img/cat${M}.png`}},I=()=>{c.value=!1,f.value=null},C=M=>{M==="exchange"?e.push("/exchange"):M==="catcraft"&&(l.value="catcraft")};return(M,Q)=>(L(),B("div",EQ,[ze(jn,{catCount:i.value},null,8,["catCount"]),h("main",bQ,[h("div",IQ,[h("button",{class:De(["tabButton",{active:l.value==="exchange"}]),onClick:Q[0]||(Q[0]=q=>C("exchange"))}," Exchange ",2),h("button",{class:De(["tabButton",{active:l.value==="catcraft"}]),onClick:Q[1]||(Q[1]=q=>C("catcraft"))}," Cat craft ",2)]),Q[4]||(Q[4]=h("div",{class:"catSilhouette"},[h("img",{src:_Q,alt:"Cat",class:"catShape"})],-1)),h("div",CQ,[h("div",{class:De(["materialItem",{insufficient:!_.value}])},[h("img",{src:Ah,alt:t.value.coin,class:"materialIcon"},null,8,TQ),h("span",SQ,[h("span",PQ,E(r.value),1),Fo(" / "+E(o.value),1)])],2),h("div",{class:De(["materialItem",{insufficient:!y.value}])},[Q[3]||(Q[3]=h("img",{src:OT,alt:"Cat",class:"materialIcon"},null,-1)),h("span",RQ,[h("span",xQ,E(i.value),1),Fo(" / "+E(a.value),1)])],2)]),h("button",{class:De(["createButton",{disabled:!m.value}]),onClick:p,disabled:!m.value},E(t.value.createCat),11,kQ)]),ze(zn),c.value?(L(),B("div",{key:0,class:"popupOverlay",onClick:I},[h("div",{class:De(["popupContent",`rarity-${f.value}`]),onClick:Q[2]||(Q[2]=kn(()=>{},["stop"]))},[h("div",{class:"popupCatImage",style:St(f.value?Me(cu)(f.value):{})},[h("img",{src:w(d.value),alt:""},null,8,NQ)],4),f.value?(L(),B("div",{key:0,class:"rarityBadge",style:St(Me(cu)(f.value))},E(Me(Iv)(f.value)),5)):he("",!0),h("h2",DQ,E(t.value.createCatSuccess),1),h("p",OQ,E(t.value.newCatAdded),1),h("button",{class:"popupCloseBtn",onClick:I},E(t.value.confirm),1)],2)])):he("",!0)]))}},BQ=Qt(LQ,[["__scopeId","data-v-ba848801"]]),mn="/tdl/assets/cat1-B_B8VE2s.png",MQ={class:"settingsPage"},FQ={class:"mainContent"},UQ={class:"settingGroup"},VQ={class:"settingGroup"},$Q={class:"settingLabel"},HQ={class:"settingInputWrapper"},GQ={key:0,class:"dropdownMenu"},QQ=["onClick"],jQ={class:"settingGroup CurrentLanguage"},zQ={class:"settingLabel"},WQ={class:"settingInputWrapper"},KQ={key:0,class:"dropdownMenu"},qQ=["onClick"],JQ={class:"settingSection"},YQ={class:"sectionTitle"},XQ={key:0,class:"walletConnectedCard"},ZQ={class:"walletStatusHeader"},ej={class:"walletStatusIndicator"},tj=["title"],nj={class:"walletInfo"},sj={class:"walletInfoRow"},rj={class:"walletInfoLabel"},ij={class:"walletInfoValue"},oj={class:"walletAddressText"},aj=["title"],lj={class:"walletInfoRow"},cj={class:"walletInfoLabel"},uj={class:"walletBalanceText"},dj={key:1,class:"walletNotConnectedCard"},hj={class:"walletNotConnectedText"},fj={class:"walletNotConnectedDesc"},pj=["disabled"],gj={key:0},mj={key:1},vj={key:0,class:"walletErrorMsg"},yj={key:0,class:"inviteSection"},Aj={key:0,class:"inviteCard"},wj={class:"inviteTitle"},_j={class:"inviteDescription"},Ej={key:1,class:"inviteCard"},bj={class:"inviteTitle"},Ij={class:"inviteDescription"},Cj={class:"inviteCodeSection"},Tj={class:"inviteCodeLabel"},Sj={class:"inviteCodeBox"},Pj={class:"inviteCode"},Rj=["title"],xj={class:"shareButtons"},kj={class:"rewardInfo"},Nj={class:"rewardItem"},Dj={class:"rewardText"},Oj={class:"rewardTitle"},Lj={class:"rewardDesc"},Bj={class:"rewardItem"},Mj={class:"rewardText"},Fj={class:"rewardTitle"},Uj={class:"inviteStats"},Vj={class:"statsTitle"},$j={class:"statsValue"},Hj={class:"statsNumber"},Gj={class:"statsLabel"},Qj={class:"depositPopupContent"},jj={key:0,class:"emptyFriendsList"},zj={key:1,class:"friendsListContainer"},Wj=["src","alt"],Kj={class:"friendListInfo"},qj={class:"friendListName"},Jj={class:"friendListId"},Yj={class:"depositPopupHeader"},Xj={class:"depositPopupTitle"},Zj={class:"depositPopupContent"},ez={class:"depositPopupDesc"},tz={class:"depositOptions"},nz={class:"depositOptionInfo"},sz={class:"depositOptionDesc"},rz={class:"depositOptionInfo"},iz={class:"depositOptionDesc"},oz={class:"depositPopupFooter"},az={class:"depositPopupNote"},lz={__name:"SettingsPage",setup(n){const e=Pn(),t=on(),s=pe(()=>ms()),r=pe(()=>t.state.coins),i=U(null),o=U(localStorage.getItem("appLanguage")||"English"),a=U("Busan"),l=U(!1),c=U(!1),d=U(!1);U("");const f=U(!1),p=U(""),m=pe(()=>t.state.walletAddress),_=pe(()=>t.state.userBalance),y=pe(()=>t.state.isWalletConnected),A=U(!1),w=U(!1),I=U([{id:"Id_12345",name:"Alice",profileImage:mn},{id:"Id_12346",name:"Bob",profileImage:mn},{id:"Id_12347",name:"Charlie",profileImage:mn}]),C=U(""),M=U({inviteCode:"",totalReferrals:0,referrals:[]}),Q=["English",""],q=["","","",""],x=pe(()=>s.value),T=se=>{o.value=se,l.value=!1,localStorage.setItem("appLanguage",se)};Nt(async()=>{const se=dt();if(se&&(i.value=se,r.value=se.gameData?.coins||0,se.loginType!=="guest")){try{C.value=await Li(se.id)}catch(Pe){console.error("   :",Pe),C.value=""}try{M.value=await Kw(se.id)}catch(Pe){console.error("   :",Pe),M.value={inviteCode:"",totalReferrals:0,referrals:[]}}}const z=localStorage.getItem("appLanguage");z?o.value=z:(o.value="English",localStorage.setItem("appLanguage","English")),P();const ue=async()=>{if(t.loadCurrentUser(),i.value=dt(),i.value&&i.value.loginType!=="guest")try{M.value=await Kw(i.value.id),C.value=await Li(i.value.id)}catch(Pe){console.error("   :",Pe)}};window.addEventListener("userDataUpdated",ue),rn(()=>{window.removeEventListener("userDataUpdated",ue)})});const P=()=>{if(!i.value)return;const se=new Date().toDateString(),z=localStorage.getItem(`checkIn_${i.value.id}`);d.value=z===se},S=async()=>{try{if(f.value=!0,p.value="",!_u()){p.value=s.value.walletNotInstalled,confirm(s.value.installMetaMask)&&window.open("https://metamask.io/download/","_blank");return}const se=await t.connectWalletToApp();se.success?(p.value="",alert(s.value.walletConnected)):(p.value=se.error||s.value.walletConnectFailed,se.needInstall&&confirm(s.value.installMetaMask)&&window.open("https://metamask.io/download/","_blank"))}catch(se){console.error("  :",se),p.value=s.value.walletConnectError}finally{f.value=!1}},b=()=>{confirm(s.value.disconnectWalletConfirm)&&(t.disconnectWalletFromApp(),e.push("/main"))},D=async()=>{if(m.value)try{await navigator.clipboard.writeText(m.value),alert(s.value.walletAddressCopied)}catch(se){console.error(" :",se),alert(s.value.copyFailed)}},k=async()=>{await t.updateWalletBalance()},ke=()=>{A.value=!0},ie=()=>{A.value=!1},H=se=>{const ue={phantom:{name:"Phantom",url:"https://phantom.app/",icon:"",description:s.value.goToPhantomWallet},upbit:{name:"Upbit",url:"https://upbit.com/",icon:"",description:s.value.goToUpbitExchange}}[se];if(ue){const Pe=ue.url;window.open(Pe,"_blank"),A.value=!1}},V=async()=>{if(!C.value)if(i.value&&i.value.loginType!=="guest")try{C.value=await Li(i.value.id)}catch(se){console.error("   :",se),alert("    .");return}else return;try{await navigator.clipboard.writeText(C.value),alert(s.value.codeCopied||"Invite code copied!")}catch(se){console.error(" :",se),alert("Failed to copy.")}},Z=async()=>{if(!C.value)if(i.value&&i.value.loginType!=="guest")try{C.value=await Li(i.value.id)}catch(ue){console.error("   :",ue),alert("Failed to get invite code.");return}else return;const z=`${window.location.origin+window.location.pathname}#/signup?invite=${C.value}`;try{await navigator.clipboard.writeText(z),alert(s.value.linkCopied||"Invite link copied!")}catch(ue){console.error("  :",ue);const Pe=document.createElement("textarea");Pe.value=z,document.body.appendChild(Pe),Pe.select();try{document.execCommand("copy"),alert(s.value.linkCopied||"Invite link copied!")}catch{alert("Failed to copy link.")}document.body.removeChild(Pe)}},me=()=>{e.push("/signup")},Ve=()=>{w.value=!0},Ne=()=>{w.value=!1};return(se,z)=>(L(),B("div",MQ,[ze(jn,{coinCount:r.value},null,8,["coinCount"]),h("main",FQ,[h("div",UQ,[h("button",{class:"userProfileBtn",onClick:z[0]||(z[0]=ue=>Me(e).push("/profile"))},[z[7]||(z[7]=h("span",{class:"userProfileIcon"},"",-1)),h("span",null,E(s.value.userSettings),1),z[8]||(z[8]=h("span",{class:"arrowIcon"},"",-1))])]),h("div",VQ,[h("label",$Q,E(s.value.language),1),h("div",HQ,[h("div",{class:"settingInput",onClick:z[1]||(z[1]=ue=>l.value=!l.value)},[h("span",null,E(o.value),1),z[9]||(z[9]=h("span",{class:"dropdownIcon"},"",-1))]),l.value?(L(),B("div",GQ,[(L(),B(Re,null,We(Q,ue=>h("div",{key:ue,class:De(["dropdownItem",{active:o.value===ue}]),onClick:Pe=>T(ue)},E(ue),11,QQ)),64))])):he("",!0)])]),h("div",jQ,[h("label",zQ,E(x.value.region),1),h("div",WQ,[h("div",{class:"settingInput",onClick:z[2]||(z[2]=ue=>c.value=!c.value)},[h("span",null,E(a.value),1),z[10]||(z[10]=h("span",{class:"dropdownIcon"},"",-1))]),c.value?(L(),B("div",KQ,[(L(),B(Re,null,We(q,ue=>h("div",{key:ue,class:De(["dropdownItem",{active:a.value===ue}]),onClick:Pe=>{a.value=ue,c.value=!1}},E(ue),11,qQ)),64))])):he("",!0)])]),h("div",JQ,[h("h3",YQ,E(s.value.walletConnection),1),y.value?(L(),B("div",XQ,[h("div",ZQ,[h("div",ej,[z[11]||(z[11]=h("div",{class:"walletIndicatorDot"},null,-1)),h("span",null,E(s.value.connected),1)]),h("button",{class:"refreshBtn",onClick:k,title:s.value.refreshBalance},[...z[12]||(z[12]=[w1('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-c8c91dc1><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" data-v-c8c91dc1></path><path d="M21 3v5h-5" data-v-c8c91dc1></path><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" data-v-c8c91dc1></path><path d="M3 21v-5h5" data-v-c8c91dc1></path></svg>',1)])],8,tj)]),h("div",nj,[h("div",sj,[h("span",rj,E(s.value.address)+":",1),h("div",ij,[h("span",oj,E(m.value),1),h("button",{class:"walletCopyBtn",onClick:D,title:s.value.copy},[...z[13]||(z[13]=[h("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[h("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),h("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})],-1)])],8,aj)])]),h("div",lj,[h("span",cj,E(s.value.balance)+":",1),h("span",uj,E(_.value),1)])]),h("button",{class:"walletDepositBtn",onClick:ke},[z[14]||(z[14]=h("svg",{class:"depositIcon",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[h("path",{d:"M12 2v20M2 12h20"})],-1)),h("span",null,E(s.value.depositFromWallet),1)]),h("button",{class:"walletDisconnectBtn",onClick:b},E(s.value.disconnect),1)])):(L(),B("div",dj,[z[15]||(z[15]=h("div",{class:"walletNotConnectedIcon"},"",-1)),h("p",hj,E(s.value.walletNotConnected),1),h("p",fj,E(s.value.walletConnectDesc),1),h("button",{class:"walletConnectBtn",onClick:S,disabled:f.value},[f.value?(L(),B("span",mj,E(s.value.connecting||"Connecting..."),1)):(L(),B("span",gj,E(s.value.connectWallet||"Connect Wallet"),1))],8,pj),p.value?(L(),B("div",vj,E(p.value),1)):he("",!0)]))]),i.value?(L(),B("div",yj,[i.value&&i.value.loginType==="guest"?(L(),B("div",Aj,[h("h2",wj,E(s.value.inviteFriends),1),h("p",_j,E(s.value.inviteDescription),1),h("div",{class:"guestSignupPrompt"},[z[17]||(z[17]=h("p",{class:"guestPromptText"},"Sign up to invite friends and get rewards!",-1)),h("button",{class:"signupBtn",onClick:me},[...z[16]||(z[16]=[h("span",{class:"signupIcon"},"",-1),h("span",null,"Sign Up",-1)])])])])):i.value&&i.value.loginType!=="guest"?(L(),B("div",Ej,[h("h2",bj,E(s.value.inviteFriends),1),h("p",Ij,E(s.value.inviteDescription),1),h("div",Cj,[h("label",Tj,E(s.value.inviteCode),1),h("div",Sj,[h("span",Pj,E(C.value||"Loading..."),1),h("button",{class:"copyBtn",onClick:V,title:s.value.copyInviteCode},"  ",8,Rj)])]),h("div",xj,[h("button",{class:"shareBtn copyLinkBtn",onClick:Z},[z[18]||(z[18]=h("span",{class:"copyIcon"},"",-1)),h("span",null,E(s.value.copyLink||"Copy Link"),1)])]),h("div",kj,[h("div",Nj,[z[19]||(z[19]=h("span",{class:"rewardIcon"},"",-1)),h("div",Dj,[h("div",Oj,E(s.value.inviteReward),1),h("div",Lj,E(s.value.inviteRewardDesc),1)])]),h("div",Bj,[z[20]||(z[20]=h("span",{class:"rewardIcon"},"",-1)),h("div",Mj,[h("div",Fj,E(s.value.newUserReward),1)])])]),h("div",Uj,[h("h3",Vj,E(s.value.inviteStats),1),h("div",$j,[h("span",Hj,E(M.value.totalReferrals),1),h("span",Gj,E(s.value.invites),1)]),h("button",{class:"viewFriendsBtn",onClick:Ve},[...z[21]||(z[21]=[h("span",{class:"friendsIcon"},"",-1),h("span",null,"View Friends",-1)])])])])):he("",!0)])):he("",!0),z[22]||(z[22]=h("div",{style:{height:"30px"}},null,-1))]),ze(zn),w.value?(L(),B("div",{key:0,class:"depositPopupOverlay",onClick:Ne},[h("div",{class:"depositPopup friendsPopup",onClick:z[3]||(z[3]=kn(()=>{},["stop"]))},[h("div",{class:"depositPopupHeader"},[z[23]||(z[23]=h("h3",{class:"depositPopupTitle"},"My Friends",-1)),h("button",{class:"depositPopupClose",onClick:Ne},"")]),h("div",Qj,[I.value.length===0?(L(),B("div",jj,[...z[24]||(z[24]=[h("p",{class:"emptyFriendsText"},"No friends yet. Invite friends to get started!",-1)])])):(L(),B("div",zj,[(L(!0),B(Re,null,We(I.value,ue=>(L(),B("div",{key:ue.id,class:"friendListItem"},[h("img",{src:ue.profileImage,alt:ue.name,class:"friendListProfile"},null,8,Wj),h("div",Kj,[h("p",qj,E(ue.name),1),h("p",Jj,E(ue.id),1)]),z[25]||(z[25]=h("div",{class:"giftIconSmall"},"",-1))]))),128))]))])])])):he("",!0),A.value?(L(),B("div",{key:1,class:"depositPopupOverlay",onClick:ie},[h("div",{class:"depositPopup",onClick:z[6]||(z[6]=kn(()=>{},["stop"]))},[h("div",Yj,[h("h3",Xj,E(s.value.selectDepositMethod),1),h("button",{class:"depositPopupClose",onClick:ie},"")]),h("div",Zj,[h("p",ez,E(s.value.selectExchangeToDeposit),1),h("div",tz,[h("button",{class:"depositOption",onClick:z[4]||(z[4]=ue=>H("phantom"))},[z[27]||(z[27]=h("div",{class:"depositOptionIcon"},"",-1)),h("div",nz,[z[26]||(z[26]=h("div",{class:"depositOptionName"},"Phantom",-1)),h("div",sz,E(s.value.goToPhantomWallet),1)]),z[28]||(z[28]=h("div",{class:"depositOptionArrow"},"",-1))]),h("button",{class:"depositOption",onClick:z[5]||(z[5]=ue=>H("upbit"))},[z[30]||(z[30]=h("div",{class:"depositOptionIcon"},"",-1)),h("div",rz,[z[29]||(z[29]=h("div",{class:"depositOptionName"},"Upbit",-1)),h("div",iz,E(s.value.goToUpbitExchange),1)]),z[31]||(z[31]=h("div",{class:"depositOptionArrow"},"",-1))])]),h("div",oz,[h("p",az," "+E(s.value.copyWalletAddressAndDeposit),1),h("button",{class:"depositCopyAddressBtn",onClick:D},E(s.value.copyWalletAddress),1)])])])])):he("",!0)]))}},cz=Qt(lz,[["__scopeId","data-v-c8c91dc1"]]),uz={class:"profilePage"},dz={class:"mainContent"},hz={class:"profileHeader"},fz={class:"profileImageWrapper"},pz=["src","alt"],gz={key:1,class:"profileImagePlaceholder"},mz={class:"profileInfo"},vz={class:"userName"},yz={class:"userEmail"},Az={class:"settingGroup"},wz={class:"settingLabel"},_z={class:"settingInput"},Ez={class:"userId"},bz={key:0,class:"statsSection"},Iz={class:"sectionTitle"},Cz={class:"statsGrid"},Tz={class:"statCard"},Sz={class:"statInfo"},Pz={class:"statLabel"},Rz={class:"statValue"},xz={class:"statCard"},kz={class:"statInfo"},Nz={class:"statLabel"},Dz={class:"statValue"},Oz={class:"statCard"},Lz={class:"statInfo"},Bz={class:"statLabel"},Mz={class:"statValue"},Fz={class:"statCard"},Uz={class:"statInfo"},Vz={class:"statLabel"},$z={class:"statValue"},Hz={class:"logoutSection"},Gz={__name:"UserProfilePage",setup(n){const e=Pn(),t=on(),{logout:s}=t,r=pe(()=>t.state.coins),i=U(null),o=U(""),a=U(""),l=U(""),c=U(""),d=U(""),f={ko:{userProfile:" ",userID:"User ID",copySuccess:"User ID !",logout:"",logoutConfirm:"  ?",login:"",gameStats:" ",level:"",points:"",coins:"",catFragments:" ",back:" "},en:{userProfile:"User Profile",userID:"User ID",copySuccess:"User ID copied!",logout:"Logout",logoutConfirm:"Are you sure you want to logout?",login:"Login",gameStats:"Game Stats",level:"Level",points:"Points",coins:"Coins",catFragments:"Cat Fragments",back:" Back"}},p=pe(()=>o.value===""?f.ko:f.en);Nt(()=>{const C=dt();if(C)i.value=C,t.loadCurrentUser(),a.value=C.email||C.id||"",l.value=C.name||C.displayName||a.value.split("@")[0]||"User",c.value=C.photoURL||"",d.value=C.id||"ID"+String(Math.random()).substring(2,10);else{const q={id:"guest_"+Date.now(),email:"guest@tdl.com",name:"Guest",loginType:"guest",gameData:{level:1,coins:0,totalCoin:0,catFragments:50}};i.value=q,a.value=q.email,l.value=q.name,d.value=q.id}const M=localStorage.getItem("appLanguage");M?o.value=M:(o.value="English",localStorage.setItem("appLanguage","English"));const Q=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",Q),rn(()=>{window.removeEventListener("userDataUpdated",Q)})});const m=()=>{window.history.length>1?e.back():e.push("/settings")},_=()=>{navigator.clipboard.writeText(d.value),alert(p.value.copySuccess)},y=pe(()=>i.value?.loginType==="guest"||i.value?.email?.includes("@guest.com")||i.value?.email==="guest@tdl.com"),A=()=>{console.log("   -   "),e.push("/login").then(()=>{console.log("   ")}).catch(C=>{console.error("  :",C),window.location.hash="#/login"})},w=()=>{confirm(p.value.logoutConfirm)&&(Q1(),s(),e.push("/login"))},I=pe(()=>i.value?{level:i.value.gameData?.level||1,points:i.value.gameData?.coins||0,coins:i.value.gameData?.totalCoin||0,catFragments:i.value.gameData?.catFragments||i.value.gameData?.catCount||0}:null);return(C,M)=>(L(),B("div",uz,[ze(jn,{coinCount:r.value},null,8,["coinCount"]),h("main",dz,[h("button",{class:"backBtn",onClick:m},E(p.value.back),1),h("div",hz,[h("div",fz,[c.value?(L(),B("img",{key:0,src:c.value,alt:l.value,class:"profileImage"},null,8,pz)):(L(),B("div",gz,E(l.value.charAt(0).toUpperCase()),1))]),h("div",mz,[h("h2",vz,E(l.value),1),h("p",yz,E(a.value),1)])]),h("div",Az,[h("label",wz,E(p.value.userID),1),h("div",_z,[h("span",Ez,E(d.value),1),h("button",{class:"copyBtn",onClick:_},"")])]),I.value?(L(),B("div",bz,[h("h3",Iz,E(p.value.gameStats),1),h("div",Cz,[h("div",Tz,[M[0]||(M[0]=h("div",{class:"statIcon"},"",-1)),h("div",Sz,[h("div",Pz,E(p.value.level),1),h("div",Rz,E(I.value.level),1)])]),h("div",xz,[M[1]||(M[1]=h("div",{class:"statIcon"},"",-1)),h("div",kz,[h("div",Nz,E(p.value.points),1),h("div",Dz,E(I.value.points.toLocaleString()),1)])]),h("div",Oz,[M[2]||(M[2]=h("div",{class:"statIcon"},"",-1)),h("div",Lz,[h("div",Bz,E(p.value.coins),1),h("div",Mz,E(I.value.coins.toLocaleString()),1)])]),h("div",Fz,[M[3]||(M[3]=h("div",{class:"statIcon"},"",-1)),h("div",Uz,[h("div",Vz,E(p.value.catFragments),1),h("div",$z,E(I.value.catFragments.toLocaleString()),1)])])])])):he("",!0),h("div",Hz,[y.value?(L(),B("button",{key:0,class:"loginBtn",onClick:kn(A,["prevent"]),type:"button"},E(p.value.login),1)):(L(),B("button",{key:1,class:"logoutBtn",onClick:kn(w,["prevent"]),type:"button"},E(p.value.logout),1))])]),ze(zn)]))}},Qz=Qt(Gz,[["__scopeId","data-v-10a897ba"]]),jz={class:"attendancePage"},zz={class:"mainContent"},Wz={class:"attendanceInfo"},Kz={class:"infoItem"},qz={class:"infoValue"},Jz={class:"infoItem"},Yz={class:"infoValue"},Xz={key:0,class:"attendanceMessage"},Zz={class:"attendanceGrid"},eW=["onClick"],tW={class:"dayNumber"},nW={class:"rewardIcon"},sW={key:0,class:"specialStar"},rW={class:"rewardAmount"},iW={__name:"AttendancePage",setup(n){const e=on(),t=Pn(),s=pe(()=>e.state.coins),r=U(null),i=U(0),o=U([]),a=U(null),l=U(0),c=U(Array.from({length:20},(w,I)=>({day:I+1,reward:"1K",rewardType:"P",hasSpecial:[5,9,10,11,16,17].includes(I+1),isChecked:!1}))),d=(w,I)=>new Date(w).toDateString()===new Date(I).toDateString(),f=()=>{t.go(-1)},p=async w=>{if(!r.value){alert(" .");return}const I=new Date;I.toDateString();const C=I.toISOString();if(a.value&&d(a.value,C)){alert("   !   .");return}const M=c.value[w];if(M.isChecked){alert("  .");return}const Q=o.value.length;if(a.value){const T=new Date(a.value),P=Math.floor((I-T)/(1e3*60*60*24));if(P>0&&w!==Q){alert("   .");return}P===1?l.value+=1:P>1&&(l.value=1)}else l.value=1;M.isChecked=!0,o.value.push(M.day),i.value=o.value.length;const q=1e3,x=s.value+q;a.value=C,r.value&&(await e.updateCoins(x),await m()),alert(`Day ${M.day}  ! ${q}  !`),window.dispatchEvent(new Event("userDataUpdated"))},m=async()=>{if(r.value){const w={checkedDays:o.value,attendanceDays:i.value,consecutiveDays:l.value,lastCheckInDate:a.value,lastUpdate:new Date().toISOString()};localStorage.setItem(`attendance_${r.value.id}`,JSON.stringify(w)),await e.updateGameData({attendance:w})}},_=async()=>{if(r.value){let w=null;if(r.value.gameData?.attendance&&(w=r.value.gameData.attendance),!w){const I=localStorage.getItem(`attendance_${r.value.id}`);I&&(w=JSON.parse(I),w&&await e.updateGameData({attendance:w}))}w&&(o.value=w.checkedDays||[],i.value=w.attendanceDays||0,l.value=w.consecutiveDays||0,a.value=w.lastCheckInDate||null,o.value.forEach(I=>{const C=I-1;c.value[C]&&(c.value[C].isChecked=!0)}))}},y=pe(()=>{if(!a.value)return!0;const w=new Date,I=new Date(a.value),C=w.toDateString(),M=I.toDateString();return C!==M}),A=pe(()=>o.value.length);return Nt(async()=>{r.value=dt(),e.loadCurrentUser(),r.value&&await _();const w=()=>{e.loadCurrentUser()};window.addEventListener("userDataUpdated",w),rn(()=>{window.removeEventListener("userDataUpdated",w)})}),(w,I)=>(L(),B("div",jz,[ze(jn,{coinCount:s.value},null,8,["coinCount"]),h("main",zz,[h("button",{class:"backBtn",onClick:f}," "),I[3]||(I[3]=h("h1",{class:"pageTitle"},"",-1)),h("div",Wz,[h("div",Kz,[I[0]||(I[0]=h("span",{class:"infoLabel"}," :",-1)),h("span",qz,E(l.value)+"",1)]),h("div",Jz,[I[1]||(I[1]=h("span",{class:"infoLabel"}," :",-1)),h("span",Yz,E(i.value)+"",1)])]),y.value?he("",!0):(L(),B("div",Xz,"   !   . ")),h("div",Zz,[(L(!0),B(Re,null,We(c.value,(C,M)=>(L(),B("div",{key:C.day,class:De(["dayCell",{checked:C.isChecked,disabled:!y.value&&!C.isChecked||M!==A.value&&!C.isChecked,nextCheckable:y.value&&M===A.value&&!C.isChecked}]),onClick:Q=>y.value&&(M===A.value||C.isChecked)?p(M):null},[h("div",tW,"Day "+E(C.day),1),h("div",nW,[I[2]||(I[2]=h("div",{class:"iconCircle"},"P",-1)),C.hasSpecial&&!C.isChecked?(L(),B("span",sW,"")):he("",!0)]),h("div",rW,E(C.reward),1)],10,eW))),128))])]),ze(zn)]))}},oW=Qt(iW,[["__scopeId","data-v-c440a219"]]),ea=()=>{const n=localStorage.getItem("marketplace");return n?JSON.parse(n):[]},Cv=n=>{localStorage.setItem("marketplace",JSON.stringify(n))},aW=(n,e,t)=>{const s=ea(),r={id:`market_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sellerAddress:t,nftId:n.id,nftData:{...n},price:e,priceType:"COIN",listedAt:Date.now(),status:"listed"};return s.push(r),Cv(s),r},lW=(n,e)=>{const t=ea(),s=t.findIndex(i=>i.id===n&&i.status==="listed");if(s===-1)return{success:!1,error:"  NFT ."};const r=t[s];return r.sellerAddress===e?{success:!1,error:" NFT   ."}:(t[s].status="sold",t[s].soldAt=Date.now(),t[s].buyerAddress=e,Cv(t),{success:!0,listing:r,nftData:r.nftData})},cW=(n,e)=>{const t=ea(),s=t.findIndex(r=>r.id===n&&r.sellerAddress===e&&r.status==="listed");return s===-1?{success:!1,error:"  NFT ."}:(t[s].status="cancelled",t[s].cancelledAt=Date.now(),Cv(t),{success:!0,listing:t[s]})},uW=n=>ea().filter(t=>t.sellerAddress===n&&t.status==="listed"),dW=()=>ea().filter(e=>e.status==="listed"),hW=n=>ea().some(t=>t.nftId===n&&t.status==="listed"),fW=()=>{const n=ea(),e=n.filter(s=>s.status==="listed"),t=n.filter(s=>s.status==="sold");return{totalListings:n.length,activeListings:e.length,soldListings:t.length,totalVolume:t.reduce((s,r)=>s+(r.price||0),0)}},pW="/tdl/assets/btc-DC8WHF5v.png",gW="/tdl/assets/eth-DHgp7Wvq.png",mW="/tdl/assets/BTC_line-DiGuGbEI.png",vW="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAACJCAYAAABaWIDDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA85SURBVHgB7d1fchPHFsfxMybJw61KhbuCTN5yqRDbK0BeAXgFmBXErACxguAVYFZgswLEClBibnLf7rCCKDhVqSJGndPqNghibHXPjKZ75vupUqQYy/yxpf5Nd5/ThQAAMBBGtq7r3ZbIfFPvS5GidPeiHzfX3f2yotL/zPxNHxu9bfxkHxcynUrGCgEAoKf8gD/SAf+WDnl39COlNKqwIaDSrzvNLRgQAAAAveIHfTvY39WbXu1/fFW/DsVEFrMGZuKDwSy1YEAAAAD0gg78I73Sv60P96STQf9KMz9jsBwM7IxBJR0gAAAAsuYGfvNAbyPJkw8Gxi8nLILBVIPBTFpEAAAAZEkHfp3eNz9mPPBfpdVgQAAAAGTFrfHPx/rwBxmmRoIBAQAAkA0jN+/o0PVY0lzj71pQMHgXAHyi2tcP2dpI/mHXa+ZqS+19P+pLAaBJXPXXshQMNg7ONx0uAoAmqj19qOsoDPwJqfw37Fi/YU/b3gwCAKnSwb/Uwf+ZuIY9qMdecN4r5OS48P+w/xckrjjU2xMNAhMBgIFoacr/vKvfxHX6szOwb1/p/W8if/5eSDVzv/d/vtZf/7fIta/edwy0fQUWj7ckX/r3O9vRALCp/7BmT5CLSm/jQn5+IgDQY0a+12Vp+VGaUbkZVdHb6U/ng3wdGk5uiQsmI1kEgsK3Gc6BmWgA+F4TD1P/+Sn0h7i431UDCQBok45NY717IPXY6e5DvT/WKe/nsgZGSh1PvzzfSzcSFwxKSW/5YmYDgBHk7KHOBowFAHqigcFfB/75I5E/Dpq40m/C+2BQbPnzCLbc4+4uwG0AsOv/pSBndmfnLrMBAHJXc/BPbuC/SofBYGoDgP2HHgtyV2kI2CEEAMhVvTV/u6Hvr3uF/K+SHlhDMNgvfG3lM8l7RyMct7NTfqGHAICsuLa+8xcSzl71jwt5eSAD0FAwmOrS8bbvA2BDwFtNXcWeIHeEAABZqVHnX+n73S7vdyHBwOgSyelDu0RSXPwFsEbXfelI6etLR1J/isd2FNxmOQBADoxsPos40EcH/dc7uaz1d8XIjS3Xx8D6sPyRswAS5GtL93wYKCVOxZ4AAKmL2/RnS/tO7zP410MASJxv02xfHKWEm/oQwIsEQHLiOtGaw0JO7glq2xAkTX/QD0Xe7Lh1m2Bbbm8HAKTIHAV9uphjBv/mEAAyYMta9If+vv7w74prBRzy7D0/xQYAyXCzmyak+qzSaX8G/waxBJAZI9+WIl9E7JY1u/b0JwGABAQ2oavsTGhfavxTwQxAZtwLwC4JBM8EPHbrbQDQLT8rWQY8Zczg3zwCQIaWQkDI5r5FwydCAIAu+feguwHPeMTpp+0gAGTKhYD5btizbOKeB266AYAmzfckaOr/9KGgFQSAjBXycqJ39yXMlk6/URkAYO3Cr/7t1D+1/m0hAGROp8YeRZQI7lMZAGD9TEhPkylT/+2iCqAnjNx85jsHhjyLygAAaxHe9MeM9P3puaA1zAD0xrWYHgFUBgBYExPQ7tdMGPzbxwxAj/geAfY4zZDDhCrODADQpvCr/zffUPbXPmYAeoTKAABpCrr6P2TwXw8CQM9QGQAgJe7q3+yt/oy/KPtbEwJAD9WoDNgXAGgUV/+pYg9Aj8VVBsx3/CwCANTC2n/amAHotZjKgI0jKgMANMM8Dvhcrv7XjBmAnqtRGbBdyJQOXACi6IXEyJ4/svozuPpfN2YAes69oEzoGdqlyFsqAwDUYAI2FnP13wUCwAC4bn/zsQQpRlQGAIhh5Oae/ndrxU+v2PnfDZYABkRflDqgF6E7/e+7qgIgLX6vih1k7FHXX7uPFuXSZ9glLL+MtfFK3H6YiqZX7dOLB7vxr1zts+fjQl4SADpAABgYfWHa/QCrJnOPygB0yw/2I310SxY/v8b+f8i+lmUaCoqpfg29bdh2s1NCQXPc1X+x6ua/Stf+d5j+7wYBYGD8pkC7MacMeNrMbwqsBFgTv4nstr5N3fEDfotsIBC9FU+FQFBL4NX/vl5cHAg6QQAYICoDkCod9O10vl2m+kHir/CbUOnb48QeSmNnCQgEqwm9+tflxW8EnSEADJS+UPWqqgjc6b84oWtHgIa5q33bMc6MJE2VXzY41kDwkwaCqeADvulPyOzingaAJ4LOEAAGzMh3+oa7MZYwj/RFG3rWAHChDAb+T6kIBB8ysvk4oOc/V/8JIAAMHJUB6II/IOaBBB0Sk7TZR0sGgwoE/hyRkLJhrv4TQAAAlQFYKz9Y2ANiulzjb9tyILAzBBPpKQ1z+t4xfxHwFK7+E0EAAJUBWAt/1f84w+n+Jsw+WjKYSA/4wd++d4SEOa7+E0EAwIKRG/pC/iz0hVxRGYBV+N3hdoq4z1f9Ic4DwcQvGUwkM3GDv235exLamhwtIQDgncASnvNnURmAS+mUv90v8oO0o3INfRYDanXxpyx6COit8F0DU/XBHoKJJCwy0On36M02TX/SQQDAB6gMQFNcTf9iyv+ONGPmBvvi2N2f6lR6FTT7ZKTUP9OXm/asC7cUYe9TtQgEtlvheXOizmfafJ+GsUQFOpr+pIYAgH/QdH+oPxp3JQyVAXjHDxR2ejhwc+mFX22iP4+HIq+fhg74K311uXlrKRAkPEvQbSDwnRntDGEpwYxeJJxwkZAYAgD+If7Nm8oARDWEuYgObnMNlH8ctDHoX8YHgi03c5F0IHi3h0D/Z9JWIGigV0Ol4W173d9HXI0AgAtRGYAYPjzakrBS4nQ28H/KUiAY+SWDHAJBrfMM/Pfxrj+HYSTxKg77SRcBAJ9EZQBC1J/2N4e6rn8/9StF/7q4lUcgeHfAUXVZcyL3vbPft/mmH/SbmPmoGPzTRgDApagMwKqMbB5FbvirbEdA/Zl5LhlygeCaHTBv+yWDUpK1qJSY+dt1dzP+vlEVg3/6CAC4EpUBuEp8qZ+dsj7d7dP6cF6BoBUVg38eCABYCZUB+BQd/MfiWvsGmo8LeflQes7tp/l8pA99tUGfA0H/Al2fEQCwEioDcJEag/9ga8I/CgT29RS5ZyI11PnnhgCAlVEZgGURJ8B5b3W9/7/0gvd8INjUh3cyDQRTkbN7hfwyFWSFAIAgVAbA0iUhO1gdSTAG/6v4boU6OyAjv2SQaiCY+WUcrvozRQBAMCoDhi3yBDgZypp/0xIMBMn1akAcAgCiUBkwTPFd/hj8m/L+PAO7ZGDDwNrOM9Ap/vkxA39/EAAQjcqAYWHwT1PLBxxV+jV10JfjXPs04NMIAIhGZcBwxA/+nP/ehaUDjuwMQSmrvUbtVX3lD1/Sq/2/dNnu11eC3iIAoJbIyoBKlw92qAzIQ40Wv1Od7dkWJMHNFPyrFLn21fuPvv1df+U3kT9/Z1p/eAgAqI3KgH6LbPFbcQIckLYNAWpy9b8mdHNfqVcfgZUEWDfX4jdm8LetYBn8gZQRANAIXec9tJu9JEhxx3eSQ4L89ya0v39FH3ggDywBoFFUBvRDZItfveJ/s83gD+SBAIBGxW8YO9umlWga4lv88j0EcsISABrlNvW92ZXFVHCIz45cqRm65Fr8xvb3Z/AHckIAQOPcFPCZDQEhm8BKO3PgZhDQBdfit4jYmGkb/dDfH8gNAQCtoDIgL77Rjz3ch/7+wEAQANAaKgPyQItfYJjYBIjWURmQLlr8AsNFAEDrIisDZiJnO2wsa098xQZHOwN9wBIAWhdZGXCdyoC2GbvfIri/v8jprgDIHgEAa1GjMuCIyoDm1Wjxu0uLX6AfCABYGz+dH7ppTK9Q30bUpeNTaPELwCIAYK3cxr7gyoA9KgOaUaPFL4M/0DNsAkQnjNw8siV/EmZPAwQNZyJFtvhlMybQUwQAdMLvQH8hYeVnDEaRXIvf4kiC2Ra/dPkD+oglAHTCVwbYUrIq4GlUBkSo0eJ3n8Ef6C8CADqzVBkQoqQyYHU1W/weCIDeIgCgU346P/TMACoDVkCLXwCXIQCgc1QGNK9ei18Gf2AI2ASIZFAZ0Axa/AJYBTMASMg1e7hMJWEeGbkR2s6252jxC+BqBAAkg8qA+mjxC2BVBAAkxVUGzEOPmS2pDKDFL4AwBAAkp5CXE6EyIAgtfgGEIgAgSa4ywDwKfNYgKwN8i9+Iwf+MwR8YMKoAkDQjN5/pj+lIwgymMoAWvwBiMQOAxF2zO9MrCTOIygBa/AKogwCApC1VBoTsUO99ZQAtfgHURQBA8nxlAGcGeLT4BdAEAgCyQGWAU6PF7yMGfwDL2ASIrBi5qQN6sR/4tIeF/DyWzNVo8XtcyAld/gB8gBkAZEUHsvu2Z72EeWDk+7uSvegWv6GNlQAMAAEAGRpeZQAtfgE0jQCA7AytMoAWvwDaQABAloZSGRDZ4rdi8AdwFQIAstX3yoAaLX53GfwBXIUAgKz19cwA1+JXIoKKuVfIL1MBgCtQBohe6NOZAa7F76LcL7TL3z5d/gCsihkA9EQ/KgNo8QtgXZgBQG8Y+bYU+eKFhA2e/ljc7qfNafELYJ2YAUBvRFYG2PLAZ37NvTM6+I/0z27DSylBaPELIA4BAL0SWRmgIaA46mpjoNvtH7Pmv2jxG/p3BYAFlgDQS5FnBliV5mJdEphW0jI35W/b+5qRhNMli9c7dPkDEIsAgN6KrAzwikO9PWwjCPhDfWw4sd39YpoSVTT6AVAXAQC95QfaiHX1ZYsgcKBBoPYmQb/Of1sf7kncwG9VDP4AmkAAQK/5yoCInfX/UOntWJcHnur91J1HcNXvvWg5bGv6R/pSuxU51f/Rn4HBH0AzCADovQZDwJLCzgjYEFDp71AtfbwUd3WvA78ppTkVgz+AJhEAMAjthIC1qRj8ATSNMkAMghs87RHCZiJ5mTL4A2gDAQCDYQfRQk52bOc8yYI95Og1gz+AVrAEgEEy8t1I8+9jSXNJYOZO9Ts5FgBoCTMAGCTXMXBjO73ZgMVV/zcM/gDaxgwABs9tEPz8gb4c9qQzi70JYx34nwsArAEBAPA6CAJ2qt9e6R8y8ANYNwIA8BEfBEb68G58K+FLf4eJfl0d+F8/oZc/gK4QAIBLGCmvi3x5Sx+OfBjYknBT/Up6KyY66D9l0AeQAgIAEMjIDQ0B177yXf/KCz6l0s/SQf5sWsivrwQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADA0PwNkHeXO5vHqaMAAAAASUVORK5CYII=",yW={class:"nftPage"},AW={class:"mainContent nftWrap"},wW={class:"tabMenu"},_W={key:0,class:"walletContent"},EW={class:"walletSection"},bW={class:"walletBalance"},IW={class:"btcInfo"},CW={class:"change positive"},TW={key:0,class:"ethInfo"},SW={class:"subTabMenu"},PW={key:0,class:"itemList"},RW={class:"itemIcon"},xW={class:"itemInfo"},kW={class:"itemSymbol"},NW={class:"itemName"},DW={class:"itemChart"},OW={class:"itemPrice"},LW={class:"price"},BW={key:1,class:"nftList"},MW=["onClick"],FW={class:"nftThumbnail"},UW={class:"nftInfo"},VW={class:"nftId"},$W={class:"collectionName"},HW={class:"nftValue"},GW={class:"nftStars"},QW={class:"nftLevel"},jW={key:0,class:"emptyNFTs"},zW={class:"emptyText"},WW={key:1,class:"marketplaceContent"},KW={class:"marketplaceHeader"},qW={class:"marketplaceStats"},JW={class:"filterBar"},YW={value:"all"},XW={value:"common"},ZW={value:"rare"},eK={value:"epic"},tK={value:"legendary"},nK={value:"all"},sK={value:"low"},rK={value:"mid"},iK={value:"high"},oK={value:"newest"},aK={value:"oldest"},lK={value:"priceLow"},cK={value:"priceHigh"},uK={value:"level"},dK={value:"stars"},hK={key:0,class:"nftGrid"},fK=["onClick"],pK={class:"nftCardImage"},gK=["src"],mK={class:"nftCardBadges"},vK={class:"starBadge"},yK={class:"levelBadge"},AK={class:"nftCardInfo"},wK={class:"nftCardName"},_K={class:"nftCardPrice"},EK={class:"priceLabel"},bK={class:"priceValue"},IK=["onClick"],CK={key:1,class:"emptyMarketplace"},TK={class:"emptyText"},SK={key:2,class:"myNFTsContent"},PK={class:"sectionHeader"},RK={class:"myCoinBalance"},xK={key:0,class:"nftGrid"},kK=["onClick"],NK={class:"nftCardImage"},DK=["src"],OK={class:"nftCardBadges"},LK={class:"starBadge"},BK={class:"levelBadge"},MK={class:"nftCardInfo"},FK={class:"nftCardName"},UK=["onClick"],VK={key:1,class:"emptyMarketplace"},$K={class:"emptyText"},HK={key:3,class:"myListingsContent"},GK={class:"sectionHeader"},QK={key:0,class:"nftGrid"},jK={class:"nftCardImage"},zK=["src"],WK={class:"nftCardBadges"},KK={class:"starBadge"},qK={class:"levelBadge"},JK={class:"nftCardInfo"},YK={class:"nftCardName"},XK={class:"nftCardPrice"},ZK={class:"priceLabel"},eq={class:"priceValue"},tq=["onClick"],nq={key:1,class:"emptyMarketplace"},sq={class:"emptyText"},rq={class:"modalHeader"},iq={class:"modalTitle"},oq={class:"modalBody"},aq={class:"sellNFTPreview"},lq=["src"],cq={class:"sellNFTInfo"},uq={class:"sellNFTName"},dq={class:"sellNFTDetails"},hq={class:"sellPriceInput"},fq={class:"inputLabel"},pq=["placeholder"],gq={class:"priceHint"},mq={class:"modalFooter"},vq={class:"modalHeader"},yq={class:"modalTitle"},Aq={class:"modalBody"},wq={class:"buyNFTPreview"},_q=["src"],Eq={class:"buyNFTInfo"},bq={class:"buyNFTName"},Iq={class:"buyNFTDetails"},Cq={class:"buyPriceInfo"},Tq={class:"priceRow"},Sq={class:"priceLabel"},Pq={class:"priceValue"},Rq={class:"priceRow"},xq={class:"priceLabel"},kq={key:0,class:"insufficientWarning"},Nq={class:"modalFooter"},Dq=["disabled"],Oq={class:"modalHeader"},Lq={class:"modalTitle"},Bq={class:"modalBody"},Mq={class:"detailNFTImage"},Fq=["src"],Uq={class:"detailBadges"},Vq={class:"detailStarBadge"},$q={class:"detailLevelBadge"},Hq={class:"detailInfo"},Gq={class:"detailRow"},Qq={class:"detailValue"},jq={class:"detailRow"},zq={class:"detailLabel"},Wq={class:"detailValue"},Kq={class:"popupHeader"},qq={class:"popupTitle"},Jq={class:"popupBody"},Yq={class:"popupMessage"},Xq={class:"popupActions"},Zq={class:"popupHeader"},eJ={class:"popupTitle"},tJ={class:"popupBody"},nJ={class:"popupMessage"},sJ={class:"popupActions"},rJ={class:"popupHeader"},iJ={class:"popupTitle"},oJ={class:"popupBody"},aJ={class:"popupMessage"},lJ={class:"popupActions"},cJ={class:"searchModalHeader"},uJ={class:"searchModalTitle"},dJ={class:"searchModalBody"},hJ=["placeholder"],fJ={class:"searchModalFooter"},pJ={__name:"NFTPage",setup(n){const e=on(),t=pe(()=>e.state.coins),s=pe(()=>e.state.totalCoin),r=U("wallet"),i=U("$ 5,323.00"),o=U("0.0000 ETH"),a=U("0.00335"),l=U("+6.54%"),c=U(!1),d=U(!1),f=U(!1),p=U([]),m=U([]),_=U([]),y=U(!1),A=U(!1),w=U(!1),I=U(null),C=U(""),M=U("all"),Q=U("all"),q=U("newest"),x=U(""),T=U(!1),P=U("tokens"),S=U(null),b=pe(()=>ms()),D=W=>{try{return new URL(Object.assign({"../assets/img/cat1.png":hl,"../assets/img/cat10.png":fl,"../assets/img/cat11.png":pl,"../assets/img/cat12.png":gl,"../assets/img/cat13.png":ml,"../assets/img/cat14.png":vl,"../assets/img/cat15.png":yl,"../assets/img/cat16.png":Al,"../assets/img/cat17.png":wl,"../assets/img/cat18.png":_l,"../assets/img/cat19.png":El,"../assets/img/cat2.png":bl,"../assets/img/cat20.png":Il,"../assets/img/cat21.png":Cl,"../assets/img/cat22.png":Tl,"../assets/img/cat23.png":Sl,"../assets/img/cat24.png":Pl,"../assets/img/cat25.png":Rl,"../assets/img/cat26.png":xl,"../assets/img/cat27.png":kl,"../assets/img/cat28.png":Nl,"../assets/img/cat29.png":Dl,"../assets/img/cat3.png":Ol,"../assets/img/cat30.png":Ll,"../assets/img/cat4.png":Bl,"../assets/img/cat5.png":Ml,"../assets/img/cat6.png":Fl,"../assets/img/cat7.png":Ul,"../assets/img/cat8.png":Vl,"../assets/img/cat9.png":$l,"../assets/img/catPoint.png":Hl,"../assets/img/catPointPlus.png":Gl,"../assets/img/catProfile01.png":Ql,"../assets/img/catProfile02.png":jl,"../assets/img/cat_ico.png":zl})[`../assets/img/cat${W}.png`],import.meta.url).href}catch{return`/src/assets/img/cat${W}.png`}},k=()=>{p.value=dW(),S.value&&(_.value=uW(S.value.walletAddress||S.value.id),m.value=(S.value.gameData?.inventory||[]).filter(W=>!hW(W.id)))},ke=pe(()=>{let W=[...p.value];if(x.value.trim()){const F=x.value.toLowerCase();W=W.filter(j=>j.nftData.name.toLowerCase().includes(F)||String(j.nftData.imageId).includes(F))}return M.value!=="all"&&(W=W.filter(F=>(F.nftData.rarity||et.COMMON)===M.value)),Q.value!=="all"&&(Q.value==="low"?W=W.filter(F=>F.price<1e3):Q.value==="mid"?W=W.filter(F=>F.price>=1e3&&F.price<5e3):Q.value==="high"&&(W=W.filter(F=>F.price>=5e3))),W=[...W].sort((F,j)=>{switch(q.value){case"newest":return j.listedAt-F.listedAt;case"oldest":return F.listedAt-j.listedAt;case"priceLow":return F.price-j.price;case"priceHigh":return j.price-F.price;case"level":return(j.nftData.level||1)-(F.nftData.level||1);case"stars":return(j.nftData.stars||0)-(F.nftData.stars||0);default:return 0}}),W}),ie=W=>{I.value=W,C.value="",y.value=!0},H=()=>{y.value=!1,I.value=null,C.value=""},V=async()=>{if(!I.value)return;const W=parseFloat(C.value);if(!W||W<=0){alert(b.value.enterValidPrice);return}if(!S.value){alert(b.value.loginRequired);return}const F=S.value.walletAddress||S.value.id;aW(I.value,W,F);const ne=(S.value.gameData?.inventory||[]).filter(ae=>ae.id!==I.value.id);await e.updateGameData({inventory:ne}),k(),alert(`${b.value.nftListedOnMarketplace} (${b.value.price}: ${W.toLocaleString()} ${b.value.coin})`),H()},Z=W=>{I.value=W,A.value=!0},me=()=>{A.value=!1,I.value=null},Ve=async()=>{if(!I.value||!S.value)return;const W=I.value,F=S.value.walletAddress||S.value.id,j=S.value.gameData?.totalCoin||0;if(j<W.price){alert(`${b.value.insufficientCoinsForPurchase} (${b.value.required}: ${W.price.toLocaleString()}, ${b.value.ownedCoins}: ${j.toLocaleString()})`);return}const ne=lW(W.id,F);if(!ne.success){alert(ne.error);return}const ae=S.value.gameData?.inventory||[];ae.unshift(ne.nftData),await e.updateGameData({inventory:ae,totalCoin:j-W.price});const{getAllUsers:de}=await md(async()=>{const{getAllUsers:xe}=await Promise.resolve().then(()=>Hx);return{getAllUsers:xe}},void 0),ve=de().find(xe=>(xe.walletAddress||xe.id)===W.sellerAddress);if(ve){const xe=ve.gameData?.totalCoin||0;await Qc(ve.id,{totalCoin:xe+W.price}),window.dispatchEvent(new CustomEvent("userDataUpdated"))}k(),alert(`${b.value.nftPurchased} (${W.price.toLocaleString()} ${b.value.coinsPaid})`),me()},Ne=async W=>{if(!confirm(b.value.confirmCancelSale)||!S.value)return;const F=S.value.walletAddress||S.value.id,j=cW(W.id,F);if(!j.success){alert(j.error);return}const ne=S.value.gameData?.inventory||[];ne.unshift(W.nftData),await e.updateGameData({inventory:ne}),k(),alert(b.value.saleCancelled)},se=W=>{I.value=W,w.value=!0},z=()=>{w.value=!1,I.value=null},ue=()=>{x.value="",M.value="all",Q.value="all",q.value="newest"},Pe=pe(()=>fW()),tt=U([{id:1,name:"Bitcoin",symbol:"BTC",price:"36,590.00",change:"+6.21%",isPositive:!0,image:pW,lineImage:mW},{id:2,name:"Ethereum",symbol:"ETH",price:"2,590.00",change:"+5.21%",isPositive:!0,image:gW,lineImage:vW}]),Y=pe(()=>S.value?(S.value.gameData?.inventory||[]).slice(0,10):[]),ge=()=>S.value?`$ ${((S.value.gameData?.totalCoin||0)*.01).toFixed(2)}`:"$ 0.00",fe=()=>{d.value=!0},we=()=>{c.value=!0},Qe=()=>{f.value=!0},N=()=>{d.value=!1},O=()=>{c.value=!1},G=()=>{f.value=!1};Nt(()=>{S.value=dt(),e.loadCurrentUser(),S.value&&(i.value=ge(),e.isWalletConnected&&e.walletAddress&&(o.value=e.userBalance)),k();const W=()=>{S.value=dt(),e.loadCurrentUser(),S.value&&(i.value=ge()),k()};window.addEventListener("userDataUpdated",W),rn(()=>{window.removeEventListener("userDataUpdated",W)})});const te=W=>{r.value=W,k()};return(W,F)=>(L(),B("div",yW,[ze(jn,{coinCount:t.value},null,8,["coinCount"]),h("main",AW,[h("div",wW,[h("button",{class:De(["tab",{active:r.value==="wallet"}]),onClick:F[0]||(F[0]=j=>te("wallet"))},E(b.value.wallet),3),h("button",{class:De(["tab",{active:r.value==="marketplace"}]),onClick:F[1]||(F[1]=j=>te("marketplace"))},E(b.value.marketplace),3),h("button",{class:De(["tab",{active:r.value==="myNFTs"}]),onClick:F[2]||(F[2]=j=>te("myNFTs"))},E(b.value.myNFTs),3),h("button",{class:De(["tab",{active:r.value==="myListings"}]),onClick:F[3]||(F[3]=j=>te("myListings"))},E(b.value.myListings),3)]),r.value==="wallet"?(L(),B("div",_W,[h("div",EW,[F[23]||(F[23]=h("div",{class:"walletLabel"},"Current Wallet Balance",-1)),h("div",bW,E(i.value),1),h("div",IW,[h("span",null,"BTC : "+E(a.value),1),h("span",CW,E(l.value),1)]),o.value!=="0.0000 ETH"?(L(),B("div",TW,[h("span",null,"ETH : "+E(o.value),1)])):he("",!0)]),h("div",{class:"actionButtons"},[h("button",{class:"actionBtn sendBtn",onClick:fe},[...F[24]||(F[24]=[h("div",{class:"btnIcon"},null,-1),h("span",{class:"btnLabel"},"Send",-1)])]),h("button",{class:"actionBtn buyBtn",onClick:we},[...F[25]||(F[25]=[h("div",{class:"btnIcon"},null,-1),h("span",{class:"btnLabel"},"Buy",-1)])]),h("button",{class:"actionBtn receiveBtn",onClick:Qe},[...F[26]||(F[26]=[h("div",{class:"btnIcon"},null,-1),h("span",{class:"btnLabel"},"Receive",-1)])])]),h("div",SW,[h("button",{class:De(["subTab",{active:P.value==="tokens"}]),onClick:F[4]||(F[4]=j=>P.value="tokens")}," Tokens ",2),h("button",{class:De(["subTab",{active:P.value==="nfts"}]),onClick:F[5]||(F[5]=j=>P.value="nfts")}," NFTs ",2)]),P.value==="tokens"?(L(),B("div",PW,[(L(!0),B(Re,null,We(tt.value,j=>(L(),B("div",{key:j.id,class:"item"},[h("div",RW,[h("div",{class:"iconCircle",style:St({backgroundImage:`url(${j.image})`})},null,4)]),h("div",xW,[h("div",kW,E(j.symbol),1),h("div",NW,E(j.name),1)]),h("div",DW,[h("div",{class:"chartLine",style:St({backgroundImage:`url(${j.lineImage})`})},null,4)]),h("div",OW,[h("div",LW,"$"+E(j.price),1),h("div",{class:De(["change",{positive:j.isPositive,negative:!j.isPositive}])},E(j.change),3)])]))),128))])):he("",!0),P.value==="nfts"?(L(),B("div",BW,[(L(!0),B(Re,null,We(Y.value,j=>(L(),B("div",{key:j.id,class:"nftItem",onClick:ne=>se(j)},[h("div",FW,[h("div",{class:"thumbnailPlaceholder",style:St({backgroundImage:`url(${D(j.imageId||j.id)})`})},null,4)]),h("div",UW,[h("div",VW,"#"+E(j.id),1),h("div",$W,E(j.name),1)]),h("div",HW,[h("div",GW,[(L(),B(Re,null,We(5,ne=>h("span",{key:ne,class:"star"},E((ne<=(j.stars||0),"*")),1)),64))]),h("div",QW,"Lv "+E(j.level||1),1)])],8,MW))),128)),Y.value.length===0?(L(),B("div",jW,[F[27]||(F[27]=h("div",{class:"emptyIcon"},"?",-1)),h("div",zW,E(b.value.noNFTsInWallet),1)])):he("",!0)])):he("",!0)])):he("",!0),r.value==="marketplace"?(L(),B("div",WW,[h("div",KW,[h("div",qW,[h("span",null,E(b.value.onSale)+": "+E(Pe.value.activeListings)+E(b.value.itemsCount),1),h("span",null,E(b.value.totalVolume)+": "+E(Pe.value.totalVolume.toLocaleString())+" "+E(b.value.coin),1)]),h("button",{class:"searchBtn",onClick:F[6]||(F[6]=j=>T.value=!0)},[F[28]||(F[28]=h("span",null,"?",-1)),h("span",null,E(b.value.searchNFT),1)])]),h("div",JW,[Wt(h("select",{"onUpdate:modelValue":F[7]||(F[7]=j=>M.value=j),class:"filterSelect"},[h("option",YW,E(b.value.allRarity),1),h("option",XW,E(b.value.common),1),h("option",ZW,E(b.value.rare),1),h("option",eK,E(b.value.epic),1),h("option",tK,E(b.value.legendary),1)],512),[[Di,M.value]]),Wt(h("select",{"onUpdate:modelValue":F[8]||(F[8]=j=>Q.value=j),class:"filterSelect"},[h("option",nK,E(b.value.allPrice),1),h("option",sK,E(b.value.under1000Coins),1),h("option",rK,E(b.value.midPriceRange),1),h("option",iK,E(b.value.over5000Coins),1)],512),[[Di,Q.value]]),Wt(h("select",{"onUpdate:modelValue":F[9]||(F[9]=j=>q.value=j),class:"filterSelect"},[h("option",oK,E(b.value.newest),1),h("option",aK,E(b.value.oldest),1),h("option",lK,E(b.value.priceLow),1),h("option",cK,E(b.value.priceHigh),1),h("option",uK,E(b.value.levelHigh),1),h("option",dK,E(b.value.starsHigh),1)],512),[[Di,q.value]])]),ke.value.length>0?(L(),B("div",hK,[(L(!0),B(Re,null,We(ke.value,j=>(L(),B("div",{key:j.id,class:"nftCard",onClick:ne=>se(j.nftData)},[h("div",pK,[h("img",{src:D(j.nftData.imageId||j.nftData.id),alt:"NFT"},null,8,gK),h("div",mK,[h("div",vK,[(L(),B(Re,null,We(5,ne=>h("span",{key:ne,class:"star"},E((ne<=(j.nftData.stars||0),"*")),1)),64))]),h("div",yK,"Lv "+E(j.nftData.level||1),1)])]),h("div",AK,[h("div",wK,E(j.nftData.name),1),h("div",_K,[h("span",EK,E(b.value.price)+":",1),h("span",bK,E(j.price.toLocaleString())+" "+E(b.value.coin),1)])]),h("button",{class:"buyBtn",onClick:kn(ne=>Z(j),["stop"])},E(b.value.buy),9,IK)],8,fK))),128))])):(L(),B("div",CK,[F[29]||(F[29]=h("div",{class:"emptyIcon"},"?",-1)),h("div",TK,E(b.value.noNFTsOnSale),1)]))])):he("",!0),r.value==="myNFTs"?(L(),B("div",SK,[h("div",PK,[h("h3",null,E(b.value.myNFTsCount)+" ("+E(m.value.length)+E(b.value.itemsCount)+")",1),h("div",RK,E(b.value.ownedCoins)+": "+E(s.value.toLocaleString()),1)]),m.value.length>0?(L(),B("div",xK,[(L(!0),B(Re,null,We(m.value,j=>(L(),B("div",{key:j.id,class:"nftCard",onClick:ne=>se(j)},[h("div",NK,[h("img",{src:D(j.imageId||j.id),alt:"NFT"},null,8,DK),h("div",OK,[j.rarity?(L(),B("div",{key:0,class:"rarityBadge",style:St(Me(cu)(j.rarity))},E(Me(Iv)(j.rarity)),5)):he("",!0),h("div",LK,[(L(),B(Re,null,We(5,ne=>h("span",{key:ne,class:"star"},E((ne<=(j.stars||0),"*")),1)),64))]),h("div",BK,"Lv "+E(j.level||1),1)])]),h("div",MK,[h("div",FK,E(j.name),1)]),h("button",{class:"sellBtn",onClick:kn(ne=>ie(j),["stop"])},E(b.value.sell),9,UK)],8,kK))),128))])):(L(),B("div",VK,[F[30]||(F[30]=h("div",{class:"emptyIcon"},"?",-1)),h("div",$K,E(b.value.noNFTsAvailableForSale),1)]))])):he("",!0),r.value==="myListings"?(L(),B("div",HK,[h("div",GK,[h("h3",null,E(b.value.mySalesList)+" ("+E(_.value.length)+E(b.value.itemsCount)+")",1)]),_.value.length>0?(L(),B("div",QK,[(L(!0),B(Re,null,We(_.value,j=>(L(),B("div",{key:j.id,class:"nftCard"},[h("div",jK,[h("img",{src:D(j.nftData.imageId||j.nftData.id),alt:"NFT"},null,8,zK),h("div",WK,[h("div",KK,[(L(),B(Re,null,We(5,ne=>h("span",{key:ne,class:"star"},E((ne<=(j.nftData.stars||0),"*")),1)),64))]),h("div",qK,"Lv "+E(j.nftData.level||1),1)])]),h("div",JK,[h("div",YK,E(j.nftData.name),1),h("div",XK,[h("span",ZK,E(b.value.salePrice)+":",1),h("span",eq,E(j.price.toLocaleString())+" "+E(b.value.coin),1)])]),h("button",{class:"cancelBtn",onClick:ne=>Ne(j)},E(b.value.cancelSale),9,tq)]))),128))])):(L(),B("div",nq,[F[31]||(F[31]=h("div",{class:"emptyIcon"},"?",-1)),h("div",sq,E(b.value.noNFTsOnSaleList),1)]))])):he("",!0)]),ze(zn),y.value&&I.value?(L(),B("div",{key:0,class:"modalOverlay",onClick:H},[h("div",{class:"modalContent",onClick:F[11]||(F[11]=kn(()=>{},["stop"]))},[h("div",rq,[h("h3",iq,E(b.value.sellNFT),1),h("button",{class:"modalClose",onClick:H},"")]),h("div",oq,[h("div",aq,[h("img",{src:D(I.value.imageId||I.value.id),alt:"NFT",class:"sellNFTImage"},null,8,lq),h("div",cq,[h("div",uq,E(I.value.name),1),h("div",dq,[Fo(E((W.n<=(W.nft.stars||0),"*"))+" ",1),h("span",null,"Lv "+E(I.value.level||1),1)])])]),h("div",hq,[h("label",fq,E(b.value.sellPriceLabel),1),Wt(h("input",{type:"number","onUpdate:modelValue":F[10]||(F[10]=j=>C.value=j),placeholder:b.value.enterPrice,class:"priceInput",min:"1"},null,8,pq),[[gs,C.value]]),h("div",gq,E(b.value.currentOwnedCoins)+": "+E(s.value.toLocaleString()),1)])]),h("div",mq,[h("button",{class:"modalBtn cancelBtn",onClick:H},E(b.value.cancel),1),h("button",{class:"modalBtn confirmBtn",onClick:V},E(b.value.registerSale),1)])])])):he("",!0),A.value&&I.value?(L(),B("div",{key:1,class:"modalOverlay",onClick:me},[h("div",{class:"modalContent",onClick:F[12]||(F[12]=kn(()=>{},["stop"]))},[h("div",vq,[h("h3",yq,E(b.value.buyNFT),1),h("button",{class:"modalClose",onClick:me},"")]),h("div",Aq,[h("div",wq,[h("img",{src:D(I.value.nftData.imageId||I.value.nftData.id),alt:"NFT",class:"buyNFTImage"},null,8,_q),h("div",Eq,[h("div",bq,E(I.value.nftData.name),1),h("div",Iq,[h("span",null,"?"+E(I.value.nftData.stars||0)+E(b.value.starsRating),1),h("span",null,"Lv "+E(I.value.nftData.level||1),1)])])]),h("div",Cq,[h("div",Tq,[h("span",Sq,E(b.value.salePrice)+":",1),h("span",Pq,E(I.value.price.toLocaleString())+" "+E(b.value.coin),1)]),h("div",Rq,[h("span",xq,E(b.value.ownedCoins)+":",1),h("span",{class:De(["priceValue",{insufficient:s.value<I.value.price}])},E(s.value.toLocaleString())+" "+E(b.value.coin),3)]),s.value<I.value.price?(L(),B("div",kq,E(b.value.insufficientCoinsWarning),1)):he("",!0)])]),h("div",Nq,[h("button",{class:"modalBtn cancelBtn",onClick:me},E(b.value.cancel),1),h("button",{class:De(["modalBtn confirmBtn",{disabled:s.value<I.value.price}]),onClick:Ve,disabled:s.value<I.value.price},E(b.value.buy),11,Dq)])])])):he("",!0),w.value&&I.value?(L(),B("div",{key:2,class:"modalOverlay",onClick:z},[h("div",{class:"modalContent detailModal",onClick:F[13]||(F[13]=kn(()=>{},["stop"]))},[h("div",Oq,[h("h3",Lq,E(I.value.name),1),h("button",{class:"modalClose",onClick:z},"")]),h("div",Bq,[h("div",Mq,[h("img",{src:D(I.value.imageId||I.value.id),alt:"NFT"},null,8,Fq),h("div",Uq,[h("div",Vq,[(L(),B(Re,null,We(5,j=>h("span",{key:j,class:"star"},E((j<=(W.nft.stars||0),"*")),1)),64))]),h("div",$q,"Lv "+E(I.value.level||1),1)])]),h("div",Hq,[h("div",Gq,[F[32]||(F[32]=h("span",{class:"detailLabel"},"NFT ID:",-1)),h("span",Qq,"#"+E(I.value.id),1)]),h("div",jq,[h("span",zq,E(b.value.imageId)+":",1),h("span",Wq,"#"+E(I.value.imageId),1)])])])])])):he("",!0),d.value?(L(),B("div",{key:3,class:"popupOverlay",onClick:N},[h("div",{class:"popupContent",onClick:F[14]||(F[14]=kn(()=>{},["stop"]))},[h("div",Kq,[h("h2",qq,E(b.value.send),1),h("button",{class:"closeBtn",onClick:N},"")]),h("div",Jq,[h("p",Yq,E(b.value.sendFeatureComingSoon),1),h("div",Xq,[h("button",{class:"popupBtn cancelBtn",onClick:N},E(b.value.confirm),1)])])])])):he("",!0),c.value?(L(),B("div",{key:4,class:"popupOverlay",onClick:O},[h("div",{class:"popupContent",onClick:F[15]||(F[15]=kn(()=>{},["stop"]))},[h("div",Zq,[h("h2",eJ,E(b.value.buy),1),h("button",{class:"closeBtn",onClick:O},"")]),h("div",tJ,[h("p",nJ,E(b.value.buyFeatureComingSoon),1),h("div",sJ,[h("button",{class:"popupBtn cancelBtn",onClick:O},E(b.value.confirm),1)])])])])):he("",!0),f.value?(L(),B("div",{key:5,class:"popupOverlay",onClick:G},[h("div",{class:"popupContent",onClick:F[16]||(F[16]=kn(()=>{},["stop"]))},[h("div",rJ,[h("h2",iJ,E(b.value.receive),1),h("button",{class:"closeBtn",onClick:G},"")]),h("div",oJ,[h("p",aJ,E(b.value.receiveFeatureComingSoon),1),h("div",lJ,[h("button",{class:"popupBtn cancelBtn",onClick:G},E(b.value.confirm),1)])])])])):he("",!0),T.value?(L(),B("div",{key:6,class:"modalOverlay",onClick:F[22]||(F[22]=j=>T.value=!1)},[h("div",{class:"searchModal",onClick:F[21]||(F[21]=kn(()=>{},["stop"]))},[h("div",cJ,[h("h3",uJ,E(b.value.searchNFT),1),h("button",{class:"searchModalClose",onClick:F[17]||(F[17]=j=>T.value=!1)},"")]),h("div",dJ,[Wt(h("input",{type:"text","onUpdate:modelValue":F[18]||(F[18]=j=>x.value=j),placeholder:b.value.searchPlaceholderNFT,class:"searchInput",onKeyup:F[19]||(F[19]=R1(j=>T.value=!1,["enter"]))},null,40,hJ),[[gs,x.value]])]),h("div",fJ,[h("button",{class:"modalBtn resetBtn",onClick:ue},E(b.value.reset),1),h("button",{class:"modalBtn applyBtn",onClick:F[20]||(F[20]=j=>T.value=!1)},E(b.value.apply),1)])])])):he("",!0)]))}},gJ=Qt(pJ,[["__scopeId","data-v-9e903c06"]]),mJ={class:"notificationPage"},vJ={class:"mainContent"},yJ={class:"pageHeader"},AJ={class:"notificationList"},wJ=["onClick"],_J={class:"notificationContent"},EJ={class:"notificationTitle"},bJ={class:"notificationMessage"},IJ={class:"notificationTime"},CJ={key:0,class:"unreadDot"},TJ={key:0,class:"emptyState"},SJ={__name:"NotificationPage",setup(n){const e=Pn(),t=on(),s=pe(()=>t.state.coins),r=U([{id:1,title:"  !",message:"    .",time:"5 ",read:!1,type:"quest"},{id:2,title:"Coin  ",message:"1 Coin  .",time:"1 ",read:!1,type:"exchange"},{id:3,title:"  ",message:"   !",time:"2 ",read:!0,type:"factory"},{id:4,title:" ",message:"  100 Point .",time:"1 ",read:!0,type:"attendance"}]);Nt(()=>{t.loadCurrentUser();const c=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",c),rn(()=>{window.removeEventListener("userDataUpdated",c)})});const i=c=>{c.read||(c.read=!0)},o=()=>{r.value.forEach(c=>{c.read=!0})},a=pe(()=>r.value.filter(c=>!c.read).length),l=c=>{switch(i(c),c.type){case"quest":e.push("/quest");break;case"exchange":e.push("/exchange");break;case"factory":e.push("/factory");break;case"attendance":e.push("/attendance");break}};return(c,d)=>(L(),B("div",mJ,[ze(jn,{coinCount:s.value},null,8,["coinCount"]),h("main",vJ,[h("div",yJ,[d[0]||(d[0]=h("h1",{class:"pageTitle"},"",-1)),a.value>0?(L(),B("button",{key:0,class:"markAllReadBtn",onClick:o},"   ")):he("",!0)]),h("div",AJ,[(L(!0),B(Re,null,We(r.value,f=>(L(),B("div",{key:f.id,class:De(["notificationItem",{unread:!f.read}]),onClick:p=>l(f)},[h("div",_J,[h("div",EJ,E(f.title),1),h("div",bJ,E(f.message),1),h("div",IJ,E(f.time),1)]),f.read?he("",!0):(L(),B("div",CJ))],10,wJ))),128)),r.value.length===0?(L(),B("div",TJ,[...d[1]||(d[1]=[h("p",null," .",-1)])])):he("",!0)])]),ze(zn)]))}},PJ=Qt(SJ,[["__scopeId","data-v-0a7cfb99"]]),RJ="/tdl/assets/point_ico-CuS5zUpS.png",xJ="/tdl/assets/coin_ico-COVm5STX.png",kJ={class:"shopPage"},NJ={class:"mainContent"},DJ={class:"itemList"},OJ={class:"itemInfo"},LJ={class:"itemName"},BJ={class:"itemDescription"},MJ={class:"itemPrice"},FJ={class:"priceValue"},UJ={class:"priceCurrency"},VJ={key:0,src:RJ,alt:"P",class:"currencyIcon"},$J={key:1,src:xJ,alt:"C",class:"currencyIcon"},HJ=["disabled","onClick"],GJ={__name:"ShopPage",setup(n){const e=on(),t=pe(()=>e.state.coins),s=pe(()=>e.state.totalCoin),r=pe(()=>ms()),i=pe(()=>[{id:1,name:r.value.energy100,description:`${r.value.energyRecover} 100 ${r.value.energy}`,price:100,currency:"point",amount:100},{id:2,name:r.value.energy500,description:`${r.value.energyRecover} 500 ${r.value.energy}`,price:450,currency:"point",amount:500},{id:3,name:r.value.energy1000,description:`${r.value.energyRecover} 1000 ${r.value.energy}`,price:800,currency:"point",amount:1e3},{id:4,name:r.value.energy2000,description:`${r.value.energyRecover} 2000 ${r.value.energy}`,price:1500,currency:"point",amount:2e3}]),o=()=>{e.loadCurrentUser()},a=async l=>{if(!dt()){alert(r.value.loginRequired);return}if(l.currency==="point"&&t.value<l.price){alert(r.value.insufficientPoints);return}if(l.currency==="coin"&&s.value<l.price){alert(r.value.insufficientCoins);return}let d=!1;if(l.currency==="point"){const _=t.value-l.price;d=await e.updateMultiple({coins:_})}else{const _=s.value-l.price;d=await e.updateMultiple({totalCoin:_})}if(!d){alert(r.value.purchaseFailed);return}const f=4e3,p=parseInt(localStorage.getItem("currentEnergy")||f.toString(),10),m=Math.min(p+l.amount,f);localStorage.setItem("currentEnergy",m.toString()),localStorage.setItem("energyLastDate",new Date().toDateString()),window.dispatchEvent(new CustomEvent("userDataUpdated")),alert(`${l.name} ${r.value.purchaseComplete} ${l.amount} ${r.value.energyRecovered}! (${r.value.currentEnergy}: ${e.formatNumber(m)}/${e.formatNumber(f)})`)};return Nt(()=>{o();const l=()=>{e.loadCurrentUser()};window.addEventListener("userDataUpdated",l),rn(()=>{window.removeEventListener("userDataUpdated",l)})}),(l,c)=>(L(),B("div",kJ,[ze(jn,{coinCount:t.value},null,8,["coinCount"]),h("main",NJ,[h("div",DJ,[(L(!0),B(Re,null,We(i.value,d=>(L(),B("div",{key:d.id,class:"shopItem"},[h("div",OJ,[h("h3",LJ,E(d.name),1),h("p",BJ,E(d.description),1)]),h("div",MJ,[h("span",FJ,E(d.price.toLocaleString()),1),h("span",UJ,[d.currency==="point"?(L(),B("img",VJ)):(L(),B("img",$J))])]),h("button",{class:"buyBtn",disabled:d.currency==="point"&&t.value<d.price||d.currency==="coin"&&s.value<d.price,onClick:f=>a(d)},E(r.value.buy),9,HJ)]))),128))])]),ze(zn)]))}},QJ=Qt(GJ,[["__scopeId","data-v-08c0484a"]]),d_="/tdl/assets/arrow-B-Afy2tM.png",jJ="/tdl/assets/shadow-BT4_IuPe.png",zJ="/tdl/assets/cusionBed-Dno4HzpB.png",WJ="/tdl/assets/ballYarn-DeUmKKN5.png",KJ="/tdl/assets/cannedFood-CAb6Z8ZX.png",qJ="/tdl/assets/fishToy-67OFlkDg.png",JJ="/tdl/assets/heart-BK3AGGPn.png",YJ="/tdl/assets/affectionBar2-RPbv561I.png",XJ="/tdl/assets/affectionBar-Dx16DdEg.png",ZJ={class:"homePage"},eY={class:"mainContent"},tY={key:0,class:"homeContent"},nY={class:"catContainer"},sY={class:"catWrapper"},rY={key:0,class:"affectionBarContainer"},iY={class:"affectionBarWrapper"},oY=["src"],aY=["src"],lY=["src"],cY={key:1,class:"loginPrompt"},uY=["onClick"],dY=["src","alt"],hY={class:"catSelectModal"},fY={class:"modalContent"},pY={class:"catGrid"},gY=["onClick"],mY=["src","alt"],vY={class:"catSelectInfo"},yY={class:"catSelectName"},AY={class:"catSelectLevel"},wY={key:0,class:"selectedBadge"},_Y={class:"selectedCount"},EY={class:"modalFooter"},bY=["disabled"],IY={class:"speechBubbles"},CY=["src"],TY={key:1,class:"heartPlusText"},SY={class:"foodEmojis"},PY=["src"],RY=100,xY={__name:"HomePage",setup(n){const e=on(),t=pe(()=>e.state.coins),s=pe(()=>e.state.totalCoin),r=pe(()=>ms()),i=U(null),o=se=>{try{return new URL(Object.assign({"../assets/img/cat1.png":hl,"../assets/img/cat10.png":fl,"../assets/img/cat11.png":pl,"../assets/img/cat12.png":gl,"../assets/img/cat13.png":ml,"../assets/img/cat14.png":vl,"../assets/img/cat15.png":yl,"../assets/img/cat16.png":Al,"../assets/img/cat17.png":wl,"../assets/img/cat18.png":_l,"../assets/img/cat19.png":El,"../assets/img/cat2.png":bl,"../assets/img/cat20.png":Il,"../assets/img/cat21.png":Cl,"../assets/img/cat22.png":Tl,"../assets/img/cat23.png":Sl,"../assets/img/cat24.png":Pl,"../assets/img/cat25.png":Rl,"../assets/img/cat26.png":xl,"../assets/img/cat27.png":kl,"../assets/img/cat28.png":Nl,"../assets/img/cat29.png":Dl,"../assets/img/cat3.png":Ol,"../assets/img/cat30.png":Ll,"../assets/img/cat4.png":Bl,"../assets/img/cat5.png":Ml,"../assets/img/cat6.png":Fl,"../assets/img/cat7.png":Ul,"../assets/img/cat8.png":Vl,"../assets/img/cat9.png":$l,"../assets/img/catPoint.png":Hl,"../assets/img/catPointPlus.png":Gl,"../assets/img/catProfile01.png":Ql,"../assets/img/catProfile02.png":jl,"../assets/img/cat_ico.png":zl})[`../assets/img/cat${se}.png`],import.meta.url).href}catch(z){return console.error(`   : cat${se}.png`,z),mn}},a=[mn],l=U([]),c=pe(()=>l.value.length>0?l.value.map(se=>o(se.imageId)):a),d=U(0),f=U([]),p=U([]),m=U(1),_=pe(()=>{if(l.value.length===0)return m.value;const se=l.value[d.value];return se&&se.affinity!==void 0?se.affinity:30}),y=pe(()=>Math.min(_.value/RY*100,100)),A=U(null),w=U("auto"),I=U(!1),C=U(!1),M=U([]),Q=U([]),q=[{id:1,image:zJ,name:"Cushion Bed"},{id:2,image:WJ,name:"Ball Yarn"},{id:3,image:KJ,name:"Canned Food"},{id:4,image:qJ,name:"Fish Toy"}],x=["!","  !","  ?","!"," ?"," !","!"," ...","  !","!","!","!","!","!","  !"],T=["Hello!","Nice weather today!","What are you doing?","This is fun!","Do you like cats?","I want to play!","I'm hungry!","I'm sleepy...","Have a great day!","Thank you!","I'm happy!","This is fun!","Hang in there!","Fighting!","Have a nice day!"],P=()=>(localStorage.getItem("appLanguage")||"English")===""?x:T,S=()=>{c.value.length!==0&&(d.value=(d.value-1+c.value.length)%c.value.length)},b=()=>{c.value.length!==0&&(d.value=(d.value+1)%c.value.length)},D=()=>{const se=dt();if(!se||!se.gameData||!se.gameData.inventory){alert("No cats in inventory.");return}if(M.value=se.gameData.inventory.filter(z=>z&&z.imageId),M.value.length===0){alert("No cats in inventory.");return}Q.value=[...l.value],C.value=!0},k=se=>{const z=Q.value.findIndex(ue=>ue.id===se.id);z>-1?Q.value.splice(z,1):Q.value.length<4?Q.value.push(se):alert("You can select up to 4 cats.")},ke=()=>{if(Q.value.length===0){alert("Please select at least 1 cat.");return}Q.value.forEach(z=>{z.affinity===void 0&&(z.affinity=30)}),l.value=[...Q.value];const se=dt();se&&(se.selectedHomeCats=l.value.map(z=>z.id),se.gameData&&se.gameData.inventory&&l.value.forEach(z=>{const ue=se.gameData.inventory.findIndex(Pe=>Pe&&Pe.id===z.id);ue>-1&&(se.gameData.inventory[ue].affinity=z.affinity)}),localStorage.setItem("currentUser",JSON.stringify(se)),sessionStorage.setItem("currentUser",JSON.stringify(se))),d.value=0,C.value=!1},ie=()=>{Q.value=[...l.value],C.value=!1},H=se=>Q.value.some(z=>z.id===se.id),V=pe(()=>c.value.length===0?mn:c.value[d.value]),Z=()=>{const se=P(),z=se[Math.floor(Math.random()*se.length)],ue=Math.min(window.innerWidth||500,500),Pe=window.innerHeight||800,tt=220,Y=60,ge=20,fe={id:Date.now(),text:z,x:Math.random()*(ue-tt-ge*2)+ge,y:Math.random()*(Pe-Y-ge*2-200)+100};f.value.push(fe),setTimeout(()=>{const we=f.value.findIndex(Qe=>Qe.id===fe.id);we>-1&&f.value.splice(we,1)},2e3)},me=()=>{I.value=!I.value},Ve=async se=>{if(s.value<1){alert(" !");return}const ue=s.value-1;try{await e.updateGameData({totalCoin:ue})}catch(N){console.error("  :",N),alert("  .");return}const Pe=Math.min(window.innerWidth||500,500),tt=window.innerHeight||800,Y={id:Date.now(),x:Pe/2+(Math.random()-.5)*100,y:tt/2+(Math.random()-.5)*100,image:se.image};if(p.value.push(Y),setTimeout(()=>{const N=p.value.findIndex(O=>O.id===Y.id);N>-1&&p.value.splice(N,1)},2e3),m.value++,l.value.length>0){const N=dt();N&&N.gameData&&N.gameData.inventory&&(l.value.forEach(O=>{O.affinity||(O.affinity=30),O.affinity=Math.min(O.affinity+1,100);const G=N.gameData.inventory.findIndex(te=>te&&te.id===O.id);G>-1&&(N.gameData.inventory[G].affinity=O.affinity)}),localStorage.setItem("currentUser",JSON.stringify(N)),sessionStorage.setItem("currentUser",JSON.stringify(N)),e.updateGameData({inventory:N.gameData.inventory}).catch(O=>{console.error("  :",O)}))}const ge=Math.min(window.innerWidth||500,500),fe=window.innerHeight||800,we=20,Qe={id:Date.now()+1,text:"+1",heartImage:JJ,isHeartOnly:!0,x:Math.random()*(ge-100-we*2)+we,y:Math.random()*(fe-100-we*2-200)+100};f.value.push(Qe),setTimeout(()=>{const N=f.value.findIndex(O=>O.id===Qe.id);N>-1&&f.value.splice(N,1)},2e3)},Ne=()=>{A.value&&(w.value=A.value.offsetHeight+"px")};return Nt(()=>{if(i.value=dt(),i.value){if(e.loadCurrentUser(),i.value.selectedHomeCats&&i.value.gameData&&i.value.gameData.inventory){const z=i.value.selectedHomeCats,ue=i.value.gameData.inventory;l.value=ue.filter(Pe=>Pe&&z.includes(Pe.id)).slice(0,4).map(Pe=>(Pe.affinity===void 0&&(Pe.affinity=30),Pe))}}else{const z={id:"guest_"+Date.now(),email:"guest@tdl.com",name:"Guest",loginType:"guest",gameData:{level:1,coins:0,totalCoin:0,catFragments:50,nftCount:0,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}};localStorage.setItem("currentUser",JSON.stringify(z)),sessionStorage.setItem("currentUser",JSON.stringify(z)),i.value=z,e.loadCurrentUser()}setTimeout(()=>{Ne()},100),setTimeout(()=>{i.value&&Z()},500);const se=()=>{const z=dt();z&&z.gameData&&z.gameData.inventory&&l.value.length>0&&l.value.forEach((ue,Pe)=>{const tt=z.gameData.inventory.find(Y=>Y&&Y.id===ue.id);tt&&tt.affinity!==void 0&&(l.value[Pe].affinity=tt.affinity)})};window.addEventListener("userDataUpdated",se),rn(()=>{window.removeEventListener("userDataUpdated",se)})}),(se,z)=>(L(),B("div",ZJ,[ze(jn,{coinCount:t.value,totalCoin:s.value},null,8,["coinCount","totalCoin"]),h("main",eY,[i.value?(L(),B("div",tY,[h("div",nY,[c.value.length>1?(L(),B("button",{key:0,class:"arrowButton arrowLeft",onClick:S},[...z[2]||(z[2]=[h("img",{src:d_,alt:"",class:"arrowIcon"},null,-1)])])):he("",!0),h("div",sY,[I.value?(L(),B("div",rY,[z[3]||(z[3]=h("span",{class:"levelText"},"Lv.",-1)),h("div",iY,[h("img",{ref_key:"affectionBarBgRef",ref:A,src:Me(YJ),alt:"  ",class:"affectionBarBg",onLoad:Ne},null,40,oY),h("div",{class:"affectionBarFill",style:St({width:y.value+"%",height:w.value})},[h("img",{src:Me(XJ),alt:" ",class:"affectionBarFillImg"},null,8,aY)],4)])])):he("",!0),ze(tR,{name:"slide",mode:"out-in"},{default:G_(()=>[(L(),B("div",{key:d.value,class:"catSlide"},[z[4]||(z[4]=h("img",{src:jJ,alt:"",class:"catShadow"},null,-1)),h("img",{src:V.value,alt:"",class:"catImage",onClick:Z,style:{cursor:"pointer"}},null,8,lY)]))]),_:1})]),c.value.length>1?(L(),B("button",{key:1,class:"arrowButton arrowRight",onClick:b},[...z[5]||(z[5]=[h("img",{src:d_,alt:"",class:"arrowIcon"},null,-1)])])):he("",!0)])])):(L(),B("div",cY,[h("p",null,E(r.value.loginRequired),1),h("button",{class:"loginBtn",onClick:z[0]||(z[0]=ue=>se.$router.push("/login"))},E(r.value.login),1)])),i.value?(L(),B("div",{key:2,class:De(["actionButtons",{"gift-buttons-container":I.value,"has-select-btn":i.value.loginType!=="guest"&&!I.value}])},[I.value?(L(),B(Re,{key:1},[(L(),B(Re,null,We(q,ue=>h("button",{key:ue.id,class:"actionBtn giftBtn",onClick:Pe=>Ve(ue)},[h("img",{src:ue.image,alt:ue.name,class:"gift-btn-image"},null,8,dY)],8,uY)),64)),h("button",{class:"actionBtn backBtn",onClick:z[1]||(z[1]=ue=>I.value=!1)},"  ")],64)):(L(),B(Re,{key:0},[i.value.loginType!=="guest"?(L(),B("button",{key:0,class:"actionBtn selectCatsBtn",onClick:D}," Select Cats ")):he("",!0),h("div",{class:"bottomButtonsRow"},[h("button",{class:"actionBtn talkBtn",onClick:Z}," Talk "),h("button",{class:"actionBtn petBtn",onClick:me}," Give gifts ")])],64))],2)):he("",!0)]),ze(zn),C.value?(L(),B("div",{key:0,class:"modalOverlay",onClick:kn(ie,["self"])},[h("div",hY,[h("div",{class:"modalHeader"},[z[6]||(z[6]=h("h2",null,"Select Cats (Max 4)",-1)),h("button",{class:"closeBtn",onClick:ie},"")]),h("div",fY,[h("div",pY,[(L(!0),B(Re,null,We(M.value,ue=>(L(),B("div",{key:ue.id,class:De(["catSelectItem",{selected:H(ue)}]),onClick:Pe=>k(ue)},[h("img",{src:o(ue.imageId),alt:ue.name,class:"catSelectImage"},null,8,mY),h("div",vY,[h("p",yY,E(ue.name),1),h("p",AY,"Lv."+E(ue.level||1),1)]),H(ue)?(L(),B("div",wY,"")):he("",!0)],10,gY))),128))]),h("div",_Y," Selected Cats: "+E(Q.value.length)+"/4 ",1)]),h("div",EY,[h("button",{class:"modalBtn cancelBtn",onClick:ie},"Cancel"),h("button",{class:"modalBtn confirmBtn",onClick:ke,disabled:Q.value.length===0},"Confirm",8,bY)])])])):he("",!0),h("div",IY,[(L(!0),B(Re,null,We(f.value,ue=>(L(),B("div",{key:ue.id,class:De(ue.isHeartOnly?"heartOnly":"speechBubble"),style:St({left:ue.x+"px",top:ue.y+"px",transform:"translateX(-50%)"})},[ue.isHeartOnly?(L(),B(Re,{key:1},[ue.heartImage?(L(),B("img",{key:0,src:ue.heartImage,alt:"",class:"heart-image"},null,8,CY)):he("",!0),ue.text?(L(),B("span",TY,E(ue.text),1)):he("",!0)],64)):(L(),B(Re,{key:0},[Fo(E(ue.text),1)],64))],6))),128))]),h("div",SY,[(L(!0),B(Re,null,We(p.value,ue=>(L(),B("div",{key:ue.id,class:"foodEmoji",style:St({left:ue.x+"px",top:ue.y+"px"})},[h("img",{src:ue.image,alt:"",class:"tulImage"},null,8,PY)],4))),128))])]))}},kY=Qt(xY,[["__scopeId","data-v-98129681"]]),NY="/tdl/assets/inviteCode-CsihMctd.png",DY={class:"socialPage"},OY={class:"mainContent"},LY={class:"socialContent"},BY={class:"tabButtons"},MY={class:"tabContent"},FY={key:0,class:"tabPanel"},UY={class:"inviteCodeSection"},VY={class:"inviteCodeBox"},$Y=["value"],HY=["src"],GY={class:"friendsListSection"},QY={class:"friendsGrid"},jY={class:"friendProfileWrapper"},zY=["src","alt"],WY={class:"friendInfo"},KY={class:"friendName"},qY={class:"friendId"},JY={class:"searchSection"},YY={class:"suggestedSection"},XY={key:0,class:"suggestedGrid"},ZY=["src","alt"],eX={class:"suggestedInfo"},tX={class:"suggestedName"},nX={class:"suggestedId"},sX=["onClick"],rX={key:1,class:"tabPanel"},iX={class:"requestsList"},oX={key:0,class:"emptyMessage"},aX={key:1,class:"requestsGrid"},lX=["src","alt"],cX={class:"requestInfo"},uX={class:"requestName"},dX={class:"requestId"},hX={class:"requestActions"},fX=["onClick"],pX=["onClick"],gX={__name:"SocialPage",setup(n){const e=on(),t=pe(()=>e.state.coins),s=pe(()=>e.state.totalCoin);pe(()=>ms());const r=U(null),i=U("friends"),o=U(""),a=U(""),l=w=>{i.value=w},c=async()=>{if(o.value)try{await navigator.clipboard.writeText(o.value),alert("Invite code copied!")}catch(w){console.error(" :",w),alert("Failed to copy invite code.")}},d=U([{id:"TDL_8923",name:"Luna",profileImage:mn},{id:"TDL_4567",name:"Max",profileImage:mn},{id:"TDL_7891",name:"Zoe",profileImage:mn}]),f=U([{id:"TDL_2345",name:"Alice",profileImage:mn},{id:"TDL_6789",name:"Bob",profileImage:mn},{id:"TDL_3456",name:"Charlie",profileImage:mn},{id:"TDL_7890",name:"Diana",profileImage:mn},{id:"TDL_1234",name:"Eve",profileImage:mn},{id:"TDL_5678",name:"Frank",profileImage:mn},{id:"TDL_9012",name:"Grace",profileImage:mn},{id:"TDL_2468",name:"Henry",profileImage:mn}]),p=pe(()=>{if(!a.value||a.value.trim()==="")return f.value;const w=a.value.toLowerCase().trim();return f.value.filter(I=>I.name.toLowerCase().includes(w)||I.id.toLowerCase().includes(w))}),m=U([{id:"TDL_1357",name:"Oliver",profileImage:mn},{id:"TDL_8024",name:"Sophia",profileImage:mn},{id:"TDL_3691",name:"Mason",profileImage:mn}]),_=w=>{alert(`Invite sent to ${w}`)},y=w=>{m.value=m.value.filter(I=>I.id!==w),alert("Friend request accepted!")},A=w=>{m.value=m.value.filter(I=>I.id!==w),alert("Friend request declined.")};return Nt(async()=>{if(r.value=dt(),r.value){e.loadCurrentUser();try{o.value=await Li(r.value.id)}catch(w){console.error("   :",w),o.value="ABC123"}}else o.value="ABC123"}),(w,I)=>(L(),B("div",DY,[ze(jn,{coinCount:t.value,totalCoin:s.value},null,8,["coinCount","totalCoin"]),h("main",OY,[h("div",LY,[h("div",BY,[h("button",{class:De(["tabButton tabButtonFriends",{active:i.value==="friends"}]),onClick:I[0]||(I[0]=C=>l("friends"))}," Friends ",2),h("button",{class:De(["tabButton tabButtonRequests",{active:i.value==="requests"}]),onClick:I[1]||(I[1]=C=>l("requests"))}," Requests ",2)]),h("div",MY,[i.value==="friends"?(L(),B("div",FY,[h("div",UY,[I[3]||(I[3]=h("h3",{class:"sectionTitle"},"Invite Code",-1)),h("div",VY,[h("input",{type:"text",class:"inviteCodeInput",value:o.value,readonly:""},null,8,$Y),h("button",{class:"copyCodeBtn",onClick:c,title:"Copy"},[h("img",{src:Me(NY),alt:"Copy",class:"copyCodeIcon"},null,8,HY)])])]),h("div",GY,[h("div",QY,[(L(!0),B(Re,null,We(d.value,C=>(L(),B("div",{key:C.id,class:"friendCard"},[h("div",jY,[h("img",{src:C.profileImage,alt:C.name,class:"friendProfile"},null,8,zY),I[4]||(I[4]=h("div",{class:"giftIcon"},"",-1))]),h("div",WY,[h("p",KY,E(C.name),1),h("p",qY,E(C.id),1)])]))),128))])]),h("div",JY,[I[5]||(I[5]=h("h3",{class:"sectionTitle"},"Search friends ",-1)),Wt(h("input",{type:"text",class:"searchInput","onUpdate:modelValue":I[2]||(I[2]=C=>a.value=C),placeholder:"Search by name or ID..."},null,512),[[gs,a.value]])]),h("div",YY,[I[6]||(I[6]=h("h3",{class:"sectionTitle"}," Suggested Friends  ",-1)),p.value.length>0?(L(),B("div",XY,[(L(!0),B(Re,null,We(p.value,C=>(L(),B("div",{key:C.id,class:"suggestedCard"},[h("img",{src:C.profileImage,alt:C.name,class:"suggestedProfile"},null,8,ZY),h("div",eX,[h("p",tX,E(C.name),1),h("p",nX,E(C.id),1)]),h("button",{class:"inviteBtn",onClick:M=>_(C.id)}," Invite ",8,sX)]))),128))])):he("",!0)])])):he("",!0),i.value==="requests"?(L(),B("div",rX,[h("div",iX,[m.value.length===0?(L(),B("div",oX,[...I[7]||(I[7]=[h("p",null,"No friend requests yet.",-1)])])):(L(),B("div",aX,[(L(!0),B(Re,null,We(m.value,C=>(L(),B("div",{key:C.id,class:"requestCard"},[h("img",{src:C.profileImage,alt:C.name,class:"requestProfile"},null,8,lX),h("div",cX,[h("p",uX,E(C.name),1),h("p",dX,E(C.id)+":)",1),I[8]||(I[8]=h("p",{class:"requestMessage"},"wants to be your friend",-1))]),h("div",hX,[h("button",{class:"acceptBtn",onClick:M=>y(C.id)}," Accept ",8,fX),h("button",{class:"declineBtn",onClick:M=>A(C.id)},"  ",8,pX)])]))),128))]))])])):he("",!0)])])]),ze(zn)]))}},mX=Qt(gX,[["__scopeId","data-v-3ade7b90"]]),vX=["/loading","/login","/signup","/forgot-password","/reset-password","/home","/main"],yX=[{path:"/",redirect:"/loading"},{path:"/loading",component:u6},{path:"/login",component:k6},{path:"/signup",component:G6},{path:"/forgot-password",component:c5},{path:"/reset-password",component:E5},{path:"/main",component:P9},{path:"/mining",component:W9},{path:"/hunting",component:E$},{path:"/exploration",component:Y$},{path:"/production",component:kH},{path:"/exchange",component:YH},{path:"/quest",component:y7},{path:"/inventory",component:wQ},{path:"/factory",component:BQ},{path:"/settings",component:cz},{path:"/profile",component:Qz},{path:"/attendance",component:oW},{path:"/nft",component:gJ},{path:"/notification",component:PJ},{path:"/shop",component:QJ},{path:"/home",component:kY},{path:"/social",component:mX}],UT=Ux({history:vx(),routes:yX}),h_=(n,e)=>({id:n.uid,email:n.email,name:n.displayName||n.email?.split("@")[0]||"",photoURL:n.photoURL,loginType:"google",gameData:e||{level:1,coins:0,totalCoin:0,catFragments:50,nftCount:0,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}});UT.beforeEach(async(n,e,t)=>{let s=dt();const r=s?.loginType==="guest"||s?.email?.includes("@guest.com")||s?.email==="guest@tdl.com";let i=!!s&&!r;if(!i&&Tt&&Tt.currentUser){console.log("Router guard:    Firebase   ,  ...");try{const a=await Ug(Tt.currentUser.uid),l=h_(Tt.currentUser,a?.gameData);localStorage.setItem("currentUser",JSON.stringify(l)),sessionStorage.setItem("currentUser",JSON.stringify(l)),s=l,i=!0,console.log("Router guard: Firebase       :",l.email)}catch(a){console.error("Router guard: Firebase   :",a)}}if(!i&&!Tt?.currentUser&&n.path!=="/login"&&n.path!=="/signup"&&n.path!=="/loading"&&(await new Promise(a=>setTimeout(a,100)),s=dt(),i=!!s,!i&&Tt&&Tt.currentUser))try{const a=await Ug(Tt.currentUser.uid),l=h_(Tt.currentUser,a?.gameData);localStorage.setItem("currentUser",JSON.stringify(l)),sessionStorage.setItem("currentUser",JSON.stringify(l)),s=l,i=!0,console.log("Router guard:   Firebase    :",l.email)}catch(a){console.error("Router guard:   Firebase   :",a)}const o=vX.includes(n.path);if(i&&(n.path==="/login"||n.path==="/signup")){console.log("Router guard: authenticated user hitting login/signup, redirecting to /home"),t("/home");return}if(r&&(n.path==="/login"||n.path==="/signup")){console.log("Router guard: guest user accessing login/signup, allowing access"),t();return}if(!i&&!o){console.log("Router guard: unauthenticated access to protected route, redirecting to /login",{to:n.path,hasLocalStorage:!!localStorage.getItem("currentUser"),hasSessionStorage:!!sessionStorage.getItem("currentUser"),hasFirebaseAuth:Tt&&!!Tt.currentUser}),t("/login");return}t()});const VT=xR(s6);VT.use(UT);VT.mount("#app");export{Tt as a,Ug as g,t6 as h,wX as o};
