(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function $g(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const kt={},wa=[],vr=()=>{},g_=()=>!1,_h=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Hg=n=>n.startsWith("onUpdate:"),On=Object.assign,Gg=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},sS=Object.prototype.hasOwnProperty,Et=(n,e)=>sS.call(n,e),$e=Array.isArray,_a=n=>uu(n)==="[object Map]",tl=n=>uu(n)==="[object Set]",Xv=n=>uu(n)==="[object Date]",Ye=n=>typeof n=="function",fn=n=>typeof n=="string",Cr=n=>typeof n=="symbol",Rt=n=>n!==null&&typeof n=="object",m_=n=>(Rt(n)||Ye(n))&&Ye(n.then)&&Ye(n.catch),v_=Object.prototype.toString,uu=n=>v_.call(n),rS=n=>uu(n).slice(8,-1),y_=n=>uu(n)==="[object Object]",Qg=n=>fn(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Ac=$g(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Eh=n=>{const e=Object.create(null);return(t=>e[t]||(e[t]=n(t)))},iS=/-\w/g,Hs=Eh(n=>n.replace(iS,e=>e.slice(1).toUpperCase())),oS=/\B([A-Z])/g,to=Eh(n=>n.replace(oS,"-$1").toLowerCase()),bh=Eh(n=>n.charAt(0).toUpperCase()+n.slice(1)),xf=Eh(n=>n?`on${bh(n)}`:""),Li=(n,e)=>!Object.is(n,e),dd=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},A_=(n,e,t,s=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:s,value:t})},kd=n=>{const e=parseFloat(n);return isNaN(e)?n:e},aS=n=>{const e=fn(n)?Number(n):NaN;return isNaN(e)?n:e};let Zv;const Ih=()=>Zv||(Zv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function St(n){if($e(n)){const e={};for(let t=0;t<n.length;t++){const s=n[t],r=fn(s)?dS(s):St(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(fn(n)||Rt(n))return n}const lS=/;(?![^(]*\))/g,cS=/:([^]+)/,uS=/\/\*[^]*?\*\//g;function dS(n){const e={};return n.replace(uS,"").split(lS).forEach(t=>{if(t){const s=t.split(cS);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Oe(n){let e="";if(fn(n))e=n;else if($e(n))for(let t=0;t<n.length;t++){const s=Oe(n[t]);s&&(e+=s+" ")}else if(Rt(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const hS="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",fS=$g(hS);function w_(n){return!!n||n===""}function pS(n,e){if(n.length!==e.length)return!1;let t=!0;for(let s=0;t&&s<n.length;s++)t=Fo(n[s],e[s]);return t}function Fo(n,e){if(n===e)return!0;let t=Xv(n),s=Xv(e);if(t||s)return t&&s?n.getTime()===e.getTime():!1;if(t=Cr(n),s=Cr(e),t||s)return n===e;if(t=$e(n),s=$e(e),t||s)return t&&s?pS(n,e):!1;if(t=Rt(n),s=Rt(e),t||s){if(!t||!s)return!1;const r=Object.keys(n).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in n){const a=n.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Fo(n[o],e[o]))return!1}}return String(n)===String(e)}function jg(n,e){return n.findIndex(t=>Fo(t,e))}const __=n=>!!(n&&n.__v_isRef===!0),E=n=>fn(n)?n:n==null?"":$e(n)||Rt(n)&&(n.toString===v_||!Ye(n.toString))?__(n)?E(n.value):JSON.stringify(n,E_,2):String(n),E_=(n,e)=>__(e)?E_(n,e.value):_a(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[s,r],i)=>(t[kf(s,i)+" =>"]=r,t),{})}:tl(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>kf(t))}:Cr(e)?kf(e):Rt(e)&&!$e(e)&&!y_(e)?String(e):e,kf=(n,e="")=>{var t;return Cr(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ys;class gS{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ys,!e&&ys&&(this.index=(ys.scopes||(ys.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=ys;try{return ys=this,e()}finally{ys=t}}}on(){++this._on===1&&(this.prevScope=ys,ys=this)}off(){this._on>0&&--this._on===0&&(ys=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,s;for(t=0,s=this.effects.length;t<s;t++)this.effects[t].stop();for(this.effects.length=0,t=0,s=this.cleanups.length;t<s;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function mS(){return ys}let Dt;const Nf=new WeakSet;class b_{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ys&&ys.active&&ys.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Nf.has(this)&&(Nf.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||C_(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ey(this),T_(this);const e=Dt,t=Xs;Dt=this,Xs=!0;try{return this.fn()}finally{S_(this),Dt=e,Xs=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Kg(e);this.deps=this.depsTail=void 0,ey(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Nf.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Pp(this)&&this.run()}get dirty(){return Pp(this)}}let I_=0,wc,_c;function C_(n,e=!1){if(n.flags|=8,e){n.next=_c,_c=n;return}n.next=wc,wc=n}function zg(){I_++}function Wg(){if(--I_>0)return;if(_c){let e=_c;for(_c=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;wc;){let e=wc;for(wc=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){n||(n=s)}e=t}}if(n)throw n}function T_(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function S_(n){let e,t=n.depsTail,s=t;for(;s;){const r=s.prevDep;s.version===-1?(s===t&&(t=r),Kg(s),vS(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}n.deps=e,n.depsTail=t}function Pp(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(P_(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function P_(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Bc)||(n.globalVersion=Bc,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!Pp(n))))return;n.flags|=2;const e=n.dep,t=Dt,s=Xs;Dt=n,Xs=!0;try{T_(n);const r=n.fn(n._value);(e.version===0||Li(r,n._value))&&(n.flags|=128,n._value=r,e.version++)}catch(r){throw e.version++,r}finally{Dt=t,Xs=s,S_(n),n.flags&=-3}}function Kg(n,e=!1){const{dep:t,prevSub:s,nextSub:r}=n;if(s&&(s.nextSub=r,n.prevSub=void 0),r&&(r.prevSub=s,n.nextSub=void 0),t.subs===n&&(t.subs=s,!s&&t.computed)){t.computed.flags&=-5;for(let i=t.computed.deps;i;i=i.nextDep)Kg(i,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function vS(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let Xs=!0;const R_=[];function Xr(){R_.push(Xs),Xs=!1}function Zr(){const n=R_.pop();Xs=n===void 0?!0:n}function ey(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=Dt;Dt=void 0;try{e()}finally{Dt=t}}}let Bc=0;class yS{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class qg{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Dt||!Xs||Dt===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Dt)t=this.activeLink=new yS(Dt,this),Dt.deps?(t.prevDep=Dt.depsTail,Dt.depsTail.nextDep=t,Dt.depsTail=t):Dt.deps=Dt.depsTail=t,x_(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const s=t.nextDep;s.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=s),t.prevDep=Dt.depsTail,t.nextDep=void 0,Dt.depsTail.nextDep=t,Dt.depsTail=t,Dt.deps===t&&(Dt.deps=s)}return t}trigger(e){this.version++,Bc++,this.notify(e)}notify(e){zg();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Wg()}}}function x_(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)x_(s)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const Rp=new WeakMap,No=Symbol(""),xp=Symbol(""),Mc=Symbol("");function Jn(n,e,t){if(Xs&&Dt){let s=Rp.get(n);s||Rp.set(n,s=new Map);let r=s.get(t);r||(s.set(t,r=new qg),r.map=s,r.key=t),r.track()}}function Mr(n,e,t,s,r,i){const o=Rp.get(n);if(!o){Bc++;return}const a=l=>{l&&l.trigger()};if(zg(),e==="clear")o.forEach(a);else{const l=$e(n),c=l&&Qg(t);if(l&&t==="length"){const d=Number(s);o.forEach((f,p)=>{(p==="length"||p===Mc||!Cr(p)&&p>=d)&&a(f)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),c&&a(o.get(Mc)),e){case"add":l?c&&a(o.get("length")):(a(o.get(No)),_a(n)&&a(o.get(xp)));break;case"delete":l||(a(o.get(No)),_a(n)&&a(o.get(xp)));break;case"set":_a(n)&&a(o.get(No));break}}Wg()}function ia(n){const e=At(n);return e===n?e:(Jn(e,"iterate",Mc),Us(n)?e:e.map(Un))}function Ch(n){return Jn(n=At(n),"iterate",Mc),n}const AS={__proto__:null,[Symbol.iterator](){return Df(this,Symbol.iterator,Un)},concat(...n){return ia(this).concat(...n.map(e=>$e(e)?ia(e):e))},entries(){return Df(this,"entries",n=>(n[1]=Un(n[1]),n))},every(n,e){return xr(this,"every",n,e,void 0,arguments)},filter(n,e){return xr(this,"filter",n,e,t=>t.map(Un),arguments)},find(n,e){return xr(this,"find",n,e,Un,arguments)},findIndex(n,e){return xr(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return xr(this,"findLast",n,e,Un,arguments)},findLastIndex(n,e){return xr(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return xr(this,"forEach",n,e,void 0,arguments)},includes(...n){return Of(this,"includes",n)},indexOf(...n){return Of(this,"indexOf",n)},join(n){return ia(this).join(n)},lastIndexOf(...n){return Of(this,"lastIndexOf",n)},map(n,e){return xr(this,"map",n,e,void 0,arguments)},pop(){return rc(this,"pop")},push(...n){return rc(this,"push",n)},reduce(n,...e){return ty(this,"reduce",n,e)},reduceRight(n,...e){return ty(this,"reduceRight",n,e)},shift(){return rc(this,"shift")},some(n,e){return xr(this,"some",n,e,void 0,arguments)},splice(...n){return rc(this,"splice",n)},toReversed(){return ia(this).toReversed()},toSorted(n){return ia(this).toSorted(n)},toSpliced(...n){return ia(this).toSpliced(...n)},unshift(...n){return rc(this,"unshift",n)},values(){return Df(this,"values",Un)}};function Df(n,e,t){const s=Ch(n),r=s[e]();return s!==n&&!Us(n)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=t(i.value)),i}),r}const wS=Array.prototype;function xr(n,e,t,s,r,i){const o=Ch(n),a=o!==n&&!Us(n),l=o[e];if(l!==wS[e]){const f=l.apply(n,i);return a?Un(f):f}let c=t;o!==n&&(a?c=function(f,p){return t.call(this,Un(f),p,n)}:t.length>2&&(c=function(f,p){return t.call(this,f,p,n)}));const d=l.call(o,c,s);return a&&r?r(d):d}function ty(n,e,t,s){const r=Ch(n);let i=t;return r!==n&&(Us(n)?t.length>3&&(i=function(o,a,l){return t.call(this,o,a,l,n)}):i=function(o,a,l){return t.call(this,o,Un(a),l,n)}),r[e](i,...s)}function Of(n,e,t){const s=At(n);Jn(s,"iterate",Mc);const r=s[e](...t);return(r===-1||r===!1)&&Xg(t[0])?(t[0]=At(t[0]),s[e](...t)):r}function rc(n,e,t=[]){Xr(),zg();const s=At(n)[e].apply(n,t);return Wg(),Zr(),s}const _S=$g("__proto__,__v_isRef,__isVue"),k_=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Cr));function ES(n){Cr(n)||(n=String(n));const e=At(this);return Jn(e,"has",n),e.hasOwnProperty(n)}class N_{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,s){if(t==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!r;if(t==="__v_isReadonly")return r;if(t==="__v_isShallow")return i;if(t==="__v_raw")return s===(r?i?NS:B_:i?L_:O_).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=$e(e);if(!r){let l;if(o&&(l=AS[t]))return l;if(t==="hasOwnProperty")return ES}const a=Reflect.get(e,t,Zn(e)?e:s);if((Cr(t)?k_.has(t):_S(t))||(r||Jn(e,"get",t),i))return a;if(Zn(a)){const l=o&&Qg(t)?a:a.value;return r&&Rt(l)?Np(l):l}return Rt(a)?r?Np(a):du(a):a}}class D_ extends N_{constructor(e=!1){super(!1,e)}set(e,t,s,r){let i=e[t];if(!this._isShallow){const l=Hi(i);if(!Us(s)&&!Hi(s)&&(i=At(i),s=At(s)),!$e(e)&&Zn(i)&&!Zn(s))return l||(i.value=s),!0}const o=$e(e)&&Qg(t)?Number(t)<e.length:Et(e,t),a=Reflect.set(e,t,s,Zn(e)?e:r);return e===At(r)&&(o?Li(s,i)&&Mr(e,"set",t,s):Mr(e,"add",t,s)),a}deleteProperty(e,t){const s=Et(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&s&&Mr(e,"delete",t,void 0),r}has(e,t){const s=Reflect.has(e,t);return(!Cr(t)||!k_.has(t))&&Jn(e,"has",t),s}ownKeys(e){return Jn(e,"iterate",$e(e)?"length":No),Reflect.ownKeys(e)}}class bS extends N_{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const IS=new D_,CS=new bS,TS=new D_(!0);const kp=n=>n,Gu=n=>Reflect.getPrototypeOf(n);function SS(n,e,t){return function(...s){const r=this.__v_raw,i=At(r),o=_a(i),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=r[n](...s),d=t?kp:e?Nd:Un;return!e&&Jn(i,"iterate",l?xp:No),{next(){const{value:f,done:p}=c.next();return p?{value:f,done:p}:{value:a?[d(f[0]),d(f[1])]:d(f),done:p}},[Symbol.iterator](){return this}}}}function Qu(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function PS(n,e){const t={get(r){const i=this.__v_raw,o=At(i),a=At(r);n||(Li(r,a)&&Jn(o,"get",r),Jn(o,"get",a));const{has:l}=Gu(o),c=e?kp:n?Nd:Un;if(l.call(o,r))return c(i.get(r));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!n&&Jn(At(r),"iterate",No),r.size},has(r){const i=this.__v_raw,o=At(i),a=At(r);return n||(Li(r,a)&&Jn(o,"has",r),Jn(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,l=At(a),c=e?kp:n?Nd:Un;return!n&&Jn(l,"iterate",No),a.forEach((d,f)=>r.call(i,c(d),c(f),o))}};return On(t,n?{add:Qu("add"),set:Qu("set"),delete:Qu("delete"),clear:Qu("clear")}:{add(r){!e&&!Us(r)&&!Hi(r)&&(r=At(r));const i=At(this);return Gu(i).has.call(i,r)||(i.add(r),Mr(i,"add",r,r)),this},set(r,i){!e&&!Us(i)&&!Hi(i)&&(i=At(i));const o=At(this),{has:a,get:l}=Gu(o);let c=a.call(o,r);c||(r=At(r),c=a.call(o,r));const d=l.call(o,r);return o.set(r,i),c?Li(i,d)&&Mr(o,"set",r,i):Mr(o,"add",r,i),this},delete(r){const i=At(this),{has:o,get:a}=Gu(i);let l=o.call(i,r);l||(r=At(r),l=o.call(i,r)),a&&a.call(i,r);const c=i.delete(r);return l&&Mr(i,"delete",r,void 0),c},clear(){const r=At(this),i=r.size!==0,o=r.clear();return i&&Mr(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=SS(r,n,e)}),t}function Jg(n,e){const t=PS(n,e);return(s,r,i)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?s:Reflect.get(Et(t,r)&&r in s?t:s,r,i)}const RS={get:Jg(!1,!1)},xS={get:Jg(!1,!0)},kS={get:Jg(!0,!1)};const O_=new WeakMap,L_=new WeakMap,B_=new WeakMap,NS=new WeakMap;function DS(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function OS(n){return n.__v_skip||!Object.isExtensible(n)?0:DS(rS(n))}function du(n){return Hi(n)?n:Yg(n,!1,IS,RS,O_)}function M_(n){return Yg(n,!1,TS,xS,L_)}function Np(n){return Yg(n,!0,CS,kS,B_)}function Yg(n,e,t,s,r){if(!Rt(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const i=OS(n);if(i===0)return n;const o=r.get(n);if(o)return o;const a=new Proxy(n,i===2?s:t);return r.set(n,a),a}function Ea(n){return Hi(n)?Ea(n.__v_raw):!!(n&&n.__v_isReactive)}function Hi(n){return!!(n&&n.__v_isReadonly)}function Us(n){return!!(n&&n.__v_isShallow)}function Xg(n){return n?!!n.__v_raw:!1}function At(n){const e=n&&n.__v_raw;return e?At(e):n}function LS(n){return!Et(n,"__v_skip")&&Object.isExtensible(n)&&A_(n,"__v_skip",!0),n}const Un=n=>Rt(n)?du(n):n,Nd=n=>Rt(n)?Np(n):n;function Zn(n){return n?n.__v_isRef===!0:!1}function U(n){return F_(n,!1)}function BS(n){return F_(n,!0)}function F_(n,e){return Zn(n)?n:new MS(n,e)}class MS{constructor(e,t){this.dep=new qg,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:At(e),this._value=t?e:Un(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,s=this.__v_isShallow||Us(e)||Hi(e);e=s?e:At(e),Li(e,t)&&(this._rawValue=e,this._value=s?e:Un(e),this.dep.trigger())}}function De(n){return Zn(n)?n.value:n}const FS={get:(n,e,t)=>e==="__v_raw"?n:De(Reflect.get(n,e,t)),set:(n,e,t,s)=>{const r=n[e];return Zn(r)&&!Zn(t)?(r.value=t,!0):Reflect.set(n,e,t,s)}};function U_(n){return Ea(n)?n:new Proxy(n,FS)}class US{constructor(e,t,s){this.fn=e,this.setter=t,this._value=void 0,this.dep=new qg(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Bc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Dt!==this)return C_(this,!0),!0}get value(){const e=this.dep.track();return P_(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function VS(n,e,t=!1){let s,r;return Ye(n)?s=n:(s=n.get,r=n.set),new US(s,r,t)}const ju={},Dd=new WeakMap;let vo;function $S(n,e=!1,t=vo){if(t){let s=Dd.get(t);s||Dd.set(t,s=[]),s.push(n)}}function HS(n,e,t=kt){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=t,c=B=>r?B:Us(B)||r===!1||r===0?Fr(B,1):Fr(B);let d,f,p,m,w=!1,y=!1;if(Zn(n)?(f=()=>n.value,w=Us(n)):Ea(n)?(f=()=>c(n),w=!0):$e(n)?(y=!0,w=n.some(B=>Ea(B)||Us(B)),f=()=>n.map(B=>{if(Zn(B))return B.value;if(Ea(B))return c(B);if(Ye(B))return l?l(B,2):B()})):Ye(n)?e?f=l?()=>l(n,2):n:f=()=>{if(p){Xr();try{p()}finally{Zr()}}const B=vo;vo=d;try{return l?l(n,3,[m]):n(m)}finally{vo=B}}:f=vr,e&&r){const B=f,V=r===!0?1/0:r;f=()=>Fr(B(),V)}const A=mS(),_=()=>{d.stop(),A&&A.active&&Gg(A.effects,d)};if(i&&e){const B=e;e=(...V)=>{B(...V),_()}}let C=y?new Array(n.length).fill(ju):ju;const S=B=>{if(!(!(d.flags&1)||!d.dirty&&!B))if(e){const V=d.run();if(r||w||(y?V.some((j,x)=>Li(j,C[x])):Li(V,C))){p&&p();const j=vo;vo=d;try{const x=[V,C===ju?void 0:y&&C[0]===ju?[]:C,m];C=V,l?l(e,3,x):e(...x)}finally{vo=j}}}else d.run()};return a&&a(S),d=new b_(f),d.scheduler=o?()=>o(S,!1):S,m=B=>$S(B,!1,d),p=d.onStop=()=>{const B=Dd.get(d);if(B){if(l)l(B,4);else for(const V of B)V();Dd.delete(d)}},e?s?S(!0):C=d.run():o?o(S.bind(null,!0),!0):d.run(),_.pause=d.pause.bind(d),_.resume=d.resume.bind(d),_.stop=_,_}function Fr(n,e=1/0,t){if(e<=0||!Rt(n)||n.__v_skip||(t=t||new Map,(t.get(n)||0)>=e))return n;if(t.set(n,e),e--,Zn(n))Fr(n.value,e,t);else if($e(n))for(let s=0;s<n.length;s++)Fr(n[s],e,t);else if(tl(n)||_a(n))n.forEach(s=>{Fr(s,e,t)});else if(y_(n)){for(const s in n)Fr(n[s],e,t);for(const s of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,s)&&Fr(n[s],e,t)}return n}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function hu(n,e,t,s){try{return s?n(...s):n()}catch(r){Th(r,e,t)}}function er(n,e,t,s){if(Ye(n)){const r=hu(n,e,t,s);return r&&m_(r)&&r.catch(i=>{Th(i,e,t)}),r}if($e(n)){const r=[];for(let i=0;i<n.length;i++)r.push(er(n[i],e,t,s));return r}}function Th(n,e,t,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||kt;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const d=a.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](n,l,c)===!1)return}a=a.parent}if(i){Xr(),hu(i,null,10,[n,l,c]),Zr();return}}GS(n,t,r,s,o)}function GS(n,e,t,s=!0,r=!1){if(r)throw n;console.error(n)}const os=[];let dr=-1;const ba=[];let Ci=null,ca=0;const V_=Promise.resolve();let Od=null;function Zg(n){const e=Od||V_;return n?e.then(this?n.bind(this):n):e}function QS(n){let e=dr+1,t=os.length;for(;e<t;){const s=e+t>>>1,r=os[s],i=Fc(r);i<n||i===n&&r.flags&2?e=s+1:t=s}return e}function em(n){if(!(n.flags&1)){const e=Fc(n),t=os[os.length-1];!t||!(n.flags&2)&&e>=Fc(t)?os.push(n):os.splice(QS(e),0,n),n.flags|=1,$_()}}function $_(){Od||(Od=V_.then(G_))}function jS(n){$e(n)?ba.push(...n):Ci&&n.id===-1?Ci.splice(ca+1,0,n):n.flags&1||(ba.push(n),n.flags|=1),$_()}function ny(n,e,t=dr+1){for(;t<os.length;t++){const s=os[t];if(s&&s.flags&2){if(n&&s.id!==n.uid)continue;os.splice(t,1),t--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function H_(n){if(ba.length){const e=[...new Set(ba)].sort((t,s)=>Fc(t)-Fc(s));if(ba.length=0,Ci){Ci.push(...e);return}for(Ci=e,ca=0;ca<Ci.length;ca++){const t=Ci[ca];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Ci=null,ca=0}}const Fc=n=>n.id==null?n.flags&2?-1:1/0:n.id;function G_(n){try{for(dr=0;dr<os.length;dr++){const e=os[dr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),hu(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;dr<os.length;dr++){const e=os[dr];e&&(e.flags&=-2)}dr=-1,os.length=0,H_(),Od=null,(os.length||ba.length)&&G_()}}let xs=null,Q_=null;function Ld(n){const e=xs;return xs=n,Q_=n&&n.type.__scopeId||null,e}function j_(n,e=xs,t){if(!e||n._n)return n;const s=(...r)=>{s._d&&Fd(-1);const i=Ld(e);let o;try{o=n(...r)}finally{Ld(i),s._d&&Fd(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Wt(n,e){if(xs===null)return n;const t=kh(xs),s=n.dirs||(n.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=kt]=e[r];i&&(Ye(i)&&(i={mounted:i,updated:i}),i.deep&&Fr(o),s.push({dir:i,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function uo(n,e,t,s){const r=n.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(Xr(),er(l,t,8,[n.el,a,n,e]),Zr())}}const zS=Symbol("_vte"),z_=n=>n.__isTeleport,Lr=Symbol("_leaveCb"),zu=Symbol("_enterCb");function WS(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Nt(()=>{n.isMounted=!0}),t1(()=>{n.isUnmounting=!0}),n}const Ls=[Function,Array],W_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ls,onEnter:Ls,onAfterEnter:Ls,onEnterCancelled:Ls,onBeforeLeave:Ls,onLeave:Ls,onAfterLeave:Ls,onLeaveCancelled:Ls,onBeforeAppear:Ls,onAppear:Ls,onAfterAppear:Ls,onAppearCancelled:Ls},K_=n=>{const e=n.subTree;return e.component?K_(e.component):e},KS={name:"BaseTransition",props:W_,setup(n,{slots:e}){const t=b1(),s=WS();return()=>{const r=e.default&&Y_(e.default(),!0);if(!r||!r.length)return;const i=q_(r),o=At(n),{mode:a}=o;if(s.isLeaving)return Lf(i);const l=sy(i);if(!l)return Lf(i);let c=Dp(l,o,s,t,f=>c=f);l.type!==as&&Uc(l,c);let d=t.subTree&&sy(t.subTree);if(d&&d.type!==as&&!wo(d,l)&&K_(t).type!==as){let f=Dp(d,o,s,t);if(Uc(d,f),a==="out-in"&&l.type!==as)return s.isLeaving=!0,f.afterLeave=()=>{s.isLeaving=!1,t.job.flags&8||t.update(),delete f.afterLeave,d=void 0},Lf(i);a==="in-out"&&l.type!==as?f.delayLeave=(p,m,w)=>{const y=J_(s,d);y[String(d.key)]=d,p[Lr]=()=>{m(),p[Lr]=void 0,delete c.delayedLeave,d=void 0},c.delayedLeave=()=>{w(),delete c.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return i}}};function q_(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==as){e=t;break}}return e}const qS=KS;function J_(n,e){const{leavingVNodes:t}=n;let s=t.get(e.type);return s||(s=Object.create(null),t.set(e.type,s)),s}function Dp(n,e,t,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:d,onEnterCancelled:f,onBeforeLeave:p,onLeave:m,onAfterLeave:w,onLeaveCancelled:y,onBeforeAppear:A,onAppear:_,onAfterAppear:C,onAppearCancelled:S}=e,B=String(n.key),V=J_(t,n),j=(P,T)=>{P&&er(P,s,9,T)},x=(P,T)=>{const b=T[1];j(P,T),$e(P)?P.every(D=>D.length<=1)&&b():P.length<=1&&b()},I={mode:o,persisted:a,beforeEnter(P){let T=l;if(!t.isMounted)if(i)T=A||l;else return;P[Lr]&&P[Lr](!0);const b=V[B];b&&wo(n,b)&&b.el[Lr]&&b.el[Lr](),j(T,[P])},enter(P){let T=c,b=d,D=f;if(!t.isMounted)if(i)T=_||c,b=C||d,D=S||f;else return;let k=!1;const ke=P[zu]=ie=>{k||(k=!0,ie?j(D,[P]):j(b,[P]),I.delayedLeave&&I.delayedLeave(),P[zu]=void 0)};T?x(T,[P,ke]):ke()},leave(P,T){const b=String(n.key);if(P[zu]&&P[zu](!0),t.isUnmounting)return T();j(p,[P]);let D=!1;const k=P[Lr]=ke=>{D||(D=!0,T(),ke?j(y,[P]):j(w,[P]),P[Lr]=void 0,V[b]===n&&delete V[b])};V[b]=n,m?x(m,[P,k]):k()},clone(P){const T=Dp(P,e,t,s,r);return r&&r(T),T}};return I}function Lf(n){if(Sh(n))return n=Gi(n),n.children=null,n}function sy(n){if(!Sh(n))return z_(n.type)&&n.children?q_(n.children):n;if(n.component)return n.component.subTree;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&Ye(t.default))return t.default()}}function Uc(n,e){n.shapeFlag&6&&n.component?(n.transition=e,Uc(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function Y_(n,e=!1,t){let s=[],r=0;for(let i=0;i<n.length;i++){let o=n[i];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:i);o.type===Re?(o.patchFlag&128&&r++,s=s.concat(Y_(o.children,e,a))):(e||o.type!==as)&&s.push(a!=null?Gi(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function X_(n,e){return Ye(n)?On({name:n.name},e,{setup:n}):n}function Z_(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}const Bd=new WeakMap;function Ec(n,e,t,s,r=!1){if($e(n)){n.forEach((w,y)=>Ec(w,e&&($e(e)?e[y]:e),t,s,r));return}if(bc(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Ec(n,e,t,s.component.subTree);return}const i=s.shapeFlag&4?kh(s.component):s.el,o=r?null:i,{i:a,r:l}=n,c=e&&e.r,d=a.refs===kt?a.refs={}:a.refs,f=a.setupState,p=At(f),m=f===kt?g_:w=>Et(p,w);if(c!=null&&c!==l){if(ry(e),fn(c))d[c]=null,m(c)&&(f[c]=null);else if(Zn(c)){c.value=null;const w=e;w.k&&(d[w.k]=null)}}if(Ye(l))hu(l,a,12,[o,d]);else{const w=fn(l),y=Zn(l);if(w||y){const A=()=>{if(n.f){const _=w?m(l)?f[l]:d[l]:l.value;if(r)$e(_)&&Gg(_,i);else if($e(_))_.includes(i)||_.push(i);else if(w)d[l]=[i],m(l)&&(f[l]=d[l]);else{const C=[i];l.value=C,n.k&&(d[n.k]=C)}}else w?(d[l]=o,m(l)&&(f[l]=o)):y&&(l.value=o,n.k&&(d[n.k]=o))};if(o){const _=()=>{A(),Bd.delete(n)};_.id=-1,Bd.set(n,_),Ss(_,t)}else ry(n),A()}}}function ry(n){const e=Bd.get(n);e&&(e.flags|=8,Bd.delete(n))}Ih().requestIdleCallback;Ih().cancelIdleCallback;const bc=n=>!!n.type.__asyncLoader,Sh=n=>n.type.__isKeepAlive;function JS(n,e){e1(n,"a",e)}function YS(n,e){e1(n,"da",e)}function e1(n,e,t=Xn){const s=n.__wdc||(n.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(Ph(e,s,t),t){let r=t.parent;for(;r&&r.parent;)Sh(r.parent.vnode)&&XS(s,e,t,r),r=r.parent}}function XS(n,e,t,s){const r=Ph(e,n,s,!0);rn(()=>{Gg(s[e],r)},t)}function Ph(n,e,t=Xn,s=!1){if(t){const r=t[n]||(t[n]=[]),i=e.__weh||(e.__weh=(...o)=>{Xr();const a=fu(t),l=er(e,t,n,o);return a(),Zr(),l});return s?r.unshift(i):r.push(i),i}}const ui=n=>(e,t=Xn)=>{(!$c||n==="sp")&&Ph(n,(...s)=>e(...s),t)},ZS=ui("bm"),Nt=ui("m"),eP=ui("bu"),tP=ui("u"),t1=ui("bum"),rn=ui("um"),nP=ui("sp"),sP=ui("rtg"),rP=ui("rtc");function iP(n,e=Xn){Ph("ec",n,e)}const oP="components";function aP(n,e){return cP(oP,n,!0,e)||n}const lP=Symbol.for("v-ndc");function cP(n,e,t=!0,s=!1){const r=xs||Xn;if(r){const i=r.type;{const a=JP(i,!1);if(a&&(a===e||a===Hs(e)||a===bh(Hs(e))))return i}const o=iy(r[n]||i[n],e)||iy(r.appContext[n],e);return!o&&s?i:o}}function iy(n,e){return n&&(n[e]||n[Hs(e)]||n[bh(Hs(e))])}function We(n,e,t,s){let r;const i=t,o=$e(n);if(o||fn(n)){const a=o&&Ea(n);let l=!1,c=!1;a&&(l=!Us(n),c=Hi(n),n=Ch(n)),r=new Array(n.length);for(let d=0,f=n.length;d<f;d++)r[d]=e(l?c?Nd(Un(n[d])):Un(n[d]):n[d],d,void 0,i)}else if(typeof n=="number"){r=new Array(n);for(let a=0;a<n;a++)r[a]=e(a+1,a,void 0,i)}else if(Rt(n))if(n[Symbol.iterator])r=Array.from(n,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(n);r=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const d=a[l];r[l]=e(n[d],d,l,i)}}else r=[];return r}const Op=n=>n?I1(n)?kh(n):Op(n.parent):null,Ic=On(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Op(n.parent),$root:n=>Op(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>s1(n),$forceUpdate:n=>n.f||(n.f=()=>{em(n.update)}),$nextTick:n=>n.n||(n.n=Zg.bind(n.proxy)),$watch:n=>xP.bind(n)}),Bf=(n,e)=>n!==kt&&!n.__isScriptSetup&&Et(n,e),uP={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:l}=n;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return t[e];case 3:return i[e]}else{if(Bf(s,e))return o[e]=1,s[e];if(r!==kt&&Et(r,e))return o[e]=2,r[e];if((c=n.propsOptions[0])&&Et(c,e))return o[e]=3,i[e];if(t!==kt&&Et(t,e))return o[e]=4,t[e];Lp&&(o[e]=0)}}const d=Ic[e];let f,p;if(d)return e==="$attrs"&&Jn(n.attrs,"get",""),d(n);if((f=a.__cssModules)&&(f=f[e]))return f;if(t!==kt&&Et(t,e))return o[e]=4,t[e];if(p=l.config.globalProperties,Et(p,e))return p[e]},set({_:n},e,t){const{data:s,setupState:r,ctx:i}=n;return Bf(r,e)?(r[e]=t,!0):s!==kt&&Et(s,e)?(s[e]=t,!0):Et(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(i[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:s,appContext:r,propsOptions:i,type:o}},a){let l,c;return!!(t[a]||n!==kt&&a[0]!=="$"&&Et(n,a)||Bf(e,a)||(l=i[0])&&Et(l,a)||Et(s,a)||Et(Ic,a)||Et(r.config.globalProperties,a)||(c=o.__cssModules)&&c[a])},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Et(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function oy(n){return $e(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Lp=!0;function dP(n){const e=s1(n),t=n.proxy,s=n.ctx;Lp=!1,e.beforeCreate&&ay(e.beforeCreate,n,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:c,created:d,beforeMount:f,mounted:p,beforeUpdate:m,updated:w,activated:y,deactivated:A,beforeDestroy:_,beforeUnmount:C,destroyed:S,unmounted:B,render:V,renderTracked:j,renderTriggered:x,errorCaptured:I,serverPrefetch:P,expose:T,inheritAttrs:b,components:D,directives:k,filters:ke}=e;if(c&&hP(c,s,null),o)for(const $ in o){const Z=o[$];Ye(Z)&&(s[$]=Z.bind(t))}if(r){const $=r.call(t,t);Rt($)&&(n.data=du($))}if(Lp=!0,i)for(const $ in i){const Z=i[$],me=Ye(Z)?Z.bind(t,t):Ye(Z.get)?Z.get.bind(t,t):vr,Ve=!Ye(Z)&&Ye(Z.set)?Z.set.bind(t):vr,Ne=pe({get:me,set:Ve});Object.defineProperty(s,$,{enumerable:!0,configurable:!0,get:()=>Ne.value,set:se=>Ne.value=se})}if(a)for(const $ in a)n1(a[$],s,t,$);if(l){const $=Ye(l)?l.call(t):l;Reflect.ownKeys($).forEach(Z=>{hd(Z,$[Z])})}d&&ay(d,n,"c");function G($,Z){$e(Z)?Z.forEach(me=>$(me.bind(t))):Z&&$(Z.bind(t))}if(G(ZS,f),G(Nt,p),G(eP,m),G(tP,w),G(JS,y),G(YS,A),G(iP,I),G(rP,j),G(sP,x),G(t1,C),G(rn,B),G(nP,P),$e(T))if(T.length){const $=n.exposed||(n.exposed={});T.forEach(Z=>{Object.defineProperty($,Z,{get:()=>t[Z],set:me=>t[Z]=me,enumerable:!0})})}else n.exposed||(n.exposed={});V&&n.render===vr&&(n.render=V),b!=null&&(n.inheritAttrs=b),D&&(n.components=D),k&&(n.directives=k),P&&Z_(n)}function hP(n,e,t=vr){$e(n)&&(n=Bp(n));for(const s in n){const r=n[s];let i;Rt(r)?"default"in r?i=Zs(r.from||s,r.default,!0):i=Zs(r.from||s):i=Zs(r),Zn(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function ay(n,e,t){er($e(n)?n.map(s=>s.bind(e.proxy)):n.bind(e.proxy),e,t)}function n1(n,e,t,s){let r=s.includes(".")?m1(t,s):()=>t[s];if(fn(n)){const i=e[n];Ye(i)&&Kr(r,i)}else if(Ye(n))Kr(r,n.bind(t));else if(Rt(n))if($e(n))n.forEach(i=>n1(i,e,t,s));else{const i=Ye(n.handler)?n.handler.bind(t):e[n.handler];Ye(i)&&Kr(r,i,n)}}function s1(n){const e=n.type,{mixins:t,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=n.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!t&&!s?l=e:(l={},r.length&&r.forEach(c=>Md(l,c,o,!0)),Md(l,e,o)),Rt(e)&&i.set(e,l),l}function Md(n,e,t,s=!1){const{mixins:r,extends:i}=e;i&&Md(n,i,t,!0),r&&r.forEach(o=>Md(n,o,t,!0));for(const o in e)if(!(s&&o==="expose")){const a=fP[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const fP={data:ly,props:cy,emits:cy,methods:dc,computed:dc,beforeCreate:ss,created:ss,beforeMount:ss,mounted:ss,beforeUpdate:ss,updated:ss,beforeDestroy:ss,beforeUnmount:ss,destroyed:ss,unmounted:ss,activated:ss,deactivated:ss,errorCaptured:ss,serverPrefetch:ss,components:dc,directives:dc,watch:gP,provide:ly,inject:pP};function ly(n,e){return e?n?function(){return On(Ye(n)?n.call(this,this):n,Ye(e)?e.call(this,this):e)}:e:n}function pP(n,e){return dc(Bp(n),Bp(e))}function Bp(n){if($e(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function ss(n,e){return n?[...new Set([].concat(n,e))]:e}function dc(n,e){return n?On(Object.create(null),n,e):e}function cy(n,e){return n?$e(n)&&$e(e)?[...new Set([...n,...e])]:On(Object.create(null),oy(n),oy(e??{})):e}function gP(n,e){if(!n)return e;if(!e)return n;const t=On(Object.create(null),n);for(const s in e)t[s]=ss(n[s],e[s]);return t}function r1(){return{app:null,config:{isNativeTag:g_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let mP=0;function vP(n,e){return function(s,r=null){Ye(s)||(s=On({},s)),r!=null&&!Rt(r)&&(r=null);const i=r1(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:mP++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:XP,get config(){return i.config},set config(d){},use(d,...f){return o.has(d)||(d&&Ye(d.install)?(o.add(d),d.install(c,...f)):Ye(d)&&(o.add(d),d(c,...f))),c},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),c},component(d,f){return f?(i.components[d]=f,c):i.components[d]},directive(d,f){return f?(i.directives[d]=f,c):i.directives[d]},mount(d,f,p){if(!l){const m=c._ceVNode||ze(s,r);return m.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),n(m,d,p),l=!0,c._container=d,d.__vue_app__=c,kh(m.component)}},onUnmount(d){a.push(d)},unmount(){l&&(er(a,c._instance,16),n(null,c._container),delete c._container.__vue_app__)},provide(d,f){return i.provides[d]=f,c},runWithContext(d){const f=Ia;Ia=c;try{return d()}finally{Ia=f}}};return c}}let Ia=null;function hd(n,e){if(Xn){let t=Xn.provides;const s=Xn.parent&&Xn.parent.provides;s===t&&(t=Xn.provides=Object.create(s)),t[n]=e}}function Zs(n,e,t=!1){const s=b1();if(s||Ia){let r=Ia?Ia._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&n in r)return r[n];if(arguments.length>1)return t&&Ye(e)?e.call(s&&s.proxy):e}}const i1={},o1=()=>Object.create(i1),a1=n=>Object.getPrototypeOf(n)===i1;function yP(n,e,t,s=!1){const r={},i=o1();n.propsDefaults=Object.create(null),l1(n,e,r,i);for(const o in n.propsOptions[0])o in r||(r[o]=void 0);t?n.props=s?r:M_(r):n.type.props?n.props=r:n.props=i,n.attrs=i}function AP(n,e,t,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=n,a=At(r),[l]=n.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const d=n.vnode.dynamicProps;for(let f=0;f<d.length;f++){let p=d[f];if(Rh(n.emitsOptions,p))continue;const m=e[p];if(l)if(Et(i,p))m!==i[p]&&(i[p]=m,c=!0);else{const w=Hs(p);r[w]=Mp(l,a,w,m,n,!1)}else m!==i[p]&&(i[p]=m,c=!0)}}}else{l1(n,e,r,i)&&(c=!0);let d;for(const f in a)(!e||!Et(e,f)&&((d=to(f))===f||!Et(e,d)))&&(l?t&&(t[f]!==void 0||t[d]!==void 0)&&(r[f]=Mp(l,a,f,void 0,n,!0)):delete r[f]);if(i!==a)for(const f in i)(!e||!Et(e,f))&&(delete i[f],c=!0)}c&&Mr(n.attrs,"set","")}function l1(n,e,t,s){const[r,i]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(Ac(l))continue;const c=e[l];let d;r&&Et(r,d=Hs(l))?!i||!i.includes(d)?t[d]=c:(a||(a={}))[d]=c:Rh(n.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(i){const l=At(t),c=a||kt;for(let d=0;d<i.length;d++){const f=i[d];t[f]=Mp(r,l,f,c[f],n,!Et(c,f))}}return o}function Mp(n,e,t,s,r,i){const o=n[t];if(o!=null){const a=Et(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ye(l)){const{propsDefaults:c}=r;if(t in c)s=c[t];else{const d=fu(r);s=c[t]=l.call(null,e),d()}}else s=l;r.ce&&r.ce._setProp(t,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===to(t))&&(s=!0))}return s}const wP=new WeakMap;function c1(n,e,t=!1){const s=t?wP:e.propsCache,r=s.get(n);if(r)return r;const i=n.props,o={},a=[];let l=!1;if(!Ye(n)){const d=f=>{l=!0;const[p,m]=c1(f,e,!0);On(o,p),m&&a.push(...m)};!t&&e.mixins.length&&e.mixins.forEach(d),n.extends&&d(n.extends),n.mixins&&n.mixins.forEach(d)}if(!i&&!l)return Rt(n)&&s.set(n,wa),wa;if($e(i))for(let d=0;d<i.length;d++){const f=Hs(i[d]);uy(f)&&(o[f]=kt)}else if(i)for(const d in i){const f=Hs(d);if(uy(f)){const p=i[d],m=o[f]=$e(p)||Ye(p)?{type:p}:On({},p),w=m.type;let y=!1,A=!0;if($e(w))for(let _=0;_<w.length;++_){const C=w[_],S=Ye(C)&&C.name;if(S==="Boolean"){y=!0;break}else S==="String"&&(A=!1)}else y=Ye(w)&&w.name==="Boolean";m[0]=y,m[1]=A,(y||Et(m,"default"))&&a.push(f)}}const c=[o,a];return Rt(n)&&s.set(n,c),c}function uy(n){return n[0]!=="$"&&!Ac(n)}const tm=n=>n==="_"||n==="_ctx"||n==="$stable",nm=n=>$e(n)?n.map(fr):[fr(n)],_P=(n,e,t)=>{if(e._n)return e;const s=j_((...r)=>nm(e(...r)),t);return s._c=!1,s},u1=(n,e,t)=>{const s=n._ctx;for(const r in n){if(tm(r))continue;const i=n[r];if(Ye(i))e[r]=_P(r,i,s);else if(i!=null){const o=nm(i);e[r]=()=>o}}},d1=(n,e)=>{const t=nm(e);n.slots.default=()=>t},h1=(n,e,t)=>{for(const s in e)(t||!tm(s))&&(n[s]=e[s])},EP=(n,e,t)=>{const s=n.slots=o1();if(n.vnode.shapeFlag&32){const r=e._;r?(h1(s,e,t),t&&A_(s,"_",r,!0)):u1(e,s)}else e&&d1(n,e)},bP=(n,e,t)=>{const{vnode:s,slots:r}=n;let i=!0,o=kt;if(s.shapeFlag&32){const a=e._;a?t&&a===1?i=!1:h1(r,e,t):(i=!e.$stable,u1(e,r)),o=e}else e&&(d1(n,e),o={default:1});if(i)for(const a in r)!tm(a)&&o[a]==null&&delete r[a]},Ss=FP;function IP(n){return CP(n)}function CP(n,e){const t=Ih();t.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:d,parentNode:f,nextSibling:p,setScopeId:m=vr,insertStaticContent:w}=n,y=(N,O,Q,te=null,K=null,F=null,z=void 0,ne=null,ae=!!O.dynamicChildren)=>{if(N===O)return;N&&!wo(N,O)&&(te=Y(N),se(N,K,F,!0),N=null),O.patchFlag===-2&&(ae=!1,O.dynamicChildren=null);const{type:de,ref:Me,shapeFlag:ve}=O;switch(de){case xh:A(N,O,Q,te);break;case as:_(N,O,Q,te);break;case fd:N==null&&C(O,Q,te,z);break;case Re:D(N,O,Q,te,K,F,z,ne,ae);break;default:ve&1?V(N,O,Q,te,K,F,z,ne,ae):ve&6?k(N,O,Q,te,K,F,z,ne,ae):(ve&64||ve&128)&&de.process(N,O,Q,te,K,F,z,ne,ae,we)}Me!=null&&K?Ec(Me,N&&N.ref,F,O||N,!O):Me==null&&N&&N.ref!=null&&Ec(N.ref,null,F,N,!0)},A=(N,O,Q,te)=>{if(N==null)s(O.el=a(O.children),Q,te);else{const K=O.el=N.el;O.children!==N.children&&c(K,O.children)}},_=(N,O,Q,te)=>{N==null?s(O.el=l(O.children||""),Q,te):O.el=N.el},C=(N,O,Q,te)=>{[N.el,N.anchor]=w(N.children,O,Q,te,N.el,N.anchor)},S=({el:N,anchor:O},Q,te)=>{let K;for(;N&&N!==O;)K=p(N),s(N,Q,te),N=K;s(O,Q,te)},B=({el:N,anchor:O})=>{let Q;for(;N&&N!==O;)Q=p(N),r(N),N=Q;r(O)},V=(N,O,Q,te,K,F,z,ne,ae)=>{O.type==="svg"?z="svg":O.type==="math"&&(z="mathml"),N==null?j(O,Q,te,K,F,z,ne,ae):P(N,O,K,F,z,ne,ae)},j=(N,O,Q,te,K,F,z,ne)=>{let ae,de;const{props:Me,shapeFlag:ve,transition:xe,dirs:Be}=N;if(ae=N.el=o(N.type,F,Me&&Me.is,Me),ve&8?d(ae,N.children):ve&16&&I(N.children,ae,null,te,K,Mf(N,F),z,ne),Be&&uo(N,null,te,"created"),x(ae,N,N.scopeId,z,te),Me){for(const vt in Me)vt!=="value"&&!Ac(vt)&&i(ae,vt,null,Me[vt],F,te);"value"in Me&&i(ae,"value",null,Me.value,F),(de=Me.onVnodeBeforeMount)&&cr(de,te,N)}Be&&uo(N,null,te,"beforeMount");const it=TP(K,xe);it&&xe.beforeEnter(ae),s(ae,O,Q),((de=Me&&Me.onVnodeMounted)||it||Be)&&Ss(()=>{de&&cr(de,te,N),it&&xe.enter(ae),Be&&uo(N,null,te,"mounted")},K)},x=(N,O,Q,te,K)=>{if(Q&&m(N,Q),te)for(let F=0;F<te.length;F++)m(N,te[F]);if(K){let F=K.subTree;if(O===F||y1(F.type)&&(F.ssContent===O||F.ssFallback===O)){const z=K.vnode;x(N,z,z.scopeId,z.slotScopeIds,K.parent)}}},I=(N,O,Q,te,K,F,z,ne,ae=0)=>{for(let de=ae;de<N.length;de++){const Me=N[de]=ne?Ti(N[de]):fr(N[de]);y(null,Me,O,Q,te,K,F,z,ne)}},P=(N,O,Q,te,K,F,z)=>{const ne=O.el=N.el;let{patchFlag:ae,dynamicChildren:de,dirs:Me}=O;ae|=N.patchFlag&16;const ve=N.props||kt,xe=O.props||kt;let Be;if(Q&&ho(Q,!1),(Be=xe.onVnodeBeforeUpdate)&&cr(Be,Q,O,N),Me&&uo(O,N,Q,"beforeUpdate"),Q&&ho(Q,!0),(ve.innerHTML&&xe.innerHTML==null||ve.textContent&&xe.textContent==null)&&d(ne,""),de?T(N.dynamicChildren,de,ne,Q,te,Mf(O,K),F):z||Z(N,O,ne,null,Q,te,Mf(O,K),F,!1),ae>0){if(ae&16)b(ne,ve,xe,Q,K);else if(ae&2&&ve.class!==xe.class&&i(ne,"class",null,xe.class,K),ae&4&&i(ne,"style",ve.style,xe.style,K),ae&8){const it=O.dynamicProps;for(let vt=0;vt<it.length;vt++){const He=it[vt],qt=ve[He],at=xe[He];(at!==qt||He==="value")&&i(ne,He,qt,at,K,Q)}}ae&1&&N.children!==O.children&&d(ne,O.children)}else!z&&de==null&&b(ne,ve,xe,Q,K);((Be=xe.onVnodeUpdated)||Me)&&Ss(()=>{Be&&cr(Be,Q,O,N),Me&&uo(O,N,Q,"updated")},te)},T=(N,O,Q,te,K,F,z)=>{for(let ne=0;ne<O.length;ne++){const ae=N[ne],de=O[ne],Me=ae.el&&(ae.type===Re||!wo(ae,de)||ae.shapeFlag&198)?f(ae.el):Q;y(ae,de,Me,null,te,K,F,z,!0)}},b=(N,O,Q,te,K)=>{if(O!==Q){if(O!==kt)for(const F in O)!Ac(F)&&!(F in Q)&&i(N,F,O[F],null,K,te);for(const F in Q){if(Ac(F))continue;const z=Q[F],ne=O[F];z!==ne&&F!=="value"&&i(N,F,ne,z,K,te)}"value"in Q&&i(N,"value",O.value,Q.value,K)}},D=(N,O,Q,te,K,F,z,ne,ae)=>{const de=O.el=N?N.el:a(""),Me=O.anchor=N?N.anchor:a("");let{patchFlag:ve,dynamicChildren:xe,slotScopeIds:Be}=O;Be&&(ne=ne?ne.concat(Be):Be),N==null?(s(de,Q,te),s(Me,Q,te),I(O.children||[],Q,Me,K,F,z,ne,ae)):ve>0&&ve&64&&xe&&N.dynamicChildren?(T(N.dynamicChildren,xe,Q,K,F,z,ne),(O.key!=null||K&&O===K.subTree)&&f1(N,O,!0)):Z(N,O,Q,Me,K,F,z,ne,ae)},k=(N,O,Q,te,K,F,z,ne,ae)=>{O.slotScopeIds=ne,N==null?O.shapeFlag&512?K.ctx.activate(O,Q,te,z,ae):ke(O,Q,te,K,F,z,ae):ie(N,O,ae)},ke=(N,O,Q,te,K,F,z)=>{const ne=N.component=jP(N,te,K);if(Sh(N)&&(ne.ctx.renderer=we),zP(ne,!1,z),ne.asyncDep){if(K&&K.registerDep(ne,G,z),!N.el){const ae=ne.subTree=ze(as);_(null,ae,O,Q),N.placeholder=ae.el}}else G(ne,N,O,Q,K,F,z)},ie=(N,O,Q)=>{const te=O.component=N.component;if(BP(N,O,Q))if(te.asyncDep&&!te.asyncResolved){$(te,O,Q);return}else te.next=O,te.update();else O.el=N.el,te.vnode=O},G=(N,O,Q,te,K,F,z)=>{const ne=()=>{if(N.isMounted){let{next:ve,bu:xe,u:Be,parent:it,vnode:vt}=N;{const ts=p1(N);if(ts){ve&&(ve.el=vt.el,$(N,ve,z)),ts.asyncDep.then(()=>{N.isUnmounted||ne()});return}}let He=ve,qt;ho(N,!1),ve?(ve.el=vt.el,$(N,ve,z)):ve=vt,xe&&dd(xe),(qt=ve.props&&ve.props.onVnodeBeforeUpdate)&&cr(qt,it,ve,vt),ho(N,!0);const at=hy(N),Ln=N.subTree;N.subTree=at,y(Ln,at,f(Ln.el),Y(Ln),N,K,F),ve.el=at.el,He===null&&MP(N,at.el),Be&&Ss(Be,K),(qt=ve.props&&ve.props.onVnodeUpdated)&&Ss(()=>cr(qt,it,ve,vt),K)}else{let ve;const{el:xe,props:Be}=O,{bm:it,m:vt,parent:He,root:qt,type:at}=N,Ln=bc(O);ho(N,!1),it&&dd(it),!Ln&&(ve=Be&&Be.onVnodeBeforeMount)&&cr(ve,He,O),ho(N,!0);{qt.ce&&qt.ce._def.shadowRoot!==!1&&qt.ce._injectChildStyle(at);const ts=N.subTree=hy(N);y(null,ts,Q,te,N,K,F),O.el=ts.el}if(vt&&Ss(vt,K),!Ln&&(ve=Be&&Be.onVnodeMounted)){const ts=O;Ss(()=>cr(ve,He,ts),K)}(O.shapeFlag&256||He&&bc(He.vnode)&&He.vnode.shapeFlag&256)&&N.a&&Ss(N.a,K),N.isMounted=!0,O=Q=te=null}};N.scope.on();const ae=N.effect=new b_(ne);N.scope.off();const de=N.update=ae.run.bind(ae),Me=N.job=ae.runIfDirty.bind(ae);Me.i=N,Me.id=N.uid,ae.scheduler=()=>em(Me),ho(N,!0),de()},$=(N,O,Q)=>{O.component=N;const te=N.vnode.props;N.vnode=O,N.next=null,AP(N,O.props,te,Q),bP(N,O.children,Q),Xr(),ny(N),Zr()},Z=(N,O,Q,te,K,F,z,ne,ae=!1)=>{const de=N&&N.children,Me=N?N.shapeFlag:0,ve=O.children,{patchFlag:xe,shapeFlag:Be}=O;if(xe>0){if(xe&128){Ve(de,ve,Q,te,K,F,z,ne,ae);return}else if(xe&256){me(de,ve,Q,te,K,F,z,ne,ae);return}}Be&8?(Me&16&&tt(de,K,F),ve!==de&&d(Q,ve)):Me&16?Be&16?Ve(de,ve,Q,te,K,F,z,ne,ae):tt(de,K,F,!0):(Me&8&&d(Q,""),Be&16&&I(ve,Q,te,K,F,z,ne,ae))},me=(N,O,Q,te,K,F,z,ne,ae)=>{N=N||wa,O=O||wa;const de=N.length,Me=O.length,ve=Math.min(de,Me);let xe;for(xe=0;xe<ve;xe++){const Be=O[xe]=ae?Ti(O[xe]):fr(O[xe]);y(N[xe],Be,Q,null,K,F,z,ne,ae)}de>Me?tt(N,K,F,!0,!1,ve):I(O,Q,te,K,F,z,ne,ae,ve)},Ve=(N,O,Q,te,K,F,z,ne,ae)=>{let de=0;const Me=O.length;let ve=N.length-1,xe=Me-1;for(;de<=ve&&de<=xe;){const Be=N[de],it=O[de]=ae?Ti(O[de]):fr(O[de]);if(wo(Be,it))y(Be,it,Q,null,K,F,z,ne,ae);else break;de++}for(;de<=ve&&de<=xe;){const Be=N[ve],it=O[xe]=ae?Ti(O[xe]):fr(O[xe]);if(wo(Be,it))y(Be,it,Q,null,K,F,z,ne,ae);else break;ve--,xe--}if(de>ve){if(de<=xe){const Be=xe+1,it=Be<Me?O[Be].el:te;for(;de<=xe;)y(null,O[de]=ae?Ti(O[de]):fr(O[de]),Q,it,K,F,z,ne,ae),de++}}else if(de>xe)for(;de<=ve;)se(N[de],K,F,!0),de++;else{const Be=de,it=de,vt=new Map;for(de=it;de<=xe;de++){const Jt=O[de]=ae?Ti(O[de]):fr(O[de]);Jt.key!=null&&vt.set(Jt.key,de)}let He,qt=0;const at=xe-it+1;let Ln=!1,ts=0;const Is=new Array(at);for(de=0;de<at;de++)Is[de]=0;for(de=Be;de<=ve;de++){const Jt=N[de];if(qt>=at){se(Jt,K,F,!0);continue}let pn;if(Jt.key!=null)pn=vt.get(Jt.key);else for(He=it;He<=xe;He++)if(Is[He-it]===0&&wo(Jt,O[He])){pn=He;break}pn===void 0?se(Jt,K,F,!0):(Is[pn-it]=de+1,pn>=ts?ts=pn:Ln=!0,y(Jt,O[pn],Q,null,K,F,z,ne,ae),qt++)}const Pr=Ln?SP(Is):wa;for(He=Pr.length-1,de=at-1;de>=0;de--){const Jt=it+de,pn=O[Jt],io=O[Jt+1],or=Jt+1<Me?io.el||io.placeholder:te;Is[de]===0?y(null,pn,Q,or,K,F,z,ne,ae):Ln&&(He<0||de!==Pr[He]?Ne(pn,Q,or,2):He--)}}},Ne=(N,O,Q,te,K=null)=>{const{el:F,type:z,transition:ne,children:ae,shapeFlag:de}=N;if(de&6){Ne(N.component.subTree,O,Q,te);return}if(de&128){N.suspense.move(O,Q,te);return}if(de&64){z.move(N,O,Q,we);return}if(z===Re){s(F,O,Q);for(let ve=0;ve<ae.length;ve++)Ne(ae[ve],O,Q,te);s(N.anchor,O,Q);return}if(z===fd){S(N,O,Q);return}if(te!==2&&de&1&&ne)if(te===0)ne.beforeEnter(F),s(F,O,Q),Ss(()=>ne.enter(F),K);else{const{leave:ve,delayLeave:xe,afterLeave:Be}=ne,it=()=>{N.ctx.isUnmounted?r(F):s(F,O,Q)},vt=()=>{F._isLeaving&&F[Lr](!0),ve(F,()=>{it(),Be&&Be()})};xe?xe(F,it,vt):vt()}else s(F,O,Q)},se=(N,O,Q,te=!1,K=!1)=>{const{type:F,props:z,ref:ne,children:ae,dynamicChildren:de,shapeFlag:Me,patchFlag:ve,dirs:xe,cacheIndex:Be}=N;if(ve===-2&&(K=!1),ne!=null&&(Xr(),Ec(ne,null,Q,N,!0),Zr()),Be!=null&&(O.renderCache[Be]=void 0),Me&256){O.ctx.deactivate(N);return}const it=Me&1&&xe,vt=!bc(N);let He;if(vt&&(He=z&&z.onVnodeBeforeUnmount)&&cr(He,O,N),Me&6)Pe(N.component,Q,te);else{if(Me&128){N.suspense.unmount(Q,te);return}it&&uo(N,null,O,"beforeUnmount"),Me&64?N.type.remove(N,O,Q,we,te):de&&!de.hasOnce&&(F!==Re||ve>0&&ve&64)?tt(de,O,Q,!1,!0):(F===Re&&ve&384||!K&&Me&16)&&tt(ae,O,Q),te&&W(N)}(vt&&(He=z&&z.onVnodeUnmounted)||it)&&Ss(()=>{He&&cr(He,O,N),it&&uo(N,null,O,"unmounted")},Q)},W=N=>{const{type:O,el:Q,anchor:te,transition:K}=N;if(O===Re){ue(Q,te);return}if(O===fd){B(N);return}const F=()=>{r(Q),K&&!K.persisted&&K.afterLeave&&K.afterLeave()};if(N.shapeFlag&1&&K&&!K.persisted){const{leave:z,delayLeave:ne}=K,ae=()=>z(Q,F);ne?ne(N.el,F,ae):ae()}else F()},ue=(N,O)=>{let Q;for(;N!==O;)Q=p(N),r(N),N=Q;r(O)},Pe=(N,O,Q)=>{const{bum:te,scope:K,job:F,subTree:z,um:ne,m:ae,a:de}=N;dy(ae),dy(de),te&&dd(te),K.stop(),F&&(F.flags|=8,se(z,N,O,Q)),ne&&Ss(ne,O),Ss(()=>{N.isUnmounted=!0},O)},tt=(N,O,Q,te=!1,K=!1,F=0)=>{for(let z=F;z<N.length;z++)se(N[z],O,Q,te,K)},Y=N=>{if(N.shapeFlag&6)return Y(N.component.subTree);if(N.shapeFlag&128)return N.suspense.next();const O=p(N.anchor||N.el),Q=O&&O[zS];return Q?p(Q):O};let ge=!1;const fe=(N,O,Q)=>{N==null?O._vnode&&se(O._vnode,null,null,!0):y(O._vnode||null,N,O,null,null,null,Q),O._vnode=N,ge||(ge=!0,ny(),H_(),ge=!1)},we={p:y,um:se,m:Ne,r:W,mt:ke,mc:I,pc:Z,pbc:T,n:Y,o:n};return{render:fe,hydrate:void 0,createApp:vP(fe)}}function Mf({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function ho({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function TP(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function f1(n,e,t=!1){const s=n.children,r=e.children;if($e(s)&&$e(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Ti(r[i]),a.el=o.el),!t&&a.patchFlag!==-2&&f1(o,a)),a.type===xh&&a.patchFlag!==-1&&(a.el=o.el),a.type===as&&!a.el&&(a.el=o.el)}}function SP(n){const e=n.slice(),t=[0];let s,r,i,o,a;const l=n.length;for(s=0;s<l;s++){const c=n[s];if(c!==0){if(r=t[t.length-1],n[r]<c){e[s]=r,t.push(s);continue}for(i=0,o=t.length-1;i<o;)a=i+o>>1,n[t[a]]<c?i=a+1:o=a;c<n[t[i]]&&(i>0&&(e[s]=t[i-1]),t[i]=s)}}for(i=t.length,o=t[i-1];i-- >0;)t[i]=o,o=e[o];return t}function p1(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:p1(e)}function dy(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const PP=Symbol.for("v-scx"),RP=()=>Zs(PP);function Kr(n,e,t){return g1(n,e,t)}function g1(n,e,t=kt){const{immediate:s,deep:r,flush:i,once:o}=t,a=On({},t),l=e&&s||!e&&i!=="post";let c;if($c){if(i==="sync"){const m=RP();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=vr,m.resume=vr,m.pause=vr,m}}const d=Xn;a.call=(m,w,y)=>er(m,d,w,y);let f=!1;i==="post"?a.scheduler=m=>{Ss(m,d&&d.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(m,w)=>{w?m():em(m)}),a.augmentJob=m=>{e&&(m.flags|=4),f&&(m.flags|=2,d&&(m.id=d.uid,m.i=d))};const p=HS(n,e,a);return $c&&(c?c.push(p):l&&p()),p}function xP(n,e,t){const s=this.proxy,r=fn(n)?n.includes(".")?m1(s,n):()=>s[n]:n.bind(s,s);let i;Ye(e)?i=e:(i=e.handler,t=e);const o=fu(this),a=g1(r,i.bind(s),t);return o(),a}function m1(n,e){const t=e.split(".");return()=>{let s=n;for(let r=0;r<t.length&&s;r++)s=s[t[r]];return s}}const kP=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${Hs(e)}Modifiers`]||n[`${to(e)}Modifiers`];function NP(n,e,...t){if(n.isUnmounted)return;const s=n.vnode.props||kt;let r=t;const i=e.startsWith("update:"),o=i&&kP(s,e.slice(7));o&&(o.trim&&(r=t.map(d=>fn(d)?d.trim():d)),o.number&&(r=t.map(kd)));let a,l=s[a=xf(e)]||s[a=xf(Hs(e))];!l&&i&&(l=s[a=xf(to(e))]),l&&er(l,n,6,r);const c=s[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,er(c,n,6,r)}}const DP=new WeakMap;function v1(n,e,t=!1){const s=t?DP:e.emitsCache,r=s.get(n);if(r!==void 0)return r;const i=n.emits;let o={},a=!1;if(!Ye(n)){const l=c=>{const d=v1(c,e,!0);d&&(a=!0,On(o,d))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!i&&!a?(Rt(n)&&s.set(n,null),null):($e(i)?i.forEach(l=>o[l]=null):On(o,i),Rt(n)&&s.set(n,o),o)}function Rh(n,e){return!n||!_h(e)?!1:(e=e.slice(2).replace(/Once$/,""),Et(n,e[0].toLowerCase()+e.slice(1))||Et(n,to(e))||Et(n,e))}function hy(n){const{type:e,vnode:t,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:d,props:f,data:p,setupState:m,ctx:w,inheritAttrs:y}=n,A=Ld(n);let _,C;try{if(t.shapeFlag&4){const B=r||s,V=B;_=fr(c.call(V,B,d,f,m,p,w)),C=a}else{const B=e;_=fr(B.length>1?B(f,{attrs:a,slots:o,emit:l}):B(f,null)),C=e.props?a:OP(a)}}catch(B){Cc.length=0,Th(B,n,1),_=ze(as)}let S=_;if(C&&y!==!1){const B=Object.keys(C),{shapeFlag:V}=S;B.length&&V&7&&(i&&B.some(Hg)&&(C=LP(C,i)),S=Gi(S,C,!1,!0))}return t.dirs&&(S=Gi(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(t.dirs):t.dirs),t.transition&&Uc(S,t.transition),_=S,Ld(A),_}const OP=n=>{let e;for(const t in n)(t==="class"||t==="style"||_h(t))&&((e||(e={}))[t]=n[t]);return e},LP=(n,e)=>{const t={};for(const s in n)(!Hg(s)||!(s.slice(9)in e))&&(t[s]=n[s]);return t};function BP(n,e,t){const{props:s,children:r,component:i}=n,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return s?fy(s,o,c):!!o;if(l&8){const d=e.dynamicProps;for(let f=0;f<d.length;f++){const p=d[f];if(o[p]!==s[p]&&!Rh(c,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?fy(s,o,c):!0:!!o;return!1}function fy(n,e,t){const s=Object.keys(e);if(s.length!==Object.keys(n).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==n[i]&&!Rh(t,i))return!0}return!1}function MP({vnode:n,parent:e},t){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===n&&(s.el=n.el),s===n)(n=e.vnode).el=t,e=e.parent;else break}}const y1=n=>n.__isSuspense;function FP(n,e){e&&e.pendingBranch?$e(n)?e.effects.push(...n):e.effects.push(n):jS(n)}const Re=Symbol.for("v-fgt"),xh=Symbol.for("v-txt"),as=Symbol.for("v-cmt"),fd=Symbol.for("v-stc"),Cc=[];let ks=null;function L(n=!1){Cc.push(ks=n?null:[])}function UP(){Cc.pop(),ks=Cc[Cc.length-1]||null}let Vc=1;function Fd(n,e=!1){Vc+=n,n<0&&ks&&e&&(ks.hasOnce=!0)}function A1(n){return n.dynamicChildren=Vc>0?ks||wa:null,UP(),Vc>0&&ks&&ks.push(n),n}function M(n,e,t,s,r,i){return A1(h(n,e,t,s,r,i,!0))}function w1(n,e,t,s,r){return A1(ze(n,e,t,s,r,!0))}function Ud(n){return n?n.__v_isVNode===!0:!1}function wo(n,e){return n.type===e.type&&n.key===e.key}const _1=({key:n})=>n??null,pd=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?fn(n)||Zn(n)||Ye(n)?{i:xs,r:n,k:e,f:!!t}:n:null);function h(n,e=null,t=null,s=0,r=null,i=n===Re?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&_1(e),ref:e&&pd(e),scopeId:Q_,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:xs};return a?(sm(l,t),i&128&&n.normalize(l)):t&&(l.shapeFlag|=fn(t)?8:16),Vc>0&&!o&&ks&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&ks.push(l),l}const ze=VP;function VP(n,e=null,t=null,s=0,r=null,i=!1){if((!n||n===lP)&&(n=as),Ud(n)){const a=Gi(n,e,!0);return t&&sm(a,t),Vc>0&&!i&&ks&&(a.shapeFlag&6?ks[ks.indexOf(n)]=a:ks.push(a)),a.patchFlag=-2,a}if(YP(n)&&(n=n.__vccOpts),e){e=$P(e);let{class:a,style:l}=e;a&&!fn(a)&&(e.class=Oe(a)),Rt(l)&&(Xg(l)&&!$e(l)&&(l=On({},l)),e.style=St(l))}const o=fn(n)?1:y1(n)?128:z_(n)?64:Rt(n)?4:Ye(n)?2:0;return h(n,e,t,s,r,o,i,!0)}function $P(n){return n?Xg(n)||a1(n)?On({},n):n:null}function Gi(n,e,t=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=n,c=e?HP(r||{},e):r,d={__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&_1(c),ref:e&&e.ref?t&&i?$e(i)?i.concat(pd(e)):[i,pd(e)]:pd(e):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Re?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Gi(n.ssContent),ssFallback:n.ssFallback&&Gi(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&s&&Uc(d,l.clone(d)),d}function Qi(n=" ",e=0){return ze(xh,null,n,e)}function E1(n,e){const t=ze(fd,null,n);return t.staticCount=e,t}function he(n="",e=!1){return e?(L(),w1(as,null,n)):ze(as,null,n)}function fr(n){return n==null||typeof n=="boolean"?ze(as):$e(n)?ze(Re,null,n.slice()):Ud(n)?Ti(n):ze(xh,null,String(n))}function Ti(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Gi(n)}function sm(n,e){let t=0;const{shapeFlag:s}=n;if(e==null)e=null;else if($e(e))t=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),sm(n,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!a1(e)?e._ctx=xs:r===3&&xs&&(xs.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Ye(e)?(e={default:e,_ctx:xs},t=32):(e=String(e),s&64?(t=16,e=[Qi(e)]):t=8);n.children=e,n.shapeFlag|=t}function HP(...n){const e={};for(let t=0;t<n.length;t++){const s=n[t];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Oe([e.class,s.class]));else if(r==="style")e.style=St([e.style,s.style]);else if(_h(r)){const i=e[r],o=s[r];o&&i!==o&&!($e(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function cr(n,e,t,s=null){er(n,e,7,[t,s])}const GP=r1();let QP=0;function jP(n,e,t){const s=n.type,r=(e?e.appContext:n.appContext)||GP,i={uid:QP++,vnode:n,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new gS(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:c1(s,r),emitsOptions:v1(s,r),emit:null,emitted:null,propsDefaults:kt,inheritAttrs:s.inheritAttrs,ctx:kt,data:kt,props:kt,attrs:kt,slots:kt,refs:kt,setupState:kt,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=NP.bind(null,i),n.ce&&n.ce(i),i}let Xn=null;const b1=()=>Xn||xs;let Vd,Fp;{const n=Ih(),e=(t,s)=>{let r;return(r=n[t])||(r=n[t]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Vd=e("__VUE_INSTANCE_SETTERS__",t=>Xn=t),Fp=e("__VUE_SSR_SETTERS__",t=>$c=t)}const fu=n=>{const e=Xn;return Vd(n),n.scope.on(),()=>{n.scope.off(),Vd(e)}},py=()=>{Xn&&Xn.scope.off(),Vd(null)};function I1(n){return n.vnode.shapeFlag&4}let $c=!1;function zP(n,e=!1,t=!1){e&&Fp(e);const{props:s,children:r}=n.vnode,i=I1(n);yP(n,s,i,e),EP(n,r,t||e);const o=i?WP(n,e):void 0;return e&&Fp(!1),o}function WP(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,uP);const{setup:s}=t;if(s){Xr();const r=n.setupContext=s.length>1?qP(n):null,i=fu(n),o=hu(s,n,0,[n.props,r]),a=m_(o);if(Zr(),i(),(a||n.sp)&&!bc(n)&&Z_(n),a){if(o.then(py,py),e)return o.then(l=>{gy(n,l)}).catch(l=>{Th(l,n,0)});n.asyncDep=o}else gy(n,o)}else C1(n)}function gy(n,e,t){Ye(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Rt(e)&&(n.setupState=U_(e)),C1(n)}function C1(n,e,t){const s=n.type;n.render||(n.render=s.render||vr);{const r=fu(n);Xr();try{dP(n)}finally{Zr(),r()}}}const KP={get(n,e){return Jn(n,"get",""),n[e]}};function qP(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,KP),slots:n.slots,emit:n.emit,expose:e}}function kh(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(U_(LS(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in Ic)return Ic[t](n)},has(e,t){return t in e||t in Ic}})):n.proxy}function JP(n,e=!0){return Ye(n)?n.displayName||n.name:n.name||e&&n.__name}function YP(n){return Ye(n)&&"__vccOpts"in n}const pe=(n,e)=>VS(n,e,$c);function rm(n,e,t){try{Fd(-1);const s=arguments.length;return s===2?Rt(e)&&!$e(e)?Ud(e)?ze(n,null,[e]):ze(n,e):ze(n,null,e):(s>3?t=Array.prototype.slice.call(arguments,2):s===3&&Ud(t)&&(t=[t]),ze(n,e,t))}finally{Fd(1)}}const XP="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Up;const my=typeof window<"u"&&window.trustedTypes;if(my)try{Up=my.createPolicy("vue",{createHTML:n=>n})}catch{}const T1=Up?n=>Up.createHTML(n):n=>n,ZP="http://www.w3.org/2000/svg",eR="http://www.w3.org/1998/Math/MathML",Dr=typeof document<"u"?document:null,vy=Dr&&Dr.createElement("template"),tR={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,s)=>{const r=e==="svg"?Dr.createElementNS(ZP,n):e==="mathml"?Dr.createElementNS(eR,n):t?Dr.createElement(n,{is:t}):Dr.createElement(n);return n==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:n=>Dr.createTextNode(n),createComment:n=>Dr.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Dr.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,s,r,i){const o=t?t.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===i||!(r=r.nextSibling)););else{vy.innerHTML=T1(s==="svg"?`<svg>${n}</svg>`:s==="mathml"?`<math>${n}</math>`:n);const a=vy.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},vi="transition",ic="animation",Hc=Symbol("_vtc"),S1={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},nR=On({},W_,S1),sR=n=>(n.displayName="Transition",n.props=nR,n),rR=sR((n,{slots:e})=>rm(qS,iR(n),e)),fo=(n,e=[])=>{$e(n)?n.forEach(t=>t(...e)):n&&n(...e)},yy=n=>n?$e(n)?n.some(e=>e.length>1):n.length>1:!1;function iR(n){const e={};for(const D in n)D in S1||(e[D]=n[D]);if(n.css===!1)return e;const{name:t="v",type:s,duration:r,enterFromClass:i=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:d=a,leaveFromClass:f=`${t}-leave-from`,leaveActiveClass:p=`${t}-leave-active`,leaveToClass:m=`${t}-leave-to`}=n,w=oR(r),y=w&&w[0],A=w&&w[1],{onBeforeEnter:_,onEnter:C,onEnterCancelled:S,onLeave:B,onLeaveCancelled:V,onBeforeAppear:j=_,onAppear:x=C,onAppearCancelled:I=S}=e,P=(D,k,ke,ie)=>{D._enterCancelled=ie,po(D,k?d:a),po(D,k?c:o),ke&&ke()},T=(D,k)=>{D._isLeaving=!1,po(D,f),po(D,m),po(D,p),k&&k()},b=D=>(k,ke)=>{const ie=D?x:C,G=()=>P(k,D,ke);fo(ie,[k,G]),Ay(()=>{po(k,D?l:i),kr(k,D?d:a),yy(ie)||wy(k,s,y,G)})};return On(e,{onBeforeEnter(D){fo(_,[D]),kr(D,i),kr(D,o)},onBeforeAppear(D){fo(j,[D]),kr(D,l),kr(D,c)},onEnter:b(!1),onAppear:b(!0),onLeave(D,k){D._isLeaving=!0;const ke=()=>T(D,k);kr(D,f),D._enterCancelled?(kr(D,p),by(D)):(by(D),kr(D,p)),Ay(()=>{D._isLeaving&&(po(D,f),kr(D,m),yy(B)||wy(D,s,A,ke))}),fo(B,[D,ke])},onEnterCancelled(D){P(D,!1,void 0,!0),fo(S,[D])},onAppearCancelled(D){P(D,!0,void 0,!0),fo(I,[D])},onLeaveCancelled(D){T(D),fo(V,[D])}})}function oR(n){if(n==null)return null;if(Rt(n))return[Ff(n.enter),Ff(n.leave)];{const e=Ff(n);return[e,e]}}function Ff(n){return aS(n)}function kr(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[Hc]||(n[Hc]=new Set)).add(e)}function po(n,e){e.split(/\s+/).forEach(s=>s&&n.classList.remove(s));const t=n[Hc];t&&(t.delete(e),t.size||(n[Hc]=void 0))}function Ay(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let aR=0;function wy(n,e,t,s){const r=n._endId=++aR,i=()=>{r===n._endId&&s()};if(t!=null)return setTimeout(i,t);const{type:o,timeout:a,propCount:l}=lR(n,e);if(!o)return s();const c=o+"end";let d=0;const f=()=>{n.removeEventListener(c,p),i()},p=m=>{m.target===n&&++d>=l&&f()};setTimeout(()=>{d<l&&f()},a+1),n.addEventListener(c,p)}function lR(n,e){const t=window.getComputedStyle(n),s=w=>(t[w]||"").split(", "),r=s(`${vi}Delay`),i=s(`${vi}Duration`),o=_y(r,i),a=s(`${ic}Delay`),l=s(`${ic}Duration`),c=_y(a,l);let d=null,f=0,p=0;e===vi?o>0&&(d=vi,f=o,p=i.length):e===ic?c>0&&(d=ic,f=c,p=l.length):(f=Math.max(o,c),d=f>0?o>c?vi:ic:null,p=d?d===vi?i.length:l.length:0);const m=d===vi&&/\b(?:transform|all)(?:,|$)/.test(s(`${vi}Property`).toString());return{type:d,timeout:f,propCount:p,hasTransform:m}}function _y(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,s)=>Ey(t)+Ey(n[s])))}function Ey(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function by(n){return(n?n.ownerDocument:document).body.offsetHeight}function cR(n,e,t){const s=n[Hc];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const $d=Symbol("_vod"),P1=Symbol("_vsh"),R1={name:"show",beforeMount(n,{value:e},{transition:t}){n[$d]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):oc(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:s}){!e!=!t&&(s?e?(s.beforeEnter(n),oc(n,!0),s.enter(n)):s.leave(n,()=>{oc(n,!1)}):oc(n,e))},beforeUnmount(n,{value:e}){oc(n,e)}};function oc(n,e){n.style.display=e?n[$d]:"none",n[P1]=!e}const uR=Symbol(""),dR=/(?:^|;)\s*display\s*:/;function hR(n,e,t){const s=n.style,r=fn(t);let i=!1;if(t&&!r){if(e)if(fn(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&gd(s,a,"")}else for(const o in e)t[o]==null&&gd(s,o,"");for(const o in t)o==="display"&&(i=!0),gd(s,o,t[o])}else if(r){if(e!==t){const o=s[uR];o&&(t+=";"+o),s.cssText=t,i=dR.test(t)}}else e&&n.removeAttribute("style");$d in n&&(n[$d]=i?s.display:"",n[P1]&&(s.display="none"))}const Iy=/\s*!important$/;function gd(n,e,t){if($e(t))t.forEach(s=>gd(n,e,s));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const s=fR(n,e);Iy.test(t)?n.setProperty(to(s),t.replace(Iy,""),"important"):n[s]=t}}const Cy=["Webkit","Moz","ms"],Uf={};function fR(n,e){const t=Uf[e];if(t)return t;let s=Hs(e);if(s!=="filter"&&s in n)return Uf[e]=s;s=bh(s);for(let r=0;r<Cy.length;r++){const i=Cy[r]+s;if(i in n)return Uf[e]=i}return e}const Ty="http://www.w3.org/1999/xlink";function Sy(n,e,t,s,r,i=fS(e)){s&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(Ty,e.slice(6,e.length)):n.setAttributeNS(Ty,e,t):t==null||i&&!w_(t)?n.removeAttribute(e):n.setAttribute(e,i?"":Cr(t)?String(t):t)}function Py(n,e,t,s,r){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?T1(t):t);return}const i=n.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=w_(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(r||e)}function Ur(n,e,t,s){n.addEventListener(e,t,s)}function pR(n,e,t,s){n.removeEventListener(e,t,s)}const Ry=Symbol("_vei");function gR(n,e,t,s,r=null){const i=n[Ry]||(n[Ry]={}),o=i[e];if(s&&o)o.value=s;else{const[a,l]=mR(e);if(s){const c=i[e]=AR(s,r);Ur(n,a,c,l)}else o&&(pR(n,a,o,l),i[e]=void 0)}}const xy=/(?:Once|Passive|Capture)$/;function mR(n){let e;if(xy.test(n)){e={};let s;for(;s=n.match(xy);)n=n.slice(0,n.length-s[0].length),e[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):to(n.slice(2)),e]}let Vf=0;const vR=Promise.resolve(),yR=()=>Vf||(vR.then(()=>Vf=0),Vf=Date.now());function AR(n,e){const t=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=t.attached)return;er(wR(s,t.value),e,5,[s])};return t.value=n,t.attached=yR(),t}function wR(n,e){if($e(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const ky=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,_R=(n,e,t,s,r,i)=>{const o=r==="svg";e==="class"?cR(n,s,o):e==="style"?hR(n,t,s):_h(e)?Hg(e)||gR(n,e,t,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):ER(n,e,s,o))?(Py(n,e,s),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Sy(n,e,s,o,i,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!fn(s))?Py(n,Hs(e),s,i,e):(e==="true-value"?n._trueValue=s:e==="false-value"&&(n._falseValue=s),Sy(n,e,s,o))};function ER(n,e,t,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in n&&ky(e)&&Ye(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=n.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return ky(e)&&fn(t)?!1:e in n}const ji=n=>{const e=n.props["onUpdate:modelValue"]||!1;return $e(e)?t=>dd(e,t):e};function bR(n){n.target.composing=!0}function Ny(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Vs=Symbol("_assign"),ps={created(n,{modifiers:{lazy:e,trim:t,number:s}},r){n[Vs]=ji(r);const i=s||r.props&&r.props.type==="number";Ur(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),i&&(a=kd(a)),n[Vs](a)}),t&&Ur(n,"change",()=>{n.value=n.value.trim()}),e||(Ur(n,"compositionstart",bR),Ur(n,"compositionend",Ny),Ur(n,"change",Ny))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:s,trim:r,number:i}},o){if(n[Vs]=ji(o),n.composing)return;const a=(i||n.type==="number")&&!/^0\d/.test(n.value)?kd(n.value):n.value,l=e??"";a!==l&&(document.activeElement===n&&n.type!=="range"&&(s&&e===t||r&&n.value.trim()===l)||(n.value=l))}},IR={deep:!0,created(n,e,t){n[Vs]=ji(t),Ur(n,"change",()=>{const s=n._modelValue,r=Ba(n),i=n.checked,o=n[Vs];if($e(s)){const a=jg(s,r),l=a!==-1;if(i&&!l)o(s.concat(r));else if(!i&&l){const c=[...s];c.splice(a,1),o(c)}}else if(tl(s)){const a=new Set(s);i?a.add(r):a.delete(r),o(a)}else o(x1(n,i))})},mounted:Dy,beforeUpdate(n,e,t){n[Vs]=ji(t),Dy(n,e,t)}};function Dy(n,{value:e,oldValue:t},s){n._modelValue=e;let r;if($e(e))r=jg(e,s.props.value)>-1;else if(tl(e))r=e.has(s.props.value);else{if(e===t)return;r=Fo(e,x1(n,!0))}n.checked!==r&&(n.checked=r)}const CR={created(n,{value:e},t){n.checked=Fo(e,t.props.value),n[Vs]=ji(t),Ur(n,"change",()=>{n[Vs](Ba(n))})},beforeUpdate(n,{value:e,oldValue:t},s){n[Vs]=ji(s),e!==t&&(n.checked=Fo(e,s.props.value))}},Ni={deep:!0,created(n,{value:e,modifiers:{number:t}},s){const r=tl(e);Ur(n,"change",()=>{const i=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>t?kd(Ba(o)):Ba(o));n[Vs](n.multiple?r?new Set(i):i:i[0]),n._assigning=!0,Zg(()=>{n._assigning=!1})}),n[Vs]=ji(s)},mounted(n,{value:e}){Oy(n,e)},beforeUpdate(n,e,t){n[Vs]=ji(t)},updated(n,{value:e}){n._assigning||Oy(n,e)}};function Oy(n,e){const t=n.multiple,s=$e(e);if(!(t&&!s&&!tl(e))){for(let r=0,i=n.options.length;r<i;r++){const o=n.options[r],a=Ba(o);if(t)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=jg(e,a)>-1}else o.selected=e.has(a);else if(Fo(Ba(o),e)){n.selectedIndex!==r&&(n.selectedIndex=r);return}}!t&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function Ba(n){return"_value"in n?n._value:n.value}function x1(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const TR={created(n,e,t){Wu(n,e,t,null,"created")},mounted(n,e,t){Wu(n,e,t,null,"mounted")},beforeUpdate(n,e,t,s){Wu(n,e,t,s,"beforeUpdate")},updated(n,e,t,s){Wu(n,e,t,s,"updated")}};function SR(n,e){switch(n){case"SELECT":return Ni;case"TEXTAREA":return ps;default:switch(e){case"checkbox":return IR;case"radio":return CR;default:return ps}}}function Wu(n,e,t,s,r){const o=SR(n.tagName,t.props&&t.props.type)[r];o&&o(n,e,t,s)}const PR=["ctrl","shift","alt","meta"],RR={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>PR.some(t=>n[`${t}Key`]&&!e.includes(t))},xn=(n,e)=>{const t=n._withMods||(n._withMods={}),s=e.join(".");return t[s]||(t[s]=((r,...i)=>{for(let o=0;o<e.length;o++){const a=RR[e[o]];if(a&&a(r,e))return}return n(r,...i)}))},xR={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},k1=(n,e)=>{const t=n._withKeys||(n._withKeys={}),s=e.join(".");return t[s]||(t[s]=(r=>{if(!("key"in r))return;const i=to(r.key);if(e.some(o=>o===i||xR[o]===i))return n(r)}))},kR=On({patchProp:_R},tR);let Ly;function NR(){return Ly||(Ly=IP(kR))}const DR=((...n)=>{const e=NR().createApp(...n),{mount:t}=e;return e.mount=s=>{const r=LR(s);if(!r)return;const i=e._component;!Ye(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=t(r,!1,OR(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e});function OR(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function LR(n){return fn(n)?document.querySelector(n):n}/*!
 * vue-router v4.6.0
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const ua=typeof document<"u";function N1(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function BR(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&N1(n.default)}const _t=Object.assign;function $f(n,e){const t={};for(const s in e){const r=e[s];t[s]=tr(r)?r.map(n):n(r)}return t}const Tc=()=>{},tr=Array.isArray;function By(n,e){const t={};for(const s in n)t[s]=s in e?e[s]:n[s];return t}const D1=/#/g,MR=/&/g,FR=/\//g,UR=/=/g,VR=/\?/g,O1=/\+/g,$R=/%5B/g,HR=/%5D/g,L1=/%5E/g,GR=/%60/g,B1=/%7B/g,QR=/%7C/g,M1=/%7D/g,jR=/%20/g;function im(n){return n==null?"":encodeURI(""+n).replace(QR,"|").replace($R,"[").replace(HR,"]")}function zR(n){return im(n).replace(B1,"{").replace(M1,"}").replace(L1,"^")}function Vp(n){return im(n).replace(O1,"%2B").replace(jR,"+").replace(D1,"%23").replace(MR,"%26").replace(GR,"`").replace(B1,"{").replace(M1,"}").replace(L1,"^")}function WR(n){return Vp(n).replace(UR,"%3D")}function KR(n){return im(n).replace(D1,"%23").replace(VR,"%3F")}function qR(n){return KR(n).replace(FR,"%2F")}function Gc(n){if(n==null)return null;try{return decodeURIComponent(""+n)}catch{}return""+n}const JR=/\/$/,YR=n=>n.replace(JR,"");function Hf(n,e,t="/"){let s,r={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(s=e.slice(0,l),i=e.slice(l,a>0?a:e.length),r=n(i)),a>=0&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=tx(s??e,t),{fullPath:s+i+o,path:s,query:r,hash:Gc(o)}}function XR(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function My(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function ZR(n,e,t){const s=e.matched.length-1,r=t.matched.length-1;return s>-1&&s===r&&Ma(e.matched[s],t.matched[r])&&F1(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function Ma(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function F1(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!ex(n[t],e[t]))return!1;return!0}function ex(n,e){return tr(n)?Fy(n,e):tr(e)?Fy(e,n):n===e}function Fy(n,e){return tr(e)?n.length===e.length&&n.every((t,s)=>t===e[s]):n.length===1&&n[0]===e}function tx(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),s=n.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=t.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return t.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const yi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let $p=(function(n){return n.pop="pop",n.push="push",n})({}),Gf=(function(n){return n.back="back",n.forward="forward",n.unknown="",n})({});function nx(n){if(!n)if(ua){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),YR(n)}const sx=/^[^#]+#/;function rx(n,e){return n.replace(sx,"#")+e}function ix(n,e){const t=document.documentElement.getBoundingClientRect(),s=n.getBoundingClientRect();return{behavior:e.behavior,left:s.left-t.left-(e.left||0),top:s.top-t.top-(e.top||0)}}const Nh=()=>({left:window.scrollX,top:window.scrollY});function ox(n){let e;if("el"in n){const t=n.el,s=typeof t=="string"&&t.startsWith("#"),r=typeof t=="string"?s?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!r)return;e=ix(r,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Uy(n,e){return(history.state?history.state.position-e:-1)+n}const Hp=new Map;function ax(n,e){Hp.set(n,e)}function lx(n){const e=Hp.get(n);return Hp.delete(n),e}function cx(n){return typeof n=="string"||n&&typeof n=="object"}function U1(n){return typeof n=="string"||typeof n=="symbol"}let Zt=(function(n){return n[n.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",n[n.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",n[n.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",n[n.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",n[n.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",n})({});const V1=Symbol("");Zt.MATCHER_NOT_FOUND+"",Zt.NAVIGATION_GUARD_REDIRECT+"",Zt.NAVIGATION_ABORTED+"",Zt.NAVIGATION_CANCELLED+"",Zt.NAVIGATION_DUPLICATED+"";function Fa(n,e){return _t(new Error,{type:n,[V1]:!0},e)}function Nr(n,e){return n instanceof Error&&V1 in n&&(e==null||!!(n.type&e))}const ux=["params","query","hash"];function dx(n){if(typeof n=="string")return n;if(n.path!=null)return n.path;const e={};for(const t of ux)t in n&&(e[t]=n[t]);return JSON.stringify(e,null,2)}function hx(n){const e={};if(n===""||n==="?")return e;const t=(n[0]==="?"?n.slice(1):n).split("&");for(let s=0;s<t.length;++s){const r=t[s].replace(O1," "),i=r.indexOf("="),o=Gc(i<0?r:r.slice(0,i)),a=i<0?null:Gc(r.slice(i+1));if(o in e){let l=e[o];tr(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function Vy(n){let e="";for(let t in n){const s=n[t];if(t=WR(t),s==null){s!==void 0&&(e+=(e.length?"&":"")+t);continue}(tr(s)?s.map(r=>r&&Vp(r)):[s&&Vp(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+t,r!=null&&(e+="="+r))})}return e}function fx(n){const e={};for(const t in n){const s=n[t];s!==void 0&&(e[t]=tr(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const px=Symbol(""),$y=Symbol(""),Dh=Symbol(""),om=Symbol(""),Gp=Symbol("");function ac(){let n=[];function e(s){return n.push(s),()=>{const r=n.indexOf(s);r>-1&&n.splice(r,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function Si(n,e,t,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const c=p=>{p===!1?l(Fa(Zt.NAVIGATION_ABORTED,{from:t,to:e})):p instanceof Error?l(p):cx(p)?l(Fa(Zt.NAVIGATION_GUARD_REDIRECT,{from:e,to:p})):(o&&s.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),a())},d=i(()=>n.call(s&&s.instances[r],e,t,c));let f=Promise.resolve(d);n.length<3&&(f=f.then(c)),f.catch(p=>l(p))})}function Qf(n,e,t,s,r=i=>i()){const i=[];for(const o of n)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(N1(l)){const c=(l.__vccOpts||l)[e];c&&i.push(Si(c,t,s,o,a,r))}else{let c=l();i.push(()=>c.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=BR(d)?d.default:d;o.mods[a]=d,o.components[a]=f;const p=(f.__vccOpts||f)[e];return p&&Si(p,t,s,o,a,r)()}))}}return i}function gx(n,e){const t=[],s=[],r=[],i=Math.max(e.matched.length,n.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(n.matched.find(c=>Ma(c,a))?s.push(a):t.push(a));const l=n.matched[o];l&&(e.matched.find(c=>Ma(c,l))||r.push(l))}return[t,s,r]}/*!
 * vue-router v4.6.0
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let mx=()=>location.protocol+"//"+location.host;function $1(n,e){const{pathname:t,search:s,hash:r}=e,i=n.indexOf("#");if(i>-1){let o=r.includes(n.slice(i))?n.slice(i).length:1,a=r.slice(o);return a[0]!=="/"&&(a="/"+a),My(a,"")}return My(t,n)+s+r}function vx(n,e,t,s){let r=[],i=[],o=null;const a=({state:p})=>{const m=$1(n,location),w=t.value,y=e.value;let A=0;if(p){if(t.value=m,e.value=p,o&&o===w){o=null;return}A=y?p.position-y.position:0}else s(m);r.forEach(_=>{_(t.value,w,{delta:A,type:$p.pop,direction:A?A>0?Gf.forward:Gf.back:Gf.unknown})})};function l(){o=t.value}function c(p){r.push(p);const m=()=>{const w=r.indexOf(p);w>-1&&r.splice(w,1)};return i.push(m),m}function d(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(_t({},p.state,{scroll:Nh()}),"")}}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:l,listen:c,destroy:f}}function Hy(n,e,t,s=!1,r=!1){return{back:n,current:e,forward:t,replaced:s,position:window.history.length,scroll:r?Nh():null}}function yx(n){const{history:e,location:t}=window,s={value:$1(n,t)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,d){const f=n.indexOf("#"),p=f>-1?(t.host&&document.querySelector("base")?n:n.slice(f))+l:mx()+n+l;try{e[d?"replaceState":"pushState"](c,"",p),r.value=c}catch(m){console.error(m),t[d?"replace":"assign"](p)}}function o(l,c){i(l,_t({},e.state,Hy(r.value.back,l,r.value.forward,!0),c,{position:r.value.position}),!0),s.value=l}function a(l,c){const d=_t({},r.value,e.state,{forward:l,scroll:Nh()});i(d.current,d,!0),i(l,_t({},Hy(s.value,l,null),{position:d.position+1},c),!1),s.value=l}return{location:s,state:r,push:a,replace:o}}function Ax(n){n=nx(n);const e=yx(n),t=vx(n,e.state,e.location,e.replace);function s(i,o=!0){o||t.pauseListeners(),history.go(i)}const r=_t({location:"",base:n,go:s,createHref:rx.bind(null,n)},e,t);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function wx(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),Ax(n)}let Co=(function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.Group=2]="Group",n})({});var In=(function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.ParamRegExp=2]="ParamRegExp",n[n.ParamRegExpEnd=3]="ParamRegExpEnd",n[n.EscapeNext=4]="EscapeNext",n})(In||{});const _x={type:Co.Static,value:""},Ex=/[a-zA-Z0-9_]/;function bx(n){if(!n)return[[]];if(n==="/")return[[_x]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(m){throw new Error(`ERR (${t})/"${c}": ${m}`)}let t=In.Static,s=t;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,c="",d="";function f(){c&&(t===In.Static?i.push({type:Co.Static,value:c}):t===In.Param||t===In.ParamRegExp||t===In.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Co.Param,value:c,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function p(){c+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==In.ParamRegExp){s=t,t=In.EscapeNext;continue}switch(t){case In.Static:l==="/"?(c&&f(),o()):l===":"?(f(),t=In.Param):p();break;case In.EscapeNext:p(),t=s;break;case In.Param:l==="("?t=In.ParamRegExp:Ex.test(l)?p():(f(),t=In.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case In.ParamRegExp:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:t=In.ParamRegExpEnd:d+=l;break;case In.ParamRegExpEnd:f(),t=In.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:e("Unknown state");break}}return t===In.ParamRegExp&&e(`Unfinished custom RegExp for param "${c}"`),f(),o(),r}const Gy="[^/]+?",Ix={sensitive:!1,strict:!1,start:!0,end:!0};var rs=(function(n){return n[n._multiplier=10]="_multiplier",n[n.Root=90]="Root",n[n.Segment=40]="Segment",n[n.SubSegment=30]="SubSegment",n[n.Static=40]="Static",n[n.Dynamic=20]="Dynamic",n[n.BonusCustomRegExp=10]="BonusCustomRegExp",n[n.BonusWildcard=-50]="BonusWildcard",n[n.BonusRepeatable=-20]="BonusRepeatable",n[n.BonusOptional=-8]="BonusOptional",n[n.BonusStrict=.7000000000000001]="BonusStrict",n[n.BonusCaseSensitive=.25]="BonusCaseSensitive",n})(rs||{});const Cx=/[.+*?^${}()[\]/\\]/g;function Tx(n,e){const t=_t({},Ix,e),s=[];let r=t.start?"^":"";const i=[];for(const c of n){const d=c.length?[]:[rs.Root];t.strict&&!c.length&&(r+="/");for(let f=0;f<c.length;f++){const p=c[f];let m=rs.Segment+(t.sensitive?rs.BonusCaseSensitive:0);if(p.type===Co.Static)f||(r+="/"),r+=p.value.replace(Cx,"\\$&"),m+=rs.Static;else if(p.type===Co.Param){const{value:w,repeatable:y,optional:A,regexp:_}=p;i.push({name:w,repeatable:y,optional:A});const C=_||Gy;if(C!==Gy){m+=rs.BonusCustomRegExp;try{`${C}`}catch(B){throw new Error(`Invalid custom RegExp for param "${w}" (${C}): `+B.message)}}let S=y?`((?:${C})(?:/(?:${C}))*)`:`(${C})`;f||(S=A&&c.length<2?`(?:/${S})`:"/"+S),A&&(S+="?"),r+=S,m+=rs.Dynamic,A&&(m+=rs.BonusOptional),y&&(m+=rs.BonusRepeatable),C===".*"&&(m+=rs.BonusWildcard)}d.push(m)}s.push(d)}if(t.strict&&t.end){const c=s.length-1;s[c][s[c].length-1]+=rs.BonusStrict}t.strict||(r+="/?"),t.end?r+="$":t.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,t.sensitive?"":"i");function a(c){const d=c.match(o),f={};if(!d)return null;for(let p=1;p<d.length;p++){const m=d[p]||"",w=i[p-1];f[w.name]=m&&w.repeatable?m.split("/"):m}return f}function l(c){let d="",f=!1;for(const p of n){(!f||!d.endsWith("/"))&&(d+="/"),f=!1;for(const m of p)if(m.type===Co.Static)d+=m.value;else if(m.type===Co.Param){const{value:w,repeatable:y,optional:A}=m,_=w in c?c[w]:"";if(tr(_)&&!y)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const C=tr(_)?_.join("/"):_;if(!C)if(A)p.length<2&&(d.endsWith("/")?d=d.slice(0,-1):f=!0);else throw new Error(`Missing required param "${w}"`);d+=C}}return d||"/"}return{re:o,score:s,keys:i,parse:a,stringify:l}}function Sx(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=e[t]-n[t];if(s)return s;t++}return n.length<e.length?n.length===1&&n[0]===rs.Static+rs.Segment?-1:1:n.length>e.length?e.length===1&&e[0]===rs.Static+rs.Segment?1:-1:0}function H1(n,e){let t=0;const s=n.score,r=e.score;for(;t<s.length&&t<r.length;){const i=Sx(s[t],r[t]);if(i)return i;t++}if(Math.abs(r.length-s.length)===1){if(Qy(s))return 1;if(Qy(r))return-1}return r.length-s.length}function Qy(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const Px={strict:!1,end:!0,sensitive:!1};function Rx(n,e,t){const s=Tx(bx(n.path),t),r=_t(s,{record:n,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function xx(n,e){const t=[],s=new Map;e=By(Px,e);function r(f){return s.get(f)}function i(f,p,m){const w=!m,y=zy(f);y.aliasOf=m&&m.record;const A=By(e,f),_=[y];if("alias"in f){const B=typeof f.alias=="string"?[f.alias]:f.alias;for(const V of B)_.push(zy(_t({},y,{components:m?m.record.components:y.components,path:V,aliasOf:m?m.record:y})))}let C,S;for(const B of _){const{path:V}=B;if(p&&V[0]!=="/"){const j=p.record.path,x=j[j.length-1]==="/"?"":"/";B.path=p.record.path+(V&&x+V)}if(C=Rx(B,p,A),m?m.alias.push(C):(S=S||C,S!==C&&S.alias.push(C),w&&f.name&&!Wy(C)&&o(f.name)),G1(C)&&l(C),y.children){const j=y.children;for(let x=0;x<j.length;x++)i(j[x],C,m&&m.children[x])}m=m||C}return S?()=>{o(S)}:Tc}function o(f){if(U1(f)){const p=s.get(f);p&&(s.delete(f),t.splice(t.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=t.indexOf(f);p>-1&&(t.splice(p,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return t}function l(f){const p=Dx(f,t);t.splice(p,0,f),f.record.name&&!Wy(f)&&s.set(f.record.name,f)}function c(f,p){let m,w={},y,A;if("name"in f&&f.name){if(m=s.get(f.name),!m)throw Fa(Zt.MATCHER_NOT_FOUND,{location:f});A=m.record.name,w=_t(jy(p.params,m.keys.filter(S=>!S.optional).concat(m.parent?m.parent.keys.filter(S=>S.optional):[]).map(S=>S.name)),f.params&&jy(f.params,m.keys.map(S=>S.name))),y=m.stringify(w)}else if(f.path!=null)y=f.path,m=t.find(S=>S.re.test(y)),m&&(w=m.parse(y),A=m.record.name);else{if(m=p.name?s.get(p.name):t.find(S=>S.re.test(p.path)),!m)throw Fa(Zt.MATCHER_NOT_FOUND,{location:f,currentLocation:p});A=m.record.name,w=_t({},p.params,f.params),y=m.stringify(w)}const _=[];let C=m;for(;C;)_.unshift(C.record),C=C.parent;return{name:A,path:y,params:w,matched:_,meta:Nx(_)}}n.forEach(f=>i(f));function d(){t.length=0,s.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:d,getRoutes:a,getRecordMatcher:r}}function jy(n,e){const t={};for(const s of e)s in n&&(t[s]=n[s]);return t}function zy(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:kx(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function kx(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const s in n.components)e[s]=typeof t=="object"?t[s]:t;return e}function Wy(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function Nx(n){return n.reduce((e,t)=>_t(e,t.meta),{})}function Dx(n,e){let t=0,s=e.length;for(;t!==s;){const i=t+s>>1;H1(n,e[i])<0?s=i:t=i+1}const r=Ox(n);return r&&(s=e.lastIndexOf(r,s-1)),s}function Ox(n){let e=n;for(;e=e.parent;)if(G1(e)&&H1(n,e)===0)return e}function G1({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function Ky(n){const e=Zs(Dh),t=Zs(om),s=pe(()=>{const l=De(n.to);return e.resolve(l)}),r=pe(()=>{const{matched:l}=s.value,{length:c}=l,d=l[c-1],f=t.matched;if(!d||!f.length)return-1;const p=f.findIndex(Ma.bind(null,d));if(p>-1)return p;const m=qy(l[c-2]);return c>1&&qy(d)===m&&f[f.length-1].path!==m?f.findIndex(Ma.bind(null,l[c-2])):p}),i=pe(()=>r.value>-1&&Ux(t.params,s.value.params)),o=pe(()=>r.value>-1&&r.value===t.matched.length-1&&F1(t.params,s.value.params));function a(l={}){if(Fx(l)){const c=e[De(n.replace)?"replace":"push"](De(n.to)).catch(Tc);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:pe(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function Lx(n){return n.length===1?n[0]:n}const Bx=X_({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Ky,setup(n,{slots:e}){const t=du(Ky(n)),{options:s}=Zs(Dh),r=pe(()=>({[Jy(n.activeClass,s.linkActiveClass,"router-link-active")]:t.isActive,[Jy(n.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const i=e.default&&Lx(e.default(t));return n.custom?i:rm("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:r.value},i)}}}),Mx=Bx;function Fx(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function Ux(n,e){for(const t in e){const s=e[t],r=n[t];if(typeof s=="string"){if(s!==r)return!1}else if(!tr(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function qy(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const Jy=(n,e,t)=>n??e??t,Vx=X_({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const s=Zs(Gp),r=pe(()=>n.route||s.value),i=Zs($y,0),o=pe(()=>{let c=De(i);const{matched:d}=r.value;let f;for(;(f=d[c])&&!f.components;)c++;return c}),a=pe(()=>r.value.matched[o.value]);hd($y,pe(()=>o.value+1)),hd(px,a),hd(Gp,r);const l=U();return Kr(()=>[l.value,a.value,n.name],([c,d,f],[p,m,w])=>{d&&(d.instances[f]=c,m&&m!==d&&c&&c===p&&(d.leaveGuards.size||(d.leaveGuards=m.leaveGuards),d.updateGuards.size||(d.updateGuards=m.updateGuards))),c&&d&&(!m||!Ma(d,m)||!p)&&(d.enterCallbacks[f]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=r.value,d=n.name,f=a.value,p=f&&f.components[d];if(!p)return Yy(t.default,{Component:p,route:c});const m=f.props[d],w=m?m===!0?c.params:typeof m=="function"?m(c):m:null,A=rm(p,_t({},w,e,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(f.instances[d]=null)},ref:l}));return Yy(t.default,{Component:A,route:c})||A}}});function Yy(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const $x=Vx;function Hx(n){const e=xx(n.routes,n),t=n.parseQuery||hx,s=n.stringifyQuery||Vy,r=n.history,i=ac(),o=ac(),a=ac(),l=BS(yi);let c=yi;ua&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=$f.bind(null,Y=>""+Y),f=$f.bind(null,qR),p=$f.bind(null,Gc);function m(Y,ge){let fe,we;return U1(Y)?(fe=e.getRecordMatcher(Y),we=ge):we=Y,e.addRoute(we,fe)}function w(Y){const ge=e.getRecordMatcher(Y);ge&&e.removeRoute(ge)}function y(){return e.getRoutes().map(Y=>Y.record)}function A(Y){return!!e.getRecordMatcher(Y)}function _(Y,ge){if(ge=_t({},ge||l.value),typeof Y=="string"){const Q=Hf(t,Y,ge.path),te=e.resolve({path:Q.path},ge),K=r.createHref(Q.fullPath);return _t(Q,te,{params:p(te.params),hash:Gc(Q.hash),redirectedFrom:void 0,href:K})}let fe;if(Y.path!=null)fe=_t({},Y,{path:Hf(t,Y.path,ge.path).path});else{const Q=_t({},Y.params);for(const te in Q)Q[te]==null&&delete Q[te];fe=_t({},Y,{params:f(Q)}),ge.params=f(ge.params)}const we=e.resolve(fe,ge),Qe=Y.hash||"";we.params=d(p(we.params));const N=XR(s,_t({},Y,{hash:zR(Qe),path:we.path})),O=r.createHref(N);return _t({fullPath:N,hash:Qe,query:s===Vy?fx(Y.query):Y.query||{}},we,{redirectedFrom:void 0,href:O})}function C(Y){return typeof Y=="string"?Hf(t,Y,l.value.path):_t({},Y)}function S(Y,ge){if(c!==Y)return Fa(Zt.NAVIGATION_CANCELLED,{from:ge,to:Y})}function B(Y){return x(Y)}function V(Y){return B(_t(C(Y),{replace:!0}))}function j(Y,ge){const fe=Y.matched[Y.matched.length-1];if(fe&&fe.redirect){const{redirect:we}=fe;let Qe=typeof we=="function"?we(Y,ge):we;return typeof Qe=="string"&&(Qe=Qe.includes("?")||Qe.includes("#")?Qe=C(Qe):{path:Qe},Qe.params={}),_t({query:Y.query,hash:Y.hash,params:Qe.path!=null?{}:Y.params},Qe)}}function x(Y,ge){const fe=c=_(Y),we=l.value,Qe=Y.state,N=Y.force,O=Y.replace===!0,Q=j(fe,we);if(Q)return x(_t(C(Q),{state:typeof Q=="object"?_t({},Qe,Q.state):Qe,force:N,replace:O}),ge||fe);const te=fe;te.redirectedFrom=ge;let K;return!N&&ZR(s,we,fe)&&(K=Fa(Zt.NAVIGATION_DUPLICATED,{to:te,from:we}),Ne(we,we,!0,!1)),(K?Promise.resolve(K):T(te,we)).catch(F=>Nr(F)?Nr(F,Zt.NAVIGATION_GUARD_REDIRECT)?F:Ve(F):Z(F,te,we)).then(F=>{if(F){if(Nr(F,Zt.NAVIGATION_GUARD_REDIRECT))return x(_t({replace:O},C(F.to),{state:typeof F.to=="object"?_t({},Qe,F.to.state):Qe,force:N}),ge||te)}else F=D(te,we,!0,O,Qe);return b(te,we,F),F})}function I(Y,ge){const fe=S(Y,ge);return fe?Promise.reject(fe):Promise.resolve()}function P(Y){const ge=ue.values().next().value;return ge&&typeof ge.runWithContext=="function"?ge.runWithContext(Y):Y()}function T(Y,ge){let fe;const[we,Qe,N]=gx(Y,ge);fe=Qf(we.reverse(),"beforeRouteLeave",Y,ge);for(const Q of we)Q.leaveGuards.forEach(te=>{fe.push(Si(te,Y,ge))});const O=I.bind(null,Y,ge);return fe.push(O),tt(fe).then(()=>{fe=[];for(const Q of i.list())fe.push(Si(Q,Y,ge));return fe.push(O),tt(fe)}).then(()=>{fe=Qf(Qe,"beforeRouteUpdate",Y,ge);for(const Q of Qe)Q.updateGuards.forEach(te=>{fe.push(Si(te,Y,ge))});return fe.push(O),tt(fe)}).then(()=>{fe=[];for(const Q of N)if(Q.beforeEnter)if(tr(Q.beforeEnter))for(const te of Q.beforeEnter)fe.push(Si(te,Y,ge));else fe.push(Si(Q.beforeEnter,Y,ge));return fe.push(O),tt(fe)}).then(()=>(Y.matched.forEach(Q=>Q.enterCallbacks={}),fe=Qf(N,"beforeRouteEnter",Y,ge,P),fe.push(O),tt(fe))).then(()=>{fe=[];for(const Q of o.list())fe.push(Si(Q,Y,ge));return fe.push(O),tt(fe)}).catch(Q=>Nr(Q,Zt.NAVIGATION_CANCELLED)?Q:Promise.reject(Q))}function b(Y,ge,fe){a.list().forEach(we=>P(()=>we(Y,ge,fe)))}function D(Y,ge,fe,we,Qe){const N=S(Y,ge);if(N)return N;const O=ge===yi,Q=ua?history.state:{};fe&&(we||O?r.replace(Y.fullPath,_t({scroll:O&&Q&&Q.scroll},Qe)):r.push(Y.fullPath,Qe)),l.value=Y,Ne(Y,ge,fe,O),Ve()}let k;function ke(){k||(k=r.listen((Y,ge,fe)=>{if(!Pe.listening)return;const we=_(Y),Qe=j(we,Pe.currentRoute.value);if(Qe){x(_t(Qe,{replace:!0,force:!0}),we).catch(Tc);return}c=we;const N=l.value;ua&&ax(Uy(N.fullPath,fe.delta),Nh()),T(we,N).catch(O=>Nr(O,Zt.NAVIGATION_ABORTED|Zt.NAVIGATION_CANCELLED)?O:Nr(O,Zt.NAVIGATION_GUARD_REDIRECT)?(x(_t(C(O.to),{force:!0}),we).then(Q=>{Nr(Q,Zt.NAVIGATION_ABORTED|Zt.NAVIGATION_DUPLICATED)&&!fe.delta&&fe.type===$p.pop&&r.go(-1,!1)}).catch(Tc),Promise.reject()):(fe.delta&&r.go(-fe.delta,!1),Z(O,we,N))).then(O=>{O=O||D(we,N,!1),O&&(fe.delta&&!Nr(O,Zt.NAVIGATION_CANCELLED)?r.go(-fe.delta,!1):fe.type===$p.pop&&Nr(O,Zt.NAVIGATION_ABORTED|Zt.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),b(we,N,O)}).catch(Tc)}))}let ie=ac(),G=ac(),$;function Z(Y,ge,fe){Ve(Y);const we=G.list();return we.length?we.forEach(Qe=>Qe(Y,ge,fe)):console.error(Y),Promise.reject(Y)}function me(){return $&&l.value!==yi?Promise.resolve():new Promise((Y,ge)=>{ie.add([Y,ge])})}function Ve(Y){return $||($=!Y,ke(),ie.list().forEach(([ge,fe])=>Y?fe(Y):ge()),ie.reset()),Y}function Ne(Y,ge,fe,we){const{scrollBehavior:Qe}=n;if(!ua||!Qe)return Promise.resolve();const N=!fe&&lx(Uy(Y.fullPath,0))||(we||!fe)&&history.state&&history.state.scroll||null;return Zg().then(()=>Qe(Y,ge,N)).then(O=>O&&ox(O)).catch(O=>Z(O,Y,ge))}const se=Y=>r.go(Y);let W;const ue=new Set,Pe={currentRoute:l,listening:!0,addRoute:m,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:A,getRoutes:y,resolve:_,options:n,push:B,replace:V,go:se,back:()=>se(-1),forward:()=>se(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:G.add,isReady:me,install(Y){Y.component("RouterLink",Mx),Y.component("RouterView",$x),Y.config.globalProperties.$router=Pe,Object.defineProperty(Y.config.globalProperties,"$route",{enumerable:!0,get:()=>De(l)}),ua&&!W&&l.value===yi&&(W=!0,B(r.location).catch(we=>{}));const ge={};for(const we in yi)Object.defineProperty(ge,we,{get:()=>l.value[we],enumerable:!0});Y.provide(Dh,Pe),Y.provide(om,M_(ge)),Y.provide(Gp,l);const fe=Y.unmount;ue.add(Y),Y.unmount=function(){ue.delete(Y),ue.size<1&&(c=yi,k&&k(),k=null,l.value=yi,W=!1,$=!1),fe()}}};function tt(Y){return Y.reduce((ge,fe)=>ge.then(()=>P(fe)),Promise.resolve())}return Pe}function Sn(){return Zs(Dh)}function Q1(n){return Zs(om)}const Gx="modulepreload",Qx=function(n){return"/tdl/"+n},Xy={},md=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){let l=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");r=l(t.map(c=>{if(c=Qx(c),c in Xy)return;Xy[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":Gx,d||(p.as="script"),p.crossOrigin="",p.href=c,a&&p.setAttribute("nonce",a),document.head.appendChild(p),d)return new Promise((m,w)=>{p.addEventListener("load",m),p.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},ei=()=>JSON.parse(localStorage.getItem("users")||"[]"),dt=()=>{const n=localStorage.getItem("currentUser");if(n)try{return JSON.parse(n)}catch(t){console.error("localStorage    :",t)}const e=sessionStorage.getItem("currentUser");if(e)try{return JSON.parse(e)}catch(t){console.error("sessionStorage    :",t)}return null},am=n=>ei().find(t=>t.id===n||t.walletAddress===n),j1=n=>{const e=ei(),t=am(n);if(t)return t;const r=(o=>{const a=o.toString().split("").reduce((f,p)=>(f<<5)-f+p.charCodeAt(0),0),l="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let c="",d=Math.abs(a);for(let f=0;f<6;f++)c+=l[d%l.length],d=Math.floor(d/l.length);return c})(n),i={id:n,walletAddress:n,loginType:"wallet",inviteCode:r,createdAt:new Date().toISOString(),referrals:[],gameData:{level:1,coins:0,totalCoin:0,catFragments:50,nftCount:0,miningLevel:1,huntingLevel:1,explorationLevel:1,productionLevel:1,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}};return e.push(i),localStorage.setItem("users",JSON.stringify(e)),i},Qc=async(n,e)=>{const t=dt(),s=ei(),r=s.findIndex(i=>i.id===n);return r!==-1?(s[r].gameData={...s[r].gameData,...e},localStorage.setItem("users",JSON.stringify(s)),t&&t.id===n&&(t.gameData={...t.gameData,...e},sessionStorage.setItem("currentUser",JSON.stringify(t))),!0):!1},z1=()=>{sessionStorage.removeItem("currentUser")},W1=()=>{const n=localStorage.getItem("appLanguage");return!n||n===""?(localStorage.setItem("appLanguage","English"),"English"):n},gs=()=>{const n=W1();return{ko:{home:"",game:"",exchange:"",quest:"",inventory:"",factory:"",mining:"",hunting:"",exploration:"",production:"",back:" ",settings:"",notification:"",login:"",signup:"",email:"",password:"",loginButton:"",signupButton:"",walletConnect:" ",createCat:" ",catFragments:" ",coin:"",point:"",energy:"",level:"",complete:"",confirm:"",cancel:"",close:"",success:"",error:"",loading:" ...",insufficient:"",required:"",optional:"",daily:"",weekly:"",monthly:"",quest:"",reward:"",receive:"",received:"",inProgress:" ",completed:"",buy:"",sell:"",shop:"",profile:"",attendance:"",nft:"NFT",inventory:"",factory:"",exchange:"",settings:"",logout:"",language:"",sound:"",vibration:"",totalPoints:" ",totalCoins:" ",createCatSuccess:"  !",newCatAdded:"   !",enterEmail:" ",enterPassword:" ",enterAllFields:"  ",loginError:"   ",invalidCredentials:"    ",walletNotInstalled:"MetaMask   ",installMetaMask:"MetaMask ?",walletConnectFailed:"  ",walletConnectError:"    ",insufficientCoins:" ",insufficientFragments:"  ",insufficientPoints:" ",insufficientEnergy:" ",purchaseSuccess:" !",purchaseFailed:" ",tradeSuccess:" !",tradeFailed:" ",createSuccess:" !",createFailed:" ",rewardReceived:" ",alreadyReceived:"  ",questNotCompleted:"  ",loginRequired:" ",copySuccess:"",saveSuccess:"",saveFailed:" ",common:"",rare:"",epic:"",legendary:"",stars:"",stats:"",exp:"",maxExp:" ",levelUp:"",levelUpCost:" ",select:"",selected:"",filter:"",sort:"",search:"",newest:"",oldest:"",byLevel:"",byStars:"",byRarity:"",byName:"",all:"",miningEfficiency:" ",huntingDamage:" ",explorationReward:" ",productionSpeed:" ",strength:"",health:"",intelligence:"",dexterity:"",courage:"",luck:"",earned:"",pointsEarned:"point !",fragmentsEarned:" ",fragmentsEarnedCount:" !",miningComplete:" !",huntingComplete:" !",explorationComplete:" !",productionComplete:" !",miningCatList:"  ",huntingCatList:"  ",explorationCatList:"  ",productionCatList:"  ",levelUp:"!",progress:"",miningProgress:" ",huntingProgress:" ",explorationProgress:" ",productionProgress:" ",miningSuccess:" !",oreFound:" !",moneyEarned:"!",digMore:" !",monsterKilled:" !",expEarned:" !",goldEarned:" !",newAreaFound:"  !",treasureFound:" !",adventureSuccess:" !",mysteriousDiscovery:" !",craftComplete:" !",itemCreated:" !",skillImproved:" !",perfectWork:" !",success:"!",good:"!",complete:"!",amazing:"!",selectCat:" ",removeCat:" ",ownedPoints:" ",ownedCoins:" ",exchangeRate:"",buyCoinAmount:"  ",sellCoinAmount:"  ",requiredPoints:" ",pointsToReceive:" ",buyButton:"",sellButton:"",exampleAmount:": 1",coinBuy:"Coin ",coinSell:"Coin ",pointUsed:" ",pointReceived:" ",inProgress:"",completed:"",receive:"",rewardReceived:"  !",earnedReward:" .",emptyInventory:"Inventory is empty",totalItems:"Total",items:"items",searchAndFilter:"Search & Filter",searchPlaceholder:"Search by NFT name or ID...",starRating:"Star Rating",levelFilter:"Level",rarityFilter:"Rarity",sortBy:"Sort By",stars:"Stars",levelHighToLow:"Level (High to Low)",starsHighToLow:"Stars (High to Low)",rarityHighToLow:"Rarity (High to Low)",nameOrder:"Name Order",reset:"Reset",apply:"Apply",stats:"Stats",imageId:"Image ID",createdAt:"Created At",levelUpButton:"Level Up",selectButton:"Select",doubleClickDetail:"Double-click for details",noNFTs:"No NFTs",createCatInFactory:"Create cats in the Factory!",selectedCharacter:"Selected Character",cat:"Cat",userSettings:" ",walletConnection:" ",connected:"",address:"",balance:"",depositFromWallet:" ",disconnect:" ",walletNotConnected:"  ",walletConnectDesc:"NFT    ",connecting:" ...",attendance:"",doAttendanceCheck:" ",selectDepositMethod:"  ",selectExchangeToDeposit:"  ",goToPhantomWallet:"  ",goToUpbitExchange:"  ",copyWalletAddressAndDeposit:"    ",copyWalletAddress:"  ",walletConnected:" !",disconnectWalletConfirm:"  ?",walletAddressCopied:"  !",copyFailed:" ",refreshBalance:" ",alreadyCheckedIn:"   !",checkInComplete:" !",wallet:"",energy100:" 100",energy500:" 500",energy1000:" 1000",energy2000:" 2000",energyRecover:"",energyRecovered:"",purchaseComplete:" !",currentEnergy:"",loginRequired:" .",insufficientPoints:" .",insufficientCoins:" .",purchaseFailed:" .  .",buy:"",back:" ",mining:"",miningLevel:" ",miningStart:" ",miningInProgress:" ...",ownedResources:" ",stone:"",iron:"",gold:"",diamond:"",hunting:"",playerInfo:" ",health:"",attack:"",exp:"",monsterSelection:" ",huntingStart:" ",huntingInProgress:" ...",exploration:"",explorationLevel:" ",explorationArea:" ",undiscovered:"",exploring:" ",explorationStart:" ",explorationInProgress:" ...",explorationRewards:" ",production:"",productionLevel:" ",materialInventory:" ",recipe:" ",productionStart:" ",productionInProgress:" ...",notification:"",markAllRead:" ",noNotifications:" .",attendance:"",attendanceCheck:"",day:"Day",attendanceComplete:" !",pointsEarned:" !",alreadyCheckedToday:"   !   .",alreadyChecked:"  .",nextOrderOnly:"   .",marketplace:"",inviteFriends:" ",inviteCode:" ",copyInviteCode:"  ",shareKakao:" ",inviteDescription:"   !",inviteReward:" ",inviteRewardDesc:" 1   100 ",newUserReward:"  : 50 ",totalInvites:" ",invites:"",codeCopied:"  !",shareSuccess:"  !",shareFailed:"  .",inviteStats:" ",shareLink:" ",copyLink:" ",linkCopied:" !",shareNative:"",myNFTs:" NFT",myListings:" ",onSale:" ",totalVolume:" ",itemsCount:"",noNFTsInWallet:"NFT ",allRarity:" ",allPrice:" ",under1000Coins:"1,000  ",midPriceRange:"1,000 - 5,000 ",over5000Coins:"5,000  ",oldest:"",priceLow:" ",priceHigh:" ",levelHigh:" ",starsHigh:"  ",price:"",buy:"",noNFTsOnSale:"  NFT ",myNFTsCount:" NFT",ownedCoins:" ",sell:"",noNFTsAvailableForSale:"  NFT ",mySalesList:"  ",salePrice:" ",cancelSale:" ",noNFTsOnSaleList:"  NFT ",confirmCancelSale:"  ?",enterValidPrice:"  .",loginRequired:" .",nftListedOnMarketplace:"NFT  !",saleCancelled:" .",insufficientCoinsForPurchase:" .",nftPurchased:"NFT !",coinsPaid:" ",sellNFT:"NFT ",starsRating:"",sellPriceLabel:"  ()",enterPrice:" ",currentOwnedCoins:"  ",cancel:"",registerSale:" ",buyNFT:"NFT ",insufficientCoinsWarning:" !",imageId:" ID",send:"",sendFeatureComingSoon:"   .",buyFeatureComingSoon:"   .",receive:"",receiveFeatureComingSoon:"   .",searchNFT:"",searchPlaceholderNFT:"NFT   ID ...",reset:"",apply:""},en:{home:"Home",game:"Game",exchange:"Exchange",quest:"Quest",inventory:"Inventory",factory:"Factory",mining:"Mining",hunting:"Hunting",exploration:"Exploration",production:"Production",back:" Back",settings:"Settings",notification:"Notification",login:"Log in",signup:"Sign Up",email:"Email",password:"Password",loginButton:"Log in",signupButton:"Sign Up",walletConnect:"Connect Wallet",createCat:"Create Cat",catFragments:"Cat Fragments",coin:"Coin",point:"Point",energy:"Energy",level:"Level",complete:"Complete",confirm:"Confirm",cancel:"Cancel",close:"Close",success:"Success",error:"Error",loading:"Loading...",insufficient:"Insufficient",required:"Required",optional:"Optional",daily:"Daily",weekly:"Weekly",monthly:"Monthly",quest:"Quest",reward:"Reward",receive:"Receive",received:"Received",inProgress:"In Progress",completed:"Completed",buy:"Buy",sell:"Sell",shop:"Shop",profile:"Profile",attendance:"Attendance",nft:"NFT",inventory:"Inventory",factory:"Factory",exchange:"Exchange",settings:"Settings",logout:"Logout",language:"Language",sound:"Sound",vibration:"Vibration",totalPoints:"Total Points",totalCoins:"Total Coins",createCatSuccess:"Cat Created Successfully!",newCatAdded:"A new cat has been added to your inventory!",enterEmail:"Please enter your email",enterPassword:"Please enter your password",enterAllFields:"Please enter all fields",loginError:"An error occurred during login",invalidCredentials:"Email or password is incorrect",walletNotInstalled:"MetaMask is not installed",installMetaMask:"Would you like to install MetaMask?",walletConnectFailed:"Failed to connect wallet",walletConnectError:"An error occurred while connecting wallet",insufficientCoins:"Insufficient coins",insufficientFragments:"Insufficient cat fragments",insufficientPoints:"Insufficient points",insufficientEnergy:"Insufficient energy",purchaseSuccess:"Purchase successful!",purchaseFailed:"Purchase failed",tradeSuccess:"Trade successful!",tradeFailed:"Trade failed",createSuccess:"Creation successful!",createFailed:"Creation failed",rewardReceived:"Reward received",alreadyReceived:"Reward already received",questNotCompleted:"Quest not completed",loginRequired:"Login required",copySuccess:"Copied successfully",saveSuccess:"Saved successfully",saveFailed:"Failed to save",common:"Common",rare:"Rare",epic:"Epic",legendary:"Legendary",stars:"Stars",stats:"Stats",exp:"EXP",maxExp:"Max EXP",levelUp:"Level Up",levelUpCost:"Level Up Cost",select:"Select",selected:"Selected",filter:"Filter",sort:"Sort",search:"Search",newest:"Newest",oldest:"Oldest",byLevel:"By Level",byStars:"By Stars",byRarity:"By Rarity",byName:"By Name",all:"All",miningEfficiency:"Mining Efficiency",huntingDamage:"Hunting Damage",explorationReward:"Exploration Reward",productionSpeed:"Production Speed",strength:"Strength",health:"Health",intelligence:"Intelligence",dexterity:"Dexterity",courage:"Courage",luck:"Luck",earned:"Earned",pointsEarned:"points earned!",fragmentsEarned:"Cat Fragments",fragmentsEarnedCount:"earned!",miningComplete:"Mining Complete!",huntingComplete:"Hunting Complete!",explorationComplete:"Exploration Complete!",productionComplete:"Production Complete!",miningCatList:"Mining Cats",huntingCatList:"Hunting Cats",explorationCatList:"Exploration Cats",productionCatList:"Production Cats",levelUp:"Level Up!",progress:"Progress",miningProgress:"Mining Progress",huntingProgress:"Hunting Progress",explorationProgress:"Exploration Progress",productionProgress:"Production Progress",miningSuccess:"Mining Success!",oreFound:"Ore Found!",moneyEarned:"Money Earned!",digMore:"Dig More!",monsterKilled:"Monster Killed!",expEarned:"EXP Earned!",goldEarned:"Gold Earned!",newAreaFound:"New Area Found!",treasureFound:"Treasure Found!",adventureSuccess:"Adventure Success!",mysteriousDiscovery:"Mysterious Discovery!",craftComplete:"Craft Complete!",itemCreated:"Item Created!",skillImproved:"Skill Improved!",perfectWork:"Perfect Work!",success:"Success!",good:"Good!",complete:"Complete!",amazing:"Amazing!",selectCat:"Select Cat",removeCat:"Remove Cat",ownedPoints:"Owned Points",ownedCoins:"Owned Coins",exchangeRate:"Exchange Rate",buyCoinAmount:"Amount of Coins to Buy",sellCoinAmount:"Amount of Coins to Sell",requiredPoints:"Required Points",pointsToReceive:"Points to Receive",buyButton:"Buy",sellButton:"Sell",exampleAmount:"Ex: 1",coinBuy:"Buy Coin",coinSell:"Sell Coin",pointUsed:"Points Used",pointReceived:"Points Received",inProgress:"In Progress",completed:"Completed",receive:"Claim Reward",rewardReceived:"Reward Received!",earnedReward:"earned.",emptyInventory:"Inventory is empty",totalItems:"Total",items:"items",searchAndFilter:"Search & Filter",searchPlaceholder:"Search by NFT name or ID...",starRating:"Star Rating",levelFilter:"Level",rarityFilter:"Rarity",sortBy:"Sort By",stars:"Stars",levelHighToLow:"Level (High to Low)",starsHighToLow:"Stars (High to Low)",rarityHighToLow:"Rarity (High to Low)",nameOrder:"Name Order",reset:"Reset",apply:"Apply",stats:"Stats",imageId:"Image ID",createdAt:"Created At",levelUpButton:"Level Up",selectButton:"Select",doubleClickDetail:"Double-click for details",noNFTs:"No NFTs",createCatInFactory:"Create cats in the Factory!",selectedCharacter:"Selected Character",cat:"Cat",userSettings:"User Settings",walletConnection:"Wallet Connection",connected:"Connected",address:"Address",balance:"Balance",depositFromWallet:"Deposit from Wallet",disconnect:"Disconnect",walletNotConnected:"Wallet is not connected",walletConnectDesc:"Please connect your wallet to enjoy NFT games",connecting:"Connecting...",attendance:"Attendance Check",doAttendanceCheck:"Do Attendance Check",selectDepositMethod:"Select Deposit Method",selectExchangeToDeposit:"Please select an exchange to deposit",goToPhantomWallet:"Go to Phantom Wallet",goToUpbitExchange:"Go to Upbit Exchange",copyWalletAddressAndDeposit:"Copy wallet address and deposit at exchange",copyWalletAddress:"Copy Wallet Address",walletConnected:"Wallet connected!",disconnectWalletConfirm:"Are you sure you want to disconnect your wallet?",walletAddressCopied:"Wallet address copied!",copyFailed:"Copy failed",refreshBalance:"Refresh Balance",alreadyCheckedIn:"You have already checked in today!",checkInComplete:"Check-in complete! You received",wallet:"Wallet",marketplace:"Marketplace",myNFTs:"My NFTs",myListings:"My Sales",onSale:"On Sale",totalVolume:"Total Volume",itemsCount:"items",noNFTsInWallet:"No NFTs",allRarity:"All Rarity",allPrice:"All Price",under1000Coins:"Under 1,000 Coins",midPriceRange:"1,000 - 5,000 Coins",over5000Coins:"Over 5,000 Coins",oldest:"Oldest",priceLow:"Price Low",priceHigh:"Price High",levelHigh:"Level High",starsHigh:"Stars High",price:"Price",buy:"Buy",noNFTsOnSale:"No NFTs on sale",myNFTsCount:"My NFTs",ownedCoins:"Owned Coins",sell:"Sell",noNFTsAvailableForSale:"No NFTs available for sale",mySalesList:"My Sales List",salePrice:"Sale Price",cancelSale:"Cancel Sale",noNFTsOnSaleList:"No NFTs on sale",confirmCancelSale:"Are you sure you want to cancel the sale?",enterValidPrice:"Please enter a valid price.",loginRequired:"Login required.",nftListedOnMarketplace:"NFT listed on marketplace!",saleCancelled:"Sale cancelled.",insufficientCoinsForPurchase:"Insufficient coins.",nftPurchased:"NFT purchased!",coinsPaid:"coins paid",sellNFT:"Sell NFT",starsRating:"Stars",sellPriceLabel:"Sale Price (Coins)",enterPrice:"Enter price",currentOwnedCoins:"Current Owned Coins",cancel:"Cancel",registerSale:"Register Sale",buyNFT:"Buy NFT",insufficientCoinsWarning:"Insufficient coins!",imageId:"Image ID",send:"Send",sendFeatureComingSoon:"Send feature is coming soon.",buyFeatureComingSoon:"Buy feature is coming soon.",receive:"Receive",receiveFeatureComingSoon:"Receive feature is coming soon.",searchNFT:"Search",searchPlaceholderNFT:"Search by NFT name or ID...",reset:"Reset",apply:"Apply",energy100:"Energy 100",energy500:"Energy 500",energy1000:"Energy 1000",energy2000:"Energy 2000",energyRecover:"Recovers",energyRecovered:"energy recovered",purchaseComplete:"Purchase complete!",currentEnergy:"Current",loginRequired:"Login required.",insufficientPoints:"Insufficient points.",insufficientCoins:"Insufficient coins.",purchaseFailed:"Purchase failed. Please try again.",buy:"Buy",back:" Back",mining:"Mining",miningLevel:"Mining Level",miningStart:"Start Mining",miningInProgress:"Mining...",ownedResources:"Owned Resources",stone:"Stone",iron:"Iron",gold:"Gold",diamond:"Diamond",hunting:"Hunting",playerInfo:"Player Info",health:"Health",attack:"Attack",exp:"EXP",monsterSelection:"Monster Selection",huntingStart:"Start Hunting",huntingInProgress:"Hunting...",exploration:"Exploration",explorationLevel:"Exploration Level",explorationArea:"Exploration Area",undiscovered:"Undiscovered",exploring:"Exploring",explorationStart:"Start Exploration",explorationInProgress:"Exploring...",explorationRewards:"Exploration Rewards",production:"Production",productionLevel:"Production Level",materialInventory:"Material Inventory",recipe:"Recipe",productionStart:"Start Production",productionInProgress:"Producing...",notification:"Notification",markAllRead:"Mark All Read",noNotifications:"No notifications.",attendance:"Attendance",attendanceCheck:"Attendance Check",day:"Day",attendanceComplete:"Attendance complete!",pointsEarned:"points earned!",alreadyCheckedToday:"Already checked in today! Please try again tomorrow.",alreadyChecked:"Already checked.",nextOrderOnly:"Only the next order can be checked.",inviteFriends:"Invite Friends",inviteCode:"Invite Code",copyInviteCode:"Copy Invite Code",shareKakao:"Share via KakaoTalk",inviteDescription:"Invite friends and get rewards!",inviteReward:"Invite Reward",inviteRewardDesc:"100 Points per friend invited",newUserReward:"New User Reward: 50 Points",totalInvites:"Total Invites",invites:"friends",codeCopied:"Invite code copied!",shareSuccess:"Shared via KakaoTalk successfully!",shareFailed:"Failed to share via KakaoTalk.",inviteStats:"Invite Statistics",shareLink:"Share Link",copyLink:"Copy Link",linkCopied:"Link copied!",shareNative:"Share"}}[n===""?"ko":"en"]},jx=Object.freeze(Object.defineProperty({__proto__:null,createWalletUser:j1,getAllUsers:ei,getCurrentLanguage:W1,getCurrentUser:dt,getI18nTexts:gs,getUserByWalletAddress:am,logoutUser:z1,updateUserGameData:Qc},Symbol.toStringTag,{value:"Module"})),zx="6.15.0";function Wx(n,e,t){const s=e.split("|").map(i=>i.trim());for(let i=0;i<s.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof n===e)return}const r=new Error(`invalid value for type ${e}`);throw r.code="INVALID_ARGUMENT",r.argument=`value.${t}`,r.value=n,r}async function is(n){const e=Object.keys(n);return(await Promise.all(e.map(s=>Promise.resolve(n[s])))).reduce((s,r,i)=>(s[e[i]]=r,s),{})}function Ge(n,e,t){for(let s in e){let r=e[s];const i=t?t[s]:null;i&&Wx(r,i,s),Object.defineProperty(n,s,{enumerable:!0,value:r,writable:!1})}}function ma(n,e){if(n==null)return"null";if(e==null&&(e=new Set),typeof n=="object"){if(e.has(n))return"[Circular]";e.add(n)}if(Array.isArray(n))return"[ "+n.map(t=>ma(t,e)).join(", ")+" ]";if(n instanceof Uint8Array){const t="0123456789abcdef";let s="0x";for(let r=0;r<n.length;r++)s+=t[n[r]>>4],s+=t[n[r]&15];return s}if(typeof n=="object"&&typeof n.toJSON=="function")return ma(n.toJSON(),e);switch(typeof n){case"boolean":case"number":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"string":return JSON.stringify(n);case"object":{const t=Object.keys(n);return t.sort(),"{ "+t.map(s=>`${ma(s,e)}: ${ma(n[s],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function $n(n,e){return n&&n.code===e}function lm(n){return $n(n,"CALL_EXCEPTION")}function Gt(n,e,t){let s=n;{const i=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${ma(t)}`);for(const o in t){if(o==="shortMessage")continue;const a=t[o];i.push(o+"="+ma(a))}}i.push(`code=${e}`),i.push(`version=${zx}`),i.length&&(n+=" ("+i.join(", ")+")")}let r;switch(e){case"INVALID_ARGUMENT":r=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":r=new RangeError(n);break;default:r=new Error(n)}return Ge(r,{code:e}),t&&Object.assign(r,t),r.shortMessage==null&&Ge(r,{shortMessage:s}),r}function ce(n,e,t,s){if(!n)throw Gt(e,t,s)}function H(n,e,t,s){ce(n,e,"INVALID_ARGUMENT",{argument:t,value:s})}function K1(n,e,t){t==null&&(t=""),t&&(t=": "+t),ce(n>=e,"missing argument"+t,"MISSING_ARGUMENT",{count:n,expectedCount:e}),ce(n<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:n,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((n,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");n.push(e)}catch{}return n},[]);function pu(n,e,t){if(t==null&&(t=""),n!==e){let s=t,r="new";t&&(s+=".",r+=" "+t),ce(!1,`private constructor; use ${s}from* methods`,"UNSUPPORTED_OPERATION",{operation:r})}}function q1(n,e,t){if(n instanceof Uint8Array)return t?new Uint8Array(n):n;if(typeof n=="string"&&n.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const s=new Uint8Array((n.length-2)/2);let r=2;for(let i=0;i<s.length;i++)s[i]=parseInt(n.substring(r,r+2),16),r+=2;return s}H(!1,"invalid BytesLike value",e||"value",n)}function ot(n,e){return q1(n,e,!1)}function ls(n,e){return q1(n,e,!0)}function Bt(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&n.length!==2+2*e||e===!0&&n.length%2!==0)}function cm(n){return Bt(n,!0)||n instanceof Uint8Array}const Zy="0123456789abcdef";function _e(n){const e=ot(n);let t="0x";for(let s=0;s<e.length;s++){const r=e[s];t+=Zy[(r&240)>>4]+Zy[r&15]}return t}function sn(n){return"0x"+n.map(e=>_e(e).substring(2)).join("")}function Ca(n){return Bt(n,!0)?(n.length-2)/2:ot(n).length}function en(n,e,t){const s=ot(n);return t!=null&&t>s.length&&ce(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:s,length:s.length,offset:t}),_e(s.slice(e??0,t??s.length))}function J1(n,e,t){const s=ot(n);ce(e>=s.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(s),length:e,offset:e+1});const r=new Uint8Array(e);return r.fill(0),t?r.set(s,e-s.length):r.set(s,0),_e(r)}function ti(n,e){return J1(n,e,!0)}function Kx(n,e){return J1(n,e,!1)}const Oh=BigInt(0),Js=BigInt(1),va=9007199254740991;function Hd(n,e){const t=Lh(n,"value"),s=BigInt(rt(e,"width"));if(ce(t>>s===Oh,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:n}),t>>s-Js){const r=(Js<<s)-Js;return-((~t&r)+Js)}return t}function Y1(n,e){let t=Se(n,"value");const s=BigInt(rt(e,"width")),r=Js<<s-Js;if(t<Oh){t=-t,ce(t<=r,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});const i=(Js<<s)-Js;return(~t&i)+Js}else ce(t<r,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});return t}function To(n,e){const t=Lh(n,"value"),s=BigInt(rt(e,"bits"));return t&(Js<<s)-Js}function Se(n,e){switch(typeof n){case"bigint":return n;case"number":return H(Number.isInteger(n),"underflow",e||"value",n),H(n>=-va&&n<=va,"overflow",e||"value",n),BigInt(n);case"string":try{if(n==="")throw new Error("empty string");return n[0]==="-"&&n[1]!=="-"?-BigInt(n.substring(1)):BigInt(n)}catch(t){H(!1,`invalid BigNumberish string: ${t.message}`,e||"value",n)}}H(!1,"invalid BigNumberish value",e||"value",n)}function Lh(n,e){const t=Se(n,e);return ce(t>=Oh,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n}),t}const e0="0123456789abcdef";function Bh(n){if(n instanceof Uint8Array){let e="0x0";for(const t of n)e+=e0[t>>4],e+=e0[t&15];return BigInt(e)}return Se(n)}function rt(n,e){switch(typeof n){case"bigint":return H(n>=-va&&n<=va,"overflow",e||"value",n),Number(n);case"number":return H(Number.isInteger(n),"underflow",e||"value",n),H(n>=-va&&n<=va,"overflow",e||"value",n),n;case"string":try{if(n==="")throw new Error("empty string");return rt(BigInt(n),e)}catch(t){H(!1,`invalid numeric string: ${t.message}`,e||"value",n)}}H(!1,"invalid numeric value",e||"value",n)}function qx(n){return rt(Bh(n))}function zi(n,e){let s=Lh(n,"value").toString(16);if(e==null)s.length%2&&(s="0"+s);else{const r=rt(e,"width");for(ce(r*2>=s.length,`value exceeds width (${r} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});s.length<r*2;)s="0"+s}return"0x"+s}function Cn(n){const e=Lh(n,"value");if(e===Oh)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const s=new Uint8Array(t.length/2);for(let r=0;r<s.length;r++){const i=r*2;s[r]=parseInt(t.substring(i,i+2),16)}return s}function qs(n){let e=_e(cm(n)?n:Cn(n)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const t0="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const n0=BigInt(58);function Jx(n){const e=ot(n);let t=Bh(e),s="";for(;t;)s=t0[Number(t%n0)]+s,t/=n0;for(let r=0;r<e.length&&!e[r];r++)s=t0[0]+s;return s}function Yx(n){n=atob(n);const e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return ot(e)}function Xx(n){const e=ot(n);let t="";for(let s=0;s<e.length;s++)t+=String.fromCharCode(e[s]);return btoa(t)}class X1{filter;emitter;#e;constructor(e,t,s){this.#e=t,Ge(this,{emitter:e,filter:s})}async removeListener(){this.#e!=null&&await this.emitter.off(this.filter,this.#e)}}function Zx(n,e,t,s,r){H(!1,`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function Z1(n,e,t,s,r){if(n==="BAD_PREFIX"||n==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)i++;return i}return n==="OVERRUN"?t.length-e-1:0}function e2(n,e,t,s,r){return n==="OVERLONG"?(H(typeof r=="number","invalid bad code point for replacement","badCodepoint",r),s.push(r),0):(s.push(65533),Z1(n,e,t))}const t2=Object.freeze({error:Zx,ignore:Z1,replace:e2});function n2(n,e){e==null&&(e=t2.error);const t=ot(n,"bytes"),s=[];let r=0;for(;r<t.length;){const i=t[r++];if(i>>7===0){s.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?r+=e("UNEXPECTED_CONTINUE",r-1,t,s):r+=e("BAD_PREFIX",r-1,t,s);continue}if(r-1+o>=t.length){r+=e("OVERRUN",r-1,t,s);continue}let l=i&(1<<8-o-1)-1;for(let c=0;c<o;c++){let d=t[r];if((d&192)!=128){r+=e("MISSING_CONTINUE",r,t,s),l=null;break}l=l<<6|d&63,r++}if(l!==null){if(l>1114111){r+=e("OUT_OF_RANGE",r-1-o,t,s,l);continue}if(l>=55296&&l<=57343){r+=e("UTF16_SURROGATE",r-1-o,t,s,l);continue}if(l<=a){r+=e("OVERLONG",r-1-o,t,s,l);continue}s.push(l)}}return s}function qr(n,e){H(typeof n=="string","invalid string value","str",n);let t=[];for(let s=0;s<n.length;s++){const r=n.charCodeAt(s);if(r<128)t.push(r);else if(r<2048)t.push(r>>6|192),t.push(r&63|128);else if((r&64512)==55296){s++;const i=n.charCodeAt(s);H(s<n.length&&(i&64512)===56320,"invalid surrogate pair","str",n);const o=65536+((r&1023)<<10)+(i&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(r>>12|224),t.push(r>>6&63|128),t.push(r&63|128)}return new Uint8Array(t)}function s2(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Gd(n,e){return s2(n2(n,e))}function eE(n){async function e(t,s){ce(s==null||!s.cancelled,"request cancelled before sending","CANCELLED");const r=t.url.split(":")[0].toLowerCase();ce(r==="http"||r==="https",`unsupported protocol ${r}`,"UNSUPPORTED_OPERATION",{info:{protocol:r},operation:"request"}),ce(r==="https"||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=Gt("request timeout","TIMEOUT"),o.abort()},t.timeout);s&&s.addListener(()=>{i=Gt("request cancelled","CANCELLED"),o.abort()});const l=Object.assign({},n,{method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:o.signal});let c;try{c=await fetch(t.url,l)}catch(m){throw clearTimeout(a),i||m}clearTimeout(a);const d={};c.headers.forEach((m,w)=>{d[w.toLowerCase()]=m});const f=await c.arrayBuffer(),p=f==null?null:new Uint8Array(f);return{statusCode:c.status,statusMessage:c.statusText,headers:d,body:p}}return e}const r2=12,i2=250;let s0=eE();const o2=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),a2=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let jf=!1;async function tE(n,e){try{const t=n.match(o2);if(!t)throw new Error("invalid data");return new Bi(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?Yx(t[3]):c2(t[3]))}catch{return new Bi(599,"BAD REQUEST (invalid data: URI)",{},null,new ni(n))}}function nE(n){async function e(t,s){try{const r=t.match(a2);if(!r)throw new Error("invalid link");return new ni(`${n}${r[2]}`)}catch{return new Bi(599,"BAD REQUEST (invalid IPFS URI)",{},null,new ni(t))}}return e}const Ku={data:tE,ipfs:nE("https://gateway.ipfs.io/ipfs/")},sE=new WeakMap;class l2{#e;#t;constructor(e){this.#e=[],this.#t=!1,sE.set(e,()=>{if(!this.#t){this.#t=!0;for(const t of this.#e)setTimeout(()=>{t()},0);this.#e=[]}})}addListener(e){ce(!this.#t,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#e.push(e)}get cancelled(){return this.#t}checkSignal(){ce(!this.cancelled,"cancelled","CANCELLED",{})}}function qu(n){if(n==null)throw new Error("missing signal; should not happen");return n.checkSignal(),n}class ni{#e;#t;#n;#s;#r;#o;#i;#a;#d;#c;#p;#g;#l;#u;#h;get url(){return this.#o}set url(e){this.#o=String(e)}get body(){return this.#i==null?null:new Uint8Array(this.#i)}set body(e){if(e==null)this.#i=void 0,this.#a=void 0;else if(typeof e=="string")this.#i=qr(e),this.#a="text/plain";else if(e instanceof Uint8Array)this.#i=e,this.#a="application/octet-stream";else if(typeof e=="object")this.#i=qr(JSON.stringify(e)),this.#a="application/json";else throw new Error("invalid body")}hasBody(){return this.#i!=null}get method(){return this.#s?this.#s:this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),this.#s=String(e).toUpperCase()}get headers(){const e=Object.assign({},this.#n);return this.#d&&(e.authorization=`Basic ${Xx(qr(this.#d))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&this.#a&&(e["content-type"]=this.#a),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){this.#n[String(e).toLowerCase()]=String(t)}clearHeaders(){this.#n={}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let s=0;return{next:()=>{if(s<t.length){const r=t[s++];return{value:[r,e[r]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#d||null}setCredentials(e,t){H(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#d=`${e}:${t}`}get allowGzip(){return this.#t}set allowGzip(e){this.#t=!!e}get allowInsecureAuthentication(){return!!this.#e}set allowInsecureAuthentication(e){this.#e=!!e}get timeout(){return this.#r}set timeout(e){H(e>=0,"timeout must be non-zero","timeout",e),this.#r=e}get preflightFunc(){return this.#c||null}set preflightFunc(e){this.#c=e}get processFunc(){return this.#p||null}set processFunc(e){this.#p=e}get retryFunc(){return this.#g||null}set retryFunc(e){this.#g=e}get getUrlFunc(){return this.#h||s0}set getUrlFunc(e){this.#h=e}constructor(e){this.#o=String(e),this.#e=!1,this.#t=!0,this.#n={},this.#s="",this.#r=3e5,this.#u={slotInterval:i2,maxAttempts:r2},this.#h=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#i?_e(this.#i):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(this.#u.slotInterval=e.slotInterval),e.maxAttempts!=null&&(this.#u.maxAttempts=e.maxAttempts)}async#f(e,t,s,r,i){if(e>=this.#u.maxAttempts)return i.makeServerError("exceeded maximum retry limit");ce(r0()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:r}),s>0&&await u2(s);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in Ku){const d=await Ku[a](o.url,qu(r.#l));if(d instanceof Bi){let f=d;if(this.processFunc){qu(r.#l);try{f=await this.processFunc(o,f)}catch(p){(p.throttle==null||typeof p.stall!="number")&&f.makeServerError("error in post-processing function",p).assertOk()}}return f}o=d}this.preflightFunc&&(o=await this.preflightFunc(o));const l=await this.getUrlFunc(o,qu(r.#l));let c=new Bi(l.statusCode,l.statusMessage,l.headers,l.body,r);if(c.statusCode===301||c.statusCode===302){try{const d=c.headers.location||"";return o.redirect(d).#f(e+1,t,0,r,c)}catch{}return c}else if(c.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,c,e))){const d=c.headers["retry-after"];let f=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof d=="string"&&d.match(/^[1-9][0-9]*$/)&&(f=parseInt(d)),o.clone().#f(e+1,t,f,r,c)}if(this.processFunc){qu(r.#l);try{c=await this.processFunc(o,c)}catch(d){(d.throttle==null||typeof d.stall!="number")&&c.makeServerError("error in post-processing function",d).assertOk();let f=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return d.stall>=0&&(f=d.stall),o.clone().#f(e+1,t,f,r,c)}}return c}send(){return ce(this.#l==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#l=new l2(this),this.#f(0,r0()+this.timeout,0,this,new Bi(0,"",{},null,this))}cancel(){ce(this.#l!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=sE.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),s=e.split(":")[0].toLowerCase();ce(this.method==="GET"&&(t!=="https"||s!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const r=new ni(e);return r.method="GET",r.allowGzip=this.allowGzip,r.timeout=this.timeout,r.#n=Object.assign({},this.#n),this.#i&&(r.#i=new Uint8Array(this.#i)),r.#a=this.#a,r}clone(){const e=new ni(this.url);return e.#s=this.#s,this.#i&&(e.#i=this.#i),e.#a=this.#a,e.#n=Object.assign({},this.#n),e.#d=this.#d,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#c=this.#c,e.#p=this.#p,e.#g=this.#g,e.#u=Object.assign({},this.#u),e.#h=this.#h,e}static lockConfig(){jf=!0}static getGateway(e){return Ku[e.toLowerCase()]||null}static registerGateway(e,t){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(jf)throw new Error("gateways locked");Ku[e]=t}static registerGetUrl(e){if(jf)throw new Error("gateways locked");s0=e}static createGetUrlFunc(e){return eE(e)}static createDataGateway(){return tE}static createIpfsGatewayFunc(e){return nE(e)}}class Bi{#e;#t;#n;#s;#r;#o;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#s?_e(this.#s):"null"}>`}get statusCode(){return this.#e}get statusMessage(){return this.#t}get headers(){return Object.assign({},this.#n)}get body(){return this.#s==null?null:new Uint8Array(this.#s)}get bodyText(){try{return this.#s==null?"":Gd(this.#s)}catch{ce(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{ce(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let s=0;return{next:()=>{if(s<t.length){const r=t[s++];return{value:[r,e[r]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,t,s,r,i){this.#e=e,this.#t=t,this.#n=Object.keys(s).reduce((o,a)=>(o[a.toLowerCase()]=String(s[a]),o),{}),this.#s=r==null?null:new Uint8Array(r),this.#r=i||null,this.#o={message:""}}makeServerError(e,t){let s;e?s=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,s=`CLIENT ESCALATED SERVER ERROR (${e})`);const r=new Bi(599,s,this.headers,this.body,this.#r||void 0);return r.#o={message:e,error:t},r}throwThrottleError(e,t){t==null?t=-1:H(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const s=new Error(e||"throttling requests");throw Ge(s,{stall:t,throttle:!0}),s}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return this.#s!=null}get request(){return this.#r}ok(){return this.#o.message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=this.#o;e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let s=null;this.request&&(s=this.request.url);let r=null;try{this.#s&&(r=Gd(this.#s))}catch{}ce(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:s,responseBody:r,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function r0(){return new Date().getTime()}function c2(n){return qr(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function u2(n){return new Promise(e=>setTimeout(e,n))}const d2=BigInt(-1),js=BigInt(0),ya=BigInt(1),h2=BigInt(5),oa={};let Ta="0000";for(;Ta.length<80;)Ta+=Ta;function go(n){let e=Ta;for(;e.length<n;)e+=e;return BigInt("1"+e.substring(0,n))}function lc(n,e,t){const s=BigInt(e.width);if(e.signed){const r=ya<<s-ya;ce(t==null||n>=-r&&n<r,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n>js?n=Hd(To(n,s),s):n=-Hd(To(-n,s),s)}else{const r=ya<<s;ce(t==null||n>=0&&n<r,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n=(n%r+r)%r&r-ya}return n}function zf(n){typeof n=="number"&&(n=`fixed128x${n}`);let e=!0,t=128,s=18;if(typeof n=="string"){if(n!=="fixed")if(n==="ufixed")e=!1;else{const i=n.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);H(i,"invalid fixed format","format",n),e=i[1]!=="u",t=parseInt(i[2]),s=parseInt(i[3])}}else if(n){const i=n,o=(a,l,c)=>i[a]==null?c:(H(typeof i[a]===l,"invalid fixed format ("+a+" not "+l+")","format."+a,i[a]),i[a]);e=o("signed","boolean",e),t=o("width","number",t),s=o("decimals","number",s)}H(t%8===0,"invalid FixedNumber width (not byte aligned)","format.width",t),H(s<=80,"invalid FixedNumber decimals (too large)","format.decimals",s);const r=(e?"":"u")+"fixed"+String(t)+"x"+String(s);return{signed:e,width:t,decimals:s,name:r}}function f2(n,e){let t="";n<js&&(t="-",n*=d2);let s=n.toString();if(e===0)return t+s;for(;s.length<=e;)s=Ta+s;const r=s.length-e;for(s=s.substring(0,r)+"."+s.substring(r);s[0]==="0"&&s[1]!==".";)s=s.substring(1);for(;s[s.length-1]==="0"&&s[s.length-2]!==".";)s=s.substring(0,s.length-1);return t+s}class Pi{format;#e;#t;#n;_value;constructor(e,t,s){pu(e,oa,"FixedNumber"),this.#t=t,this.#e=s;const r=f2(t,s.decimals);Ge(this,{format:s.name,_value:r}),this.#n=go(s.decimals)}get signed(){return this.#e.signed}get width(){return this.#e.width}get decimals(){return this.#e.decimals}get value(){return this.#t}#s(e){H(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#r(e,t){return e=lc(e,this.#e,t),new Pi(oa,e,this.#e)}#o(e,t){return this.#s(e),this.#r(this.#t+e.#t,t)}addUnsafe(e){return this.#o(e)}add(e){return this.#o(e,"add")}#i(e,t){return this.#s(e),this.#r(this.#t-e.#t,t)}subUnsafe(e){return this.#i(e)}sub(e){return this.#i(e,"sub")}#a(e,t){return this.#s(e),this.#r(this.#t*e.#t/this.#n,t)}mulUnsafe(e){return this.#a(e)}mul(e){return this.#a(e,"mul")}mulSignal(e){this.#s(e);const t=this.#t*e.#t;return ce(t%this.#n===js,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#r(t/this.#n,"mulSignal")}#d(e,t){return ce(e.#t!==js,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#s(e),this.#r(this.#t*this.#n/e.#t,t)}divUnsafe(e){return this.#d(e)}div(e){return this.#d(e,"div")}divSignal(e){ce(e.#t!==js,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#s(e);const t=this.#t*this.#n;return ce(t%e.#t===js,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#r(t/e.#t,"divSignal")}cmp(e){let t=this.value,s=e.value;const r=this.decimals-e.decimals;return r>0?s*=go(r):r<0&&(t*=go(-r)),t<s?-1:t>s?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#t;return this.#t<js&&(e-=this.#n-ya),e=this.#t/this.#n*this.#n,this.#r(e,"floor")}ceiling(){let e=this.#t;return this.#t>js&&(e+=this.#n-ya),e=this.#t/this.#n*this.#n,this.#r(e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,s=h2*go(t-1);let r=this.value+s;const i=go(t);return r=r/i*i,lc(r,this.#e,"round"),new Pi(oa,r,this.#e)}isZero(){return this.#t===js}isNegative(){return this.#t<js}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Pi.fromString(this.toString(),e)}static fromValue(e,t,s){const r=t==null?0:rt(t),i=zf(s);let o=Se(e,"value");const a=r-i.decimals;if(a>0){const l=go(a);ce(o%l===js,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=l}else a<0&&(o*=go(-a));return lc(o,i,"fromValue"),new Pi(oa,o,i)}static fromString(e,t){const s=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);H(s&&s[2].length+s[3].length>0,"invalid FixedNumber string value","value",e);const r=zf(t);let i=s[2]||"0",o=s[3]||"";for(;o.length<r.decimals;)o+=Ta;ce(o.substring(r.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,r.decimals);const a=BigInt(s[1]+i+o);return lc(a,r,"fromString"),new Pi(oa,a,r)}static fromBytes(e,t){let s=Bh(ot(e,"value"));const r=zf(t);return r.signed&&(s=Hd(s,r.width)),lc(s,r,"fromBytes"),new Pi(oa,s,r)}}function p2(n){let e=n.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function i0(n,e,t){let s=0;for(let r=0;r<t;r++)s=s*256+n[e+r];return s}function o0(n,e,t,s){const r=[];for(;t<e+1+s;){const i=rE(n,t);r.push(i.result),t+=i.consumed,ce(t<=e+1+s,"child data too short","BUFFER_OVERRUN",{buffer:n,length:s,offset:e})}return{consumed:1+s,result:r}}function rE(n,e){ce(n.length!==0,"data too short","BUFFER_OVERRUN",{buffer:n,length:0,offset:1});const t=s=>{ce(s<=n.length,"data short segment too short","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:s})};if(n[e]>=248){const s=n[e]-247;t(e+1+s);const r=i0(n,e+1,s);return t(e+1+s+r),o0(n,e,e+1+s,s+r)}else if(n[e]>=192){const s=n[e]-192;return t(e+1+s),o0(n,e,e+1,s)}else if(n[e]>=184){const s=n[e]-183;t(e+1+s);const r=i0(n,e+1,s);t(e+1+s+r);const i=_e(n.slice(e+1+s,e+1+s+r));return{consumed:1+s+r,result:i}}else if(n[e]>=128){const s=n[e]-128;t(e+1+s);const r=_e(n.slice(e+1,e+1+s));return{consumed:1+s,result:r}}return{consumed:1,result:p2(n[e])}}function gu(n){const e=ot(n,"data"),t=rE(e,0);return H(t.consumed===e.length,"unexpected junk after rlp payload","data",n),t.result}function a0(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function iE(n){if(Array.isArray(n)){let s=[];if(n.forEach(function(i){s=s.concat(iE(i))}),s.length<=55)return s.unshift(192+s.length),s;const r=a0(s.length);return r.unshift(247+r.length),r.concat(s)}const e=Array.prototype.slice.call(ot(n,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=a0(e.length);return t.unshift(183+t.length),t.concat(e)}const l0="0123456789abcdef";function Wi(n){let e="0x";for(const t of iE(n))e+=l0[t>>4],e+=l0[t&15];return e}function g2(n,e){let t=18;return t=rt(e,"unit"),Pi.fromValue(n,t,{decimals:t,width:512}).toString()}function oE(n){return g2(n,18)}const us=32,Qp=new Uint8Array(us),m2=["then"],Ju={},aE=new WeakMap;function _o(n){return aE.get(n)}function c0(n,e){aE.set(n,e)}function cc(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);throw t.error=e,t}function jp(n,e,t){return n.indexOf(null)>=0?e.map((s,r)=>s instanceof Qr?jp(_o(s),s,t):s):n.reduce((s,r,i)=>{let o=e.getValue(r);return r in s||(t&&o instanceof Qr&&(o=jp(_o(o),o,t)),s[r]=o),s},{})}class Qr extends Array{#e;constructor(...e){const t=e[0];let s=e[1],r=(e[2]||[]).slice(),i=!0;t!==Ju&&(s=e,r=[],i=!1),super(s.length),s.forEach((l,c)=>{this[c]=l});const o=r.reduce((l,c)=>(typeof c=="string"&&l.set(c,(l.get(c)||0)+1),l),new Map);if(c0(this,Object.freeze(s.map((l,c)=>{const d=r[c];return d!=null&&o.get(d)===1?d:null}))),this.#e=[],this.#e==null&&this.#e,!i)return;Object.freeze(this);const a=new Proxy(this,{get:(l,c,d)=>{if(typeof c=="string"){if(c.match(/^[0-9]+$/)){const p=rt(c,"%index");if(p<0||p>=this.length)throw new RangeError("out of result range");const m=l[p];return m instanceof Error&&cc(`index ${p}`,m),m}if(m2.indexOf(c)>=0)return Reflect.get(l,c,d);const f=l[c];if(f instanceof Function)return function(...p){return f.apply(this===d?l:this,p)};if(!(c in l))return l.getValue.apply(this===d?l:this,[c])}return Reflect.get(l,c,d)}});return c0(a,_o(this)),a}toArray(e){const t=[];return this.forEach((s,r)=>{s instanceof Error&&cc(`index ${r}`,s),e&&s instanceof Qr&&(s=s.toArray(e)),t.push(s)}),t}toObject(e){const t=_o(this);return t.reduce((s,r,i)=>(ce(r!=null,`value at index ${i} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),jp(t,this,e)),{})}slice(e,t){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),t==null&&(t=this.length),t<0&&(t+=this.length,t<0&&(t=0)),t>this.length&&(t=this.length);const s=_o(this),r=[],i=[];for(let o=e;o<t;o++)r.push(this[o]),i.push(s[o]);return new Qr(Ju,r,i)}filter(e,t){const s=_o(this),r=[],i=[];for(let o=0;o<this.length;o++){const a=this[o];a instanceof Error&&cc(`index ${o}`,a),e.call(t,a,o,this)&&(r.push(a),i.push(s[o]))}return new Qr(Ju,r,i)}map(e,t){const s=[];for(let r=0;r<this.length;r++){const i=this[r];i instanceof Error&&cc(`index ${r}`,i),s.push(e.call(t,i,r,this))}return s}getValue(e){const t=_o(this).indexOf(e);if(t===-1)return;const s=this[t];return s instanceof Error&&cc(`property ${JSON.stringify(e)}`,s.error),s}static fromItems(e,t){return new Qr(Ju,e,t)}}function u0(n){let e=Cn(n);return ce(e.length<=us,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:us,offset:e.length}),e.length!==us&&(e=ls(sn([Qp.slice(e.length%us),e]))),e}class di{name;type;localName;dynamic;constructor(e,t,s,r){Ge(this,{name:e,type:t,localName:s,dynamic:r},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){H(!1,e,this.localName,t)}}class zp{#e;#t;constructor(){this.#e=[],this.#t=0}get data(){return sn(this.#e)}get length(){return this.#t}#n(e){return this.#e.push(e),this.#t+=e.length,e.length}appendWriter(e){return this.#n(ls(e.data))}writeBytes(e){let t=ls(e);const s=t.length%us;return s&&(t=ls(sn([t,Qp.slice(s)]))),this.#n(t)}writeValue(e){return this.#n(u0(e))}writeUpdatableValue(){const e=this.#e.length;return this.#e.push(Qp),this.#t+=us,t=>{this.#e[e]=u0(t)}}}class um{allowLoose;#e;#t;#n;#s;#r;constructor(e,t,s){Ge(this,{allowLoose:!!t}),this.#e=ls(e),this.#n=0,this.#s=null,this.#r=s??1024,this.#t=0}get data(){return _e(this.#e)}get dataLength(){return this.#e.length}get consumed(){return this.#t}get bytes(){return new Uint8Array(this.#e)}#o(e){if(this.#s)return this.#s.#o(e);this.#n+=e,ce(this.#r<1||this.#n<=this.#r*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#r} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:ls(this.#e),offset:this.#t,length:e,info:{bytesRead:this.#n,dataLength:this.dataLength}})}#i(e,t,s){let r=Math.ceil(t/us)*us;return this.#t+r>this.#e.length&&(this.allowLoose&&s&&this.#t+t<=this.#e.length?r=t:ce(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:ls(this.#e),length:this.#e.length,offset:this.#t+r})),this.#e.slice(this.#t,this.#t+r)}subReader(e){const t=new um(this.#e.slice(this.#t+e),this.allowLoose,this.#r);return t.#s=this,t}readBytes(e,t){let s=this.#i(0,e,!!t);return this.#o(e),this.#t+=s.length,s.slice(0,e)}readValue(){return Bh(this.readBytes(us))}readIndex(){return qx(this.readBytes(us))}}function Qd(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function dm(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function v2(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Qd(n.outputLen),Qd(n.blockLen)}function Ua(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function lE(n,e){dm(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Wf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cE=n=>n instanceof Uint8Array,y2=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),Kf=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),ur=(n,e)=>n<<32-e|n>>>e,A2=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!A2)throw new Error("Non little-endian hardware is not supported");function w2(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Mh(n){if(typeof n=="string"&&(n=w2(n)),!cE(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function _2(...n){const e=new Uint8Array(n.reduce((s,r)=>s+r.length,0));let t=0;return n.forEach(s=>{if(!cE(s))throw new Error("Uint8Array expected");e.set(s,t),t+=s.length}),e}class hm{clone(){return this._cloneInto()}}function fm(n){const e=s=>n().update(Mh(s)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function E2(n=32){if(Wf&&typeof Wf.getRandomValues=="function")return Wf.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}class uE extends hm{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,v2(e);const s=Mh(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(s.length>r?e.create().update(s).digest():s);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Ua(this),this.iHash.update(e),this}digestInto(e){Ua(this),dm(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:s,finished:r,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=s._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const dE=(n,e,t)=>new uE(n,e).update(t).digest();dE.create=(n,e)=>new uE(n,e);function b2(n,e,t,s){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,s);const r=BigInt(32),i=BigInt(4294967295),o=Number(t>>r&i),a=Number(t&i),l=s?4:0,c=s?0:4;n.setUint32(e+l,o,s),n.setUint32(e+c,a,s)}class hE extends hm{constructor(e,t,s,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=s,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Kf(this.buffer)}update(e){Ua(this);const{view:t,buffer:s,blockLen:r}=this;e=Mh(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(r-this.pos,i-o);if(a===r){const l=Kf(e);for(;r<=i-o;o+=r)this.process(l,o);continue}s.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===r&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ua(this),lE(e,this),this.finished=!0;const{buffer:t,view:s,blockLen:r,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(s,0),o=0);for(let f=o;f<r;f++)t[f]=0;b2(s,r-8,BigInt(this.length*8),i),this.process(s,0);const a=Kf(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,d=this.get();if(c>d.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<c;f++)a.setUint32(4*f,d[f],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const s=e.slice(0,t);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:s,length:r,finished:i,destroyed:o,pos:a}=this;return e.length=r,e.pos=a,e.finished=i,e.destroyed=o,r%t&&e.buffer.set(s),e}}const I2=(n,e,t)=>n&e^~n&t,C2=(n,e,t)=>n&e^n&t^e&t,T2=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ai=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),wi=new Uint32Array(64);class S2 extends hE{constructor(){super(64,32,8,!1),this.A=Ai[0]|0,this.B=Ai[1]|0,this.C=Ai[2]|0,this.D=Ai[3]|0,this.E=Ai[4]|0,this.F=Ai[5]|0,this.G=Ai[6]|0,this.H=Ai[7]|0}get(){const{A:e,B:t,C:s,D:r,E:i,F:o,G:a,H:l}=this;return[e,t,s,r,i,o,a,l]}set(e,t,s,r,i,o,a,l){this.A=e|0,this.B=t|0,this.C=s|0,this.D=r|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,t){for(let f=0;f<16;f++,t+=4)wi[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){const p=wi[f-15],m=wi[f-2],w=ur(p,7)^ur(p,18)^p>>>3,y=ur(m,17)^ur(m,19)^m>>>10;wi[f]=y+wi[f-7]+w+wi[f-16]|0}let{A:s,B:r,C:i,D:o,E:a,F:l,G:c,H:d}=this;for(let f=0;f<64;f++){const p=ur(a,6)^ur(a,11)^ur(a,25),m=d+p+I2(a,l,c)+T2[f]+wi[f]|0,y=(ur(s,2)^ur(s,13)^ur(s,22))+C2(s,r,i)|0;d=c,c=l,l=a,a=o+m|0,o=i,i=r,r=s,s=m+y|0}s=s+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,d=d+this.H|0,this.set(s,r,i,o,a,l,c,d)}roundClean(){wi.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const fE=fm(()=>new S2),Yu=BigInt(2**32-1),Wp=BigInt(32);function pE(n,e=!1){return e?{h:Number(n&Yu),l:Number(n>>Wp&Yu)}:{h:Number(n>>Wp&Yu)|0,l:Number(n&Yu)|0}}function gE(n,e=!1){let t=new Uint32Array(n.length),s=new Uint32Array(n.length);for(let r=0;r<n.length;r++){const{h:i,l:o}=pE(n[r],e);[t[r],s[r]]=[i,o]}return[t,s]}const P2=(n,e)=>BigInt(n>>>0)<<Wp|BigInt(e>>>0),R2=(n,e,t)=>n>>>t,x2=(n,e,t)=>n<<32-t|e>>>t,k2=(n,e,t)=>n>>>t|e<<32-t,N2=(n,e,t)=>n<<32-t|e>>>t,D2=(n,e,t)=>n<<64-t|e>>>t-32,O2=(n,e,t)=>n>>>t-32|e<<64-t,L2=(n,e)=>e,B2=(n,e)=>n,mE=(n,e,t)=>n<<t|e>>>32-t,vE=(n,e,t)=>e<<t|n>>>32-t,yE=(n,e,t)=>e<<t-32|n>>>64-t,AE=(n,e,t)=>n<<t-32|e>>>64-t;function M2(n,e,t,s){const r=(e>>>0)+(s>>>0);return{h:n+t+(r/2**32|0)|0,l:r|0}}const F2=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),U2=(n,e,t,s)=>e+t+s+(n/2**32|0)|0,V2=(n,e,t,s)=>(n>>>0)+(e>>>0)+(t>>>0)+(s>>>0),$2=(n,e,t,s,r)=>e+t+s+r+(n/2**32|0)|0,H2=(n,e,t,s,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(s>>>0)+(r>>>0),G2=(n,e,t,s,r,i)=>e+t+s+r+i+(n/2**32|0)|0,st={fromBig:pE,split:gE,toBig:P2,shrSH:R2,shrSL:x2,rotrSH:k2,rotrSL:N2,rotrBH:D2,rotrBL:O2,rotr32H:L2,rotr32L:B2,rotlSH:mE,rotlSL:vE,rotlBH:yE,rotlBL:AE,add:M2,add3L:F2,add3H:U2,add4L:V2,add4H:$2,add5H:G2,add5L:H2},[Q2,j2]=st.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),_i=new Uint32Array(80),Ei=new Uint32Array(80);class z2 extends hE{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:s,Bl:r,Ch:i,Cl:o,Dh:a,Dl:l,Eh:c,El:d,Fh:f,Fl:p,Gh:m,Gl:w,Hh:y,Hl:A}=this;return[e,t,s,r,i,o,a,l,c,d,f,p,m,w,y,A]}set(e,t,s,r,i,o,a,l,c,d,f,p,m,w,y,A){this.Ah=e|0,this.Al=t|0,this.Bh=s|0,this.Bl=r|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=d|0,this.Fh=f|0,this.Fl=p|0,this.Gh=m|0,this.Gl=w|0,this.Hh=y|0,this.Hl=A|0}process(e,t){for(let S=0;S<16;S++,t+=4)_i[S]=e.getUint32(t),Ei[S]=e.getUint32(t+=4);for(let S=16;S<80;S++){const B=_i[S-15]|0,V=Ei[S-15]|0,j=st.rotrSH(B,V,1)^st.rotrSH(B,V,8)^st.shrSH(B,V,7),x=st.rotrSL(B,V,1)^st.rotrSL(B,V,8)^st.shrSL(B,V,7),I=_i[S-2]|0,P=Ei[S-2]|0,T=st.rotrSH(I,P,19)^st.rotrBH(I,P,61)^st.shrSH(I,P,6),b=st.rotrSL(I,P,19)^st.rotrBL(I,P,61)^st.shrSL(I,P,6),D=st.add4L(x,b,Ei[S-7],Ei[S-16]),k=st.add4H(D,j,T,_i[S-7],_i[S-16]);_i[S]=k|0,Ei[S]=D|0}let{Ah:s,Al:r,Bh:i,Bl:o,Ch:a,Cl:l,Dh:c,Dl:d,Eh:f,El:p,Fh:m,Fl:w,Gh:y,Gl:A,Hh:_,Hl:C}=this;for(let S=0;S<80;S++){const B=st.rotrSH(f,p,14)^st.rotrSH(f,p,18)^st.rotrBH(f,p,41),V=st.rotrSL(f,p,14)^st.rotrSL(f,p,18)^st.rotrBL(f,p,41),j=f&m^~f&y,x=p&w^~p&A,I=st.add5L(C,V,x,j2[S],Ei[S]),P=st.add5H(I,_,B,j,Q2[S],_i[S]),T=I|0,b=st.rotrSH(s,r,28)^st.rotrBH(s,r,34)^st.rotrBH(s,r,39),D=st.rotrSL(s,r,28)^st.rotrBL(s,r,34)^st.rotrBL(s,r,39),k=s&i^s&a^i&a,ke=r&o^r&l^o&l;_=y|0,C=A|0,y=m|0,A=w|0,m=f|0,w=p|0,{h:f,l:p}=st.add(c|0,d|0,P|0,T|0),c=a|0,d=l|0,a=i|0,l=o|0,i=s|0,o=r|0;const ie=st.add3L(T,D,ke);s=st.add3H(ie,P,b,k),r=ie|0}({h:s,l:r}=st.add(this.Ah|0,this.Al|0,s|0,r|0)),{h:i,l:o}=st.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l}=st.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:d}=st.add(this.Dh|0,this.Dl|0,c|0,d|0),{h:f,l:p}=st.add(this.Eh|0,this.El|0,f|0,p|0),{h:m,l:w}=st.add(this.Fh|0,this.Fl|0,m|0,w|0),{h:y,l:A}=st.add(this.Gh|0,this.Gl|0,y|0,A|0),{h:_,l:C}=st.add(this.Hh|0,this.Hl|0,_|0,C|0),this.set(s,r,i,o,a,l,c,d,f,p,m,w,y,A,_,C)}roundClean(){_i.fill(0),Ei.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const W2=fm(()=>new z2);function K2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const d0=K2();d0.crypto||d0.msCrypto;function q2(n){switch(n){case"sha256":return fE.create();case"sha512":return W2.create()}H(!1,"invalid hashing algorithm name","algorithm",n)}const[wE,_E,EE]=[[],[],[]],J2=BigInt(0),uc=BigInt(1),Y2=BigInt(2),X2=BigInt(7),Z2=BigInt(256),ek=BigInt(113);for(let n=0,e=uc,t=1,s=0;n<24;n++){[t,s]=[s,(2*t+3*s)%5],wE.push(2*(5*s+t)),_E.push((n+1)*(n+2)/2%64);let r=J2;for(let i=0;i<7;i++)e=(e<<uc^(e>>X2)*ek)%Z2,e&Y2&&(r^=uc<<(uc<<BigInt(i))-uc);EE.push(r)}const[tk,nk]=gE(EE,!0),h0=(n,e,t)=>t>32?yE(n,e,t):mE(n,e,t),f0=(n,e,t)=>t>32?AE(n,e,t):vE(n,e,t);function sk(n,e=24){const t=new Uint32Array(10);for(let s=24-e;s<24;s++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=t[l],d=t[l+1],f=h0(c,d,1)^t[a],p=f0(c,d,1)^t[a+1];for(let m=0;m<50;m+=10)n[o+m]^=f,n[o+m+1]^=p}let r=n[2],i=n[3];for(let o=0;o<24;o++){const a=_E[o],l=h0(r,i,a),c=f0(r,i,a),d=wE[o];r=n[d],i=n[d+1],n[d]=l,n[d+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=n[o+a];for(let a=0;a<10;a++)n[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}n[0]^=tk[s],n[1]^=nk[s]}t.fill(0)}class pm extends hm{constructor(e,t,s,r=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=s,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Qd(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=y2(this.state)}keccak(){sk(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Ua(this);const{blockLen:t,state:s}=this;e=Mh(e);const r=e.length;for(let i=0;i<r;){const o=Math.min(t-this.pos,r-i);for(let a=0;a<o;a++)s[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:s,blockLen:r}=this;e[s]^=t,(t&128)!==0&&s===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){Ua(this,!1),dm(e),this.finish();const t=this.state,{blockLen:s}=this;for(let r=0,i=e.length;r<i;){this.posOut>=s&&this.keccak();const o=Math.min(s-this.posOut,i-r);e.set(t.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Qd(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(lE(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:s,outputLen:r,rounds:i,enableXOF:o}=this;return e||(e=new pm(t,s,r,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=s,e.outputLen=r,e.enableXOF=o,e.destroyed=this.destroyed,e}}const rk=(n,e,t)=>fm(()=>new pm(e,n,t)),ik=rk(1,136,256/8);let bE=!1;const IE=function(n){return ik(n)};let CE=IE;function mn(n){const e=ot(n,"data");return _e(CE(e))}mn._=IE;mn.lock=function(){bE=!0};mn.register=function(n){if(bE)throw new TypeError("keccak256 is locked");CE=n};Object.freeze(mn);const TE=function(n){return q2("sha256").update(n).digest()};let SE=TE,PE=!1;function nl(n){const e=ot(n,"data");return _e(SE(e))}nl._=TE;nl.lock=function(){PE=!0};nl.register=function(n){if(PE)throw new Error("sha256 is locked");SE=n};Object.freeze(nl);Object.freeze(nl);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const RE=BigInt(0),Fh=BigInt(1),ok=BigInt(2),Uh=n=>n instanceof Uint8Array,ak=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Va(n){if(!Uh(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=ak[n[t]];return e}function xE(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function gm(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function $a(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let s=0;s<t.length;s++){const r=s*2,i=n.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[s]=o}return t}function Do(n){return gm(Va(n))}function mm(n){if(!Uh(n))throw new Error("Uint8Array expected");return gm(Va(Uint8Array.from(n).reverse()))}function Ha(n,e){return $a(n.toString(16).padStart(e*2,"0"))}function vm(n,e){return Ha(n,e).reverse()}function lk(n){return $a(xE(n))}function zs(n,e,t){let s;if(typeof e=="string")try{s=$a(e)}catch(i){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${i}`)}else if(Uh(e))s=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const r=s.length;if(typeof t=="number"&&r!==t)throw new Error(`${n} expected ${t} bytes, got ${r}`);return s}function jc(...n){const e=new Uint8Array(n.reduce((s,r)=>s+r.length,0));let t=0;return n.forEach(s=>{if(!Uh(s))throw new Error("Uint8Array expected");e.set(s,t),t+=s.length}),e}function ck(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function uk(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function dk(n){let e;for(e=0;n>RE;n>>=Fh,e+=1);return e}function hk(n,e){return n>>BigInt(e)&Fh}const fk=(n,e,t)=>n|(t?Fh:RE)<<BigInt(e),ym=n=>(ok<<BigInt(n-1))-Fh,qf=n=>new Uint8Array(n),p0=n=>Uint8Array.from(n);function kE(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let s=qf(n),r=qf(n),i=0;const o=()=>{s.fill(1),r.fill(0),i=0},a=(...f)=>t(r,s,...f),l=(f=qf())=>{r=a(p0([0]),f),s=a(),f.length!==0&&(r=a(p0([1]),f),s=a())},c=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){s=a();const m=s.slice();p.push(m),f+=s.length}return jc(...p)};return(f,p)=>{o(),l(f);let m;for(;!(m=p(c()));)l();return o(),m}}const pk={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function mu(n,e,t={}){const s=(r,i,o)=>{const a=pk[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const l=n[r];if(!(o&&l===void 0)&&!a(l,n))throw new Error(`Invalid param ${String(r)}=${l} (${typeof l}), expected ${i}`)};for(const[r,i]of Object.entries(e))s(r,i,!1);for(const[r,i]of Object.entries(t))s(r,i,!0);return n}const gk=Object.freeze(Object.defineProperty({__proto__:null,bitGet:hk,bitLen:dk,bitMask:ym,bitSet:fk,bytesToHex:Va,bytesToNumberBE:Do,bytesToNumberLE:mm,concatBytes:jc,createHmacDrbg:kE,ensureBytes:zs,equalBytes:ck,hexToBytes:$a,hexToNumber:gm,numberToBytesBE:Ha,numberToBytesLE:vm,numberToHexUnpadded:xE,numberToVarBytesBE:lk,utf8ToBytes:uk,validateObject:mu},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dn=BigInt(0),dn=BigInt(1),Eo=BigInt(2),mk=BigInt(3),Kp=BigInt(4),g0=BigInt(5),m0=BigInt(8);BigInt(9);BigInt(16);function ws(n,e){const t=n%e;return t>=Dn?t:e+t}function vk(n,e,t){if(t<=Dn||e<Dn)throw new Error("Expected power/modulo > 0");if(t===dn)return Dn;let s=dn;for(;e>Dn;)e&dn&&(s=s*n%t),n=n*n%t,e>>=dn;return s}function Bs(n,e,t){let s=n;for(;e-- >Dn;)s*=s,s%=t;return s}function qp(n,e){if(n===Dn||e<=Dn)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=ws(n,e),s=e,r=Dn,i=dn;for(;t!==Dn;){const a=s/t,l=s%t,c=r-i*a;s=t,t=l,r=i,i=c}if(s!==dn)throw new Error("invert: does not exist");return ws(r,e)}function yk(n){const e=(n-dn)/Eo;let t,s,r;for(t=n-dn,s=0;t%Eo===Dn;t/=Eo,s++);for(r=Eo;r<n&&vk(r,e,n)!==n-dn;r++);if(s===1){const o=(n+dn)/Kp;return function(l,c){const d=l.pow(c,o);if(!l.eql(l.sqr(d),c))throw new Error("Cannot find square root");return d}}const i=(t+dn)/Eo;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=s,d=a.pow(a.mul(a.ONE,r),t),f=a.pow(l,i),p=a.pow(l,t);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let m=1;for(let y=a.sqr(p);m<c&&!a.eql(y,a.ONE);m++)y=a.sqr(y);const w=a.pow(d,dn<<BigInt(c-m-1));d=a.sqr(w),f=a.mul(f,w),p=a.mul(p,d),c=m}return f}}function Ak(n){if(n%Kp===mk){const e=(n+dn)/Kp;return function(s,r){const i=s.pow(r,e);if(!s.eql(s.sqr(i),r))throw new Error("Cannot find square root");return i}}if(n%m0===g0){const e=(n-g0)/m0;return function(s,r){const i=s.mul(r,Eo),o=s.pow(i,e),a=s.mul(r,o),l=s.mul(s.mul(a,Eo),o),c=s.mul(a,s.sub(l,s.ONE));if(!s.eql(s.sqr(c),r))throw new Error("Cannot find square root");return c}}return yk(n)}const wk=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function _k(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=wk.reduce((s,r)=>(s[r]="function",s),e);return mu(n,t)}function Ek(n,e,t){if(t<Dn)throw new Error("Expected power > 0");if(t===Dn)return n.ONE;if(t===dn)return e;let s=n.ONE,r=e;for(;t>Dn;)t&dn&&(s=n.mul(s,r)),r=n.sqr(r),t>>=dn;return s}function bk(n,e){const t=new Array(e.length),s=e.reduce((i,o,a)=>n.is0(o)?i:(t[a]=i,n.mul(i,o)),n.ONE),r=n.inv(s);return e.reduceRight((i,o,a)=>n.is0(o)?i:(t[a]=n.mul(i,t[a]),n.mul(i,o)),r),t}function NE(n,e){const t=e!==void 0?e:n.toString(2).length,s=Math.ceil(t/8);return{nBitLength:t,nByteLength:s}}function Ik(n,e,t=!1,s={}){if(n<=Dn)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:r,nByteLength:i}=NE(n,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Ak(n),a=Object.freeze({ORDER:n,BITS:r,BYTES:i,MASK:ym(r),ZERO:Dn,ONE:dn,create:l=>ws(l,n),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return Dn<=l&&l<n},is0:l=>l===Dn,isOdd:l=>(l&dn)===dn,neg:l=>ws(-l,n),eql:(l,c)=>l===c,sqr:l=>ws(l*l,n),add:(l,c)=>ws(l+c,n),sub:(l,c)=>ws(l-c,n),mul:(l,c)=>ws(l*c,n),pow:(l,c)=>Ek(a,l,c),div:(l,c)=>ws(l*qp(c,n),n),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>qp(l,n),sqrt:s.sqrt||(l=>o(a,l)),invertBatch:l=>bk(a,l),cmov:(l,c,d)=>d?c:l,toBytes:l=>t?vm(l,i):Ha(l,i),fromBytes:l=>{if(l.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${l.length}`);return t?mm(l):Do(l)}});return Object.freeze(a)}function DE(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function OE(n){const e=DE(n);return e+Math.ceil(e/2)}function Ck(n,e,t=!1){const s=n.length,r=DE(e),i=OE(e);if(s<16||s<i||s>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${s}`);const o=t?Do(n):mm(n),a=ws(o,e-dn)+dn;return t?vm(a,r):Ha(a,r)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Tk=BigInt(0),Jf=BigInt(1);function Sk(n,e){const t=(r,i)=>{const o=i.negate();return r?o:i},s=r=>{const i=Math.ceil(e/r)+1,o=2**(r-1);return{windows:i,windowSize:o}};return{constTimeNegate:t,unsafeLadder(r,i){let o=n.ZERO,a=r;for(;i>Tk;)i&Jf&&(o=o.add(a)),a=a.double(),i>>=Jf;return o},precomputeWindow(r,i){const{windows:o,windowSize:a}=s(i),l=[];let c=r,d=c;for(let f=0;f<o;f++){d=c,l.push(d);for(let p=1;p<a;p++)d=d.add(c),l.push(d);c=d.double()}return l},wNAF(r,i,o){const{windows:a,windowSize:l}=s(r);let c=n.ZERO,d=n.BASE;const f=BigInt(2**r-1),p=2**r,m=BigInt(r);for(let w=0;w<a;w++){const y=w*l;let A=Number(o&f);o>>=m,A>l&&(A-=p,o+=Jf);const _=y,C=y+Math.abs(A)-1,S=w%2!==0,B=A<0;A===0?d=d.add(t(S,i[_])):c=c.add(t(B,i[C]))}return{p:c,f:d}},wNAFCached(r,i,o,a){const l=r._WINDOW_SIZE||1;let c=i.get(r);return c||(c=this.precomputeWindow(r,l),l!==1&&i.set(r,a(c))),this.wNAF(l,c,o)}}}function LE(n){return _k(n.Fp),mu(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...NE(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Pk(n){const e=LE(n);mu(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:s,a:r}=e;if(t){if(!s.eql(r,s.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:Rk,hexToBytes:xk}=gk,So={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=So;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],s=n.subarray(2,t+2);if(!t||s.length!==t)throw new e("Invalid signature integer: wrong length");if(s[0]&128)throw new e("Invalid signature integer: negative");if(s[0]===0&&!(s[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:Rk(s),l:n.subarray(t+2)}},toSig(n){const{Err:e}=So,t=typeof n=="string"?xk(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let s=t.length;if(s<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==s-2)throw new e("Invalid signature: incorrect length");const{d:r,l:i}=So._parseInt(t.subarray(2)),{d:o,l:a}=So._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r,s:o}},hexFromSig(n){const e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,t=c=>{const d=c.toString(16);return d.length&1?`0${d}`:d},s=e(t(n.s)),r=e(t(n.r)),i=s.length/2,o=r.length/2,a=t(i),l=t(o);return`30${t(o+i+4)}02${l}${r}02${a}${s}`}},Vr=BigInt(0),Ms=BigInt(1);BigInt(2);const v0=BigInt(3);BigInt(4);function kk(n){const e=Pk(n),{Fp:t}=e,s=e.toBytes||((w,y,A)=>{const _=y.toAffine();return jc(Uint8Array.from([4]),t.toBytes(_.x),t.toBytes(_.y))}),r=e.fromBytes||(w=>{const y=w.subarray(1),A=t.fromBytes(y.subarray(0,t.BYTES)),_=t.fromBytes(y.subarray(t.BYTES,2*t.BYTES));return{x:A,y:_}});function i(w){const{a:y,b:A}=e,_=t.sqr(w),C=t.mul(_,w);return t.add(t.add(C,t.mul(w,y)),A)}if(!t.eql(t.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(w){return typeof w=="bigint"&&Vr<w&&w<e.n}function a(w){if(!o(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(w){const{allowedPrivateKeyLengths:y,nByteLength:A,wrapPrivateKey:_,n:C}=e;if(y&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=Va(w)),typeof w!="string"||!y.includes(w.length))throw new Error("Invalid key");w=w.padStart(A*2,"0")}let S;try{S=typeof w=="bigint"?w:Do(zs("private key",w,A))}catch{throw new Error(`private key must be ${A} bytes, hex or bigint, not ${typeof w}`)}return _&&(S=ws(S,C)),a(S),S}const c=new Map;function d(w){if(!(w instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(y,A,_){if(this.px=y,this.py=A,this.pz=_,y==null||!t.isValid(y))throw new Error("x required");if(A==null||!t.isValid(A))throw new Error("y required");if(_==null||!t.isValid(_))throw new Error("z required")}static fromAffine(y){const{x:A,y:_}=y||{};if(!y||!t.isValid(A)||!t.isValid(_))throw new Error("invalid affine point");if(y instanceof f)throw new Error("projective point not allowed");const C=S=>t.eql(S,t.ZERO);return C(A)&&C(_)?f.ZERO:new f(A,_,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){const A=t.invertBatch(y.map(_=>_.pz));return y.map((_,C)=>_.toAffine(A[C])).map(f.fromAffine)}static fromHex(y){const A=f.fromAffine(r(zs("pointHex",y)));return A.assertValidity(),A}static fromPrivateKey(y){return f.BASE.multiply(l(y))}_setWindowSize(y){this._WINDOW_SIZE=y,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:y,y:A}=this.toAffine();if(!t.isValid(y)||!t.isValid(A))throw new Error("bad point: x or y not FE");const _=t.sqr(A),C=i(y);if(!t.eql(_,C))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y}=this.toAffine();if(t.isOdd)return!t.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){d(y);const{px:A,py:_,pz:C}=this,{px:S,py:B,pz:V}=y,j=t.eql(t.mul(A,V),t.mul(S,C)),x=t.eql(t.mul(_,V),t.mul(B,C));return j&&x}negate(){return new f(this.px,t.neg(this.py),this.pz)}double(){const{a:y,b:A}=e,_=t.mul(A,v0),{px:C,py:S,pz:B}=this;let V=t.ZERO,j=t.ZERO,x=t.ZERO,I=t.mul(C,C),P=t.mul(S,S),T=t.mul(B,B),b=t.mul(C,S);return b=t.add(b,b),x=t.mul(C,B),x=t.add(x,x),V=t.mul(y,x),j=t.mul(_,T),j=t.add(V,j),V=t.sub(P,j),j=t.add(P,j),j=t.mul(V,j),V=t.mul(b,V),x=t.mul(_,x),T=t.mul(y,T),b=t.sub(I,T),b=t.mul(y,b),b=t.add(b,x),x=t.add(I,I),I=t.add(x,I),I=t.add(I,T),I=t.mul(I,b),j=t.add(j,I),T=t.mul(S,B),T=t.add(T,T),I=t.mul(T,b),V=t.sub(V,I),x=t.mul(T,P),x=t.add(x,x),x=t.add(x,x),new f(V,j,x)}add(y){d(y);const{px:A,py:_,pz:C}=this,{px:S,py:B,pz:V}=y;let j=t.ZERO,x=t.ZERO,I=t.ZERO;const P=e.a,T=t.mul(e.b,v0);let b=t.mul(A,S),D=t.mul(_,B),k=t.mul(C,V),ke=t.add(A,_),ie=t.add(S,B);ke=t.mul(ke,ie),ie=t.add(b,D),ke=t.sub(ke,ie),ie=t.add(A,C);let G=t.add(S,V);return ie=t.mul(ie,G),G=t.add(b,k),ie=t.sub(ie,G),G=t.add(_,C),j=t.add(B,V),G=t.mul(G,j),j=t.add(D,k),G=t.sub(G,j),I=t.mul(P,ie),j=t.mul(T,k),I=t.add(j,I),j=t.sub(D,I),I=t.add(D,I),x=t.mul(j,I),D=t.add(b,b),D=t.add(D,b),k=t.mul(P,k),ie=t.mul(T,ie),D=t.add(D,k),k=t.sub(b,k),k=t.mul(P,k),ie=t.add(ie,k),b=t.mul(D,ie),x=t.add(x,b),b=t.mul(G,ie),j=t.mul(ke,j),j=t.sub(j,b),b=t.mul(ke,D),I=t.mul(G,I),I=t.add(I,b),new f(j,x,I)}subtract(y){return this.add(y.negate())}is0(){return this.equals(f.ZERO)}wNAF(y){return m.wNAFCached(this,c,y,A=>{const _=t.invertBatch(A.map(C=>C.pz));return A.map((C,S)=>C.toAffine(_[S])).map(f.fromAffine)})}multiplyUnsafe(y){const A=f.ZERO;if(y===Vr)return A;if(a(y),y===Ms)return this;const{endo:_}=e;if(!_)return m.unsafeLadder(this,y);let{k1neg:C,k1:S,k2neg:B,k2:V}=_.splitScalar(y),j=A,x=A,I=this;for(;S>Vr||V>Vr;)S&Ms&&(j=j.add(I)),V&Ms&&(x=x.add(I)),I=I.double(),S>>=Ms,V>>=Ms;return C&&(j=j.negate()),B&&(x=x.negate()),x=new f(t.mul(x.px,_.beta),x.py,x.pz),j.add(x)}multiply(y){a(y);let A=y,_,C;const{endo:S}=e;if(S){const{k1neg:B,k1:V,k2neg:j,k2:x}=S.splitScalar(A);let{p:I,f:P}=this.wNAF(V),{p:T,f:b}=this.wNAF(x);I=m.constTimeNegate(B,I),T=m.constTimeNegate(j,T),T=new f(t.mul(T.px,S.beta),T.py,T.pz),_=I.add(T),C=P.add(b)}else{const{p:B,f:V}=this.wNAF(A);_=B,C=V}return f.normalizeZ([_,C])[0]}multiplyAndAddUnsafe(y,A,_){const C=f.BASE,S=(V,j)=>j===Vr||j===Ms||!V.equals(C)?V.multiplyUnsafe(j):V.multiply(j),B=S(this,A).add(S(y,_));return B.is0()?void 0:B}toAffine(y){const{px:A,py:_,pz:C}=this,S=this.is0();y==null&&(y=S?t.ONE:t.inv(C));const B=t.mul(A,y),V=t.mul(_,y),j=t.mul(C,y);if(S)return{x:t.ZERO,y:t.ZERO};if(!t.eql(j,t.ONE))throw new Error("invZ was invalid");return{x:B,y:V}}isTorsionFree(){const{h:y,isTorsionFree:A}=e;if(y===Ms)return!0;if(A)return A(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:y,clearCofactor:A}=e;return y===Ms?this:A?A(f,this):this.multiplyUnsafe(e.h)}toRawBytes(y=!0){return this.assertValidity(),s(f,this,y)}toHex(y=!0){return Va(this.toRawBytes(y))}}f.BASE=new f(e.Gx,e.Gy,t.ONE),f.ZERO=new f(t.ZERO,t.ONE,t.ZERO);const p=e.nBitLength,m=Sk(f,e.endo?Math.ceil(p/2):p);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:l,weierstrassEquation:i,isWithinCurveOrder:o}}function Nk(n){const e=LE(n);return mu(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Dk(n){const e=Nk(n),{Fp:t,n:s}=e,r=t.BYTES+1,i=2*t.BYTES+1;function o(ie){return Vr<ie&&ie<t.ORDER}function a(ie){return ws(ie,s)}function l(ie){return qp(ie,s)}const{ProjectivePoint:c,normPrivateKeyToScalar:d,weierstrassEquation:f,isWithinCurveOrder:p}=kk({...e,toBytes(ie,G,$){const Z=G.toAffine(),me=t.toBytes(Z.x),Ve=jc;return $?Ve(Uint8Array.from([G.hasEvenY()?2:3]),me):Ve(Uint8Array.from([4]),me,t.toBytes(Z.y))},fromBytes(ie){const G=ie.length,$=ie[0],Z=ie.subarray(1);if(G===r&&($===2||$===3)){const me=Do(Z);if(!o(me))throw new Error("Point is not on curve");const Ve=f(me);let Ne=t.sqrt(Ve);const se=(Ne&Ms)===Ms;return($&1)===1!==se&&(Ne=t.neg(Ne)),{x:me,y:Ne}}else if(G===i&&$===4){const me=t.fromBytes(Z.subarray(0,t.BYTES)),Ve=t.fromBytes(Z.subarray(t.BYTES,2*t.BYTES));return{x:me,y:Ve}}else throw new Error(`Point of length ${G} was invalid. Expected ${r} compressed bytes or ${i} uncompressed bytes`)}}),m=ie=>Va(Ha(ie,e.nByteLength));function w(ie){const G=s>>Ms;return ie>G}function y(ie){return w(ie)?a(-ie):ie}const A=(ie,G,$)=>Do(ie.slice(G,$));class _{constructor(G,$,Z){this.r=G,this.s=$,this.recovery=Z,this.assertValidity()}static fromCompact(G){const $=e.nByteLength;return G=zs("compactSignature",G,$*2),new _(A(G,0,$),A(G,$,2*$))}static fromDER(G){const{r:$,s:Z}=So.toSig(zs("DER",G));return new _($,Z)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(G){return new _(this.r,this.s,G)}recoverPublicKey(G){const{r:$,s:Z,recovery:me}=this,Ve=x(zs("msgHash",G));if(me==null||![0,1,2,3].includes(me))throw new Error("recovery id invalid");const Ne=me===2||me===3?$+e.n:$;if(Ne>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const se=(me&1)===0?"02":"03",W=c.fromHex(se+m(Ne)),ue=l(Ne),Pe=a(-Ve*ue),tt=a(Z*ue),Y=c.BASE.multiplyAndAddUnsafe(W,Pe,tt);if(!Y)throw new Error("point at infinify");return Y.assertValidity(),Y}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return $a(this.toDERHex())}toDERHex(){return So.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return $a(this.toCompactHex())}toCompactHex(){return m(this.r)+m(this.s)}}const C={isValidPrivateKey(ie){try{return d(ie),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const ie=OE(e.n);return Ck(e.randomBytes(ie),e.n)},precompute(ie=8,G=c.BASE){return G._setWindowSize(ie),G.multiply(BigInt(3)),G}};function S(ie,G=!0){return c.fromPrivateKey(ie).toRawBytes(G)}function B(ie){const G=ie instanceof Uint8Array,$=typeof ie=="string",Z=(G||$)&&ie.length;return G?Z===r||Z===i:$?Z===2*r||Z===2*i:ie instanceof c}function V(ie,G,$=!0){if(B(ie))throw new Error("first arg must be private key");if(!B(G))throw new Error("second arg must be public key");return c.fromHex(G).multiply(d(ie)).toRawBytes($)}const j=e.bits2int||function(ie){const G=Do(ie),$=ie.length*8-e.nBitLength;return $>0?G>>BigInt($):G},x=e.bits2int_modN||function(ie){return a(j(ie))},I=ym(e.nBitLength);function P(ie){if(typeof ie!="bigint")throw new Error("bigint expected");if(!(Vr<=ie&&ie<I))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Ha(ie,e.nByteLength)}function T(ie,G,$=b){if(["recovered","canonical"].some(fe=>fe in $))throw new Error("sign() legacy options not supported");const{hash:Z,randomBytes:me}=e;let{lowS:Ve,prehash:Ne,extraEntropy:se}=$;Ve==null&&(Ve=!0),ie=zs("msgHash",ie),Ne&&(ie=zs("prehashed msgHash",Z(ie)));const W=x(ie),ue=d(G),Pe=[P(ue),P(W)];if(se!=null){const fe=se===!0?me(t.BYTES):se;Pe.push(zs("extraEntropy",fe))}const tt=jc(...Pe),Y=W;function ge(fe){const we=j(fe);if(!p(we))return;const Qe=l(we),N=c.BASE.multiply(we).toAffine(),O=a(N.x);if(O===Vr)return;const Q=a(Qe*a(Y+O*ue));if(Q===Vr)return;let te=(N.x===O?0:2)|Number(N.y&Ms),K=Q;return Ve&&w(Q)&&(K=y(Q),te^=1),new _(O,K,te)}return{seed:tt,k2sig:ge}}const b={lowS:e.lowS,prehash:!1},D={lowS:e.lowS,prehash:!1};function k(ie,G,$=b){const{seed:Z,k2sig:me}=T(ie,G,$),Ve=e;return kE(Ve.hash.outputLen,Ve.nByteLength,Ve.hmac)(Z,me)}c.BASE._setWindowSize(8);function ke(ie,G,$,Z=D){const me=ie;if(G=zs("msgHash",G),$=zs("publicKey",$),"strict"in Z)throw new Error("options.strict was renamed to lowS");const{lowS:Ve,prehash:Ne}=Z;let se,W;try{if(typeof me=="string"||me instanceof Uint8Array)try{se=_.fromDER(me)}catch(N){if(!(N instanceof So.Err))throw N;se=_.fromCompact(me)}else if(typeof me=="object"&&typeof me.r=="bigint"&&typeof me.s=="bigint"){const{r:N,s:O}=me;se=new _(N,O)}else throw new Error("PARSE");W=c.fromHex($)}catch(N){if(N.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Ve&&se.hasHighS())return!1;Ne&&(G=e.hash(G));const{r:ue,s:Pe}=se,tt=x(G),Y=l(Pe),ge=a(tt*Y),fe=a(ue*Y),we=c.BASE.multiplyAndAddUnsafe(W,ge,fe)?.toAffine();return we?a(we.x)===ue:!1}return{CURVE:e,getPublicKey:S,getSharedSecret:V,sign:k,verify:ke,ProjectivePoint:c,Signature:_,utils:C}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ok(n){return{hash:n,hmac:(e,...t)=>dE(n,e,_2(...t)),randomBytes:E2}}function Lk(n,e){const t=s=>Dk({...n,...Ok(s)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const BE=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),y0=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Bk=BigInt(1),Jp=BigInt(2),A0=(n,e)=>(n+e/Jp)/e;function Mk(n){const e=BE,t=BigInt(3),s=BigInt(6),r=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=n*n*n%e,d=c*c*n%e,f=Bs(d,t,e)*d%e,p=Bs(f,t,e)*d%e,m=Bs(p,Jp,e)*c%e,w=Bs(m,r,e)*m%e,y=Bs(w,i,e)*w%e,A=Bs(y,a,e)*y%e,_=Bs(A,l,e)*A%e,C=Bs(_,a,e)*y%e,S=Bs(C,t,e)*d%e,B=Bs(S,o,e)*w%e,V=Bs(B,s,e)*c%e,j=Bs(V,Jp,e);if(!Yp.eql(Yp.sqr(j),n))throw new Error("Cannot find square root");return j}const Yp=Ik(BE,void 0,void 0,{sqrt:Mk}),Ii=Lk({a:BigInt(0),b:BigInt(7),Fp:Yp,n:y0,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=y0,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),s=-Bk*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,o=BigInt("0x100000000000000000000000000000000"),a=A0(i*n,e),l=A0(-s*n,e);let c=ws(n-a*t-l*r,e),d=ws(-a*s-l*i,e);const f=c>o,p=d>o;if(f&&(c=e-c),p&&(d=e-d),c>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:f,k1:c,k2neg:p,k2:d}}}},fE);BigInt(0);Ii.ProjectivePoint;const zc="0x0000000000000000000000000000000000000000",w0="0x0000000000000000000000000000000000000000000000000000000000000000",_0=BigInt(0),E0=BigInt(1),b0=BigInt(2),I0=BigInt(27),C0=BigInt(28),Xu=BigInt(35),aa={};function T0(n){return ti(Cn(n),32)}class tn{#e;#t;#n;#s;get r(){return this.#e}set r(e){H(Ca(e)===32,"invalid r","value",e),this.#e=_e(e)}get s(){return H(parseInt(this.#t.substring(0,3))<8,"non-canonical s; use ._s","s",this.#t),this.#t}set s(e){H(Ca(e)===32,"invalid s","value",e),this.#t=_e(e)}get _s(){return this.#t}isValid(){return parseInt(this.#t.substring(0,3))<8}get v(){return this.#n}set v(e){const t=rt(e,"value");H(t===27||t===28,"invalid v","v",e),this.#n=t}get networkV(){return this.#s}get legacyChainId(){const e=this.networkV;return e==null?null:tn.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=ot(this.s);return this.yParity&&(e[0]|=128),_e(e)}get compactSerialized(){return sn([this.r,this.yParityAndS])}get serialized(){return sn([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,s,r){pu(e,aa,"Signature"),this.#e=t,this.#t=s,this.#n=r,this.#s=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new tn(aa,this.r,this._s,this.v);return this.networkV&&(e.#s=this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const t=Se(e,"v");return t==I0||t==C0?_0:(H(t>=Xu,"invalid EIP-155 v","v",e),(t-Xu)/b0)}static getChainIdV(e,t){return Se(e)*b0+BigInt(35+t-27)}static getNormalizedV(e){const t=Se(e);return t===_0||t===I0?27:t===E0||t===C0?28:(H(t>=Xu,"invalid v","v",e),t&E0?27:28)}static from(e){function t(c,d){H(c,d,"signature",e)}if(e==null)return new tn(aa,w0,w0,27);if(typeof e=="string"){const c=ot(e,"signature");if(c.length===64){const d=_e(c.slice(0,32)),f=c.slice(32,64),p=f[0]&128?28:27;return f[0]&=127,new tn(aa,d,_e(f),p)}if(c.length===65){const d=_e(c.slice(0,32)),f=_e(c.slice(32,64)),p=tn.getNormalizedV(c[64]);return new tn(aa,d,f,p)}t(!1,"invalid raw signature length")}if(e instanceof tn)return e.clone();const s=e.r;t(s!=null,"missing r");const r=T0(s),i=(function(c,d){if(c!=null)return T0(c);if(d!=null){t(Bt(d,32),"invalid yParityAndS");const f=ot(d);return f[0]&=127,_e(f)}t(!1,"missing s")})(e.s,e.yParityAndS),{networkV:o,v:a}=(function(c,d,f){if(c!=null){const p=Se(c);return{networkV:p>=Xu?p:void 0,v:tn.getNormalizedV(p)}}if(d!=null)return t(Bt(d,32),"invalid yParityAndS"),{v:ot(d)[0]&128?28:27};if(f!=null){switch(rt(f,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),l=new tn(aa,r,i,a);return o&&(l.#s=o),t(e.yParity==null||rt(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}}class $r{#e;constructor(e){H(Ca(e)===32,"invalid private key","privateKey","[REDACTED]"),this.#e=_e(e)}get privateKey(){return this.#e}get publicKey(){return $r.computePublicKey(this.#e)}get compressedPublicKey(){return $r.computePublicKey(this.#e,!0)}sign(e){H(Ca(e)===32,"invalid digest length","digest",e);const t=Ii.sign(ls(e),ls(this.#e),{lowS:!0});return tn.from({r:zi(t.r,32),s:zi(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=$r.computePublicKey(e);return _e(Ii.getSharedSecret(ls(this.#e),ot(t),!1))}static computePublicKey(e,t){let s=ot(e,"key");if(s.length===32){const i=Ii.getPublicKey(s,!!t);return _e(i)}if(s.length===64){const i=new Uint8Array(65);i[0]=4,i.set(s,1),s=i}const r=Ii.ProjectivePoint.fromHex(s);return _e(r.toRawBytes(t))}static recoverPublicKey(e,t){H(Ca(e)===32,"invalid digest length","digest",e);const s=tn.from(t);let r=Ii.Signature.fromCompact(ls(sn([s.r,s.s])));r=r.addRecoveryBit(s.yParity);const i=r.recoverPublicKey(ls(e));return H(i!=null,"invalid signature for digest","signature",t),"0x"+i.toHex(!1)}static addPoints(e,t,s){const r=Ii.ProjectivePoint.fromHex($r.computePublicKey(e).substring(2)),i=Ii.ProjectivePoint.fromHex($r.computePublicKey(t).substring(2));return"0x"+r.add(i).toHex(!!s)}}const Fk=BigInt(0),Uk=BigInt(36);function S0(n){n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let r=0;r<40;r++)t[r]=e[r].charCodeAt(0);const s=ot(mn(t));for(let r=0;r<40;r+=2)s[r>>1]>>4>=8&&(e[r]=e[r].toUpperCase()),(s[r>>1]&15)>=8&&(e[r+1]=e[r+1].toUpperCase());return"0x"+e.join("")}const Am={};for(let n=0;n<10;n++)Am[String(n)]=String(n);for(let n=0;n<26;n++)Am[String.fromCharCode(65+n)]=String(10+n);const P0=15;function Vk(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(s=>Am[s]).join("");for(;e.length>=P0;){let s=e.substring(0,P0);e=parseInt(s,10)%97+e.substring(s.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const $k=(function(){const n={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];n[t]=BigInt(e)}return n})();function Hk(n){n=n.toLowerCase();let e=Fk;for(let t=0;t<n.length;t++)e=e*Uk+$k[n[t]];return e}function bt(n){if(H(typeof n=="string","invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/)){n.startsWith("0x")||(n="0x"+n);const e=S0(n);return H(!n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===n,"bad address checksum","address",n),e}if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){H(n.substring(2,4)===Vk(n),"bad icap checksum","address",n);let e=Hk(n.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return S0("0x"+e)}H(!1,"invalid address","address",n)}function Gk(n){const e=bt(n.from);let s=Se(n.nonce,"tx.nonce").toString(16);return s==="0"?s="0x":s.length%2?s="0x0"+s:s="0x"+s,bt(en(mn(Wi([e,s])),12))}function ME(n){return n&&typeof n.getAddress=="function"}async function Yf(n,e){const t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(ce(typeof n!="string","unconfigured name","UNCONFIGURED_NAME",{value:n}),H(!1,"invalid AddressLike value; did not resolve to a value address","target",n)),bt(t)}function ds(n,e){if(typeof n=="string")return n.match(/^0x[0-9a-f]{40}$/i)?bt(n):(ce(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Yf(n,e.resolveName(n)));if(ME(n))return Yf(n,n.getAddress());if(n&&typeof n.then=="function")return Yf(n,n);H(!1,"unsupported addressable value","target",n)}const Or={};function Te(n,e){let t=!1;return e<0&&(t=!0,e*=-1),new nn(Or,`${t?"":"u"}int${e}`,n,{signed:t,width:e})}function mt(n,e){return new nn(Or,`bytes${e||""}`,n,{size:e})}const R0=Symbol.for("_ethers_typed");class nn{type;value;#e;_typedSymbol;constructor(e,t,s,r){r==null&&(r=null),pu(Or,e,"Typed"),Ge(this,{_typedSymbol:R0,type:t,value:s}),this.#e=r,this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return this.#e}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return this.#e===!0?-1:this.#e===!1?this.value.length:null}static from(e,t){return new nn(Or,e,t)}static uint8(e){return Te(e,8)}static uint16(e){return Te(e,16)}static uint24(e){return Te(e,24)}static uint32(e){return Te(e,32)}static uint40(e){return Te(e,40)}static uint48(e){return Te(e,48)}static uint56(e){return Te(e,56)}static uint64(e){return Te(e,64)}static uint72(e){return Te(e,72)}static uint80(e){return Te(e,80)}static uint88(e){return Te(e,88)}static uint96(e){return Te(e,96)}static uint104(e){return Te(e,104)}static uint112(e){return Te(e,112)}static uint120(e){return Te(e,120)}static uint128(e){return Te(e,128)}static uint136(e){return Te(e,136)}static uint144(e){return Te(e,144)}static uint152(e){return Te(e,152)}static uint160(e){return Te(e,160)}static uint168(e){return Te(e,168)}static uint176(e){return Te(e,176)}static uint184(e){return Te(e,184)}static uint192(e){return Te(e,192)}static uint200(e){return Te(e,200)}static uint208(e){return Te(e,208)}static uint216(e){return Te(e,216)}static uint224(e){return Te(e,224)}static uint232(e){return Te(e,232)}static uint240(e){return Te(e,240)}static uint248(e){return Te(e,248)}static uint256(e){return Te(e,256)}static uint(e){return Te(e,256)}static int8(e){return Te(e,-8)}static int16(e){return Te(e,-16)}static int24(e){return Te(e,-24)}static int32(e){return Te(e,-32)}static int40(e){return Te(e,-40)}static int48(e){return Te(e,-48)}static int56(e){return Te(e,-56)}static int64(e){return Te(e,-64)}static int72(e){return Te(e,-72)}static int80(e){return Te(e,-80)}static int88(e){return Te(e,-88)}static int96(e){return Te(e,-96)}static int104(e){return Te(e,-104)}static int112(e){return Te(e,-112)}static int120(e){return Te(e,-120)}static int128(e){return Te(e,-128)}static int136(e){return Te(e,-136)}static int144(e){return Te(e,-144)}static int152(e){return Te(e,-152)}static int160(e){return Te(e,-160)}static int168(e){return Te(e,-168)}static int176(e){return Te(e,-176)}static int184(e){return Te(e,-184)}static int192(e){return Te(e,-192)}static int200(e){return Te(e,-200)}static int208(e){return Te(e,-208)}static int216(e){return Te(e,-216)}static int224(e){return Te(e,-224)}static int232(e){return Te(e,-232)}static int240(e){return Te(e,-240)}static int248(e){return Te(e,-248)}static int256(e){return Te(e,-256)}static int(e){return Te(e,-256)}static bytes1(e){return mt(e,1)}static bytes2(e){return mt(e,2)}static bytes3(e){return mt(e,3)}static bytes4(e){return mt(e,4)}static bytes5(e){return mt(e,5)}static bytes6(e){return mt(e,6)}static bytes7(e){return mt(e,7)}static bytes8(e){return mt(e,8)}static bytes9(e){return mt(e,9)}static bytes10(e){return mt(e,10)}static bytes11(e){return mt(e,11)}static bytes12(e){return mt(e,12)}static bytes13(e){return mt(e,13)}static bytes14(e){return mt(e,14)}static bytes15(e){return mt(e,15)}static bytes16(e){return mt(e,16)}static bytes17(e){return mt(e,17)}static bytes18(e){return mt(e,18)}static bytes19(e){return mt(e,19)}static bytes20(e){return mt(e,20)}static bytes21(e){return mt(e,21)}static bytes22(e){return mt(e,22)}static bytes23(e){return mt(e,23)}static bytes24(e){return mt(e,24)}static bytes25(e){return mt(e,25)}static bytes26(e){return mt(e,26)}static bytes27(e){return mt(e,27)}static bytes28(e){return mt(e,28)}static bytes29(e){return mt(e,29)}static bytes30(e){return mt(e,30)}static bytes31(e){return mt(e,31)}static bytes32(e){return mt(e,32)}static address(e){return new nn(Or,"address",e)}static bool(e){return new nn(Or,"bool",!!e)}static bytes(e){return new nn(Or,"bytes",e)}static string(e){return new nn(Or,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new nn(Or,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===R0}static dereference(e,t){if(nn.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}}class Qk extends di{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let s=nn.dereference(t,"string");try{s=bt(s)}catch(r){return this._throwError(r.message,t)}return e.writeValue(s)}decode(e){return bt(zi(e.readValue(),20))}}class jk extends di{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function FE(n,e,t){let s=[];if(Array.isArray(t))s=t;else if(t&&typeof t=="object"){let l={};s=e.map(c=>{const d=c.localName;return ce(d,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:t}),ce(!l[d],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:t}),l[d]=!0,t[d]})}else H(!1,"invalid tuple value","tuple",t);H(e.length===s.length,"types/value length mismatch","tuple",t);let r=new zp,i=new zp,o=[];e.forEach((l,c)=>{let d=s[c];if(l.dynamic){let f=i.length;l.encode(i,d);let p=r.writeUpdatableValue();o.push(m=>{p(m+f)})}else l.encode(r,d)}),o.forEach(l=>{l(r.length)});let a=n.appendWriter(r);return a+=n.appendWriter(i),a}function UE(n,e){let t=[],s=[],r=n.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=n.readIndex(),l=r.subReader(a);try{o=i.decode(l)}catch(c){if($n(c,"BUFFER_OVERRUN"))throw c;o=c,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(n)}catch(a){if($n(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");t.push(o),s.push(i.localName||null)}),Qr.fromItems(t,s)}class zk extends di{coder;length;constructor(e,t,s){const r=e.type+"["+(t>=0?t:"")+"]",i=t===-1||e.dynamic;super("array",r,s,i),Ge(this,{coder:e,length:t})}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let s=0;s<this.length;s++)t.push(e);return t}encode(e,t){const s=nn.dereference(t,"array");Array.isArray(s)||this._throwError("expected array value",s);let r=this.length;r===-1&&(r=s.length,e.writeValue(s.length)),K1(s.length,r,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let o=0;o<s.length;o++)i.push(this.coder);return FE(e,i,s)}decode(e){let t=this.length;t===-1&&(t=e.readIndex(),ce(t*us<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*us,length:e.dataLength}));let s=[];for(let r=0;r<t;r++)s.push(new jk(this.coder));return UE(e,s)}}class Wk extends di{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const s=nn.dereference(t,"bool");return e.writeValue(s?1:0)}decode(e){return!!e.readValue()}}class VE extends di{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=ls(t);let s=e.writeValue(t.length);return s+=e.writeBytes(t),s}decode(e){return e.readBytes(e.readIndex(),!0)}}class Kk extends VE{constructor(e){super("bytes",e)}decode(e){return _e(super.decode(e))}}class qk extends di{size;constructor(e,t){let s="bytes"+String(e);super(s,s,t,!1),Ge(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let s=ls(nn.dereference(t,this.type));return s.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(s)}decode(e){return _e(e.readBytes(this.size))}}const Jk=new Uint8Array([]);class Yk extends di{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(Jk)}decode(e){return e.readBytes(0),null}}const Xk=BigInt(0),Zk=BigInt(1),eN=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class tN extends di{size;signed;constructor(e,t,s){const r=(t?"int":"uint")+e*8;super(r,r,s,!1),Ge(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let s=Se(nn.dereference(t,this.type)),r=To(eN,us*8);if(this.signed){let i=To(r,this.size*8-1);(s>i||s<-(i+Zk))&&this._throwError("value out-of-bounds",t),s=Y1(s,8*us)}else(s<Xk||s>To(r,this.size*8))&&this._throwError("value out-of-bounds",t);return e.writeValue(s)}decode(e){let t=To(e.readValue(),this.size*8);return this.signed&&(t=Hd(t,this.size*8)),t}}class nN extends VE{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,qr(nn.dereference(t,"string")))}decode(e){return Gd(super.decode(e))}}class Zu extends di{coders;constructor(e,t){let s=!1;const r=[];e.forEach(o=>{o.dynamic&&(s=!0),r.push(o.type)});const i="tuple("+r.join(",")+")";super("tuple",i,t,s),Ge(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(s=>{e.push(s.defaultValue())});const t=this.coders.reduce((s,r)=>{const i=r.localName;return i&&(s[i]||(s[i]=0),s[i]++),s},{});return this.coders.forEach((s,r)=>{let i=s.localName;!i||t[i]!==1||(i==="length"&&(i="_length"),e[i]==null&&(e[i]=e[r]))}),Object.freeze(e)}encode(e,t){const s=nn.dereference(t,"tuple");return FE(e,this.coders,s)}decode(e){return UE(e,this.coders)}}function Xf(n,e){return{address:bt(n),storageKeys:e.map((t,s)=>(H(Bt(t,32),"invalid slot",`storageKeys[${s}]`,t),t.toLowerCase()))}}function Ko(n){if(Array.isArray(n))return n.map((t,s)=>Array.isArray(t)?(H(t.length===2,"invalid slot set",`value[${s}]`,t),Xf(t[0],t[1])):(H(t!=null&&typeof t=="object","invalid address-slot set","value",n),Xf(t.address,t.storageKeys)));H(n!=null&&typeof n=="object","invalid access list","value",n);const e=Object.keys(n).map(t=>{const s=n[t].reduce((r,i)=>(r[i]=!0,r),{});return Xf(t,Object.keys(s).sort())});return e.sort((t,s)=>t.address.localeCompare(s.address)),e}function $E(n){return{address:bt(n.address),nonce:Se(n.nonce!=null?n.nonce:0),chainId:Se(n.chainId!=null?n.chainId:0),signature:tn.from(n.signature)}}function sN(n){let e;return typeof n=="string"?e=$r.computePublicKey(n,!1):e=n.publicKey,bt(mn("0x"+e.substring(4)).substring(26))}function rN(n,e){return sN($r.recoverPublicKey(n,e))}const Nn=BigInt(0),iN=BigInt(2),oN=BigInt(27),aN=BigInt(28),lN=BigInt(35),cN=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Zf=4096*32;function uN(n){return{blobToKzgCommitment:s=>{if("computeBlobProof"in n){if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return ot(n.blobToKzgCommitment(_e(s)))}else if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return ot(n.blobToKzgCommitment(s));if("blobToKZGCommitment"in n&&typeof n.blobToKZGCommitment=="function")return ot(n.blobToKZGCommitment(_e(s)));H(!1,"unsupported KZG library","kzg",n)},computeBlobKzgProof:(s,r)=>{if("computeBlobProof"in n&&typeof n.computeBlobProof=="function")return ot(n.computeBlobProof(_e(s),_e(r)));if("computeBlobKzgProof"in n&&typeof n.computeBlobKzgProof=="function")return n.computeBlobKzgProof(s,r);if("computeBlobKZGProof"in n&&typeof n.computeBlobKZGProof=="function")return ot(n.computeBlobKZGProof(_e(s),_e(r)));H(!1,"unsupported KZG library","kzg",n)}}}function x0(n,e){let t=n.toString(16);for(;t.length<2;)t="0"+t;return t+=nl(e).substring(4),"0x"+t}function sl(n){return n==="0x"?null:bt(n)}function Vh(n,e){try{return Ko(n)}catch(t){H(!1,t.message,e,n)}}function dN(n,e){try{if(!Array.isArray(n))throw new Error("authorizationList: invalid array");const t=[];for(let s=0;s<n.length;s++){const r=n[s];if(!Array.isArray(r))throw new Error(`authorization[${s}]: invalid array`);if(r.length!==6)throw new Error(`authorization[${s}]: wrong length`);if(!r[1])throw new Error(`authorization[${s}]: null address`);t.push({address:sl(r[1]),nonce:Pt(r[2],"nonce"),chainId:Pt(r[0],"chainId"),signature:tn.from({yParity:qo(r[3],"yParity"),r:ti(r[4],32),s:ti(r[5],32)})})}return t}catch(t){H(!1,t.message,e,n)}}function qo(n,e){return n==="0x"?0:rt(n,e)}function Pt(n,e){if(n==="0x")return Nn;const t=Se(n,e);return H(t<=cN,"value exceeds uint size",e,t),t}function pt(n,e){const t=Se(n,"value"),s=Cn(t);return H(s.length<=32,"value too large",`tx.${e}`,t),s}function $h(n){return Ko(n).map(e=>[e.address,e.storageKeys])}function hN(n){return n.map(e=>[pt(e.chainId,"chainId"),e.address,pt(e.nonce,"nonce"),pt(e.signature.yParity,"yParity"),Cn(e.signature.r),Cn(e.signature.s)])}function fN(n,e){H(Array.isArray(n),`invalid ${e}`,"value",n);for(let t=0;t<n.length;t++)H(Bt(n[t],32),"invalid ${ param } hash",`value[${t}]`,n[t]);return n}function pN(n){const e=gu(n);H(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",n);const t={type:0,nonce:qo(e[0],"nonce"),gasPrice:Pt(e[1],"gasPrice"),gasLimit:Pt(e[2],"gasLimit"),to:sl(e[3]),value:Pt(e[4],"value"),data:_e(e[5]),chainId:Nn};if(e.length===6)return t;const s=Pt(e[6],"v"),r=Pt(e[7],"r"),i=Pt(e[8],"s");if(r===Nn&&i===Nn)t.chainId=s;else{let o=(s-lN)/iN;o<Nn&&(o=Nn),t.chainId=o,H(o!==Nn||s===oN||s===aN,"non-canonical legacy v","v",e[6]),t.signature=tn.from({r:ti(e[7],32),s:ti(e[8],32),v:s})}return t}function gN(n,e){const t=[pt(n.nonce,"nonce"),pt(n.gasPrice||0,"gasPrice"),pt(n.gasLimit,"gasLimit"),n.to||"0x",pt(n.value,"value"),n.data];let s=Nn;if(n.chainId!=Nn)s=Se(n.chainId,"tx.chainId"),H(!e||e.networkV==null||e.legacyChainId===s,"tx.chainId/sig.v mismatch","sig",e);else if(n.signature){const i=n.signature.legacyChainId;i!=null&&(s=i)}if(!e)return s!==Nn&&(t.push(Cn(s)),t.push("0x"),t.push("0x")),Wi(t);let r=BigInt(27+e.yParity);return s!==Nn?r=tn.getChainIdV(s,e.v):BigInt(e.v)!==r&&H(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(Cn(r)),t.push(Cn(e.r)),t.push(Cn(e.s)),Wi(t)}function Hh(n,e){let t;try{if(t=qo(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{H(!1,"invalid yParity","yParity",e[0])}const s=ti(e[1],32),r=ti(e[2],32),i=tn.from({r:s,s:r,yParity:t});n.signature=i}function mN(n){const e=gu(ot(n).slice(1));H(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",_e(n));const t={type:2,chainId:Pt(e[0],"chainId"),nonce:qo(e[1],"nonce"),maxPriorityFeePerGas:Pt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Pt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Pt(e[4],"gasLimit"),to:sl(e[5]),value:Pt(e[6],"value"),data:_e(e[7]),accessList:Vh(e[8],"accessList")};return e.length===9||Hh(t,e.slice(9)),t}function vN(n,e){const t=[pt(n.chainId,"chainId"),pt(n.nonce,"nonce"),pt(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),pt(n.maxFeePerGas||0,"maxFeePerGas"),pt(n.gasLimit,"gasLimit"),n.to||"0x",pt(n.value,"value"),n.data,$h(n.accessList||[])];return e&&(t.push(pt(e.yParity,"yParity")),t.push(Cn(e.r)),t.push(Cn(e.s))),sn(["0x02",Wi(t)])}function yN(n){const e=gu(ot(n).slice(1));H(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",_e(n));const t={type:1,chainId:Pt(e[0],"chainId"),nonce:qo(e[1],"nonce"),gasPrice:Pt(e[2],"gasPrice"),gasLimit:Pt(e[3],"gasLimit"),to:sl(e[4]),value:Pt(e[5],"value"),data:_e(e[6]),accessList:Vh(e[7],"accessList")};return e.length===8||Hh(t,e.slice(8)),t}function AN(n,e){const t=[pt(n.chainId,"chainId"),pt(n.nonce,"nonce"),pt(n.gasPrice||0,"gasPrice"),pt(n.gasLimit,"gasLimit"),n.to||"0x",pt(n.value,"value"),n.data,$h(n.accessList||[])];return e&&(t.push(pt(e.yParity,"recoveryParam")),t.push(Cn(e.r)),t.push(Cn(e.s))),sn(["0x01",Wi(t)])}function wN(n){let e=gu(ot(n).slice(1)),t="3",s=null;if(e.length===4&&Array.isArray(e[0])){t="3 (network format)";const i=e[1],o=e[2],a=e[3];H(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),H(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),H(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),H(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),H(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),s=[];for(let l=0;l<e[1].length;l++)s.push({data:i[l],commitment:o[l],proof:a[l]});e=e[0]}H(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${t}`,"data",_e(n));const r={type:3,chainId:Pt(e[0],"chainId"),nonce:qo(e[1],"nonce"),maxPriorityFeePerGas:Pt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Pt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Pt(e[4],"gasLimit"),to:sl(e[5]),value:Pt(e[6],"value"),data:_e(e[7]),accessList:Vh(e[8],"accessList"),maxFeePerBlobGas:Pt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};s&&(r.blobs=s),H(r.to!=null,`invalid address for transaction type: ${t}`,"data",n),H(Array.isArray(r.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",n);for(let i=0;i<r.blobVersionedHashes.length;i++)H(Bt(r.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",n);return e.length===11||Hh(r,e.slice(11)),r}function _N(n,e,t){const s=[pt(n.chainId,"chainId"),pt(n.nonce,"nonce"),pt(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),pt(n.maxFeePerGas||0,"maxFeePerGas"),pt(n.gasLimit,"gasLimit"),n.to||zc,pt(n.value,"value"),n.data,$h(n.accessList||[]),pt(n.maxFeePerBlobGas||0,"maxFeePerBlobGas"),fN(n.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(s.push(pt(e.yParity,"yParity")),s.push(Cn(e.r)),s.push(Cn(e.s)),t)?sn(["0x03",Wi([s,t.map(r=>r.data),t.map(r=>r.commitment),t.map(r=>r.proof)])]):sn(["0x03",Wi(s)])}function EN(n){const e=gu(ot(n).slice(1));H(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",_e(n));const t={type:4,chainId:Pt(e[0],"chainId"),nonce:qo(e[1],"nonce"),maxPriorityFeePerGas:Pt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Pt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Pt(e[4],"gasLimit"),to:sl(e[5]),value:Pt(e[6],"value"),data:_e(e[7]),accessList:Vh(e[8],"accessList"),authorizationList:dN(e[9],"authorizationList")};return e.length===10||Hh(t,e.slice(10)),t}function bN(n,e){const t=[pt(n.chainId,"chainId"),pt(n.nonce,"nonce"),pt(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),pt(n.maxFeePerGas||0,"maxFeePerGas"),pt(n.gasLimit,"gasLimit"),n.to||"0x",pt(n.value,"value"),n.data,$h(n.accessList||[]),hN(n.authorizationList||[])];return e&&(t.push(pt(e.yParity,"yParity")),t.push(Cn(e.r)),t.push(Cn(e.s))),sn(["0x04",Wi(t)])}class Ws{#e;#t;#n;#s;#r;#o;#i;#a;#d;#c;#p;#g;#l;#u;#h;#f;#v;get type(){return this.#e}set type(e){switch(e){case null:this.#e=null;break;case 0:case"legacy":this.#e=0;break;case 1:case"berlin":case"eip-2930":this.#e=1;break;case 2:case"london":case"eip-1559":this.#e=2;break;case 3:case"cancun":case"eip-4844":this.#e=3;break;case 4:case"pectra":case"eip-7702":this.#e=4;break;default:H(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=this.#t;return e==null&&this.type===3?zc:e}set to(e){this.#t=e==null?null:bt(e)}get nonce(){return this.#s}set nonce(e){this.#s=rt(e,"value")}get gasLimit(){return this.#r}set gasLimit(e){this.#r=Se(e)}get gasPrice(){const e=this.#o;return e==null&&(this.type===0||this.type===1)?Nn:e}set gasPrice(e){this.#o=e==null?null:Se(e,"gasPrice")}get maxPriorityFeePerGas(){const e=this.#i;return e??(this.type===2||this.type===3?Nn:null)}set maxPriorityFeePerGas(e){this.#i=e==null?null:Se(e,"maxPriorityFeePerGas")}get maxFeePerGas(){const e=this.#a;return e??(this.type===2||this.type===3?Nn:null)}set maxFeePerGas(e){this.#a=e==null?null:Se(e,"maxFeePerGas")}get data(){return this.#n}set data(e){this.#n=_e(e)}get value(){return this.#d}set value(e){this.#d=Se(e,"value")}get chainId(){return this.#c}set chainId(e){this.#c=Se(e)}get signature(){return this.#p||null}set signature(e){this.#p=e==null?null:tn.from(e)}get accessList(){const e=this.#g||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){this.#g=e==null?null:Ko(e)}get authorizationList(){const e=this.#v||null;return e==null&&this.type===4?[]:e}set authorizationList(e){this.#v=e==null?null:e.map(t=>$E(t))}get maxFeePerBlobGas(){const e=this.#l;return e==null&&this.type===3?Nn:e}set maxFeePerBlobGas(e){this.#l=e==null?null:Se(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#u;return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){H(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)H(Bt(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}this.#u=e}get blobs(){return this.#f==null?null:this.#f.map(e=>Object.assign({},e))}set blobs(e){if(e==null){this.#f=null;return}const t=[],s=[];for(let r=0;r<e.length;r++){const i=e[r];if(cm(i)){ce(this.#h,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=ot(i);if(H(o.length<=Zf,"blob is too large",`blobs[${r}]`,i),o.length!==Zf){const c=new Uint8Array(Zf);c.set(o),o=c}const a=this.#h.blobToKzgCommitment(o),l=_e(this.#h.computeBlobKzgProof(o,a));t.push({data:_e(o),commitment:_e(a),proof:l}),s.push(x0(1,a))}else{const o=_e(i.commitment);t.push({data:_e(i.data),commitment:o,proof:_e(i.proof)}),s.push(x0(1,o))}}this.#f=t,this.#u=s}get kzg(){return this.#h}set kzg(e){e==null?this.#h=null:this.#h=uN(e)}constructor(){this.#e=null,this.#t=null,this.#s=0,this.#r=Nn,this.#o=null,this.#i=null,this.#a=null,this.#n="0x",this.#d=Nn,this.#c=Nn,this.#p=null,this.#g=null,this.#l=null,this.#u=null,this.#h=null,this.#f=null,this.#v=null}get hash(){return this.signature==null?null:mn(this.#m(!0,!1))}get unsignedHash(){return mn(this.unsignedSerialized)}get from(){return this.signature==null?null:rN(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:$r.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}#m(e,t){ce(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const s=e?this.signature:null;switch(this.inferType()){case 0:return gN(this,s);case 1:return AN(this,s);case 2:return vN(this,s);case 3:return _N(this,s,t?this.blobs:null);case 4:return bN(this,s)}ce(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#m(!0,!0)}get unsignedSerialized(){return this.#m(!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,s=this.accessList!=null,r=this.#l!=null||this.#u;this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&ce(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),ce(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),ce(this.type!==0||!s,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):t?i.push(2):e?(i.push(1),s||i.push(0)):s?(i.push(1),i.push(2)):(r&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Ws.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new Ws;if(typeof e=="string"){const s=ot(e);if(s[0]>=127)return Ws.from(pN(s));switch(s[0]){case 1:return Ws.from(yN(s));case 2:return Ws.from(mN(s));case 3:return Ws.from(wN(s));case 4:return Ws.from(EN(s))}ce(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new Ws;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=tn.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.authorizationList!=null&&(t.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(H(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),H(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(H(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),H(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}}function Uo(n){return mn(qr(n))}var IN="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const k0=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),N0=4;function CN(n){let e=0;function t(){return n[e++]<<8|n[e++]}let s=t(),r=1,i=[0,1];for(let V=1;V<s;V++)i.push(r+=t());let o=t(),a=e;e+=o;let l=0,c=0;function d(){return l==0&&(c=c<<8|n[e++],l=8),c>>--l&1}const f=31,p=2**f,m=p>>>1,w=m>>1,y=p-1;let A=0;for(let V=0;V<f;V++)A=A<<1|d();let _=[],C=0,S=p;for(;;){let V=Math.floor(((A-C+1)*r-1)/S),j=0,x=s;for(;x-j>1;){let T=j+x>>>1;V<i[T]?x=T:j=T}if(j==0)break;_.push(j);let I=C+Math.floor(S*i[j]/r),P=C+Math.floor(S*i[j+1]/r)-1;for(;((I^P)&m)==0;)A=A<<1&y|d(),I=I<<1&y,P=P<<1&y|1;for(;I&~P&w;)A=A&m|A<<1&y>>>1|d(),I=I<<1^m,P=(P^m)<<1|m|1;C=I,S=1+P-I}let B=s-4;return _.map(V=>{switch(V-B){case 3:return B+65792+(n[a++]<<16|n[a++]<<8|n[a++]);case 2:return B+256+(n[a++]<<8|n[a++]);case 1:return B+n[a++];default:return V-1}})}function TN(n){let e=0;return()=>n[e++]}function HE(n){return TN(CN(SN(n)))}function SN(n){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((r,i)=>e[r.charCodeAt(0)]=i);let t=n.length,s=new Uint8Array(6*t>>3);for(let r=0,i=0,o=0,a=0;r<t;r++)a=a<<6|e[n.charCodeAt(r)],o+=6,o>=8&&(s[i++]=a>>(o-=8));return s}function PN(n){return n&1?~n>>1:n>>1}function RN(n,e){let t=Array(n);for(let s=0,r=0;s<n;s++)t[s]=r+=PN(e());return t}function Wc(n,e=0){let t=[];for(;;){let s=n(),r=n();if(!r)break;e+=s;for(let i=0;i<r;i++)t.push(e+i);e+=r+1}return t}function GE(n){return Kc(()=>{let e=Wc(n);if(e.length)return e})}function QE(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(xN(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(kN(t,n))}return e.flat()}function Kc(n){let e=[];for(;;){let t=n(e.length);if(!t)break;e.push(t)}return e}function jE(n,e,t){let s=Array(n).fill().map(()=>[]);for(let r=0;r<e;r++)RN(n,t).forEach((i,o)=>s[o].push(i));return s}function xN(n,e){let t=1+e(),s=e(),r=Kc(e);return jE(r.length,1+n,e).flatMap((o,a)=>{let[l,...c]=o;return Array(r[a]).fill().map((d,f)=>{let p=f*s;return[l+f*t,c.map(m=>m+p)]})})}function kN(n,e){let t=1+e();return jE(t,1+n,e).map(r=>[r[0],r.slice(1)])}function NN(n){let e=[],t=Wc(n);return r(s([]),[]),e;function s(i){let o=n(),a=Kc(()=>{let l=Wc(n).map(c=>t[c]);if(l.length)return s(l)});return{S:o,B:a,Q:i}}function r({S:i,B:o},a,l){if(!(i&4&&l===a[a.length-1])){i&2&&(l=a[a.length-1]),i&1&&e.push(a);for(let c of o)for(let d of c.Q)r(c,[...a,d],l)}}}function DN(n){return n.toString(16).toUpperCase().padStart(2,"0")}function zE(n){return`{${DN(n)}}`}function ON(n){let e=[];for(let t=0,s=n.length;t<s;){let r=n.codePointAt(t);t+=r<65536?1:2,e.push(r)}return e}function Ga(n){let t=n.length;if(t<4096)return String.fromCodePoint(...n);let s=[];for(let r=0;r<t;)s.push(String.fromCodePoint(...n.slice(r,r+=4096)));return s.join("")}function LN(n,e){let t=n.length,s=t-e.length;for(let r=0;s==0&&r<t;r++)s=n[r]-e[r];return s}var BN="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const qc=44032,jd=4352,zd=4449,Wd=4519,WE=19,KE=21,Qa=28,Kd=KE*Qa,MN=WE*Kd,FN=qc+MN,UN=jd+WE,VN=zd+KE,$N=Wd+Qa;function hc(n){return n>>24&255}function qE(n){return n&16777215}let Xp,D0,Zp,vd;function HN(){let n=HE(BN);Xp=new Map(GE(n).flatMap((e,t)=>e.map(s=>[s,t+1<<24]))),D0=new Set(Wc(n)),Zp=new Map,vd=new Map;for(let[e,t]of QE(n)){if(!D0.has(e)&&t.length==2){let[s,r]=t,i=vd.get(s);i||(i=new Map,vd.set(s,i)),i.set(r,e)}Zp.set(e,t.reverse())}}function JE(n){return n>=qc&&n<FN}function GN(n,e){if(n>=jd&&n<UN&&e>=zd&&e<VN)return qc+(n-jd)*Kd+(e-zd)*Qa;if(JE(n)&&e>Wd&&e<$N&&(n-qc)%Qa==0)return n+(e-Wd);{let t=vd.get(n);return t&&(t=t.get(e),t)?t:-1}}function YE(n){Xp||HN();let e=[],t=[],s=!1;function r(i){let o=Xp.get(i);o&&(s=!0,i|=o),e.push(i)}for(let i of n)for(;;){if(i<128)e.push(i);else if(JE(i)){let o=i-qc,a=o/Kd|0,l=o%Kd/Qa|0,c=o%Qa;r(jd+a),r(zd+l),c>0&&r(Wd+c)}else{let o=Zp.get(i);o?t.push(...o):r(i)}if(!t.length)break;i=t.pop()}if(s&&e.length>1){let i=hc(e[0]);for(let o=1;o<e.length;o++){let a=hc(e[o]);if(a==0||i<=a){i=a;continue}let l=o-1;for(;;){let c=e[l+1];if(e[l+1]=e[l],e[l]=c,!l||(i=hc(e[--l]),i<=a))break}i=hc(e[o])}}return e}function QN(n){let e=[],t=[],s=-1,r=0;for(let i of n){let o=hc(i),a=qE(i);if(s==-1)o==0?s=a:e.push(a);else if(r>0&&r>=o)o==0?(e.push(s,...t),t.length=0,s=a):t.push(a),r=o;else{let l=GN(s,a);l>=0?s=l:r==0&&o==0?(e.push(s),s=a):(t.push(a),r=o)}}return s>=0&&e.push(s,...t),e}function XE(n){return YE(n).map(qE)}function jN(n){return QN(YE(n))}const O0=45,ZE=".",eb=65039,tb=1,qd=n=>Array.from(n);function Jc(n,e){return n.P.has(e)||n.Q.has(e)}class zN extends Array{get is_emoji(){return!0}}let eg,nb,Po,tg,sb,Sa,ep,da,yo,L0,ng;function wm(){if(eg)return;let n=HE(IN);const e=()=>Wc(n),t=()=>new Set(e()),s=(d,f)=>f.forEach(p=>d.add(p));eg=new Map(QE(n)),nb=t(),Po=e(),tg=new Set(e().map(d=>Po[d])),Po=new Set(Po),sb=t(),t();let r=GE(n),i=n();const o=()=>{let d=new Set;return e().forEach(f=>s(d,r[f])),s(d,e()),d};Sa=Kc(d=>{let f=Kc(n).map(p=>p+96);if(f.length){let p=d>=i;f[0]-=32,f=Ga(f),p&&(f=`Restricted[${f}]`);let m=o(),w=o(),y=!n();return{N:f,P:m,Q:w,M:y,R:p}}}),ep=t(),da=new Map;let a=e().concat(qd(ep)).sort((d,f)=>d-f);a.forEach((d,f)=>{let p=n(),m=a[f]=p?a[f-p]:{V:[],M:new Map};m.V.push(d),ep.has(d)||da.set(d,m)});for(let{V:d,M:f}of new Set(da.values())){let p=[];for(let w of d){let y=Sa.filter(_=>Jc(_,w)),A=p.find(({G:_})=>y.some(C=>_.has(C)));A||(A={G:new Set,V:[]},p.push(A)),A.V.push(w),s(A.G,y)}let m=p.flatMap(w=>qd(w.G));for(let{G:w,V:y}of p){let A=new Set(m.filter(_=>!w.has(_)));for(let _ of y)f.set(_,A)}}yo=new Set;let l=new Set;const c=d=>yo.has(d)?l.add(d):yo.add(d);for(let d of Sa){for(let f of d.P)c(f);for(let f of d.Q)c(f)}for(let d of yo)!da.has(d)&&!l.has(d)&&da.set(d,tb);s(yo,XE(yo)),L0=NN(n).map(d=>zN.from(d)).sort(LN),ng=new Map;for(let d of L0){let f=[ng];for(let p of d){let m=f.map(w=>{let y=w.get(p);return y||(y=new Map,w.set(p,y)),y});p===eb?f.push(...m):f=m}for(let p of f)p.V=d}}function _m(n){return(rb(n)?"":`${Em(Gh([n]))} `)+zE(n)}function Em(n){return`"${n}"`}function WN(n){if(n.length>=4&&n[2]==O0&&n[3]==O0)throw new Error(`invalid label extension: "${Ga(n.slice(0,4))}"`)}function KN(n){for(let t=n.lastIndexOf(95);t>0;)if(n[--t]!==95)throw new Error("underscore allowed only at start")}function qN(n){let e=n[0],t=k0.get(e);if(t)throw Sc(`leading ${t}`);let s=n.length,r=-1;for(let i=1;i<s;i++){e=n[i];let o=k0.get(e);if(o){if(r==i)throw Sc(`${t} + ${o}`);r=i+1,t=o}}if(r==s)throw Sc(`trailing ${t}`)}function Gh(n,e=1/0,t=zE){let s=[];JN(n[0])&&s.push(""),n.length>e&&(e>>=1,n=[...n.slice(0,e),8230,...n.slice(-e)]);let r=0,i=n.length;for(let o=0;o<i;o++){let a=n[o];rb(a)&&(s.push(Ga(n.slice(r,o))),s.push(t(a)),r=o+1)}return s.push(Ga(n.slice(r,i))),s.join("")}function JN(n){return wm(),Po.has(n)}function rb(n){return wm(),sb.has(n)}function YN(n){return tD(XN(n,jN,rD))}function XN(n,e,t){if(!n)return[];wm();let s=0;return n.split(ZE).map(r=>{let i=ON(r),o={input:i,offset:s};s+=i.length+1;try{let a=o.tokens=sD(i,e,t),l=a.length,c;if(!l)throw new Error("empty label");let d=o.output=a.flat();if(KN(d),!(o.emoji=l>1||a[0].is_emoji)&&d.every(p=>p<128))WN(d),c="ASCII";else{let p=a.flatMap(m=>m.is_emoji?[]:m);if(!p.length)c="Emoji";else{if(Po.has(d[0]))throw Sc("leading combining mark");for(let y=1;y<l;y++){let A=a[y];if(!A.is_emoji&&Po.has(A[0]))throw Sc(`emoji + combining mark: "${Ga(a[y-1])} + ${Gh([A[0]])}"`)}qN(d);let m=qd(new Set(p)),[w]=eD(m);nD(w,p),ZN(w,m),c=w.N}}o.type=c}catch(a){o.error=a}return o})}function ZN(n,e){let t,s=[];for(let r of e){let i=da.get(r);if(i===tb)return;if(i){let o=i.M.get(r);if(t=t?t.filter(a=>o.has(a)):qd(o),!t.length)return}else s.push(r)}if(t){for(let r of t)if(s.every(i=>Jc(r,i)))throw new Error(`whole-script confusable: ${n.N}/${r.N}`)}}function eD(n){let e=Sa;for(let t of n){let s=e.filter(r=>Jc(r,t));if(!s.length)throw Sa.some(r=>Jc(r,t))?ob(e[0],t):ib(t);if(e=s,s.length==1)break}return e}function tD(n){return n.map(({input:e,error:t,output:s})=>{if(t){let r=t.message;throw new Error(n.length==1?r:`Invalid label ${Em(Gh(e,63))}: ${r}`)}return Ga(s)}).join(ZE)}function ib(n){return new Error(`disallowed character: ${_m(n)}`)}function ob(n,e){let t=_m(e),s=Sa.find(r=>r.P.has(e));return s&&(t=`${s.N} ${t}`),new Error(`illegal mixture: ${n.N} + ${t}`)}function Sc(n){return new Error(`illegal placement: ${n}`)}function nD(n,e){for(let t of e)if(!Jc(n,t))throw ob(n,t);if(n.M){let t=XE(e);for(let s=1,r=t.length;s<r;s++)if(tg.has(t[s])){let i=s+1;for(let o;i<r&&tg.has(o=t[i]);i++)for(let a=s;a<i;a++)if(t[a]==o)throw new Error(`duplicate non-spacing marks: ${_m(o)}`);if(i-s>N0)throw new Error(`excessive non-spacing marks: ${Em(Gh(t.slice(s-1,i)))} (${i-s}/${N0})`);s=i}}}function sD(n,e,t){let s=[],r=[];for(n=n.slice().reverse();n.length;){let i=iD(n);if(i)r.length&&(s.push(e(r)),r=[]),s.push(t(i));else{let o=n.pop();if(yo.has(o))r.push(o);else{let a=eg.get(o);if(a)r.push(...a);else if(!nb.has(o))throw ib(o)}}}return r.length&&s.push(e(r)),s}function rD(n){return n.filter(e=>e!=eb)}function iD(n,e){let t=ng,s,r=n.length;for(;r&&(t=t.get(n[--r]),!!t);){let{V:i}=t;i&&(s=i,n.length=r)}return s}const ab=new Uint8Array(32);ab.fill(0);function B0(n){return H(n.length!==0,"invalid ENS name; empty component","comp",n),n}function lb(n){const e=qr(oD(n)),t=[];if(n.length===0)return t;let s=0;for(let r=0;r<e.length;r++)e[r]===46&&(t.push(B0(e.slice(s,r))),s=r+1);return H(s<e.length,"invalid ENS name; empty component","name",n),t.push(B0(e.slice(s))),t}function oD(n){try{if(n.length===0)throw new Error("empty label");return YN(n)}catch(e){H(!1,`invalid ENS name (${e.message})`,"name",n)}}function sg(n){H(typeof n=="string","invalid ENS name; not a string","name",n),H(n.length,"invalid ENS name (empty label)","name",n);let e=ab;const t=lb(n);for(;t.length;)e=mn(sn([e,mn(t.pop())]));return _e(e)}function aD(n,e){const t=e;return H(t<=255,"DNS encoded label cannot exceed 255","length",t),_e(sn(lb(n).map(s=>{H(s.length<=t,`label ${JSON.stringify(n)} exceeds ${t} bytes`,"name",n);const r=new Uint8Array(s.length+1);return r.set(s,1),r[0]=r.length-1,r})))+"00"}const cb=new Uint8Array(32);cb.fill(0);const lD=BigInt(-1),ub=BigInt(0),db=BigInt(1),cD=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function uD(n){const e=ot(n),t=e.length%32;return t?sn([e,cb.slice(t)]):_e(e)}const dD=zi(db,32),hD=zi(ub,32),M0={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},tp=["name","version","chainId","verifyingContract","salt"];function F0(n){return function(e){return H(typeof e=="string",`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const fD={name:F0("name"),version:F0("version"),chainId:function(n){const e=Se(n,"domain.chainId");return H(e>=0,"invalid chain ID","domain.chainId",n),Number.isSafeInteger(e)?Number(e):qs(e)},verifyingContract:function(n){try{return bt(n).toLowerCase()}catch{}H(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){const e=ot(n,"domain.salt");return H(e.length===32,'invalid domain value "salt"',"domain.salt",n),_e(e)}};function np(n){{const e=n.match(/^(u?)int(\d+)$/);if(e){const t=e[1]==="",s=parseInt(e[2]);H(s%8===0&&s!==0&&s<=256&&e[2]===String(s),"invalid numeric width","type",n);const r=To(cD,t?s-1:s),i=t?(r+db)*lD:ub;return function(o){const a=Se(o,"value");return H(a>=i&&a<=r,`value out-of-bounds for ${n}`,"value",a),zi(t?Y1(a,256):a,32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return H(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",n),function(s){const r=ot(s);return H(r.length===t,`invalid length for ${n}`,"value",s),uD(s)}}}switch(n){case"address":return function(e){return ti(bt(e),32)};case"bool":return function(e){return e?dD:hD};case"bytes":return function(e){return mn(e)};case"string":return function(e){return Uo(e)}}return null}function U0(n,e){return`${n}(${e.map(({name:t,type:s})=>s+" "+t).join(",")})`}function ed(n){const e=n.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:n}}class Ps{primaryType;#e;get types(){return JSON.parse(this.#e)}#t;#n;constructor(e){this.#t=new Map,this.#n=new Map;const t=new Map,s=new Map,r=new Map,i={};Object.keys(e).forEach(l=>{i[l]=e[l].map(({name:c,type:d})=>{let{base:f,index:p}=ed(d);return f==="int"&&!e.int&&(f="int256"),f==="uint"&&!e.uint&&(f="uint256"),{name:c,type:f+(p||"")}}),t.set(l,new Set),s.set(l,[]),r.set(l,new Set)}),this.#e=JSON.stringify(i);for(const l in i){const c=new Set;for(const d of i[l]){H(!c.has(d.name),`duplicate variable name ${JSON.stringify(d.name)} in ${JSON.stringify(l)}`,"types",e),c.add(d.name);const f=ed(d.type).base;H(f!==l,`circular type reference to ${JSON.stringify(f)}`,"types",e),!np(f)&&(H(s.has(f),`unknown type ${JSON.stringify(f)}`,"types",e),s.get(f).push(l),t.get(l).add(f))}}const o=Array.from(s.keys()).filter(l=>s.get(l).length===0);H(o.length!==0,"missing primary type","types",e),H(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),Ge(this,{primaryType:o[0]});function a(l,c){H(!c.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",e),c.add(l);for(const d of t.get(l))if(s.has(d)){a(d,c);for(const f of c)r.get(f).add(d)}c.delete(l)}a(this.primaryType,new Set);for(const[l,c]of r){const d=Array.from(c);d.sort(),this.#t.set(l,U0(l,i[l])+d.map(f=>U0(f,i[f])).join(""))}}getEncoder(e){let t=this.#n.get(e);return t||(t=this.#s(e),this.#n.set(e,t)),t}#s(e){{const r=np(e);if(r)return r}const t=ed(e).array;if(t){const r=t.prefix,i=this.getEncoder(r);return o=>{H(t.count===-1||t.count===o.length,`array length mismatch; expected length ${t.count}`,"value",o);let a=o.map(i);return this.#t.has(r)&&(a=a.map(mn)),mn(sn(a))}}const s=this.types[e];if(s){const r=Uo(this.#t.get(e));return i=>{const o=s.map(({name:a,type:l})=>{const c=this.getEncoder(l)(i[a]);return this.#t.has(l)?mn(c):c});return o.unshift(r),sn(o)}}H(!1,`unknown type: ${e}`,"type",e)}encodeType(e){const t=this.#t.get(e);return H(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return mn(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,s){if(np(e))return s(e,t);const r=ed(e).array;if(r)return H(r.count===-1||r.count===t.length,`array length mismatch; expected length ${r.count}`,"value",t),t.map(o=>this._visit(r.prefix,o,s));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,t[a],s),o),{});H(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Ps(e)}static getPrimaryType(e){return Ps.from(e).primaryType}static hashStruct(e,t,s){return Ps.from(t).hashStruct(e,s)}static hashDomain(e){const t=[];for(const s in e){if(e[s]==null)continue;const r=M0[s];H(r,`invalid typed-data domain key: ${JSON.stringify(s)}`,"domain",e),t.push({name:s,type:r})}return t.sort((s,r)=>tp.indexOf(s.name)-tp.indexOf(r.name)),Ps.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,s){return sn(["0x1901",Ps.hashDomain(e),Ps.from(t).hash(s)])}static hash(e,t,s){return mn(Ps.encode(e,t,s))}static async resolveNames(e,t,s,r){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!Bt(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=Ps.from(t);o.visit(s,(a,l)=>(a==="address"&&!Bt(l,20)&&(i[l]="0x"),l));for(const a in i)i[a]=await r(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),s=o.visit(s,(a,l)=>a==="address"&&i[l]?i[l]:l),{domain:e,value:s}}static getPayload(e,t,s){Ps.hashDomain(e);const r={},i=[];tp.forEach(l=>{const c=e[l];c!=null&&(r[l]=fD[l](c),i.push({name:l,type:M0[l]}))});const o=Ps.from(t);t=o.types;const a=Object.assign({},t);return H(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),a.EIP712Domain=i,o.encode(s),{types:a,domain:r,primaryType:o.primaryType,message:o.visit(s,(l,c)=>{if(l.match(/^bytes(\d*)/))return _e(ot(c));if(l.match(/^u?int/))return Se(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return H(typeof c=="string","invalid string","value",c),c}H(!1,"unsupported type","type",l)})}}}function hs(n){const e=new Set;return n.forEach(t=>e.add(t)),Object.freeze(e)}const pD="external public payable override",gD=hs(pD.split(" ")),hb="constant external internal payable private public pure view override",mD=hs(hb.split(" ")),fb="constructor error event fallback function receive struct",pb=hs(fb.split(" ")),gb="calldata memory storage payable indexed",vD=hs(gb.split(" ")),yD="tuple returns",AD=[fb,gb,yD,hb].join(" "),wD=hs(AD.split(" ")),_D={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},ED=new RegExp("^(\\s*)"),bD=new RegExp("^([0-9]+)"),ID=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),mb=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),vb=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class Gs{#e;#t;get offset(){return this.#e}get length(){return this.#t.length-this.#e}constructor(e){this.#e=0,this.#t=e.slice()}clone(){return new Gs(this.#t)}reset(){this.#e=0}#n(e=0,t=0){return new Gs(this.#t.slice(e,t).map(s=>Object.freeze(Object.assign({},s,{match:s.match-e,linkBack:s.linkBack-e,linkNext:s.linkNext-e}))))}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=this.#n(this.#e+1,e.match+1);return this.#e=e.match+1,t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=[];for(;this.#e<e.match-1;){const s=this.peek().linkNext;t.push(this.#n(this.#e+1,s)),this.#e=s}return this.#e=e.match+1,t}peek(){if(this.#e>=this.#t.length)throw new Error("out-of-bounds");return this.#t[this.#e]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return this.#e++,e}toString(){const e=[];for(let t=this.#e;t<this.#t.length;t++){const s=this.#t[t];e.push(`${s.type}:${s.text}`)}return`<TokenString ${e.join(" ")}>`}}function no(n){const e=[],t=o=>{const a=i<n.length?JSON.stringify(n[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let s=[],r=[],i=0;for(;i<n.length;){let o=n.substring(i),a=o.match(ED);a&&(i+=a[1].length,o=n.substring(i));const l={depth:s.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(l);let c=_D[o[0]]||"";if(c){if(l.type=c,l.text=o[0],i++,c==="OPEN_PAREN")s.push(e.length-1),r.push(e.length-1);else if(c=="CLOSE_PAREN")s.length===0&&t("no matching open bracket"),l.match=s.pop(),e[l.match].match=e.length-1,l.depth--,l.linkBack=r.pop(),e[l.linkBack].linkNext=e.length-1;else if(c==="COMMA")l.linkBack=r.pop(),e[l.linkBack].linkNext=e.length-1,r.push(e.length-1);else if(c==="OPEN_BRACKET")l.type="BRACKET";else if(c==="CLOSE_BRACKET"){let d=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const f=e.pop().text;d=f+d,e[e.length-1].value=rt(f)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=d}continue}if(a=o.match(ID),a){if(l.text=a[1],i+=l.text.length,wD.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(vb)){l.type="TYPE";continue}l.type="ID";continue}if(a=o.match(bD),a){l.text=a[1],l.type="NUMBER",i+=l.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Gs(e.map(o=>Object.freeze(o)))}function V0(n,e){let t=[];for(const s in e.keys())n.has(s)&&t.push(s);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function Qh(n,e){if(e.peekKeyword(pb)){const t=e.pop().text;if(t!==n)throw new Error(`expected ${n}, got ${t}`)}return e.popType("ID")}function si(n,e){const t=new Set;for(;;){const s=n.peekType("KEYWORD");if(s==null||e&&!e.has(s))break;if(n.pop(),t.has(s))throw new Error(`duplicate keywords: ${JSON.stringify(s)}`);t.add(s)}return Object.freeze(t)}function yb(n){let e=si(n,mD);return V0(e,hs("constant payable nonpayable".split(" "))),V0(e,hs("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Jr(n,e){return n.popParams().map(t=>Ot.from(t,e))}function Ab(n){if(n.peekType("AT")){if(n.pop(),n.peekType("NUMBER"))return Se(n.pop().text);throw new Error("invalid gas")}return null}function Vo(n){if(n.length)throw new Error(`unexpected tokens at offset ${n.offset}: ${n.toString()}`)}const CD=new RegExp(/^(.*)\[([0-9]*)\]$/);function $0(n){const e=n.match(vb);if(H(e,"invalid type","type",n),n==="uint")return"uint256";if(n==="int")return"int256";if(e[2]){const t=parseInt(e[2]);H(t!==0&&t<=32,"invalid bytes length","type",n)}else if(e[3]){const t=parseInt(e[3]);H(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",n)}return n}const zt={},bs=Symbol.for("_ethers_internal"),H0="_ParamTypeInternal",G0="_ErrorInternal",Q0="_EventInternal",j0="_ConstructorInternal",z0="_FallbackInternal",W0="_FunctionInternal",K0="_StructInternal";class Ot{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,s,r,i,o,a,l){if(pu(e,zt,"ParamType"),Object.defineProperty(this,bs,{value:H0}),o&&(o=Object.freeze(o.slice())),r==="array"){if(a==null||l==null)throw new Error("")}else if(a!=null||l!=null)throw new Error("");if(r==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Ge(this,{name:t,type:s,baseType:r,indexed:i,components:o,arrayLength:a,arrayChildren:l})}format(e){if(e==null&&(e="sighash"),e==="json"){const s=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=s,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const r={type:this.baseType==="tuple"?"tuple":this.type,name:s};return typeof this.indexed=="boolean"&&(r.indexed=this.indexed),this.isTuple()&&(r.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(r)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(s=>s.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const s=this;return e.map(r=>s.arrayChildren.walk(r,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const s=this;return e.map((r,i)=>s.components[i].walk(r,t))}return t(this.type,e)}#e(e,t,s,r){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=t.slice();a.forEach((l,c)=>{o.#e(e,l,s,d=>{a[c]=d})}),r(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(t))a=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");a=o.map(l=>{if(!l.name)throw new Error("cannot use object value with unnamed components");if(!(l.name in t))throw new Error(`missing value for component ${l.name}`);return t[l.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((l,c)=>{o[c].#e(e,l,s,d=>{a[c]=d})}),r(a);return}const i=s(this.type,t);i.then?e.push((async function(){r(await i)})()):r(i)}async walkAsync(e,t){const s=[],r=[e];return this.#e(s,e,t,i=>{r[0]=i}),s.length&&await Promise.all(s),r[0]}static from(e,t){if(Ot.isParamType(e))return e;if(typeof e=="string")try{return Ot.from(no(e),t)}catch{H(!1,"invalid param type","obj",e)}else if(e instanceof Gs){let a="",l="",c=null;si(e,hs(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(l="tuple",c=e.popParams().map(y=>Ot.from(y)),a=`tuple(${c.map(y=>y.format()).join(",")})`):(a=$0(e.popType("TYPE")),l=a);let d=null,f=null;for(;e.length&&e.peekType("BRACKET");){const y=e.pop();d=new Ot(zt,"",a,l,null,c,f,d),f=y.value,a+=y.text,l="array",c=null}let p=null;if(si(e,vD).has("indexed")){if(!t)throw new Error("");p=!0}const w=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Ot(zt,w,a,l,p,c,f,d)}const s=e.name;H(!s||typeof s=="string"&&s.match(mb),"invalid name","obj.name",s);let r=e.indexed;r!=null&&(H(t,"parameter cannot be indexed","obj.indexed",e.indexed),r=!!r);let i=e.type,o=i.match(CD);if(o){const a=parseInt(o[2]||"-1"),l=Ot.from({type:o[1],components:e.components});return new Ot(zt,s||"",i,"array",r,null,a,l)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(c=>Ot.from(c)):null;return new Ot(zt,s||"",i,"tuple",r,a,null,null)}return i=$0(e.type),new Ot(zt,s||"",i,i,r,null,null,null)}static isParamType(e){return e&&e[bs]===H0}}class $o{type;inputs;constructor(e,t,s){pu(e,zt,"Fragment"),s=Object.freeze(s.slice()),Ge(this,{type:t,inputs:s})}static from(e){if(typeof e=="string"){try{$o.from(JSON.parse(e))}catch{}return $o.from(no(e))}if(e instanceof Gs)switch(e.peekKeyword(pb)){case"constructor":return jr.from(e);case"error":return _s.from(e);case"event":return pr.from(e);case"fallback":case"receive":return Br.from(e);case"function":return gr.from(e);case"struct":return Oo.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return jr.from(e);case"error":return _s.from(e);case"event":return pr.from(e);case"fallback":case"receive":return Br.from(e);case"function":return gr.from(e);case"struct":return Oo.from(e)}ce(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}H(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return jr.isFragment(e)}static isError(e){return _s.isFragment(e)}static isEvent(e){return pr.isFragment(e)}static isFunction(e){return gr.isFragment(e)}static isStruct(e){return Oo.isFragment(e)}}class jh extends $o{name;constructor(e,t,s,r){super(e,t,r),H(typeof s=="string"&&s.match(mb),"invalid identifier","name",s),r=Object.freeze(r.slice()),Ge(this,{name:s})}}function Yc(n,e){return"("+e.map(t=>t.format(n)).join(n==="full"?", ":",")+")"}class _s extends jh{constructor(e,t,s){super(e,"error",t,s),Object.defineProperty(this,bs,{value:G0})}get selector(){return Uo(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+Yc(e,this.inputs)),t.join(" ")}static from(e){if(_s.isFragment(e))return e;if(typeof e=="string")return _s.from(no(e));if(e instanceof Gs){const t=Qh("error",e),s=Jr(e);return Vo(e),new _s(zt,t,s)}return new _s(zt,e.name,e.inputs?e.inputs.map(Ot.from):[])}static isFragment(e){return e&&e[bs]===G0}}class pr extends jh{anonymous;constructor(e,t,s,r){super(e,"event",t,s),Object.defineProperty(this,bs,{value:Q0}),Ge(this,{anonymous:r})}get topicHash(){return Uo(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const t=[];return e!=="sighash"&&t.push("event"),t.push(this.name+Yc(e,this.inputs)),e!=="sighash"&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){return t=(t||[]).map(r=>Ot.from(r)),new pr(zt,e,t,!1).topicHash}static from(e){if(pr.isFragment(e))return e;if(typeof e=="string")try{return pr.from(no(e))}catch{H(!1,"invalid event fragment","obj",e)}else if(e instanceof Gs){const t=Qh("event",e),s=Jr(e,!0),r=!!si(e,hs(["anonymous"])).has("anonymous");return Vo(e),new pr(zt,t,s,r)}return new pr(zt,e.name,e.inputs?e.inputs.map(t=>Ot.from(t,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[bs]===Q0}}class jr extends $o{payable;gas;constructor(e,t,s,r,i){super(e,t,s),Object.defineProperty(this,bs,{value:j0}),Ge(this,{payable:r,gas:i})}format(e){if(ce(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const t=[`constructor${Yc(e,this.inputs)}`];return this.payable&&t.push("payable"),this.gas!=null&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(jr.isFragment(e))return e;if(typeof e=="string")try{return jr.from(no(e))}catch{H(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof Gs){si(e,hs(["constructor"]));const t=Jr(e),s=!!si(e,gD).has("payable"),r=Ab(e);return Vo(e),new jr(zt,"constructor",t,s,r)}return new jr(zt,"constructor",e.inputs?e.inputs.map(Ot.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[bs]===j0}}class Br extends $o{payable;constructor(e,t,s){super(e,"fallback",t),Object.defineProperty(this,bs,{value:z0}),Ge(this,{payable:s})}format(e){const t=this.inputs.length===0?"receive":"fallback";if(e==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:t,stateMutability:s})}return`${t}()${this.payable?" payable":""}`}static from(e){if(Br.isFragment(e))return e;if(typeof e=="string")try{return Br.from(no(e))}catch{H(!1,"invalid fallback fragment","obj",e)}else if(e instanceof Gs){const t=e.toString(),s=e.peekKeyword(hs(["fallback","receive"]));if(H(s,"type must be fallback or receive","obj",t),e.popKeyword(hs(["fallback","receive"]))==="receive"){const a=Jr(e);return H(a.length===0,"receive cannot have arguments","obj.inputs",a),si(e,hs(["payable"])),Vo(e),new Br(zt,[],!0)}let i=Jr(e);i.length?H(i.length===1&&i[0].type==="bytes","invalid fallback inputs","obj.inputs",i.map(a=>a.format("minimal")).join(", ")):i=[Ot.from("bytes")];const o=yb(e);if(H(o==="nonpayable"||o==="payable","fallback cannot be constants","obj.stateMutability",o),si(e,hs(["returns"])).has("returns")){const a=Jr(e);H(a.length===1&&a[0].type==="bytes","invalid fallback outputs","obj.outputs",a.map(l=>l.format("minimal")).join(", "))}return Vo(e),new Br(zt,i,o==="payable")}if(e.type==="receive")return new Br(zt,[],!0);if(e.type==="fallback"){const t=[Ot.from("bytes")],s=e.stateMutability==="payable";return new Br(zt,t,s)}H(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[bs]===z0}}class gr extends jh{constant;outputs;stateMutability;payable;gas;constructor(e,t,s,r,i,o){super(e,"function",t,r),Object.defineProperty(this,bs,{value:W0}),i=Object.freeze(i.slice()),Ge(this,{constant:s==="view"||s==="pure",gas:o,outputs:i,payable:s==="payable",stateMutability:s})}get selector(){return Uo(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(e))),outputs:this.outputs.map(s=>JSON.parse(s.format(e)))});const t=[];return e!=="sighash"&&t.push("function"),t.push(this.name+Yc(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(Yc(e,this.outputs))),this.gas!=null&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){return t=(t||[]).map(r=>Ot.from(r)),new gr(zt,e,"view",t,[],null).selector}static from(e){if(gr.isFragment(e))return e;if(typeof e=="string")try{return gr.from(no(e))}catch{H(!1,"invalid function fragment","obj",e)}else if(e instanceof Gs){const s=Qh("function",e),r=Jr(e),i=yb(e);let o=[];si(e,hs(["returns"])).has("returns")&&(o=Jr(e));const a=Ab(e);return Vo(e),new gr(zt,s,i,r,o,a)}let t=e.stateMutability;return t==null&&(t="payable",typeof e.constant=="boolean"?(t="view",e.constant||(t="payable",typeof e.payable=="boolean"&&!e.payable&&(t="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(t="nonpayable")),new gr(zt,e.name,t,e.inputs?e.inputs.map(Ot.from):[],e.outputs?e.outputs.map(Ot.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[bs]===W0}}class Oo extends jh{constructor(e,t,s){super(e,"struct",t,s),Object.defineProperty(this,bs,{value:K0})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return Oo.from(no(e))}catch{H(!1,"invalid struct fragment","obj",e)}else if(e instanceof Gs){const t=Qh("struct",e),s=Jr(e);return Vo(e),new Oo(zt,t,s)}return new Oo(zt,e.name,e.inputs?e.inputs.map(Ot.from):[])}static isFragment(e){return e&&e[bs]===K0}}const rr=new Map;rr.set(0,"GENERIC_PANIC");rr.set(1,"ASSERT_FALSE");rr.set(17,"OVERFLOW");rr.set(18,"DIVIDE_BY_ZERO");rr.set(33,"ENUM_RANGE_ERROR");rr.set(34,"BAD_STORAGE_DATA");rr.set(49,"STACK_UNDERFLOW");rr.set(50,"ARRAY_RANGE_ERROR");rr.set(65,"OUT_OF_MEMORY");rr.set(81,"UNINITIALIZED_FUNCTION_CALL");const TD=new RegExp(/^bytes([0-9]*)$/),SD=new RegExp(/^(u?int)([0-9]*)$/);let sp=null,q0=1024;function PD(n,e,t,s){let r="missing revert data",i=null;const o=null;let a=null;if(t){r="execution reverted";const c=ot(t);if(t=_e(t),c.length===0)r+=" (no data present; likely require(false) occurred",i="require(false)";else if(c.length%32!==4)r+=" (could not decode reason; invalid data length)";else if(_e(c.slice(0,4))==="0x08c379a0")try{i=s.decode(["string"],c.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},r+=`: ${JSON.stringify(i)}`}catch{r+=" (could not decode reason; invalid string data)"}else if(_e(c.slice(0,4))==="0x4e487b71")try{const d=Number(s.decode(["uint256"],c.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[d]},i=`Panic due to ${rr.get(d)||"UNKNOWN"}(${d})`,r+=`: ${i}`}catch{r+=" (could not decode panic code)"}else r+=" (unknown custom error)"}const l={to:e.to?bt(e.to):null,data:e.data||"0x"};return e.from&&(l.from=bt(e.from)),Gt(r,"CALL_EXCEPTION",{action:n,data:t,reason:i,transaction:l,invocation:o,revert:a})}class ja{#e(e){if(e.isArray())return new zk(this.#e(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new Zu(e.components.map(s=>this.#e(s)),e.name);switch(e.baseType){case"address":return new Qk(e.name);case"bool":return new Wk(e.name);case"string":return new nN(e.name);case"bytes":return new Kk(e.name);case"":return new Yk(e.name)}let t=e.type.match(SD);if(t){let s=parseInt(t[2]||"256");return H(s!==0&&s<=256&&s%8===0,"invalid "+t[1]+" bit length","param",e),new tN(s/8,t[1]==="int",e.name)}if(t=e.type.match(TD),t){let s=parseInt(t[1]);return H(s!==0&&s<=32,"invalid bytes length","param",e),new qk(s,e.name)}H(!1,"invalid type","type",e.type)}getDefaultValue(e){const t=e.map(r=>this.#e(Ot.from(r)));return new Zu(t,"_").defaultValue()}encode(e,t){K1(t.length,e.length,"types/values length mismatch");const s=e.map(o=>this.#e(Ot.from(o))),r=new Zu(s,"_"),i=new zp;return r.encode(i,t),i.data}decode(e,t,s){const r=e.map(o=>this.#e(Ot.from(o)));return new Zu(r,"_").decode(new um(t,s,q0))}static _setDefaultMaxInflation(e){H(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),q0=e}static defaultAbiCoder(){return sp==null&&(sp=new ja),sp}static getBuiltinCallException(e,t,s){return PD(e,t,s,ja.defaultAbiCoder())}}class RD{fragment;name;signature;topic;args;constructor(e,t,s){const r=e.name,i=e.format();Ge(this,{fragment:e,name:r,signature:i,topic:t,args:s})}}class xD{fragment;name;args;signature;selector;value;constructor(e,t,s,r){const i=e.name,o=e.format();Ge(this,{fragment:e,name:i,args:s,signature:o,selector:t,value:r})}}class kD{fragment;name;args;signature;selector;constructor(e,t,s){const r=e.name,i=e.format();Ge(this,{fragment:e,name:r,args:s,signature:i,selector:t})}}class J0{hash;_isIndexed;static isIndexed(e){return!!(e&&e._isIndexed)}constructor(e){Ge(this,{hash:e,_isIndexed:!0})}}const Y0={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},X0={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:n=>`reverted with reason string ${JSON.stringify(n)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:n=>{let e="unknown panic code";return n>=0&&n<=255&&Y0[n.toString()]&&(e=Y0[n.toString()]),`reverted with panic code 0x${n.toString(16)} (${e})`}}};class bo{fragments;deploy;fallback;receive;#e;#t;#n;#s;constructor(e){let t=[];typeof e=="string"?t=JSON.parse(e):t=e,this.#n=new Map,this.#e=new Map,this.#t=new Map;const s=[];for(const o of t)try{s.push($o.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}Ge(this,{fragments:Object.freeze(s)});let r=null,i=!1;this.#s=this.getAbiCoder(),this.fragments.forEach((o,a)=>{let l;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Ge(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(H(!r||o.payable!==r.payable,"conflicting fallback fragments",`fragments[${a}]`,o),r=o,i=r.payable);return;case"function":l=this.#n;break;case"event":l=this.#t;break;case"error":l=this.#e;break;default:return}const c=o.format();l.has(c)||l.set(c,o)}),this.deploy||Ge(this,{deploy:jr.from("constructor()")}),Ge(this,{fallback:r,receive:i})}format(e){const t=e?"minimal":"full";return this.fragments.map(r=>r.format(t))}formatJson(){const e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return ja.defaultAbiCoder()}#r(e,t,s){if(Bt(e)){const i=e.toLowerCase();for(const o of this.#n.values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of this.#n)o.split("(")[0]===e&&i.push(a);if(t){const o=t.length>0?t[t.length-1]:null;let a=t.length,l=!0;nn.isTyped(o)&&o.type==="overrides"&&(l=!1,a--);for(let c=i.length-1;c>=0;c--){const d=i[c].inputs.length;d!==a&&(!l||d!==a-1)&&i.splice(c,1)}for(let c=i.length-1;c>=0;c--){const d=i[c].inputs;for(let f=0;f<t.length;f++)if(nn.isTyped(t[f])){if(f>=d.length){if(t[f].type==="overrides")continue;i.splice(c,1);break}if(t[f].type!==d[f].baseType){i.splice(c,1);break}}}}if(i.length===1&&t&&t.length!==i[0].inputs.length){const o=t[t.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&s){const o=i.map(a=>JSON.stringify(a.format())).join(", ");H(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const r=this.#n.get(gr.from(e).format());return r||null}getFunctionName(e){const t=this.#r(e,null,!1);return H(t,"no matching function","key",e),t.name}hasFunction(e){return!!this.#r(e,null,!1)}getFunction(e,t){return this.#r(e,t||null,!0)}forEachFunction(e){const t=Array.from(this.#n.keys());t.sort((s,r)=>s.localeCompare(r));for(let s=0;s<t.length;s++){const r=t[s];e(this.#n.get(r),s)}}#o(e,t,s){if(Bt(e)){const i=e.toLowerCase();for(const o of this.#t.values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of this.#t)o.split("(")[0]===e&&i.push(a);if(t){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<t.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let l=0;l<t.length;l++)if(nn.isTyped(t[l])&&t[l].type!==a[l].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&s){const o=i.map(a=>JSON.stringify(a.format())).join(", ");H(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const r=this.#t.get(pr.from(e).format());return r||null}getEventName(e){const t=this.#o(e,null,!1);return H(t,"no matching event","key",e),t.name}hasEvent(e){return!!this.#o(e,null,!1)}getEvent(e,t){return this.#o(e,t||null,!0)}forEachEvent(e){const t=Array.from(this.#t.keys());t.sort((s,r)=>s.localeCompare(r));for(let s=0;s<t.length;s++){const r=t[s];e(this.#t.get(r),s)}}getError(e,t){if(Bt(e)){const r=e.toLowerCase();if(X0[r])return _s.from(X0[r].signature);for(const i of this.#e.values())if(r===i.selector)return i;return null}if(e.indexOf("(")===-1){const r=[];for(const[i,o]of this.#e)i.split("(")[0]===e&&r.push(o);if(r.length===0)return e==="Error"?_s.from("error Error(string)"):e==="Panic"?_s.from("error Panic(uint256)"):null;if(r.length>1){const i=r.map(o=>JSON.stringify(o.format())).join(", ");H(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return r[0]}if(e=_s.from(e).format(),e==="Error(string)")return _s.from("error Error(string)");if(e==="Panic(uint256)")return _s.from("error Panic(uint256)");const s=this.#e.get(e);return s||null}forEachError(e){const t=Array.from(this.#e.keys());t.sort((s,r)=>s.localeCompare(r));for(let s=0;s<t.length;s++){const r=t[s];e(this.#e.get(r),s)}}_decodeParams(e,t){return this.#s.decode(e,t)}_encodeParams(e,t){return this.#s.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){const s=this.getError(e);H(s,"unknown error","fragment",e),e=s}return H(en(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,en(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){const s=this.getError(e);H(s,"unknown error","fragment",e),e=s}return sn([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){const s=this.getFunction(e);H(s,"unknown function","fragment",e),e=s}return H(en(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,en(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){const s=this.getFunction(e);H(s,"unknown function","fragment",e),e=s}return sn([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){const i=this.getFunction(e);H(i,"unknown function","fragment",e),e=i}let s="invalid length for result data";const r=ls(t);if(r.length%32===0)try{return this.#s.decode(e.outputs,r)}catch{s="could not decode result data"}ce(!1,s,"BAD_DATA",{value:_e(r),info:{method:e.name,signature:e.format()}})}makeError(e,t){const s=ot(e,"data"),r=ja.getBuiltinCallException("call",t,s);if(r.message.startsWith("execution reverted (unknown custom error)")){const a=_e(s.slice(0,4)),l=this.getError(a);if(l)try{const c=this.#s.decode(l.inputs,s.slice(4));r.revert={name:l.name,signature:l.format(),args:c},r.reason=r.revert.signature,r.message=`execution reverted: ${r.reason}`}catch{r.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(t);return o&&(r.invocation={method:o.name,signature:o.signature,args:o.args}),r}encodeFunctionResult(e,t){if(typeof e=="string"){const s=this.getFunction(e);H(s,"unknown function","fragment",e),e=s}return _e(this.#s.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){const i=this.getEvent(e);H(i,"unknown event","eventFragment",e),e=i}ce(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const s=[];e.anonymous||s.push(e.topicHash);const r=(i,o)=>i.type==="string"?Uo(o):i.type==="bytes"?mn(_e(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=zi(o):i.type.match(/^bytes/)?o=Kx(o,32):i.type==="address"&&this.#s.encode(["address"],[o]),ti(_e(o),32));for(t.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){H(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?s.push(null):a.baseType==="array"||a.baseType==="tuple"?H(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?s.push(i.map(l=>r(a,l))):s.push(r(a,i))});s.length&&s[s.length-1]===null;)s.pop();return s}encodeEventLog(e,t){if(typeof e=="string"){const o=this.getEvent(e);H(o,"unknown event","eventFragment",e),e=o}const s=[],r=[],i=[];return e.anonymous||s.push(e.topicHash),H(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((o,a)=>{const l=t[a];if(o.indexed)if(o.type==="string")s.push(Uo(l));else if(o.type==="bytes")s.push(mn(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");s.push(this.#s.encode([o.type],[l]))}else r.push(o),i.push(l)}),{data:this.#s.encode(r,i),topics:s}}decodeEventLog(e,t,s){if(typeof e=="string"){const m=this.getEvent(e);H(m,"unknown event","eventFragment",e),e=m}if(s!=null&&!e.anonymous){const m=e.topicHash;H(Bt(s[0],32)&&s[0].toLowerCase()===m,"fragment/topic mismatch","topics[0]",s[0]),s=s.slice(1)}const r=[],i=[],o=[];e.inputs.forEach((m,w)=>{m.indexed?m.type==="string"||m.type==="bytes"||m.baseType==="tuple"||m.baseType==="array"?(r.push(Ot.from({type:"bytes32",name:m.name})),o.push(!0)):(r.push(m),o.push(!1)):(i.push(m),o.push(!1))});const a=s!=null?this.#s.decode(r,sn(s)):null,l=this.#s.decode(i,t,!0),c=[],d=[];let f=0,p=0;return e.inputs.forEach((m,w)=>{let y=null;if(m.indexed)if(a==null)y=new J0(null);else if(o[w])y=new J0(a[p++]);else try{y=a[p++]}catch(A){y=A}else try{y=l[f++]}catch(A){y=A}c.push(y),d.push(m.name||null)}),Qr.fromItems(c,d)}parseTransaction(e){const t=ot(e.data,"tx.data"),s=Se(e.value!=null?e.value:0,"tx.value"),r=this.getFunction(_e(t.slice(0,4)));if(!r)return null;const i=this.#s.decode(r.inputs,t.slice(4));return new xD(r,r.selector,i,s)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new RD(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=_e(e),s=this.getError(en(t,0,4));if(!s)return null;const r=this.#s.decode(s.inputs,en(t,4));return new kD(s,s.selector,r)}static from(e){return e instanceof bo?e:typeof e=="string"?new bo(JSON.parse(e)):typeof e.formatJson=="function"?new bo(e.formatJson()):typeof e.format=="function"?new bo(e.format("json")):new bo(e)}}const wb=BigInt(0);function Pa(n){return n??null}function un(n){return n==null?null:n.toString()}class Z0{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,t,s){Ge(this,{gasPrice:Pa(e),maxFeePerGas:Pa(t),maxPriorityFeePerGas:Pa(s)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:s}=this;return{_type:"FeeData",gasPrice:un(e),maxFeePerGas:un(t),maxPriorityFeePerGas:un(s)}}}function Jd(n){const e={};n.to&&(e.to=n.to),n.from&&(e.from=n.from),n.data&&(e.data=_e(n.data));const t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const r of t)!(r in n)||n[r]==null||(e[r]=Se(n[r],`request.${r}`));const s="type,nonce".split(/,/);for(const r of s)!(r in n)||n[r]==null||(e[r]=rt(n[r],`request.${r}`));return n.accessList&&(e.accessList=Ko(n.accessList)),n.authorizationList&&(e.authorizationList=n.authorizationList.slice()),"blockTag"in n&&(e.blockTag=n.blockTag),"enableCcipRead"in n&&(e.enableCcipRead=!!n.enableCcipRead),"customData"in n&&(e.customData=n.customData),"blobVersionedHashes"in n&&n.blobVersionedHashes&&(e.blobVersionedHashes=n.blobVersionedHashes.slice()),"kzg"in n&&(e.kzg=n.kzg),"blobs"in n&&n.blobs&&(e.blobs=n.blobs.map(r=>cm(r)?_e(r):Object.assign({},r))),e}class ND{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#e;constructor(e,t){this.#e=e.transactions.map(s=>typeof s!="string"?new yu(s,t):s),Ge(this,{provider:t,hash:Pa(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Pa(e.prevRandao),extraData:e.extraData,baseFeePerGas:Pa(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return this.#e.map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=this.#e.slice();return e.length===0?[]:(ce(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:s,gasLimit:r,gasUsed:i,hash:o,miner:a,prevRandao:l,nonce:c,number:d,parentHash:f,parentBeaconBlockRoot:p,stateRoot:m,receiptsRoot:w,timestamp:y,transactions:A}=this;return{_type:"Block",baseFeePerGas:un(e),difficulty:un(t),extraData:s,gasLimit:un(r),gasUsed:un(i),blobGasUsed:un(this.blobGasUsed),excessBlobGas:un(this.excessBlobGas),hash:o,miner:a,prevRandao:l,nonce:c,number:d,parentHash:f,timestamp:y,parentBeaconBlockRoot:p,stateRoot:m,receiptsRoot:w,transactions:A}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#e.length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let t;if(typeof e=="number")t=this.#e[e];else{const s=e.toLowerCase();for(const r of this.#e)if(typeof r=="string"){if(r!==s)continue;t=r;break}else{if(r.hash!==s)continue;t=r;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(const s of t)if(s.hash===e)return s;H(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return DD(this)}}class vu{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,t){this.provider=t;const s=Object.freeze(e.topics.slice());Ge(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:s,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:s,data:r,index:i,removed:o,topics:a,transactionHash:l,transactionIndex:c}=this;return{_type:"log",address:e,blockHash:t,blockNumber:s,data:r,index:i,removed:o,topics:a,transactionHash:l,transactionIndex:c}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return ce(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return ce(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return ce(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return OD(this)}}class _b{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#e;constructor(e,t){this.#e=Object.freeze(e.logs.map(r=>new vu(r,t)));let s=wb;e.effectiveGasPrice!=null?s=e.effectiveGasPrice:e.gasPrice!=null&&(s=e.gasPrice),Ge(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:s,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return this.#e}toJSON(){const{to:e,from:t,contractAddress:s,hash:r,index:i,blockHash:o,blockNumber:a,logsBloom:l,logs:c,status:d,root:f}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:s,cumulativeGasUsed:un(this.cumulativeGasUsed),from:t,gasPrice:un(this.gasPrice),blobGasUsed:un(this.blobGasUsed),blobGasPrice:un(this.blobGasPrice),gasUsed:un(this.gasUsed),hash:r,index:i,logs:c,logsBloom:l,root:f,status:d,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return bb(this)}reorderedEvent(e){return ce(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Eb(this,e)}}class yu{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;authorizationList;#e;constructor(e,t){this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,this.#e=-1}toJSON(){const{blockNumber:e,blockHash:t,index:s,hash:r,type:i,to:o,from:a,nonce:l,data:c,signature:d,accessList:f,blobVersionedHashes:p}=this;return{_type:"TransactionResponse",accessList:f,blockNumber:e,blockHash:t,blobVersionedHashes:p,chainId:un(this.chainId),data:c,from:a,gasLimit:un(this.gasLimit),gasPrice:un(this.gasPrice),hash:r,maxFeePerGas:un(this.maxFeePerGas),maxPriorityFeePerGas:un(this.maxPriorityFeePerGas),maxFeePerBlobGas:un(this.maxFeePerBlobGas),nonce:l,signature:d,to:o,index:s,type:i,value:un(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const s=await this.getTransaction();s&&(e=s.blockNumber)}if(e==null)return null;const t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:t,blockNumber:s}=await is({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:s-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const s=e??1,r=t??0;let i=this.#e,o=-1,a=i===-1;const l=async()=>{if(a)return null;const{blockNumber:p,nonce:m}=await is({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(m<this.nonce){i=p;return}if(a)return null;const w=await this.getTransaction();if(!(w&&w.blockNumber!=null))for(o===-1&&(o=i-3,o<this.#e&&(o=this.#e));o<=p;){if(a)return null;const y=await this.provider.getBlock(o,!0);if(y==null)return;for(const A of y)if(A===this.hash)return;for(let A=0;A<y.length;A++){const _=await y.getTransaction(A);if(_.from===this.from&&_.nonce===this.nonce){if(a)return null;const C=await this.provider.getTransactionReceipt(_.hash);if(C==null||p-C.blockNumber+1<s)return;let S="replaced";_.data===this.data&&_.to===this.to&&_.value===this.value?S="repriced":_.data==="0x"&&_.from===_.to&&_.value===wb&&(S="cancelled"),ce(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:S==="replaced"||S==="cancelled",reason:S,replacement:_.replaceableTransaction(i),hash:_.hash,receipt:C})}}o++}},c=p=>{if(p==null||p.status!==0)return p;ce(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:p.to,from:p.from,data:""},receipt:p})},d=await this.provider.getTransactionReceipt(this.hash);if(s===0)return c(d);if(d){if(s===1||await d.confirmations()>=s)return c(d)}else if(await l(),s===0)return null;return await new Promise((p,m)=>{const w=[],y=()=>{w.forEach(_=>_())};if(w.push(()=>{a=!0}),r>0){const _=setTimeout(()=>{y(),m(Gt("wait for transaction timeout","TIMEOUT"))},r);w.push(()=>{clearTimeout(_)})}const A=async _=>{if(await _.confirmations()>=s){y();try{p(c(_))}catch(C){m(C)}}};if(w.push(()=>{this.provider.off(this.hash,A)}),this.provider.on(this.hash,A),i>=0){const _=async()=>{try{await l()}catch(C){if($n(C,"TRANSACTION_REPLACED")){y(),m(C);return}}a||this.provider.once("block",_)};w.push(()=>{this.provider.off("block",_)}),this.provider.once("block",_)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return ce(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),bb(this)}reorderedEvent(e){return ce(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ce(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Eb(this,e)}replaceableTransaction(e){H(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new yu(this,this.provider);return t.#e=e,t}}function DD(n){return{orphan:"drop-block",hash:n.hash,number:n.number}}function Eb(n,e){return{orphan:"reorder-transaction",tx:n,other:e}}function bb(n){return{orphan:"drop-transaction",tx:n}}function OD(n){return{orphan:"drop-log",log:{transactionHash:n.transactionHash,blockHash:n.blockHash,blockNumber:n.blockNumber,address:n.address,data:n.data,topics:Object.freeze(n.topics.slice()),index:n.index}}}class bm extends vu{interface;fragment;args;constructor(e,t,s){super(e,e.provider);const r=t.decodeEventLog(s,e.data,e.topics);Ge(this,{args:r,fragment:s,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Ib extends vu{error;constructor(e,t){super(e,e.provider),Ge(this,{error:t})}}class LD extends _b{#e;constructor(e,t,s){super(s,t),this.#e=e}get logs(){return super.logs.map(e=>{const t=e.topics.length?this.#e.getEvent(e.topics[0]):null;if(t)try{return new bm(e,this.#e,t)}catch(s){return new Ib(e,s)}return e})}}class Im extends yu{#e;constructor(e,t,s){super(s,t),this.#e=e}async wait(e,t){const s=await super.wait(e,t);return s==null?null:new LD(this.#e,this.provider,s)}}class Cb extends X1{log;constructor(e,t,s,r){super(e,t,s),Ge(this,{log:r})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class BD extends Cb{constructor(e,t,s,r,i){super(e,t,s,new bm(i,e.interface,r));const o=e.interface.decodeEventLog(r,this.log.data,this.log.topics);Ge(this,{args:o,fragment:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const eA=BigInt(0);function Tb(n){return n&&typeof n.call=="function"}function Sb(n){return n&&typeof n.estimateGas=="function"}function zh(n){return n&&typeof n.resolveName=="function"}function Pb(n){return n&&typeof n.sendTransaction=="function"}function Rb(n){if(n!=null){if(zh(n))return n;if(n.provider)return n.provider}}class MD{#e;fragment;constructor(e,t,s){if(Ge(this,{fragment:t}),t.inputs.length<s.length)throw new Error("too many arguments");const r=Ho(e.runner,"resolveName"),i=zh(r)?r:null;this.#e=(async function(){const o=await Promise.all(t.inputs.map((a,l)=>s[l]==null?null:a.walkAsync(s[l],(d,f)=>d==="address"?Array.isArray(f)?Promise.all(f.map(p=>ds(p,i))):ds(f,i):f)));return e.interface.encodeFilterTopics(t,o)})()}getTopicFilter(){return this.#e}}function Ho(n,e){return n==null?null:typeof n[e]=="function"?n:n.provider&&typeof n.provider[e]=="function"?n.provider:null}function Ro(n){return n==null?null:n.provider||null}async function xb(n,e){const t=nn.dereference(n,"overrides");H(typeof t=="object","invalid overrides parameter","overrides",n);const s=Jd(t);return H(s.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",s.to),H(s.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",s.data),s.from&&(s.from=s.from),s}async function FD(n,e,t){const s=Ho(n,"resolveName"),r=zh(s)?s:null;return await Promise.all(e.map((i,o)=>i.walkAsync(t[o],(a,l)=>(l=nn.dereference(l,a),a==="address"?ds(l,r):l))))}function UD(n){const e=async function(o){const a=await xb(o,["data"]);a.to=await n.getAddress(),a.from&&(a.from=await ds(a.from,Rb(n.runner)));const l=n.interface,c=Se(a.value||eA,"overrides.value")===eA,d=(a.data||"0x")==="0x";l.fallback&&!l.fallback.payable&&l.receive&&!d&&!c&&H(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),H(l.fallback||d,"cannot send data to receive-only contract","overrides.data",a.data);const f=l.receive||l.fallback&&l.fallback.payable;return H(f||c,"cannot send value to non-payable fallback","overrides.value",a.value),H(l.fallback||d,"cannot send data to receive-only contract","overrides.data",a.data),a},t=async function(o){const a=Ho(n.runner,"call");ce(Tb(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const l=await e(o);try{return await a.call(l)}catch(c){throw lm(c)&&c.data?n.interface.makeError(c.data,l):c}},s=async function(o){const a=n.runner;ce(Pb(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const l=await a.sendTransaction(await e(o)),c=Ro(n.runner);return new Im(n.interface,c,l)},r=async function(o){const a=Ho(n.runner,"estimateGas");return ce(Sb(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await s(o);return Ge(i,{_contract:n,estimateGas:r,populateTransaction:e,send:s,staticCall:t}),i}function VD(n,e){const t=function(...c){const d=n.interface.getFunction(e,c);return ce(d,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:c}}),d},s=async function(...c){const d=t(...c);let f={};if(d.inputs.length+1===c.length&&(f=await xb(c.pop()),f.from&&(f.from=await ds(f.from,Rb(n.runner)))),d.inputs.length!==c.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const p=await FD(n.runner,d.inputs,c);return Object.assign({},f,await is({to:n.getAddress(),data:n.interface.encodeFunctionData(d,p)}))},r=async function(...c){const d=await a(...c);return d.length===1?d[0]:d},i=async function(...c){const d=n.runner;ce(Pb(d),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const f=await d.sendTransaction(await s(...c)),p=Ro(n.runner);return new Im(n.interface,p,f)},o=async function(...c){const d=Ho(n.runner,"estimateGas");return ce(Sb(d),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await d.estimateGas(await s(...c))},a=async function(...c){const d=Ho(n.runner,"call");ce(Tb(d),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const f=await s(...c);let p="0x";try{p=await d.call(f)}catch(w){throw lm(w)&&w.data?n.interface.makeError(w.data,f):w}const m=t(...c);return n.interface.decodeFunctionResult(m,p)},l=async(...c)=>t(...c).constant?await r(...c):await i(...c);return Ge(l,{name:n.interface.getFunctionName(e),_contract:n,_key:e,getFragment:t,estimateGas:o,populateTransaction:s,send:i,staticCall:r,staticCallResult:a}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{const c=n.interface.getFunction(e);return ce(c,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),c}}),l}function $D(n,e){const t=function(...r){const i=n.interface.getEvent(e,r);return ce(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:r}}),i},s=function(...r){return new MD(n,t(...r),r)};return Ge(s,{name:n.interface.getEventName(e),_contract:n,_key:e,getFragment:t}),Object.defineProperty(s,"fragment",{configurable:!1,enumerable:!0,get:()=>{const r=n.interface.getEvent(e);return ce(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),r}}),s}const Yd=Symbol.for("_ethersInternal_contract"),kb=new WeakMap;function HD(n,e){kb.set(n[Yd],e)}function Rs(n){return kb.get(n[Yd])}function GD(n){return n&&typeof n=="object"&&"getTopicFilter"in n&&typeof n.getTopicFilter=="function"&&n.fragment}async function Cm(n,e){let t,s=null;if(Array.isArray(e)){const i=function(o){if(Bt(o,32))return o;const a=n.interface.getEvent(o);return H(a,"unknown fragment","name",o),a.topicHash};t=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?t=[null]:typeof e=="string"?Bt(e,32)?t=[e]:(s=n.interface.getEvent(e),H(s,"unknown fragment","event",e),t=[s.topicHash]):GD(e)?t=await e.getTopicFilter():"fragment"in e?(s=e.fragment,t=[s.topicHash]):H(!1,"unknown event name","event",e);t=t.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const r=t.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:s,tag:r,topics:t}}async function fc(n,e){const{subs:t}=Rs(n);return t.get((await Cm(n,e)).tag)||null}async function tA(n,e,t){const s=Ro(n.runner);ce(s,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:r,tag:i,topics:o}=await Cm(n,t),{addr:a,subs:l}=Rs(n);let c=l.get(i);if(!c){const f={address:a||n,topics:o},p=A=>{let _=r;if(_==null)try{_=n.interface.getEvent(A.topics[0])}catch{}if(_){const C=_,S=r?n.interface.decodeEventLog(r,A.data,A.topics):[];ig(n,t,S,B=>new BD(n,B,t,C,A))}else ig(n,t,[],C=>new Cb(n,C,t,A))};let m=[];c={tag:i,listeners:[],start:()=>{m.length||m.push(s.on(f,p))},stop:async()=>{if(m.length==0)return;let A=m;m=[],await Promise.all(A),s.off(f,p)}},l.set(i,c)}return c}let rg=Promise.resolve();async function QD(n,e,t,s){await rg;const r=await fc(n,e);if(!r)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:o,once:a})=>{const l=Array.from(t);s&&l.push(s(a?null:o));try{o.call(n,...l)}catch{}return!a}),r.listeners.length===0&&(r.stop(),Rs(n).subs.delete(r.tag)),i>0}async function ig(n,e,t,s){try{await rg}catch{}const r=QD(n,e,t,s);return rg=r,await r}const td=["then"];class Pc{target;interface;runner;filters;[Yd];fallback;constructor(e,t,s,r){H(typeof e=="string"||ME(e),"invalid value for Contract target","target",e),s==null&&(s=null);const i=bo.from(t);Ge(this,{target:e,runner:s,interface:i}),Object.defineProperty(this,Yd,{value:{}});let o,a=null,l=null;if(r){const f=Ro(s);l=new Im(this.interface,f,r)}let c=new Map;if(typeof e=="string")if(Bt(e))a=e,o=Promise.resolve(e);else{const f=Ho(s,"resolveName");if(!zh(f))throw Gt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=f.resolveName(e).then(p=>{if(p==null)throw Gt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Rs(this).addr=p,p})}else o=e.getAddress().then(f=>{if(f==null)throw new Error("TODO");return Rs(this).addr=f,f});HD(this,{addrPromise:o,addr:a,deployTx:l,subs:c});const d=new Proxy({},{get:(f,p,m)=>{if(typeof p=="symbol"||td.indexOf(p)>=0)return Reflect.get(f,p,m);try{return this.getEvent(p)}catch(w){if(!$n(w,"INVALID_ARGUMENT")||w.argument!=="key")throw w}},has:(f,p)=>td.indexOf(p)>=0?Reflect.has(f,p):Reflect.has(f,p)||this.interface.hasEvent(String(p))});return Ge(this,{filters:d}),Ge(this,{fallback:i.receive||i.fallback?UD(this):null}),new Proxy(this,{get:(f,p,m)=>{if(typeof p=="symbol"||p in f||td.indexOf(p)>=0)return Reflect.get(f,p,m);try{return f.getFunction(p)}catch(w){if(!$n(w,"INVALID_ARGUMENT")||w.argument!=="key")throw w}},has:(f,p)=>typeof p=="symbol"||p in f||td.indexOf(p)>=0?Reflect.has(f,p):f.interface.hasFunction(p)})}connect(e){return new Pc(this.target,this.interface,e)}attach(e){return new Pc(e,this.interface,this.runner)}async getAddress(){return await Rs(this).addrPromise}async getDeployedCode(){const e=Ro(this.runner);ce(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return t==="0x"?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const s=Ro(this.runner);return ce(s!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((r,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return r(this);s.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return Rs(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),VD(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),$D(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,s){t==null&&(t=0),s==null&&(s="latest");const{addr:r,addrPromise:i}=Rs(this),o=r||await i,{fragment:a,topics:l}=await Cm(this,e),c={address:o,topics:l,fromBlock:t,toBlock:s},d=Ro(this.runner);return ce(d,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await d.getLogs(c)).map(f=>{let p=a;if(p==null)try{p=this.interface.getEvent(f.topics[0])}catch{}if(p)try{return new bm(f,this.interface,p)}catch(m){return new Ib(f,m)}return new vu(f,d)})}async on(e,t){const s=await tA(this,"on",e);return s.listeners.push({listener:t,once:!1}),s.start(),this}async once(e,t){const s=await tA(this,"once",e);return s.listeners.push({listener:t,once:!0}),s.start(),this}async emit(e,...t){return await ig(this,e,t,null)}async listenerCount(e){if(e){const r=await fc(this,e);return r?r.listeners.length:0}const{subs:t}=Rs(this);let s=0;for(const{listeners:r}of t.values())s+=r.length;return s}async listeners(e){if(e){const r=await fc(this,e);return r?r.listeners.map(({listener:i})=>i):[]}const{subs:t}=Rs(this);let s=[];for(const{listeners:r}of t.values())s=s.concat(r.map(({listener:i})=>i));return s}async off(e,t){const s=await fc(this,e);if(!s)return this;if(t){const r=s.listeners.map(({listener:i})=>i).indexOf(t);r>=0&&s.listeners.splice(r,1)}return(t==null||s.listeners.length===0)&&(s.stop(),Rs(this).subs.delete(s.tag)),this}async removeAllListeners(e){if(e){const t=await fc(this,e);if(!t)return this;t.stop(),Rs(this).subs.delete(t.tag)}else{const{subs:t}=Rs(this);for(const{tag:s,stop:r}of t.values())r(),t.delete(s)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends Pc{constructor(r,i=null){super(r,e,i)}}return t}static from(e,t,s){return s==null&&(s=null),new this(e,t,s)}}function jD(){return Pc}class Rc extends jD(){}function rp(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):H(!1,"unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}class zD{name;constructor(e){Ge(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const Nb=new RegExp("^(ipfs)://(.*)$","i"),nA=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Nb,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class Ra{provider;address;name;#e;#t;constructor(e,t,s){Ge(this,{provider:e,address:t,name:s}),this.#e=null,this.#t=new Rc(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return this.#e==null&&(this.#e=(async()=>{try{return await this.#t.supportsInterface("0x9061b923")}catch(e){if($n(e,"CALL_EXCEPTION"))return!1;throw this.#e=null,e}})()),await this.#e}async#n(e,t){t=(t||[]).slice();const s=this.#t.interface;t.unshift(sg(this.name));let r=null;await this.supportsWildcard()&&(r=s.getFunction(e),ce(r,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[aD(this.name,255),s.encodeFunctionData(r,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const i=await this.#t[e](...t);return r?s.decodeFunctionResult(r,i)[0]:i}catch(i){if(!$n(i,"CALL_EXCEPTION"))throw i}return null}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await this.#n("addr(bytes32)");return i==null||i===zc?null:i}catch(i){if($n(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await this.#n("addr(bytes32,uint)",[i]);if(Bt(o,20))return bt(o)}let t=null;for(const i of this.provider.plugins)if(i instanceof zD&&i.supportsCoinType(e)){t=i;break}if(t==null)return null;const s=await this.#n("addr(bytes32,uint)",[e]);if(s==null||s==="0x")return null;const r=await t.decodeAddress(e,s);if(r!=null)return r;ce(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:s}})}async getText(e){const t=await this.#n("text(bytes32,string)",[e]);return t==null||t==="0x"?null:t}async getContentHash(){const e=await this.#n("contenthash(bytes32)");if(e==null||e==="0x")return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const r=t[1]==="e3010170"?"ipfs":"ipns",i=parseInt(t[4],16);if(t[5].length===i*2)return`${r}://${Jx("0x"+t[2])}`}const s=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(s&&s[1].length===64)return`bzz://${s[1]}`;ce(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(t==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let s=0;s<nA.length;s++){const r=t.match(nA[s]);if(r==null)continue;const i=r[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const o=rp(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:t});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const l=(r[2]||"").split("/");if(l.length!==2)return e.push({type:`!${i}caip`,value:r[2]||""}),{url:null,linkage:e};const c=l[1],d=new Rc(l[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const y=await d.ownerOf(c);if(a!==y)return e.push({type:"!owner",value:y}),{url:null,linkage:e};e.push({type:"owner",value:y})}else if(i==="erc1155"){const y=await d.balanceOf(a,c);if(!y)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:y.toString()})}let f=await d[o](c);if(f==null||f==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:f}),i==="erc1155"&&(f=f.replace("{id}",zi(c,32).substring(2)),e.push({type:"metadata-url-expanded",value:f})),f.match(/^ipfs:/i)&&(f=rp(f)),e.push({type:"metadata-url",value:f});let p={};const m=await new ni(f).send();m.assertOk();try{p=m.bodyJson}catch{try{e.push({type:"!metadata",value:m.bodyText})}catch{const _=m.body;return _&&e.push({type:"!metadata",value:_e(_)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!p)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(p)});let w=p.image;if(typeof w!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!w.match(/^(https:\/\/|data:)/i)){if(w.match(Nb)==null)return e.push({type:"!imageUrl-ipfs",value:w}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:w}),w=rp(w)}return e.push({type:"url",value:w}),{linkage:e,url:w}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),s=t.getPlugin("org.ethers.plugins.network.Ens");return ce(s,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),s.address}static async#s(e,t){const s=await Ra.getEnsAddress(e);try{const i=await new Rc(s,["function resolver(bytes32) view returns (address)"],e).resolver(sg(t),{enableCcipRead:!0});return i===zc?null:i}catch(r){throw r}return null}static async fromName(e,t){let s=t;for(;;){if(s===""||s==="."||t!=="eth"&&s==="eth")return null;const r=await Ra.#s(e,s);if(r!=null){const i=new Ra(e,r,t);return s!==t&&!await i.supportsWildcard()?null:i}s=s.split(".").slice(1).join(".")}}}const sA=BigInt(0);function ft(n,e){return(function(t){return t==null?e:n(t)})}function Xc(n,e){return(t=>{if(e&&t==null)return null;if(!Array.isArray(t))throw new Error("not an array");return t.map(s=>n(s))})}function Au(n,e){return(t=>{const s={};for(const r in n){let i=r;if(e&&r in e&&!(i in t)){for(const o of e[r])if(o in t){i=o;break}}try{const o=n[r](t[i]);o!==void 0&&(s[r]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";ce(!1,`invalid value for value.${r} (${a})`,"BAD_DATA",{value:t})}}return s})}function WD(n){switch(n){case!0:case"true":return!0;case!1:case"false":return!1}H(!1,`invalid boolean; ${JSON.stringify(n)}`,"value",n)}function za(n){return H(Bt(n,!0),"invalid data","value",n),n}function Vn(n){return H(Bt(n,32),"invalid hash","value",n),n}const KD=Au({address:bt,blockHash:Vn,blockNumber:rt,data:za,index:rt,removed:ft(WD,!1),topics:Xc(Vn),transactionHash:Vn,transactionIndex:rt},{index:["logIndex"]});function qD(n){return KD(n)}const JD=Au({hash:ft(Vn),parentHash:Vn,parentBeaconBlockRoot:ft(Vn,null),number:rt,timestamp:rt,nonce:ft(za),difficulty:Se,gasLimit:Se,gasUsed:Se,stateRoot:ft(Vn,null),receiptsRoot:ft(Vn,null),blobGasUsed:ft(Se,null),excessBlobGas:ft(Se,null),miner:ft(bt),prevRandao:ft(Vn,null),extraData:za,baseFeePerGas:ft(Se)},{prevRandao:["mixHash"]});function YD(n){const e=JD(n);return e.transactions=n.transactions.map(t=>typeof t=="string"?t:Db(t)),e}const XD=Au({transactionIndex:rt,blockNumber:rt,transactionHash:Vn,address:bt,topics:Xc(Vn),data:za,index:rt,blockHash:Vn},{index:["logIndex"]});function ZD(n){return XD(n)}const eO=Au({to:ft(bt,null),from:ft(bt,null),contractAddress:ft(bt,null),index:rt,root:ft(_e),gasUsed:Se,blobGasUsed:ft(Se,null),logsBloom:ft(za),blockHash:Vn,hash:Vn,logs:Xc(ZD),blockNumber:rt,cumulativeGasUsed:Se,effectiveGasPrice:ft(Se),blobGasPrice:ft(Se,null),status:ft(rt),type:ft(rt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function tO(n){return eO(n)}function Db(n){n.to&&Se(n.to)===sA&&(n.to="0x0000000000000000000000000000000000000000");const e=Au({hash:Vn,index:ft(rt,void 0),type:t=>t==="0x"||t==null?0:rt(t),accessList:ft(Ko,null),blobVersionedHashes:ft(Xc(Vn,!0),null),authorizationList:ft(Xc(t=>{let s;if(t.signature)s=t.signature;else{let r=t.yParity;r==="0x1b"?r=0:r==="0x1c"&&(r=1),s=Object.assign({},t,{yParity:r})}return{address:bt(t.address),chainId:Se(t.chainId),nonce:Se(t.nonce),signature:tn.from(s)}},!1),null),blockHash:ft(Vn,null),blockNumber:ft(rt,null),transactionIndex:ft(rt,null),from:bt,gasPrice:ft(Se),maxPriorityFeePerGas:ft(Se),maxFeePerGas:ft(Se),maxFeePerBlobGas:ft(Se,null),gasLimit:Se,to:ft(bt,null),value:Se,nonce:rt,data:za,creates:ft(bt,null),chainId:ft(Se,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(n);if(e.to==null&&e.creates==null&&(e.creates=Gk(e)),(n.type===1||n.type===2)&&n.accessList==null&&(e.accessList=[]),n.signature?e.signature=tn.from(n.signature):e.signature=tn.from(n),e.chainId==null){const t=e.signature.legacyChainId;t!=null&&(e.chainId=t)}return e.blockHash&&Se(e.blockHash)===sA&&(e.blockHash=null),e}const nO="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class wu{name;constructor(e){Ge(this,{name:e})}clone(){return new wu(this.name)}}class Wh extends wu{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,t){e==null&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);const s={effectiveBlock:e};function r(i,o){let a=(t||{})[i];a==null&&(a=o),H(typeof a=="number",`invalud value for ${i}`,"costs",t),s[i]=a}r("txBase",21e3),r("txCreate",32e3),r("txDataZero",4),r("txDataNonzero",16),r("txAccessListStorageKey",1900),r("txAccessListAddress",2400),Ge(this,s)}clone(){return new Wh(this.effectiveBlock,this)}}class Kh extends wu{address;targetNetwork;constructor(e,t){super("org.ethers.plugins.network.Ens"),Ge(this,{address:e||nO,targetNetwork:t??1})}clone(){return new Kh(this.address,this.targetNetwork)}}class sO extends wu{#e;#t;get url(){return this.#e}get processFunc(){return this.#t}constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#e=e,this.#t=t}clone(){return this}}const ip=new Map;class Ns{#e;#t;#n;constructor(e,t){this.#e=e,this.#t=Se(t),this.#n=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#e}set name(e){this.#e=e}get chainId(){return this.#t}set chainId(e){this.#t=Se(e,"chainId")}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Se(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Se(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Se(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(this.#n.values())}attachPlugin(e){if(this.#n.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#n.set(e.name,e.clone()),this}getPlugin(e){return this.#n.get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){const e=new Ns(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new Wh;let s=t.txBase;if(e.to==null&&(s+=t.txCreate),e.data)for(let r=2;r<e.data.length;r+=2)e.data.substring(r,r+2)==="00"?s+=t.txDataZero:s+=t.txDataNonzero;if(e.accessList){const r=Ko(e.accessList);for(const i in r)s+=t.txAccessListAddress+t.txAccessListStorageKey*r[i].storageKeys.length}return s}static from(e){if(rO(),e==null)return Ns.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const t=ip.get(e);if(t)return t();if(typeof e=="bigint")return new Ns("unknown",e);H(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){H(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const t=new Ns(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&t.attachPlugin(new Kh(e.ensAddress,e.ensNetwork)),t}H(!1,"invalid network","network",e)}static register(e,t){typeof e=="number"&&(e=BigInt(e));const s=ip.get(e);s&&H(!1,`conflicting network for ${JSON.stringify(s.name)}`,"nameOrChainId",e),ip.set(e,t)}}function rA(n,e){const t=String(n);if(!t.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${n}`);const s=t.split(".");if(s.length===1&&s.push(""),s.length!==2)throw new Error(`invalid gwei value: ${n}`);for(;s[1].length<e;)s[1]+="0";if(s[1].length>9){let r=BigInt(s[1].substring(0,9));s[1].substring(9).match(/^0+$/)||r++,s[1]=r.toString()}return BigInt(s[0]+s[1])}function iA(n){return new sO(n,async(e,t,s)=>{s.setHeader("User-Agent","ethers");let r;try{const[i,o]=await Promise.all([s.send(),e()]);r=i;const a=r.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:rA(a.maxFee,9),maxPriorityFeePerGas:rA(a.maxPriorityFee,9)}}catch(i){ce(!1,`error encountered with polygon gas station (${JSON.stringify(s.url)})`,"SERVER_ERROR",{request:s,response:r,error:i})}})}let oA=!1;function rO(){if(oA)return;oA=!0;function n(e,t,s){const r=function(){const i=new Ns(e,t);return s.ensNetwork!=null&&i.attachPlugin(new Kh(null,s.ensNetwork)),i.attachPlugin(new Wh),(s.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Ns.register(e,r),Ns.register(t,r),s.altNames&&s.altNames.forEach(i=>{Ns.register(i,r)})}n("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),n("ropsten",3,{ensNetwork:3}),n("rinkeby",4,{ensNetwork:4}),n("goerli",5,{ensNetwork:5}),n("kovan",42,{ensNetwork:42}),n("sepolia",11155111,{ensNetwork:11155111}),n("holesky",17e3,{ensNetwork:17e3}),n("classic",61,{}),n("classicKotti",6,{}),n("arbitrum",42161,{ensNetwork:1}),n("arbitrum-goerli",421613,{}),n("arbitrum-sepolia",421614,{}),n("base",8453,{ensNetwork:1}),n("base-goerli",84531,{}),n("base-sepolia",84532,{}),n("bnb",56,{ensNetwork:1}),n("bnbt",97,{}),n("linea",59144,{ensNetwork:1}),n("linea-goerli",59140,{}),n("linea-sepolia",59141,{}),n("matic",137,{ensNetwork:1,plugins:[iA("https://gasstation.polygon.technology/v2")]}),n("matic-amoy",80002,{}),n("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[iA("https://gasstation-testnet.polygon.technology/v2")]}),n("optimism",10,{ensNetwork:1,plugins:[]}),n("optimism-goerli",420,{}),n("optimism-sepolia",11155420,{}),n("xdai",100,{ensNetwork:1})}function og(n){return JSON.parse(JSON.stringify(n))}class iO{#e;#t;#n;#s;constructor(e){this.#e=e,this.#t=null,this.#n=4e3,this.#s=-2}get pollingInterval(){return this.#n}set pollingInterval(e){this.#n=e}async#r(){try{const e=await this.#e.getBlockNumber();if(this.#s===-2){this.#s=e;return}if(e!==this.#s){for(let t=this.#s+1;t<=e;t++){if(this.#t==null)return;await this.#e.emit("block",t)}this.#s=e}}catch{}this.#t!=null&&(this.#t=this.#e._setTimeout(this.#r.bind(this),this.#n))}start(){this.#t||(this.#t=this.#e._setTimeout(this.#r.bind(this),this.#n),this.#r())}stop(){this.#t&&(this.#e._clearTimeout(this.#t),this.#t=null)}pause(e){this.stop(),e&&(this.#s=-2)}resume(){this.start()}}class Tm{#e;#t;#n;constructor(e){this.#e=e,this.#n=!1,this.#t=t=>{this._poll(t,this.#e)}}async _poll(e,t){throw new Error("sub-classes must override this")}start(){this.#n||(this.#n=!0,this.#t(-2),this.#e.on("block",this.#t))}stop(){this.#n&&(this.#n=!1,this.#e.off("block",this.#t))}pause(e){this.stop()}resume(){this.start()}}class oO extends Tm{#e;#t;constructor(e,t){super(e),this.#e=t,this.#t=-2}pause(e){e&&(this.#t=-2),super.pause(e)}async _poll(e,t){const s=await t.getBlock(this.#e);s!=null&&(this.#t===-2?this.#t=s.number:s.number>this.#t&&(t.emit(this.#e,s.number),this.#t=s.number))}}class aO extends Tm{#e;constructor(e,t){super(e),this.#e=og(t)}async _poll(e,t){throw new Error("@TODO")}}class lO extends Tm{#e;constructor(e,t){super(e),this.#e=t}async _poll(e,t){const s=await t.getTransactionReceipt(this.#e);s&&t.emit(this.#e,s)}}class Sm{#e;#t;#n;#s;#r;constructor(e,t){this.#e=e,this.#t=og(t),this.#n=this.#o.bind(this),this.#s=!1,this.#r=-2}async#o(e){if(this.#r===-2)return;const t=og(this.#t);t.fromBlock=this.#r+1,t.toBlock=e;const s=await this.#e.getLogs(t);if(s.length===0){this.#r<e-60&&(this.#r=e-60);return}for(const r of s)this.#e.emit(this.#t,r),this.#r=r.blockNumber}start(){this.#s||(this.#s=!0,this.#r===-2&&this.#e.getBlockNumber().then(e=>{this.#r=e}),this.#e.on("block",this.#n))}stop(){this.#s&&(this.#s=!1,this.#e.off("block",this.#n))}pause(e){this.stop(),e&&(this.#r=-2)}resume(){this.start()}}const cO=BigInt(2),uO=10;function nd(n){return n&&typeof n.then=="function"}function yd(n,e){return n+":"+JSON.stringify(e,(t,s)=>{if(s==null)return"null";if(typeof s=="bigint")return`bigint:${s.toString()}`;if(typeof s=="string")return s.toLowerCase();if(typeof s=="object"&&!Array.isArray(s)){const r=Object.keys(s);return r.sort(),r.reduce((i,o)=>(i[o]=s[o],i),{})}return s})}class Ob{name;constructor(e){Ge(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function dO(n){return JSON.parse(JSON.stringify(n))}function ag(n){return n=Array.from(new Set(n).values()),n.sort(),n}async function op(n,e){if(n==null)throw new Error("invalid event");if(Array.isArray(n)&&(n={topics:n}),typeof n=="string")switch(n){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:n,tag:n}}if(Bt(n,32)){const t=n.toLowerCase();return{type:"transaction",tag:yd("tx",{hash:t}),hash:t}}if(n.orphan){const t=n;return{type:"orphan",tag:yd("orphan",t),filter:dO(t)}}if(n.address||n.topics){const t=n,s={topics:(t.topics||[]).map(r=>r==null?null:Array.isArray(r)?ag(r.map(i=>i.toLowerCase())):r.toLowerCase())};if(t.address){const r=[],i=[],o=a=>{Bt(a)?r.push(a):i.push((async()=>{r.push(await ds(a,e))})())};Array.isArray(t.address)?t.address.forEach(o):o(t.address),i.length&&await Promise.all(i),s.address=ag(r.map(a=>a.toLowerCase()))}return{filter:s,tag:yd("event",s),type:"event"}}H(!1,"unknown ProviderEvent","event",n)}function ap(){return new Date().getTime()}const hO={cacheTimeout:250,pollingInterval:4e3};class fO{#e;#t;#n;#s;#r;#o;#i;#a;#d;#c;#p;#g;constructor(e,t){if(this.#g=Object.assign({},hO,t||{}),e==="any")this.#o=!0,this.#r=null;else if(e){const s=Ns.from(e);this.#o=!1,this.#r=Promise.resolve(s),setTimeout(()=>{this.emit("network",s,null)},0)}else this.#o=!1,this.#r=null;this.#a=-1,this.#i=new Map,this.#e=new Map,this.#t=new Map,this.#n=null,this.#s=!1,this.#d=1,this.#c=new Map,this.#p=!1}get pollingInterval(){return this.#g.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#t.values())}attachPlugin(e){if(this.#t.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#t.set(e.name,e.connect(this)),this}getPlugin(e){return this.#t.get(e)||null}get disableCcipRead(){return this.#p}set disableCcipRead(e){this.#p=!!e}async#l(e){const t=this.#g.cacheTimeout;if(t<0)return await this._perform(e);const s=yd(e.method,e);let r=this.#i.get(s);return r||(r=this._perform(e),this.#i.set(s,r),setTimeout(()=>{this.#i.get(s)===r&&this.#i.delete(s)},t)),await r}async ccipReadFetch(e,t,s){if(this.disableCcipRead||s.length===0||e.to==null)return null;const r=e.to.toLowerCase(),i=t.toLowerCase(),o=[];for(let a=0;a<s.length;a++){const l=s[a],c=l.replace("{sender}",r).replace("{data}",i),d=new ni(c);l.indexOf("{data}")===-1&&(d.body={data:i,sender:r}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:d,index:a,urls:s});let f="unknown error",p;try{p=await d.send()}catch(m){o.push(m.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:{error:m}});continue}try{const m=p.bodyJson;if(m.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:d,result:m}),m.data;m.message&&(f=m.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:m})}catch{}ce(p.statusCode<400||p.statusCode>=500,`response not found during CCIP fetch: ${f}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:l,errorMessage:f}}),o.push(f)}ce(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:s,errorMessages:o}})}_wrapBlock(e,t){return new ND(YD(e),this)}_wrapLog(e,t){return new vu(qD(e),this)}_wrapTransactionReceipt(e,t){return new _b(tO(e),this)}_wrapTransactionResponse(e,t){return new yu(Db(e),this)}_detectNetwork(){ce(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){ce(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=rt(await this.#l({method:"getBlockNumber"}),"%response");return this.#a>=0&&(this.#a=e),e}_getAddress(e){return ds(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(Bt(e))return Bt(e,32)?e:qs(e);if(typeof e=="bigint"&&(e=rt(e,"blockTag")),typeof e=="number")return e>=0?qs(e):this.#a>=0?qs(this.#a+e):this.getBlockNumber().then(t=>qs(t+e));H(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const t=(e.topics||[]).map(l=>l==null?null:Array.isArray(l)?ag(l.map(c=>c.toLowerCase())):l.toLowerCase()),s="blockHash"in e?e.blockHash:void 0,r=(l,c,d)=>{let f;switch(l.length){case 0:break;case 1:f=l[0];break;default:l.sort(),f=l}if(s&&(c!=null||d!=null))throw new Error("invalid filter");const p={};return f&&(p.address=f),t.length&&(p.topics=t),c&&(p.fromBlock=c),d&&(p.toBlock=d),s&&(p.blockHash=s),p};let i=[];if(e.address)if(Array.isArray(e.address))for(const l of e.address)i.push(this._getAddress(l));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(l=>typeof l!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(l=>r(l[0],l[1],l[2])):r(i,o,a)}_getTransactionRequest(e){const t=Jd(e),s=[];if(["to","from"].forEach(r=>{if(t[r]==null)return;const i=ds(t[r],this);nd(i)?s.push((async function(){t[r]=await i})()):t[r]=i}),t.blockTag!=null){const r=this._getBlockTag(t.blockTag);nd(r)?s.push((async function(){t.blockTag=await r})()):t.blockTag=r}return s.length?(async function(){return await Promise.all(s),t})():t}async getNetwork(){if(this.#r==null){const r=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw this.#r===r&&(this.#r=null),i}})();return this.#r=r,(await r).clone()}const e=this.#r,[t,s]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==s.chainId&&(this.#o?(this.emit("network",s,t),this.#r===e&&(this.#r=Promise.resolve(s))):ce(!1,`network changed: ${t.chainId} => ${s.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:r,gasPrice:i,priorityFee:o}=await is({_block:this.#v("latest",!1),gasPrice:(async()=>{try{const d=await this.#l({method:"getGasPrice"});return Se(d,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const d=await this.#l({method:"getPriorityFee"});return Se(d,"%response")}catch{}return null})()});let a=null,l=null;const c=this._wrapBlock(r,e);return c&&c.baseFeePerGas&&(l=o??BigInt("1000000000"),a=c.baseFeePerGas*cO+l),new Z0(i,a,l)},s=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(s){const r=new ni(s.url),i=await s.processFunc(t,this,r);return new Z0(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return nd(t)&&(t=await t),Se(await this.#l({method:"estimateGas",transaction:t}),"%response")}async#u(e,t,s){ce(s<uO,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const r=Jd(e);try{return _e(await this._perform({method:"call",transaction:r,blockTag:t}))}catch(i){if(!this.disableCcipRead&&lm(i)&&i.data&&s>=0&&t==="latest"&&r.to!=null&&en(i.data,0,4)==="0x556f1830"){const o=i.data,a=await ds(r.to,this);let l;try{l=yO(en(i.data,4))}catch(f){ce(!1,f.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:r,info:{data:o}})}ce(l.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:r,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:l.errorArgs}});const c=await this.ccipReadFetch(r,l.calldata,l.urls);ce(c!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:r,info:{data:i.data,errorArgs:l.errorArgs}});const d={to:a,data:sn([l.selector,vO([c,l.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:d});try{const f=await this.#u(d,t,s+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},d),result:f}),f}catch(f){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},d),error:f}),f}}throw i}}async#h(e){const{value:t}=await is({network:this.getNetwork(),value:e});return t}async call(e){const{tx:t,blockTag:s}=await is({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#h(this.#u(t,s,e.enableCcipRead?0:-1))}async#f(e,t,s){let r=this._getAddress(t),i=this._getBlockTag(s);return(typeof r!="string"||typeof i!="string")&&([r,i]=await Promise.all([r,i])),await this.#h(this.#l(Object.assign(e,{address:r,blockTag:i})))}async getBalance(e,t){return Se(await this.#f({method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return rt(await this.#f({method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return _e(await this.#f({method:"getCode"},e,t))}async getStorage(e,t,s){const r=Se(t,"position");return _e(await this.#f({method:"getStorage",position:r},e,s))}async broadcastTransaction(e){const{blockNumber:t,hash:s,network:r}=await is({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=Ws.from(e);if(i.hash!==s)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,r).replaceableTransaction(t)}async#v(e,t){if(Bt(e,32))return await this.#l({method:"getBlock",blockHash:e,includeTransactions:t});let s=this._getBlockTag(e);return typeof s!="string"&&(s=await s),await this.#l({method:"getBlock",blockTag:s,includeTransactions:t})}async getBlock(e,t){const{network:s,params:r}=await is({network:this.getNetwork(),params:this.#v(e,!!t)});return r==null?null:this._wrapBlock(r,s)}async getTransaction(e){const{network:t,params:s}=await is({network:this.getNetwork(),params:this.#l({method:"getTransaction",hash:e})});return s==null?null:this._wrapTransactionResponse(s,t)}async getTransactionReceipt(e){const{network:t,params:s}=await is({network:this.getNetwork(),params:this.#l({method:"getTransactionReceipt",hash:e})});if(s==null)return null;if(s.gasPrice==null&&s.effectiveGasPrice==null){const r=await this.#l({method:"getTransaction",hash:e});if(r==null)throw new Error("report this; could not find tx or effectiveGasPrice");s.effectiveGasPrice=r.gasPrice}return this._wrapTransactionReceipt(s,t)}async getTransactionResult(e){const{result:t}=await is({network:this.getNetwork(),result:this.#l({method:"getTransactionResult",hash:e})});return t==null?null:_e(t)}async getLogs(e){let t=this._getFilter(e);nd(t)&&(t=await t);const{network:s,params:r}=await is({network:this.getNetwork(),params:this.#l({method:"getLogs",filter:t})});return r.map(i=>this._wrapLog(i,s))}_getProvider(e){ce(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await Ra.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=bt(e);const t=sg(e.substring(2).toLowerCase()+".addr.reverse");try{const s=await Ra.getEnsAddress(this),i=await new Rc(s,["function resolver(bytes32) view returns (address)"],this).resolver(t);if(i==null||i===zc)return null;const a=await new Rc(i,["function name(bytes32) view returns (string)"],this).name(t);return await this.resolveName(a)!==e?null:a}catch(s){if($n(s,"BAD_DATA")&&s.value==="0x"||$n(s,"CALL_EXCEPTION"))return null;throw s}return null}async waitForTransaction(e,t,s){const r=t??1;return r===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const l=(async c=>{try{const d=await this.getTransactionReceipt(e);if(d!=null&&c-d.blockNumber+1>=r){i(d),a&&(clearTimeout(a),a=null);return}}catch(d){console.log("EEE",d)}this.once("block",l)});s!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",l),o(Gt("timeout","TIMEOUT",{reason:"timeout"})))},s)),l(await this.getBlockNumber())})}async waitForBlock(e){ce(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=this.#c.get(e);t&&(t.timer&&clearTimeout(t.timer),this.#c.delete(e))}_setTimeout(e,t){t==null&&(t=0);const s=this.#d++,r=()=>{this.#c.delete(s),e()};if(this.paused)this.#c.set(s,{timer:null,func:r,time:t});else{const i=setTimeout(r,t);this.#c.set(s,{timer:i,func:r,time:ap()})}return s}_forEachSubscriber(e){for(const t of this.#e.values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Ob(e.type);case"block":{const t=new iO(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new oO(this,e.type);case"event":return new Sm(this,e.filter);case"transaction":return new lO(this,e.hash);case"orphan":return new aO(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const s of this.#e.values())if(s.subscriber===e){s.started&&s.subscriber.stop(),s.subscriber=t,s.started&&t.start(),this.#n!=null&&t.pause(this.#n);break}}async#m(e,t){let s=await op(e,this);return s.type==="event"&&t&&t.length>0&&t[0].removed===!0&&(s=await op({orphan:"drop-log",log:t[0]},this)),this.#e.get(s.tag)||null}async#y(e){const t=await op(e,this),s=t.tag;let r=this.#e.get(s);return r||(r={subscriber:this._getSubscriber(t),tag:s,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#e.set(s,r)),r}async on(e,t){const s=await this.#y(e);return s.listeners.push({listener:t,once:!1}),s.started||(s.subscriber.start(),s.started=!0,this.#n!=null&&s.subscriber.pause(this.#n)),this}async once(e,t){const s=await this.#y(e);return s.listeners.push({listener:t,once:!0}),s.started||(s.subscriber.start(),s.started=!0,this.#n!=null&&s.subscriber.pause(this.#n)),this}async emit(e,...t){const s=await this.#m(e,t);if(!s||s.listeners.length===0)return!1;const r=s.listeners.length;return s.listeners=s.listeners.filter(({listener:i,once:o})=>{const a=new X1(this,o?null:i,e);try{i.call(this,...t,a)}catch{}return!o}),s.listeners.length===0&&(s.started&&s.subscriber.stop(),this.#e.delete(s.tag)),r>0}async listenerCount(e){if(e){const s=await this.#m(e);return s?s.listeners.length:0}let t=0;for(const{listeners:s}of this.#e.values())t+=s.length;return t}async listeners(e){if(e){const s=await this.#m(e);return s?s.listeners.map(({listener:r})=>r):[]}let t=[];for(const{listeners:s}of this.#e.values())t=t.concat(s.map(({listener:r})=>r));return t}async off(e,t){const s=await this.#m(e);if(!s)return this;if(t){const r=s.listeners.map(({listener:i})=>i).indexOf(t);r>=0&&s.listeners.splice(r,1)}return(!t||s.listeners.length===0)&&(s.started&&s.subscriber.stop(),this.#e.delete(s.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:s,subscriber:r}=await this.#y(e);s&&r.stop(),this.#e.delete(t)}else for(const[t,{started:s,subscriber:r}]of this.#e)s&&r.stop(),this.#e.delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return this.#s}destroy(){this.removeAllListeners();for(const e of this.#c.keys())this._clearTimeout(e);this.#s=!0}get paused(){return this.#n!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#a=-1,this.#n!=null){if(this.#n==!!e)return;ce(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),this.#n=!!e;for(const t of this.#c.values())t.timer&&clearTimeout(t.timer),t.time=ap()-t.time}resume(){if(this.#n!=null){this._forEachSubscriber(e=>e.resume()),this.#n=null;for(const e of this.#c.values()){let t=e.time;t<0&&(t=0),e.time=ap(),setTimeout(e.func,t)}}}}function pO(n,e){try{const t=lg(n,e);if(t)return Gd(t)}catch{}return null}function lg(n,e){if(n==="0x")return null;try{const t=rt(en(n,e,e+32)),s=rt(en(n,t,t+32));return en(n,t+32,t+32+s)}catch{}return null}function aA(n){const e=Cn(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function gO(n){if(n.length%32===0)return n;const e=new Uint8Array(Math.ceil(n.length/32)*32);return e.set(n),e}const mO=new Uint8Array([]);function vO(n){const e=[];let t=0;for(let s=0;s<n.length;s++)e.push(mO),t+=32;for(let s=0;s<n.length;s++){const r=ot(n[s]);e[s]=aA(t),e.push(aA(r.length)),e.push(gO(r)),t+=32+Math.ceil(r.length/32)*32}return sn(e)}const lA="0x0000000000000000000000000000000000000000000000000000000000000000";function yO(n){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};ce(Ca(n)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const t=en(n,0,32);ce(en(t,0,12)===en(lA,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=en(t,12);try{const s=[],r=rt(en(n,32,64)),i=rt(en(n,r,r+32)),o=en(n,r+32);for(let a=0;a<i;a++){const l=pO(o,a*32);if(l==null)throw new Error("abort");s.push(l)}e.urls=s}catch{ce(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const s=lg(n,64);if(s==null)throw new Error("abort");e.calldata=s}catch{ce(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}ce(en(n,100,128)===en(lA,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=en(n,96,100);try{const s=lg(n,128);if(s==null)throw new Error("abort");e.extraData=s}catch{ce(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(s=>e[s]),e}function mo(n,e){if(n.provider)return n.provider;ce(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function cA(n,e){let t=Jd(e);if(t.to!=null&&(t.to=ds(t.to,n)),t.from!=null){const s=t.from;t.from=Promise.all([n.getAddress(),ds(s,n)]).then(([r,i])=>(H(r.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),r))}else t.from=n.getAddress();return await is(t)}class AO{provider;constructor(e){Ge(this,{provider:e||null})}async getNonce(e){return mo(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await cA(this,e)}async populateTransaction(e){const t=mo(this,"populateTransaction"),s=await cA(this,e);s.nonce==null&&(s.nonce=await this.getNonce("pending")),s.gasLimit==null&&(s.gasLimit=await this.estimateGas(s));const r=await this.provider.getNetwork();if(s.chainId!=null){const o=Se(s.chainId);H(o===r.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else s.chainId=r.chainId;const i=s.maxFeePerGas!=null||s.maxPriorityFeePerGas!=null;if(s.gasPrice!=null&&(s.type===2||i)?H(!1,"eip-1559 transaction do not support gasPrice","tx",e):(s.type===0||s.type===1)&&i&&H(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(s.type===2||s.type==null)&&s.maxFeePerGas!=null&&s.maxPriorityFeePerGas!=null)s.type=2;else if(s.type===0||s.type===1){const o=await t.getFeeData();ce(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),s.gasPrice==null&&(s.gasPrice=o.gasPrice)}else{const o=await t.getFeeData();if(s.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(s.authorizationList&&s.authorizationList.length?s.type=4:s.type=2,s.gasPrice!=null){const a=s.gasPrice;delete s.gasPrice,s.maxFeePerGas=a,s.maxPriorityFeePerGas=a}else s.maxFeePerGas==null&&(s.maxFeePerGas=o.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(ce(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),s.gasPrice==null&&(s.gasPrice=o.gasPrice),s.type=0):ce(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(s.type===2||s.type===3||s.type===4)&&(s.maxFeePerGas==null&&(s.maxFeePerGas=o.maxFeePerGas),s.maxPriorityFeePerGas==null&&(s.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await is(s)}async populateAuthorization(e){const t=Object.assign({},e);return t.chainId==null&&(t.chainId=(await mo(this,"getNetwork").getNetwork()).chainId),t.nonce==null&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return mo(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return mo(this,"call").call(await this.populateCall(e))}async resolveName(e){return await mo(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=mo(this,"sendTransaction"),s=await this.populateTransaction(e);delete s.from;const r=Ws.from(s);return await t.broadcastTransaction(await this.signTransaction(r))}authorize(e){ce(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function wO(n){return JSON.parse(JSON.stringify(n))}class Lb{#e;#t;#n;#s;#r;#o;constructor(e){this.#e=e,this.#t=null,this.#n=this.#i.bind(this),this.#s=!1,this.#r=null,this.#o=!1}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}async#i(e){try{this.#t==null&&(this.#t=this._subscribe(this.#e));let t=null;try{t=await this.#t}catch(i){if(!$n(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(t==null){this.#t=null,this.#e._recoverSubscriber(this,this._recover(this.#e));return}const s=await this.#e.getNetwork();if(this.#r||(this.#r=s),this.#r.chainId!==s.chainId)throw new Error("chaid changed");if(this.#o)return;const r=await this.#e.send("eth_getFilterChanges",[t]);await this._emitResults(this.#e,r)}catch(t){console.log("@TODO",t)}this.#e.once("block",this.#n)}#a(){const e=this.#t;e&&(this.#t=null,e.then(t=>{this.#e.destroyed||this.#e.send("eth_uninstallFilter",[t])}))}start(){this.#s||(this.#s=!0,this.#i(-2))}stop(){this.#s&&(this.#s=!1,this.#o=!0,this.#a(),this.#e.off("block",this.#n))}pause(e){e&&this.#a(),this.#e.off("block",this.#n)}resume(){this.start()}}class _O extends Lb{#e;constructor(e,t){super(e),this.#e=wO(t)}_recover(e){return new Sm(e,this.#e)}async _subscribe(e){return await e.send("eth_newFilter",[this.#e])}async _emitResults(e,t){for(const s of t)e.emit(this.#e,e._wrapLog(s,e._network))}}class EO extends Lb{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const s of t)e.emit("pending",s)}}const bO="bigint,boolean,function,number,string,symbol".split(/,/g);function Ad(n){if(n==null||bO.indexOf(typeof n)>=0||typeof n.getAddress=="function")return n;if(Array.isArray(n))return n.map(Ad);if(typeof n=="object")return Object.keys(n).reduce((e,t)=>(e[t]=n[t],e),{});throw new Error(`should not happen: ${n} (${typeof n})`)}function IO(n){return new Promise(e=>{setTimeout(e,n)})}function la(n){return n&&n.toLowerCase()}function uA(n){return n&&typeof n.pollingInterval=="number"}const Bb={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class lp extends AO{address;constructor(e,t){super(e),t=bt(t),Ge(this,{address:t})}connect(e){ce(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const t=Ad(e),s=[];if(t.from){const i=t.from;s.push((async()=>{const o=await ds(i,this.provider);H(o!=null&&o.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=o})())}else t.from=this.address;if(t.gasLimit==null&&s.push((async()=>{t.gasLimit=await this.provider.estimateGas({...t,from:this.address})})()),t.to!=null){const i=t.to;s.push((async()=>{t.to=await ds(i,this.provider)})())}s.length&&await Promise.all(s);const r=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[r])}async sendTransaction(e){const t=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(e);return await new Promise((r,i)=>{const o=[1e3,100];let a=0;const l=async()=>{try{const c=await this.provider.getTransaction(s);if(c!=null){r(c.replaceableTransaction(t));return}}catch(c){if($n(c,"CANCELLED")||$n(c,"BAD_DATA")||$n(c,"NETWORK_ERROR")||$n(c,"UNSUPPORTED_OPERATION")){c.info==null&&(c.info={}),c.info.sendTransactionHash=s,i(c);return}if($n(c,"INVALID_ARGUMENT")&&(a++,c.info==null&&(c.info={}),c.info.sendTransactionHash=s,a>10)){i(c);return}this.provider.emit("error",Gt("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:c}))}this.provider._setTimeout(()=>{l()},o.pop()||4e3)};l()})}async signTransaction(e){const t=Ad(e);if(t.from){const r=await ds(t.from,this.provider);H(r!=null&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=r}else t.from=this.address;const s=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[s])}async signMessage(e){const t=typeof e=="string"?qr(e):e;return await this.provider.send("personal_sign",[_e(t),this.address.toLowerCase()])}async signTypedData(e,t,s){const r=Ad(s),i=await Ps.resolveNames(e,t,r,async o=>{const a=await ds(o);return H(a!=null,"TypedData does not support null address","value",o),a});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Ps.getPayload(i.domain,t,i.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const t=typeof e=="string"?qr(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),_e(t)])}}class CO extends fO{#e;#t;#n;#s;#r;#o;#i;#a(){if(this.#s)return;const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");this.#s=setTimeout(()=>{this.#s=null;const t=this.#n;for(this.#n=[];t.length;){const s=[t.shift()];for(;t.length&&s.length!==this.#e.batchMaxCount;)if(s.push(t.shift()),JSON.stringify(s.map(i=>i.payload)).length>this.#e.batchMaxSize){t.unshift(s.pop());break}(async()=>{const r=s.length===1?s[0].payload:s.map(i=>i.payload);this.emit("debug",{action:"sendRpcPayload",payload:r});try{const i=await this._send(r);this.emit("debug",{action:"receiveRpcResult",result:i});for(const{resolve:o,reject:a,payload:l}of s){if(this.destroyed){a(Gt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const c=i.filter(d=>d.id===l.id)[0];if(c==null){const d=Gt("missing response for request","BAD_DATA",{value:i,info:{payload:l}});this.emit("error",d),a(d);continue}if("error"in c){a(this.getRpcError(l,c));continue}o(c.result)}}catch(i){this.emit("debug",{action:"receiveRpcError",error:i});for(const{reject:o}of s)o(i)}})()}},e)}constructor(e,t){super(e,t),this.#t=1,this.#e=Object.assign({},Bb,t||{}),this.#n=[],this.#s=null,this.#o=null,this.#i=null;{let r=null;const i=new Promise(o=>{r=o});this.#r={promise:i,resolve:r}}const s=this._getOption("staticNetwork");typeof s=="boolean"?(H(!s||e!=="any","staticNetwork cannot be used on special network 'any'","options",t),s&&e!=null&&(this.#o=Ns.from(e))):s&&(H(e==null||s.matches(e),"staticNetwork MUST match network object","options",t),this.#o=s)}_getOption(e){return this.#e[e]}get _network(){return ce(this.#o,"network is not available yet","NETWORK_ERROR"),this.#o}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let s=e.transaction;if(s&&s.type!=null&&Se(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const r=await this.getFeeData();r.maxFeePerGas==null&&r.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},s,{type:void 0})}))}}const t=this.getRpcRequest(e);return t!=null?await this.send(t.method,t.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)if(e===!0){if(this.#o)return this.#o}else return e;return this.#i?await this.#i:this.ready?(this.#i=(async()=>{try{const t=Ns.from(Se(await this.send("eth_chainId",[])));return this.#i=null,t}catch(t){throw this.#i=null,t}})(),await this.#i):(this.#i=(async()=>{const t={id:this.#t++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:t});let s;try{s=(await this._send(t))[0],this.#i=null}catch(r){throw this.#i=null,this.emit("debug",{action:"receiveRpcError",error:r}),r}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Ns.from(Se(s.result));throw this.getRpcError(t,s)})(),await this.#i)}_start(){this.#r==null||this.#r.resolve==null||(this.#r.resolve(),this.#r=null,(async()=>{for(;this.#o==null&&!this.destroyed;)try{this.#o=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Gt("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await IO(1e3)}this.#a()})())}async _waitUntilReady(){if(this.#r!=null)return await this.#r.promise}_getSubscriber(e){return e.type==="pending"?new EO(this):e.type==="event"?this._getOption("polling")?new Sm(this,e.filter):new _O(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new Ob("orphan"):super._getSubscriber(e)}get ready(){return this.#r==null}getRpcTransaction(e){const t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(e[s]==null)return;let r=s;s==="gasLimit"&&(r="gas"),t[r]=qs(Se(e[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{e[s]!=null&&(t[s]=_e(e[s]))}),e.accessList&&(t.accessList=Ko(e.accessList)),e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.map(s=>s.toLowerCase())),e.authorizationList&&(t.authorizationList=e.authorizationList.map(s=>{const r=$E(s);return{address:r.address,nonce:qs(r.nonce),chainId:qs(r.chainId),yParity:qs(r.signature.yParity),r:qs(r.signature.r),s:qs(r.signature.s)}})),t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[la(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[la(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[la(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[la(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(la):e.filter.address=la(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){const{method:s}=e,{error:r}=t;if(s==="eth_estimateGas"&&r.message){const a=r.message;if(!a.match(/revert/i)&&a.match(/insufficient funds/i))return Gt("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:r}});if(a.match(/nonce/i)&&a.match(/too low/i))return Gt("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:r}})}if(s==="eth_call"||s==="eth_estimateGas"){const a=cg(r),l=ja.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",e.params[0],a?a.data:null);return l.info={error:r,payload:e},l}const i=JSON.stringify(SO(r));if(typeof r.message=="string"&&r.message.match(/user denied|ethers-user-denied/i))return Gt("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:e,error:r}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const a=e.params[0];if(i.match(/insufficient funds|base fee exceeds gas limit/i))return Gt("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:a,info:{error:r}});if(i.match(/nonce/i)&&i.match(/too low/i))return Gt("nonce has already been used","NONCE_EXPIRED",{transaction:a,info:{error:r}});if(i.match(/replacement transaction/i)&&i.match(/underpriced/i))return Gt("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:a,info:{error:r}});if(i.match(/only replay-protected/i))return Gt("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:a,info:{error:r}}})}let o=!!i.match(/the method .* does not exist/i);return o||r&&r.details&&r.details.startsWith("Unauthorized method:")&&(o=!0),o?Gt("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:r,payload:e}}):Gt("could not coalesce error","UNKNOWN_ERROR",{error:r,payload:e})}send(e,t){if(this.destroyed)return Promise.reject(Gt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const s=this.#t++,r=new Promise((i,o)=>{this.#n.push({resolve:i,reject:o,payload:{method:e,params:t,id:s,jsonrpc:"2.0"}})});return this.#a(),r}async getSigner(e){e==null&&(e=0);const t=this.send("eth_accounts",[]);if(typeof e=="number"){const r=await t;if(e>=r.length)throw new Error("no such account");return new lp(this,r[e])}const{accounts:s}=await is({network:this.getNetwork(),accounts:t});e=bt(e);for(const r of s)if(bt(r)===e)return new lp(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(t=>new lp(this,t))}destroy(){this.#s&&(clearTimeout(this.#s),this.#s=null);for(const{payload:e,reject:t}of this.#n)t(Gt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#n=[],super.destroy()}}class TO extends CO{#e;constructor(e,t){super(e,t);let s=this._getOption("pollingInterval");s==null&&(s=Bb.pollingInterval),this.#e=s}_getSubscriber(e){const t=super._getSubscriber(e);return uA(t)&&(t.pollingInterval=this.#e),t}get pollingInterval(){return this.#e}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");this.#e=e,this._forEachSubscriber(t=>{uA(t)&&(t.pollingInterval=this.#e)})}}function cg(n){if(n==null)return null;if(typeof n.message=="string"&&n.message.match(/revert/i)&&Bt(n.data))return{message:n.message,data:n.data};if(typeof n=="object"){for(const e in n){const t=cg(n[e]);if(t)return t}return null}if(typeof n=="string")try{return cg(JSON.parse(n))}catch{}return null}function ug(n,e){if(n!=null){if(typeof n.message=="string"&&e.push(n.message),typeof n=="object")for(const t in n)ug(n[t],e);if(typeof n=="string")try{return ug(JSON.parse(n),e)}catch{}}}function SO(n){const e=[];return ug(n,e),e}class Io extends TO{#e;#t;constructor(e,t,s){const r=Object.assign({},s??{},{batchMaxCount:1});H(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(t,r),this.#t=null,s&&s.providerInfo&&(this.#t=s.providerInfo),this.#e=async(i,o)=>{const a={method:i,params:o};this.emit("debug",{action:"sendEip1193Request",payload:a});try{const l=await e.request(a);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const c=new Error(l.message);throw c.code=l.code,c.data=l.data,c.payload=a,this.emit("debug",{action:"receiveEip1193Error",error:c}),c}}}get providerInfo(){return this.#t}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){H(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const t=await this.#e(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){switch(t=JSON.parse(JSON.stringify(t)),t.error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`;break}return super.getRpcError(e,t)}async hasSigner(e){e==null&&(e=0);const t=await this.send("eth_accounts",[]);return typeof e=="number"?t.length>e:(e=e.toLowerCase(),t.filter(s=>s.toLowerCase()===e).length!==0)}async getSigner(e){if(e==null&&(e=0),!await this.hasSigner(e))try{await this.#e("eth_requestAccounts",[])}catch(t){const s=t.payload;throw this.getRpcError(s,{id:s.id,error:t})}return await super.getSigner(e)}static async discover(e){if(e==null&&(e={}),e.provider)return new Io(e.provider);const t=e.window?e.window:typeof window<"u"?window:null;if(t==null)return null;const s=e.anyProvider;if(s&&t.ethereum)return new Io(t.ethereum);if(!("addEventListener"in t&&"dispatchEvent"in t&&"removeEventListener"in t))return null;const r=e.timeout?e.timeout:300;return r===0?null:await new Promise((i,o)=>{let a=[];const l=f=>{a.push(f.detail),s&&c()},c=()=>{if(clearTimeout(d),a.length)if(e&&e.filter){const f=e.filter(a.map(p=>Object.assign({},p.info)));if(f==null)i(null);else if(f instanceof Io)i(f);else{let p=null;if(f.uuid&&(p=a.filter(w=>f.uuid===w.info.uuid)[0]),p){const{provider:m,info:w}=p;i(new Io(m,void 0,{providerInfo:w}))}else o(Gt("filter returned unknown info","UNSUPPORTED_OPERATION",{value:f}))}}else{const{provider:f,info:p}=a[0];i(new Io(f,void 0,{providerInfo:p}))}else i(null);t.removeEventListener("eip6963:announceProvider",l)},d=setTimeout(()=>{c()},r);t.addEventListener("eip6963:announceProvider",l),t.dispatchEvent(new Event("eip6963:requestProvider"))})}}const Pm=()=>typeof window<"u"&&window.ethereum?new Io(window.ethereum):null,_u=()=>typeof window<"u"&&typeof window.ethereum<"u",PO=async()=>{try{if(!_u())return{success:!1,error:"MetaMask   . MetaMask .",needInstall:!0};const n=Pm();if(!n)return{success:!1,error:" Provider   ."};const e=await window.ethereum.request({method:"eth_requestAccounts"});if(e&&e.length>0){const t=e[0],s=await n.getBalance(t),r=oE(s);return{success:!0,address:t,balance:r,provider:n}}return{success:!1,error:"  ."}}catch(n){return console.error("  :",n),n.code===4001?{success:!1,error:"  ."}:{success:!1,error:n.message||"    ."}}},RO=async()=>{try{if(!_u()||!Pm())return null;const e=await window.ethereum.request({method:"eth_accounts"});return e&&e.length>0?e[0]:null}catch(n){return console.error("   :",n),null}},Mb=async n=>{try{const e=Pm();if(!e)return"0";const t=await e.getBalance(n);return oE(t)}catch(e){return console.error("   :",e),"0"}},xO=async()=>{try{const n=await RO();if(!n)return{connected:!1,address:null};const e=await Mb(n);return{connected:!0,address:n,balance:e}}catch(n){return console.error("    :",n),{connected:!1,address:null}}},kO=n=>_u()?(window.ethereum.on("accountsChanged",n),()=>{window.ethereum.removeListener&&window.ethereum.removeListener("accountsChanged",n)}):null,NO=n=>_u()?(window.ethereum.on("chainChanged",n),()=>{window.ethereum.removeListener&&window.ethereum.removeListener("chainChanged",n)}):null,wd=n=>{let e;return typeof n=="string"?e=parseInt(n,10):typeof n=="number"?e=n:e=parseInt(n,10),isNaN(e)||e===null||e===void 0?"0":(e=Math.floor(e),e>=1e9?(e/1e9).toFixed(1).replace(/\.0$/,"")+"B":e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e4?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString())},be=du({isLoggedIn:!1,loginType:null,walletAddress:"",userBalance:"0 ETH",isWalletConnected:!1,walletProvider:null,isLoading:!1,currentUser:null,coins:0,totalCoin:0,catFragments:50,level:1,nftCount:0,miningLevel:1,huntingLevel:1,explorationLevel:1,productionLevel:1,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}),on=()=>{const n=()=>{const S=dt();S?(be.currentUser=S,be.isLoggedIn=!0,e(S.gameData||{})):(be.currentUser=null,be.isLoggedIn=!1)},e=S=>{be.coins=S.coins||0,be.totalCoin=S.totalCoin||0,be.catFragments=S.catFragments||50,be.level=S.level||1,be.nftCount=S.nftCount||0,be.miningLevel=S.miningLevel||1,be.huntingLevel=S.huntingLevel||1,be.explorationLevel=S.explorationLevel||1,be.productionLevel=S.productionLevel||1;const B=V=>{const j=(V||[]).slice(0,4);return j.length===4?j:[...j,...Array(4-j.length).fill(null)]};be.miningCats=B(S.miningCats),be.huntingCats=B(S.huntingCats),be.explorationCats=B(S.explorationCats),be.productionCats=B(S.productionCats),be.inventory=S.inventory||[]},t=async S=>{if(!be.currentUser)return console.warn("  ."),!1;try{return await Qc(be.currentUser.id,S)?(e({...be.currentUser.gameData,...S}),be.currentUser&&(be.currentUser.gameData={...be.currentUser.gameData,...S},localStorage.setItem("currentUser",JSON.stringify(be.currentUser)),sessionStorage.setItem("currentUser",JSON.stringify(be.currentUser))),window.dispatchEvent(new CustomEvent("userDataUpdated")),!0):!1}catch(B){return console.error("   :",B),!1}},s=async S=>await t({coins:S}),r=async S=>await t({totalCoin:S}),i=async S=>await t({catFragments:S}),o=async S=>await t({level:S}),a=async S=>await t(S),l=async()=>{try{be.isLoading=!0;const S=await PO();return S.success?(be.isWalletConnected=!0,be.walletAddress=S.address,be.userBalance=`${parseFloat(S.balance).toFixed(4)} ETH`,be.walletProvider=S.provider,be.loginType="wallet",await c(S.address,S.balance),{success:!0,address:S.address,balance:S.balance}):S}catch(S){return console.error("  :",S),{success:!1,error:S.message||"    ."}}finally{be.isLoading=!1}},c=async(S,B)=>{let V=am(S);V||(V=j1(S)),localStorage.setItem("currentUser",JSON.stringify(V)),sessionStorage.setItem("currentUser",JSON.stringify(V)),be.currentUser=V,be.isLoggedIn=!0,be.loginType="wallet",e(V.gameData||{})},d=()=>{be.isWalletConnected=!1,be.walletAddress="",be.userBalance="0 ETH",be.walletProvider=null,be.loginType=null;const S=dt();S&&S.loginType==="wallet"&&(localStorage.removeItem("currentUser"),sessionStorage.removeItem("currentUser")),A()},f=async()=>{if(be.walletAddress)try{const S=await Mb(be.walletAddress);be.userBalance=`${parseFloat(S).toFixed(4)} ETH`}catch(S){console.error("   :",S)}},p=async()=>{try{const S=dt();if(!S||S.loginType!=="wallet")return{connected:!1};const B=await xO();return B.connected&&B.address===S.walletAddress?(be.isWalletConnected=!0,be.walletAddress=B.address,be.userBalance=`${parseFloat(B.balance).toFixed(4)} ETH`,await c(B.address,B.balance)):d(),B}catch(S){return console.error("   :",S),{connected:!1}}},m=()=>{const S=kO(V=>{V&&V.length>0?c(V[0]):d()}),B=NO(()=>{});return()=>{S&&S(),B&&B()}},w=(S,B)=>{be.isLoggedIn=!0,be.walletAddress=S,be.userBalance=B,be.loginType=S.startsWith("0x")?"wallet":"email",n()},y=S=>{be.isLoading=S},A=()=>{be.isLoggedIn=!1,be.loginType=null,be.walletAddress="",be.userBalance="0 ETH",be.isWalletConnected=!1,be.walletProvider=null,be.currentUser=null,be.coins=0,be.totalCoin=0,be.catFragments=50,be.level=1,be.nftCount=0,localStorage.removeItem("currentUser"),sessionStorage.removeItem("currentUser")},_=pe(()=>wd(be.coins)),C=pe(()=>wd(be.totalCoin));return{state:DO(be),formattedCoins:_,formattedTotalCoin:C,loadCurrentUser:n,syncGameData:e,updateGameData:t,updateCoins:s,updateTotalCoin:r,updateCatFragments:i,updateLevel:o,updateMultiple:a,setWalletConnected:w,connectWalletToApp:l,disconnectWalletFromApp:d,updateWalletBalance:f,checkWalletStatus:p,setupWalletListeners:m,setUserData:S=>{be.nftCount=S.nftCount||0,be.gameLevel=S.gameLevel||1},setLoading:y,logout:A,formatNumber:wd}},DO=n=>new Proxy(n,{get(e,t){return e[t]},set(){return console.warn("   .  ."),!1}}),OO=()=>{};var dA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},LO=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const r=n[t++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=n[t++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=n[t++],o=n[t++],a=n[t++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=n[t++],o=n[t++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Ub={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const i=n[r],o=r+1<n.length,a=o?n[r+1]:0,l=r+2<n.length,c=l?n[r+2]:0,d=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),s.push(t[d],t[f],t[p],t[m])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Fb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):LO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const i=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;const c=r<n.length?t[n.charAt(r)]:64;++r;const f=r<n.length?t[n.charAt(r)]:64;if(++r,i==null||a==null||c==null||f==null)throw new BO;const p=i<<2|a>>4;if(s.push(p),c!==64){const m=a<<4&240|c>>2;if(s.push(m),f!==64){const w=c<<6&192|f;s.push(w)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class BO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MO=function(n){const e=Fb(n);return Ub.encodeByteArray(e,!0)},Xd=function(n){return MO(n).replace(/\./g,"")},Vb=function(n){try{return Ub.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO=()=>FO().__FIREBASE_DEFAULTS__,VO=()=>{if(typeof process>"u"||typeof dA>"u")return;const n=dA.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},$O=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Vb(n[1]);return e&&JSON.parse(e)},qh=()=>{try{return OO()||UO()||VO()||$O()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},$b=n=>qh()?.emulatorHosts?.[n],HO=n=>{const e=$b(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Hb=()=>qh()?.config,Gb=n=>qh()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Qb(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",r=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Xd(JSON.stringify(t)),Xd(JSON.stringify(o)),""].join(".")}const xc={};function jO(){const n={prod:[],emulator:[]};for(const e of Object.keys(xc))xc[e]?n.emulator.push(e):n.prod.push(e);return n}function zO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let hA=!1;function jb(n,e){if(typeof window>"u"||typeof document>"u"||!rl(window.location.host)||xc[n]===e||xc[n]||hA)return;xc[n]=e;function t(p){return`__firebase__banner__${p}`}const s="__firebase__banner",i=jO().prod.length>0;function o(){const p=document.getElementById(s);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{hA=!0,o()},p}function d(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=zO(s),m=t("text"),w=document.getElementById(m)||document.createElement("span"),y=t("learnmore"),A=document.getElementById(y)||document.createElement("a"),_=t("preprendIcon"),C=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const S=p.element;a(S),d(A,y);const B=c();l(C,_),S.append(C,w,A,B),document.body.appendChild(S)}i?(w.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(es())}function KO(){const n=qh()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zb(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function JO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YO(){const n=es();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function XO(){return!KO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wb(){try{return typeof indexedDB=="object"}catch{return!1}}function Kb(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(t){e(t)}})}function ZO(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL="FirebaseError";class ir extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=eL,Object.setPrototypeOf(this,ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jo.prototype.create)}}class Jo{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?tL(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new ir(r,a,s)}}function tL(n,e){return n.replace(nL,(t,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const nL=/\{\$([^}]+)}/g;function sL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ki(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const r of t){if(!s.includes(r))return!1;const i=n[r],o=e[r];if(fA(i)&&fA(o)){if(!Ki(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!t.includes(r))return!1;return!0}function fA(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function rL(n,e){const t=new iL(n,e);return t.subscribe.bind(t)}class iL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let r;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");oL(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:s},r.next===void 0&&(r.next=cp),r.error===void 0&&(r.error=cp),r.complete===void 0&&(r.complete=cp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function cp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL=1e3,lL=2,cL=14400*1e3,uL=.5;function pA(n,e=aL,t=lL){const s=e*Math.pow(t,n),r=Math.round(uL*s*(Math.random()-.5)*2);return Math.min(cL,s+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(n){return n&&n._delegate?n._delegate:n}class nr{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new GO;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fL(e))try{this.getOrInitializeService({instanceIdentifier:Ao})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Ao){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ao){return this.instances.has(e)}getOptions(e=Ao){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const r of s)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:hL(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ao){return this.component?this.component.multipleInstances?e:Ao:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hL(n){return n===Ao?void 0:n}function fL(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new dL(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(lt||(lt={}));const gL={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},mL=lt.INFO,vL={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},yL=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),r=vL[e];if(r)console[r](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jh{constructor(e){this.name=e,this._logLevel=mL,this._logHandler=yL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...e),this._logHandler(this,lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...e),this._logHandler(this,lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...e),this._logHandler(this,lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...e),this._logHandler(this,lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...e),this._logHandler(this,lt.ERROR,...e)}}const AL=(n,e)=>e.some(t=>n instanceof t);let gA,mA;function wL(){return gA||(gA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _L(){return mA||(mA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qb=new WeakMap,dg=new WeakMap,Jb=new WeakMap,up=new WeakMap,Rm=new WeakMap;function EL(n){const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{t(Mi(n.result)),r()},o=()=>{s(n.error),r()};n.addEventListener("success",i),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&qb.set(t,n)}).catch(()=>{}),Rm.set(e,n),e}function bL(n){if(dg.has(n))return;const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});dg.set(n,e)}let hg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return dg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Jb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Mi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function IL(n){hg=n(hg)}function CL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(dp(this),e,...t);return Jb.set(s,e.sort?e.sort():[e]),Mi(s)}:_L().includes(n)?function(...e){return n.apply(dp(this),e),Mi(qb.get(this))}:function(...e){return Mi(n.apply(dp(this),e))}}function TL(n){return typeof n=="function"?CL(n):(n instanceof IDBTransaction&&bL(n),AL(n,wL())?new Proxy(n,hg):n)}function Mi(n){if(n instanceof IDBRequest)return EL(n);if(up.has(n))return up.get(n);const e=TL(n);return e!==n&&(up.set(n,e),Rm.set(e,n)),e}const dp=n=>Rm.get(n);function Yb(n,e,{blocked:t,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(n,e),a=Mi(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Mi(o.result),l.oldVersion,l.newVersion,Mi(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const SL=["get","getKey","getAll","getAllKeys","count"],PL=["put","add","delete","clear"],hp=new Map;function vA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hp.get(e))return hp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,r=PL.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(r||SL.includes(t)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),r&&l.done]))[0]};return hp.set(e,i),i}IL(n=>({...n,get:(e,t,s)=>vA(e,t)||n.get(e,t,s),has:(e,t)=>!!vA(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(xL(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function xL(n){return n.getComponent()?.type==="VERSION"}const fg="@firebase/app",yA="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri=new Jh("@firebase/app"),kL="@firebase/app-compat",NL="@firebase/analytics-compat",DL="@firebase/analytics",OL="@firebase/app-check-compat",LL="@firebase/app-check",BL="@firebase/auth",ML="@firebase/auth-compat",FL="@firebase/database",UL="@firebase/data-connect",VL="@firebase/database-compat",$L="@firebase/functions",HL="@firebase/functions-compat",GL="@firebase/installations",QL="@firebase/installations-compat",jL="@firebase/messaging",zL="@firebase/messaging-compat",WL="@firebase/performance",KL="@firebase/performance-compat",qL="@firebase/remote-config",JL="@firebase/remote-config-compat",YL="@firebase/storage",XL="@firebase/storage-compat",ZL="@firebase/firestore",eB="@firebase/ai",tB="@firebase/firestore-compat",nB="firebase",sB="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="[DEFAULT]",rB={[fg]:"fire-core",[kL]:"fire-core-compat",[DL]:"fire-analytics",[NL]:"fire-analytics-compat",[LL]:"fire-app-check",[OL]:"fire-app-check-compat",[BL]:"fire-auth",[ML]:"fire-auth-compat",[FL]:"fire-rtdb",[UL]:"fire-data-connect",[VL]:"fire-rtdb-compat",[$L]:"fire-fn",[HL]:"fire-fn-compat",[GL]:"fire-iid",[QL]:"fire-iid-compat",[jL]:"fire-fcm",[zL]:"fire-fcm-compat",[WL]:"fire-perf",[KL]:"fire-perf-compat",[qL]:"fire-rc",[JL]:"fire-rc-compat",[YL]:"fire-gcs",[XL]:"fire-gcs-compat",[ZL]:"fire-fst",[tB]:"fire-fst-compat",[eB]:"fire-vertex","fire-js":"fire-js",[nB]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc=new Map,iB=new Map,gg=new Map;function AA(n,e){try{n.container.addComponent(e)}catch(t){ri.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Tr(n){const e=n.name;if(gg.has(e))return ri.debug(`There were multiple attempts to register component ${e}.`),!1;gg.set(e,n);for(const t of Zc.values())AA(t,n);for(const t of iB.values())AA(t,n);return!0}function Yo(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function mr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fi=new Jo("app","Firebase",oB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new nr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=sB;function Xb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:pg,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Fi.create("bad-app-name",{appName:String(r)});if(t||(t=Hb()),!t)throw Fi.create("no-options");const i=Zc.get(r);if(i){if(Ki(t,i.options)&&Ki(s,i.config))return i;throw Fi.create("duplicate-app",{appName:r})}const o=new pL(r);for(const l of gg.values())o.addComponent(l);const a=new aB(t,s,o);return Zc.set(r,a),a}function eu(n=pg){const e=Zc.get(n);if(!e&&n===pg&&Hb())return Xb();if(!e)throw Fi.create("no-app",{appName:n});return e}function wA(){return Array.from(Zc.values())}function $s(n,e,t){let s=rB[n]??n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ri.warn(o.join(" "));return}Tr(new nr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lB="firebase-heartbeat-database",cB=1,tu="firebase-heartbeat-store";let fp=null;function Zb(){return fp||(fp=Yb(lB,cB,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(tu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Fi.create("idb-open",{originalErrorMessage:n.message})})),fp}async function uB(n){try{const t=(await Zb()).transaction(tu),s=await t.objectStore(tu).get(eI(n));return await t.done,s}catch(e){if(e instanceof ir)ri.warn(e.message);else{const t=Fi.create("idb-get",{originalErrorMessage:e?.message});ri.warn(t.message)}}}async function _A(n,e){try{const s=(await Zb()).transaction(tu,"readwrite");await s.objectStore(tu).put(e,eI(n)),await s.done}catch(t){if(t instanceof ir)ri.warn(t.message);else{const s=Fi.create("idb-set",{originalErrorMessage:t?.message});ri.warn(s.message)}}}function eI(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dB=1024,hB=30;class fB{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new gB(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=EA();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>hB){const r=mB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ri.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=EA(),{heartbeatsToSend:t,unsentEntries:s}=pB(this._heartbeatsCache.heartbeats),r=Xd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return ri.warn(e),""}}}function EA(){return new Date().toISOString().substring(0,10)}function pB(n,e=dB){const t=[];let s=n.slice();for(const r of n){const i=t.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),bA(t)>e){i.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),bA(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class gB{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wb()?Kb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await uB(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return _A(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return _A(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function bA(n){return Xd(JSON.stringify({version:2,heartbeats:n})).length}function mB(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vB(n){Tr(new nr("platform-logger",e=>new RL(e),"PRIVATE")),Tr(new nr("heartbeat",e=>new fB(e),"PRIVATE")),$s(fg,yA,n),$s(fg,yA,"esm2020"),$s("fire-js","")}vB("");var yB="firebase",AB="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$s(yB,AB,"app");function tI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wB=tI,nI=new Jo("auth","Firebase",tI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd=new Jh("@firebase/auth");function _B(n,...e){Zd.logLevel<=lt.WARN&&Zd.warn(`Auth (${il}): ${n}`,...e)}function _d(n,...e){Zd.logLevel<=lt.ERROR&&Zd.error(`Auth (${il}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(n,...e){throw xm(n,...e)}function yr(n,...e){return xm(n,...e)}function sI(n,e,t){const s={...wB(),[e]:t};return new Jo("auth","Firebase",s).create(e,{appName:n.name})}function Lo(n){return sI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xm(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return nI.create(n,...e)}function Ke(n,e,...t){if(!n)throw xm(e,...t)}function zr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _d(e),new Error(e)}function oi(n,e){n||zr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(){return typeof self<"u"&&self.location?.href||""}function EB(){return IA()==="http:"||IA()==="https:"}function IA(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(EB()||zb()||"connection"in navigator)?navigator.onLine:!0}function IB(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t){this.shortDelay=e,this.longDelay=t,oi(t>e,"Short delay should be less than long delay!"),this.isMobile=WO()||JO()}get(){return bB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(n,e){oi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],SB=new bu(3e4,6e4);function Nm(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ol(n,e,t,s,r={}){return iI(n,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=Eu({key:n.config.apiKey,...o}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c={method:e,headers:l,...i};return qO()||(c.referrerPolicy="no-referrer"),n.emulatorConfig&&rl(n.emulatorConfig.host)&&(c.credentials="include"),rI.fetch()(await oI(n,n.config.apiHost,t,a),c)})}async function iI(n,e,t){n._canInitEmulator=!1;const s={...CB,...e};try{const r=new RB(n),i=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw sd(n,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw sd(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw sd(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw sd(n,"user-disabled",o);const d=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw sI(n,d,c);ii(n,d)}}catch(r){if(r instanceof ir)throw r;ii(n,"network-request-failed",{message:String(r)})}}async function PB(n,e,t,s,r={}){const i=await ol(n,e,t,s,r);return"mfaPendingCredential"in i&&ii(n,"multi-factor-auth-required",{_serverResponse:i}),i}async function oI(n,e,t,s){const r=`${e}${t}?${s}`,i=n,o=i.config.emulator?km(n.config,r):`${n.config.apiScheme}://${r}`;return TB.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class RB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(yr(this.auth,"network-request-failed")),SB.get())})}}function sd(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const r=yr(n,e,s);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xB(n,e){return ol(n,"POST","/v1/accounts:delete",e)}async function eh(n,e){return ol(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kB(n,e=!1){const t=An(n),s=await t.getIdToken(e),r=Dm(s);Ke(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:kc(pp(r.auth_time)),issuedAtTime:kc(pp(r.iat)),expirationTime:kc(pp(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function pp(n){return Number(n)*1e3}function Dm(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return _d("JWT malformed, contained fewer than 3 sections"),null;try{const r=Vb(t);return r?JSON.parse(r):(_d("Failed to decode base64 JWT payload"),null)}catch(r){return _d("Caught error parsing JWT payload as JSON",r?.toString()),null}}function CA(n){const e=Dm(n);return Ke(e,"internal-error"),Ke(typeof e.exp<"u","internal-error"),Ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof ir&&NB(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function NB({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=kc(this.lastLoginAt),this.creationTime=kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function th(n){const e=n.auth,t=await n.getIdToken(),s=await nu(n,eh(e,{idToken:t}));Ke(s?.users.length,e,"internal-error");const r=s.users[0];n._notifyReloadListener(r);const i=r.providerUserInfo?.length?aI(r.providerUserInfo):[],o=LB(n.providerData,i),a=n.isAnonymous,l=!(n.email&&r.passwordHash)&&!o?.length,c=a?l:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new vg(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(n,d)}async function OB(n){const e=An(n);await th(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LB(n,e){return[...n.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function aI(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BB(n,e){const t=await iI(n,{},async()=>{const s=Eu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=n.config,o=await oI(n,r,"/v1/token",`key=${i}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return n.emulatorConfig&&rl(n.emulatorConfig.host)&&(l.credentials="include"),rI.fetch()(o,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function MB(n,e){return ol(n,"POST","/v2/accounts:revokeToken",Nm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ke(e.idToken,"internal-error"),Ke(typeof e.idToken<"u","internal-error"),Ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):CA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ke(e.length!==0,"internal-error");const t=CA(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:r,expiresIn:i}=await BB(e,t);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:r,expirationTime:i}=t,o=new xa;return s&&(Ke(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(Ke(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(Ke(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xa,this.toJSON())}_performRefresh(){return zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(n,e){Ke(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ys{constructor({uid:e,auth:t,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new DB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new vg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await nu(this,this.stsTokenManager.getToken(this.auth,e));return Ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return kB(this,e)}reload(){return OB(this)}_assign(e){this!==e&&(Ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ys({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await th(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mr(this.auth.app))return Promise.reject(Lo(this.auth));const e=await this.getIdToken();return await nu(this,xB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,r=t.email??void 0,i=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,l=t._redirectEventId??void 0,c=t.createdAt??void 0,d=t.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:m,providerData:w,stsTokenManager:y}=t;Ke(f&&y,e,"internal-error");const A=xa.fromJSON(this.name,y);Ke(typeof f=="string",e,"internal-error"),bi(s,e.name),bi(r,e.name),Ke(typeof p=="boolean",e,"internal-error"),Ke(typeof m=="boolean",e,"internal-error"),bi(i,e.name),bi(o,e.name),bi(a,e.name),bi(l,e.name),bi(c,e.name),bi(d,e.name);const _=new Ys({uid:f,auth:e,email:r,emailVerified:p,displayName:s,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:A,createdAt:c,lastLoginAt:d});return w&&Array.isArray(w)&&(_.providerData=w.map(C=>({...C}))),l&&(_._redirectEventId=l),_}static async _fromIdTokenResponse(e,t,s=!1){const r=new xa;r.updateFromServerResponse(t);const i=new Ys({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await th(i),i}static async _fromGetAccountInfoResponse(e,t,s){const r=t.users[0];Ke(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?aI(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,a=new xa;a.updateFromIdToken(s);const l=new Ys({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new vg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=new Map;function Wr(n){oi(n instanceof Function,"Expected a class definition");let e=TA.get(n);return e?(oi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,TA.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}lI.type="NONE";const SA=lI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(n,e,t){return`firebase:${n}:${e}:${t}`}class ka{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Ed(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ed("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await eh(this.auth,{idToken:e}).catch(()=>{});return t?Ys._fromGetAccountInfoResponse(this.auth,t,e):null}return Ys._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new ka(Wr(SA),e,s);const r=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=r[0]||Wr(SA);const o=Ed(s,e.config.apiKey,e.name);let a=null;for(const c of t)try{const d=await c._get(o);if(d){let f;if(typeof d=="string"){const p=await eh(e,{idToken:d}).catch(()=>{});if(!p)break;f=await Ys._fromGetAccountInfoResponse(e,p,d)}else f=Ys._fromJSON(e,d);c!==i&&(a=f),i=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new ka(i,e,s):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new ka(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pI(e))return"Blackberry";if(gI(e))return"Webos";if(uI(e))return"Safari";if((e.includes("chrome/")||dI(e))&&!e.includes("edge/"))return"Chrome";if(fI(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if(s?.length===2)return s[1]}return"Other"}function cI(n=es()){return/firefox\//i.test(n)}function uI(n=es()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dI(n=es()){return/crios\//i.test(n)}function hI(n=es()){return/iemobile/i.test(n)}function fI(n=es()){return/android/i.test(n)}function pI(n=es()){return/blackberry/i.test(n)}function gI(n=es()){return/webos/i.test(n)}function Om(n=es()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function FB(n=es()){return Om(n)&&!!window.navigator?.standalone}function UB(){return YO()&&document.documentMode===10}function mI(n=es()){return Om(n)||fI(n)||gI(n)||pI(n)||/windows phone/i.test(n)||hI(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(n,e=[]){let t;switch(n){case"Browser":t=PA(es());break;case"Worker":t=`${PA(es())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${il}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});s.onAbort=t,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $B(n,e={}){return ol(n,"GET","/v2/passwordPolicy",Nm(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HB=6;class GB{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??HB,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(e,t,s,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new RA(this),this.idTokenSubscription=new RA(this),this.beforeStateQueue=new VB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Wr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ka.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await eh(this,{idToken:e}),s=await Ys._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(mr(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(s=a.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await th(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mr(this.app))return Promise.reject(Lo(this));const t=e?An(e):null;return t&&Ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mr(this.app)?Promise.reject(Lo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mr(this.app)?Promise.reject(Lo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $B(this),t=new GB(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Jo("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await MB(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Wr(e)||this._popupRedirectResolver;Ke(t,this,"argument-error"),this.redirectPersistenceManager=await ka.create(this,[Wr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,r){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ke(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,s,r);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(mr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&_B(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Yh(n){return An(n)}class RA{constructor(e){this.auth=e,this.observer=null,this.addObserver=rL(t=>this.observer=t)}get next(){return Ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jB(n){Lm=n}function zB(n){return Lm.loadJS(n)}function WB(){return Lm.gapiScript}function KB(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qB(n,e){const t=Yo(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),i=t.getOptions();if(Ki(i,e??{}))return r;ii(r,"already-initialized")}return t.initialize({options:e})}function JB(n,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Wr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e?.popupRedirectResolver)}function YB(n,e,t){const s=Yh(n);Ke(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=yI(e),{host:o,port:a}=XB(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){Ke(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ke(Ki(c,s.config.emulator)&&Ki(d,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=c,s.emulatorConfig=d,s.settings.appVerificationDisabledForTesting=!0,rl(o)?(Qb(`${i}//${o}${l}`),jb("Auth",!0)):ZB()}function yI(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function XB(n){const e=yI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:xA(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:xA(o)}}}function xA(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function ZB(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return zr("not implemented")}_getIdTokenResponse(e){return zr("not implemented")}_linkToIdToken(e,t){return zr("not implemented")}_getReauthenticationResolver(e){return zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Na(n,e){return PB(n,"POST","/v1/accounts:signInWithIdp",Nm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM="http://localhost";class Go extends AI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Go(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ii("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=t;if(!s||!r)return null;const o=new Go(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Na(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Na(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Na(e,t)}buildRequest(){const e={requestUri:eM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Eu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu extends wI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends Iu{constructor(){super("facebook.com")}static credential(e){return Go._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ri.credential(e.oauthAccessToken)}catch{return null}}}Ri.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ri.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends Iu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Go._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Hr.credential(t,s)}catch{return null}}}Hr.GOOGLE_SIGN_IN_METHOD="google.com";Hr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends Iu{constructor(){super("github.com")}static credential(e){return Go._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xi.credential(e.oauthAccessToken)}catch{return null}}}xi.GITHUB_SIGN_IN_METHOD="github.com";xi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Iu{constructor(){super("twitter.com")}static credential(e,t){return Go._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ki.credential(t,s)}catch{return null}}}ki.TWITTER_SIGN_IN_METHOD="twitter.com";ki.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,r=!1){const i=await Ys._fromIdTokenResponse(e,s,r),o=kA(s);return new Wa({user:i,providerId:o,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const r=kA(s);return new Wa({user:e,providerId:r,_tokenResponse:s,operationType:t})}}function kA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh extends ir{constructor(e,t,s,r){super(t.code,t.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,nh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,r){return new nh(e,t,s,r)}}function _I(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?nh._fromErrorAndOperation(n,i,e,s):i})}async function tM(n,e,t=!1){const s=await nu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Wa._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nM(n,e,t=!1){const{auth:s}=n;if(mr(s.app))return Promise.reject(Lo(s));const r="reauthenticate";try{const i=await nu(n,_I(s,r,e,n),t);Ke(i.idToken,s,"internal-error");const o=Dm(i.idToken);Ke(o,s,"internal-error");const{sub:a}=o;return Ke(n.uid===a,s,"user-mismatch"),Wa._forOperation(n,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&ii(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sM(n,e,t=!1){if(mr(n.app))return Promise.reject(Lo(n));const s="signIn",r=await _I(n,s,e),i=await Wa._fromIdTokenResponse(n,s,r);return t||await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rM(n,e){return An(n).setPersistence(e)}function iM(n,e,t,s){return An(n).onIdTokenChanged(e,t,s)}function oM(n,e,t){return An(n).beforeAuthStateChanged(e,t)}function nZ(n,e,t,s){return An(n).onAuthStateChanged(e,t,s)}const sh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(sh,"1"),this.storage.removeItem(sh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=1e3,lM=10;class bI extends EI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),r=this.localCache[t];s!==r&&e(t,r,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!t&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);UB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,lM):r()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},aM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}bI.type="LOCAL";const II=bI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI extends EI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}CI.type="SESSION";const TI=CI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const s=new Xh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async c=>c(t.origin,i)),l=await cM(a);t.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Bm("",20);r.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(){return window}function dM(n){Ar().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(){return typeof Ar().WorkerGlobalScope<"u"&&typeof Ar().importScripts=="function"}async function hM(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fM(){return navigator?.serviceWorker?.controller||null}function pM(){return SI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI="firebaseLocalStorageDb",gM=1,rh="firebaseLocalStorage",RI="fbase_key";class Cu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Zh(n,e){return n.transaction([rh],e?"readwrite":"readonly").objectStore(rh)}function mM(){const n=indexedDB.deleteDatabase(PI);return new Cu(n).toPromise()}function yg(){const n=indexedDB.open(PI,gM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(rh,{keyPath:RI})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(rh)?e(s):(s.close(),await mM(),e(await yg()))})})}async function NA(n,e,t){const s=Zh(n,!0).put({[RI]:e,value:t});return new Cu(s).toPromise()}async function vM(n,e){const t=Zh(n,!1).get(e),s=await new Cu(t).toPromise();return s===void 0?null:s.value}function DA(n,e){const t=Zh(n,!0).delete(e);return new Cu(t).toPromise()}const yM=800,AM=3;class xI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>AM)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return SI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xh._getInstance(pM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await hM(),!this.activeServiceWorker)return;this.sender=new uM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yg();return await NA(e,sh,"1"),await DA(e,sh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>NA(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>vM(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>DA(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=Zh(r,!1).getAll();return new Cu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xI.type="LOCAL";const wM=xI;new bu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(n,e){return e?Wr(e):(Ke(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm extends AI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Na(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Na(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Na(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function EM(n){return sM(n.auth,new Mm(n),n.bypassAuthState)}function bM(n){const{auth:e,user:t}=n;return Ke(t,e,"internal-error"),nM(t,new Mm(n),n.bypassAuthState)}async function IM(n){const{auth:e,user:t}=n;return Ke(t,e,"internal-error"),tM(t,new Mm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,t,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return EM;case"linkViaPopup":case"linkViaRedirect":return IM;case"reauthViaPopup":case"reauthViaRedirect":return bM;default:ii(this.auth,"internal-error")}}resolve(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM=new bu(2e3,1e4);class Aa extends kI{constructor(e,t,s,r,i){super(e,t,r,i),this.provider=s,this.authWindow=null,this.pollId=null,Aa.currentPopupAction&&Aa.currentPopupAction.cancel(),Aa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ke(e,this.auth,"internal-error"),e}async onExecution(){oi(this.filter.length===1,"Popup operations only handle one event");const e=Bm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(yr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(yr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Aa.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CM.get())};e()}}Aa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM="pendingRedirect",bd=new Map;class SM extends kI{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=bd.get(this.auth._key());if(!e){try{const s=await PM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}bd.set(this.auth._key(),e)}return this.bypassAuthState||bd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function PM(n,e){const t=kM(e),s=xM(n);if(!await s._isAvailable())return!1;const r=await s._get(t)==="true";return await s._remove(t),r}function RM(n,e){bd.set(n._key(),e)}function xM(n){return Wr(n._redirectPersistence)}function kM(n){return Ed(TM,n.config.apiKey,n.name)}async function NM(n,e){return await Yh(n)._initializationPromise,NI(n,e,!1)}async function NI(n,e,t=!1){if(mr(n.app))return Promise.reject(Lo(n));const s=Yh(n),r=_M(s,e),o=await new SM(s,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=600*1e3;class OM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!DI(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(yr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DM&&this.cachedEventUids.clear(),this.cachedEventUids.has(OA(e))}saveEventToCache(e){this.cachedEventUids.add(OA(e)),this.lastProcessedEventTime=Date.now()}}function OA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function DI({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function LM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BM(n,e={}){return ol(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FM=/^https?/;async function UM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await BM(n);for(const t of e)try{if(VM(t))return}catch{}ii(n,"unauthorized-domain")}function VM(n){const e=mg(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===s}if(!FM.test(t))return!1;if(MM.test(n))return s===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=new bu(3e4,6e4);function LA(){const n=Ar().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function HM(n){return new Promise((e,t)=>{function s(){LA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{LA(),t(yr(n,"network-request-failed"))},timeout:$M.get()})}if(Ar().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ar().gapi?.load)s();else{const r=KB("iframefcb");return Ar()[r]=()=>{gapi.load?s():t(yr(n,"network-request-failed"))},zB(`${WB()}?onload=${r}`).catch(i=>t(i))}}).catch(e=>{throw Id=null,e})}let Id=null;function GM(n){return Id=Id||HM(n),Id}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=new bu(5e3,15e3),jM="__/auth/iframe",zM="emulator/auth/iframe",WM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qM(n){const e=n.config;Ke(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?km(e,zM):`https://${n.config.authDomain}/${jM}`,s={apiKey:e.apiKey,appName:n.name,v:il},r=KM.get(n.config.apiHost);r&&(s.eid=r);const i=n._getFrameworks();return i.length&&(s.fw=i.join(",")),`${t}?${Eu(s).slice(1)}`}async function JM(n){const e=await GM(n),t=Ar().gapi;return Ke(t,n,"internal-error"),e.open({where:document.body,url:qM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WM,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=yr(n,"network-request-failed"),a=Ar().setTimeout(()=>{i(o)},QM.get());function l(){Ar().clearTimeout(a),r(s)}s.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XM=500,ZM=600,eF="_blank",tF="http://localhost";class BA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nF(n,e,t,s=XM,r=ZM){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...YM,width:s.toString(),height:r.toString(),top:i,left:o},c=es().toLowerCase();t&&(a=dI(c)?eF:t),cI(c)&&(e=e||tF,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[m,w])=>`${p}${m}=${w},`,"");if(FB(c)&&a!=="_self")return sF(e||"",a),new BA(null);const f=window.open(e||"",a,d);Ke(f,n,"popup-blocked");try{f.focus()}catch{}return new BA(f)}function sF(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF="__/auth/handler",iF="emulator/auth/handler",oF=encodeURIComponent("fac");async function MA(n,e,t,s,r,i){Ke(n.config.authDomain,n,"auth-domain-config-required"),Ke(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:il,eventId:r};if(e instanceof wI){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",sL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof Iu){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await n._getAppCheckToken(),c=l?`#${oF}=${encodeURIComponent(l)}`:"";return`${aF(n)}?${Eu(a).slice(1)}${c}`}function aF({config:n}){return n.emulator?km(n,iF):`https://${n.authDomain}/${rF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="webStorageSupport";class lF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=TI,this._completeRedirectFn=NI,this._overrideRedirectResult=RM}async _openPopup(e,t,s,r){oi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await MA(e,t,s,mg(),r);return nF(e,i,Bm())}async _openRedirect(e,t,s,r){await this._originValidation(e);const i=await MA(e,t,s,mg(),r);return dM(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:i}=this.eventManagers[t];return r?Promise.resolve(r):(oi(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await JM(e),s=new OM(e);return t.register("authEvent",r=>(Ke(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(gp,{type:gp},r=>{const i=r?.[0]?.[gp];i!==void 0&&t(!!i),ii(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=UM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mI()||uI()||Om()}}const cF=lF;var FA="@firebase/auth",UA="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dF(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hF(n){Tr(new nr("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Ke(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vI(n)},c=new QB(s,r,i,l);return JB(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Tr(new nr("auth-internal",e=>{const t=Yh(e.getProvider("auth").getImmediate());return(s=>new uF(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$s(FA,UA,dF(n)),$s(FA,UA,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF=300,pF=Gb("authIdTokenMaxAge")||fF;let VA=null;const gF=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>pF)return;const r=t?.token;VA!==r&&(VA=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function mF(n=eu()){const e=Yo(n,"auth");if(e.isInitialized())return e.getImmediate();const t=qB(n,{popupRedirectResolver:cF,persistence:[wM,II,TI]}),s=Gb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=gF(i.toString());oM(t,o,()=>o(t.currentUser)),iM(t,a=>o(a))}}const r=$b("auth");return r&&YB(t,`http://${r}`),t}function vF(){return document.getElementsByTagName("head")?.[0]??document}jB({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=r=>{const i=yr("internal-error");i.customData=r,t(i)},s.type="text/javascript",s.charset="UTF-8",vF().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hF("Browser");var $A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ui,OI;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,I){function P(){}P.prototype=I.prototype,x.F=I.prototype,x.prototype=new P,x.prototype.constructor=x,x.D=function(T,b,D){for(var k=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)k[ke-2]=arguments[ke];return I.prototype[b].apply(T,k)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(x,I,P){P||(P=0);const T=Array(16);if(typeof I=="string")for(var b=0;b<16;++b)T[b]=I.charCodeAt(P++)|I.charCodeAt(P++)<<8|I.charCodeAt(P++)<<16|I.charCodeAt(P++)<<24;else for(b=0;b<16;++b)T[b]=I[P++]|I[P++]<<8|I[P++]<<16|I[P++]<<24;I=x.g[0],P=x.g[1],b=x.g[2];let D=x.g[3],k;k=I+(D^P&(b^D))+T[0]+3614090360&4294967295,I=P+(k<<7&4294967295|k>>>25),k=D+(b^I&(P^b))+T[1]+3905402710&4294967295,D=I+(k<<12&4294967295|k>>>20),k=b+(P^D&(I^P))+T[2]+606105819&4294967295,b=D+(k<<17&4294967295|k>>>15),k=P+(I^b&(D^I))+T[3]+3250441966&4294967295,P=b+(k<<22&4294967295|k>>>10),k=I+(D^P&(b^D))+T[4]+4118548399&4294967295,I=P+(k<<7&4294967295|k>>>25),k=D+(b^I&(P^b))+T[5]+1200080426&4294967295,D=I+(k<<12&4294967295|k>>>20),k=b+(P^D&(I^P))+T[6]+2821735955&4294967295,b=D+(k<<17&4294967295|k>>>15),k=P+(I^b&(D^I))+T[7]+4249261313&4294967295,P=b+(k<<22&4294967295|k>>>10),k=I+(D^P&(b^D))+T[8]+1770035416&4294967295,I=P+(k<<7&4294967295|k>>>25),k=D+(b^I&(P^b))+T[9]+2336552879&4294967295,D=I+(k<<12&4294967295|k>>>20),k=b+(P^D&(I^P))+T[10]+4294925233&4294967295,b=D+(k<<17&4294967295|k>>>15),k=P+(I^b&(D^I))+T[11]+2304563134&4294967295,P=b+(k<<22&4294967295|k>>>10),k=I+(D^P&(b^D))+T[12]+1804603682&4294967295,I=P+(k<<7&4294967295|k>>>25),k=D+(b^I&(P^b))+T[13]+4254626195&4294967295,D=I+(k<<12&4294967295|k>>>20),k=b+(P^D&(I^P))+T[14]+2792965006&4294967295,b=D+(k<<17&4294967295|k>>>15),k=P+(I^b&(D^I))+T[15]+1236535329&4294967295,P=b+(k<<22&4294967295|k>>>10),k=I+(b^D&(P^b))+T[1]+4129170786&4294967295,I=P+(k<<5&4294967295|k>>>27),k=D+(P^b&(I^P))+T[6]+3225465664&4294967295,D=I+(k<<9&4294967295|k>>>23),k=b+(I^P&(D^I))+T[11]+643717713&4294967295,b=D+(k<<14&4294967295|k>>>18),k=P+(D^I&(b^D))+T[0]+3921069994&4294967295,P=b+(k<<20&4294967295|k>>>12),k=I+(b^D&(P^b))+T[5]+3593408605&4294967295,I=P+(k<<5&4294967295|k>>>27),k=D+(P^b&(I^P))+T[10]+38016083&4294967295,D=I+(k<<9&4294967295|k>>>23),k=b+(I^P&(D^I))+T[15]+3634488961&4294967295,b=D+(k<<14&4294967295|k>>>18),k=P+(D^I&(b^D))+T[4]+3889429448&4294967295,P=b+(k<<20&4294967295|k>>>12),k=I+(b^D&(P^b))+T[9]+568446438&4294967295,I=P+(k<<5&4294967295|k>>>27),k=D+(P^b&(I^P))+T[14]+3275163606&4294967295,D=I+(k<<9&4294967295|k>>>23),k=b+(I^P&(D^I))+T[3]+4107603335&4294967295,b=D+(k<<14&4294967295|k>>>18),k=P+(D^I&(b^D))+T[8]+1163531501&4294967295,P=b+(k<<20&4294967295|k>>>12),k=I+(b^D&(P^b))+T[13]+2850285829&4294967295,I=P+(k<<5&4294967295|k>>>27),k=D+(P^b&(I^P))+T[2]+4243563512&4294967295,D=I+(k<<9&4294967295|k>>>23),k=b+(I^P&(D^I))+T[7]+1735328473&4294967295,b=D+(k<<14&4294967295|k>>>18),k=P+(D^I&(b^D))+T[12]+2368359562&4294967295,P=b+(k<<20&4294967295|k>>>12),k=I+(P^b^D)+T[5]+4294588738&4294967295,I=P+(k<<4&4294967295|k>>>28),k=D+(I^P^b)+T[8]+2272392833&4294967295,D=I+(k<<11&4294967295|k>>>21),k=b+(D^I^P)+T[11]+1839030562&4294967295,b=D+(k<<16&4294967295|k>>>16),k=P+(b^D^I)+T[14]+4259657740&4294967295,P=b+(k<<23&4294967295|k>>>9),k=I+(P^b^D)+T[1]+2763975236&4294967295,I=P+(k<<4&4294967295|k>>>28),k=D+(I^P^b)+T[4]+1272893353&4294967295,D=I+(k<<11&4294967295|k>>>21),k=b+(D^I^P)+T[7]+4139469664&4294967295,b=D+(k<<16&4294967295|k>>>16),k=P+(b^D^I)+T[10]+3200236656&4294967295,P=b+(k<<23&4294967295|k>>>9),k=I+(P^b^D)+T[13]+681279174&4294967295,I=P+(k<<4&4294967295|k>>>28),k=D+(I^P^b)+T[0]+3936430074&4294967295,D=I+(k<<11&4294967295|k>>>21),k=b+(D^I^P)+T[3]+3572445317&4294967295,b=D+(k<<16&4294967295|k>>>16),k=P+(b^D^I)+T[6]+76029189&4294967295,P=b+(k<<23&4294967295|k>>>9),k=I+(P^b^D)+T[9]+3654602809&4294967295,I=P+(k<<4&4294967295|k>>>28),k=D+(I^P^b)+T[12]+3873151461&4294967295,D=I+(k<<11&4294967295|k>>>21),k=b+(D^I^P)+T[15]+530742520&4294967295,b=D+(k<<16&4294967295|k>>>16),k=P+(b^D^I)+T[2]+3299628645&4294967295,P=b+(k<<23&4294967295|k>>>9),k=I+(b^(P|~D))+T[0]+4096336452&4294967295,I=P+(k<<6&4294967295|k>>>26),k=D+(P^(I|~b))+T[7]+1126891415&4294967295,D=I+(k<<10&4294967295|k>>>22),k=b+(I^(D|~P))+T[14]+2878612391&4294967295,b=D+(k<<15&4294967295|k>>>17),k=P+(D^(b|~I))+T[5]+4237533241&4294967295,P=b+(k<<21&4294967295|k>>>11),k=I+(b^(P|~D))+T[12]+1700485571&4294967295,I=P+(k<<6&4294967295|k>>>26),k=D+(P^(I|~b))+T[3]+2399980690&4294967295,D=I+(k<<10&4294967295|k>>>22),k=b+(I^(D|~P))+T[10]+4293915773&4294967295,b=D+(k<<15&4294967295|k>>>17),k=P+(D^(b|~I))+T[1]+2240044497&4294967295,P=b+(k<<21&4294967295|k>>>11),k=I+(b^(P|~D))+T[8]+1873313359&4294967295,I=P+(k<<6&4294967295|k>>>26),k=D+(P^(I|~b))+T[15]+4264355552&4294967295,D=I+(k<<10&4294967295|k>>>22),k=b+(I^(D|~P))+T[6]+2734768916&4294967295,b=D+(k<<15&4294967295|k>>>17),k=P+(D^(b|~I))+T[13]+1309151649&4294967295,P=b+(k<<21&4294967295|k>>>11),k=I+(b^(P|~D))+T[4]+4149444226&4294967295,I=P+(k<<6&4294967295|k>>>26),k=D+(P^(I|~b))+T[11]+3174756917&4294967295,D=I+(k<<10&4294967295|k>>>22),k=b+(I^(D|~P))+T[2]+718787259&4294967295,b=D+(k<<15&4294967295|k>>>17),k=P+(D^(b|~I))+T[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(b+(k<<21&4294967295|k>>>11))&4294967295,x.g[2]=x.g[2]+b&4294967295,x.g[3]=x.g[3]+D&4294967295}s.prototype.v=function(x,I){I===void 0&&(I=x.length);const P=I-this.blockSize,T=this.C;let b=this.h,D=0;for(;D<I;){if(b==0)for(;D<=P;)r(this,x,D),D+=this.blockSize;if(typeof x=="string"){for(;D<I;)if(T[b++]=x.charCodeAt(D++),b==this.blockSize){r(this,T),b=0;break}}else for(;D<I;)if(T[b++]=x[D++],b==this.blockSize){r(this,T),b=0;break}}this.h=b,this.o+=I},s.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;I=this.o*8;for(var P=x.length-8;P<x.length;++P)x[P]=I&255,I/=256;for(this.v(x),x=Array(16),I=0,P=0;P<4;++P)for(let T=0;T<32;T+=8)x[I++]=this.g[P]>>>T&255;return x};function i(x,I){var P=a;return Object.prototype.hasOwnProperty.call(P,x)?P[x]:P[x]=I(x)}function o(x,I){this.h=I;const P=[];let T=!0;for(let b=x.length-1;b>=0;b--){const D=x[b]|0;T&&D==I||(P[b]=D,T=!1)}this.g=P}var a={};function l(x){return-128<=x&&x<128?i(x,function(I){return new o([I|0],I<0?-1:0)}):new o([x|0],x<0?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return f;if(x<0)return A(c(-x));const I=[];let P=1;for(let T=0;x>=P;T++)I[T]=x/P|0,P*=4294967296;return new o(I,0)}function d(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return A(d(x.substring(1),I));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=c(Math.pow(I,8));let T=f;for(let D=0;D<x.length;D+=8){var b=Math.min(8,x.length-D);const k=parseInt(x.substring(D,D+b),I);b<8?(b=c(Math.pow(I,b)),T=T.j(b).add(c(k))):(T=T.j(P),T=T.add(c(k)))}return T}var f=l(0),p=l(1),m=l(16777216);n=o.prototype,n.m=function(){if(y(this))return-A(this).m();let x=0,I=1;for(let P=0;P<this.g.length;P++){const T=this.i(P);x+=(T>=0?T:4294967296+T)*I,I*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(w(this))return"0";if(y(this))return"-"+A(this).toString(x);const I=c(Math.pow(x,6));var P=this;let T="";for(;;){const b=B(P,I).g;P=_(P,b.j(I));let D=((P.g.length>0?P.g[0]:P.h)>>>0).toString(x);if(P=b,w(P))return D+T;for(;D.length<6;)D="0"+D;T=D+T}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function w(x){if(x.h!=0)return!1;for(let I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function y(x){return x.h==-1}n.l=function(x){return x=_(this,x),y(x)?-1:w(x)?0:1};function A(x){const I=x.g.length,P=[];for(let T=0;T<I;T++)P[T]=~x.g[T];return new o(P,~x.h).add(p)}n.abs=function(){return y(this)?A(this):this},n.add=function(x){const I=Math.max(this.g.length,x.g.length),P=[];let T=0;for(let b=0;b<=I;b++){let D=T+(this.i(b)&65535)+(x.i(b)&65535),k=(D>>>16)+(this.i(b)>>>16)+(x.i(b)>>>16);T=k>>>16,D&=65535,k&=65535,P[b]=k<<16|D}return new o(P,P[P.length-1]&-2147483648?-1:0)};function _(x,I){return x.add(A(I))}n.j=function(x){if(w(this)||w(x))return f;if(y(this))return y(x)?A(this).j(A(x)):A(A(this).j(x));if(y(x))return A(this.j(A(x)));if(this.l(m)<0&&x.l(m)<0)return c(this.m()*x.m());const I=this.g.length+x.g.length,P=[];for(var T=0;T<2*I;T++)P[T]=0;for(T=0;T<this.g.length;T++)for(let b=0;b<x.g.length;b++){const D=this.i(T)>>>16,k=this.i(T)&65535,ke=x.i(b)>>>16,ie=x.i(b)&65535;P[2*T+2*b]+=k*ie,C(P,2*T+2*b),P[2*T+2*b+1]+=D*ie,C(P,2*T+2*b+1),P[2*T+2*b+1]+=k*ke,C(P,2*T+2*b+1),P[2*T+2*b+2]+=D*ke,C(P,2*T+2*b+2)}for(x=0;x<I;x++)P[x]=P[2*x+1]<<16|P[2*x];for(x=I;x<2*I;x++)P[x]=0;return new o(P,0)};function C(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function S(x,I){this.g=x,this.h=I}function B(x,I){if(w(I))throw Error("division by zero");if(w(x))return new S(f,f);if(y(x))return I=B(A(x),I),new S(A(I.g),A(I.h));if(y(I))return I=B(x,A(I)),new S(A(I.g),I.h);if(x.g.length>30){if(y(x)||y(I))throw Error("slowDivide_ only works with positive integers.");for(var P=p,T=I;T.l(x)<=0;)P=V(P),T=V(T);var b=j(P,1),D=j(T,1);for(T=j(T,2),P=j(P,2);!w(T);){var k=D.add(T);k.l(x)<=0&&(b=b.add(P),D=k),T=j(T,1),P=j(P,1)}return I=_(x,b.j(I)),new S(b,I)}for(b=f;x.l(I)>=0;){for(P=Math.max(1,Math.floor(x.m()/I.m())),T=Math.ceil(Math.log(P)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),D=c(P),k=D.j(I);y(k)||k.l(x)>0;)P-=T,D=c(P),k=D.j(I);w(D)&&(D=p),b=b.add(D),x=_(x,k)}return new S(b,x)}n.B=function(x){return B(this,x).h},n.and=function(x){const I=Math.max(this.g.length,x.g.length),P=[];for(let T=0;T<I;T++)P[T]=this.i(T)&x.i(T);return new o(P,this.h&x.h)},n.or=function(x){const I=Math.max(this.g.length,x.g.length),P=[];for(let T=0;T<I;T++)P[T]=this.i(T)|x.i(T);return new o(P,this.h|x.h)},n.xor=function(x){const I=Math.max(this.g.length,x.g.length),P=[];for(let T=0;T<I;T++)P[T]=this.i(T)^x.i(T);return new o(P,this.h^x.h)};function V(x){const I=x.g.length+1,P=[];for(let T=0;T<I;T++)P[T]=x.i(T)<<1|x.i(T-1)>>>31;return new o(P,x.h)}function j(x,I){const P=I>>5;I%=32;const T=x.g.length-P,b=[];for(let D=0;D<T;D++)b[D]=I>0?x.i(D+P)>>>I|x.i(D+P+1)<<32-I:x.i(D+P);return new o(b,x.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,OI=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Ui=o}).apply(typeof $A<"u"?$A:typeof self<"u"?self:typeof window<"u"?window:{});var rd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LI,pc,BI,Cd,Ag,MI,FI,UI;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof rd=="object"&&rd];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=t(this);function r(u,g){if(g)e:{var v=s;u=u.split(".");for(var R=0;R<u.length-1;R++){var q=u[R];if(!(q in v))break e;v=v[q]}u=u[u.length-1],R=v[u],g=g(R),g!=R&&g!=null&&e(v,u,{configurable:!0,writable:!0,value:g})}}r("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(u){return u||function(g){var v=[],R;for(R in g)Object.prototype.hasOwnProperty.call(g,R)&&v.push([R,g[R]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function l(u,g,v){return u.call.apply(u.bind,arguments)}function c(u,g,v){return c=l,c.apply(null,arguments)}function d(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var R=v.slice();return R.push.apply(R,arguments),u.apply(this,R)}}function f(u,g){function v(){}v.prototype=g.prototype,u.Z=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(R,q,X){for(var ye=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)ye[nt-2]=arguments[nt];return g.prototype[q].apply(R,ye)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function m(u){const g=u.length;if(g>0){const v=Array(g);for(let R=0;R<g;R++)v[R]=u[R];return v}return[]}function w(u,g){for(let R=1;R<arguments.length;R++){const q=arguments[R];var v=typeof q;if(v=v!="object"?v:q?Array.isArray(q)?"array":v:"null",v=="array"||v=="object"&&typeof q.length=="number"){v=u.length||0;const X=q.length||0;u.length=v+X;for(let ye=0;ye<X;ye++)u[v+ye]=q[ye]}else u.push(q)}}class y{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function A(u){o.setTimeout(()=>{throw u},0)}function _(){var u=x;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class C{constructor(){this.h=this.g=null}add(g,v){const R=S.get();R.set(g,v),this.h?this.h.next=R:this.g=R,this.h=R}}var S=new y(()=>new B,u=>u.reset());class B{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let V,j=!1,x=new C,I=()=>{const u=Promise.resolve(void 0);V=()=>{u.then(P)}};function P(){for(var u;u=_();){try{u.h.call(u.g)}catch(v){A(v)}var g=S;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}j=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var D=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};o.addEventListener("test",v,g),o.removeEventListener("test",v,g)}catch{}return u})();function k(u){return/^[\s\xa0]*$/.test(u)}function ke(u,g){b.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}f(ke,b),ke.prototype.init=function(u,g){const v=this.type=u.type,R=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ke.Z.h.call(this)},ke.prototype.h=function(){ke.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ie="closure_listenable_"+(Math.random()*1e6|0),G=0;function $(u,g,v,R,q){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!R,this.ha=q,this.key=++G,this.da=this.fa=!1}function Z(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function me(u,g,v){for(const R in u)g.call(v,u[R],R,u)}function Ve(u,g){for(const v in u)g.call(void 0,u[v],v,u)}function Ne(u){const g={};for(const v in u)g[v]=u[v];return g}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W(u,g){let v,R;for(let q=1;q<arguments.length;q++){R=arguments[q];for(v in R)u[v]=R[v];for(let X=0;X<se.length;X++)v=se[X],Object.prototype.hasOwnProperty.call(R,v)&&(u[v]=R[v])}}function ue(u){this.src=u,this.g={},this.h=0}ue.prototype.add=function(u,g,v,R,q){const X=u.toString();u=this.g[X],u||(u=this.g[X]=[],this.h++);const ye=tt(u,g,R,q);return ye>-1?(g=u[ye],v||(g.fa=!1)):(g=new $(g,this.src,X,!!R,q),g.fa=v,u.push(g)),g};function Pe(u,g){const v=g.type;if(v in u.g){var R=u.g[v],q=Array.prototype.indexOf.call(R,g,void 0),X;(X=q>=0)&&Array.prototype.splice.call(R,q,1),X&&(Z(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function tt(u,g,v,R){for(let q=0;q<u.length;++q){const X=u[q];if(!X.da&&X.listener==g&&X.capture==!!v&&X.ha==R)return q}return-1}var Y="closure_lm_"+(Math.random()*1e6|0),ge={};function fe(u,g,v,R,q){if(Array.isArray(g)){for(let X=0;X<g.length;X++)fe(u,g[X],v,R,q);return null}return v=z(v),u&&u[ie]?u.J(g,v,a(R)?!!R.capture:!1,q):we(u,g,v,!1,R,q)}function we(u,g,v,R,q,X){if(!g)throw Error("Invalid event type");const ye=a(q)?!!q.capture:!!q;let nt=K(u);if(nt||(u[Y]=nt=new ue(u)),v=nt.add(g,v,R,ye,X),v.proxy)return v;if(R=Qe(),v.proxy=R,R.src=u,R.listener=v,u.addEventListener)D||(q=ye),q===void 0&&(q=!1),u.addEventListener(g.toString(),R,q);else if(u.attachEvent)u.attachEvent(Q(g.toString()),R);else if(u.addListener&&u.removeListener)u.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Qe(){function u(v){return g.call(u.src,u.listener,v)}const g=te;return u}function N(u,g,v,R,q){if(Array.isArray(g))for(var X=0;X<g.length;X++)N(u,g[X],v,R,q);else R=a(R)?!!R.capture:!!R,v=z(v),u&&u[ie]?(u=u.i,X=String(g).toString(),X in u.g&&(g=u.g[X],v=tt(g,v,R,q),v>-1&&(Z(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete u.g[X],u.h--)))):u&&(u=K(u))&&(g=u.g[g.toString()],u=-1,g&&(u=tt(g,v,R,q)),(v=u>-1?g[u]:null)&&O(v))}function O(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[ie])Pe(g.i,u);else{var v=u.type,R=u.proxy;g.removeEventListener?g.removeEventListener(v,R,u.capture):g.detachEvent?g.detachEvent(Q(v),R):g.addListener&&g.removeListener&&g.removeListener(R),(v=K(g))?(Pe(v,u),v.h==0&&(v.src=null,g[Y]=null)):Z(u)}}}function Q(u){return u in ge?ge[u]:ge[u]="on"+u}function te(u,g){if(u.da)u=!0;else{g=new ke(g,this);const v=u.listener,R=u.ha||u.src;u.fa&&O(u),u=v.call(R,g)}return u}function K(u){return u=u[Y],u instanceof ue?u:null}var F="__closure_events_fn_"+(Math.random()*1e9>>>0);function z(u){return typeof u=="function"?u:(u[F]||(u[F]=function(g){return u.handleEvent(g)}),u[F])}function ne(){T.call(this),this.i=new ue(this),this.M=this,this.G=null}f(ne,T),ne.prototype[ie]=!0,ne.prototype.removeEventListener=function(u,g,v,R){N(this,u,g,v,R)};function ae(u,g){var v,R=u.G;if(R)for(v=[];R;R=R.G)v.push(R);if(u=u.M,R=g.type||g,typeof g=="string")g=new b(g,u);else if(g instanceof b)g.target=g.target||u;else{var q=g;g=new b(R,u),W(g,q)}q=!0;let X,ye;if(v)for(ye=v.length-1;ye>=0;ye--)X=g.g=v[ye],q=de(X,R,!0,g)&&q;if(X=g.g=u,q=de(X,R,!0,g)&&q,q=de(X,R,!1,g)&&q,v)for(ye=0;ye<v.length;ye++)X=g.g=v[ye],q=de(X,R,!1,g)&&q}ne.prototype.N=function(){if(ne.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const v=u.g[g];for(let R=0;R<v.length;R++)Z(v[R]);delete u.g[g],u.h--}}this.G=null},ne.prototype.J=function(u,g,v,R){return this.i.add(String(u),g,!1,v,R)},ne.prototype.K=function(u,g,v,R){return this.i.add(String(u),g,!0,v,R)};function de(u,g,v,R){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let q=!0;for(let X=0;X<g.length;++X){const ye=g[X];if(ye&&!ye.da&&ye.capture==v){const nt=ye.listener,bn=ye.ha||ye.src;ye.fa&&Pe(u.i,ye),q=nt.call(bn,R)!==!1&&q}}return q&&!R.defaultPrevented}function Me(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(u,g||0)}function ve(u){u.g=Me(()=>{u.g=null,u.i&&(u.i=!1,ve(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class xe extends T{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ve(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Be(u){T.call(this),this.h=u,this.g={}}f(Be,T);var it=[];function vt(u){me(u.g,function(g,v){this.g.hasOwnProperty(v)&&O(g)},u),u.g={}}Be.prototype.N=function(){Be.Z.N.call(this),vt(this)},Be.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var He=o.JSON.stringify,qt=o.JSON.parse,at=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function Ln(){}function ts(){}var Is={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pr(){b.call(this,"d")}f(Pr,b);function Jt(){b.call(this,"c")}f(Jt,b);var pn={},io=null;function or(){return io=io||new ne}pn.Ia="serverreachability";function an(u){b.call(this,pn.Ia,u)}f(an,b);function Ut(u){const g=or();ae(g,new an(g))}pn.STAT_EVENT="statevent";function ln(u,g){b.call(this,pn.STAT_EVENT,u),this.stat=g}f(ln,b);function yt(u){const g=or();ae(g,new ln(g,u))}pn.Ja="timingevent";function Qs(u,g){b.call(this,pn.Ja,u),this.size=g}f(Qs,b);function wn(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function Yt(){this.g=!0}Yt.prototype.ua=function(){this.g=!1};function Ou(u,g,v,R,q,X){u.info(function(){if(u.g)if(X){var ye="",nt=X.split("&");for(let xt=0;xt<nt.length;xt++){var bn=nt[xt].split("=");if(bn.length>1){const Rn=bn[0];bn=bn[1];const lr=Rn.split("_");ye=lr.length>=2&&lr[1]=="type"?ye+(Rn+"="+bn+"&"):ye+(Rn+"=redacted&")}}}else ye=null;else ye=X;return"XMLHTTP REQ ("+R+") [attempt "+q+"]: "+g+`
`+v+`
`+ye})}function _f(u,g,v,R,q,X,ye){u.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+q+"]: "+g+`
`+v+`
`+X+" "+ye})}function J(u,g,v,R){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+ee(u,v)+(R?" "+R:"")})}function re(u,g){u.info(function(){return"TIMEOUT: "+g})}Yt.prototype.info=function(){};function ee(u,g){if(!u.g)return g;if(!g)return null;try{const X=JSON.parse(g);if(X){for(u=0;u<X.length;u++)if(Array.isArray(X[u])){var v=X[u];if(!(v.length<2)){var R=v[1];if(Array.isArray(R)&&!(R.length<1)){var q=R[0];if(q!="noop"&&q!="stop"&&q!="close")for(let ye=1;ye<R.length;ye++)R[ye]=""}}}}return He(X)}catch{return g}}var Ae={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Le={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ze;function qe(){}f(qe,Ln),qe.prototype.g=function(){return new XMLHttpRequest},Ze=new qe;function Ce(u){return encodeURIComponent(String(u))}function wt(u){var g=1;u=u.split(":");const v=[];for(;g>0&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function Vt(u,g,v,R){this.j=u,this.i=g,this.l=v,this.S=R||1,this.V=new Be(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pn}function Pn(){this.i=null,this.g="",this.h=!1}var ms={},ns={};function jt(u,g,v){u.M=1,u.A=Lu(ar(g)),u.u=v,u.R=!0,Bn(u,null)}function Bn(u,g){u.F=Date.now(),ht(u),u.B=ar(u.A);var v=u.B,R=u.S;Array.isArray(R)||(R=[String(R)]),xv(v.i,"t",R),u.C=0,v=u.j.L,u.h=new Pn,u.g=Kv(u.j,v?g:null,!u.u),u.P>0&&(u.O=new xe(c(u.Y,u,u.g),u.P)),g=u.V,v=u.g,R=u.ba;var q="readystatechange";Array.isArray(q)||(q&&(it[0]=q.toString()),q=it);for(let X=0;X<q.length;X++){const ye=fe(v,q[X],R||g.handleEvent,!1,g.h||g);if(!ye)break;g.g[ye.key]=ye}g=u.J?Ne(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Ut(),Ou(u.i,u.v,u.B,u.l,u.S,u.u)}Vt.prototype.ba=function(u){u=u.target;const g=this.O;g&&pi(u)==3?g.j():this.Y(u)},Vt.prototype.Y=function(u){try{if(u==this.g)e:{const nt=pi(this.g),bn=this.g.ya(),xt=this.g.ca();if(!(nt<3)&&(nt!=3||this.g&&(this.h.h||this.g.la()||Mv(this.g)))){this.K||nt!=4||bn==7||(bn==8||xt<=0?Ut(3):Ut(2)),Mn(this);var g=this.g.ca();this.X=g;var v=_n(this);if(this.o=g==200,_f(this.i,this.v,this.B,this.l,this.S,nt,g),this.o){if(this.U&&!this.L){t:{if(this.g){var R,q=this.g;if((R=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(R)){var X=R;break t}}X=null}if(u=X)J(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ht(this,u);else{this.o=!1,this.m=3,yt(12),$t(this),zn(this);break e}}if(this.R){u=!0;let Rn;for(;!this.K&&this.C<v.length;)if(Rn=Ue(this,v),Rn==ns){nt==4&&(this.m=4,yt(14),u=!1),J(this.i,this.l,null,"[Incomplete Response]");break}else if(Rn==ms){this.m=4,yt(15),J(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else J(this.i,this.l,Rn,null),Ht(this,Rn);if(Ct(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||v.length!=0||this.h.h||(this.m=1,yt(16),u=!1),this.o=this.o&&u,!u)J(this.i,this.l,v,"[Invalid Chunked Response]"),$t(this),zn(this);else if(v.length>0&&!this.W){this.W=!0;var ye=this.j;ye.g==this&&ye.aa&&!ye.P&&(ye.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Pf(ye),ye.P=!0,yt(11))}}else J(this.i,this.l,v,null),Ht(this,v);nt==4&&$t(this),this.o&&!this.K&&(nt==4?Qv(this.j,this):(this.o=!1,ht(this)))}else tS(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,yt(12)):(this.m=0,yt(13)),$t(this),zn(this)}}}catch{}finally{}};function _n(u){if(!Ct(u))return u.g.la();const g=Mv(u.g);if(g==="")return"";let v="";const R=g.length,q=pi(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return $t(u),zn(u),"";u.h.i=new o.TextDecoder}for(let X=0;X<R;X++)u.h.h=!0,v+=u.h.i.decode(g[X],{stream:!(q&&X==R-1)});return g.length=0,u.h.g+=v,u.C=0,u.h.g}function Ct(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Ue(u,g){var v=u.C,R=g.indexOf(`
`,v);return R==-1?ns:(v=Number(g.substring(v,R)),isNaN(v)?ms:(R+=1,R+v>g.length?ns:(g=g.slice(R,R+v),u.C=R+v,g)))}Vt.prototype.cancel=function(){this.K=!0,$t(this)};function ht(u){u.T=Date.now()+u.H,vs(u,u.H)}function vs(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=wn(c(u.aa,u),g)}function Mn(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Vt.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(re(this.i,this.B),this.M!=2&&(Ut(),yt(17)),$t(this),this.m=2,zn(this)):vs(this,this.T-u)};function zn(u){u.j.I==0||u.K||Qv(u.j,u)}function $t(u){Mn(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,vt(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Ht(u,g){try{var v=u.j;if(v.I!=0&&(v.g==u||oo(v.h,u))){if(!u.L&&oo(v.h,u)&&v.I==3){try{var R=v.Ba.g.parse(g)}catch{R=null}if(Array.isArray(R)&&R.length==3){var q=R;if(q[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)Vu(v),Fu(v);else break e;Sf(v),yt(18)}}else v.xa=q[1],0<v.xa-v.K&&q[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=wn(c(v.Va,v),6e3));Rr(v.h)<=1&&v.ta&&(v.ta=void 0)}else lo(v,11)}else if((u.L||v.g==u)&&Vu(v),!k(g))for(q=v.Ba.g.parse(g),g=0;g<q.length;g++){let xt=q[g];const Rn=xt[0];if(!(Rn<=v.K))if(v.K=Rn,xt=xt[1],v.I==2)if(xt[0]=="c"){v.M=xt[1],v.ba=xt[2];const lr=xt[3];lr!=null&&(v.ka=lr,v.j.info("VER="+v.ka));const co=xt[4];co!=null&&(v.za=co,v.j.info("SVER="+v.za));const gi=xt[5];gi!=null&&typeof gi=="number"&&gi>0&&(R=1.5*gi,v.O=R,v.j.info("backChannelRequestTimeoutMs_="+R)),R=v;const mi=u.g;if(mi){const Hu=mi.g?mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hu){var X=R.h;X.g||Hu.indexOf("spdy")==-1&&Hu.indexOf("quic")==-1&&Hu.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(ta(X,X.h),X.h=null))}if(R.G){const Rf=mi.g?mi.g.getResponseHeader("X-HTTP-Session-Id"):null;Rf&&(R.wa=Rf,Mt(R.J,R.G,Rf))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),R=v;var ye=u;if(R.na=Wv(R,R.L?R.ba:null,R.W),ye.L){na(R.h,ye);var nt=ye,bn=R.O;bn&&(nt.H=bn),nt.D&&(Mn(nt),ht(nt)),R.g=ye}else Hv(R);v.i.length>0&&Uu(v)}else xt[0]!="stop"&&xt[0]!="close"||lo(v,7);else v.I==3&&(xt[0]=="stop"||xt[0]=="close"?xt[0]=="stop"?lo(v,7):Tf(v):xt[0]!="noop"&&v.l&&v.l.qa(xt),v.A=0)}}Ut(4)}catch{}}var Wn=class{constructor(u,g){this.g=u,this.map=g}};function En(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Cs(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Rr(u){return u.h?1:u.g?u.g.size:0}function oo(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function ta(u,g){u.g?u.g.add(g):u.h=g}function na(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}En.prototype.cancel=function(){if(this.i=Wl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Wl(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const v of u.g.values())g=g.concat(v.G);return g}return m(u.i)}var Kl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ef(u,g){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const R=u[v].indexOf("=");let q,X=null;R>=0?(q=u[v].substring(0,R),X=u[v].substring(R+1)):q=u[v],g(q,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function hi(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof hi?(this.l=u.l,ql(this,u.j),this.o=u.o,this.g=u.g,Jl(this,u.u),this.h=u.h,bf(this,kv(u.i)),this.m=u.m):u&&(g=String(u).match(Kl))?(this.l=!1,ql(this,g[1]||"",!0),this.o=Yl(g[2]||""),this.g=Yl(g[3]||"",!0),Jl(this,g[4]),this.h=Yl(g[5]||"",!0),bf(this,g[6]||"",!0),this.m=Yl(g[7]||"")):(this.l=!1,this.i=new Zl(null,this.l))}hi.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(Xl(g,Tv,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Xl(g,Tv,!0),"@"),u.push(Ce(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Xl(v,v.charAt(0)=="/"?zT:jT,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Xl(v,KT)),u.join("")},hi.prototype.resolve=function(u){const g=ar(this);let v=!!u.j;v?ql(g,u.j):v=!!u.o,v?g.o=u.o:v=!!u.g,v?g.g=u.g:v=u.u!=null;var R=u.h;if(v)Jl(g,u.u);else if(v=!!u.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var q=g.h.lastIndexOf("/");q!=-1&&(R=g.h.slice(0,q+1)+R)}if(q=R,q==".."||q==".")R="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){R=q.lastIndexOf("/",0)==0,q=q.split("/");const X=[];for(let ye=0;ye<q.length;){const nt=q[ye++];nt=="."?R&&ye==q.length&&X.push(""):nt==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),R&&ye==q.length&&X.push("")):(X.push(nt),R=!0)}R=X.join("/")}else R=q}return v?g.h=R:v=u.i.toString()!=="",v?bf(g,kv(u.i)):v=!!u.m,v&&(g.m=u.m),g};function ar(u){return new hi(u)}function ql(u,g,v){u.j=v?Yl(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Jl(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function bf(u,g,v){g instanceof Zl?(u.i=g,qT(u.i,u.l)):(v||(g=Xl(g,WT)),u.i=new Zl(g,u.l))}function Mt(u,g,v){u.i.set(g,v)}function Lu(u){return Mt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Yl(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Xl(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,QT),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function QT(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Tv=/[#\/\?@]/g,jT=/[#\?:]/g,zT=/[#\?]/g,WT=/[#\?@]/g,KT=/#/g;function Zl(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function ao(u){u.g||(u.g=new Map,u.h=0,u.i&&Ef(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}n=Zl.prototype,n.add=function(u,g){ao(this),this.i=null,u=sa(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function Sv(u,g){ao(u),g=sa(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Pv(u,g){return ao(u),g=sa(u,g),u.g.has(g)}n.forEach=function(u,g){ao(this),this.g.forEach(function(v,R){v.forEach(function(q){u.call(g,q,R,this)},this)},this)};function Rv(u,g){ao(u);let v=[];if(typeof g=="string")Pv(u,g)&&(v=v.concat(u.g.get(sa(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)v=v.concat(u[g]);return v}n.set=function(u,g){return ao(this),this.i=null,u=sa(this,u),Pv(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},n.get=function(u,g){return u?(u=Rv(this,u),u.length>0?String(u[0]):g):g};function xv(u,g,v){Sv(u,g),v.length>0&&(u.i=null,u.g.set(sa(u,g),m(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let R=0;R<g.length;R++){var v=g[R];const q=Ce(v);v=Rv(this,v);for(let X=0;X<v.length;X++){let ye=q;v[X]!==""&&(ye+="="+Ce(v[X])),u.push(ye)}}return this.i=u.join("&")};function kv(u){const g=new Zl;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function sa(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function qT(u,g){g&&!u.j&&(ao(u),u.i=null,u.g.forEach(function(v,R){const q=R.toLowerCase();R!=q&&(Sv(this,R),xv(this,q,v))},u)),u.j=g}function JT(u,g){const v=new Yt;if(o.Image){const R=new Image;R.onload=d(fi,v,"TestLoadImage: loaded",!0,g,R),R.onerror=d(fi,v,"TestLoadImage: error",!1,g,R),R.onabort=d(fi,v,"TestLoadImage: abort",!1,g,R),R.ontimeout=d(fi,v,"TestLoadImage: timeout",!1,g,R),o.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=u}else g(!1)}function YT(u,g){const v=new Yt,R=new AbortController,q=setTimeout(()=>{R.abort(),fi(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:R.signal}).then(X=>{clearTimeout(q),X.ok?fi(v,"TestPingServer: ok",!0,g):fi(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(q),fi(v,"TestPingServer: error",!1,g)})}function fi(u,g,v,R,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),R(v)}catch{}}function XT(){this.g=new at}function If(u){this.i=u.Sb||null,this.h=u.ab||!1}f(If,Ln),If.prototype.g=function(){return new Bu(this.i,this.h)};function Bu(u,g){ne.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Bu,ne),n=Bu.prototype,n.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,tc(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ec(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,tc(this)),this.g&&(this.readyState=3,tc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Nv(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Nv(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?ec(this):tc(this),this.readyState==3&&Nv(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,ec(this))},n.Na=function(u){this.g&&(this.response=u,ec(this))},n.ga=function(){this.g&&ec(this)};function ec(u){u.readyState=4,u.l=null,u.j=null,u.B=null,tc(u)}n.setRequestHeader=function(u,g){this.A.append(u,g)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function tc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Bu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Dv(u){let g="";return me(u,function(v,R){g+=R,g+=":",g+=v,g+=`\r
`}),g}function Cf(u,g,v){e:{for(R in v){var R=!1;break e}R=!0}R||(v=Dv(v),typeof u=="string"?v!=null&&Ce(v):Mt(u,g,v))}function Xt(u){ne.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Xt,ne);var ZT=/^https?$/i,eS=["POST","PUT"];n=Xt.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,g,v,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ze.g(),this.g.onreadystatechange=p(c(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(X){Ov(this,X);return}if(u=v||"",v=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var q in R)v.set(q,R[q]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const X of R.keys())v.set(X,R.get(X));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(v.keys()).find(X=>X.toLowerCase()=="content-type"),q=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(eS,g,void 0)>=0)||R||q||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ye]of v)this.g.setRequestHeader(X,ye);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(X){Ov(this,X)}};function Ov(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Lv(u),Mu(u)}function Lv(u){u.A||(u.A=!0,ae(u,"complete"),ae(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ae(this,"complete"),ae(this,"abort"),Mu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mu(this,!0)),Xt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Bv(this):this.Xa())},n.Xa=function(){Bv(this)};function Bv(u){if(u.h&&typeof i<"u"){if(u.v&&pi(u)==4)setTimeout(u.Ca.bind(u),0);else if(ae(u,"readystatechange"),pi(u)==4){u.h=!1;try{const X=u.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var R;if(R=X===0){let ye=String(u.D).match(Kl)[1]||null;!ye&&o.self&&o.self.location&&(ye=o.self.location.protocol.slice(0,-1)),R=!ZT.test(ye?ye.toLowerCase():"")}v=R}if(v)ae(u,"complete"),ae(u,"success");else{u.o=6;try{var q=pi(u)>2?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.ca()+"]",Lv(u)}}finally{Mu(u)}}}}function Mu(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,g||ae(u,"ready");try{v.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function pi(u){return u.g?u.g.readyState:0}n.ca=function(){try{return pi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),qt(g)}};function Mv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function tS(u){const g={};u=(u.g&&pi(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<u.length;R++){if(k(u[R]))continue;var v=wt(u[R]);const q=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const X=g[q]||[];g[q]=X,X.push(v)}Ve(g,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function nc(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function Fv(u){this.za=0,this.i=[],this.j=new Yt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=nc("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=nc("baseRetryDelayMs",5e3,u),this.Za=nc("retryDelaySeedMs",1e4,u),this.Ta=nc("forwardChannelMaxRetries",2,u),this.va=nc("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new En(u&&u.concurrentRequestLimit),this.Ba=new XT,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Fv.prototype,n.ka=8,n.I=1,n.connect=function(u,g,v,R){yt(0),this.W=u,this.H=g||{},v&&R!==void 0&&(this.H.OSID=v,this.H.OAID=R),this.F=this.X,this.J=Wv(this,null,this.W),Uu(this)};function Tf(u){if(Uv(u),u.I==3){var g=u.V++,v=ar(u.J);if(Mt(v,"SID",u.M),Mt(v,"RID",g),Mt(v,"TYPE","terminate"),sc(u,v),g=new Vt(u,u.j,g),g.M=2,g.A=Lu(ar(v)),v=!1,o.navigator&&o.navigator.sendBeacon)try{v=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&o.Image&&(new Image().src=g.A,v=!0),v||(g.g=Kv(g.j,null),g.g.ea(g.A)),g.F=Date.now(),ht(g)}zv(u)}function Fu(u){u.g&&(Pf(u),u.g.cancel(),u.g=null)}function Uv(u){Fu(u),u.v&&(o.clearTimeout(u.v),u.v=null),Vu(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Uu(u){if(!Cs(u.h)&&!u.m){u.m=!0;var g=u.Ea;V||I(),j||(V(),j=!0),x.add(g,u),u.D=0}}function nS(u,g){return Rr(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=wn(c(u.Ea,u,g),jv(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const q=new Vt(this,this.j,u);let X=this.o;if(this.U&&(X?(X=Ne(X),W(X,this.U)):X=this.U),this.u!==null||this.R||(q.J=X,X=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var R=this.i[v];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(g+=R,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=$v(this,q,g),v=ar(this.J),Mt(v,"RID",u),Mt(v,"CVER",22),this.G&&Mt(v,"X-HTTP-Session-Id",this.G),sc(this,v),X&&(this.R?g="headers="+Ce(Dv(X))+"&"+g:this.u&&Cf(v,this.u,X)),ta(this.h,q),this.Ra&&Mt(v,"TYPE","init"),this.S?(Mt(v,"$req",g),Mt(v,"SID","null"),q.U=!0,jt(q,v,null)):jt(q,v,g),this.I=2}}else this.I==3&&(u?Vv(this,u):this.i.length==0||Cs(this.h)||Vv(this))};function Vv(u,g){var v;g?v=g.l:v=u.V++;const R=ar(u.J);Mt(R,"SID",u.M),Mt(R,"RID",v),Mt(R,"AID",u.K),sc(u,R),u.u&&u.o&&Cf(R,u.u,u.o),v=new Vt(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),g&&(u.i=g.G.concat(u.i)),g=$v(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ta(u.h,v),jt(v,R,g)}function sc(u,g){u.H&&me(u.H,function(v,R){Mt(g,R,v)}),u.l&&me({},function(v,R){Mt(g,R,v)})}function $v(u,g,v){v=Math.min(u.i.length,v);const R=u.l?c(u.l.Ka,u.l,u):null;e:{var q=u.i;let nt=-1;for(;;){const bn=["count="+v];nt==-1?v>0?(nt=q[0].g,bn.push("ofs="+nt)):nt=0:bn.push("ofs="+nt);let xt=!0;for(let Rn=0;Rn<v;Rn++){var X=q[Rn].g;const lr=q[Rn].map;if(X-=nt,X<0)nt=Math.max(0,q[Rn].g-100),xt=!1;else try{X="req"+X+"_"||"";try{var ye=lr instanceof Map?lr:Object.entries(lr);for(const[co,gi]of ye){let mi=gi;a(gi)&&(mi=He(gi)),bn.push(X+co+"="+encodeURIComponent(mi))}}catch(co){throw bn.push(X+"type="+encodeURIComponent("_badmap")),co}}catch{R&&R(lr)}}if(xt){ye=bn.join("&");break e}}ye=void 0}return u=u.i.splice(0,v),g.G=u,ye}function Hv(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;V||I(),j||(V(),j=!0),x.add(g,u),u.A=0}}function Sf(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=wn(c(u.Da,u),jv(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,Gv(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=wn(c(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,yt(10),Fu(this),Gv(this))};function Pf(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function Gv(u){u.g=new Vt(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=ar(u.na);Mt(g,"RID","rpc"),Mt(g,"SID",u.M),Mt(g,"AID",u.K),Mt(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Mt(g,"TO",u.ia),Mt(g,"TYPE","xmlhttp"),sc(u,g),u.u&&u.o&&Cf(g,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=Lu(ar(g)),v.u=null,v.R=!0,Bn(v,u)}n.Va=function(){this.C!=null&&(this.C=null,Fu(this),Sf(this),yt(19))};function Vu(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function Qv(u,g){var v=null;if(u.g==g){Vu(u),Pf(u),u.g=null;var R=2}else if(oo(u.h,g))v=g.G,na(u.h,g),R=1;else return;if(u.I!=0){if(g.o)if(R==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var q=u.D;R=or(),ae(R,new Qs(R,v)),Uu(u)}else Hv(u);else if(q=g.m,q==3||q==0&&g.X>0||!(R==1&&nS(u,g)||R==2&&Sf(u)))switch(v&&v.length>0&&(g=u.h,g.i=g.i.concat(v)),q){case 1:lo(u,5);break;case 4:lo(u,10);break;case 3:lo(u,6);break;default:lo(u,2)}}}function jv(u,g){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*g}function lo(u,g){if(u.j.info("Error code "+g),g==2){var v=c(u.bb,u),R=u.Ua;const q=!R;R=new hi(R||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ql(R,"https"),Lu(R),q?JT(R.toString(),v):YT(R.toString(),v)}else yt(2);u.I=0,u.l&&u.l.pa(g),zv(u),Uv(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function zv(u){if(u.I=0,u.ja=[],u.l){const g=Wl(u.h);(g.length!=0||u.i.length!=0)&&(w(u.ja,g),w(u.ja,u.i),u.h.i.length=0,m(u.i),u.i.length=0),u.l.oa()}}function Wv(u,g,v){var R=v instanceof hi?ar(v):new hi(v);if(R.g!="")g&&(R.g=g+"."+R.g),Jl(R,R.u);else{var q=o.location;R=q.protocol,g=g?g+"."+q.hostname:q.hostname,q=+q.port;const X=new hi(null);R&&ql(X,R),g&&(X.g=g),q&&Jl(X,q),v&&(X.h=v),R=X}return v=u.G,g=u.wa,v&&g&&Mt(R,v,g),Mt(R,"VER",u.ka),sc(u,R),R}function Kv(u,g,v){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new Xt(new If({ab:v})):new Xt(u.ma),g.Fa(u.L),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qv(){}n=qv.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function $u(){}$u.prototype.g=function(u,g){return new Ts(u,g)};function Ts(u,g){ne.call(this),this.g=new Fv(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!k(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!k(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new ra(this)}f(Ts,ne),Ts.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ts.prototype.close=function(){Tf(this.g)},Ts.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=He(u),u=v);g.i.push(new Wn(g.Ya++,u)),g.I==3&&Uu(g)},Ts.prototype.N=function(){this.g.l=null,delete this.j,Tf(this.g),delete this.g,Ts.Z.N.call(this)};function Jv(u){Pr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const v in g){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}f(Jv,Pr);function Yv(){Jt.call(this),this.status=1}f(Yv,Jt);function ra(u){this.g=u}f(ra,qv),ra.prototype.ra=function(){ae(this.g,"a")},ra.prototype.qa=function(u){ae(this.g,new Jv(u))},ra.prototype.pa=function(u){ae(this.g,new Yv)},ra.prototype.oa=function(){ae(this.g,"b")},$u.prototype.createWebChannel=$u.prototype.g,Ts.prototype.send=Ts.prototype.o,Ts.prototype.open=Ts.prototype.m,Ts.prototype.close=Ts.prototype.close,UI=function(){return new $u},FI=function(){return or()},MI=pn,Ag={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,Cd=Ae,Le.COMPLETE="complete",BI=Le,ts.EventType=Is,Is.OPEN="a",Is.CLOSE="b",Is.ERROR="c",Is.MESSAGE="d",ne.prototype.listen=ne.prototype.J,pc=ts,Xt.prototype.listenOnce=Xt.prototype.K,Xt.prototype.getLastError=Xt.prototype.Ha,Xt.prototype.getLastErrorCode=Xt.prototype.ya,Xt.prototype.getStatus=Xt.prototype.ca,Xt.prototype.getResponseJson=Xt.prototype.La,Xt.prototype.getResponseText=Xt.prototype.la,Xt.prototype.send=Xt.prototype.ea,Xt.prototype.setWithCredentials=Xt.prototype.Fa,LI=Xt}).apply(typeof rd<"u"?rd:typeof self<"u"?self:typeof window<"u"?window:{});const HA="@firebase/firestore",GA="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qn.UNAUTHENTICATED=new qn(null),qn.GOOGLE_CREDENTIALS=new qn("google-credentials-uid"),qn.FIRST_PARTY=new qn("first-party-uid"),qn.MOCK_USER=new qn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=new Jh("@firebase/firestore");function ha(){return Qo.logLevel}function Ie(n,...e){if(Qo.logLevel<=lt.DEBUG){const t=e.map(Fm);Qo.debug(`Firestore (${al}): ${n}`,...t)}}function ai(n,...e){if(Qo.logLevel<=lt.ERROR){const t=e.map(Fm);Qo.error(`Firestore (${al}): ${n}`,...t)}}function Ka(n,...e){if(Qo.logLevel<=lt.WARN){const t=e.map(Fm);Qo.warn(`Firestore (${al}): ${n}`,...t)}}function Fm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,VI(n,s,t)}function VI(n,e,t){let s=`FIRESTORE (${al}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ai(s),new Error(s)}function It(n,e,t,s){let r="Unexpected state";typeof t=="string"?r=t:s=t,n||VI(e,r,s)}function Xe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends ir{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(qn.UNAUTHENTICATED)))}shutdown(){}}class AF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class wF{constructor(e){this.t=e,this.currentUser=qn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){It(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,t(l)):Promise.resolve();let i=new Yr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Yr,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await r(this.currentUser)}))},a=l=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Yr)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(It(typeof s.accessToken=="string",31837,{l:s}),new $I(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return It(e===null||typeof e=="string",2055,{h:e}),new qn(e)}}class _F{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=qn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class EF{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new _F(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(qn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class QA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bF{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){It(this.o===void 0,3512);const s=i=>{i.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>s(i)))};const r=i=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>r(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new QA(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(It(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new QA(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IF(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=IF(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<t&&(s+=e.charAt(r[i]%62))}return s}}function ct(n,e){return n<e?-1:n>e?1:0}function wg(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const r=n.charAt(s),i=e.charAt(s);if(r!==i)return mp(r)===mp(i)?ct(r,i):mp(r)?1:-1}return ct(n.length,e.length)}const CF=55296,TF=57343;function mp(n){const e=n.charCodeAt(0);return e>=CF&&e<=TF}function qa(n,e,t){return n.length===e.length&&n.every(((s,r)=>t(s,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="__name__";class hr{constructor(e,t,s){t===void 0?t=0:t>e.length&&je(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&je(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return hr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let r=0;r<s;r++){const i=hr.compareSegments(e.get(r),t.get(r));if(i!==0)return i}return ct(e.length,t.length)}static compareSegments(e,t){const s=hr.isNumericId(e),r=hr.isNumericId(t);return s&&!r?-1:!s&&r?1:s&&r?hr.extractNumericId(e).compare(hr.extractNumericId(t)):wg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ui.fromString(e.substring(4,e.length-2))}}class Lt extends hr{construct(e,t,s){return new Lt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ee(oe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((r=>r.length>0)))}return new Lt(t)}static emptyPath(){return new Lt([])}}const SF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hn extends hr{construct(e,t,s){return new Hn(e,t,s)}static isValidIdentifier(e){return SF.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jA}static keyField(){return new Hn([jA])}static fromServerFormat(e){const t=[];let s="",r=0;const i=()=>{if(s.length===0)throw new Ee(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new Ee(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ee(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new Ee(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hn(t)}static emptyPath(){return new Hn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.path=e}static fromPath(e){return new Fe(Lt.fromString(e))}static fromName(e){return new Fe(Lt.fromString(e).popFirst(5))}static empty(){return new Fe(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fe(new Lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(n,e,t){if(!t)throw new Ee(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function PF(n,e,t,s){if(e===!0&&s===!0)throw new Ee(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function zA(n){if(!Fe.isDocumentKey(n))throw new Ee(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function WA(n){if(Fe.isDocumentKey(n))throw new Ee(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function GI(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ef(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":je(12329,{type:typeof n})}function li(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ee(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ef(n);throw new Ee(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Tu(n,e){if(!GI(n))throw new Ee(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const o=n[s];if(r&&typeof o!==r){t=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){t=`Expected '${s}' field to equal '${i.value}'`;break}}if(t)throw new Ee(oe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=-62135596800,qA=1e6;class Ft{static now(){return Ft.fromMillis(Date.now())}static fromDate(e){return Ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*qA);return new Ft(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ee(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ee(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<KA)throw new Ee(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qA}_compareTo(e){return this.seconds===e.seconds?ct(this.nanoseconds,e.nanoseconds):ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Tu(e,Ft._jsonSchema))return new Ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-KA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ft._jsonSchemaVersion="firestore/timestamp/1.0",Ft._jsonSchema={type:yn("string",Ft._jsonSchemaVersion),seconds:yn("number"),nanoseconds:yn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{static fromTimestamp(e){return new Je(e)}static min(){return new Je(new Ft(0,0))}static max(){return new Je(new Ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=-1;function RF(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=Je.fromTimestamp(s===1e9?new Ft(t+1,0):new Ft(t,s));return new qi(r,Fe.empty(),e)}function xF(n){return new qi(n.readTime,n.key,su)}class qi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new qi(Je.min(),Fe.empty(),su)}static max(){return new qi(Je.max(),Fe.empty(),su)}}function kF(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Fe.comparator(n.documentKey,e.documentKey),t!==0?t:ct(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==NF)throw n;Ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le(((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(t,i).next(s,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):le.reject(t)}static resolve(e){return new le(((t,s)=>{t(e)}))}static reject(e){return new le(((t,s)=>{s(e)}))}static waitFor(e){return new le(((t,s)=>{let r=0,i=0,o=!1;e.forEach((a=>{++r,a.next((()=>{++i,o&&i===r&&t()}),(l=>s(l)))})),o=!0,i===r&&t()}))}static or(e){let t=le.resolve(!1);for(const s of e)t=t.next((r=>r?le.resolve(r):s()));return t}static forEach(e,t){const s=[];return e.forEach(((r,i)=>{s.push(t.call(this,r,i))})),this.waitFor(s)}static mapArray(e,t){return new le(((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;t(e[c]).next((d=>{o[c]=d,++a,a===i&&s(o)}),(d=>r(d)))}}))}static doWhile(e,t){return new le(((s,r)=>{const i=()=>{e()===!0?t().next((()=>{i()}),r):s()};i()}))}}function OF(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function cl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}tf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm=-1;function nf(n){return n==null}function ih(n){return n===0&&1/n==-1/0}function LF(n){return typeof n=="number"&&Number.isInteger(n)&&!ih(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="";function BF(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=JA(e)),e=MF(n.get(t),e);return JA(e)}function MF(n,e){let t=e;const s=n.length;for(let r=0;r<s;r++){const i=n.charAt(r);switch(i){case"\0":t+="";break;case QI:t+="";break;default:t+=i}}return t}function JA(n){return n+QI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function so(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,t){this.comparator=e,this.root=t||Fn.EMPTY}insert(e,t){return new Kt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Fn.BLACK,null,null))}remove(e){return new Kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return t+s.left.size;r<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new id(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new id(this.root,e,this.comparator,!1)}getReverseIterator(){return new id(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new id(this.root,e,this.comparator,!0)}}class id{constructor(e,t,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?s(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fn{constructor(e,t,s,r,i){this.key=e,this.value=t,this.color=s??Fn.RED,this.left=r??Fn.EMPTY,this.right=i??Fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,r,i){return new Fn(e??this.key,t??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,s),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Fn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Fn.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw je(27949);return e+(this.isRed()?0:1)}}Fn.EMPTY=null,Fn.RED=!0,Fn.BLACK=!1;Fn.EMPTY=new class{constructor(){this.size=0}get key(){throw je(57766)}get value(){throw je(16141)}get color(){throw je(16727)}get left(){throw je(29726)}get right(){throw je(36894)}copy(e,t,s,r,i){return this}insert(e,t,s){return new Fn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.comparator=e,this.data=new Kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new XA(this.data.getIterator())}getIteratorFrom(e){return new XA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Tn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Tn(this.comparator);return t.data=e,t}}class XA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.fields=e,e.sort(Hn.comparator)}static empty(){return new Ds([])}unionWith(e){let t=new Tn(Hn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Ds(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qa(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new zI("Invalid base64 string: "+i):i}})(e);return new Gn(t)}static fromUint8Array(e){const t=(function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i})(e);return new Gn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gn.EMPTY_BYTE_STRING=new Gn("");const FF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ji(n){if(It(!!n,39018),typeof n=="string"){let e=0;const t=FF.exec(n);if(It(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:cn(n.seconds),nanos:cn(n.nanos)}}function cn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Yi(n){return typeof n=="string"?Gn.fromBase64String(n):Gn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="server_timestamp",KI="__type__",qI="__previous_value__",JI="__local_write_time__";function $m(n){return(n?.mapValue?.fields||{})[KI]?.stringValue===WI}function sf(n){const e=n.mapValue.fields[qI];return $m(e)?sf(e):e}function ru(n){const e=Ji(n.mapValue.fields[JI].timestampValue);return new Ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e,t,s,r,i,o,a,l,c,d){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const oh="(default)";class iu{constructor(e,t){this.projectId=e,this.database=t||oh}static empty(){return new iu("","")}get isDefaultDatabase(){return this.database===oh}isEqual(e){return e instanceof iu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI="__type__",VF="__max__",od={mapValue:{}},XI="__vector__",ah="value";function Xi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?$m(n)?4:HF(n)?9007199254740991:$F(n)?10:11:je(28295,{value:n})}function Sr(n,e){if(n===e)return!0;const t=Xi(n);if(t!==Xi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ru(n).isEqual(ru(e));case 3:return(function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Ji(r.timestampValue),a=Ji(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,i){return Yi(r.bytesValue).isEqual(Yi(i.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,i){return cn(r.geoPointValue.latitude)===cn(i.geoPointValue.latitude)&&cn(r.geoPointValue.longitude)===cn(i.geoPointValue.longitude)})(n,e);case 2:return(function(r,i){if("integerValue"in r&&"integerValue"in i)return cn(r.integerValue)===cn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=cn(r.doubleValue),a=cn(i.doubleValue);return o===a?ih(o)===ih(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return qa(n.arrayValue.values||[],e.arrayValue.values||[],Sr);case 10:case 11:return(function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(YA(o)!==YA(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Sr(o[l],a[l])))return!1;return!0})(n,e);default:return je(52216,{left:n})}}function ou(n,e){return(n.values||[]).find((t=>Sr(t,e)))!==void 0}function Ja(n,e){if(n===e)return 0;const t=Xi(n),s=Xi(e);if(t!==s)return ct(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ct(n.booleanValue,e.booleanValue);case 2:return(function(i,o){const a=cn(i.integerValue||i.doubleValue),l=cn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(n,e);case 3:return ZA(n.timestampValue,e.timestampValue);case 4:return ZA(ru(n),ru(e));case 5:return wg(n.stringValue,e.stringValue);case 6:return(function(i,o){const a=Yi(i),l=Yi(o);return a.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=ct(a[c],l[c]);if(d!==0)return d}return ct(a.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(i,o){const a=ct(cn(i.latitude),cn(o.latitude));return a!==0?a:ct(cn(i.longitude),cn(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return ew(n.arrayValue,e.arrayValue);case 10:return(function(i,o){const a=i.fields||{},l=o.fields||{},c=a[ah]?.arrayValue,d=l[ah]?.arrayValue,f=ct(c?.values?.length||0,d?.values?.length||0);return f!==0?f:ew(c,d)})(n.mapValue,e.mapValue);case 11:return(function(i,o){if(i===od.mapValue&&o===od.mapValue)return 0;if(i===od.mapValue)return 1;if(o===od.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const p=wg(l[f],d[f]);if(p!==0)return p;const m=Ja(a[l[f]],c[d[f]]);if(m!==0)return m}return ct(l.length,d.length)})(n.mapValue,e.mapValue);default:throw je(23264,{he:t})}}function ZA(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ct(n,e);const t=Ji(n),s=Ji(e),r=ct(t.seconds,s.seconds);return r!==0?r:ct(t.nanos,s.nanos)}function ew(n,e){const t=n.values||[],s=e.values||[];for(let r=0;r<t.length&&r<s.length;++r){const i=Ja(t[r],s[r]);if(i)return i}return ct(t.length,s.length)}function Ya(n){return _g(n)}function _g(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Ji(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Yi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Fe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",r=!0;for(const i of t.values||[])r?r=!1:s+=",",s+=_g(i);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${_g(t.fields[o])}`;return r+"}"})(n.mapValue):je(61005,{value:n})}function Td(n){switch(Xi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=sf(n);return e?16+Td(e):16;case 5:return 2*n.stringValue.length;case 6:return Yi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,i)=>r+Td(i)),0)})(n.arrayValue);case 10:case 11:return(function(s){let r=0;return so(s.fields,((i,o)=>{r+=i.length+Td(o)})),r})(n.mapValue);default:throw je(13486,{value:n})}}function tw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Eg(n){return!!n&&"integerValue"in n}function Hm(n){return!!n&&"arrayValue"in n}function nw(n){return!!n&&"nullValue"in n}function sw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sd(n){return!!n&&"mapValue"in n}function $F(n){return(n?.mapValue?.fields||{})[YI]?.stringValue===XI}function Nc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return so(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Nc(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Nc(n.arrayValue.values[t]);return e}return{...n}}function HF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===VF}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this.value=e}static empty(){return new Es({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Sd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nc(t)}setAll(e){let t=Hn.emptyPath(),s={},r=[];e.forEach(((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,s,r),s={},r=[],t=a.popLast()}o?s[a.lastSegment()]=Nc(o):r.push(a.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,s,r)}delete(e){const t=this.field(e.popLast());Sd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=t.mapValue.fields[e.get(s)];Sd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,s){so(t,((r,i)=>e[r]=i));for(const r of s)delete e[r]}clone(){return new Es(Nc(this.value))}}function ZI(n){const e=[];return so(n.fields,((t,s)=>{const r=new Hn([t]);if(Sd(s)){const i=ZI(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)})),new Ds(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,t,s,r,i,o,a){this.key=e,this.documentType=t,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Yn(e,0,Je.min(),Je.min(),Je.min(),Es.empty(),0)}static newFoundDocument(e,t,s,r){return new Yn(e,1,t,Je.min(),s,r,0)}static newNoDocument(e,t){return new Yn(e,2,t,Je.min(),Je.min(),Es.empty(),0)}static newUnknownDocument(e,t){return new Yn(e,3,t,Je.min(),Je.min(),Es.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Es.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Es.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,t){this.position=e,this.inclusive=t}}function rw(n,e,t){let s=0;for(let r=0;r<n.position.length;r++){const i=e[r],o=n.position[r];if(i.field.isKeyField()?s=Fe.comparator(Fe.fromName(o.referenceValue),t.key):s=Ja(o,t.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function iw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Sr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,t="asc"){this.field=e,this.dir=t}}function GF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{}class vn extends eC{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new jF(e,t,s):t==="array-contains"?new KF(e,s):t==="in"?new qF(e,s):t==="not-in"?new JF(e,s):t==="array-contains-any"?new YF(e,s):new vn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new zF(e,s):new WF(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ja(t,this.value)):t!==null&&Xi(this.value)===Xi(t)&&this.matchesComparison(Ja(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sr extends eC{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new sr(e,t)}matches(e){return tC(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function tC(n){return n.op==="and"}function nC(n){return QF(n)&&tC(n)}function QF(n){for(const e of n.filters)if(e instanceof sr)return!1;return!0}function bg(n){if(n instanceof vn)return n.field.canonicalString()+n.op.toString()+Ya(n.value);if(nC(n))return n.filters.map((e=>bg(e))).join(",");{const e=n.filters.map((t=>bg(t))).join(",");return`${n.op}(${e})`}}function sC(n,e){return n instanceof vn?(function(s,r){return r instanceof vn&&s.op===r.op&&s.field.isEqual(r.field)&&Sr(s.value,r.value)})(n,e):n instanceof sr?(function(s,r){return r instanceof sr&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((i,o,a)=>i&&sC(o,r.filters[a])),!0):!1})(n,e):void je(19439)}function rC(n){return n instanceof vn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ya(t.value)}`})(n):n instanceof sr?(function(t){return t.op.toString()+" {"+t.getFilters().map(rC).join(" ,")+"}"})(n):"Filter"}class jF extends vn{constructor(e,t,s){super(e,t,s),this.key=Fe.fromName(s.referenceValue)}matches(e){const t=Fe.comparator(e.key,this.key);return this.matchesComparison(t)}}class zF extends vn{constructor(e,t){super(e,"in",t),this.keys=iC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class WF extends vn{constructor(e,t){super(e,"not-in",t),this.keys=iC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function iC(n,e){return(e.arrayValue?.values||[]).map((t=>Fe.fromName(t.referenceValue)))}class KF extends vn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Hm(t)&&ou(t.arrayValue,this.value)}}class qF extends vn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ou(this.value.arrayValue,t)}}class JF extends vn{constructor(e,t){super(e,"not-in",t)}matches(e){if(ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ou(this.value.arrayValue,t)}}class YF extends vn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Hm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>ou(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e,t=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function ow(n,e=null,t=[],s=[],r=null,i=null,o=null){return new XF(n,e,t,s,r,i,o)}function Gm(n){const e=Xe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>bg(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(i){return i.field.canonicalString()+i.dir})(s))).join(","),nf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Ya(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Ya(s))).join(",")),e.Te=t}return e.Te}function Qm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!GF(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!sC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!iw(n.startAt,e.startAt)&&iw(n.endAt,e.endAt)}function Ig(n){return Fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,t=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ZF(n,e,t,s,r,i,o,a){return new Su(n,e,t,s,r,i,o,a)}function jm(n){return new Su(n)}function aw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function oC(n){return n.collectionGroup!==null}function Dc(n){const e=Xe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Tn(Hn.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((c=>{c.isInequality()&&(a=a.add(c.field))}))})),a})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new ch(i,s))})),t.has(Hn.keyField().canonicalString())||e.Ie.push(new ch(Hn.keyField(),s))}return e.Ie}function wr(n){const e=Xe(n);return e.Ee||(e.Ee=e4(e,Dc(n))),e.Ee}function e4(n,e){if(n.limitType==="F")return ow(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const i=r.dir==="desc"?"asc":"desc";return new ch(r.field,i)}));const t=n.endAt?new lh(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new lh(n.startAt.position,n.startAt.inclusive):null;return ow(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Cg(n,e){const t=n.filters.concat([e]);return new Su(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Tg(n,e,t){return new Su(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rf(n,e){return Qm(wr(n),wr(e))&&n.limitType===e.limitType}function aC(n){return`${Gm(wr(n))}|lt:${n.limitType}`}function fa(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((r=>rC(r))).join(", ")}]`),nf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((r=>Ya(r))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((r=>Ya(r))).join(",")),`Target(${s})`})(wr(n))}; limitType=${n.limitType})`}function of(n,e){return e.isFoundDocument()&&(function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):Fe.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)})(n,e)&&(function(s,r){for(const i of Dc(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0})(n,e)&&(function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0})(n,e)&&(function(s,r){return!(s.startAt&&!(function(o,a,l){const c=rw(o,a,l);return o.inclusive?c<=0:c<0})(s.startAt,Dc(s),r)||s.endAt&&!(function(o,a,l){const c=rw(o,a,l);return o.inclusive?c>=0:c>0})(s.endAt,Dc(s),r))})(n,e)}function t4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function lC(n){return(e,t)=>{let s=!1;for(const r of Dc(n)){const i=n4(r,e,t);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function n4(n,e,t){const s=n.field.isKeyField()?Fe.comparator(e.key,t.key):(function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Ja(l,c):je(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return je(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[t]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){so(this.inner,((t,s)=>{for(const[r,i]of s)e(r,i)}))}isEmpty(){return jI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=new Kt(Fe.comparator);function ci(){return s4}const cC=new Kt(Fe.comparator);function gc(...n){let e=cC;for(const t of n)e=e.insert(t.key,t);return e}function uC(n){let e=cC;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function xo(){return Oc()}function dC(){return Oc()}function Oc(){return new Xo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const r4=new Kt(Fe.comparator),i4=new Tn(Fe.comparator);function ut(...n){let e=i4;for(const t of n)e=e.add(t);return e}const o4=new Tn(ct);function a4(){return o4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ih(e)?"-0":e}}function hC(n){return{integerValue:""+n}}function l4(n,e){return LF(e)?hC(e):zm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(){this._=void 0}}function c4(n,e,t){return n instanceof uh?(function(r,i){const o={fields:{[KI]:{stringValue:WI},[JI]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&$m(i)&&(i=sf(i)),i&&(o.fields[qI]=i),{mapValue:o}})(t,e):n instanceof au?pC(n,e):n instanceof lu?gC(n,e):(function(r,i){const o=fC(r,i),a=lw(o)+lw(r.Ae);return Eg(o)&&Eg(r.Ae)?hC(a):zm(r.serializer,a)})(n,e)}function u4(n,e,t){return n instanceof au?pC(n,e):n instanceof lu?gC(n,e):t}function fC(n,e){return n instanceof dh?(function(s){return Eg(s)||(function(i){return!!i&&"doubleValue"in i})(s)})(e)?e:{integerValue:0}:null}class uh extends af{}class au extends af{constructor(e){super(),this.elements=e}}function pC(n,e){const t=mC(e);for(const s of n.elements)t.some((r=>Sr(r,s)))||t.push(s);return{arrayValue:{values:t}}}class lu extends af{constructor(e){super(),this.elements=e}}function gC(n,e){let t=mC(e);for(const s of n.elements)t=t.filter((r=>!Sr(r,s)));return{arrayValue:{values:t}}}class dh extends af{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function lw(n){return cn(n.integerValue||n.doubleValue)}function mC(n){return Hm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function d4(n,e){return n.field.isEqual(e.field)&&(function(s,r){return s instanceof au&&r instanceof au||s instanceof lu&&r instanceof lu?qa(s.elements,r.elements,Sr):s instanceof dh&&r instanceof dh?Sr(s.Ae,r.Ae):s instanceof uh&&r instanceof uh})(n.transform,e.transform)}class h4{constructor(e,t){this.version=e,this.transformResults=t}}class _r{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class lf{}function vC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new AC(n.key,_r.none()):new Pu(n.key,n.data,_r.none());{const t=n.data,s=Es.empty();let r=new Tn(Hn.comparator);for(let i of e.fields)if(!r.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new ro(n.key,s,new Ds(r.toArray()),_r.none())}}function f4(n,e,t){n instanceof Pu?(function(r,i,o){const a=r.value.clone(),l=uw(r.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof ro?(function(r,i,o){if(!Pd(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=uw(r.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(yC(r)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(n,e,t):(function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Lc(n,e,t,s){return n instanceof Pu?(function(i,o,a,l){if(!Pd(i.precondition,o))return a;const c=i.value.clone(),d=dw(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null})(n,e,t,s):n instanceof ro?(function(i,o,a,l){if(!Pd(i.precondition,o))return a;const c=dw(i.fieldTransforms,l,o),d=o.data;return d.setAll(yC(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((f=>f.field)))})(n,e,t,s):(function(i,o,a){return Pd(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function p4(n,e){let t=null;for(const s of n.fieldTransforms){const r=e.data.field(s.field),i=fC(s.transform,r||null);i!=null&&(t===null&&(t=Es.empty()),t.set(s.field,i))}return t||null}function cw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&qa(s,r,((i,o)=>d4(i,o)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Pu extends lf{constructor(e,t,s,r=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ro extends lf{constructor(e,t,s,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function yC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function uw(n,e,t){const s=new Map;It(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const i=n[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,u4(o,a,t[r]))}return s}function dw(n,e,t){const s=new Map;for(const r of n){const i=r.transform,o=t.data.field(r.field);s.set(r.field,c4(i,o,e))}return s}class AC extends lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class g4 extends lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,t,s,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&f4(i,e,s[r])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Lc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Lc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=dC();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(r.key)?null:a;const l=vC(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Je.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ut())}isEqual(e){return this.batchId===e.batchId&&qa(this.mutations,e.mutations,((t,s)=>cw(t,s)))&&qa(this.baseMutations,e.baseMutations,((t,s)=>cw(t,s)))}}class Wm{constructor(e,t,s,r){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=r}static from(e,t,s){It(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return r4})();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Wm(e,t,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn,gt;function A4(n){switch(n){case oe.OK:return je(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return je(15467,{code:n})}}function wC(n){if(n===void 0)return ai("GRPC error has no .code"),oe.UNKNOWN;switch(n){case gn.OK:return oe.OK;case gn.CANCELLED:return oe.CANCELLED;case gn.UNKNOWN:return oe.UNKNOWN;case gn.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case gn.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case gn.INTERNAL:return oe.INTERNAL;case gn.UNAVAILABLE:return oe.UNAVAILABLE;case gn.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case gn.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case gn.NOT_FOUND:return oe.NOT_FOUND;case gn.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case gn.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case gn.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case gn.ABORTED:return oe.ABORTED;case gn.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case gn.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case gn.DATA_LOSS:return oe.DATA_LOSS;default:return je(39323,{code:n})}}(gt=gn||(gn={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=new Ui([4294967295,4294967295],0);function hw(n){const e=w4().encode(n),t=new OI;return t.update(e),new Uint8Array(t.digest())}function fw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ui([t,s],0),new Ui([r,i],0)]}class Km{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new mc(`Invalid padding: ${t}`);if(s<0)throw new mc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new mc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new mc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ui.fromNumber(this.ge)}ye(e,t,s){let r=e.add(t.multiply(Ui.fromNumber(s)));return r.compare(_4)===1&&(r=new Ui([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=hw(e),[s,r]=fw(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,t,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Km(i,r,t);return s.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const t=hw(e),[s,r]=fw(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class mc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,t,s,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const r=new Map;return r.set(e,Ru.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new cf(Je.min(),r,new Kt(ct),ci(),ut())}}class Ru{constructor(e,t,s,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ru(s,t,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,t,s,r){this.be=e,this.removedTargetIds=t,this.key=s,this.De=r}}class _C{constructor(e,t){this.targetId=e,this.Ce=t}}class EC{constructor(e,t,s=Gn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=r}}class pw{constructor(){this.ve=0,this.Fe=gw(),this.Me=Gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ut(),t=ut(),s=ut();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:s=s.add(r);break;default:je(38017,{changeType:i})}})),new Ru(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=gw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,It(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class E4{constructor(e){this.Ge=e,this.ze=new Map,this.je=ci(),this.Je=ad(),this.He=ad(),this.Ye=new Kt(ct)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:je(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,s=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(Ig(i))if(s===0){const o=new Fe(i.path);this.et(t,o,Yn.newNoDocument(o,Je.min()))}else It(s===1,20013,{expectedCount:s});else{const o=this._t(t);if(o!==s){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,c)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=t;let o,a;try{o=Yi(s).toUint8Array()}catch(l){if(l instanceof zI)return Ka("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Km(o,r,i)}catch(l){return Ka(l instanceof mc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let r=0;return s.forEach((i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(t,i,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Ig(a.target)){const l=new Fe(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Yn.newNoDocument(l,e))}i.Be&&(t.set(o,i.ke()),i.qe())}}));let s=ut();this.He.forEach(((i,o)=>{let a=!0;o.forEachWhile((l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(s=s.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const r=new cf(e,t,this.Ye,this.je,s);return this.je=ci(),this.Je=ad(),this.He=ad(),this.Ye=new Kt(ct),r}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new pw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Tn(ct),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Tn(ct),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ie("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new pw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ad(){return new Kt(Fe.comparator)}function gw(){return new Kt(Fe.comparator)}const b4={asc:"ASCENDING",desc:"DESCENDING"},I4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},C4={and:"AND",or:"OR"};class T4{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Sg(n,e){return n.useProto3Json||nf(e)?e:{value:e}}function hh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function S4(n,e){return hh(n,e.toTimestamp())}function Er(n){return It(!!n,49232),Je.fromTimestamp((function(t){const s=Ji(t);return new Ft(s.seconds,s.nanos)})(n))}function qm(n,e){return Pg(n,e).canonicalString()}function Pg(n,e){const t=(function(r){return new Lt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function IC(n){const e=Lt.fromString(n);return It(RC(e),10190,{key:e.toString()}),e}function Rg(n,e){return qm(n.databaseId,e.path)}function vp(n,e){const t=IC(e);if(t.get(1)!==n.databaseId.projectId)throw new Ee(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ee(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Fe(TC(t))}function CC(n,e){return qm(n.databaseId,e)}function P4(n){const e=IC(n);return e.length===4?Lt.emptyPath():TC(e)}function xg(n){return new Lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function TC(n){return It(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function mw(n,e,t){return{name:Rg(n,e),fields:t.value.mapValue.fields}}function R4(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:je(39313,{state:c})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=(function(c,d){return c.useProto3Json?(It(d===void 0||typeof d=="string",58123),Gn.fromBase64String(d||"")):(It(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Gn.fromUint8Array(d||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(c){const d=c.code===void 0?oe.UNKNOWN:wC(c.code);return new Ee(d,c.message||"")})(o);t=new EC(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=vp(n,s.document.name),i=Er(s.document.updateTime),o=s.document.createTime?Er(s.document.createTime):Je.min(),a=new Es({mapValue:{fields:s.document.fields}}),l=Yn.newFoundDocument(r,i,o,a),c=s.targetIds||[],d=s.removedTargetIds||[];t=new Rd(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=vp(n,s.document),i=s.readTime?Er(s.readTime):Je.min(),o=Yn.newNoDocument(r,i),a=s.removedTargetIds||[];t=new Rd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=vp(n,s.document),i=s.removedTargetIds||[];t=new Rd([],i,r,null)}else{if(!("filter"in e))return je(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new y4(r,i),a=s.targetId;t=new _C(a,o)}}return t}function x4(n,e){let t;if(e instanceof Pu)t={update:mw(n,e.key,e.value)};else if(e instanceof AC)t={delete:Rg(n,e.key)};else if(e instanceof ro)t={update:mw(n,e.key,e.data),updateMask:U4(e.fieldMask)};else{if(!(e instanceof g4))return je(16599,{Vt:e.type});t={verify:Rg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(i,o){const a=o.transform;if(a instanceof uh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof au)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof lu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof dh)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw je(20930,{transform:o.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(r,i){return i.updateTime!==void 0?{updateTime:S4(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:je(27497)})(n,e.precondition)),t}function k4(n,e){return n&&n.length>0?(It(e!==void 0,14353),n.map((t=>(function(r,i){let o=r.updateTime?Er(r.updateTime):Er(i);return o.isEqual(Je.min())&&(o=Er(i)),new h4(o,r.transformResults||[])})(t,e)))):[]}function N4(n,e){return{documents:[CC(n,e.path)]}}function D4(n,e){const t={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=CC(n,r);const i=(function(c){if(c.length!==0)return PC(sr.create(c,"and"))})(e.filters);i&&(t.structuredQuery.where=i);const o=(function(c){if(c.length!==0)return c.map((d=>(function(p){return{field:pa(p.field),direction:B4(p.dir)}})(d)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=Sg(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(c){return{before:c.inclusive,values:c.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(c){return{before:!c.inclusive,values:c.position}})(e.endAt)),{ft:t,parent:r}}function O4(n){let e=P4(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let r=null;if(s>0){It(s===1,65062);const d=t.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let i=[];t.where&&(i=(function(f){const p=SC(f);return p instanceof sr&&nC(p)?p.getFilters():[p]})(t.where));let o=[];t.orderBy&&(o=(function(f){return f.map((p=>(function(w){return new ch(ga(w.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(p)))})(t.orderBy));let a=null;t.limit&&(a=(function(f){let p;return p=typeof f=="object"?f.value:f,nf(p)?null:p})(t.limit));let l=null;t.startAt&&(l=(function(f){const p=!!f.before,m=f.values||[];return new lh(m,p)})(t.startAt));let c=null;return t.endAt&&(c=(function(f){const p=!f.before,m=f.values||[];return new lh(m,p)})(t.endAt)),ZF(e,r,o,i,a,"F",l,c)}function L4(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function SC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=ga(t.unaryFilter.field);return vn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=ga(t.unaryFilter.field);return vn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ga(t.unaryFilter.field);return vn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ga(t.unaryFilter.field);return vn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return je(61313);default:return je(60726)}})(n):n.fieldFilter!==void 0?(function(t){return vn.create(ga(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return je(58110);default:return je(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return sr.create(t.compositeFilter.filters.map((s=>SC(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return je(1026)}})(t.compositeFilter.op))})(n):je(30097,{filter:n})}function B4(n){return b4[n]}function M4(n){return I4[n]}function F4(n){return C4[n]}function pa(n){return{fieldPath:n.canonicalString()}}function ga(n){return Hn.fromServerFormat(n.fieldPath)}function PC(n){return n instanceof vn?(function(t){if(t.op==="=="){if(sw(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NAN"}};if(nw(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(sw(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NAN"}};if(nw(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pa(t.field),op:M4(t.op),value:t.value}}})(n):n instanceof sr?(function(t){const s=t.getFilters().map((r=>PC(r)));return s.length===1?s[0]:{compositeFilter:{op:F4(t.op),filters:s}}})(n):je(54877,{filter:n})}function U4(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function RC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,t,s,r,i=Je.min(),o=Je.min(),a=Gn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e){this.yt=e}}function $4(n){const e=O4({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Tg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(){this.Cn=new G4}addToCollectionParentIndex(e,t){return this.Cn.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(qi.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(qi.min())}updateCollectionGroup(e,t,s){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class G4{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t]||new Tn(Lt.comparator),i=!r.has(s);return this.index[t]=r.add(s),i}has(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Tn(Lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xC=41943040;class As{static withCacheSize(e){return new As(e,As.DEFAULT_COLLECTION_PERCENTILE,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */As.DEFAULT_COLLECTION_PERCENTILE=10,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,As.DEFAULT=new As(xC,As.DEFAULT_COLLECTION_PERCENTILE,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),As.DISABLED=new As(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Xa(0)}static cr(){return new Xa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="LruGarbageCollector",Q4=1048576;function Aw([n,e],[t,s]){const r=ct(n,t);return r===0?ct(e,s):r}class j4{constructor(e){this.Ir=e,this.buffer=new Tn(Aw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Aw(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class z4{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ie(yw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){cl(t)?Ie(yw,"Ignoring IndexedDB error during garbage collection: ",t):await ll(t)}await this.Vr(3e5)}))}}class W4{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return le.resolve(tf.ce);const s=new j4(t);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(vw)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,r,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,o=Date.now(),this.nthSequenceNumber(e,r)))).next((f=>(s=f,a=Date.now(),this.removeTargets(e,s,t)))).next((f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,s)))).next((f=>(c=Date.now(),ha()<=lt.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:f}))))}}function K4(n,e){return new W4(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(){this.changes=new Xo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?le.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e,t,s,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(s!==null&&Lc(s.mutation,r,Ds.empty(),Ft.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,ut()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=ut()){const r=xo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,s).next((i=>{let o=gc();return i.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const s=xo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,ut())))}populateOverlays(e,t,s){const r=[];return s.forEach((i=>{t.has(i)||r.push(i)})),this.documentOverlayCache.getOverlays(e,r).next((i=>{i.forEach(((o,a)=>{t.set(o,a)}))}))}computeViews(e,t,s,r){let i=ci();const o=Oc(),a=(function(){return Oc()})();return t.forEach(((l,c)=>{const d=s.get(c.key);r.has(c.key)&&(d===void 0||d.mutation instanceof ro)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Lc(d.mutation,c,d.mutation.getFieldMask(),Ft.now())):o.set(c.key,Ds.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((c,d)=>o.set(c,d))),t.forEach(((c,d)=>a.set(c,new J4(d,o.get(c)??null)))),a)))}recalculateAndSaveOverlays(e,t){const s=Oc();let r=new Kt(((o,a)=>o-a)),i=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const a of o)a.keys().forEach((l=>{const c=t.get(l);if(c===null)return;let d=s.get(l)||Ds.empty();d=a.applyToLocalView(c,d),s.set(l,d);const f=(r.get(a.batchId)||ut()).add(l);r=r.insert(a.batchId,f)}))})).next((()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,f=dC();d.forEach((p=>{if(!i.has(p)){const m=vC(t.get(p),s.get(p));m!==null&&f.set(p,m),i=i.add(p)}})),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return le.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,r){return(function(o){return Fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):oC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,r):this.getDocumentsMatchingCollectionQuery(e,t,s,r)}getNextDocuments(e,t,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,r-i.size):le.resolve(xo());let a=su,l=i;return o.next((c=>le.forEach(c,((d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(d)?le.resolve():this.remoteDocumentCache.getEntry(e,d).next((p=>{l=l.insert(d,p)}))))).next((()=>this.populateOverlays(e,c,i))).next((()=>this.computeViews(e,l,c,ut()))).next((d=>({batchId:a,changes:uC(d)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Fe(t)).next((s=>{let r=gc();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,r){const i=t.collectionGroup;let o=gc();return this.indexManager.getCollectionParents(e,i).next((a=>le.forEach(a,(l=>{const c=(function(f,p){return new Su(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(t,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,s,r).next((d=>{d.forEach(((f,p)=>{o=o.insert(f,p)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,i,r)))).next((o=>{i.forEach(((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Yn.newInvalidDocument(d)))}));let a=gc();return o.forEach(((l,c)=>{const d=i.get(l);d!==void 0&&Lc(d.mutation,c,Ds.empty(),Ft.now()),of(t,c)&&(a=a.insert(l,c))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return le.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Er(r.createTime)}})(t)),le.resolve()}getNamedQuery(e,t){return le.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:$4(r.bundledQuery),readTime:Er(r.readTime)}})(t)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(){this.overlays=new Kt(Fe.comparator),this.qr=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const s=xo();return le.forEach(t,(r=>this.getOverlay(e,r).next((i=>{i!==null&&s.set(r,i)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((r,i)=>{this.St(e,t,i)})),le.resolve()}removeOverlaysForBatchId(e,t,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(s)),le.resolve()}getOverlaysForCollection(e,t,s){const r=xo(),i=t.length+1,o=new Fe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return le.resolve(r)}getOverlaysForCollectionGroup(e,t,s,r){let i=new Kt(((c,d)=>c-d));const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>s){let d=i.get(c.largestBatchId);d===null&&(d=xo(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=xo(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((c,d)=>a.set(c,d))),!(a.size()>=r)););return le.resolve(a)}St(e,t,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new v4(t,s));let i=this.qr.get(t);i===void 0&&(i=ut(),this.qr.set(t,i)),this.qr.set(t,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(){this.sessionToken=Gn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(){this.Qr=new Tn(kn.$r),this.Ur=new Tn(kn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new kn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new kn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Fe(new Lt([])),s=new kn(t,e),r=new kn(t,e+1),i=[];return this.Ur.forEachInRange([s,r],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Fe(new Lt([])),s=new kn(t,e),r=new kn(t,e+1);let i=ut();return this.Ur.forEachInRange([s,r],(o=>{i=i.add(o.key)})),i}containsKey(e){const t=new kn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class kn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Fe.comparator(e.key,t.key)||ct(e.Yr,t.Yr)}static Kr(e,t){return ct(e.Yr,t.Yr)||Fe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Tn(kn.$r)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new m4(i,t,s,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new kn(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return le.resolve(o)}lookupMutationBatch(e,t){return le.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,r=this.ei(s),i=r<0?0:r;return le.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?Vm:this.tr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new kn(t,0),r=new kn(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],(o=>{const a=this.Xr(o.Yr);i.push(a)})),le.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Tn(ct);return t.forEach((r=>{const i=new kn(r,0),o=new kn(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(a=>{s=s.add(a.Yr)}))})),le.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,r=s.length+1;let i=s;Fe.isDocumentKey(i)||(i=i.child(""));const o=new kn(new Fe(i),0);let a=new Tn(ct);return this.Zr.forEachWhile((l=>{const c=l.key.path;return!!s.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.Yr)),!0)}),o),le.resolve(this.ti(a))}ti(e){const t=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){It(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return le.forEach(t.mutations,(r=>{const i=new kn(r.key,t.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new kn(t,0),r=this.Zr.firstAfterOrEqual(s);return le.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e){this.ri=e,this.docs=(function(){return new Kt(Fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return le.resolve(s?s.document.mutableCopy():Yn.newInvalidDocument(t))}getEntries(e,t){let s=ci();return t.forEach((r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Yn.newInvalidDocument(r))})),le.resolve(s)}getDocumentsMatchingQuery(e,t,s,r){let i=ci();const o=t.path,a=new Fe(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||kF(xF(d),s)<=0||(r.has(d.key)||of(t,d))&&(i=i.insert(d.key,d.mutableCopy()))}return le.resolve(i)}getAllFromCollectionGroup(e,t,s,r){je(9500)}ii(e,t){return le.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new sU(this)}getSize(e){return le.resolve(this.size)}}class sU extends q4{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),le.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e){this.persistence=e,this.si=new Xo((t=>Gm(t)),Qm),this.lastRemoteSnapshotVersion=Je.min(),this.highestTargetId=0,this.oi=0,this._i=new Jm,this.targetCount=0,this.ai=Xa.ur()}forEachTarget(e,t){return this.si.forEach(((s,r)=>t(r))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),le.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Xa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Pr(t),le.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,s){let r=0;const i=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=t&&s.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),le.waitFor(i).next((()=>r))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return le.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),le.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((o=>{i.push(r.markPotentiallyOrphaned(e,o))})),le.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),le.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return le.resolve(s)}containsKey(e,t){return le.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,t){this.ui={},this.overlays={},this.ci=new tf(0),this.li=!1,this.li=!0,this.hi=new eU,this.referenceDelegate=e(this),this.Pi=new rU(this),this.indexManager=new H4,this.remoteDocumentCache=(function(r){return new nU(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new V4(t),this.Ii=new X4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Z4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new tU(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){Ie("MemoryPersistence","Starting transaction:",e);const r=new iU(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((i=>this.referenceDelegate.di(r).next((()=>i)))).toPromise().then((i=>(r.raiseOnCommittedEvent(),i)))}Ai(e,t){return le.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class iU extends DF{constructor(e){super(),this.currentSequenceNumber=e}}class Ym{constructor(e){this.persistence=e,this.Ri=new Jm,this.Vi=null}static mi(e){return new Ym(e)}get fi(){if(this.Vi)return this.Vi;throw je(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),le.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),le.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((i=>this.fi.add(i.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.fi,(s=>{const r=Fe.fromPath(s);return this.gi(e,r).next((i=>{i||t.removeEntry(r,Je.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return le.or([()=>le.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class fh{constructor(e,t){this.persistence=e,this.pi=new Xo((s=>BF(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=K4(this,t)}static mi(e,t){return new fh(e,t)}Ei(){}di(e){return le.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((r=>s+r))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return le.forEach(this.pi,((s,r)=>this.br(e,s,r).next((i=>i?le.resolve():t(r)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(o=>this.br(e,o,t).next((a=>{a||(s++,i.removeEntry(o,Je.min()))})))).next((()=>i.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),le.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),le.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),le.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Td(e.data.value)),t}br(e,t,s){return le.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return le.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,t,s,r){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=r}static As(e,t){let s=ut(),r=ut();for(const i of t.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Xm(e,t.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return XO()?8:OF(es())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,r){const i={result:null};return this.ys(e,t).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,t,r,s).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new oU;return this.Ss(e,t,o).next((a=>{if(i.result=a,this.Vs)return this.bs(e,t,o,a.size)}))})).next((()=>i.result))}bs(e,t,s,r){return s.documentReadCount<this.fs?(ha()<=lt.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",fa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),le.resolve()):(ha()<=lt.DEBUG&&Ie("QueryEngine","Query:",fa(t),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(ha()<=lt.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",fa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wr(t))):le.resolve())}ys(e,t){if(aw(t))return le.resolve(null);let s=wr(t);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=Tg(t,null,"F"),s=wr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((i=>{const o=ut(...i);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,s).next((l=>{const c=this.Ds(t,a);return this.Cs(t,c,o,l.readTime)?this.ys(e,Tg(t,null,"F")):this.vs(e,c,t,l)}))))})))))}ws(e,t,s,r){return aw(t)||r.isEqual(Je.min())?le.resolve(null):this.ps.getDocuments(e,s).next((i=>{const o=this.Ds(t,i);return this.Cs(t,o,s,r)?le.resolve(null):(ha()<=lt.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fa(t)),this.vs(e,o,t,RF(r,su)).next((a=>a)))}))}Ds(e,t){let s=new Tn(lC(e));return t.forEach(((r,i)=>{of(e,i)&&(s=s.add(i))})),s}Cs(e,t,s,r){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,s){return ha()<=lt.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",fa(t)),this.ps.getDocumentsMatchingQuery(e,t,qi.min(),s)}vs(e,t,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((i=>(t.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="LocalStore",lU=3e8;class cU{constructor(e,t,s,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Kt(ct),this.xs=new Xo((i=>Gm(i)),Qm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Y4(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function uU(n,e,t,s){return new cU(n,e,t,s)}async function NC(n,e){const t=Xe(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return t.mutationQueue.getAllMutationBatches(s).next((i=>(r=i,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((i=>{const o=[],a=[];let l=ut();for(const c of r){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return t.localDocuments.getDocuments(s,l).next((c=>({Ls:c,removedBatchIds:o,addedBatchIds:a})))}))}))}function dU(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),i=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,c,d){const f=c.batch,p=f.keys();let m=le.resolve();return p.forEach((w=>{m=m.next((()=>d.getEntry(l,w))).next((y=>{const A=c.docVersions.get(w);It(A!==null,48541),y.version.compareTo(A)<0&&(f.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),d.addEntry(y)))}))})),m.next((()=>a.mutationQueue.removeMutationBatch(l,f)))})(t,s,e,i).next((()=>i.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(a){let l=ut();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l})(e)))).next((()=>t.localDocuments.getDocuments(s,r)))}))}function DC(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function hU(n,e){const t=Xe(n),s=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const a=[];e.targetChanges.forEach(((d,f)=>{const p=r.get(f);if(!p)return;a.push(t.Pi.removeMatchingKeys(i,d.removedDocuments,f).next((()=>t.Pi.addMatchingKeys(i,d.addedDocuments,f))));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Gn.EMPTY_BYTE_STRING,Je.min()).withLastLimboFreeSnapshotVersion(Je.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,s)),r=r.insert(f,m),(function(y,A,_){return y.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=lU?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0})(p,m,d)&&a.push(t.Pi.updateTargetData(i,m))}));let l=ci(),c=ut();if(e.documentUpdates.forEach((d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(i,d))})),a.push(fU(i,o,e.documentUpdates).next((d=>{l=d.ks,c=d.qs}))),!s.isEqual(Je.min())){const d=t.Pi.getLastRemoteSnapshotVersion(i).next((f=>t.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s)));a.push(d)}return le.waitFor(a).next((()=>o.apply(i))).next((()=>t.localDocuments.getLocalViewOfDocuments(i,l,c))).next((()=>l))})).then((i=>(t.Ms=r,i)))}function fU(n,e,t){let s=ut(),r=ut();return t.forEach((i=>s=s.add(i))),e.getEntries(n,s).next((i=>{let o=ci();return t.forEach(((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Je.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ie(Zm,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)})),{ks:o,qs:r}}))}function pU(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Vm),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function gU(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return t.Pi.getTargetData(s,e).next((i=>i?(r=i,le.resolve(r)):t.Pi.allocateTargetId(s).next((o=>(r=new Di(e,o,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=t.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function kg(n,e,t){const s=Xe(n),r=s.Ms.get(e),i=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",i,(o=>s.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!cl(o))throw o;Ie(Zm,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function ww(n,e,t){const s=Xe(n);let r=Je.min(),i=ut();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,c,d){const f=Xe(l),p=f.xs.get(d);return p!==void 0?le.resolve(f.Ms.get(p)):f.Pi.getTargetData(c,d)})(s,o,wr(e)).next((a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{i=l}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,e,t?r:Je.min(),t?i:ut()))).next((a=>(mU(s,t4(e),a),{documents:a,Qs:i})))))}function mU(n,e,t){let s=n.Os.get(e)||Je.min();t.forEach(((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)})),n.Os.set(e,s)}class _w{constructor(){this.activeTargetIds=a4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vU{constructor(){this.Mo=new _w,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new _w,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="ConnectivityMonitor";class bw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ie(Ew,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ie(Ew,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld=null;function Ng(){return ld===null?ld=(function(){return 268435456+Math.round(2147483648*Math.random())})():ld++,"0x"+ld.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="RestConnection",AU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wU{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===oh?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,t,s,r,i){const o=Ng(),a=this.zo(e,t.toUriEncodedString());Ie(yp,`Sending RPC '${e}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,i);const{host:c}=new URL(a),d=rl(c);return this.Jo(e,a,l,s,d).then((f=>(Ie(yp,`Received RPC '${e}' ${o}: `,f),f)),(f=>{throw Ka(yp,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",s),f}))}Ho(e,t,s,r,i,o){return this.Go(e,t,s,r,i)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+al})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,i)=>e[i]=r)),s&&s.headers.forEach(((r,i)=>e[i]=r))}zo(e,t){const s=AU[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn="WebChannelConnection";class EU extends wU{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,r,i){const o=Ng();return new Promise(((a,l)=>{const c=new LI;c.setWithCredentials(!0),c.listenOnce(BI.COMPLETE,(()=>{try{switch(c.getLastErrorCode()){case Cd.NO_ERROR:const f=c.getResponseJson();Ie(Kn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Cd.TIMEOUT:Ie(Kn,`RPC '${e}' ${o} timed out`),l(new Ee(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Cd.HTTP_ERROR:const p=c.getStatus();if(Ie(Kn,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const w=m?.error;if(w&&w.status&&w.message){const y=(function(_){const C=_.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(C)>=0?C:oe.UNKNOWN})(w.status);l(new Ee(y,w.message))}else l(new Ee(oe.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Ee(oe.UNAVAILABLE,"Connection failed."));break;default:je(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Ie(Kn,`RPC '${e}' ${o} completed.`)}}));const d=JSON.stringify(r);Ie(Kn,`RPC '${e}' ${o} sending request:`,r),c.send(t,"POST",d,s,15)}))}T_(e,t,s){const r=Ng(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=UI(),a=FI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,s),l.encodeInitMessageHeaders=!0;const d=i.join("");Ie(Kn,`Creating RPC '${e}' stream ${r}: ${d}`,l);const f=o.createWebChannel(d,l);this.I_(f);let p=!1,m=!1;const w=new _U({Yo:A=>{m?Ie(Kn,`Not sending because RPC '${e}' stream ${r} is closed:`,A):(p||(Ie(Kn,`Opening RPC '${e}' stream ${r} transport.`),f.open(),p=!0),Ie(Kn,`RPC '${e}' stream ${r} sending:`,A),f.send(A))},Zo:()=>f.close()}),y=(A,_,C)=>{A.listen(_,(S=>{try{C(S)}catch(B){setTimeout((()=>{throw B}),0)}}))};return y(f,pc.EventType.OPEN,(()=>{m||(Ie(Kn,`RPC '${e}' stream ${r} transport opened.`),w.o_())})),y(f,pc.EventType.CLOSE,(()=>{m||(m=!0,Ie(Kn,`RPC '${e}' stream ${r} transport closed`),w.a_(),this.E_(f))})),y(f,pc.EventType.ERROR,(A=>{m||(m=!0,Ka(Kn,`RPC '${e}' stream ${r} transport errored. Name:`,A.name,"Message:",A.message),w.a_(new Ee(oe.UNAVAILABLE,"The operation could not be completed")))})),y(f,pc.EventType.MESSAGE,(A=>{if(!m){const _=A.data[0];It(!!_,16349);const C=_,S=C?.error||C[0]?.error;if(S){Ie(Kn,`RPC '${e}' stream ${r} received error:`,S);const B=S.status;let V=(function(I){const P=gn[I];if(P!==void 0)return wC(P)})(B),j=S.message;V===void 0&&(V=oe.INTERNAL,j="Unknown error status: "+B+" with message "+S.message),m=!0,w.a_(new Ee(V,j)),f.close()}else Ie(Kn,`RPC '${e}' stream ${r} received:`,_),w.u_(_)}})),y(a,MI.STAT_EVENT,(A=>{A.stat===Ag.PROXY?Ie(Kn,`RPC '${e}' stream ${r} detected buffering proxy`):A.stat===Ag.NOPROXY&&Ie(Kn,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{w.__()}),0),w}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Ap(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(n){return new T4(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,t,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-s);r>0&&Ie("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="PersistentStream";class LC{constructor(e,t,s,r,i,o,a,l){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new OC(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(ai(t.toString()),ai("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===t&&this.G_(s,r)}),(s=>{e((()=>{const r=new Ee(oe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ie(Iw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ie(Iw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bU extends LC{constructor(e,t,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,r,o),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=R4(this.serializer,e),s=(function(i){if(!("targetChange"in i))return Je.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Je.min():o.readTime?Er(o.readTime):Je.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=xg(this.serializer),t.addTarget=(function(i,o){let a;const l=o.target;if(a=Ig(l)?{documents:N4(i,l)}:{query:D4(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=bC(i,o.resumeToken);const c=Sg(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Je.min())>0){a.readTime=hh(i,o.snapshotVersion.toTimestamp());const c=Sg(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a})(this.serializer,e);const s=L4(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=xg(this.serializer),t.removeTarget=e,this.q_(t)}}class IU extends LC{constructor(e,t,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return It(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,It(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){It(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=k4(e.writeResults,e.commitTime),s=Er(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=xg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>x4(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{}class TU extends CU{constructor(e,t,s,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Ee(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,Pg(t,s),r,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ee(oe.UNKNOWN,i.toString())}))}Ho(e,t,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,Pg(t,s),r,o,a,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ee(oe.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class SU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ai(t),this.aa=!1):Ie("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo="RemoteStore";class PU{constructor(e,t,s,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{Zo(this)&&(Ie(jo,"Restarting streams for network reachability change."),await(async function(l){const c=Xe(l);c.Ea.add(4),await xu(c),c.Ra.set("Unknown"),c.Ea.delete(4),await df(c)})(this))}))})),this.Ra=new SU(s,r)}}async function df(n){if(Zo(n))for(const e of n.da)await e(!0)}async function xu(n){for(const e of n.da)await e(!1)}function BC(n,e){const t=Xe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),sv(t)?nv(t):ul(t).O_()&&tv(t,e))}function ev(n,e){const t=Xe(n),s=ul(t);t.Ia.delete(e),s.O_()&&MC(t,e),t.Ia.size===0&&(s.O_()?s.L_():Zo(t)&&t.Ra.set("Unknown"))}function tv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Je.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ul(n).Y_(e)}function MC(n,e){n.Va.Ue(e),ul(n).Z_(e)}function nv(n){n.Va=new E4({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ul(n).start(),n.Ra.ua()}function sv(n){return Zo(n)&&!ul(n).x_()&&n.Ia.size>0}function Zo(n){return Xe(n).Ea.size===0}function FC(n){n.Va=void 0}async function RU(n){n.Ra.set("Online")}async function xU(n){n.Ia.forEach(((e,t)=>{tv(n,e)}))}async function kU(n,e){FC(n),sv(n)?(n.Ra.ha(e),nv(n)):n.Ra.set("Unknown")}async function NU(n,e,t){if(n.Ra.set("Online"),e instanceof EC&&e.state===2&&e.cause)try{await(async function(r,i){const o=i.cause;for(const a of i.targetIds)r.Ia.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ia.delete(a),r.Va.removeTarget(a))})(n,e)}catch(s){Ie(jo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await ph(n,s)}else if(e instanceof Rd?n.Va.Ze(e):e instanceof _C?n.Va.st(e):n.Va.tt(e),!t.isEqual(Je.min()))try{const s=await DC(n.localStore);t.compareTo(s)>=0&&await(function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach(((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(Gn.EMPTY_BYTE_STRING,d.snapshotVersion)),MC(i,l);const f=new Di(d.target,l,c,d.sequenceNumber);tv(i,f)})),i.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(s){Ie(jo,"Failed to raise snapshot:",s),await ph(n,s)}}async function ph(n,e,t){if(!cl(e))throw e;n.Ea.add(1),await xu(n),n.Ra.set("Offline"),t||(t=()=>DC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ie(jo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await df(n)}))}function UC(n,e){return e().catch((t=>ph(n,t,e)))}async function hf(n){const e=Xe(n),t=Zi(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Vm;for(;DU(e);)try{const r=await pU(e.localStore,s);if(r===null){e.Ta.length===0&&t.L_();break}s=r.batchId,OU(e,r)}catch(r){await ph(e,r)}VC(e)&&$C(e)}function DU(n){return Zo(n)&&n.Ta.length<10}function OU(n,e){n.Ta.push(e);const t=Zi(n);t.O_()&&t.X_&&t.ea(e.mutations)}function VC(n){return Zo(n)&&!Zi(n).x_()&&n.Ta.length>0}function $C(n){Zi(n).start()}async function LU(n){Zi(n).ra()}async function BU(n){const e=Zi(n);for(const t of n.Ta)e.ea(t.mutations)}async function MU(n,e,t){const s=n.Ta.shift(),r=Wm.from(s,e,t);await UC(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await hf(n)}async function FU(n,e){e&&Zi(n).X_&&await(async function(s,r){if((function(o){return A4(o)&&o!==oe.ABORTED})(r.code)){const i=s.Ta.shift();Zi(s).B_(),await UC(s,(()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r))),await hf(s)}})(n,e),VC(n)&&$C(n)}async function Cw(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),Ie(jo,"RemoteStore received new credentials");const s=Zo(t);t.Ea.add(3),await xu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await df(t)}async function UU(n,e){const t=Xe(n);e?(t.Ea.delete(2),await df(t)):e||(t.Ea.add(2),await xu(t),t.Ra.set("Unknown"))}function ul(n){return n.ma||(n.ma=(function(t,s,r){const i=Xe(t);return i.sa(),new bU(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(n.datastore,n.asyncQueue,{Xo:RU.bind(null,n),t_:xU.bind(null,n),r_:kU.bind(null,n),H_:NU.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),sv(n)?nv(n):n.Ra.set("Unknown")):(await n.ma.stop(),FC(n))}))),n.ma}function Zi(n){return n.fa||(n.fa=(function(t,s,r){const i=Xe(t);return i.sa(),new IU(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:LU.bind(null,n),r_:FU.bind(null,n),ta:BU.bind(null,n),na:MU.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await hf(n)):(await n.fa.stop(),n.Ta.length>0&&(Ie(jo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,t,s,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,r,i){const o=Date.now()+s,a=new rv(e,t,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function iv(n,e){if(ai("AsyncQueue",`${e}: ${n}`),cl(n))return new Ee(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{static emptySet(e){return new Da(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Fe.comparator(t.key,s.key):(t,s)=>Fe.comparator(t.key,s.key),this.keyedMap=gc(),this.sortedSet=new Kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Da)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Da;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(){this.ga=new Kt(Fe.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):je(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Za{constructor(e,t,s,r,i,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,s,r,i){const o=[];return t.forEach((a=>{o.push({type:0,doc:a})})),new Za(e,t,Da.emptySet(t),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==s[r].type||!t[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class $U{constructor(){this.queries=Sw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const r=Xe(t),i=r.queries;r.queries=Sw(),i.forEach(((o,a)=>{for(const l of a.Sa)l.onError(s)}))})(this,new Ee(oe.ABORTED,"Firestore shutting down"))}}function Sw(){return new Xo((n=>aC(n)),rf)}async function HC(n,e){const t=Xe(n);let s=3;const r=e.query;let i=t.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new VU,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await t.onListen(r,!0);break;case 1:i.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){const a=iv(o,`Initialization of query '${fa(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,i),i.Sa.push(e),e.va(t.onlineState),i.wa&&e.Fa(i.wa)&&ov(t)}async function GC(n,e){const t=Xe(n),s=e.query;let r=3;const i=t.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function HU(n,e){const t=Xe(n);let s=!1;for(const r of e){const i=r.query,o=t.queries.get(i);if(o){for(const a of o.Sa)a.Fa(r)&&(s=!0);o.wa=r}}s&&ov(t)}function GU(n,e,t){const s=Xe(n),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(t);s.queries.delete(e)}function ov(n){n.Ca.forEach((e=>{e.next()}))}var Dg,Pw;(Pw=Dg||(Dg={})).Ma="default",Pw.Cache="cache";class QC{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Za(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Za.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Dg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.key=e}}class zC{constructor(e){this.key=e}}class QU{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ut(),this.mutatedKeys=ut(),this.eu=lC(e),this.tu=new Da(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new Tw,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((d,f)=>{const p=r.get(d),m=of(this.query,f)?f:null,w=!!p&&this.mutatedKeys.has(p.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let A=!1;p&&m?p.data.isEqual(m.data)?w!==y&&(s.track({type:3,doc:m}),A=!0):this.su(p,m)||(s.track({type:2,doc:m}),A=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(a=!0)):!p&&m?(s.track({type:0,doc:m}),A=!0):p&&!m&&(s.track({type:1,doc:p}),A=!0,(l||c)&&(a=!0)),A&&(m?(o=o.add(m),i=y?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),s.track({type:1,doc:d})}return{tu:o,iu:s,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((d,f)=>(function(m,w){const y=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je(20277,{Rt:A})}};return y(m)-y(w)})(d.type,f.type)||this.eu(d.doc,f.doc))),this.ou(s),r=r??!1;const a=t&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Za(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Tw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ut(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new zC(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new jC(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=ut();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Za.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const av="SyncEngine";class jU{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class zU{constructor(e){this.key=e,this.hu=!1}}class WU{constructor(e,t,s,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Xo((a=>aC(a)),rf),this.Iu=new Map,this.Eu=new Set,this.du=new Kt(Fe.comparator),this.Au=new Map,this.Ru=new Jm,this.Vu={},this.mu=new Map,this.fu=Xa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function KU(n,e,t=!0){const s=XC(n);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await WC(s,e,t,!0),r}async function qU(n,e){const t=XC(n);await WC(t,e,!0,!1)}async function WC(n,e,t,s){const r=await gU(n.localStore,wr(e)),i=r.targetId,o=n.sharedClientState.addLocalQueryTarget(i,t);let a;return s&&(a=await JU(n,e,i,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&BC(n.remoteStore,r),a}async function JU(n,e,t,s,r){n.pu=(f,p,m)=>(async function(y,A,_,C){let S=A.view.ru(_);S.Cs&&(S=await ww(y.localStore,A.query,!1).then((({documents:x})=>A.view.ru(x,S))));const B=C&&C.targetChanges.get(A.targetId),V=C&&C.targetMismatches.get(A.targetId)!=null,j=A.view.applyChanges(S,y.isPrimaryClient,B,V);return xw(y,A.targetId,j.au),j.snapshot})(n,f,p,m);const i=await ww(n.localStore,e,!0),o=new QU(e,i.Qs),a=o.ru(i.documents),l=Ru.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",r),c=o.applyChanges(a,n.isPrimaryClient,l);xw(n,t,c.au);const d=new jU(e,t,o);return n.Tu.set(e,d),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),c.snapshot}async function YU(n,e,t){const s=Xe(n),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter((o=>!rf(o,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await kg(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),t&&ev(s.remoteStore,r.targetId),Og(s,r.targetId)})).catch(ll)):(Og(s,r.targetId),await kg(s.localStore,r.targetId,!0))}async function XU(n,e){const t=Xe(n),s=t.Tu.get(e),r=t.Iu.get(s.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),ev(t.remoteStore,s.targetId))}async function ZU(n,e,t){const s=o3(n);try{const r=await(function(o,a){const l=Xe(o),c=Ft.now(),d=a.reduce(((m,w)=>m.add(w.key)),ut());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",(m=>{let w=ci(),y=ut();return l.Ns.getEntries(m,d).next((A=>{w=A,w.forEach(((_,C)=>{C.isValidDocument()||(y=y.add(_))}))})).next((()=>l.localDocuments.getOverlayedDocuments(m,w))).next((A=>{f=A;const _=[];for(const C of a){const S=p4(C,f.get(C.key).overlayedDocument);S!=null&&_.push(new ro(C.key,S,ZI(S.value.mapValue),_r.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,_,a)})).next((A=>{p=A;const _=A.applyToLocalDocumentSet(f,y);return l.documentOverlayCache.saveOverlays(m,A.batchId,_)}))})).then((()=>({batchId:p.batchId,changes:uC(f)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Kt(ct)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c})(s,r.batchId,t),await ku(s,r.changes),await hf(s.remoteStore)}catch(r){const i=iv(r,"Failed to persist write");t.reject(i)}}async function KC(n,e){const t=Xe(n);try{const s=await hU(t.localStore,e);e.targetChanges.forEach(((r,i)=>{const o=t.Au.get(i);o&&(It(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?It(o.hu,14607):r.removedDocuments.size>0&&(It(o.hu,42227),o.hu=!1))})),await ku(t,s,e)}catch(s){await ll(s)}}function Rw(n,e,t){const s=Xe(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const r=[];s.Tu.forEach(((i,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)})),(function(o,a){const l=Xe(o);l.onlineState=a;let c=!1;l.queries.forEach(((d,f)=>{for(const p of f.Sa)p.va(a)&&(c=!0)})),c&&ov(l)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function e3(n,e,t){const s=Xe(n);s.sharedClientState.updateQueryState(e,"rejected",t);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Kt(Fe.comparator);o=o.insert(i,Yn.newNoDocument(i,Je.min()));const a=ut().add(i),l=new cf(Je.min(),new Map,new Kt(ct),o,a);await KC(s,l),s.du=s.du.remove(i),s.Au.delete(e),lv(s)}else await kg(s.localStore,e,!1).then((()=>Og(s,e,t))).catch(ll)}async function t3(n,e){const t=Xe(n),s=e.batch.batchId;try{const r=await dU(t.localStore,e);JC(t,s,null),qC(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await ku(t,r)}catch(r){await ll(r)}}async function n3(n,e,t){const s=Xe(n);try{const r=await(function(o,a){const l=Xe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next((f=>(It(f!==null,37113),d=f.keys(),l.mutationQueue.removeMutationBatch(c,f)))).next((()=>l.mutationQueue.performConsistencyCheck(c))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d))).next((()=>l.localDocuments.getDocuments(c,d)))}))})(s.localStore,e);JC(s,e,t),qC(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await ku(s,r)}catch(r){await ll(r)}}function qC(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function JC(n,e,t){const s=Xe(n);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(t?i.reject(t):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Og(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||YC(n,s)}))}function YC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(ev(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),lv(n))}function xw(n,e,t){for(const s of t)s instanceof jC?(n.Ru.addReference(s.key,e),s3(n,s)):s instanceof zC?(Ie(av,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||YC(n,s.key)):je(19791,{wu:s})}function s3(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(Ie(av,"New document in limbo: "+t),n.Eu.add(s),lv(n))}function lv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Fe(Lt.fromString(e)),s=n.fu.next();n.Au.set(s,new zU(t)),n.du=n.du.insert(t,s),BC(n.remoteStore,new Di(wr(jm(t.path)),s,"TargetPurposeLimboResolution",tf.ce))}}async function ku(n,e,t){const s=Xe(n),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((a,l)=>{o.push(s.pu(l,e,t).then((c=>{if((c||t)&&s.isPrimaryClient){const d=c?!c.fromCache:t?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=Xm.As(l.targetId,c);i.push(d)}})))})),await Promise.all(o),s.Pu.H_(r),await(async function(l,c){const d=Xe(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>le.forEach(c,(p=>le.forEach(p.Es,(m=>d.persistence.referenceDelegate.addReference(f,p.targetId,m))).next((()=>le.forEach(p.ds,(m=>d.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))))))}catch(f){if(!cl(f))throw f;Ie(Zm,"Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=d.Ms.get(p),w=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(w);d.Ms=d.Ms.insert(p,y)}}})(s.localStore,i))}async function r3(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){Ie(av,"User change. New user:",e.toKey());const s=await NC(t.localStore,e);t.currentUser=e,(function(i,o){i.mu.forEach((a=>{a.forEach((l=>{l.reject(new Ee(oe.CANCELLED,o))}))})),i.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ku(t,s.Ls)}}function i3(n,e){const t=Xe(n),s=t.Au.get(e);if(s&&s.hu)return ut().add(s.key);{let r=ut();const i=t.Iu.get(e);if(!i)return r;for(const o of i){const a=t.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function XC(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=KC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=i3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=e3.bind(null,e),e.Pu.H_=HU.bind(null,e.eventManager),e.Pu.yu=GU.bind(null,e.eventManager),e}function o3(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=t3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=n3.bind(null,e),e}class gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=uf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return uU(this.persistence,new aU,e.initialUser,this.serializer)}Cu(e){return new kC(Ym.mi,this.serializer)}Du(e){return new vU}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gh.provider={build:()=>new gh};class a3 extends gh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){It(this.persistence.referenceDelegate instanceof fh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new z4(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?As.withCacheSize(this.cacheSizeBytes):As.DEFAULT;return new kC((s=>fh.mi(s,t)),this.serializer)}}class Lg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Rw(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=r3.bind(null,this.syncEngine),await UU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new $U})()}createDatastore(e){const t=uf(e.databaseInfo.databaseId),s=(function(i){return new EU(i)})(e.databaseInfo);return(function(i,o,a,l){return new TU(i,o,a,l)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,r,i,o,a){return new PU(s,r,i,o,a)})(this.localStore,this.datastore,e.asyncQueue,(t=>Rw(this.syncEngine,t,0)),(function(){return bw.v()?new bw:new yU})())}createSyncEngine(e,t){return(function(r,i,o,a,l,c,d){const f=new WU(r,i,o,a,l,c);return d&&(f.gu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Xe(t);Ie(jo,"RemoteStore shutting down."),s.Ea.add(5),await xu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Lg.provider={build:()=>new Lg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ai("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo="FirestoreClient";class l3{constructor(e,t,s,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=r,this.user=qn.UNAUTHENTICATED,this.clientId=Um.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,(async o=>{Ie(eo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(Ie(eo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=iv(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function wp(n,e){n.asyncQueue.verifyOperationInProgress(),Ie(eo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async r=>{s.isEqual(r)||(await NC(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function kw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await c3(n);Ie(eo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>Cw(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,r)=>Cw(e.remoteStore,r))),n._onlineComponents=e}async function c3(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ie(eo,"Using user provided OfflineComponentProvider");try{await wp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===oe.FAILED_PRECONDITION||r.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Ka("Error using user provided cache. Falling back to memory cache: "+t),await wp(n,new gh)}}else Ie(eo,"Using default OfflineComponentProvider"),await wp(n,new a3(void 0));return n._offlineComponents}async function eT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ie(eo,"Using user provided OnlineComponentProvider"),await kw(n,n._uninitializedComponentsProvider._online)):(Ie(eo,"Using default OnlineComponentProvider"),await kw(n,new Lg))),n._onlineComponents}function u3(n){return eT(n).then((e=>e.syncEngine))}async function tT(n){const e=await eT(n),t=e.eventManager;return t.onListen=KU.bind(null,e.syncEngine),t.onUnlisten=YU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=qU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=XU.bind(null,e.syncEngine),t}function d3(n,e,t={}){const s=new Yr;return n.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,l,c){const d=new ZC({next:p=>{d.Nu(),o.enqueueAndForget((()=>GC(i,f)));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new Ee(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new Ee(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new QC(jm(a.path),d,{includeMetadataChanges:!0,qa:!0});return HC(i,f)})(await tT(n),n.asyncQueue,e,t,s))),s.promise}function h3(n,e,t={}){const s=new Yr;return n.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,l,c){const d=new ZC({next:p=>{d.Nu(),o.enqueueAndForget((()=>GC(i,f))),p.fromCache&&l.source==="server"?c.reject(new Ee(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new QC(a,d,{includeMetadataChanges:!0,qa:!0});return HC(i,f)})(await tT(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="firestore.googleapis.com",Dw=!0;class Ow{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sT,this.ssl=Dw}else this.host=e.host,this.ssl=e.ssl??Dw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Q4)throw new Ee(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ee(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ee(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ee(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ff{constructor(e,t,s,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ow({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ow(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new yF;switch(s.type){case"firstParty":return new EF(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ee(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Nw.get(t);s&&(Ie("ComponentProvider","Removing Datastore"),Nw.delete(t),s.terminate())})(this),Promise.resolve()}}function f3(n,e,t,s={}){n=li(n,ff);const r=rl(e),i=n._getSettings(),o={...i,emulatorOptions:n._getEmulatorOptions()},a=`${e}:${t}`;r&&(Qb(`https://${a}`),jb("Firestore",!0)),i.host!==sT&&i.host!==a&&Ka("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:r,emulatorOptions:s};if(!Ki(l,o)&&(n._setSettings(l),s.mockUserToken)){let c,d;if(typeof s.mockUserToken=="string")c=s.mockUserToken,d=qn.MOCK_USER;else{c=QO(s.mockUserToken,n._app?.options.projectId);const f=s.mockUserToken.sub||s.mockUserToken.user_id;if(!f)throw new Ee(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new qn(f)}n._authCredentials=new AF(new $I(c,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new dl(this.firestore,e,this._query)}}class hn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hn(this.firestore,e,this._key)}toJSON(){return{type:hn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Tu(t,hn._jsonSchema))return new hn(e,s||null,new Fe(Lt.fromString(t.referencePath)))}}hn._jsonSchemaVersion="firestore/documentReference/1.0",hn._jsonSchema={type:yn("string",hn._jsonSchemaVersion),referencePath:yn("string")};class Vi extends dl{constructor(e,t,s){super(e,t,jm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hn(this.firestore,null,new Fe(e))}withConverter(e){return new Vi(this.firestore,e,this._path)}}function p3(n,e,...t){if(n=An(n),HI("collection","path",e),n instanceof ff){const s=Lt.fromString(e,...t);return WA(s),new Vi(n,null,s)}{if(!(n instanceof hn||n instanceof Vi))throw new Ee(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Lt.fromString(e,...t));return WA(s),new Vi(n.firestore,null,s)}}function Bo(n,e,...t){if(n=An(n),arguments.length===1&&(e=Um.newId()),HI("doc","path",e),n instanceof ff){const s=Lt.fromString(e,...t);return zA(s),new hn(n,null,new Fe(s))}{if(!(n instanceof hn||n instanceof Vi))throw new Ee(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Lt.fromString(e,...t));return zA(s),new hn(n.firestore,n instanceof Vi?n.converter:null,new Fe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="AsyncQueue";class Bw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new OC(this,"async_queue_retry"),this._c=()=>{const s=Ap();s&&Ie(Lw,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Ap();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ap();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Yr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!cl(e))throw e;Ie(Lw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ai("INTERNAL UNHANDLED ERROR: ",Mw(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=rv.createAndSchedule(this,e,t,s,(i=>this.hc(i)));return this.tc.push(r),r}uc(){this.nc&&je(47125,{Pc:Mw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Mw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Nu extends ff{constructor(e,t,s,r){super(e,t,s,r),this.type="firestore",this._queue=new Bw,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Bw(e),this._firestoreClient=void 0,await e}}}function g3(n,e){const t=typeof n=="object"?n:eu(),s=typeof n=="string"?n:oh,r=Yo(t,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=HO("firestore");i&&f3(r,...i)}return r}function cv(n){if(n._terminated)throw new Ee(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||m3(n),n._firestoreClient}function m3(n){const e=n._freezeSettings(),t=(function(r,i,o,a){return new UF(r,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,nT(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new l3(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fs(Gn.fromBase64String(e))}catch(t){throw new Ee(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fs(Gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Tu(e,Fs._jsonSchema))return Fs.fromBase64String(e.bytes)}}Fs._jsonSchemaVersion="firestore/bytes/1.0",Fs._jsonSchema={type:yn("string",Fs._jsonSchemaVersion),bytes:yn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ee(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ee(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ee(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ct(this._lat,e._lat)||ct(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:br._jsonSchemaVersion}}static fromJSON(e){if(Tu(e,br._jsonSchema))return new br(e.latitude,e.longitude)}}br._jsonSchemaVersion="firestore/geoPoint/1.0",br._jsonSchema={type:yn("string",br._jsonSchemaVersion),latitude:yn("number"),longitude:yn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ir._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Tu(e,Ir._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ir(e.vectorValues);throw new Ee(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ir._jsonSchemaVersion="firestore/vectorValue/1.0",Ir._jsonSchema={type:yn("string",Ir._jsonSchemaVersion),vectorValues:yn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3=/^__.*__$/;class y3{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ro(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pu(e,this.data,t,this.fieldTransforms)}}class rT{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new ro(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function iT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je(40011,{Ac:n})}}class dv{constructor(e,t,s,r,i,o){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new dv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return mh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(iT(this.Ac)&&v3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class A3{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||uf(e)}Cc(e,t,s,r=!1){return new dv({Ac:e,methodName:t,Dc:s,path:Hn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hv(n){const e=n._freezeSettings(),t=uf(n._databaseId);return new A3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function w3(n,e,t,s,r,i={}){const o=n.Cc(i.merge||i.mergeFields?2:0,e,t,r);fv("Data must be an object, but it was:",o,s);const a=oT(s,o);let l,c;if(i.merge)l=new Ds(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const p=Bg(e,f,t);if(!o.contains(p))throw new Ee(oe.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);lT(d,p)||d.push(p)}l=new Ds(d),c=o.fieldTransforms.filter((f=>l.covers(f.field)))}else l=null,c=o.fieldTransforms;return new y3(new Es(a),l,c)}class gf extends uv{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gf}}function _3(n,e,t,s){const r=n.Cc(1,e,t);fv("Data must be an object, but it was:",r,s);const i=[],o=Es.empty();so(s,((l,c)=>{const d=pv(e,l,t);c=An(c);const f=r.yc(d);if(c instanceof gf)i.push(d);else{const p=Du(c,f);p!=null&&(i.push(d),o.set(d,p))}}));const a=new Ds(i);return new rT(o,a,r.fieldTransforms)}function E3(n,e,t,s,r,i){const o=n.Cc(1,e,t),a=[Bg(e,s,t)],l=[r];if(i.length%2!=0)throw new Ee(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Bg(e,i[p])),l.push(i[p+1]);const c=[],d=Es.empty();for(let p=a.length-1;p>=0;--p)if(!lT(c,a[p])){const m=a[p];let w=l[p];w=An(w);const y=o.yc(m);if(w instanceof gf)c.push(m);else{const A=Du(w,y);A!=null&&(c.push(m),d.set(m,A))}}const f=new Ds(c);return new rT(d,f,o.fieldTransforms)}function b3(n,e,t,s=!1){return Du(t,n.Cc(s?4:3,e))}function Du(n,e){if(aT(n=An(n)))return fv("Unsupported field value:",e,n),oT(n,e);if(n instanceof uv)return(function(s,r){if(!iT(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const i=[];let o=0;for(const a of s){let l=Du(a,r.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(n,e)}return(function(s,r){if((s=An(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return l4(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Ft.fromDate(s);return{timestampValue:hh(r.serializer,i)}}if(s instanceof Ft){const i=new Ft(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:hh(r.serializer,i)}}if(s instanceof br)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Fs)return{bytesValue:bC(r.serializer,s._byteString)};if(s instanceof hn){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:qm(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Ir)return(function(o,a){return{mapValue:{fields:{[YI]:{stringValue:XI},[ah]:{arrayValue:{values:o.toArray().map((c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return zm(a.serializer,c)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${ef(s)}`)})(n,e)}function oT(n,e){const t={};return jI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):so(n,((s,r)=>{const i=Du(r,e.mc(s));i!=null&&(t[s]=i)})),{mapValue:{fields:t}}}function aT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ft||n instanceof br||n instanceof Fs||n instanceof hn||n instanceof uv||n instanceof Ir)}function fv(n,e,t){if(!aT(t)||!GI(t)){const s=ef(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function Bg(n,e,t){if((e=An(e))instanceof pf)return e._internalPath;if(typeof e=="string")return pv(n,e);throw mh("Field path arguments must be of type string or ",n,!1,void 0,t)}const I3=new RegExp("[~\\*/\\[\\]]");function pv(n,e,t){if(e.search(I3)>=0)throw mh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new pf(...e.split("."))._internalPath}catch{throw mh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function mh(n,e,t,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new Ee(oe.INVALID_ARGUMENT,a+n+l)}function lT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,t,s,r,i){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new C3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(gv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class C3 extends cT{data(){return super.data()}}function gv(n,e){return typeof e=="string"?pv(n,e):e instanceof pf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ee(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mv{}class S3 extends mv{}function P3(n,e,...t){let s=[];e instanceof mv&&s.push(e),s=s.concat(t),(function(i){const o=i.filter((l=>l instanceof vv)).length,a=i.filter((l=>l instanceof mf)).length;if(o>1||o>0&&a>0)throw new Ee(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const r of s)n=r._apply(n);return n}class mf extends S3{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new mf(e,t,s)}_apply(e){const t=this._parse(e);return uT(e._query,t),new dl(e.firestore,e.converter,Cg(e._query,t))}_parse(e){const t=hv(e.firestore);return(function(i,o,a,l,c,d,f){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Ee(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Uw(f,d);const w=[];for(const y of f)w.push(Fw(l,i,y));p={arrayValue:{values:w}}}else p=Fw(l,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Uw(f,d),p=b3(a,o,f,d==="in"||d==="not-in");return vn.create(c,d,p)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function R3(n,e,t){const s=e,r=gv("where",n);return mf._create(r,s,t)}class vv extends mv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vv(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:sr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,i){let o=r;const a=i.getFlattenedFilters();for(const l of a)uT(o,l),o=Cg(o,l)})(e._query,t),new dl(e.firestore,e.converter,Cg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Fw(n,e,t){if(typeof(t=An(t))=="string"){if(t==="")throw new Ee(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oC(e)&&t.indexOf("/")!==-1)throw new Ee(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Lt.fromString(t));if(!Fe.isDocumentKey(s))throw new Ee(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return tw(n,new Fe(s))}if(t instanceof hn)return tw(n,t._key);throw new Ee(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ef(t)}.`)}function Uw(n,e){if(!Array.isArray(n)||n.length===0)throw new Ee(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uT(n,e){const t=(function(r,i){for(const o of r)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ee(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class x3{convertValue(e,t="none"){switch(Xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw je(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return so(e,((r,i)=>{s[r]=this.convertValue(i,t)})),s}convertVectorValue(e){const t=e.fields?.[ah].arrayValue?.values?.map((s=>cn(s.doubleValue)));return new Ir(t)}convertGeoPoint(e){return new br(cn(e.latitude),cn(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=sf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ru(e));default:return null}}convertTimestamp(e){const t=Ji(e);return new Ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Lt.fromString(e);It(RC(s),9688,{name:e});const r=new iu(s.get(1),s.get(3)),i=new Fe(s.popFirst(5));return r.isEqual(t)||ai(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class vc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mo extends cT{constructor(e,t,s,r,i,o){super(e,t,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(gv("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Mo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Mo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mo._jsonSchema={type:yn("string",Mo._jsonSchemaVersion),bundleSource:yn("string","DocumentSnapshot"),bundleName:yn("string"),bundle:yn("string")};class xd extends Mo{data(e={}){return super.data(e)}}class Oa{constructor(e,t,s,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new vc(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new xd(this._firestore,this._userDataWriter,s.key,s,new vc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ee(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((a=>{const l=new xd(r._firestore,r._userDataWriter,a.doc.key,a.doc,new vc(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((a=>i||a.type!==3)).map((a=>{const l=new xd(r._firestore,r._userDataWriter,a.doc.key,a.doc,new vc(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:N3(a.type),doc:l,oldIndex:c,newIndex:d}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Oa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Um.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],r=[];return this.docs.forEach((i=>{i._document!==null&&(t.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function N3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(n){n=li(n,hn);const e=li(n.firestore,Nu);return d3(cv(e),n._key).then((t=>L3(e,n,t)))}Oa._jsonSchemaVersion="firestore/querySnapshot/1.0",Oa._jsonSchema={type:yn("string",Oa._jsonSchemaVersion),bundleSource:yn("string","QuerySnapshot"),bundleName:yn("string"),bundle:yn("string")};class dT extends x3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hn(this.firestore,null,t)}}function D3(n){n=li(n,dl);const e=li(n.firestore,Nu),t=cv(e),s=new dT(e);return T3(n._query),h3(t,n._query).then((r=>new Oa(e,s,n,r)))}function O3(n,e,t){n=li(n,hn);const s=li(n.firestore,Nu),r=k3(n.converter,e);return hT(s,[w3(hv(s),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,_r.none())])}function Mg(n,e,t,...s){n=li(n,hn);const r=li(n.firestore,Nu),i=hv(r);let o;return o=typeof(e=An(e))=="string"||e instanceof pf?E3(i,"updateDoc",n._key,e,t,s):_3(i,"updateDoc",n._key,e),hT(r,[o.toMutation(n._key,_r.exists(!0))])}function hT(n,e){return(function(s,r){const i=new Yr;return s.asyncQueue.enqueueAndForget((async()=>ZU(await u3(s),r,i))),i.promise})(cv(n),e)}function L3(n,e,t){const s=t.docs.get(e._key),r=new dT(n);return new Mo(n,r,e._key,s,new vc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){al=r})(il),Tr(new nr("firestore",((s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),a=new Nu(new wF(s.getProvider("auth-internal")),new bF(o,s.getProvider("app-check-internal")),(function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ee(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new iu(c.options.projectId,d)})(o,r),o);return i={useFetchStreams:t,...i},a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),$s(HA,GA,e),$s(HA,GA,"esm2020")})();const fT="@firebase/installations",yv="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT=1e4,gT=`w:${yv}`,mT="FIS_v2",B3="https://firebaseinstallations.googleapis.com/v1",M3=3600*1e3,F3="installations",U3="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},zo=new Jo(F3,U3,V3);function vT(n){return n instanceof ir&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT({projectId:n}){return`${B3}/projects/${n}/installations`}function AT(n){return{token:n.token,requestStatus:2,expiresIn:H3(n.expiresIn),creationTime:Date.now()}}async function wT(n,e){const s=(await e.json()).error;return zo.create("request-failed",{requestName:n,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function _T({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function $3(n,{refreshToken:e}){const t=_T(n);return t.append("Authorization",G3(e)),t}async function ET(n){const e=await n();return e.status>=500&&e.status<600?n():e}function H3(n){return Number(n.replace("s","000"))}function G3(n){return`${mT} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q3({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const s=yT(n),r=_T(n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={fid:t,authVersion:mT,appId:n.appId,sdkVersion:gT},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await ET(()=>fetch(s,a));if(l.ok){const c=await l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:AT(c.authToken)}}else throw await wT("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3=/^[cdef][\w-]{21}$/,Fg="";function W3(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=K3(n);return z3.test(t)?t:Fg}catch{return Fg}}function K3(n){return j3(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=new Map;function CT(n,e){const t=vf(n);TT(t,e),q3(t,e)}function TT(n,e){const t=IT.get(n);if(t)for(const s of t)s(e)}function q3(n,e){const t=J3();t&&t.postMessage({key:n,fid:e}),Y3()}let ko=null;function J3(){return!ko&&"BroadcastChannel"in self&&(ko=new BroadcastChannel("[Firebase] FID Change"),ko.onmessage=n=>{TT(n.data.key,n.data.fid)}),ko}function Y3(){IT.size===0&&ko&&(ko.close(),ko=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3="firebase-installations-database",Z3=1,Wo="firebase-installations-store";let _p=null;function Av(){return _p||(_p=Yb(X3,Z3,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Wo)}}})),_p}async function vh(n,e){const t=vf(n),r=(await Av()).transaction(Wo,"readwrite"),i=r.objectStore(Wo),o=await i.get(t);return await i.put(e,t),await r.done,(!o||o.fid!==e.fid)&&CT(n,e.fid),e}async function ST(n){const e=vf(n),s=(await Av()).transaction(Wo,"readwrite");await s.objectStore(Wo).delete(e),await s.done}async function yf(n,e){const t=vf(n),r=(await Av()).transaction(Wo,"readwrite"),i=r.objectStore(Wo),o=await i.get(t),a=e(o);return a===void 0?await i.delete(t):await i.put(a,t),await r.done,a&&(!o||o.fid!==a.fid)&&CT(n,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wv(n){let e;const t=await yf(n.appConfig,s=>{const r=eV(s),i=tV(n,r);return e=i.registrationPromise,i.installationEntry});return t.fid===Fg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function eV(n){const e=n||{fid:W3(),registrationStatus:0};return PT(e)}function tV(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(zo.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=nV(n,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:sV(n)}:{installationEntry:e}}async function nV(n,e){try{const t=await Q3(n,e);return vh(n.appConfig,t)}catch(t){throw vT(t)&&t.customData.serverCode===409?await ST(n.appConfig):await vh(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function sV(n){let e=await Vw(n.appConfig);for(;e.registrationStatus===1;)await bT(100),e=await Vw(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await wv(n);return s||t}return e}function Vw(n){return yf(n,e=>{if(!e)throw zo.create("installation-not-found");return PT(e)})}function PT(n){return rV(n)?{fid:n.fid,registrationStatus:0}:n}function rV(n){return n.registrationStatus===1&&n.registrationTime+pT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iV({appConfig:n,heartbeatServiceProvider:e},t){const s=oV(n,t),r=$3(n,t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={installation:{sdkVersion:gT,appId:n.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await ET(()=>fetch(s,a));if(l.ok){const c=await l.json();return AT(c)}else throw await wT("Generate Auth Token",l)}function oV(n,{fid:e}){return`${yT(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _v(n,e=!1){let t;const s=await yf(n.appConfig,i=>{if(!RT(i))throw zo.create("not-registered");const o=i.authToken;if(!e&&cV(o))return i;if(o.requestStatus===1)return t=aV(n,e),i;{if(!navigator.onLine)throw zo.create("app-offline");const a=dV(i);return t=lV(n,a),a}});return t?await t:s.authToken}async function aV(n,e){let t=await $w(n.appConfig);for(;t.authToken.requestStatus===1;)await bT(100),t=await $w(n.appConfig);const s=t.authToken;return s.requestStatus===0?_v(n,e):s}function $w(n){return yf(n,e=>{if(!RT(e))throw zo.create("not-registered");const t=e.authToken;return hV(t)?{...e,authToken:{requestStatus:0}}:e})}async function lV(n,e){try{const t=await iV(n,e),s={...e,authToken:t};return await vh(n.appConfig,s),t}catch(t){if(vT(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await ST(n.appConfig);else{const s={...e,authToken:{requestStatus:0}};await vh(n.appConfig,s)}throw t}}function RT(n){return n!==void 0&&n.registrationStatus===2}function cV(n){return n.requestStatus===2&&!uV(n)}function uV(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+M3}function dV(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function hV(n){return n.requestStatus===1&&n.requestTime+pT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fV(n){const e=n,{installationEntry:t,registrationPromise:s}=await wv(e);return s?s.catch(console.error):_v(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pV(n,e=!1){const t=n;return await gV(t),(await _v(t,e)).token}async function gV(n){const{registrationPromise:e}=await wv(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mV(n){if(!n||!n.options)throw Ep("App Configuration");if(!n.name)throw Ep("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Ep(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Ep(n){return zo.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="installations",vV="installations-internal",yV=n=>{const e=n.getProvider("app").getImmediate(),t=mV(e),s=Yo(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},AV=n=>{const e=n.getProvider("app").getImmediate(),t=Yo(e,xT).getImmediate();return{getId:()=>fV(t),getToken:r=>pV(t,r)}};function wV(){Tr(new nr(xT,yV,"PUBLIC")),Tr(new nr(vV,AV,"PRIVATE"))}wV();$s(fT,yv);$s(fT,yv,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh="analytics",_V="firebase_id",EV="origin",bV=60*1e3,IV="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ev="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new Jh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Os=new Jo("analytics","Analytics",CV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TV(n){if(!n.startsWith(Ev)){const e=Os.create("invalid-gtag-resource",{gtagURL:n});return fs.warn(e.message),""}return n}function kT(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function SV(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function PV(n,e){const t=SV("firebase-js-sdk-policy",{createScriptURL:TV}),s=document.createElement("script"),r=`${Ev}?l=${n}&id=${e}`;s.src=t?t?.createScriptURL(r):r,s.async=!0,document.head.appendChild(s)}function RV(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function xV(n,e,t,s,r,i){const o=s[r];try{if(o)await e[o];else{const l=(await kT(t)).find(c=>c.measurementId===r);l&&await e[l.appId]}}catch(a){fs.error(a)}n("config",r,i)}async function kV(n,e,t,s,r){try{let i=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=await kT(t);for(const l of o){const c=a.find(f=>f.measurementId===l),d=c&&e[c.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),n("event",s,r||{})}catch(i){fs.error(i)}}function NV(n,e,t,s){async function r(i,...o){try{if(i==="event"){const[a,l]=o;await kV(n,e,t,a,l)}else if(i==="config"){const[a,l]=o;await xV(n,e,t,s,a,l)}else if(i==="consent"){const[a,l]=o;n("consent",a,l)}else if(i==="get"){const[a,l,c]=o;n("get",a,l,c)}else if(i==="set"){const[a]=o;n("set",a)}else n(i,...o)}catch(a){fs.error(a)}}return r}function DV(n,e,t,s,r){let i=function(...o){window[s].push(arguments)};return window[r]&&typeof window[r]=="function"&&(i=window[r]),window[r]=NV(i,n,e,t),{gtagCore:i,wrappedGtag:window[r]}}function OV(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Ev)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV=30,BV=1e3;class MV{constructor(e={},t=BV){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const NT=new MV;function FV(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function UV(n){const{appId:e,apiKey:t}=n,s={method:"GET",headers:FV(t)},r=IV.replace("{app-id}",e),i=await fetch(r,s);if(i.status!==200&&i.status!==304){let o="";try{const a=await i.json();a.error?.message&&(o=a.error.message)}catch{}throw Os.create("config-fetch-failed",{httpStatus:i.status,responseMessage:o})}return i.json()}async function VV(n,e=NT,t){const{appId:s,apiKey:r,measurementId:i}=n.options;if(!s)throw Os.create("no-app-id");if(!r){if(i)return{measurementId:i,appId:s};throw Os.create("no-api-key")}const o=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new GV;return setTimeout(async()=>{a.abort()},bV),DT({appId:s,apiKey:r,measurementId:i},o,a,e)}async function DT(n,{throttleEndTimeMillis:e,backoffCount:t},s,r=NT){const{appId:i,measurementId:o}=n;try{await $V(s,e)}catch(a){if(o)return fs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${a?.message}]`),{appId:i,measurementId:o};throw a}try{const a=await UV(n);return r.deleteThrottleMetadata(i),a}catch(a){const l=a;if(!HV(l)){if(r.deleteThrottleMetadata(i),o)return fs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:i,measurementId:o};throw a}const c=Number(l?.customData?.httpStatus)===503?pA(t,r.intervalMillis,LV):pA(t,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+c,backoffCount:t+1};return r.setThrottleMetadata(i,d),fs.debug(`Calling attemptFetch again in ${c} millis`),DT(n,d,s,r)}}function $V(n,e){return new Promise((t,s)=>{const r=Math.max(e-Date.now(),0),i=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(i),s(Os.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function HV(n){if(!(n instanceof ir)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class GV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function QV(n,e,t,s,r){if(r&&r.global){n("event",t,s);return}else{const i=await e,o={...s,send_to:i};n("event",t,o)}}async function jV(n,e,t,s){if(s&&s.global){const r={};for(const i of Object.keys(t))r[`user_properties.${i}`]=t[i];return n("set",r),Promise.resolve()}else{const r=await e;n("config",r,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zV(){if(Wb())try{await Kb()}catch(n){return fs.warn(Os.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return fs.warn(Os.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function WV(n,e,t,s,r,i,o){const a=VV(n);a.then(p=>{t[p.measurementId]=p.appId,n.options.measurementId&&p.measurementId!==n.options.measurementId&&fs.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>fs.error(p)),e.push(a);const l=zV().then(p=>{if(p)return s.getId()}),[c,d]=await Promise.all([a,l]);OV(i)||PV(i,c.measurementId),r("js",new Date);const f=o?.config??{};return f[EV]="firebase",f.update=!0,d!=null&&(f[_V]=d),r("config",c.measurementId,f),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e){this.app=e}_delete(){return delete La[this.app.options.appId],Promise.resolve()}}let La={},Hw=[];const Gw={};let bp="dataLayer",qV="gtag",Qw,bv,jw=!1;function JV(){const n=[];if(zb()&&n.push("This is a browser extension environment."),ZO()||n.push("Cookies are not available."),n.length>0){const e=n.map((s,r)=>`(${r+1}) ${s}`).join(" "),t=Os.create("invalid-analytics-context",{errorInfo:e});fs.warn(t.message)}}function YV(n,e,t){JV();const s=n.options.appId;if(!s)throw Os.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)fs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Os.create("no-api-key");if(La[s]!=null)throw Os.create("already-exists",{id:s});if(!jw){RV(bp);const{wrappedGtag:i,gtagCore:o}=DV(La,Hw,Gw,bp,qV);bv=i,Qw=o,jw=!0}return La[s]=WV(n,Hw,Gw,e,Qw,bp,t),new KV(n)}function XV(n=eu()){n=An(n);const e=Yo(n,yh);return e.isInitialized()?e.getImmediate():ZV(n)}function ZV(n,e={}){const t=Yo(n,yh);if(t.isInitialized()){const r=t.getImmediate();if(Ki(e,t.getOptions()))return r;throw Os.create("already-initialized")}return t.initialize({options:e})}function e6(n,e,t){n=An(n),jV(bv,La[n.app.options.appId],e,t).catch(s=>fs.error(s))}function t6(n,e,t,s){n=An(n),QV(bv,La[n.app.options.appId],e,t,s).catch(r=>fs.error(r))}const zw="@firebase/analytics",Ww="0.10.19";function n6(){Tr(new nr(yh,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return YV(s,r,t)},"PUBLIC")),Tr(new nr("analytics-internal",n,"PRIVATE")),$s(zw,Ww),$s(zw,Ww,"esm2020");function n(e){try{const t=e.getProvider(yh).getImmediate();return{logEvent:(s,r,i)=>t6(t,s,r,i),setUserProperties:(s,r)=>e6(t,s,r)}}catch(t){throw Os.create("interop-component-reg-failed",{reason:t})}}}n6();const yc={apiKey:"AIzaSyCwvJ8cUWLZPZ26i1deIAXnoLuzToIcB70",authDomain:"tuldung.firebaseapp.com",projectId:"tuldung",storageBucket:"tuldung.firebasestorage.app",messagingSenderId:"1086524417813",appId:"1:1086524417813:web:8199da4b7cebcaffc86b1c",measurementId:"G-EGV6XDKG9R"},s6=n=>{const t=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"].filter(s=>!n[s]);return t.length>0?(console.error("=== Firebase   ==="),console.error(" :",t),console.error("   . .env  ."),console.error(" :    ! (npm run dev)"),!1):!0};let Ks=null;s6(yc)||console.error("Firebase   .");try{yc.apiKey&&yc.authDomain&&yc.projectId?wA().length>0?Ks=eu():Ks=Xb(yc):(console.warn(" Firebase    . Firebase    ."),console.warn(" .env  Firebase     ."),Ks=null)}catch(n){if(console.error("Firebase    :",n),n.code==="app/duplicate-app"||n.message?.includes("duplicate"))try{Ks=eu()}catch(e){console.error("    :",e);const t=wA();t.length>0?Ks=t[0]:(console.error("Firebase    ."),Ks=null)}else console.error("Firebase  :",n.message),Ks=null}let Tt=null,cs=null;if(Ks)try{Tt=mF(Ks),cs=g3(Ks),Tt&&rM(Tt,II).then(()=>{}).catch(n=>{console.error("Firebase Auth   :",n)})}catch(n){console.error(" Firebase Auth/Firestore  :",n)}else console.error(" Firebase   . auth db   .");let OT=null;if(typeof window<"u")try{OT=XV(Ks)}catch(n){n.code==="analytics/already-initialized"||n.message?.includes("already")?console.log("Analytics  ."):console.warn("Analytics  :",n.message||n)}new Hr;const LT=async(n,e={})=>{const t=Bo(cs,"users",n.uid);if(!(await el(t)).exists()){const r=i=>{const o=i.toString().split("").reduce((d,f)=>(d<<5)-d+f.charCodeAt(0),0),a="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let l="",c=Math.abs(o);for(let d=0;d<6;d++)l+=a[c%a.length],c=Math.floor(c/a.length);return l};await O3(t,{email:n.email,displayName:n.displayName||e.name||n.email?.split("@")[0],photoURL:n.photoURL,phone:e.phone||"",createdAt:new Date().toISOString(),inviteCode:e.inviteCode||r(n.uid),referrals:e.referrals||[],referredBy:e.referredBy||null,referredAt:e.referredAt||null,referralStats:e.referralStats||{totalReferrals:0,rewardsReceived:0},...e,gameData:{level:1,coins:0,totalCoin:0,catFragments:50,nftCount:0,miningLevel:1,huntingLevel:1,explorationLevel:1,productionLevel:1,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}})}};let Ip=!1;const r6=async()=>{if(Ip)return Tt.currentUser?{success:!0,user:Tt.currentUser}:{success:!1,error:" "};try{console.log("handleRedirectResult  - getRedirectResult  ...");const n=await NM(Tt);if(console.log("getRedirectResult :",n?" ":"null"),Ip=!0,n&&n.user){const e=n.user;return console.log("  -  :",e.email,e.uid),await LT(e),console.log("Firestore  "),{success:!0,user:e}}return Tt.currentUser?(console.log("   Firebase   :",Tt.currentUser.email),{success:!0,user:Tt.currentUser}):(console.log("  "),{success:!1,error:"  ."})}catch(n){return Ip=!0,console.error("   :",n),Tt.currentUser?(console.log("  Firebase   :",Tt.currentUser.email),{success:!0,user:Tt.currentUser}):{success:!1,error:n.message}}},Ug=async n=>{try{const e=Bo(cs,"users",n),t=await el(e);return t.exists()?t.data():null}catch(e){return console.error("   :",e),null}},i6=Object.freeze(Object.defineProperty({__proto__:null,get analytics(){return OT},get auth(){return Tt},get db(){return cs},getUserGameData:Ug,handleRedirectResult:r6,saveUserToFirestore:LT},Symbol.toStringTag,{value:"Module"})),o6={__name:"App",setup(n){const e=Sn(),t=on();Nt(async()=>{try{const{handleGoogleRedirect:l}=await md(async()=>{const{handleGoogleRedirect:d}=await import("./firebaseAuth-DTvJMYCg.js");return{handleGoogleRedirect:d}},[]),c=await l();if(c&&c.success&&c.user){console.log("App.vue: Google  :",c.user.email);let d=null;try{const f=localStorage.getItem("currentUser");f&&(d=JSON.parse(f))}catch{try{const p=sessionStorage.getItem("currentUser");p&&(d=JSON.parse(p))}catch(p){console.error("   :",p)}}(!d||!d.id)&&(localStorage.setItem("currentUser",JSON.stringify(c.user)),sessionStorage.setItem("currentUser",JSON.stringify(c.user)),console.log("App.vue:   ")),t.loadCurrentUser(),(e.currentRoute.value.path==="/login"||e.currentRoute.value.path==="/signup")&&(console.log("App.vue:    "),e.push("/home"));return}}catch{}if(t.loadCurrentUser(),Tt&&Tt.currentUser&&!dt())try{const{getUserGameData:l}=await md(async()=>{const{getUserGameData:p}=await Promise.resolve().then(()=>i6);return{getUserGameData:p}},void 0),{convertFirebaseUserToAppUser:c}=await md(async()=>{const{convertFirebaseUserToAppUser:p}=await import("./firebaseAuth-DTvJMYCg.js");return{convertFirebaseUserToAppUser:p}},[]),d=await l(Tt.currentUser.uid),f=c(Tt.currentUser,d?.gameData);localStorage.setItem("currentUser",JSON.stringify(f)),sessionStorage.setItem("currentUser",JSON.stringify(f)),t.loadCurrentUser(),console.log("App.vue: Firebase Auth    :",f.email)}catch(l){console.error("App.vue:   :",l)}const a=dt();if(a&&a.loginType==="wallet"&&a.walletAddress)try{const l=await t.checkWalletStatus();l.connected&&console.log("App.vue:    :",l.address),t.setupWalletListeners()}catch(l){console.error("App.vue:    :",l)}});const s=U(null),r=U(!1),i=()=>{const a=localStorage.getItem("soundEnabled");return a!==null?a==="true":!0},o=()=>{s.value&&(i()?r.value||s.value.play().then(()=>{r.value=!0}).catch(()=>{}):(s.value.pause(),r.value=!1))};return Nt(()=>{try{s.value=new Audio,s.value.src=new URL("@/assets/audio/bgm.mp3",import.meta.url).href,s.value.loop=!0,s.value.volume=.5,o();const a=()=>{s.value&&i()&&!r.value&&s.value.play().then(()=>{r.value=!0}).catch(()=>{})};document.addEventListener("click",a,{once:!0}),document.addEventListener("touchstart",a,{once:!0}),window.addEventListener("soundSettingChanged",o)}catch{console.log("BGM    .")}}),rn(()=>{s.value&&(s.value.pause(),s.value=null),window.removeEventListener("soundSettingChanged",o)}),(a,l)=>{const c=aP("router-view");return L(),w1(c)}}},a6="/tdl/assets/tdl_splashLogo-b8p6ictM.png",l6="/tdl/assets/tdl_splash_bg-B78B8oeM.png",Qt=(n,e)=>{const t=n.__vccOpts||n;for(const[s,r]of e)t[s]=r;return t},c6={class:"loading-screen"},u6={class:"loading-bar-container"},d6={class:"loading-bar-track"},h6={__name:"LoadingScreen",setup(n){const e=Sn();on();const t=U(0);return Nt(()=>{const i=.5333333333333333,o=setInterval(()=>{t.value+=i,t.value>=100&&(t.value=100,clearInterval(o),setTimeout(()=>{e.push("/main")},200))},16)}),(s,r)=>(L(),M("div",c6,[r[0]||(r[0]=h("div",{class:"logo-top"},[h("img",{src:a6,alt:"TDL Logo",class:"splash-logo"})],-1)),h("div",u6,[h("div",d6,[h("div",{class:"loading-bar-fill",style:St({width:t.value+"%"})},null,4)])]),r[1]||(r[1]=h("div",{class:"splash-bg"},[h("img",{src:l6,alt:"Splash Background",class:"splash-bg-image"})],-1))]))}},f6=Qt(h6,[["__scopeId","data-v-8511a0e0"]]),hl="/tdl/assets/cat1-B_B8VE2s.png",fl="/tdl/assets/cat10-B8AgbljH.png",pl="/tdl/assets/cat11-0fJ86MBw.png",gl="/tdl/assets/cat12-9jWhGICw.png",ml="/tdl/assets/cat13-CHa4qUOi.png",vl="/tdl/assets/cat14-CLrryeLM.png",yl="/tdl/assets/cat15-CCtjZj8M.png",Al="/tdl/assets/cat16-CPcR6OS6.png",wl="/tdl/assets/cat17-EO7rjjtM.png",_l="/tdl/assets/cat18-BGDiOePY.png",El="/tdl/assets/cat19-DxCDtOnA.png",bl="/tdl/assets/cat2-0Y4nM6HW.png",Il="/tdl/assets/cat20-Bz9cd08a.png",Cl="/tdl/assets/cat21-ECTsze2s.png",Tl="/tdl/assets/cat22-BvGXhyri.png",Sl="/tdl/assets/cat23-DqU2B_M0.png",Pl="/tdl/assets/cat24-7cWYLYDN.png",Rl="/tdl/assets/cat25-Cy0mQl6B.png",xl="/tdl/assets/cat26-Bk4tHCwE.png",kl="/tdl/assets/cat27-CvtmCEXM.png",Nl="/tdl/assets/cat28-B9s1wmgo.png",Dl="/tdl/assets/cat29-D_79HmBj.png",Ol="/tdl/assets/cat3-Dp7OJMB9.png",Ll="/tdl/assets/cat30-Cx-HRp0m.png",Bl="/tdl/assets/cat4-DHiuXgwB.png",Ml="/tdl/assets/cat5-BvXrfJAO.png",Fl="/tdl/assets/cat6-DZOiQoo1.png",Ul="/tdl/assets/cat7-CeDKF7mR.png",Vl="/tdl/assets/cat8-mjRhb3fS.png",$l="/tdl/assets/cat9-Bzb-Egme.png",Hl="/tdl/assets/catPoint-t6vwZH27.png",Gl="/tdl/assets/tabIcon5-CFF9Ua2B.png",Ql="/tdl/assets/catProfile01-gY0Djz81.png",jl="/tdl/assets/catProfile02-Cesbpkj5.png",zl="/tdl/assets/cat_ico-Csdt_Q01.png";async function Af(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(s)).map(o=>o.toString(16).padStart(2,"0")).join("")}async function p6(n,e){return await Af(n)===e}const g6="/tdl/assets/urerTown-BuaGLkQ2.png",m6={class:"login-screen"},v6={class:"login-title"},y6={class:"urer-town-container"},A6=["src"],w6={class:"cat-character-wrapper"},_6=["src"],E6={class:"input-group"},b6={class:"input-container"},I6=["placeholder"],C6={class:"input-group"},T6={class:"input-container"},S6=["placeholder"],P6=["disabled"],R6={key:0,class:"btn-content loginBt"},x6={key:1,class:"btn-content"},k6={key:2,class:"btn-content"},N6={class:"signup-link"},D6={__name:"LoginScreen",setup(n){pe(()=>!!Tt);const e=Sn(),t=on(),{setWalletConnected:s,setLoading:r}=t,i=U(!1),o=U(!1);U(!1),U("");const a=U(""),l=pe(()=>gs()),c=()=>{e.push("/signup")},d=U(""),f=U(""),p=async w=>{if(w.preventDefault(),!d.value.trim()||!f.value.trim()){alert("Please enter both email and password.");return}i.value=!0,r(!0);const y=JSON.parse(localStorage.getItem("users")||"[]"),A=y.find(_=>_.email===d.value);setTimeout(async()=>{if(i.value=!1,A){let _=!1;try{if(A.password&&A.password.length<64){if(_=A.password===f.value,_){const C=await Af(f.value);A.password=C;const S=y.findIndex(B=>B.id===A.id);S!==-1&&(y[S]=A,localStorage.setItem("users",JSON.stringify(y)))}}else _=await p6(f.value,A.password)}catch(C){console.error("Password verification error:",C),r(!1),alert("An error occurred during login. Please try again.");return}if(_){o.value=!0;const{password:C,...S}=A;localStorage.setItem("currentUser",JSON.stringify(S)),sessionStorage.setItem("currentUser",JSON.stringify(S)),s(A.email,`${A.gameData?.coins||0} coins`),r(!1),setTimeout(()=>{e.push("/home")},1e3)}else r(!1),alert("Email or password is incorrect.")}else r(!1),alert("Email or password is incorrect.")},2e3)},m=()=>{e.push("/forgot-password")};return Nt(()=>{r(!1);const w=Math.floor(Math.random()*30)+1;try{a.value=new URL(Object.assign({"../assets/img/cat1.png":hl,"../assets/img/cat10.png":fl,"../assets/img/cat11.png":pl,"../assets/img/cat12.png":gl,"../assets/img/cat13.png":ml,"../assets/img/cat14.png":vl,"../assets/img/cat15.png":yl,"../assets/img/cat16.png":Al,"../assets/img/cat17.png":wl,"../assets/img/cat18.png":_l,"../assets/img/cat19.png":El,"../assets/img/cat2.png":bl,"../assets/img/cat20.png":Il,"../assets/img/cat21.png":Cl,"../assets/img/cat22.png":Tl,"../assets/img/cat23.png":Sl,"../assets/img/cat24.png":Pl,"../assets/img/cat25.png":Rl,"../assets/img/cat26.png":xl,"../assets/img/cat27.png":kl,"../assets/img/cat28.png":Nl,"../assets/img/cat29.png":Dl,"../assets/img/cat3.png":Ol,"../assets/img/cat30.png":Ll,"../assets/img/cat4.png":Bl,"../assets/img/cat5.png":Ml,"../assets/img/cat6.png":Fl,"../assets/img/cat7.png":Ul,"../assets/img/cat8.png":Vl,"../assets/img/cat9.png":$l,"../assets/img/catPoint.png":Hl,"../assets/img/catPointPlus.png":Gl,"../assets/img/catProfile01.png":Ql,"../assets/img/catProfile02.png":jl,"../assets/img/cat_ico.png":zl})[`../assets/img/cat${w}.png`],import.meta.url).href}catch(C){console.error("   :",C);try{a.value=new URL("/tdl/assets/cat1-B_B8VE2s.png",import.meta.url).href}catch(S){console.error("   :",S)}}const y=dt(),A=y?.loginType==="guest"||y?.email?.includes("@guest.com")||y?.email==="guest@tdl.com";if(y&&y.id&&!A){e.push("/home");return}const _=document.querySelector(".loginCont");_&&(_.style.opacity="0",_.style.transform="translateY(30px)",setTimeout(()=>{_.style.transition="all 0.6s ease",_.style.opacity="1",_.style.transform="translateY(0)"},100))}),(w,y)=>(L(),M("div",m6,[h("h1",v6,E(l.value.login),1),h("div",y6,[h("img",{src:De(g6),alt:"Urer Town",class:"urer-town-image"},null,8,A6),h("div",w6,[h("img",{src:a.value,alt:"Cat Character",class:"cat-character-image"},null,8,_6)])]),h("form",{onSubmit:p,class:"login-form"},[h("div",E6,[h("div",b6,[y[2]||(y[2]=h("span",{class:"input-text-label"},"Email",-1)),Wt(h("input",{type:"email","onUpdate:modelValue":y[0]||(y[0]=A=>d.value=A),class:"input-field",placeholder:l.value.enterEmail,required:""},null,8,I6),[[ps,d.value]])])]),h("div",C6,[h("div",T6,[y[3]||(y[3]=h("span",{class:"input-text-label"},"Password",-1)),Wt(h("input",{type:"password","onUpdate:modelValue":y[1]||(y[1]=A=>f.value=A),class:"input-field",placeholder:l.value.enterPassword,required:""},null,8,S6),[[ps,f.value]])])]),h("button",{type:"submit",disabled:i.value||o.value,class:Oe(["login-button",{connecting:i.value,connected:o.value}])},[!i.value&&!o.value?(L(),M("div",R6,E(l.value.loginButton),1)):he("",!0),i.value?(L(),M("div",x6,[y[4]||(y[4]=h("div",{class:"spinner-small"},null,-1)),Qi(" "+E(l.value.loading),1)])):he("",!0),o.value?(L(),M("div",k6,[y[5]||(y[5]=h("svg",{class:"check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[h("path",{d:"M20 6L9 17l-5-5"})],-1)),Qi(" "+E(l.value.success)+"! ",1)])):he("",!0)],10,P6)],32),he("",!0),he("",!0),h("div",N6,[h("button",{onClick:c,class:"signup-btn"},E(l.value.signupButton),1),y[7]||(y[7]=h("span",{class:"link-separator"},"|",-1)),h("button",{onClick:m,class:"forgot-password-btn"}," Forgot password? ")])]))}},O6=Qt(D6,[["__scopeId","data-v-49244d9a"]]),cd=n=>{const e=n.toString().split("").reduce((i,o)=>(i<<5)-i+o.charCodeAt(0),0),t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let s="",r=Math.abs(e);for(let i=0;i<6;i++)s+=t[r%t.length],r=Math.floor(r/t.length);return s},Oi=async n=>{if(!n)return cd(n||"default");const e=ei(),t=e.find(s=>s.id===n);if(t&&t.inviteCode)return t.inviteCode;if(cs)try{const s=Bo(cs,"users",n),r=await el(s);if(r.exists()){const i=r.data();if(i.inviteCode)return i.inviteCode;const o=cd(n);return await Mg(s,{inviteCode:o}),o}}catch(s){console.error("getOrCreateInviteCode Firestore :",s)}if(t){const s=cd(n);return t.inviteCode=s,localStorage.setItem("users",JSON.stringify(e)),s}return cd(n)},L6=async n=>{if(!n)return null;const t=ei().find(s=>s.inviteCode===n);if(t)return t;if(!cs)return null;try{const s=p3(cs,"users"),r=P3(s,R3("inviteCode","==",n)),i=await D3(r);if(!i.empty){const o=i.docs[0],a=o.data();return{id:o.id,...a}}return null}catch(s){return console.error("getUserByInviteCode Firestore :",s),null}},B6=async(n,e)=>{if(!e)return{success:!1,error:"  ."};if(!n)return{success:!1,error:" ID ."};const t=await L6(e);if(!t)return{success:!1,error:"   ."};if(t.id===n)return{success:!1,error:"    ."};let s=null;if(cs)try{const f=Bo(cs,"users",n),p=await el(f);if(p.exists()&&(s={id:p.id,...p.data()},s.referredBy))return{success:!1,error:"  ."}}catch(f){console.error("processInviteCode:    :",f)}if(!s&&(s=ei().find(p=>p.id===n),s&&s.referredBy))return{success:!1,error:"  ."};if(cs)try{if(s){const m=Bo(cs,"users",n);await Mg(m,{referredBy:t.id,referredAt:new Date().toISOString()})}const f=Bo(cs,"users",t.id),p=await el(f);if(p.exists()){const m=p.data(),w=m.referrals||[];w.includes(n)||w.push(n),await Mg(f,{referrals:w,referralStats:{totalReferrals:w.length,rewardsReceived:m.referralStats?.rewardsReceived||0}})}}catch(f){console.error("processInviteCode: Firestore  :",f)}const r=ei(),i=r.find(f=>f.id===n);i&&(i.referredBy=t.id,i.referredAt=new Date().toISOString(),localStorage.setItem("users",JSON.stringify(r)));const o=r.find(f=>f.id===t.id);o&&(o.referrals||(o.referrals=[]),o.referrals.includes(n)||o.referrals.push(n),o.referralStats={totalReferrals:o.referrals.length,rewardsReceived:o.referralStats?.rewardsReceived||0},localStorage.setItem("users",JSON.stringify(r)));const a=on(),l=100,c=(t.gameData?.coins||0)+l;await Qc(t.id,{coins:c});const d=50;if(s){const f=(s.gameData?.coins||0)+d;await Qc(n,{coins:f}),a.state.currentUser?.id===n&&await a.updateCoins(f)}return a.state.currentUser?.id===t.id&&await a.updateCoins(c),window.dispatchEvent(new CustomEvent("userDataUpdated")),{success:!0,inviter:t.displayName||t.name||t.email,inviterReward:l,newUserReward:d}},Kw=async n=>{if(!n)return{inviteCode:null,totalReferrals:0,referrals:[],referralStats:{totalReferrals:0,rewardsReceived:0}};if(cs)try{const s=Bo(cs,"users",n),r=await el(s);if(r.exists()){const i=r.data();return{inviteCode:i.inviteCode||await Oi(n),totalReferrals:i.referrals?.length||0,referrals:i.referrals||[],referralStats:i.referralStats||{totalReferrals:0,rewardsReceived:0}}}}catch(s){console.error("getReferralStats Firestore :",s)}const t=ei().find(s=>s.id===n);return t?{inviteCode:t.inviteCode||await Oi(n),totalReferrals:t.referrals?.length||0,referrals:t.referrals||[],referralStats:t.referralStats||{totalReferrals:0,rewardsReceived:0}}:{inviteCode:await Oi(n),totalReferrals:0,referrals:[],referralStats:{totalReferrals:0,rewardsReceived:0}}},M6={class:"signup-screen"},F6={class:"input-group"},U6={class:"input-container"},V6={class:"input-group"},$6={class:"input-container"},H6=["type"],G6={class:"input-group"},Q6={class:"input-container"},j6={__name:"SignupScreen",setup(n){const e=Sn(),t=Q1(),s=U({name:"",email:"",password:""}),r=U(null);Nt(()=>{t.query.invite?r.value=t.query.invite:t.query.ref&&(r.value=t.query.ref)});const i=U(!1),o=()=>{e.go(-1)},a=async l=>{if(l.preventDefault(),!s.value.name.trim()||!s.value.email.trim()||!s.value.password.trim()){alert("Please fill in all fields.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.value.email)){alert("Please enter a valid email address.");return}if(s.value.password.length<6){alert("Password must be at least 6 characters long.");return}const d=JSON.parse(localStorage.getItem("users")||"[]");if(d.some(w=>w.email===s.value.email)){alert("This email is already registered.");return}let p;try{p=await Af(s.value.password)}catch(w){console.error("Password hashing error:",w),alert("An error occurred during signup. Please try again.");return}const m={id:Date.now(),name:s.value.name,email:s.value.email,password:p,createdAt:new Date().toISOString(),gameData:{level:1,coins:0,totalCoin:0,catFragments:50,nftCount:0,miningLevel:1,huntingLevel:1,explorationLevel:1,productionLevel:1,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}};if(d.push(m),localStorage.setItem("users",JSON.stringify(d)),r.value)try{const w=await B6(m.id,r.value);w.success?alert(`Signup completed successfully!
You have signed up with an invitation from ${w.inviter}!
Invitation reward: You received ${w.newUserReward} points!`):alert(`Signup completed successfully!
${w.error}`)}catch(w){console.error("Invitation code processing error:",w),alert("Signup completed successfully!")}else alert("Signup completed successfully!");e.push("/login")};return(l,c)=>(L(),M("div",M6,[h("button",{class:"back-button",onClick:o}," < Back "),h("form",{onSubmit:a,class:"signup-form"},[h("div",F6,[h("div",U6,[c[3]||(c[3]=h("span",{class:"input-text-label"},"Name",-1)),Wt(h("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=d=>s.value.name=d),class:"input-field",placeholder:"Enter your name",required:""},null,512),[[ps,s.value.name]])])]),h("div",V6,[h("div",$6,[c[6]||(c[6]=h("span",{class:"input-text-label"},"Password",-1)),Wt(h("input",{type:i.value?"text":"password","onUpdate:modelValue":c[1]||(c[1]=d=>s.value.password=d),class:"input-field",placeholder:"Enter your password",required:""},null,8,H6),[[TR,s.value.password]]),he("",!0)])]),h("div",G6,[h("div",Q6,[c[7]||(c[7]=h("span",{class:"input-text-label"},"Email",-1)),Wt(h("input",{type:"email","onUpdate:modelValue":c[2]||(c[2]=d=>s.value.email=d),class:"input-field",placeholder:"Enter your email",required:""},null,512),[[ps,s.value.email]])])]),c[8]||(c[8]=h("button",{type:"submit",class:"signup-button"}," Create an account ",-1))],32)]))}},z6=Qt(j6,[["__scopeId","data-v-b23370a9"]]);function W6(n){const e=Date.now(),t=Math.random().toString(36).substring(2,15);return btoa(`${n}:${e}:${t}`).replace(/[+/=]/g,"")}function K6(n,e){const t=JSON.parse(localStorage.getItem("resetTokens")||"{}");t[e]={email:n,createdAt:Date.now(),expiresAt:Date.now()+1440*60*1e3},localStorage.setItem("resetTokens",JSON.stringify(t))}function qw(n){const e=JSON.parse(localStorage.getItem("resetTokens")||"{}"),t=e[n];return t?Date.now()>t.expiresAt?(delete e[n],localStorage.setItem("resetTokens",JSON.stringify(e)),null):t:null}function q6(n){const e=JSON.parse(localStorage.getItem("resetTokens")||"{}");delete e[n],localStorage.setItem("resetTokens",JSON.stringify(e))}function J6(n){return`${window.location.origin+window.location.pathname}#/reset-password?token=${n}`}const BT="/tdl/assets/cat9-Bzb-Egme.png",Y6={class:"forgot-password-screen"},X6={class:"cat-character-container"},Z6=["src"],e5={class:"input-group"},t5={class:"input-container"},n5=["disabled"],s5=["disabled"],r5={key:0,class:"reset-link-container"},i5={class:"reset-link-content"},o5={class:"reset-link-wrapper"},a5=["href"],l5={key:0,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},c5={key:1,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},u5={__name:"ForgotPasswordPage",setup(n){const e=Sn(),t=U(""),s=U(!1),r=U(""),i=U(!1),o=U(!1),a=()=>{e.go(-1)},l=async d=>{if(d.preventDefault(),!t.value.trim()){alert("Please enter your email address.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.value)){alert("Please enter a valid email address.");return}s.value=!0;try{if(!JSON.parse(localStorage.getItem("users")||"[]").find(A=>A.email===t.value)){alert("Email address not found."),s.value=!1;return}const w=W6(t.value);K6(t.value,w);const y=J6(w);r.value=y,alert("Password reset link has been sent to your email address."),e.push("/login")}catch(p){console.error("Password reset link generation error:",p),alert("An error occurred while generating reset link. Please try again.")}finally{s.value=!1}},c=async()=>{try{await navigator.clipboard.writeText(r.value),o.value=!0,setTimeout(()=>{o.value=!1},2e3)}catch(d){console.error("Failed to copy link:",d);const f=document.createElement("textarea");f.value=r.value,f.style.position="fixed",f.style.opacity="0",document.body.appendChild(f),f.select();try{document.execCommand("copy"),o.value=!0,setTimeout(()=>{o.value=!1},2e3)}catch(p){console.error("Fallback copy failed:",p)}document.body.removeChild(f)}};return(d,f)=>(L(),M("div",Y6,[h("button",{class:"back-button",onClick:a}," < Back "),f[5]||(f[5]=h("h1",{class:"forgot-password-title"},"Reset password",-1)),h("div",X6,[h("img",{src:De(BT),alt:"Cat Character",class:"cat-character-image"},null,8,Z6)]),h("form",{onSubmit:l,class:"forgot-password-form"},[h("div",e5,[h("div",t5,[f[1]||(f[1]=h("span",{class:"input-text-label"},"Email",-1)),Wt(h("input",{type:"email","onUpdate:modelValue":f[0]||(f[0]=p=>t.value=p),class:"input-field",placeholder:"Enter your email",required:"",disabled:s.value},null,8,n5),[[ps,t.value]])])]),h("button",{type:"submit",class:"reset-button",disabled:s.value},E(s.value?"Sending...":"Reset password"),9,s5),i.value&&r.value?(L(),M("div",r5,[f[4]||(f[4]=E1('<div class="reset-link-header" data-v-fd9c9e74><svg class="link-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-fd9c9e74><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" data-v-fd9c9e74></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" data-v-fd9c9e74></path></svg><p class="reset-link-label" data-v-fd9c9e74>Reset link (development mode)</p></div>',1)),h("div",i5,[h("div",o5,[h("a",{href:r.value,class:"reset-link",target:"_blank"},E(r.value),9,a5)]),h("button",{onClick:c,class:Oe(["copy-button",{copied:o.value}])},[o.value?(L(),M("svg",c5,[...f[3]||(f[3]=[h("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(L(),M("svg",l5,[...f[2]||(f[2]=[h("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},null,-1),h("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},null,-1)])])),h("span",null,E(o.value?"Copied!":"Copy"),1)],2)])])):he("",!0)],32)]))}},d5=Qt(u5,[["__scopeId","data-v-fd9c9e74"]]),h5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAz4SURBVHgB7d3ddRRXFobhIyJgMpAzwBGgicDjCOwQyMA4AiYDk8FMBmIiMI5AygBn0FMFjQ3or3+q6uy9z/OsVUtccK3vrVPVrdYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAjXDQA7tjtds+nH1fT9XK65n9ffvNfbqfr/XT9cXFx8a4BADnNoz9dP0/X9e44N9P123RdNgAgj2m8X03Xh935/iMEACC4eaxPuOM/xOsGAMSz+3Tcv8Rd/0Nudk4DACCO+Q59t40bEQAAAWw4/iIAACLoMP5fRsDzBgBsq+P4f/amAQDbCTD+n101AGB9uzjjP7tuAMC6drHG/7OrBgCsYxdz/GdOAejOHwMCStp9+ia+X1pc/7i4uPizQSfPGkAxCcZ/9kODjgQAUEqS8Z9dNehIAABlJBr/2YsGHQkAoIRk4z/zrYB05SVAIL2E4//RxaRBJ04AgNSyjj/0JgCAtIw/nE4AACkVGP/bBh0JACCdInf+tw06EgBAKoWO/d836EgAAGkUe+b/rkFHPoICpFDwhT9/C4CunAAA4RUc/7fGn96cAAChFf2o3/dTAHgHgK6cAABhFR3/t8afCJwAACEV/pKf76YAuG3QmRMAIJzC4//a+BOFEwAglMLj/99p/H9sEIQAAMIoPP7zM/9/evOfSAQAEILxh20JAKA74w/bEwBAV8Yf+hAAQDfGH/oRAEAXxh/6EgDA5ow/9CcAgE0Zf4hBAACbMf4QhwAANmH8IRYBAKzO+EM8AgBYlfGHmAQAsBrjD3EJAGAVxh9iEwDA4ow/xCcAgEUZf8hBAACLMf6QhwAAFmH8IRcBAJzN+EM+AgA4i/GHnAQAcDLjD3kJAOAkxh9yEwDA0Yw/5CcAgKMYf6hBAAAHM/5QhwAADmL8oRYBADzJ+EM9AgB4lPGHmgQA8CDjD3UJAOBexh9qEwDAHcYf6hMAwFeMP4xBAAB/Mf4wDgEAfGT8YSwCADD+MCABAIMz/jAmAQADM/4wLgEAgzL+MDYBAAMy/oAAgMEYf2AmAGAgxh/4TADAIIw/8CUBAAMw/sC3BAAUZ/yB+wgAKMz4Aw8RAFCU8QceIwCgIOMPPEUAQDHGHziEAIBCjD9wKAEARRh/4BgCAAow/sCxBAAkZ/yBUwgASMz4A6cSAJCU8QfOIQAgIeMPnEsAQDLGH1iCAIBEjD+wFAEASRh/YEkCABIw/sDSBAAEZ/yBNQgACMz4A2sRABCU8QfWJAAgIOMPrE0AQDDGH9iCAIBAjD+wFQEAQRh/YEsCAAIw/sDWBAB0ZvyBHgQAdGT8gV4EAHRi/IGeBAB0YPyB3gQAbMz4AxEIANiQ8QeiEACwEeMPRCIAYAPGH4hGAMDKjD8QkQCAFRl/ICoBACsx/kBkAgBWYPyB6AQALMz4AxkIAFiQ8QeyEACwEOMPZCIAYAHGH8hGAMCZjD+QkQCAMxh/ICsBACcy/kBmAgBOYPyB7AQAHMn4AxUIADiC8QeqEABwIOMPVCIA4ADGH6hGAMATjD9QkQCARxh/oCoBAA8w/kBlAgDuYfyB6gQAfMP4AyMQAPAF4w+MQgDAnvEHRiIAoBl/YDwCgOEZf2BEAoChGX9gVAKAYRl/YGQCgCEZf2B0AoDhGH8AAcBgjD/AJwKAYRh/gL8JAIZg/AG+JgAoz/gD3CUAKM34A9xPAFCW8Qd4mACgJOMP8DgBQDnGH+BpAoBSjD/AYQQAZRh/gMMJAEow/gDHEQCkZ/wBjicASM34A5xGAJCW8Qc4nQAgJeMPcB4BQDrGH+B8AoBUjD/AMgQAaRh/gOUIAFIw/gDLEgCEZ/wBlicACM34A6xDABCW8QdYjwAgJOMPsC4BQDjGH2B9AoBQpvF/Nf140+ox/kAoAoAwpvG/nH7ctHqMPxDOswZxXLd6jD8QkgAghP1z/8tWi/EHwhIAdLc/+v+p1WL8gdAEABFctVp3/8YfCM9LgHQ3nQDML/5dthqMP5CCEwC6msb/RTP+AJsTAPT2stVg/IFUBAC9XbX8jD+QjgCgt8uWm/EHUhIA9HbZ8jL+QFo+BUBXu0nLyfgDqTkBAIABCQB6y3oHPX988Xo6wHjeABISAPSW+QhdBABpCQB6e99yEwFASgKA3t61/EQAkI4AoLc/Wg0iAEjFxwDpzh8DAtieEwAieNvqcBIApOAEgO72YzmfAlQaTScBQGhOAOhuP5L/brU4CQBCcwJACPuh/L3VeRfgMycBQEhOAAhhP5A/ttxfDHQfJwFASAKAMKYImO+Wf231iAAgHAFAKFMEzO8CvG71iAAgFO8AENI0lL+0miHgnQAgBAFAWCIAYD0CgNBEAMA6BADhiQCA5QkAUhABAMsSAKQhAgCWIwBIRQQALEMAkI4IADifACAlEQBwHgFAWiIA4HQCgNREAMBpBADpiQCA4wkAShABAMcRAJQhAgAOJwAoRQQAHEYAUI4IAHiaAKAkEQDwOAFAWSIA4GECgNJEAMD9BADliQCAuwQAQxABAF8TAAxDBAD8TQAwFBEA8IkAYDgiAEAAMCgRAIxOADAsEQCMTAAwNBEAjEoAMDwRAIxIAEATAcB4BADsiQBgJAIAviACgFEIAPiGCABGIADgHiIAqE4AwANEAFCZAIBHiACgKgEATxABQEUCAA4gAoBqBAAcSAQAlQgAOIIIAKoQAHAkEQBUIADgBCIAyE4AwIlEAJCZAIAziAAgKwEAZxIBQEYCABYgAoBsBAAsRAQAmQgAWJAIALIQALAwEQBkIABgBSIAiE4AwEpEABCZAIAViQAgKgEAKxMBQEQCADYgAoBoBABsRAQAkQgA2JAIAKIQALAxEQBEIACgAxEA9CYAoBMRAPQkAKAjEQD0IgCgMxEA9CAAIAARAGxNAEAQIgDYkgCAQEQAsBUBAMGIAGALAgACEgHA2gQABCUCgDUJAAhMBABrEQAQnAgA1iAAIAERACxNAEASIgBYkgCAREQAsBQBAMmIAGAJAgASEgHAuQQAJCUCgHMIAEhMBACnEgCQnAgATiEAoAARABxLAEARIgA4hgCAQkQAcCgBAMWIAOAQAgAKEgHAUwQAFCUCgMcIAChMBAAPEQBQnAgA7iMAYAAiAPiWAIBBiADgSwIABiICgM8EAAxGBAAzAQADEgGAAIBBiQAYmwCAgYkAGJcAgMGJABiTAABEAAxIAAAfiQAYiwAA/iICYBwCAPiKCIAxCADgDhEA9QkA4F4iAGoTAMCDRADUJQCAR4kAqEkAAE8SAVCPAAAOIgKgFgEAHEwEQB0CADiKCIAaBABwNBEA+QkA4CQiAHITAMDJRADkJQCAs4gAyEkAAGcTAZCPAAAWIQIgFwEALEYEQB4CAFiUCIAcBACwOBEA8QkAYBUiAGITAMBqRADEJQCAVYkAiEkAAKsTARCPAAA2IQIgFgEAbEYEQBwCANiUCIAYBACwOREA/QkAoAsRAH0JAKAbEQD9CACgKxEAfQgAoDsRANsTAEAIIgC2JQCAMEQAbOdZAwhiGshfW80AeDFdvzUIRAAAoRSOgH9NJxyvGgThEQAQUtHHAfMjgO+nyLlt0JkTACCkoicBz5tHAQQhAICwikbA1XS6cdWgMwEAhFY0An5q0Jl3AIAUir0TML8L8J2PBdKTEwAghWInAfO7AC8bdCQAgDSKRcBVg44EAJBKoQh40aAjAQCkUyQCLht05CVAIK3sLwZOIeN3MN04AQDSKvy1wbA6AQCkJgLgNAIASC9pBNw26EgAACUkjIDbBh0JAKCMZBFw26AjAQCUkigC3jUAYFnzRwR3sV02AGB5u7gRcN2gM48AgLICPw542wCAde1inQTcNABgG7s4EfBDAwC2s+sfAW8aALC9jhFwM13PGwDQR4cIuNn52B8A9LdhBNwYfwAIZBrmV9P1Ybee340/AAQ0D/T+Ln1pb3ae+QNAbNNY/7xQCFxP18sGAOSxD4Hr3XE+7O/4DT9pXDQA7tgf38+D/mJ/fXmc/+f+ej9fFxcX/2sAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABU9n/G+xQHTFSybwAAAABJRU5ErkJggg==",f5={class:"reset-password-screen"},p5={class:"email-info"},g5={class:"input-group"},m5={class:"input-container"},v5=["disabled"],y5={class:"input-group"},A5={class:"input-container"},w5=["disabled"],_5=["disabled"],E5={key:1,class:"loading-container"},b5={__name:"ResetPasswordPage",setup(n){const e=Sn(),t=Q1(),s=U(""),r=U(""),i=U(!1),o=U(""),a=U(!1),l=U("");Nt(()=>{if(o.value=t.query.token||"",!o.value){alert("Invalid reset link. Please request a new password reset."),e.push("/forgot-password");return}const f=qw(o.value);if(!f){alert("Reset link has expired or is invalid. Please request a new password reset."),e.push("/forgot-password");return}a.value=!0,l.value=f.email});const c=()=>{e.push("/login")},d=async f=>{if(f.preventDefault(),!s.value.trim()||!r.value.trim()){alert("Please enter new password and confirm it.");return}if(s.value!==r.value){alert("Passwords do not match.");return}if(s.value.length<6){alert("Password must be at least 6 characters long.");return}i.value=!0;try{const p=qw(o.value);if(!p){alert("Reset link has expired. Please request a new password reset."),e.push("/forgot-password");return}const m=JSON.parse(localStorage.getItem("users")||"[]"),w=m.findIndex(A=>A.email===p.email);if(w===-1){alert("User not found."),i.value=!1;return}const y=await Af(s.value);m[w].password=y,localStorage.setItem("users",JSON.stringify(m)),q6(o.value),alert("Password has been reset successfully. Please login with your new password."),e.push("/login")}catch(p){console.error("Password reset error:",p),alert("An error occurred while resetting password. Please try again.")}finally{i.value=!1}};return(f,p)=>(L(),M("div",f5,[h("button",{class:"back-button",onClick:c},[...p[2]||(p[2]=[h("img",{src:h5,alt:"back-button",width:"20px"},null,-1)])]),p[6]||(p[6]=h("h1",{class:"reset-password-title"},"Reset Password",-1)),a.value?(L(),M("form",{key:0,onSubmit:d,class:"reset-password-form"},[h("p",p5,"Reset password for: "+E(l.value),1),h("div",g5,[h("div",m5,[p[3]||(p[3]=h("span",{class:"input-text-label"},"password",-1)),Wt(h("input",{type:"password","onUpdate:modelValue":p[0]||(p[0]=m=>s.value=m),class:"input-field",placeholder:"Enter new password",required:"",disabled:i.value},null,8,v5),[[ps,s.value]])])]),h("div",y5,[h("div",A5,[p[4]||(p[4]=h("span",{class:"input-text-label"},"password",-1)),Wt(h("input",{type:"password","onUpdate:modelValue":p[1]||(p[1]=m=>r.value=m),class:"input-field",placeholder:"Confirm new password",required:"",disabled:i.value},null,8,w5),[[ps,r.value]])])]),h("button",{type:"submit",class:"reset-button",disabled:i.value},E(i.value?"Resetting...":"Reset Password"),9,_5)],32)):(L(),M("div",E5,[...p[5]||(p[5]=[h("p",null,"Validating reset link...",-1)])]))]))}},I5=Qt(b5,[["__scopeId","data-v-3509f8b7"]]),C5="/tdl/assets/tul1-CuZ0qR5D.png",T5="/tdl/assets/tul2-Cj7OkHg6.png",S5="/tdl/assets/tul3-CaPMxBJ-.png",P5="/tdl/assets/tul5-CQc-0WLd.png",R5="/tdl/assets/tul6-COB-AGqQ.png",x5="/tdl/assets/energyIcon-BrO4HZx-.png",Vg="/tdl/assets/pointIcon-Cel8s0wp.png",Ah="/tdl/assets/coinIcon-NUhL-dlJ.png",MT="/tdl/assets/catPoint-t6vwZH27.png",k5="/tdl/assets/shopIcon-Cs4Crcae.png",N5="/tdl/assets/setting-CxNpDL9x.png",Jw=4e3,FT=(n,e={value:Jw})=>{const t=new Date().toDateString(),s=localStorage.getItem("energyLastDate"),r=localStorage.getItem("currentEnergy"),i=typeof e.value=="number"?e.value:parseInt(e.value,10)||Jw;if(s!==t)n.value=i,localStorage.setItem("energyLastDate",t),localStorage.setItem("currentEnergy",i.toString());else if(r){const o=parseInt(r,10)||0;n.value=Math.max(0,Math.min(o,i))}else n.value=i,localStorage.setItem("energyLastDate",t),localStorage.setItem("currentEnergy",i.toString());typeof n.value!="number"&&(n.value=parseInt(n.value,10)||0)},D5={class:"headerCont"},O5={class:"headerBar"},L5={class:"resourceValue"},B5={class:"resourceValue"},M5={class:"resourceValue"},F5={class:"resourceValue"},U5={key:0,class:"rightIconButtons"},V5={__name:"Header",props:{hideRightIcons:{type:Boolean,default:!1}},setup(n){const e=U(localStorage.getItem("appLanguage")||"English");pe(()=>gs());const t=Sn(),s=on(),r=pe(()=>s.state.coins),i=pe(()=>s.state.totalCoin),o=pe(()=>s.state.catFragments),l=U((()=>{const _=localStorage.getItem("currentEnergy");if(_){const C=parseInt(_,10);return isNaN(C)?4e3:C}return 4e3})()),c=U(4e3),d=()=>{FT(l,c),typeof l.value!="number"&&(l.value=parseInt(l.value,10)||0)},f=pe(()=>{let _=l.value;if(typeof _=="string"?_=parseInt(_,10):typeof _!="number"&&(_=Number(_)),isNaN(_)||_===null||_===void 0)return"0";const C=Math.floor(_);return A(C)});U(!1);const p=()=>{t.push("/settings")},m=()=>{t.push("/shop")},w=()=>{t.push("/nft")};let y=null;Nt(()=>{s.loadCurrentUser(),d(),y=setInterval(()=>{const C=localStorage.getItem("appLanguage")||"English";C!==e.value&&(e.value=C),d()},500);const _=()=>{s.loadCurrentUser(),d()};window.addEventListener("userDataUpdated",_),rn(()=>{window.removeEventListener("userDataUpdated",_),y&&clearInterval(y)})});const A=s.formatNumber;return(_,C)=>(L(),M("header",null,[h("div",D5,[h("div",O5,[h("button",{class:"resourceItem energyItem",onClick:m},[C[0]||(C[0]=h("img",{src:x5,alt:"",class:"resourceIcon"},null,-1)),h("span",L5,E(f.value),1)]),h("button",{class:"resourceItem",onClick:m},[C[1]||(C[1]=h("img",{src:Vg,alt:"",class:"resourceIcon"},null,-1)),h("span",B5,E(De(A)(r.value)),1)]),h("button",{class:"resourceItem",onClick:m},[C[2]||(C[2]=h("img",{src:Ah,alt:"",class:"resourceIcon"},null,-1)),h("span",M5,E(De(A)(i.value)),1)]),h("button",{class:"resourceItem",onClick:m},[C[3]||(C[3]=h("img",{src:MT,alt:"",class:"resourceIcon"},null,-1)),h("span",F5,E(De(A)(o.value)),1)])]),n.hideRightIcons?he("",!0):(L(),M("div",U5,[h("button",{class:"iconButton nftButton",onClick:w,title:"NFT"},[...C[4]||(C[4]=[h("img",{src:k5,alt:"NFT",class:"icon-img"},null,-1)])]),h("button",{class:"iconButton settingsButton",onClick:p,title:""},[...C[5]||(C[5]=[h("div",{class:"iconCircle settingsIconCircle"},[h("img",{src:N5,alt:"",class:"icon-img"})],-1)])]),he("",!0)]))])]))}},Qn=Qt(V5,[["__scopeId","data-v-b3f306da"]]),Yw="/tdl/assets/tabIcon1-BMQwD5kb.png",$5="/tdl/assets/tabIcon2-Ba9ZXsKV.png",Xw="/tdl/assets/tabIcon3-C85F2_hQ.png",Zw="/tdl/assets/tabIcon4-Dfn0WYn7.png",e_="/tdl/assets/tabIcon5-CFF9Ua2B.png",t_="/tdl/assets/optionButton-k0xsRNG2.png",H5={class:"footerCont"},G5={class:"footerBar"},Q5=["onClick"],j5={class:"tabContent"},z5=["src","alt"],W5={key:1,class:"tabEmoji"},K5={__name:"Footer",setup(n){const e=Sn(),t=U("home"),s=U(localStorage.getItem("appLanguage")||"English"),r=pe(()=>gs()),i=d=>{d.key==="appLanguage"&&(s.value=d.newValue||"English")},o=()=>{switch(e.currentRoute.value.path){case"/main":t.value="game";break;case"/home":t.value="home";break;case"/exchange":t.value="exchange";break;case"/social":t.value="social";break;case"/inventory":t.value="inventory";break;case"/factory":t.value="factory";break;case"/settings":t.value="settings";break;default:t.value="home"}};let a=null;Nt(()=>{o(),window.addEventListener("storage",i),a=setInterval(()=>{const d=localStorage.getItem("appLanguage")||"English";d!==s.value&&(s.value=d)},100)}),rn(()=>{window.removeEventListener("storage",i),a&&clearInterval(a)}),Kr(()=>e.currentRoute.value.path,()=>{o()}),Kr(s,()=>{});const l=pe(()=>[{id:"game",img:Yw,imgActive:Yw,label:r.value.game},{id:"social",img:e_,imgActive:e_,label:"Social"},{id:"home",img:Xw,imgActive:Xw,label:r.value.home},{id:"exchange",img:Zw,imgActive:Zw,label:r.value.exchange},{id:"settings",img:t_,imgActive:t_,label:r.value.settings||"Settings"}]),c=d=>{switch(t.value=d,d){case"home":e.push("/home");break;case"game":e.push("/main");break;case"social":e.push("/social");break;case"exchange":e.push("/exchange");break;case"settings":e.push("/settings");break;case"factory":e.push("/factory");break;case"inventory":e.push("/inventory");break}};return(d,f)=>(L(),M("footer",null,[h("div",H5,[h("div",G5,[(L(!0),M(Re,null,We(l.value,p=>(L(),M("div",{key:p.id,class:Oe(["tabItem",{active:t.value===p.id}]),onClick:m=>c(p.id)},[h("div",j5,[p.img?(L(),M("img",{key:0,src:t.value===p.id?p.imgActive:p.img,alt:p.label,class:"tabIcon"},null,8,z5)):he("",!0),p.emoji?(L(),M("span",W5,E(p.emoji),1)):he("",!0)])],10,Q5))),128))])])]))}},jn=Qt(K5,[["__scopeId","data-v-2c68780f"]]);function Gr(n){return(n+1)*100}function q5(n){if(!n)return!1;const e=n.exp||0,t=n.maxExp||Gr(n.level||1);return e>=t}function Cp(n){return n*50}function J5(n){if(!n||!n.rarity)return 5;const e={common:1,rare:1.1,epic:1.2,legendary:1.3},t=5,s=e[n.rarity]||1;return Math.floor(t*s)}function wh(n){return n&&{...n,exp:n.exp!==void 0?n.exp:0,maxExp:n.maxExp!==void 0?n.maxExp:Gr(n.level||1)}}const Y5="/tdl/assets/mainTab1-2-yTW8RB.png",X5="/tdl/assets/mainTab1_off-CYH0tU-A.png",Z5="/tdl/assets/mainTab2-DYAFv8pb.png",e8="/tdl/assets/mainTab2_off-Cd7YzEgp.png",t8="/tdl/assets/mainTab3-SUKPiFtY.png",n8="/tdl/assets/mainTab3_off-BBdSbCVr.png",s8="/tdl/assets/mainTab4-wBIEQHF7.png",r8="/tdl/assets/mainTab4_off-BKjmP7bC.png",ud="/tdl/assets/plusMini-HInupkEh.png",i8="/tdl/assets/energyMini-BWyfGT5k.png",o8={class:"mainScreen"},a8=["src"],l8={class:"mainContent"},c8={class:"modeTabs"},u8=["src"],d8={class:"modeTabLevel"},h8=["src"],f8={class:"modeTabLevel"},p8=["src"],g8={class:"modeTabLevel"},m8=["src"],v8={class:"modeTabLevel"},y8={class:"clickerArea"},A8={class:"totalPointsDisplay"},w8={class:"pointAnimations"},_8={class:"clickerAndEnergyContainer"},E8={class:"energySection"},b8=["src"],I8={class:"energyBar"},C8={class:"energyText"},T8={class:"clickerButtonContainer"},S8={key:1,class:"completeMessageContainer"},P8={class:"completeMessageText"},R8={class:"rewardInfo"},x8={class:"rewardItem"},k8={key:0,class:"rewardItem"},N8={key:1,class:"completeMessageContainer"},D8={class:"completeMessageText"},O8={class:"rewardInfo"},L8={class:"rewardItem"},B8={key:0,class:"rewardItem"},M8={key:1,class:"completeMessageContainer"},F8={class:"completeMessageText"},U8={class:"rewardInfo"},V8={class:"rewardItem"},$8={key:0,class:"rewardItem"},H8={key:1,class:"completeMessageContainer"},G8={class:"completeMessageText"},Q8={class:"rewardInfo"},j8={class:"rewardItem"},z8={key:0,class:"rewardItem"},W8={class:"catsSection"},K8={class:"catsListScroll"},q8=["onClick"],J8={key:0,class:"catImage"},Y8=["src"],X8={key:1,class:"emptySlotContent"},Z8=["src"],e9=["onClick"],t9={key:0,class:"catImage"},n9=["src"],s9={key:1,class:"emptySlotContent"},r9=["src"],i9=["onClick"],o9={key:0,class:"catImage"},a9=["src"],l9={key:1,class:"emptySlotContent"},c9=["src"],u9=["onClick"],d9={key:0,class:"catImage"},h9=["src"],f9={key:1,class:"emptySlotContent"},p9=["src"],g9={class:"speechBubbles"},m9={class:"catEmojis"},v9=["src","onError"],y9={class:"catSelectPopupHeader"},A9={class:"catSelectPopupBody"},w9={key:0,class:"removeCatSection"},_9={class:"availableCatsGrid"},E9=["onClick"],b9={class:"availableCatImage"},I9=["src"],C9={class:"availableCatInfo"},T9={class:"availableCatName"},S9={class:"availableCatLevel"},P9={class:"availableCatStars"},R9={__name:"MainScreen",setup(n){const e=on(),t=pe(()=>gs()),s=Sn(),r=()=>{s.push("/inventory")},i=U(null),o=U("mining"),a=pe(()=>e.state.coins),l=pe(()=>e.state.coins),c=pe(()=>e.state.totalCoin),d=pe(()=>e.state.catFragments),f=pe(()=>o.value==="mining"?C.value:o.value==="hunting"?ke.value:o.value==="exploration"?I.value:o.value==="production"?Ve.value:0),p=async J=>{try{await e.updateCoins(J)||console.error("  ")}catch(re){console.error("    :",re)}},m=async J=>{try{await e.updateCatFragments(J)||console.error("   ")}catch(re){console.error("     :",re)}},w=U([]),y=U([]),A=U([]),_=U(null),C=U(0),S=U(0),B=U(1),V=U(!1),j=U(!0),x=U({points:0,fragments:0}),I=U(0),P=U(0),T=U(1),b=U(!1),D=U(!0),k=U({points:0,fragments:0}),ke=U(0),ie=U(0),G=U(1),$=U(!1),Z=U(!0),me=U({points:0,fragments:0}),Ve=U(0),Ne=U(0),se=U(1),W=U(!1),ue=U(!0),Pe=U({points:0,fragments:0}),tt=J=>Math.pow(2,J-1),Y=(J,re)=>!J||!Array.isArray(J)?0:J.reduce((ee,Ae)=>Ae&&Ae[re]?ee+(Ae[re]||0):ee,0),ge=()=>Y(He.value,"miningEfficiency"),fe=()=>Y(an.value,"huntingDamage"),we=()=>Y(Ut.value,"explorationReward"),Qe=()=>Y(ln.value,"productionSpeed"),N=async(J,re)=>{if(!J||J.length===0)return;const ee=dt();if(!ee)return;const Ae=ee.gameData?.inventory||[],Le=J.filter(qe=>qe!==null).map(qe=>qe.id);if(Le.length===0)return;const Ze=Ae.map(qe=>{if(Le.includes(qe.id)){const Ce=wh(qe),wt=(Ce.exp||0)+re,Vt=Ce.level||1,Pn=Gr(Vt);return{...Ce,exp:wt,maxExp:Pn}}return wh(qe)});try{await e.updateGameData({inventory:Ze})}catch(qe){console.error("NFT   :",qe)}},O=J=>{o.value=J},Q=()=>{s.currentRoute.value.path==="/main"&&o.value==="main"&&(o.value="mining")};Nt(()=>{if(i.value=dt(),!i.value){const re={id:"guest_"+Date.now(),email:"guest@tdl.com",name:"Guest",loginType:"guest",gameData:{level:1,coins:0,totalCoin:0,catFragments:50,nftCount:0,miningLevel:1,huntingLevel:1,explorationLevel:1,productionLevel:1,planetLevel:1,planetEnergy:0,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}};localStorage.setItem("currentUser",JSON.stringify(re)),sessionStorage.setItem("currentUser",JSON.stringify(re)),i.value=re}if(e.loadCurrentUser(),i.value){B.value=i.value.gameData?.miningLevel||1,S.value=i.value.gameData?.miningTotalClicks||0,G.value=i.value.gameData?.huntingLevel||1,ie.value=i.value.gameData?.huntingTotalClicks||0,T.value=i.value.gameData?.explorationLevel||1,P.value=i.value.gameData?.explorationTotalClicks||0,se.value=i.value.gameData?.productionLevel||1,Ne.value=i.value.gameData?.productionTotalClicks||0,Me.value=i.value.gameData?.planetLevel||1,ae.value=i.value.gameData?.planetEnergy||0;const re=ee=>{const Ae=(ee||[]).slice(0,4);return Ae.length===4?Ae:[...Ae,...Array(4-Ae.length).fill(null)]};i.value.gameData?.miningCats!==void 0&&(He.value=re(i.value.gameData.miningCats)),i.value.gameData?.huntingCats!==void 0&&(an.value=re(i.value.gameData.huntingCats)),i.value.gameData?.explorationCats!==void 0&&(Ut.value=re(i.value.gameData.explorationCats)),i.value.gameData?.productionCats!==void 0&&(ln.value=re(i.value.gameData.productionCats))}FT(F,z),Kr(()=>s.currentRoute.value.path,()=>{Q()});try{_.value=new Audio,_.value.src=new URL("/tdl/assets/clickbgm-BvbCQtA-.mp3",import.meta.url).href,_.value.volume=.3}catch{}const J=()=>{!te()&&_.value&&(_.value.pause(),_.value.currentTime=0)};window.addEventListener("soundSettingChanged",J),Yt("mining"),Yt("hunting"),Yt("exploration"),Yt("production"),rn(()=>{_f(),window.removeEventListener("soundSettingChanged",J)})});const te=()=>{const J=localStorage.getItem("soundEnabled");return J!==null?J==="true":!0},K=async J=>{if(_.value&&te()&&(_.value.currentTime=0,_.value.play().catch(()=>{})),F.value<ne.value){alert(" !");return}if(xe()){if(J==="mining"){if(C.value++,S.value++,S.value>=B.value*1e3){B.value++;const re={id:Date.now(),text:`${t.value.mining} ${t.value.levelUp} Lv.${B.value}`,x:Math.random()*(Math.min(window.innerWidth||500,500)-220-40)+20,y:Math.random()*(window.innerHeight||500)+100};if(w.value.push(re),setTimeout(()=>{const ee=w.value.findIndex(Ae=>Ae.id===re.id);ee>-1&&w.value.splice(ee,1)},3e3),i.value)try{await e.updateGameData({miningLevel:B.value,miningTotalClicks:S.value})}catch(ee){console.error("   :",ee)}}if(C.value>=10){const ee=tt(B.value),Ae=ge()/100,Le=Math.floor(100*ee*(1+Ae)),Ze=a.value+Le;await p(Ze),C.value=0,V.value=!0,j.value=!1,await ve();const qe=Math.random();let Ce=0;qe<.3?Ce=1:qe<.4&&(Ce=2),x.value={points:Le,fragments:Ce};const wt={id:Date.now(),points:Le,x:50,y:20};if(A.value.push(wt),setTimeout(()=>{const Ue=A.value.findIndex(ht=>ht.id===wt.id);Ue>-1&&A.value.splice(Ue,1)},2e3),Ce>0){const Ue=d.value+Ce;d.value=Ue,await m(Ue);for(let ht=0;ht<Ce;ht++){const vs=Math.floor(Math.random()*6)+1,Mn=Math.min(window.innerWidth||500,500),zn=window.innerHeight||800,$t=60,Ht=30,Wn={id:Date.now()+ht,x:Math.random()*(Mn-$t-Ht*2)+Ht,y:Math.random()*(zn-$t-Ht*2-200)+100,imageId:vs};y.value.push(Wn),setTimeout(()=>{const En=y.value.findIndex(Cs=>Cs.id===Wn.id);En>-1&&y.value.splice(En,1)},2e3)}}if(i.value)try{await e.updateGameData({miningTotalClicks:S.value,miningLevel:B.value})}catch(Ue){console.error("   :",Ue)}const Vt=Math.min(window.innerWidth||500,500),Pn=window.innerHeight||800,ms=220,ns=Ce>0?80:60,jt=20,Bn=Math.round(ge());let _n=`${t.value.miningComplete}
${Le.toLocaleString()} ${t.value.pointsEarned}`;Bn>0&&(_n+=`
(NFT Bonus: +${Bn}%)`),Ce>0&&(_n+=`
${t.value.fragmentsEarned} ${Ce} ${t.value.fragmentsEarnedCount}`);const Ct={id:Date.now(),text:_n,x:Math.random()*(Vt-ms-jt*2)+jt,y:Math.random()*(Pn-ns-jt*2-200)+100};w.value.push(Ct),setTimeout(()=>{const Ue=w.value.findIndex(ht=>ht.id===Ct.id);Ue>-1&&w.value.splice(Ue,1)},3e3),setTimeout(()=>{V.value=!1,j.value=!0,x.value={points:0,fragments:0}},1500)}else{const re=Math.min(window.innerWidth||500,500),ee=window.innerHeight||800,Ae=220,Le=60,Ze=20,qe={id:Date.now(),text:`${t.value.miningProgress}: ${C.value}/10`,x:Math.random()*(re-Ae-Ze*2)+Ze,y:Math.random()*(ee-Le-Ze*2-200)+100};w.value.push(qe),setTimeout(()=>{const Ce=w.value.findIndex(wt=>wt.id===qe.id);Ce>-1&&w.value.splice(Ce,1)},2e3)}}else if(J==="exploration"){if(I.value++,P.value++,P.value>=T.value*1e3){T.value++;const re={id:Date.now(),text:`${t.value.exploration} ${t.value.levelUp} Lv.${T.value}`,x:Math.random()*(Math.min(window.innerWidth||500,500)-220-40)+20,y:Math.random()*(window.innerHeight||500)+100};if(w.value.push(re),setTimeout(()=>{const ee=w.value.findIndex(Ae=>Ae.id===re.id);ee>-1&&w.value.splice(ee,1)},3e3),i.value)try{await e.updateGameData({explorationLevel:T.value,explorationTotalClicks:P.value})}catch(ee){console.error("   :",ee)}}if(I.value>=10){const ee=tt(T.value),Ae=we()/100,Le=Math.floor(100*ee*(1+Ae)),Ze=a.value+Le;await p(Ze),I.value=0,b.value=!0,D.value=!1,await ve();const qe=Math.random();let Ce=0;qe<.3?Ce=1:qe<.4&&(Ce=2),k.value={points:Le,fragments:Ce};const wt={id:Date.now(),points:Le,x:50,y:20};if(A.value.push(wt),setTimeout(()=>{const Ue=A.value.findIndex(ht=>ht.id===wt.id);Ue>-1&&A.value.splice(Ue,1)},2e3),await N(Ut.value,10),Ce>0){const Ue=d.value+Ce;d.value=Ue,await m(Ue);for(let ht=0;ht<Ce;ht++){const vs=Math.floor(Math.random()*6)+1,Mn=Math.min(window.innerWidth||500,500),zn=window.innerHeight||800,$t=60,Ht=30,Wn={id:Date.now()+ht,x:Math.random()*(Mn-$t-Ht*2)+Ht,y:Math.random()*(zn-$t-Ht*2-200)+100,imageId:vs};y.value.push(Wn),setTimeout(()=>{const En=y.value.findIndex(Cs=>Cs.id===Wn.id);En>-1&&y.value.splice(En,1)},2e3)}}if(i.value)try{await e.updateGameData({explorationTotalClicks:P.value,explorationLevel:T.value})}catch(Ue){console.error("   :",Ue)}const Vt=Math.min(window.innerWidth||500,500),Pn=window.innerHeight||800,ms=220,ns=Ce>0?80:60,jt=20,Bn=Math.round(we());let _n=`${t.value.explorationComplete}
${Le.toLocaleString()} ${t.value.pointsEarned}`;Bn>0&&(_n+=`
(NFT Bonus: +${Bn}%)`),Ce>0&&(_n+=`
${t.value.fragmentsEarned} ${Ce} ${t.value.fragmentsEarnedCount}`);const Ct={id:Date.now(),text:_n,x:Math.random()*(Vt-ms-jt*2)+jt,y:Math.random()*(Pn-ns-jt*2-200)+100};w.value.push(Ct),setTimeout(()=>{const Ue=w.value.findIndex(ht=>ht.id===Ct.id);Ue>-1&&w.value.splice(Ue,1)},3e3),setTimeout(()=>{b.value=!1,D.value=!0,k.value={points:0,fragments:0}},1500)}else{const re=Math.min(window.innerWidth||500,500),ee=window.innerHeight||800,Ae=220,Le=60,Ze=20,qe={id:Date.now(),text:`${t.value.explorationProgress}: ${I.value}/10`,x:Math.random()*(re-Ae-Ze*2)+Ze,y:Math.random()*(ee-Le-Ze*2-200)+100};w.value.push(qe),setTimeout(()=>{const Ce=w.value.findIndex(wt=>wt.id===qe.id);Ce>-1&&w.value.splice(Ce,1)},2e3)}}else if(J==="hunting"){if(ke.value++,ie.value++,ie.value>=G.value*1e3){G.value++;const re={id:Date.now(),text:`${t.value.hunting} ${t.value.levelUp} Lv.${G.value}`,x:Math.random()*(Math.min(window.innerWidth||500,500)-220-40)+20,y:Math.random()*(window.innerHeight||500)+100};if(w.value.push(re),setTimeout(()=>{const ee=w.value.findIndex(Ae=>Ae.id===re.id);ee>-1&&w.value.splice(ee,1)},3e3),i.value)try{await e.updateGameData({huntingLevel:G.value,huntingTotalClicks:ie.value})}catch(ee){console.error("   :",ee)}}if(ke.value>=10){const ee=tt(G.value),Ae=fe()/100,Le=Math.floor(100*ee*(1+Ae)),Ze=a.value+Le;await p(Ze),ke.value=0,$.value=!0,Z.value=!1,await ve();const qe=Math.random();let Ce=0;qe<.3?Ce=1:qe<.4&&(Ce=2),me.value={points:Le,fragments:Ce};const wt={id:Date.now(),points:Le,x:50,y:20};if(A.value.push(wt),setTimeout(()=>{const Ct=A.value.findIndex(Ue=>Ue.id===wt.id);Ct>-1&&A.value.splice(Ct,1)},2e3),await N(an.value,10),Ce>0){const Ct=d.value+Ce;d.value=Ct,await m(Ct);for(let Ue=0;Ue<Ce;Ue++){const ht=Math.floor(Math.random()*6)+1,vs=Math.min(window.innerWidth||500,500),Mn=window.innerHeight||800,zn=60,$t=30,Ht={id:Date.now()+Ue,x:Math.random()*(vs-zn-$t*2)+$t,y:Math.random()*(Mn-zn-$t*2-200)+100,imageId:ht};y.value.push(Ht),setTimeout(()=>{const Wn=y.value.findIndex(En=>En.id===Ht.id);Wn>-1&&y.value.splice(Wn,1)},2e3)}}if(i.value)try{await e.updateGameData({huntingTotalClicks:ie.value,huntingLevel:G.value})}catch(Ct){console.error("   :",Ct)}const Vt=Math.min(window.innerWidth||500,500),Pn=window.innerHeight||800,ms=220,ns=Ce>0?80:60,jt=20;let Bn=`${t.value.huntingComplete}
${Le.toLocaleString()} ${t.value.pointsEarned}`;Ce>0&&(Bn+=`
${t.value.fragmentsEarned} ${Ce} ${t.value.fragmentsEarnedCount}`);const _n={id:Date.now(),text:Bn,x:Math.random()*(Vt-ms-jt*2)+jt,y:Math.random()*(Pn-ns-jt*2-200)+100};w.value.push(_n),setTimeout(()=>{const Ct=w.value.findIndex(Ue=>Ue.id===_n.id);Ct>-1&&w.value.splice(Ct,1)},3e3),setTimeout(()=>{$.value=!1,Z.value=!0,me.value={points:0,fragments:0}},1500)}else{const re=Math.min(window.innerWidth||500,500),ee=window.innerHeight||800,Ae=220,Le=60,Ze=20,qe={id:Date.now(),text:`${t.value.huntingProgress}: ${ke.value}/10`,x:Math.random()*(re-Ae-Ze*2)+Ze,y:Math.random()*(ee-Le-Ze*2-200)+100};w.value.push(qe),setTimeout(()=>{const Ce=w.value.findIndex(wt=>wt.id===qe.id);Ce>-1&&w.value.splice(Ce,1)},2e3)}}else if(J==="production"){if(Ve.value++,Ne.value++,Ne.value>=se.value*1e3){se.value++;const re={id:Date.now(),text:`${t.value.production} ${t.value.levelUp} Lv.${se.value}`,x:Math.random()*(Math.min(window.innerWidth||500,500)-220-40)+20,y:Math.random()*(window.innerHeight||500)+100};if(w.value.push(re),setTimeout(()=>{const ee=w.value.findIndex(Ae=>Ae.id===re.id);ee>-1&&w.value.splice(ee,1)},3e3),i.value)try{await e.updateGameData({productionLevel:se.value,productionTotalClicks:Ne.value})}catch(ee){console.error("   :",ee)}}if(Ve.value>=10){const ee=tt(se.value),Ae=Qe()/100,Le=Math.floor(100*ee*(1+Ae)),Ze=a.value+Le;await p(Ze),Ve.value=0,W.value=!0,ue.value=!1,await ve();const qe=Math.random();let Ce=0;qe<.3?Ce=1:qe<.4&&(Ce=2),Pe.value={points:Le,fragments:Ce};const wt={id:Date.now(),points:Le,x:50,y:20};if(A.value.push(wt),setTimeout(()=>{const Ue=A.value.findIndex(ht=>ht.id===wt.id);Ue>-1&&A.value.splice(Ue,1)},2e3),await N(ln.value,10),Ce>0){const Ue=d.value+Ce;d.value=Ue,await m(Ue);for(let ht=0;ht<Ce;ht++){const vs=Math.floor(Math.random()*6)+1,Mn=Math.min(window.innerWidth||500,500),zn=window.innerHeight||800,$t=60,Ht=30,Wn={id:Date.now()+ht,x:Math.random()*(Mn-$t-Ht*2)+Ht,y:Math.random()*(zn-$t-Ht*2-200)+100,imageId:vs};y.value.push(Wn),setTimeout(()=>{const En=y.value.findIndex(Cs=>Cs.id===Wn.id);En>-1&&y.value.splice(En,1)},2e3)}}if(i.value)try{await e.updateGameData({productionTotalClicks:Ne.value,productionLevel:se.value})}catch(Ue){console.error("   :",Ue)}const Vt=Math.min(window.innerWidth||500,500),Pn=window.innerHeight||800,ms=220,ns=Ce>0?80:60,jt=20,Bn=Math.round(Qe());let _n=`${t.value.productionComplete}
${Le.toLocaleString()} ${t.value.pointsEarned}`;Bn>0&&(_n+=`
(NFT Bonus: +${Bn}%)`),Ce>0&&(_n+=`
${t.value.fragmentsEarned} ${Ce} ${t.value.fragmentsEarnedCount}`);const Ct={id:Date.now(),text:_n,x:Math.random()*(Vt-ms-jt*2)+jt,y:Math.random()*(Pn-ns-jt*2-200)+100};w.value.push(Ct),setTimeout(()=>{const Ue=w.value.findIndex(ht=>ht.id===Ct.id);Ue>-1&&w.value.splice(Ue,1)},3e3),setTimeout(()=>{W.value=!1,ue.value=!0,Pe.value={points:0,fragments:0}},1500)}else{const re=Math.min(window.innerWidth||500,500),ee=window.innerHeight||800,Ae=220,Le=60,Ze=20,qe={id:Date.now(),text:`${t.value.productionProgress}: ${Ve.value}/10`,x:Math.random()*(re-Ae-Ze*2)+Ze,y:Math.random()*(ee-Le-Ze*2-200)+100};w.value.push(qe),setTimeout(()=>{const Ce=w.value.findIndex(wt=>wt.id===qe.id);Ce>-1&&w.value.splice(Ce,1)},2e3)}}}};U(0),U(!1),U({stone:0,iron:0,gold:0,diamond:0});const F=U(4e3),z=U(4e3),ne=U(1),ae=U(0),de=U(2e3),Me=U(1),ve=async()=>{if(ae.value=Math.min(de.value,ae.value+50),ae.value>=de.value){if(o.value==="mining"?B.value++:o.value==="hunting"?G.value++:o.value==="exploration"?T.value++:o.value==="production"&&se.value++,ae.value=0,i.value)try{const J={planetEnergy:ae.value,miningLevel:B.value,huntingLevel:G.value,explorationLevel:T.value,productionLevel:se.value};await e.updateGameData(J)}catch(J){console.error("   :",J)}}else if(i.value)try{await e.updateGameData({planetEnergy:ae.value})}catch(J){console.error("   :",J)}},xe=(J=ne.value)=>F.value>=J?(F.value=Math.max(0,F.value-J),localStorage.setItem("currentEnergy",F.value.toString()),localStorage.setItem("energyLastDate",new Date().toDateString()),!0):!1,Be=J=>{try{return new URL(Object.assign({"../assets/img/cat1.png":hl,"../assets/img/cat10.png":fl,"../assets/img/cat11.png":pl,"../assets/img/cat12.png":gl,"../assets/img/cat13.png":ml,"../assets/img/cat14.png":vl,"../assets/img/cat15.png":yl,"../assets/img/cat16.png":Al,"../assets/img/cat17.png":wl,"../assets/img/cat18.png":_l,"../assets/img/cat19.png":El,"../assets/img/cat2.png":bl,"../assets/img/cat20.png":Il,"../assets/img/cat21.png":Cl,"../assets/img/cat22.png":Tl,"../assets/img/cat23.png":Sl,"../assets/img/cat24.png":Pl,"../assets/img/cat25.png":Rl,"../assets/img/cat26.png":xl,"../assets/img/cat27.png":kl,"../assets/img/cat28.png":Nl,"../assets/img/cat29.png":Dl,"../assets/img/cat3.png":Ol,"../assets/img/cat30.png":Ll,"../assets/img/cat4.png":Bl,"../assets/img/cat5.png":Ml,"../assets/img/cat6.png":Fl,"../assets/img/cat7.png":Ul,"../assets/img/cat8.png":Vl,"../assets/img/cat9.png":$l,"../assets/img/catPoint.png":Hl,"../assets/img/catPointPlus.png":Gl,"../assets/img/catProfile01.png":Ql,"../assets/img/catProfile02.png":jl,"../assets/img/cat_ico.png":zl})[`../assets/img/cat${J}.png`],import.meta.url).href}catch{return`/src/assets/img/cat${J}.png`}},it=J=>{try{return new URL(Object.assign({"../assets/img/tul1.png":C5,"../assets/img/tul2.png":T5,"../assets/img/tul3.png":S5,"../assets/img/tul5.png":P5,"../assets/img/tul6.png":R5})[`../assets/img/tul${J}.png`],import.meta.url).href}catch{return`/src/assets/img/tul${J}.png`}},vt=J=>{const re=y.value.findIndex(ee=>ee.id===J);re>-1&&y.value.splice(re,1)},He=U([null,null,null,null]),qt=U(!1),at=U(-1),Ln=U([]),ts=()=>{const J=new Set;return He.value.forEach(re=>{re&&re.id&&J.add(re.id)}),an.value.forEach(re=>{re&&re.id&&J.add(re.id)}),Ut.value.forEach(re=>{re&&re.id&&J.add(re.id)}),ln.value.forEach(re=>{re&&re.id&&J.add(re.id)}),J},Is=()=>{const J=dt();if(J){const re=J.gameData?.inventory||[],ee=ts(),Ae=Pr();Ae&&Ae.id&&ee.delete(Ae.id),Ln.value=re.filter(Le=>!ee.has(Le.id))}else Ln.value=[]},Pr=()=>{const J=yt.value,re=at.value;if(re<0||re>=4)return null;let ee=null;return J==="mining"?ee=He.value:J==="hunting"?ee=an.value:J==="exploration"?ee=Ut.value:J==="production"&&(ee=ln.value),ee&&ee[re]?ee[re]:null},Jt=(J,re,ee)=>{yt.value=re,Is(),at.value=J,qt.value=!0},pn=async J=>{if(at.value>=0&&at.value<4){const re={id:J.id,level:J.level||1,stars:J.stars||1,imageId:J.imageId||J.id,name:J.name,miningEfficiency:J.miningEfficiency||0,huntingDamage:J.huntingDamage||0,explorationReward:J.explorationReward||0,productionSpeed:J.productionSpeed||0,rarity:J.rarity||null};let ee=[];yt.value==="mining"?ee=He.value:yt.value==="hunting"?ee=an.value:yt.value==="exploration"?ee=Ut.value:yt.value==="production"&&(ee=ln.value);const Ae=ee.findIndex((Ze,qe)=>Ze&&Ze.id===J.id&&qe!==at.value);if(Ae!==-1){ee[Ae]=null;const Ze=yt.value,qe=`${Ze}_${Ae}_${J.id}`;wn.value[Ze][qe]&&delete wn.value[Ze][qe]}if(yt.value==="mining"?(He.value[at.value]=re,Yt("mining")):yt.value==="hunting"?(an.value[at.value]=re,Yt("hunting")):yt.value==="exploration"?(Ut.value[at.value]=re,Yt("exploration")):yt.value==="production"&&(ln.value[at.value]=re,Yt("production")),dt())try{await e.updateGameData({miningCats:He.value,huntingCats:an.value,explorationCats:Ut.value,productionCats:ln.value})}catch(Ze){console.error("   :",Ze)}}qt.value=!1,at.value=-1,yt.value="mining"},io=async()=>{if(at.value>=0&&at.value<4){const J=yt.value;let re=[];J==="mining"?re=He.value:J==="hunting"?re=an.value:J==="exploration"?re=Ut.value:J==="production"&&(re=ln.value);const ee=re[at.value];if(J==="mining"?(He.value[at.value]=null,Yt("mining")):J==="hunting"?(an.value[at.value]=null,Yt("hunting")):J==="exploration"?(Ut.value[at.value]=null,Yt("exploration")):J==="production"&&(ln.value[at.value]=null,Yt("production")),ee&&ee.id){const Le=`${J}_${at.value}_${ee.id}`;wn.value[J][Le]&&delete wn.value[J][Le]}if(dt())try{await e.updateGameData({miningCats:He.value,huntingCats:an.value,explorationCats:Ut.value,productionCats:ln.value})}catch(Le){console.error("   :",Le)}}qt.value=!1,at.value=-1,yt.value="mining"},or=()=>{qt.value=!1,at.value=-1,yt.value="mining"},an=U([null,null,null,null]),Ut=U([null,null,null,null]),ln=U([null,null,null,null]),yt=U("mining"),Qs=U({mining:null,hunting:null,exploration:null,production:null}),wn=U({mining:{},hunting:{},exploration:{},production:{}}),Yt=J=>{Qs.value[J]&&(clearInterval(Qs.value[J]),Qs.value[J]=null);let re=[];J==="mining"?re=He.value:J==="hunting"?re=an.value:J==="exploration"?re=Ut.value:J==="production"&&(re=ln.value);const ee=re.filter(Ae=>Ae!==null);ee.length!==0&&(ee.forEach((Ae,Le)=>{const Ze=`${J}_${Le}_${Ae.id}`;wn.value[J][Ze]||(wn.value[J][Ze]=0)}),Qs.value[J]=setInterval(async()=>{let Ae=[];J==="mining"?Ae=He.value:J==="hunting"?Ae=an.value:J==="exploration"?Ae=Ut.value:J==="production"&&(Ae=ln.value);const Le=Ae.filter(wt=>wt!==null);if(Le.length===0){Ou(J);return}const qe={mining:t.value.mining,hunting:t.value.hunting,exploration:t.value.exploration,production:t.value.production}[J]||"";let Ce=[];J==="mining"?Ce=He.value:J==="hunting"?Ce=an.value:J==="exploration"?Ce=Ut.value:J==="production"&&(Ce=ln.value);for(const wt of Le){const Vt=Ce.findIndex(Ue=>Ue&&Ue.id===wt.id);if(Vt===-1)continue;const Pn=`${J}_${Vt}_${wt.id}`;wn.value[J][Pn]||(wn.value[J][Pn]=0),wn.value[J][Pn]+=1;const ms=wn.value[J][Pn],ns=Math.min(window.innerWidth||500,500),jt=window.innerHeight||800,Bn=220,_n=60,Ct=20;if(ms>=10){let Ue=1;J==="mining"?Ue=B.value:J==="hunting"?Ue=G.value:J==="exploration"?Ue=T.value:J==="production"&&(Ue=se.value);const ht=100,vs=tt(Ue);let Mn=0;J==="mining"?Mn=ge()/100:J==="hunting"?Mn=fe()/100:J==="exploration"?Mn=we()/100:J==="production"&&(Mn=Qe()/100);const zn=Math.floor(ht*vs*(1+Mn)),$t=a.value+zn;a.value=$t,l.value=$t,await p($t),wn.value[J][Pn]=0;let Ht=[];J==="mining"?Ht=He.value:J==="hunting"?Ht=an.value:J==="exploration"?Ht=Ut.value:J==="production"&&(Ht=ln.value),await N(Ht,10),await consumePlanetEnergy();const Wn=Math.random();let En=0;if(Wn<.3?En=1:Wn<.4&&(En=2),En>0){const Cs=d.value+En;if(await m(Cs),o.value===J)for(let Rr=0;Rr<En;Rr++){const oo=Math.floor(Math.random()*6)+1,ta=60,na=30,Wl={id:Date.now()+Rr+Vt*1e3,x:Math.random()*(ns-ta-na*2)+na,y:Math.random()*(jt-ta-na*2-200)+100,imageId:oo};y.value.push(Wl),setTimeout(()=>{const Kl=y.value.findIndex(Ef=>Ef.id===Wl.id);Kl>-1&&y.value.splice(Kl,1)},2e3)}}if(o.value===J){const Cs={id:Date.now()+Vt+wt.id*1e4,text:`${qe} ${t.value.complete}! 100 ${t.value.coin} ${t.value.earned}!`,x:Math.random()*(ns-Bn-Ct*2)+Ct,y:Math.random()*(jt-_n-Ct*2-200)+100};w.value.push(Cs),setTimeout(()=>{const Rr=w.value.findIndex(oo=>oo.id===Cs.id);Rr>-1&&w.value.splice(Rr,1)},3e3)}}else if(o.value===J){const Ue={id:Date.now()+Vt+wt.id*1e3+ms*100,text:`${qe} ${t.value.progress}: ${ms}/10`,x:Math.random()*(ns-Bn-Ct*2)+Ct,y:Math.random()*(jt-_n-Ct*2-200)+100};w.value.push(Ue),setTimeout(()=>{const ht=w.value.findIndex(vs=>vs.id===Ue.id);ht>-1&&w.value.splice(ht,1)},2e3)}}},1e3))},Ou=J=>{Qs.value[J]&&(clearInterval(Qs.value[J]),Qs.value[J]=null)},_f=()=>{Object.keys(Qs.value).forEach(J=>{Ou(J)})};return Kr(a,J=>{l.value=J}),Kr([He,an,Ut,ln],()=>{["mining","hunting","exploration","production"].forEach(re=>{let ee=[];re==="mining"?ee=He.value:re==="hunting"?ee=an.value:re==="exploration"?ee=Ut.value:re==="production"&&(ee=ln.value);const Ae=ee.map((Le,Ze)=>Le?`${re}_${Ze}_${Le.id}`:null).filter(Le=>Le!==null);Object.keys(wn.value[re]).forEach(Le=>{Ae.includes(Le)||delete wn.value[re][Le]})}),Yt("mining"),Yt("hunting"),Yt("exploration"),Yt("production")},{deep:!0}),U(0),U(!1),U([{name:"",level:1,hp:100,maxHp:100,exp:10,gold:5},{name:"",level:2,hp:150,maxHp:150,exp:20,gold:10},{name:"",level:3,hp:200,maxHp:200,exp:35,gold:20}]),U(null),U({level:1,exp:0,maxExp:100,hp:100,maxHp:100,attack:20}),U(0),U(!1),U(null),U([{name:" ",level:1,difficulty:"",rewards:["","",""],description:"      .",discovered:!0},{name:" ",level:2,difficulty:"",rewards:[" ","",""],description:"    .",discovered:!1},{name:" ",level:3,difficulty:"",rewards:[" "," "," "],description:"    .",discovered:!1}]),U({wood:0,fruit:0,herb:0,artifact:0,magicStone:0,gem:0,dragonScale:0,manaCrystal:0,rareGem:0}),U(0),U(!1),U(null),U({wood:10,stone:5,iron:3,gold:1,diamond:0,herb:8,fruit:12}),U([{id:"woodenSword",name:" ",level:1,materials:{wood:5,stone:2},result:{woodenSword:1},time:30,description:"  ."},{id:"ironSword",name:" ",level:2,materials:{wood:3,iron:5,stone:3},result:{ironSword:1},time:60,description:"  ."},{id:"healthPotion",name:" ",level:1,materials:{herb:3,fruit:2},result:{healthPotion:1},time:20,description:"  ."}]),U({woodenSword:0,ironSword:0,healthPotion:0}),(J,re)=>(L(),M("div",o8,[ze(Qn,{coinCount:a.value,currentEnergy:F.value,maxEnergy:z.value,totalCoin:c.value,catCount:J.catCount},null,8,["coinCount","currentEnergy","maxEnergy","totalCoin","catCount"]),h("button",{class:"inventoryIconBtn",onClick:r,title:"Inventory"},[h("img",{src:De($5),alt:"Inventory",class:"inventoryIcon"},null,8,a8)]),h("main",l8,[h("div",c8,[h("button",{class:Oe(["modeTab",{active:o.value==="mining"}]),onClick:re[0]||(re[0]=ee=>O("mining"))},[h("img",{src:o.value==="mining"?De(Y5):De(X5),alt:"Mining",class:"modeTabIcon"},null,8,u8),h("span",d8,"Lv."+E(B.value),1)],2),h("button",{class:Oe(["modeTab",{active:o.value==="hunting"}]),onClick:re[1]||(re[1]=ee=>O("hunting"))},[h("img",{src:o.value==="hunting"?De(Z5):De(e8),alt:"Hunting",class:"modeTabIcon"},null,8,h8),h("span",f8,"Lv."+E(G.value),1)],2),h("button",{class:Oe(["modeTab",{active:o.value==="exploration"}]),onClick:re[2]||(re[2]=ee=>O("exploration"))},[h("img",{src:o.value==="exploration"?De(t8):De(n8),alt:"Exploration",class:"modeTabIcon"},null,8,p8),h("span",g8,"Lv."+E(T.value),1)],2),h("button",{class:Oe(["modeTab",{active:o.value==="production"}]),onClick:re[3]||(re[3]=ee=>O("production"))},[h("img",{src:o.value==="production"?De(s8):De(r8),alt:"Production",class:"modeTabIcon"},null,8,m8),h("span",v8,"Lv."+E(se.value),1)],2)]),h("div",y8,[h("div",A8,E(f.value),1),h("div",w8,[(L(!0),M(Re,null,We(A.value,ee=>(L(),M("div",{key:ee.id,class:"pointAnimation",style:St({left:ee.x+"%",top:ee.y+"%"})}," +"+E(De(wd)(ee.points)),5))),128))]),h("div",_8,[h("div",E8,[h("img",{src:De(i8),alt:"Energy",class:"energyIcon"},null,8,b8),h("div",I8,[h("div",{class:"energyFill",style:St({height:ae.value/de.value*100+"%"})},null,4)]),h("span",C8,E(ae.value.toLocaleString())+"/"+E(de.value.toLocaleString()),1)]),h("div",T8,[o.value==="mining"?(L(),M(Re,{key:0},[j.value&&!V.value?(L(),M("button",{key:0,onClick:re[4]||(re[4]=ee=>K("mining")),class:Oe(["clickerBtn miningBtn",{"mining-active":C.value>0}])},null,2)):he("",!0),V.value?(L(),M("div",S8,[h("div",P8,E(t.value.miningComplete),1),h("div",R8,[h("div",x8,E(x.value.points.toLocaleString())+" "+E(t.value.pointsEarned),1),x.value.fragments>0?(L(),M("div",k8,E(t.value.fragmentsEarned)+" "+E(x.value.fragments)+" "+E(t.value.fragmentsEarnedCount),1)):he("",!0)])])):he("",!0)],64)):he("",!0),o.value==="hunting"?(L(),M(Re,{key:1},[Z.value&&!$.value?(L(),M("button",{key:0,onClick:re[5]||(re[5]=ee=>K("hunting")),class:Oe(["clickerBtn huntingBtn",{"hunting-active":ke.value>0}])},null,2)):he("",!0),$.value?(L(),M("div",N8,[h("div",D8,E(t.value.huntingComplete),1),h("div",O8,[h("div",L8,E(me.value.points.toLocaleString())+" "+E(t.value.pointsEarned),1),me.value.fragments>0?(L(),M("div",B8,E(t.value.fragmentsEarned)+" "+E(me.value.fragments)+" "+E(t.value.fragmentsEarnedCount),1)):he("",!0)])])):he("",!0)],64)):he("",!0),o.value==="exploration"?(L(),M(Re,{key:2},[D.value&&!b.value?(L(),M("button",{key:0,onClick:re[6]||(re[6]=ee=>K("exploration")),class:Oe(["clickerBtn explorationBtn",{"exploration-active":I.value>0}])},null,2)):he("",!0),b.value?(L(),M("div",M8,[h("div",F8,E(t.value.explorationComplete),1),h("div",U8,[h("div",V8,E(k.value.points.toLocaleString())+" "+E(t.value.pointsEarned),1),k.value.fragments>0?(L(),M("div",$8,E(t.value.fragmentsEarned)+" "+E(k.value.fragments)+" "+E(t.value.fragmentsEarnedCount),1)):he("",!0)])])):he("",!0)],64)):he("",!0),o.value==="production"?(L(),M(Re,{key:3},[ue.value&&!W.value?(L(),M("button",{key:0,onClick:re[7]||(re[7]=ee=>K("production")),class:Oe(["clickerBtn productionBtn",{"production-active":Ve.value>0}])},null,2)):he("",!0),W.value?(L(),M("div",H8,[h("div",G8,E(t.value.productionComplete),1),h("div",Q8,[h("div",j8,E(Pe.value.points.toLocaleString())+" "+E(t.value.pointsEarned),1),Pe.value.fragments>0?(L(),M("div",z8,E(t.value.fragmentsEarned)+" "+E(Pe.value.fragments)+" "+E(t.value.fragmentsEarnedCount),1)):he("",!0)])])):he("",!0)],64)):he("",!0)])])]),h("div",W8,[h("div",K8,[o.value==="mining"?(L(!0),M(Re,{key:0},We(He.value,(ee,Ae)=>(L(),M("div",{key:Ae,class:Oe(["catCard",{emptySlot:!ee,working:ee&&o.value==="mining"}]),onClick:Le=>Jt(Ae,"mining")},[ee?(L(),M("div",J8,[h("img",{src:Be(ee.imageId),alt:"Cat"},null,8,Y8)])):he("",!0),ee?he("",!0):(L(),M("div",X8,[h("img",{src:De(ud),alt:"+",class:"emptySlotIcon"},null,8,Z8)]))],10,q8))),128)):he("",!0),o.value==="hunting"?(L(!0),M(Re,{key:1},We(an.value,(ee,Ae)=>(L(),M("div",{key:Ae,class:Oe(["catCard",{emptySlot:!ee,working:ee&&o.value==="hunting"}]),onClick:Le=>Jt(Ae,"hunting")},[ee?(L(),M("div",t9,[h("img",{src:Be(ee.imageId),alt:"Cat"},null,8,n9)])):he("",!0),ee?he("",!0):(L(),M("div",s9,[h("img",{src:De(ud),alt:"+",class:"emptySlotIcon"},null,8,r9)]))],10,e9))),128)):he("",!0),o.value==="exploration"?(L(!0),M(Re,{key:2},We(Ut.value,(ee,Ae)=>(L(),M("div",{key:Ae,class:Oe(["catCard",{emptySlot:!ee,working:ee&&o.value==="exploration"}]),onClick:Le=>Jt(Ae,"exploration")},[ee?(L(),M("div",o9,[h("img",{src:Be(ee.imageId),alt:"Cat"},null,8,a9)])):he("",!0),ee?he("",!0):(L(),M("div",l9,[h("img",{src:De(ud),alt:"+",class:"emptySlotIcon"},null,8,c9)]))],10,i9))),128)):he("",!0),o.value==="production"?(L(!0),M(Re,{key:3},We(ln.value,(ee,Ae)=>(L(),M("div",{key:Ae,class:Oe(["catCard",{emptySlot:!ee,working:ee&&o.value==="production"}]),onClick:Le=>Jt(Ae,"production")},[ee?(L(),M("div",d9,[h("img",{src:Be(ee.imageId),alt:"Cat"},null,8,h9)])):he("",!0),ee?he("",!0):(L(),M("div",f9,[h("img",{src:De(ud),alt:"+",class:"emptySlotIcon"},null,8,p9)]))],10,u9))),128)):he("",!0)])])]),ze(jn),h("div",g9,[(L(!0),M(Re,null,We(w.value,ee=>(L(),M("div",{key:ee.id,class:"speechBubble",style:St({left:ee.x+"px",top:ee.y+"px",transform:"translateX(-50%)"})},E(ee.text),5))),128))]),h("div",m9,[(L(!0),M(Re,null,We(y.value,ee=>(L(),M("div",{key:ee.id,class:"catEmoji",style:St({left:ee.x+"px",top:ee.y+"px"})},[h("img",{src:it(ee.imageId),alt:"",class:"tulImage",onError:Ae=>vt(ee.id)},null,40,v9)],4))),128))]),qt.value?(L(),M("div",{key:0,class:"catSelectPopupOverlay",onClick:or},[h("div",{class:"catSelectPopupContent",onClick:re[8]||(re[8]=xn(()=>{},["stop"]))},[h("div",y9,[h("h3",null,E(t.value.selectCat),1),h("button",{class:"closePopupBtn",onClick:or},"")]),h("div",A9,[Pr()?(L(),M("div",w9,[h("button",{class:"removeCatBtn",onClick:io},E(t.value.removeCat),1)])):he("",!0),h("div",_9,[(L(!0),M(Re,null,We(Ln.value,ee=>(L(),M("div",{key:ee.id,class:"availableCatCard",onClick:Ae=>pn(ee)},[h("div",b9,[h("img",{src:Be(ee.imageId||ee.id),alt:"Cat"},null,8,I9)]),h("div",C9,[h("div",T9,E(ee.name),1),h("div",S9,"Lv "+E(String(ee.level||1).padStart(2,"0")),1),h("div",P9,[(L(!0),M(Re,null,We(ee.stars||1,Ae=>(L(),M("span",{key:Ae,class:"star"},""))),128))])])],8,E9))),128))])])])])):he("",!0)]))}},x9=Qt(R9,[["__scopeId","data-v-17b63c0a"]]),k9={class:"miningPage"},N9={class:"mainContent"},D9={class:"miningContainer"},O9={class:"pageHeader"},L9={class:"levelInfo"},B9={class:"miningProgress"},M9={class:"progressBar"},F9={class:"progressText"},U9=["disabled"],V9={key:0},$9={key:1},H9={class:"resources"},G9={class:"resourceList"},Q9={class:"resourceItem"},j9={class:"resourceItem"},z9={class:"resourceItem"},W9={class:"resourceItem"},K9={__name:"MiningPage",setup(n){const e=Sn(),t=on(),s=pe(()=>t.state.coins),r=pe(()=>gs());Nt(()=>{t.loadCurrentUser();const d=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",d),rn(()=>{window.removeEventListener("userDataUpdated",d)})});const i=U(1),o=U(0),a=U(!1),l=U({stone:0,iron:0,gold:0,diamond:0}),c=()=>{if(a.value)return;a.value=!0,o.value=0;const d=setInterval(()=>{if(o.value+=10,o.value>=100){clearInterval(d),a.value=!1,o.value=0;const f=Math.random();f<.4?l.value.stone++:f<.7?l.value.iron++:f<.9?l.value.gold++:l.value.diamond++}},200)};return(d,f)=>(L(),M("div",k9,[ze(Qn,{coinCount:s.value},null,8,["coinCount"]),h("main",N9,[h("div",D9,[h("div",O9,[h("button",{class:"backBtn",onClick:f[0]||(f[0]=p=>De(e).push("/main"))},E(r.value.back),1),h("h2",null," "+E(r.value.mining),1)]),h("div",L9,[h("span",null,E(r.value.miningLevel)+": "+E(i.value),1)]),h("div",B9,[h("div",M9,[h("div",{class:"progressFill",style:St({width:o.value+"%"})},null,4)]),h("span",F9,E(o.value)+"%",1)]),h("button",{class:Oe(["miningBtn",{mining:a.value}]),onClick:c,disabled:a.value},[a.value?(L(),M("span",$9," "+E(r.value.miningInProgress),1)):(L(),M("span",V9," "+E(r.value.miningStart),1))],10,U9),h("div",H9,[h("h3",null,E(r.value.ownedResources),1),h("div",G9,[h("div",Q9,[h("span",null," "+E(r.value.stone),1),h("span",null,E(l.value.stone),1)]),h("div",j9,[h("span",null," "+E(r.value.iron),1),h("span",null,E(l.value.iron),1)]),h("div",z9,[h("span",null," "+E(r.value.gold),1),h("span",null,E(l.value.gold),1)]),h("div",W9,[h("span",null," "+E(r.value.diamond),1),h("span",null,E(l.value.diamond),1)])])])])]),ze(jn)]))}},q9=Qt(K9,[["__scopeId","data-v-cea6a28a"]]),J9={class:"huntingPage"},Y9={class:"mainContent"},X9={class:"huntingContainer"},Z9={class:"pageHeader"},e$={class:"playerStats"},t$={class:"statsGrid"},n$={class:"statItem"},s$={class:"statItem"},r$={class:"statItem"},i$={class:"statItem"},o$={class:"monsterSelection"},a$={class:"monsterList"},l$=["onClick"],c$={class:"monsterInfo"},u$={class:"monsterName"},d$={class:"monsterLevel"},h$={class:"monsterRewards"},f$={key:0,class:"currentMonster"},p$={class:"monsterHp"},g$={class:"hpBar"},m$={class:"hpText"},v$={class:"huntingProgress"},y$={class:"progressBar"},A$={class:"progressText"},w$=["disabled"],_$={key:0},E$={key:1},b$={__name:"HuntingPage",setup(n){const e=Sn(),t=on(),s=pe(()=>t.state.coins);Nt(()=>{t.loadCurrentUser();const f=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",f),rn(()=>{window.removeEventListener("userDataUpdated",f)})}),U(1);const r=U(0),i=U(!1),o=U([{name:"",level:1,hp:100,maxHp:100,exp:10,gold:5},{name:"",level:2,hp:150,maxHp:150,exp:20,gold:10},{name:"",level:3,hp:200,maxHp:200,exp:35,gold:20}]),a=U(null),l=U({level:1,exp:0,maxExp:100,hp:100,maxHp:100,attack:20}),c=f=>{a.value={...f}},d=()=>{if(!a.value||i.value)return;i.value=!0,r.value=0;const f=setInterval(()=>{const p=Math.floor(Math.random()*l.value.attack)+10;a.value.hp-=p,a.value.hp<=0?(clearInterval(f),i.value=!1,r.value=100,l.value.exp+=a.value.exp,l.value.hp=l.value.maxHp,l.value.exp>=l.value.maxExp&&(l.value.level++,l.value.exp=0,l.value.maxExp=Math.floor(l.value.maxExp*1.5),l.value.attack+=5,l.value.maxHp+=20,l.value.hp=l.value.maxHp),setTimeout(()=>{a.value=null,r.value=0},2e3)):r.value=(a.value.maxHp-a.value.hp)/a.value.maxHp*100},500)};return(f,p)=>(L(),M("div",J9,[ze(Qn,{coinCount:s.value},null,8,["coinCount"]),h("main",Y9,[h("div",X9,[h("div",Z9,[h("button",{class:"backBtn",onClick:p[0]||(p[0]=m=>De(e).push("/main"))}," "),p[1]||(p[1]=h("h2",null," ",-1))]),h("div",e$,[p[6]||(p[6]=h("h3",null," ",-1)),h("div",t$,[h("div",n$,[p[2]||(p[2]=h("span",null,"",-1)),h("span",null,E(l.value.level),1)]),h("div",s$,[p[3]||(p[3]=h("span",null,"",-1)),h("span",null,E(l.value.hp)+"/"+E(l.value.maxHp),1)]),h("div",r$,[p[4]||(p[4]=h("span",null,"",-1)),h("span",null,E(l.value.attack),1)]),h("div",i$,[p[5]||(p[5]=h("span",null,"",-1)),h("span",null,E(l.value.exp)+"/"+E(l.value.maxExp),1)])])]),h("div",o$,[p[7]||(p[7]=h("h3",null," ",-1)),h("div",a$,[(L(!0),M(Re,null,We(o.value,m=>(L(),M("div",{key:m.name,class:Oe(["monsterCard",{selected:a.value?.name===m.name}]),onClick:w=>c(m)},[h("div",c$,[h("span",u$,E(m.name),1),h("span",d$,"Lv."+E(m.level),1)]),h("div",h$,[h("span",null,"EXP: "+E(m.exp),1),h("span",null,"Gold: "+E(m.gold),1)])],10,l$))),128))])]),a.value?(L(),M("div",f$,[h("h3",null,E(a.value.name)+" (Lv."+E(a.value.level)+")",1),h("div",p$,[h("div",g$,[h("div",{class:"hpFill",style:St({width:a.value.hp/a.value.maxHp*100+"%"})},null,4)]),h("span",m$,E(a.value.hp)+"/"+E(a.value.maxHp),1)]),h("div",v$,[h("div",y$,[h("div",{class:"progressFill",style:St({width:r.value+"%"})},null,4)]),h("span",A$,E(Math.floor(r.value))+"%",1)]),h("button",{class:Oe(["huntingBtn",{hunting:i.value}]),onClick:d,disabled:i.value},[i.value?(L(),M("span",E$,"  ...")):(L(),M("span",_$,"  "))],10,w$)])):he("",!0)])]),ze(jn)]))}},I$=Qt(b$,[["__scopeId","data-v-a71dac33"]]),C$={class:"explorationPage"},T$={class:"mainContent"},S$={class:"explorationContainer"},P$={class:"pageHeader"},R$={class:"levelInfo"},x$={class:"locationSelection"},k$={class:"locationList"},N$=["onClick"],D$={class:"locationInfo"},O$={class:"locationHeader"},L$={class:"locationName"},B$={class:"locationLevel"},M$={class:"locationDifficulty"},F$={class:"locationDescription"},U$={class:"locationRewards"},V$={key:0,class:"undiscoveredOverlay"},$$={key:0,class:"currentExploration"},H$={class:"explorationProgress"},G$={class:"progressBar"},Q$={class:"progressText"},j$=["disabled"],z$={key:0},W$={key:1},K$={class:"explorationRewards"},q$={class:"rewardsGrid"},J$={class:"rewardIcon"},Y$={class:"rewardAmount"},X$={__name:"ExplorationPage",setup(n){const e=Sn(),t=on(),s=pe(()=>t.state.coins);Nt(()=>{t.loadCurrentUser();const p=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",p),rn(()=>{window.removeEventListener("userDataUpdated",p)})});const r=U(1),i=U(0),o=U(!1),a=U(null);U([]);const l=U([{name:" ",level:1,difficulty:"",rewards:["","",""],description:"      .",discovered:!0},{name:" ",level:2,difficulty:"",rewards:[" ","",""],description:"    .",discovered:!1},{name:" ",level:3,difficulty:"",rewards:[" "," "," "],description:"    .",discovered:!1},{name:" ",level:4,difficulty:" ",rewards:[""," "," "],description:"    .",discovered:!1}]),c=U({wood:0,fruit:0,herb:0,artifact:0,magicStone:0,gem:0,dragonScale:0,manaCrystal:0,rareGem:0,skyStone:0,mysteriousEnergy:0,legendaryItem:0}),d=p=>{p.discovered&&(a.value=p)},f=()=>{if(!a.value||o.value)return;o.value=!0,i.value=0;const p=setInterval(()=>{if(i.value+=5,i.value>=100){clearInterval(p),o.value=!1,i.value=0;const m=Math.floor(Math.random()*a.value.rewards.length),w=a.value.rewards[m],y={:"wood",:"fruit",:"herb"," ":"artifact",:"magicStone",:"gem"," ":"dragonScale"," ":"manaCrystal"," ":"rareGem",:"skyStone"," ":"mysteriousEnergy"," ":"legendaryItem"};if(y[w]&&c.value[y[w]]++,Math.random()<.3){const A=l.value.find(_=>!_.discovered);A&&(A.discovered=!0)}r.value++,setTimeout(()=>{a.value=null},2e3)}},300)};return(p,m)=>(L(),M("div",C$,[ze(Qn,{coinCount:s.value},null,8,["coinCount"]),h("main",T$,[h("div",S$,[h("div",P$,[h("button",{class:"backBtn",onClick:m[0]||(m[0]=w=>De(e).push("/main"))}," "),m[1]||(m[1]=h("h2",null," ",-1))]),h("div",R$,[h("span",null," : "+E(r.value),1)]),h("div",x$,[m[3]||(m[3]=h("h3",null," ",-1)),h("div",k$,[(L(!0),M(Re,null,We(l.value,w=>(L(),M("div",{key:w.name,class:Oe(["locationCard",{selected:a.value?.name===w.name,undiscovered:!w.discovered}]),onClick:y=>d(w)},[h("div",D$,[h("div",O$,[h("span",L$,E(w.name),1),h("span",B$,"Lv."+E(w.level),1)]),h("span",M$,E(w.difficulty),1),h("p",F$,E(w.description),1),h("div",U$,[(L(!0),M(Re,null,We(w.rewards,y=>(L(),M("span",{key:y,class:"rewardTag"},E(y),1))),128))])]),w.discovered?he("",!0):(L(),M("div",V$,[...m[2]||(m[2]=[h("span",null," ",-1)])]))],10,N$))),128))])]),a.value?(L(),M("div",$$,[h("h3",null,E(a.value.name)+"  ",1),h("div",H$,[h("div",G$,[h("div",{class:"progressFill",style:St({width:i.value+"%"})},null,4)]),h("span",Q$,E(i.value)+"%",1)]),h("button",{class:Oe(["explorationBtn",{exploring:o.value}]),onClick:f,disabled:o.value},[o.value?(L(),M("span",W$,"  ...")):(L(),M("span",z$,"  "))],10,j$)])):he("",!0),h("div",K$,[m[4]||(m[4]=h("h3",null," ",-1)),h("div",q$,[(L(!0),M(Re,null,We(c.value,(w,y)=>Wt((L(),M("div",{key:y,class:"rewardItem"},[h("span",J$,E(y==="wood"?"":y==="fruit"?"":y==="herb"?"":y==="artifact"?"":y==="magicStone"||y==="gem"?"":y==="dragonScale"?"":y==="manaCrystal"?"":y==="rareGem"?"":y==="skyStone"?"":y==="mysteriousEnergy"?"":y==="legendaryItem"?"":""),1),h("span",Y$,E(w),1)])),[[R1,w>0]])),128))])])])]),ze(jn)]))}},Z$=Qt(X$,[["__scopeId","data-v-588d2c1d"]]),eH={class:"productionPage"},tH={class:"mainContent"},nH={class:"productionContainer"},sH={class:"pageHeader"},rH={class:"levelInfo"},iH={class:"inventory"},oH={class:"inventoryGrid"},aH={class:"materialIcon"},lH={class:"materialName"},cH={class:"materialAmount"},uH={class:"recipes"},dH={class:"recipeList"},hH=["onClick"],fH={class:"recipeInfo"},pH={class:"recipeHeader"},gH={class:"recipeName"},mH={class:"recipeLevel"},vH={class:"recipeDescription"},yH={class:"recipeMaterials"},AH={class:"recipeTime"},wH={key:0,class:"currentProduction"},_H={class:"productionProgress"},EH={class:"progressBar"},bH={class:"progressText"},IH=["disabled"],CH={key:0},TH={key:1},SH={class:"producedItems"},PH={class:"itemsGrid"},RH={class:"itemIcon"},xH={class:"itemName"},kH={class:"itemAmount"},NH={__name:"ProductionPage",setup(n){const e=Sn(),t=on(),s=pe(()=>t.state.coins);Nt(()=>{t.loadCurrentUser();const w=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",w),rn(()=>{window.removeEventListener("userDataUpdated",w)})});const r=U(1),i=U(0),o=U(!1),a=U(null),l=U({wood:10,stone:5,iron:3,gold:1,diamond:0,herb:8,fruit:12}),c=U([{id:"woodenSword",name:" ",level:1,materials:{wood:5,stone:2},result:{woodenSword:1},time:30,description:"  ."},{id:"ironSword",name:" ",level:2,materials:{wood:3,iron:5,stone:3},result:{ironSword:1},time:60,description:"  ."},{id:"goldenSword",name:" ",level:3,materials:{iron:3,gold:8,diamond:1},result:{goldenSword:1},time:120,description:"   ."},{id:"healthPotion",name:" ",level:1,materials:{herb:3,fruit:2},result:{healthPotion:1},time:20,description:"  ."},{id:"manaPotion",name:" ",level:2,materials:{herb:5,fruit:3,stone:1},result:{manaPotion:1},time:40,description:"  ."},{id:"magicRing",name:" ",level:3,materials:{gold:5,diamond:2,herb:4},result:{magicRing:1},time:90,description:"  ."}]),d=U({woodenSword:0,ironSword:0,goldenSword:0,healthPotion:0,manaPotion:0,magicRing:0}),f=w=>{Object.entries(w.materials).every(([A,_])=>l.value[A]>=_)&&w.level<=r.value&&(a.value=w)},p=()=>{if(!a.value||o.value)return;Object.entries(a.value.materials).forEach(([y,A])=>{l.value[y]-=A}),o.value=!0,i.value=0;const w=setInterval(()=>{i.value+=100/(a.value.time/.1),i.value>=100&&(clearInterval(w),o.value=!1,i.value=0,Object.entries(a.value.result).forEach(([y,A])=>{d.value[y]+=A}),Math.random()<.1&&r.value++,setTimeout(()=>{a.value=null},2e3))},100)},m=w=>Object.entries(w.materials).every(([A,_])=>l.value[A]>=_)&&w.level<=r.value;return(w,y)=>(L(),M("div",eH,[ze(Qn,{coinCount:s.value},null,8,["coinCount"]),h("main",tH,[h("div",nH,[h("div",sH,[h("button",{class:"backBtn",onClick:y[0]||(y[0]=A=>De(e).push("/main"))}," "),y[1]||(y[1]=h("h2",null," ",-1))]),h("div",rH,[h("span",null," : "+E(r.value),1)]),h("div",iH,[y[2]||(y[2]=h("h3",null," ",-1)),h("div",oH,[(L(!0),M(Re,null,We(l.value,(A,_)=>(L(),M("div",{key:_,class:"inventoryItem"},[h("span",aH,E(_==="wood"?"":_==="stone"?"":_==="iron"?"":_==="gold"?"":_==="diamond"?"":_==="herb"?"":_==="fruit"?"":""),1),h("span",lH,E(_),1),h("span",cH,E(A),1)]))),128))])]),h("div",uH,[y[3]||(y[3]=h("h3",null," ",-1)),h("div",dH,[(L(!0),M(Re,null,We(c.value,A=>(L(),M("div",{key:A.id,class:Oe(["recipeCard",{selected:a.value?.id===A.id,disabled:!m(A)}]),onClick:_=>f(A)},[h("div",fH,[h("div",pH,[h("span",gH,E(A.name),1),h("span",mH,"Lv."+E(A.level),1)]),h("p",vH,E(A.description),1),h("div",yH,[(L(!0),M(Re,null,We(A.materials,(_,C)=>(L(),M("span",{key:C,class:"materialTag"},E(C)+" x"+E(_),1))),128))]),h("div",AH,[h("span",null," "+E(A.time)+"",1)])])],10,hH))),128))])]),a.value?(L(),M("div",wH,[h("h3",null,E(a.value.name)+"  ",1),h("div",_H,[h("div",EH,[h("div",{class:"progressFill",style:St({width:i.value+"%"})},null,4)]),h("span",bH,E(Math.floor(i.value))+"%",1)]),h("button",{class:Oe(["productionBtn",{producing:o.value}]),onClick:p,disabled:o.value},[o.value?(L(),M("span",TH,"  ...")):(L(),M("span",CH,"  "))],10,IH)])):he("",!0),h("div",SH,[y[4]||(y[4]=h("h3",null," ",-1)),h("div",PH,[(L(!0),M(Re,null,We(d.value,(A,_)=>Wt((L(),M("div",{key:_,class:"itemCard"},[h("span",RH,E(_==="woodenSword"?"":_==="ironSword"?"":_==="goldenSword"?"":_==="healthPotion"?"":_==="manaPotion"?"":_==="magicRing"?"":""),1),h("span",xH,E(_),1),h("span",kH,E(A),1)])),[[R1,A>0]])),128))])])])]),ze(jn)]))}},DH=Qt(NH,[["__scopeId","data-v-61ce148b"]]),n_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAB3CAYAAACwoUjjAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA1gSURBVHgB7V1pbBTXHX+za+/6PrkCJALiJAiQRUODDbQBVIUGmqgpigtKqSBNpab90EMqapIPsaJ8bEibRqIpbT9wqG0oSKmSCholIQelLYl6pClHnYai2Oaw8XrX6/XeL7/f7hv8WO+uvXj2mA0/6a+ZnZl3/N/xv97MWyEKiBUrVlT6/f4NUsrDoNdAO0FNohwBxoyNGze6R0dH74vH45fxOwyKgvw+n2/vhg0bakWZwQgEAvPRw8+CyT45EWNDQ0NPrFq1qlqUC9atW1eBHv4Oe1VmAHp/xOPxfJ/DX5QDOjo6GjCED6vhLLMw/jEOS5HEEHYGmKgHw7tisZhfTo4I6LdMI+yKtrY2Nxh+AkyMyqljFHP/a5wSwoYwxsbGFmHIXpC5IYY07+K4UNhsmBuodCPo12rI5oooGD/u9XpvE3ZhvKurywkV1YXKe+X1IzwyMvI8p4iwA5YvX96EXnodFY/L6eEKGm81jqXd26hgC3roOUjroJw+wsjnVzhWiVIFhyKElymtp9vLJi6Hw+FOWaK9TeF1KwRQn7QWlOZv4NggLIRDWABUinbzDw3DmCmshQN5dmAE3VtyujsYDN4GxvtlfsCpchpkmQqbdk+3t7fXYt49itNWkR+QUTbqT0E1othAJRgU+Drm3aDMP8bgrX2r6J4YKtIKeltaJ62zAo17ESpxbXd3tyWyKGewxeFQfFPm5lBMFzRr6abWiWIABc+D8fBvWaBe1uCjmVtwab5gwYIqDLNuVMAKyytXYJTHT2N+31WwYc4WjkQiq9DL/5fFA6Mwb0F/F8QFdcCZ6ERLn5WFH9apCGK0PblkyRKXyCcYsYSK+plMhnCLDZqo7+W1tzl/IEA+p+LWpQL2dnfeehsFtIBhrkrEZGmhDxah9UINGVdDcD2G45gsPbAT/gq6VUxxmE/aOmzBaDTa6XA4foCfpejQk4c7Mcx3QuZYUz+0YB16+UV5fUG+ggFTzwPN8tC0jRYG+WAEfAl5+mTxVdRkYKe8IqdpojJ2vQCZnJSlz7CJEdA3QFk9sYxzGsPEiWF9N07ttL7EJd+doOuL4KC1ZjHoLu3TyyZC6KyfyCxxtbQ9DbexBpbX04hP3SXst4rogqZ5BLr7HsqkqSbiIvpK9PIVaV/QIXkVHTc7HYOpPc1QbnN1dfVO9HKjsC/Yw2vBw3cnWxpKLLxhPjAARz/ZbnM5HXowam9OZVTvaToU6zEftuOcrWPvNwKSuBnT9NupvX2VaQgvNx54EKfFiT/lB+7a2tptPT098/SLJtPGiRMn2vDAF3Buy7cAsmAWBNrDE+Y2xn4d6AVZGsEBy0FNNDQ0dL+pwjhvHYx5VVRUvITzGaI8EQW9Ck9se0NDw6ADc9mJtagVuGjft3omB6fsetCX6YWxl10YAWtF+c3lVLjq6uq+euzYMZcB1/GzMEZehiKfI8ofvaB1FTU1NZ8RSe/k0wDyeTNV1qAoD0NkKhgDBRwQYn+HJdbDtRJR3oghKPIhjh86jx49GnC5XGNz5869BcdmzO24aoBEI+A39XjiqEGa99V5KhLpkc7Q0iVUZlJtxmPqnA/ESVo+PNcLM1LKMeuWsVyh1U2VF/d4PB8dOXJk35YtW04wwya3271y3rx59Tt27LgVmFlfX187Y8aM5jlz5syHLe6qrKx0V1VVNfEcmUTRYsOhUMiL35WosBuNVQ2qwj0og0gUo2cIEdQQBOQs5F1N3nCdq40eWEee4eFhHxybGKRpLfKtgyVYAzvBjbycqF8E5c/FucS1SpTB91kM5geMIG8ffGU/64Qya5C+xel0UguNMX88E0AagbIbcb0Cy8kDg4ODA/v27XvnwIEDPRDcfybTt4CWgRyooIEHE02Eo3meOC5cuLCmpaWlEi0Wgy07arY0782fP79q9uzZVShYDgwMhM6fPx/Edd43mpubXaiYAUbZWOT1mh4yyzN7FIzKzs7O1sbGxgo0RgUYiTPRxYsXw2fOnPEzD1V2ol5Lly6tQ/4VyD9y+vTpUZWfRIM4mB4MR9jzyEcgGxopJ1kQVRWNE6fKLN2wuVpBJMx4j8h0PxeYja1dktnyzlYvDcwvBDpJg8SrqFndyCTJpZaxkeWefl+muTYpUkeDSD/Hp1Kva54D+UCjbNKY+sE3d6rFJL1tIQpRhg4PqAfk11uGsWJGEN3qnEsk9K2py53qN88pGcOgoLruUM+b04ONGFJHNqJp3kZUmqBKL9S9CpWeR0PlX6POHVr6mMojpI5Olc6tnjPvRdXzLnU9IJL6uR+UkEXphoN+TY+sONU9kzGR8pz5rK5SjJTrQlw7kjIN20otz7jGdFTLw9DqZT4X0/J2pJRX7nbIDdzADXyakCo9zd+65DNhqhRTeqcaHk4xrl5M1UOKpJQpM9TD0PLXn0vVDKl2hC694ynpZbpyDe1InTxXJPVxjRjXxybDpv6OqesR9Yx+zzSko1oFAqpSUl2PiHGda4hxm4B5uLT0AS1vk7GoKttUQS4xrqd1+4D3/GJcp1NP+9Q9abYuo6CLQanfMuv60GycTJbUBFs5DfT8JjNRpZi66ZpaL5nm2gDoLMhrWjVceJ+RIbNckDqkjCz56UNaWFB2urRm/hwJHMmM+A5w+DBu1CCm4GGZSOfRpPGMzGenZWPrrme6vCarl4LZ8+SzkUwnBBATI0jIFjEQQHDB2Y7AWTdNN+P222+vpT+N67FTp06NaBUw4LA7Fy9eXAef2g1/2MF88FwUDnwEy0UevbJaxa4OX5aNPCqampoqESSIMZ1KY9BXnzlzphtBA6O/vz944cKFoF4264UAfsKfPnfuXMC8x3K0c4ngglmmi0wH4WxHtm/fvmDbtm2fb21tnYnfs+hwMzrCeAuCCzW41gyGqhnqgSPvQYMEEDQIwVmnE98AqkflGVnhkm+AERDkYYCBCyrCEg0zUSAwivQIoPgZpnIgetKISjeB6Wb8Tow4REkCSDeIchmAYLkuRkFQXhBZMBLBVywiuN+IdIzoJCIuyNvLD+FAYQQzehFAGPJ6vQE0xsCePXs+unTpUpA8Cb5XefDgwe/hgbPMSCY/8GT8ii+cRhVdjWmpI+/F0tyT2jNxhZhGUZYBpkj8wi7MysrkmwNxjRLPpl7X6hXT7snUevEe82aICYTBEwz09fW9t3v37oe5wsFeaUHLv4QWWyMs+k6rFMEGAZ/vY1R8hcP7NjDcJsqYYYJBR8ga8nknGaWjX7ofcVqPVjLN9Z1RUf7gvB+FsPuHAxLtAib9KTExGlJuoCo80dbWdtqxdevWEFTBi2Lczi5XRKES37zjjjvCCeMA3U4TdC/oi2LcaSg3DEJ6PwBh9peExF6/fv0wVi5ewOmwKE/Q0zoMLfVPoQcIobSrYDo+jV4PyfICbZp+WGLtIp0To/Ym+ViWFyIQYPtvuummq58hX2OQbN68uQ8ifb8oL6E2Arv9MByVkHlhQnejZfgu5RugNmF/BDFyfwHTsxsWmde8OMH03LRp02V4QAdFMtRiZ9AheQUMP6UzTKSNTuDh2aD9eJivTdrSJkf9+WLAvdDN76beS8sQVNgVuGN7hH3N0zCE8u8XLVr0QU6p0FIN6lsIu70vSn/6HdCsTLxlHLoY2j7otmdw+j9R+LXk6YBBgz2o/1CmB7LOV1gwl3H4sUjGoO0A9vR/cHxbZHGgsjKN1qL5RmfkTWEPL8yPGNpTGzdu7BPTGZ2MKfEbRr6KJUsbjLX9Tlq1Mwa/kIdd/nNZ2kKNe6CsFxa+8mnuQvU3WXofjRMB0I9AU9qpLhff2dvZ2fkvxKDvx1wvpRfiKWsouB5DvfzCanR1dXHl40lZnP1N0oJ7NHCvBmHhsE4FPy9eiLK4zWUpfKwWhp/wHJZ+ctpHOFe7WsL97EdBL4viu59k+hwcit/09vYGRZ5BocbefksWT6gxGnKOXxnl8uWsiesNAvpWrlz5AYTa3RAe3Hyt0F8GhDDNnl+2bNmh48ePR0ShQKNFbYrqk4UFe/l9HOeJYkAmv9ybdBtri+GHBnmkaBstcj5hmK3ljnCyMKAMoSzJ136GUwN3oIP596jM/243HNYD0BzbcF78D+dQiVrQH2V+h3loeHh4F/drECUCqjFuc8n9PfNhtDDPPgQHLInQWhX0k4irncP87hbJl9itBl+a+4Pb7e4XpQb0RgOI21xbarRgLveil6e8C9VksHqFMtLR0XG2srLyAWHd95sBjKBn29vb/zQ0NBQVpQh0DD8++6W0YFcr9PAYNAN342gWpQy1fT13YJ/u5jAxMPwapLU99lvhsi/33JfTCy950XgPXo9DUSxQhbWpDZ+uR3ezsbh1ve121TFd0Jz3M+MiurThf3EkoDyxh2Tu/7ryeN43Qc0nwEQ91sT4nzmTSXPa1iNg+BmZ/H8d+/WyBgNrYkun8FpHFMLv0Jo1a/IeaS3E2rNcvXr1f8EQFwOzhWiDiHe9DsNmTJQLuEoCL+lxGhxperkXw3qXTEZDbD2sJ4B/agDm9srkv6RxjvNl9cs+n+8+taFSeTFswuPxNMnkvxxyX+FDcCTuUaGfgjH8CaOAK+b7pW9IAAAAAElFTkSuQmCC",OH={class:"exchangePage"},LH={class:"mainContent"},BH={class:"contentWrapper"},MH={class:"tabButtons"},FH={class:"tradeSection"},UH={class:"sectionTitle"},VH={class:"exchangeDisplay"},$H={class:"exchangeItem"},HH={class:"exchangeItem"},GH={class:"exchangeValue"},QH=["disabled"],jH={class:"tradeSection"},zH={class:"sectionTitle"},WH={class:"exchangeDisplay"},KH={class:"exchangeItem"},qH={class:"exchangeItem"},JH={class:"exchangeValue"},YH=["disabled"],s_=1e3,XH={__name:"ExchangePage",setup(n){const e=Sn(),t=on(),s=pe(()=>gs()),r=U("exchange"),i=pe(()=>t.state.coins),o=pe(()=>t.state.totalCoin),a=U(null),l=U(""),c=U(""),d=pe(()=>{if(!l.value)return 0;const A=parseFloat(l.value)||0;return Math.floor(A/s_)}),f=pe(()=>{if(!c.value)return 0;const A=parseFloat(c.value)||0;return Math.floor(A*s_)}),p=()=>{const A=dt();A&&(a.value=A),t.loadCurrentUser()},m=async()=>{if(!a.value){alert(s.value.loginRequired);return}if(!l.value||parseFloat(l.value)<=0){alert("Please enter the point amount.");return}const A=parseFloat(l.value),_=d.value;if(i.value<A){alert(`${s.value.insufficientPoints}
Required: ${A.toLocaleString()} Point
Owned: ${i.value.toLocaleString()} Point`);return}if(_<=0){alert("Not enough points to buy at least 1 coin.");return}const C=i.value-A,S=o.value+_;await t.updateMultiple({coins:C,totalCoin:S})?(alert(`${s.value.purchaseSuccess}
${_} ${s.value.coin} ${s.value.buy}
${s.value.pointUsed}: ${A.toLocaleString()}`),l.value=""):alert(s.value.tradeFailed)},w=async()=>{if(!a.value){alert(s.value.loginRequired);return}if(!c.value||parseFloat(c.value)<=0){alert("Please enter the coin amount.");return}const A=parseFloat(c.value),_=A;if(o.value<_){alert(`${s.value.insufficientCoins}
Required: ${A} ${s.value.coin}
Owned: ${o.value.toLocaleString()} ${s.value.coin}`);return}const C=f.value,S=i.value+C,B=o.value-_;await t.updateMultiple({coins:S,totalCoin:B})?(alert(`${s.value.tradeSuccess}
${A} ${s.value.coin} ${s.value.sell}
${s.value.pointReceived}: ${C.toLocaleString()}`),c.value=""):alert(s.value.tradeFailed)};Nt(()=>{p();const A=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",A),rn(()=>{window.removeEventListener("userDataUpdated",A)})});const y=A=>{A==="exchange"?r.value="exchange":A==="catcraft"&&e.push("/factory")};return(A,_)=>(L(),M("div",OH,[ze(Qn,{coinCount:i.value,hideRightIcons:!0},null,8,["coinCount"]),h("main",LH,[h("div",BH,[h("div",MH,[h("button",{class:Oe(["tabButton",{active:r.value==="exchange"}]),onClick:_[0]||(_[0]=C=>y("exchange"))}," Exchange ",2),h("button",{class:Oe(["tabButton",{active:r.value==="catcraft"}]),onClick:_[1]||(_[1]=C=>y("catcraft"))}," Cat craft ",2)]),h("div",FH,[h("h3",UH,E(s.value.buy)+" "+E(s.value.coin),1),h("div",VH,[h("div",$H,[_[4]||(_[4]=h("img",{src:Vg,alt:"Point",class:"exchangeIcon"},null,-1)),Wt(h("input",{type:"number","onUpdate:modelValue":_[2]||(_[2]=C=>l.value=C),placeholder:"0",class:"exchangeInput",step:"1",min:"0"},null,512),[[ps,l.value]])]),_[6]||(_[6]=h("img",{src:n_,alt:"Arrow",class:"exchangeArrow"},null,-1)),h("div",HH,[_[5]||(_[5]=h("img",{src:Ah,alt:"Coin",class:"exchangeIcon"},null,-1)),h("div",GH,E(d.value),1)])]),h("button",{class:"submitBtn",onClick:m,disabled:!l.value||parseFloat(l.value)<=0||d.value<=0},E(s.value.buyButton),9,QH)]),h("div",jH,[h("h3",zH,E(s.value.sell)+" "+E(s.value.coin),1),h("div",WH,[h("div",KH,[_[7]||(_[7]=h("img",{src:Ah,alt:"Coin",class:"exchangeIcon"},null,-1)),Wt(h("input",{type:"number","onUpdate:modelValue":_[3]||(_[3]=C=>c.value=C),placeholder:"0",class:"exchangeInput",step:"0.01",min:"0"},null,512),[[ps,c.value]])]),_[9]||(_[9]=h("img",{src:n_,alt:"Arrow",class:"exchangeArrow"},null,-1)),h("div",qH,[_[8]||(_[8]=h("img",{src:Vg,alt:"Point",class:"exchangeIcon"},null,-1)),h("div",JH,E(f.value),1)])]),h("button",{class:"submitBtn sellBtn",onClick:w,disabled:!c.value||parseFloat(c.value)<=0||f.value<=0},E(s.value.sellButton),9,YH)])])]),ze(jn)]))}},ZH=Qt(XH,[["__scopeId","data-v-3a233fe4"]]),wf=()=>{const n=localStorage.getItem("questProgress");return n?JSON.parse(n):{}},UT=n=>{localStorage.setItem("questProgress",JSON.stringify(n))},Tp=n=>{const e=wf();n.forEach(t=>{delete e[t]}),UT(e)},e7=(n,e=1)=>{const t=wf();({mining:[1,9,20],hunting:[2,10,21],exploration:[3,11,22],production:[4,12,23],coinEarned:[5,13,17],levelUp:[6,14,18],nftCreated:[25,26,27],nftOwned:[28,29,30]}[n]||[]).forEach(i=>{t[i]||(t[i]=0),t[i]+=e}),UT(t),window.dispatchEvent(new CustomEvent("questProgressUpdated"))},VT=(n,e)=>{const s=wf()[n]||0;switch(n){case 5:case 13:case 17:return Math.max(s,e?.totalCoin||0);case 6:case 14:case 18:return e?.level||1;case 25:case 26:case 27:return s;case 28:case 29:case 30:const r=e?.inventory||[];return n===28?r.filter(i=>i.stars>=3).length:n===29?r.filter(i=>i.stars>=4).length:n===30?r.filter(i=>i.stars>=5).length:0;default:return s}},t7=(n,e)=>VT(n.id,e)>=n.total,n7={class:"questPage"},s7={class:"mainContent"},r7={class:"filterTabs"},i7={class:"mainTabs"},o7={class:"questList"},a7={class:"questContent"},l7={class:"questInfo"},c7={class:"questTitle"},u7={class:"questDescription"},d7={key:0,class:"questRewards"},h7={key:0,class:"rewardItem"},f7={key:1,class:"rewardItem"},p7={key:2,class:"rewardItem"},g7=["onClick"],m7={key:1,class:"completedBadge"},v7={key:2,class:"progressBar"},y7={class:"progressText"},A7={__name:"QuestPage",setup(n){const e=on(),t=pe(()=>gs()),s=pe(()=>e.state.coins),r=U("inProgress"),i=U("daily"),o=()=>new Date().toDateString(),a=()=>{const y=localStorage.getItem("questLastDate"),A=o();return y!==A?(localStorage.setItem("questLastDate",A),localStorage.removeItem("rewardedQuests"),!0):!1},l=()=>{const y=localStorage.getItem("rewardedQuests");return y?JSON.parse(y):[]},c=y=>{localStorage.setItem("rewardedQuests",JSON.stringify(y)),localStorage.setItem("questLastDate",o())};t.value.coin,t.value.catFragments,t.value.exp;const d=U([{id:1,title:"Daily Mining 10 Times",description:"Complete 10 mining activities today",completed:!1,rewardReceived:!1,progress:0,total:10,type:"daily",reward:{coins:100,catFragments:5},actionType:"mining"},{id:2,title:"Daily Hunting 5 Times",description:"Defeat 5 monsters",completed:!1,rewardReceived:!1,progress:0,total:5,type:"daily",reward:{coins:100,catFragments:5},actionType:"hunting"},{id:3,title:"Daily Exploration 1 Time",description:"Complete 1 exploration activity",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:150,catFragments:10},actionType:"exploration"},{id:4,title:"Daily Production 3 Items",description:"Produce 3 or more items",completed:!1,rewardReceived:!1,progress:0,total:3,type:"daily",reward:{coins:120,catFragments:8},actionType:"production"},{id:5,title:"Daily Coin 1,000 Acquisition",description:"Acquire 1,000 or more coins",completed:!1,rewardReceived:!1,progress:0,total:1e3,type:"daily",reward:{coins:200,catFragments:15},actionType:"coinEarned"},{id:6,title:"Daily Level Up 1 Time",description:"Level up 1 or more levels",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:300,catFragments:20},actionType:"levelUp"},{id:7,title:"Daily Check-in",description:"Log in to the game and check daily quests",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:50,catFragments:3},actionType:"login"},{id:8,title:"Daily NFT Creation 1",description:"Create 1 cat NFT",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:500,catFragments:30},actionType:"nftCreated"},{id:9,title:"Weekly Quest: Mining Master",description:"Complete 50 mining activities in a week",completed:!1,rewardReceived:!1,progress:0,total:50,type:"weekly",reward:{coins:1e3,catFragments:50},actionType:"mining"},{id:10,title:"Weekly Quest: Hunter",description:"Defeat 100 monsters in a week",completed:!1,rewardReceived:!1,progress:0,total:100,type:"weekly",reward:{coins:2e3,catFragments:100},actionType:"hunting"},{id:11,title:"Weekly Quest: Explorer",description:"Explore 5 new areas",completed:!1,rewardReceived:!1,progress:0,total:5,type:"weekly",reward:{coins:1500,catFragments:80},actionType:"exploration"},{id:12,title:"Weekly Quest: Producer",description:"Produce 50 or more items",completed:!1,rewardReceived:!1,progress:0,total:50,type:"weekly",reward:{coins:1800,catFragments:90},actionType:"production"},{id:13,title:"Weekly Quest: Coin Collector",description:"Acquire 50,000 or more coins",completed:!1,rewardReceived:!1,progress:0,total:5e4,type:"weekly",reward:{coins:5e3,catFragments:200},actionType:"coinEarned"},{id:14,title:"Weekly Quest: Level Up 5",description:"Level up 5 or more levels",completed:!1,rewardReceived:!1,progress:0,total:5,type:"weekly",reward:{coins:3e3,catFragments:150},actionType:"levelUp"},{id:15,title:"Weekly Quest: NFT Collector",description:"Create 5 or more NFTs",completed:!1,rewardReceived:!1,progress:0,total:5,type:"weekly",reward:{coins:4e3,catFragments:250},actionType:"nftCreated"},{id:16,title:"Weekly Quest: Own Rare NFT",description:"Own 1 or more Rare grade (3-star or higher) NFTs",completed:!1,rewardReceived:!1,progress:0,total:1,type:"weekly",reward:{coins:5e3,catFragments:300},actionType:"nftOwned"},{id:17,title:"Monthly Quest: Coin King",description:"Acquire 200,000 or more coins this month",completed:!1,rewardReceived:!1,progress:0,total:2e5,type:"monthly",reward:{coins:2e4,catFragments:1e3},actionType:"coinEarned"},{id:18,title:"Monthly Quest: Extreme Level Up",description:"Level up 20 or more levels",completed:!1,rewardReceived:!1,progress:0,total:20,type:"monthly",reward:{coins:15e3,catFragments:800},actionType:"levelUp"},{id:19,title:"Monthly Quest: NFT Master",description:"Create 20 or more NFTs",completed:!1,rewardReceived:!1,progress:0,total:20,type:"monthly",reward:{coins:25e3,catFragments:1500},actionType:"nftCreated"},{id:20,title:"Monthly Quest: Master Miner",description:"Complete 500 or more mining activities",completed:!1,rewardReceived:!1,progress:0,total:500,type:"monthly",reward:{coins:1e4,catFragments:500},actionType:"mining"},{id:21,title:"Monthly Quest: Warrior",description:"Defeat 500 monsters",completed:!1,rewardReceived:!1,progress:0,total:500,type:"monthly",reward:{coins:12e3,catFragments:600},actionType:"hunting"},{id:22,title:"Monthly Quest: Great Explorer",description:"Explore 20 new areas",completed:!1,rewardReceived:!1,progress:0,total:20,type:"monthly",reward:{coins:1e4,catFragments:500},actionType:"exploration"},{id:23,title:"Monthly Quest: Perfect Producer",description:"Produce 200 various items",completed:!1,rewardReceived:!1,progress:0,total:200,type:"monthly",reward:{coins:15e3,catFragments:700},actionType:"production"},{id:24,title:"Monthly Quest: Own Epic NFT",description:"Own 1 or more Epic grade (4-star or higher) NFTs",completed:!1,rewardReceived:!1,progress:0,total:1,type:"monthly",reward:{coins:3e4,catFragments:2e3},actionType:"nftOwned"},{id:25,title:"Daily NFT Creation 1",description:"Create 1 cat NFT",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:500,catFragments:30},actionType:"nftCreated"},{id:26,title:"Weekly NFT Creation 5",description:"Create 5 cat NFTs",completed:!1,rewardReceived:!1,progress:0,total:5,type:"weekly",reward:{coins:4e3,catFragments:250},actionType:"nftCreated"},{id:27,title:"Monthly NFT Creation 20",description:"Create 20 cat NFTs",completed:!1,rewardReceived:!1,progress:0,total:20,type:"monthly",reward:{coins:25e3,catFragments:1500},actionType:"nftCreated"},{id:28,title:"Own Rare NFT",description:"Own 1 or more Rare grade (3-star or higher) NFTs",completed:!1,rewardReceived:!1,progress:0,total:1,type:"daily",reward:{coins:1e3,catFragments:50},actionType:"nftOwned"},{id:29,title:"Own Epic NFT",description:"Own 1 or more Epic grade (4-star or higher) NFTs",completed:!1,rewardReceived:!1,progress:0,total:1,type:"weekly",reward:{coins:5e3,catFragments:300},actionType:"nftOwned"},{id:30,title:"Own Legendary NFT",description:"Own 1 or more Legendary grade (5-star) NFTs",completed:!1,rewardReceived:!1,progress:0,total:1,type:"monthly",reward:{coins:5e4,catFragments:5e3},actionType:"nftOwned"}]),f=()=>{const y=dt();!y||!y.gameData||d.value.forEach(A=>{const _=VT(A.id,y.gameData);A.progress=_,A.completed=t7(A,y.gameData)})},p=async y=>{const A=d.value.find(j=>j.id===y);if(!A||!A.completed||A.rewardReceived)return;const _=dt();if(!_){alert(t.value.loginRequired);return}const C=A.reward||{},S={};if(C.coins&&(S.totalCoin=(_.gameData?.totalCoin||0)+C.coins),C.catFragments&&(S.catFragments=(_.gameData?.catFragments||50)+C.catFragments),C.exp){const j=_.gameData?.level||1,x=C.exp,I=Math.floor(x/100);I>0&&(S.level=j+I)}await e.updateGameData(S),A.rewardReceived=!0;const B=l();B.includes(y)||(B.push(y),c(B)),window.dispatchEvent(new CustomEvent("userDataUpdated"));const V=[];C.coins&&V.push(`${C.coins} ${t.value.coin}`),C.catFragments&&V.push(`${C.catFragments} ${t.value.catFragments}`),C.exp&&V.push(`${C.exp} ${t.value.exp}`),alert(`${t.value.rewardReceived}
You have earned ${V.join(", ")}.`)},m=pe(()=>{let y=d.value.filter(A=>A.type===i.value);return r.value==="inProgress"?y=y.filter(A=>!A.completed||A.completed&&!A.rewardReceived):r.value==="completed"&&(y=y.filter(A=>A.completed&&A.rewardReceived)),y.sort((A,_)=>A.completed&&!A.rewardReceived&&(_.rewardReceived||!_.completed)?-1:(A.rewardReceived||!A.completed)&&_.completed&&!_.rewardReceived?1:0)}),w=()=>{const y=o();if(localStorage.getItem("questResetDate")!==y){const x=d.value.filter(T=>T.type==="daily").map(T=>T.id);Tp(x);const I=l();I.filter(T=>x.includes(T)).forEach(T=>{const b=I.indexOf(T);b>-1&&I.splice(b,1)}),c(I),d.value.forEach(T=>{T.type==="daily"&&(T.rewardReceived=!1,T.completed=!1,T.progress=0)}),localStorage.setItem("questResetDate",y)}const _=new Date,C=_.getDay(),S=localStorage.getItem("questWeeklyResetDate"),B=new Date(_.setDate(_.getDate()-C+1)).toDateString();if(S!==B){const x=d.value.filter(T=>T.type==="weekly").map(T=>T.id);Tp(x);const I=l();I.filter(T=>x.includes(T)).forEach(T=>{const b=I.indexOf(T);b>-1&&I.splice(b,1)}),c(I),d.value.forEach(T=>{T.type==="weekly"&&(T.rewardReceived=!1,T.completed=!1,T.progress=0)}),localStorage.setItem("questWeeklyResetDate",B)}const V=localStorage.getItem("questMonthlyResetDate"),j=new Date(_.getFullYear(),_.getMonth(),1).toDateString();if(V!==j){const x=d.value.filter(T=>T.type==="monthly").map(T=>T.id);Tp(x);const I=l();I.filter(T=>x.includes(T)).forEach(T=>{const b=I.indexOf(T);b>-1&&I.splice(b,1)}),c(I),d.value.forEach(T=>{T.type==="monthly"&&(T.rewardReceived=!1,T.completed=!1,T.progress=0)}),localStorage.setItem("questMonthlyResetDate",j)}};return Nt(()=>{e.loadCurrentUser();const y=()=>{e.loadCurrentUser()};window.addEventListener("userDataUpdated",y),rn(()=>{window.removeEventListener("userDataUpdated",y)}),a(),w();const A=l();d.value.forEach(C=>{A.includes(C.id)&&(C.rewardReceived=!0)}),f();const _=d.value.find(C=>C.id===7&&C.type==="daily");if(_&&!_.completed){_.progress=1,_.completed=!0;const C=wf();C[7]=1,localStorage.setItem("questProgress",JSON.stringify(C))}window.addEventListener("questProgressUpdated",f),window.addEventListener("userDataUpdated",f)}),rn(()=>{window.removeEventListener("questProgressUpdated",f),window.removeEventListener("userDataUpdated",f)}),(y,A)=>(L(),M("div",n7,[ze(Qn,{coinCount:s.value},null,8,["coinCount"]),h("main",s7,[h("div",r7,[h("button",{class:Oe(["filterTab",{active:i.value==="daily"}]),onClick:A[0]||(A[0]=_=>i.value="daily")}," Daily ",2),h("button",{class:Oe(["filterTab",{active:i.value==="weekly"}]),onClick:A[1]||(A[1]=_=>i.value="weekly")}," Weekly ",2),h("button",{class:Oe(["filterTab",{active:i.value==="monthly"}]),onClick:A[2]||(A[2]=_=>i.value="monthly")}," Monthly ",2)]),h("div",i7,[h("button",{class:Oe(["mainTab",{active:r.value==="inProgress"}]),onClick:A[3]||(A[3]=_=>r.value="inProgress")},E(t.value.inProgress),3),h("button",{class:Oe(["mainTab",{active:r.value==="completed"}]),onClick:A[4]||(A[4]=_=>r.value="completed")},E(t.value.completed),3)]),h("div",o7,[(L(!0),M(Re,null,We(m.value,_=>(L(),M("div",{key:_.id,class:"questCard"},[h("div",a7,[h("div",l7,[h("h3",c7,E(_.title),1),h("p",u7,E(_.description),1),_.reward?(L(),M("div",d7,[_.reward.coins?(L(),M("span",h7,"  "+E(_.reward.coins),1)):he("",!0),_.reward.catFragments?(L(),M("span",f7,"  "+E(_.reward.catFragments),1)):he("",!0),_.reward.exp?(L(),M("span",p7,"  "+E(_.reward.exp),1)):he("",!0)])):he("",!0)]),A[5]||(A[5]=h("div",{class:"questCharacter"},[h("div",{class:"characterImg"},"")],-1))]),_.completed&&!_.rewardReceived?(L(),M("button",{key:0,class:"rewardBtn",onClick:C=>p(_.id)},E(t.value.receive),9,g7)):_.completed&&_.rewardReceived?(L(),M("div",m7,"  "+E(t.value.completed),1)):(L(),M("div",v7,[h("div",{class:"progressFill",style:St({width:_.progress/_.total*100+"%"})},null,4),h("span",y7,E(_.progress)+"/"+E(_.total),1)]))]))),128))])]),ze(jn)]))}},w7=Qt(A7,[["__scopeId","data-v-ff25a02c"]]),et={COMMON:"common",RARE:"rare",EPIC:"epic",LEGENDARY:"legendary"},Sp={[et.COMMON]:.7,[et.RARE]:.9,[et.EPIC]:.98,[et.LEGENDARY]:1},r_={[et.COMMON]:{min:2,max:3},[et.RARE]:{min:3,max:4},[et.EPIC]:{min:4,max:5},[et.LEGENDARY]:{min:5,max:5}},i_={[et.COMMON]:{miningEfficiency:{min:5,max:15},huntingDamage:{min:5,max:15},explorationReward:{min:5,max:15},productionSpeed:{min:5,max:15}},[et.RARE]:{miningEfficiency:{min:15,max:30},huntingDamage:{min:15,max:30},explorationReward:{min:15,max:30},productionSpeed:{min:15,max:30}},[et.EPIC]:{miningEfficiency:{min:30,max:60},huntingDamage:{min:30,max:60},explorationReward:{min:30,max:60},productionSpeed:{min:30,max:60}},[et.LEGENDARY]:{miningEfficiency:{min:60,max:100},huntingDamage:{min:60,max:100},explorationReward:{min:60,max:100},productionSpeed:{min:60,max:100}}},o_={[et.COMMON]:{primary:"#9E9E9E",secondary:"#BDBDBD",border:"#757575",glow:"rgba(158, 158, 158, 0.3)"},[et.RARE]:{primary:"#2196F3",secondary:"#64B5F6",border:"#1976D2",glow:"rgba(33, 150, 243, 0.3)"},[et.EPIC]:{primary:"#9C27B0",secondary:"#BA68C8",border:"#7B1FA2",glow:"rgba(156, 39, 176, 0.3)"},[et.LEGENDARY]:{primary:"#FF9800",secondary:"#FFB74D",border:"#F57C00",glow:"rgba(255, 152, 0, 0.4)"}},a_={[et.COMMON]:"",[et.RARE]:"",[et.EPIC]:"",[et.LEGENDARY]:""},l_={[et.COMMON]:"Common",[et.RARE]:"Rare",[et.EPIC]:"Epic",[et.LEGENDARY]:"Legendary"};function _7(){const n=Math.random();return n<Sp[et.COMMON]?et.COMMON:n<Sp[et.RARE]?et.RARE:n<Sp[et.EPIC]?et.EPIC:et.LEGENDARY}function E7(n){const e=r_[n]||r_[et.COMMON];return Math.floor(Math.random()*(e.max-e.min+1))+e.min}function b7(n){const e=i_[n]||i_[et.COMMON],t=s=>Math.floor(Math.random()*(s.max-s.min+1))+s.min;return{miningEfficiency:t(e.miningEfficiency),huntingDamage:t(e.huntingDamage),explorationReward:t(e.explorationReward),productionSpeed:t(e.productionSpeed)}}function $T(n){if(n.rarity)return n;const e=_7(),t=n.stars||E7(e),s=b7(e);return{...n,rarity:e,stars:t,...s}}function cu(n){if(!n)return{};const e=o_[n]||o_[et.COMMON];return{"--rarity-color":e.primary,"--rarity-secondary":e.secondary,"--rarity-border":e.border,"--rarity-glow":e.glow}}function Iv(n){return(localStorage.getItem("appLanguage")||"English")==="English"?l_[n]||l_[et.COMMON]:a_[n]||a_[et.COMMON]}const I7="/tdl/assets/statStar1-DQ3NLFmi.png",C7="/tdl/assets/statStar2-7A5sNtwf.png",c_="/tdl/assets/inventoryTab_off-CzoQXsFX.png",u_="/tdl/assets/inventoryTab_on-BM74KYxp.png",T7="/tdl/assets/affline-CHli_Lq2.png",S7="/tdl/assets/exline-CK0DXNtO.png",P7={class:"inventoryPage"},R7={class:"mainContent"},x7={class:"tabButtons"},k7=["src"],N7=["src"],D7={key:0,class:"topSection"},O7={class:"panelTitle"},L7={class:"levelBadge"},B7={class:"magicPanelContainer"},M7={class:"magicPanel"},F7={class:"characterBox"},U7=["src","alt"],V7={class:"profilePanel"},$7={class:"progressBars"},H7={class:"progressBar noBar"},G7={class:"value"},Q7={class:"progressBar"},j7={class:"barBg"},z7=["src"],W7={class:"value"},K7={class:"progressBar noBar"},q7={class:"value"},J7={class:"progressBar"},Y7={class:"barBg"},X7=["src"],Z7={class:"value"},eG={key:1,class:"inventoryHeader"},tG={class:"inventoryCount"},nG={key:2,class:"inventoryGrid"},sG=["onClick","onDblclick"],rG={key:0,class:"newBadge"},iG={class:"catNameBadge"},oG={class:"starBadge"},aG=["src"],lG={class:"levelBadge"},cG=["src","alt"],uG={key:3,class:"emptyInventory"},dG={class:"emptyText"},hG={class:"emptySubtext"},fG={key:4,class:"itemGrid"},pG={class:"searchModalHeader"},gG={class:"searchModalTitle"},mG={class:"searchModalBody"},vG={class:"searchBox"},yG=["placeholder"],AG={class:"filterControls"},wG={class:"filterGroup"},_G={class:"filterLabel"},EG={value:"all"},bG={value:"2"},IG={value:"3"},CG={value:"4"},TG={value:"5"},SG={class:"filterGroup"},PG={class:"filterLabel"},RG={value:"all"},xG={class:"filterGroup"},kG={class:"filterLabel"},NG={value:"all"},DG={value:"common"},OG={value:"rare"},LG={value:"epic"},BG={value:"legendary"},MG={class:"filterGroup"},FG={class:"filterLabel"},UG={value:"newest"},VG={value:"oldest"},$G={value:"level"},HG={value:"stars"},GG={value:"rarity"},QG={value:"name"},jG={class:"searchModalFooter"},zG={class:"modalHeader"},WG={class:"modalTitle"},KG={class:"modalBody"},qG={class:"modalImageSection"},JG=["src"],YG={class:"modalBadges"},XG={class:"modalBadge stars"},ZG={class:"modalBadge level"},eQ={class:"modalStatsSection"},tQ={class:"sectionTitle"},nQ={class:"modalStats"},sQ={class:"modalStatLabel"},rQ={class:"modalStatBar"},iQ={class:"modalStatValue"},oQ={class:"modalInfoSection"},aQ={class:"infoRow"},lQ={class:"infoValue"},cQ={class:"infoRow"},uQ={class:"infoLabel"},dQ={class:"infoValue"},hQ={class:"infoRow"},fQ={class:"infoLabel"},pQ={class:"infoValue"},gQ={class:"expSection"},mQ={class:"expLabel"},vQ={class:"expBar"},yQ={class:"expText"},AQ={class:"modalFooter"},wQ=["disabled"],_Q={__name:"InventoryPage",setup(n){const e=on(),t=pe(()=>gs()),s=pe(()=>e.state.coins),r=U(""),i=U("all"),o=U("all"),a=U("all"),l=U("newest"),c=U(!1),d=U(null),f=U(!1),p=U("cat"),m=G=>[{name:t.value.strength,value:G[0],progress:G[0],color:"#FF6B6B"},{name:t.value.health,value:G[1],progress:G[1],color:"#FF8A80"},{name:t.value.intelligence,value:G[2],progress:G[2],color:"#9C27B0"},{name:t.value.dexterity,value:G[3],progress:G[3],color:"#FFA726"},{name:t.value.courage,value:G[4],progress:G[4],color:"#00BCD4"},{name:t.value.luck,value:G[5],progress:G[5],color:"#66BB6A"}],w=["Active","Quiet","Playful","Friendly","Independent","Affectionate","Curious","Brave"],y=G=>{if(G.stats)G.stats=G.stats.map(($,Z)=>{const me=[t.value.strength,t.value.health,t.value.intelligence,t.value.dexterity,t.value.courage,t.value.luck];return{...$,name:me[Z]||$.name}});else{const $=G.stars*15+Math.floor(Math.random()*20);G.stats=m([$+Math.floor(Math.random()*20),$+Math.floor(Math.random()*20),$+Math.floor(Math.random()*20),$+Math.floor(Math.random()*20),$+Math.floor(Math.random()*20),$+Math.floor(Math.random()*20)])}return G.personality||(G.personality=w[Math.floor(Math.random()*w.length)]),G.affinity===void 0&&(G.affinity=30+Math.floor(Math.random()*71)),G},A=U([]),_=pe(()=>{let G=[...A.value];if(r.value.trim()){const $=r.value.toLowerCase();G=G.filter(Z=>Z.name.toLowerCase().includes($)||String(Z.imageId).includes($))}return i.value!=="all"&&(G=G.filter($=>$.stars===parseInt(i.value))),o.value!=="all"&&(o.value==="1-5"?G=G.filter($=>$.level>=1&&$.level<=5):o.value==="6-10"?G=G.filter($=>$.level>=6&&$.level<=10):o.value==="11+"&&(G=G.filter($=>$.level>=11))),G=[...G].sort(($,Z)=>{switch(l.value){case"newest":return(Z.isNew?1:0)-($.isNew?1:0)||Z.id-$.id;case"oldest":return $.id-Z.id;case"level":return Z.level-$.level;case"stars":return Z.stars-$.stars;case"rarity":const me={[et.LEGENDARY]:4,[et.EPIC]:3,[et.RARE]:2,[et.COMMON]:1},Ve=me[$.rarity||et.COMMON]||0;return(me[Z.rarity||et.COMMON]||0)-Ve;case"name":return $.name.localeCompare(Z.name);default:return 0}}),G});pe(()=>{const G=A.value.find($=>$.selected);return G?y(G).stats:m([33,7,29,10,11,10])});const C=pe(()=>{const G=A.value.find($=>$.selected);return G&&y(G).personality||"Active"}),S=pe(()=>{const G=A.value.find($=>$.selected);return G&&y(G).affinity||50}),B=pe(()=>{const G=A.value.find($=>$.selected);return G?G.name:"Inventory is empty"}),V=pe(()=>{const G=A.value.find($=>$.selected);return G&&G.level||1}),j=pe(()=>{const G=A.value.find($=>$.selected);if(G){const $=y(G),Z=$.exp||0,me=$.maxExp||Gr($.level||1);return{current:Z,max:me,percentage:me>0?Math.min(Z/me*100,100):0}}return{current:0,max:100,percentage:0}}),x=pe(()=>{const G=A.value.find($=>$.selected);if(G){const $=y(G);if($.stats&&$.stats.length>0){const Z=$.stats.reduce((me,Ve)=>me+(Ve.value||0),0);return Math.round(Z/$.stats.length)}}return 0}),I=G=>{try{return new URL(Object.assign({"../assets/img/cat1.png":hl,"../assets/img/cat10.png":fl,"../assets/img/cat11.png":pl,"../assets/img/cat12.png":gl,"../assets/img/cat13.png":ml,"../assets/img/cat14.png":vl,"../assets/img/cat15.png":yl,"../assets/img/cat16.png":Al,"../assets/img/cat17.png":wl,"../assets/img/cat18.png":_l,"../assets/img/cat19.png":El,"../assets/img/cat2.png":bl,"../assets/img/cat20.png":Il,"../assets/img/cat21.png":Cl,"../assets/img/cat22.png":Tl,"../assets/img/cat23.png":Sl,"../assets/img/cat24.png":Pl,"../assets/img/cat25.png":Rl,"../assets/img/cat26.png":xl,"../assets/img/cat27.png":kl,"../assets/img/cat28.png":Nl,"../assets/img/cat29.png":Dl,"../assets/img/cat3.png":Ol,"../assets/img/cat30.png":Ll,"../assets/img/cat4.png":Bl,"../assets/img/cat5.png":Ml,"../assets/img/cat6.png":Fl,"../assets/img/cat7.png":Ul,"../assets/img/cat8.png":Vl,"../assets/img/cat9.png":$l,"../assets/img/catPoint.png":Hl,"../assets/img/catPointPlus.png":Gl,"../assets/img/catProfile01.png":Ql,"../assets/img/catProfile02.png":jl,"../assets/img/cat_ico.png":zl})[`../assets/img/cat${G}.png`],import.meta.url).href}catch{return`/src/assets/img/cat${G}.png`}},P=pe(()=>{const G=A.value.find($=>$.selected);return I(G?G.imageId||G.id:1)}),T=G=>{const $=wh(G);d.value=y({...$}),c.value=!0},b=()=>{c.value=!1,d.value=null},D=async G=>{if(A.value.forEach($=>$.selected=!1),G.selected=!0,G.isNew&&(G.isNew=!1,dt())){const Z=A.value.map(me=>({...me,isNew:me.id===G.id?!1:me.isNew}));await e.updateGameData({inventory:Z})}},k=()=>{r.value="",i.value="all",o.value="all",a.value="all",l.value="newest"},ke=async()=>{if(!d.value)return;const G=Cp(d.value.level||1);if(s.value<G){alert(`${t.value.insufficientCoins} (Required: ${G})`);return}const $=dt();if($){const me=($.gameData?.inventory||[]).map(Ne=>{if(Ne.id===d.value.id){const W=(Ne.level||1)+1,ue=Gr(W),Pe=J5(Ne),tt=(Ne.miningEfficiency||0)+Pe,Y=(Ne.huntingDamage||0)+Pe,ge=(Ne.explorationReward||0)+Pe,fe=(Ne.productionSpeed||0)+Pe;return{...Ne,level:W,exp:0,maxExp:ue,miningEfficiency:tt,huntingDamage:Y,explorationReward:ge,productionSpeed:fe}}return Ne}),Ve=s.value-G;try{await e.updateMultiple({coins:Ve}),await e.updateGameData({inventory:me});const Ne=me.find(se=>se.id===d.value.id);Ne&&(d.value=y({...Ne})),ie(),alert(`${t.value.levelUp} Success! Level ${newLevel}`)}catch(Ne){console.error(" :",Ne),alert("An error occurred during level up.")}}},ie=async()=>{const G=dt();if(G){e.loadCurrentUser();const $=G.gameData?.inventory||[];if($.length>0){const Z=$.map(Ve=>{const Ne=Ve.rarity?Ve:$T(Ve),se=y({...Ne}),W=wh(se);if(!W.exp||W.exp===0){const ue=W.maxExp||Gr(W.level||1);W.exp=Math.floor(Math.random()*ue)}return W.personality||(W.personality=w[Math.floor(Math.random()*w.length)]),W.affinity===void 0&&(W.affinity=30+Math.floor(Math.random()*71)),W});A.value=Z,dt()&&Z.some((Ne,se)=>{const W=$[se];return!W.exp||W.exp===0||!W.personality||W.affinity===void 0})&&await e.updateGameData({inventory:Z})}else A.value=[]}else A.value=[]};return Nt(()=>{ie(),window.addEventListener("userDataUpdated",ie)}),rn(()=>{window.removeEventListener("userDataUpdated",ie)}),(G,$)=>(L(),M("div",P7,[ze(Qn,{coinCount:s.value,hideRightIcons:!0},null,8,["coinCount"]),h("main",R7,[h("div",x7,[h("button",{class:Oe(["tabButton",{active:p.value==="cat"}]),onClick:$[0]||($[0]=Z=>p.value="cat")},[h("img",{src:p.value==="cat"?De(u_):De(c_),alt:"Cat",class:"tabButtonImg"},null,8,k7),$[15]||($[15]=h("span",{class:"tabButtonText"},"Cat",-1))],2),h("button",{class:Oe(["tabButton",{active:p.value==="item"}]),onClick:$[1]||($[1]=Z=>p.value="item")},[h("img",{src:p.value==="item"?De(u_):De(c_),alt:"Item",class:"tabButtonImg"},null,8,N7),$[16]||($[16]=h("span",{class:"tabButtonText"},"Item",-1))],2)]),p.value==="cat"?(L(),M("div",D7,[h("div",O7,[h("span",null,E(B.value),1),h("span",L7,"Lv."+E(V.value),1)]),h("div",B7,[h("div",M7,[h("div",F7,[h("img",{src:P.value,alt:t.value.selectedCharacter,class:"selectedCharacter"},null,8,U7)])]),h("div",V7,[h("div",$7,[h("div",H7,[$[17]||($[17]=h("div",{class:"statLabel"},"Personality:",-1)),h("span",G7,E(C.value),1)]),h("div",Q7,[$[18]||($[18]=h("div",{class:"statLabel"},"Affinity",-1)),h("div",j7,[h("div",{style:St({width:S.value+"%"}),class:"barFill barFillAffinity"},[h("img",{src:De(T7),alt:"Affinity Graph",class:"barFillImage"},null,8,z7)],4)]),h("span",W7,E(S.value)+"%",1)]),h("div",K7,[$[19]||($[19]=h("div",{class:"statLabel"},"Ability",-1)),h("span",q7,E(x.value),1)]),h("div",J7,[$[20]||($[20]=h("div",{class:"statLabel"},"Experience",-1)),h("div",Y7,[h("div",{style:St({width:j.value.percentage+"%"}),class:"barFill barFillExperience"},[h("img",{src:De(S7),alt:"Experience Graph",class:"barFillImage"},null,8,X7)],4)]),h("span",Z7,E(j.value.percentage.toFixed(0))+"%",1)])])])])])):he("",!0),p.value==="cat"?(L(),M("div",eG,[h("div",tG,E(t.value.totalItems)+" "+E(_.value.length)+" / "+E(A.value.length)+" "+E(t.value.items),1),h("button",{class:"searchBtn",onClick:$[2]||($[2]=Z=>f.value=!0)},[$[21]||($[21]=h("span",{class:"searchIcon"},"",-1)),h("span",null,E(t.value.search),1)])])):he("",!0),p.value==="cat"&&_.value.length>0?(L(),M("div",nG,[(L(!0),M(Re,null,We(_.value,Z=>(L(),M("div",{key:Z.id,class:Oe(["inventoryItem",{selected:Z.selected,[`rarity-${Z.rarity||"common"}`]:!0}]),style:St(De(cu)(Z.rarity)),onClick:me=>D(Z),onDblclick:me=>T(Z)},[Z.isNew?(L(),M("div",rG,"NEW")):he("",!0),h("div",iG,E(Z.name),1),h("div",oG,[(L(),M(Re,null,We(5,me=>h("img",{key:me,src:me<=Z.stars?De(I7):De(C7),alt:"",class:"starIcon"},null,8,aG)),64))]),h("div",lG," Lv "+E(String(Z.level).padStart(2,"0")),1),h("img",{src:I(Z.imageId||Z.id),alt:t.value.cat,class:"itemIcon"},null,8,cG)],46,sG))),128))])):he("",!0),p.value==="cat"&&_.value.length===0?(L(),M("div",uG,[$[22]||($[22]=h("div",{class:"emptyIcon"},"",-1)),h("div",dG,E(t.value.noNFTs),1),h("div",hG,E(t.value.createCatInFactory),1)])):he("",!0),p.value==="item"?(L(),M("div",fG,[(L(),M(Re,null,We(9,Z=>h("div",{key:Z,class:"itemBox"},[...$[23]||($[23]=[h("span",{class:"noItemText"},"no item",-1)])])),64))])):he("",!0)]),ze(jn),f.value?(L(),M("div",{key:0,class:"modalOverlay",onClick:$[12]||($[12]=Z=>f.value=!1)},[h("div",{class:"searchModal",onClick:$[11]||($[11]=xn(()=>{},["stop"]))},[h("div",pG,[h("h3",gG,E(t.value.searchAndFilter),1),h("button",{class:"searchModalClose",onClick:$[3]||($[3]=Z=>f.value=!1)},"")]),h("div",mG,[h("div",vG,[Wt(h("input",{type:"text","onUpdate:modelValue":$[4]||($[4]=Z=>r.value=Z),placeholder:t.value.searchPlaceholder,class:"searchInput",onKeyup:$[5]||($[5]=k1(Z=>f.value=!1,["enter"]))},null,40,yG),[[ps,r.value]])]),h("div",AG,[h("div",wG,[h("label",_G,E(t.value.starRating),1),Wt(h("select",{"onUpdate:modelValue":$[6]||($[6]=Z=>i.value=Z),class:"filterSelect"},[h("option",EG,E(t.value.all),1),h("option",bG,"2 "+E(t.value.stars),1),h("option",IG,"3 "+E(t.value.stars),1),h("option",CG,"4 "+E(t.value.stars),1),h("option",TG,"5 "+E(t.value.stars),1)],512),[[Ni,i.value]])]),h("div",SG,[h("label",PG,E(t.value.levelFilter),1),Wt(h("select",{"onUpdate:modelValue":$[7]||($[7]=Z=>o.value=Z),class:"filterSelect"},[h("option",RG,E(t.value.all),1),$[24]||($[24]=h("option",{value:"1-5"},"1-5",-1)),$[25]||($[25]=h("option",{value:"6-10"},"6-10",-1)),$[26]||($[26]=h("option",{value:"11+"},"11+",-1))],512),[[Ni,o.value]])]),h("div",xG,[h("label",kG,E(t.value.rarityFilter),1),Wt(h("select",{"onUpdate:modelValue":$[8]||($[8]=Z=>a.value=Z),class:"filterSelect"},[h("option",NG,E(t.value.all),1),h("option",DG,E(t.value.common),1),h("option",OG,E(t.value.rare),1),h("option",LG,E(t.value.epic),1),h("option",BG,E(t.value.legendary),1)],512),[[Ni,a.value]])]),h("div",MG,[h("label",FG,E(t.value.sortBy),1),Wt(h("select",{"onUpdate:modelValue":$[9]||($[9]=Z=>l.value=Z),class:"filterSelect"},[h("option",UG,E(t.value.newest),1),h("option",VG,E(t.value.oldest),1),h("option",$G,E(t.value.levelHighToLow),1),h("option",HG,E(t.value.starsHighToLow),1),h("option",GG,E(t.value.rarityHighToLow),1),h("option",QG,E(t.value.nameOrder),1)],512),[[Ni,l.value]])])]),h("div",jG,[h("button",{class:"resetFilterBtn",onClick:k},E(t.value.reset),1),h("button",{class:"applyFilterBtn",onClick:$[10]||($[10]=Z=>f.value=!1)},E(t.value.apply),1)])])])])):he("",!0),c.value&&d.value?(L(),M("div",{key:1,class:"modalOverlay",onClick:b},[h("div",{class:"modalContent",onClick:$[14]||($[14]=xn(()=>{},["stop"]))},[h("div",zG,[h("h3",WG,E(d.value.name),1),h("button",{class:"modalClose",onClick:b},"")]),h("div",KG,[h("div",qG,[h("img",{src:I(d.value.imageId||d.value.id),alt:"NFT",class:"modalImage"},null,8,JG),h("div",YG,[d.value.rarity?(L(),M("div",{key:0,class:"modalBadge rarity",style:St(De(cu)(d.value.rarity))},E(De(Iv)(d.value.rarity)),5)):he("",!0),h("div",XG,[(L(),M(Re,null,We(5,Z=>h("span",{key:Z,class:"star"},E(Z<=d.value.stars?"":""),1)),64))]),h("div",ZG,"Lv "+E(d.value.level),1)])]),h("div",eQ,[h("h4",tQ,E(t.value.stats),1),h("div",nQ,[(L(!0),M(Re,null,We(d.value.stats,(Z,me)=>(L(),M("div",{key:me,class:"modalStat"},[h("div",sQ,E(Z.name),1),h("div",rQ,[h("div",{style:St({width:Z.progress+"%",backgroundColor:Z.color}),class:"modalStatFill"},null,4)]),h("div",iQ,E(Z.value)+"%",1)]))),128))])]),h("div",oQ,[h("div",aQ,[$[27]||($[27]=h("span",{class:"infoLabel"},"NFT ID:",-1)),h("span",lQ,"#"+E(d.value.id),1)]),h("div",cQ,[h("span",uQ,E(t.value.imageId)+":",1),h("span",dQ,"#"+E(d.value.imageId),1)]),h("div",hQ,[h("span",fQ,E(t.value.createdAt)+":",1),h("span",pQ,E(new Date(d.value.id).toLocaleDateString()),1)])]),h("div",gQ,[h("div",mQ,E(t.value.exp),1),h("div",vQ,[h("div",{class:"expFill",style:St({width:Math.min((d.value.exp||0)/(d.value.maxExp||De(Gr)(d.value.level||1))*100,100)+"%"})},null,4)]),h("div",yQ,E(d.value.exp||0)+" / "+E(d.value.maxExp||De(Gr)(d.value.level||1)),1)])]),h("div",AQ,[De(q5)(d.value)?(L(),M("button",{key:0,class:"modalBtn levelUpBtn",onClick:ke,disabled:s.value<De(Cp)(d.value.level||1)},E(t.value.levelUpButton)+" ("+E(De(Cp)(d.value.level||1))+" "+E(t.value.coin)+") ",9,wQ)):he("",!0),h("button",{class:"modalBtn selectBtn",onClick:$[13]||($[13]=Z=>{D(d.value),b()})},E(t.value.selectButton),1)])])])):he("",!0)]))}},EQ=Qt(_Q,[["__scopeId","data-v-bb74b58f"]]),bQ="/tdl/assets/factory_cat-DD06P-8u.png",IQ={class:"factoryPage"},CQ={class:"mainContent"},TQ={class:"tabButtons"},SQ={class:"materialsSection"},PQ=["alt"],RQ={class:"materialText"},xQ={class:"materialCount"},kQ={class:"materialText"},NQ={class:"materialCount"},DQ=["disabled"],OQ=["src"],LQ={class:"popupTitle"},BQ={class:"popupMessage"},MQ={__name:"FactoryPage",setup(n){const e=Sn(),t=pe(()=>gs()),s=on(),r=pe(()=>s.state.totalCoin),i=pe(()=>s.state.catFragments),o=U(100),a=U(3),l=U("catcraft"),c=U(!1),d=U(1),f=U(null);Nt(()=>{s.loadCurrentUser();const B=()=>{s.loadCurrentUser()};window.addEventListener("userDataUpdated",B),rn(()=>{window.removeEventListener("userDataUpdated",B)})});const p=async()=>{if(r.value<o.value){alert(`${t.value.insufficientCoins} (Required: ${o.value})`);return}if(i.value<a.value){alert(`${t.value.insufficientFragments} (Required: ${a.value})`);return}const B=dt();if(B){const V=r.value-o.value,j=i.value-a.value;d.value=A();const x=B.gameData?.inventory||[];x.length+1;const I=Gr(1),P=Math.floor(Math.random()*I),T={id:Date.now(),imageId:d.value,name:`Cat ${d.value}`,level:1,exp:P,maxExp:I,selected:!1,isNew:!0},b=$T(T);f.value=b.rarity;const D=[b,...x];await s.updateGameData({totalCoin:V,catFragments:j,inventory:D}),e7("nftCreated",1),c.value=!0}},m=pe(()=>r.value>=o.value&&i.value>=a.value),w=pe(()=>r.value>=o.value),y=pe(()=>i.value>=a.value),A=()=>Math.floor(Math.random()*30)+1,_=B=>{try{return new URL(Object.assign({"../assets/img/cat1.png":hl,"../assets/img/cat10.png":fl,"../assets/img/cat11.png":pl,"../assets/img/cat12.png":gl,"../assets/img/cat13.png":ml,"../assets/img/cat14.png":vl,"../assets/img/cat15.png":yl,"../assets/img/cat16.png":Al,"../assets/img/cat17.png":wl,"../assets/img/cat18.png":_l,"../assets/img/cat19.png":El,"../assets/img/cat2.png":bl,"../assets/img/cat20.png":Il,"../assets/img/cat21.png":Cl,"../assets/img/cat22.png":Tl,"../assets/img/cat23.png":Sl,"../assets/img/cat24.png":Pl,"../assets/img/cat25.png":Rl,"../assets/img/cat26.png":xl,"../assets/img/cat27.png":kl,"../assets/img/cat28.png":Nl,"../assets/img/cat29.png":Dl,"../assets/img/cat3.png":Ol,"../assets/img/cat30.png":Ll,"../assets/img/cat4.png":Bl,"../assets/img/cat5.png":Ml,"../assets/img/cat6.png":Fl,"../assets/img/cat7.png":Ul,"../assets/img/cat8.png":Vl,"../assets/img/cat9.png":$l,"../assets/img/catPoint.png":Hl,"../assets/img/catPointPlus.png":Gl,"../assets/img/catProfile01.png":Ql,"../assets/img/catProfile02.png":jl,"../assets/img/cat_ico.png":zl})[`../assets/img/cat${B}.png`],import.meta.url).href}catch{return`/src/assets/img/cat${B}.png`}},C=()=>{c.value=!1,f.value=null},S=B=>{B==="exchange"?e.push("/exchange"):B==="catcraft"&&(l.value="catcraft")};return(B,V)=>(L(),M("div",IQ,[ze(Qn,{catCount:i.value},null,8,["catCount"]),h("main",CQ,[h("div",TQ,[h("button",{class:Oe(["tabButton",{active:l.value==="exchange"}]),onClick:V[0]||(V[0]=j=>S("exchange"))}," Exchange ",2),h("button",{class:Oe(["tabButton",{active:l.value==="catcraft"}]),onClick:V[1]||(V[1]=j=>S("catcraft"))}," Cat craft ",2)]),V[4]||(V[4]=h("div",{class:"catSilhouette"},[h("img",{src:bQ,alt:"Cat",class:"catShape"})],-1)),h("div",SQ,[h("div",{class:Oe(["materialItem",{insufficient:!w.value}])},[h("img",{src:Ah,alt:t.value.coin,class:"materialIcon"},null,8,PQ),h("span",RQ,[h("span",xQ,E(r.value),1),Qi(" / "+E(o.value),1)])],2),h("div",{class:Oe(["materialItem",{insufficient:!y.value}])},[V[3]||(V[3]=h("img",{src:MT,alt:"Cat",class:"materialIcon"},null,-1)),h("span",kQ,[h("span",NQ,E(i.value),1),Qi(" / "+E(a.value),1)])],2)]),h("button",{class:Oe(["createButton",{disabled:!m.value}]),onClick:p,disabled:!m.value},E(t.value.createCat),11,DQ)]),ze(jn),c.value?(L(),M("div",{key:0,class:"popupOverlay",onClick:C},[h("div",{class:Oe(["popupContent",`rarity-${f.value}`]),onClick:V[2]||(V[2]=xn(()=>{},["stop"]))},[h("div",{class:"popupCatImage",style:St(f.value?De(cu)(f.value):{})},[h("img",{src:_(d.value),alt:""},null,8,OQ)],4),f.value?(L(),M("div",{key:0,class:"rarityBadge",style:St(De(cu)(f.value))},E(De(Iv)(f.value)),5)):he("",!0),h("h2",LQ,E(t.value.createCatSuccess),1),h("p",BQ,E(t.value.newCatAdded),1),h("button",{class:"popupCloseBtn",onClick:C},E(t.value.confirm),1)],2)])):he("",!0)]))}},FQ=Qt(MQ,[["__scopeId","data-v-ba848801"]]),$i="/tdl/assets/cat1-B_B8VE2s.png",UQ={class:"settingsPage"},VQ={class:"mainContent"},$Q={class:"settingGroup"},HQ={class:"settingGroup"},GQ={class:"settingLabel"},QQ={class:"settingInputWrapper"},jQ={key:0,class:"dropdownMenu"},zQ=["onClick"],WQ={class:"settingGroup CurrentLanguage"},KQ={class:"settingLabel"},qQ={class:"settingInputWrapper"},JQ={key:0,class:"dropdownMenu"},YQ=["onClick"],XQ={class:"settingSection"},ZQ={class:"sectionTitle"},ej={key:0,class:"walletConnectedCard"},tj={class:"walletStatusHeader"},nj={class:"walletStatusIndicator"},sj=["title"],rj={class:"walletInfo"},ij={class:"walletInfoRow"},oj={class:"walletInfoLabel"},aj={class:"walletInfoValue"},lj={class:"walletAddressText"},cj=["title"],uj={class:"walletInfoRow"},dj={class:"walletInfoLabel"},hj={class:"walletBalanceText"},fj={key:1,class:"walletNotConnectedCard"},pj={class:"walletNotConnectedText"},gj={class:"walletNotConnectedDesc"},mj=["disabled"],vj={key:0},yj={key:1},Aj={key:0,class:"walletErrorMsg"},wj={key:0,class:"inviteSection"},_j={key:0,class:"inviteCard"},Ej={class:"inviteTitle"},bj={class:"inviteDescription"},Ij={key:1,class:"inviteCard"},Cj={class:"inviteTitle"},Tj={class:"inviteDescription"},Sj={class:"inviteCodeSection"},Pj={class:"inviteCodeLabel"},Rj={class:"inviteCodeBox"},xj={class:"inviteCode"},kj=["title"],Nj={class:"shareButtons"},Dj={class:"rewardInfo"},Oj={class:"rewardItem"},Lj={class:"rewardText"},Bj={class:"rewardTitle"},Mj={class:"rewardDesc"},Fj={class:"rewardItem"},Uj={class:"rewardText"},Vj={class:"rewardTitle"},$j={class:"inviteStats"},Hj={class:"statsTitle"},Gj={class:"statsValue"},Qj={class:"statsNumber"},jj={class:"statsLabel"},zj={class:"depositPopupContent"},Wj={key:0,class:"emptyFriendsList"},Kj={key:1,class:"friendsListContainer"},qj=["src","alt"],Jj={class:"friendListInfo"},Yj={class:"friendListName"},Xj={class:"friendListId"},Zj={class:"depositPopupHeader"},ez={class:"depositPopupTitle"},tz={class:"depositPopupContent"},nz={class:"depositPopupDesc"},sz={class:"depositOptions"},rz={class:"depositOptionInfo"},iz={class:"depositOptionDesc"},oz={class:"depositOptionInfo"},az={class:"depositOptionDesc"},lz={class:"depositPopupFooter"},cz={class:"depositPopupNote"},uz={__name:"SettingsPage",setup(n){const e=Sn(),t=on(),s=pe(()=>gs()),r=pe(()=>t.state.coins),i=U(null),o=U(localStorage.getItem("appLanguage")||"English"),a=U("Busan"),l=U(!1),c=U(!1),d=U(!1);U("");const f=U(!1),p=U(""),m=pe(()=>t.state.walletAddress),w=pe(()=>t.state.userBalance),y=pe(()=>t.state.isWalletConnected),A=U(!1),_=U(!1),C=U([{id:"Id_12345",name:"Alice",profileImage:$i},{id:"Id_12346",name:"Bob",profileImage:$i},{id:"Id_12347",name:"Charlie",profileImage:$i}]),S=U(""),B=U({inviteCode:"",totalReferrals:0,referrals:[]}),V=["English",""],j=["","","",""],x=pe(()=>s.value),I=se=>{o.value=se,l.value=!1,localStorage.setItem("appLanguage",se)};Nt(async()=>{const se=dt();if(se&&(i.value=se,r.value=se.gameData?.coins||0,se.loginType!=="guest")){try{S.value=await Oi(se.id)}catch(Pe){console.error("   :",Pe),S.value=""}try{B.value=await Kw(se.id)}catch(Pe){console.error("   :",Pe),B.value={inviteCode:"",totalReferrals:0,referrals:[]}}}const W=localStorage.getItem("appLanguage");W?o.value=W:(o.value="English",localStorage.setItem("appLanguage","English")),P();const ue=async()=>{if(t.loadCurrentUser(),i.value=dt(),i.value&&i.value.loginType!=="guest")try{B.value=await Kw(i.value.id),S.value=await Oi(i.value.id)}catch(Pe){console.error("   :",Pe)}};window.addEventListener("userDataUpdated",ue),rn(()=>{window.removeEventListener("userDataUpdated",ue)})});const P=()=>{if(!i.value)return;const se=new Date().toDateString(),W=localStorage.getItem(`checkIn_${i.value.id}`);d.value=W===se},T=async()=>{try{if(f.value=!0,p.value="",!_u()){p.value=s.value.walletNotInstalled,confirm(s.value.installMetaMask)&&window.open("https://metamask.io/download/","_blank");return}const se=await t.connectWalletToApp();se.success?(p.value="",alert(s.value.walletConnected)):(p.value=se.error||s.value.walletConnectFailed,se.needInstall&&confirm(s.value.installMetaMask)&&window.open("https://metamask.io/download/","_blank"))}catch(se){console.error("  :",se),p.value=s.value.walletConnectError}finally{f.value=!1}},b=()=>{confirm(s.value.disconnectWalletConfirm)&&(t.disconnectWalletFromApp(),e.push("/main"))},D=async()=>{if(m.value)try{await navigator.clipboard.writeText(m.value),alert(s.value.walletAddressCopied)}catch(se){console.error(" :",se),alert(s.value.copyFailed)}},k=async()=>{await t.updateWalletBalance()},ke=()=>{A.value=!0},ie=()=>{A.value=!1},G=se=>{const ue={phantom:{name:"Phantom",url:"https://phantom.app/",icon:"",description:s.value.goToPhantomWallet},upbit:{name:"Upbit",url:"https://upbit.com/",icon:"",description:s.value.goToUpbitExchange}}[se];if(ue){const Pe=ue.url;window.open(Pe,"_blank"),A.value=!1}},$=async()=>{if(!S.value)if(i.value&&i.value.loginType!=="guest")try{S.value=await Oi(i.value.id)}catch(se){console.error("   :",se),alert("    .");return}else return;try{await navigator.clipboard.writeText(S.value),alert(s.value.codeCopied||"Invite code copied!")}catch(se){console.error(" :",se),alert("Failed to copy.")}},Z=async()=>{if(!S.value)if(i.value&&i.value.loginType!=="guest")try{S.value=await Oi(i.value.id)}catch(ue){console.error("   :",ue),alert("Failed to get invite code.");return}else return;const W=`${window.location.origin+window.location.pathname}#/signup?invite=${S.value}`;try{await navigator.clipboard.writeText(W),alert(s.value.linkCopied||"Invite link copied!")}catch(ue){console.error("  :",ue);const Pe=document.createElement("textarea");Pe.value=W,document.body.appendChild(Pe),Pe.select();try{document.execCommand("copy"),alert(s.value.linkCopied||"Invite link copied!")}catch{alert("Failed to copy link.")}document.body.removeChild(Pe)}},me=()=>{e.push("/signup")},Ve=()=>{_.value=!0},Ne=()=>{_.value=!1};return(se,W)=>(L(),M("div",UQ,[ze(Qn,{coinCount:r.value},null,8,["coinCount"]),h("main",VQ,[h("div",$Q,[h("button",{class:"userProfileBtn",onClick:W[0]||(W[0]=ue=>De(e).push("/profile"))},[W[7]||(W[7]=h("span",{class:"userProfileIcon"},"",-1)),h("span",null,E(s.value.userSettings),1),W[8]||(W[8]=h("span",{class:"arrowIcon"},"",-1))])]),h("div",HQ,[h("label",GQ,E(s.value.language),1),h("div",QQ,[h("div",{class:"settingInput",onClick:W[1]||(W[1]=ue=>l.value=!l.value)},[h("span",null,E(o.value),1),W[9]||(W[9]=h("span",{class:"dropdownIcon"},"",-1))]),l.value?(L(),M("div",jQ,[(L(),M(Re,null,We(V,ue=>h("div",{key:ue,class:Oe(["dropdownItem",{active:o.value===ue}]),onClick:Pe=>I(ue)},E(ue),11,zQ)),64))])):he("",!0)])]),h("div",WQ,[h("label",KQ,E(x.value.region),1),h("div",qQ,[h("div",{class:"settingInput",onClick:W[2]||(W[2]=ue=>c.value=!c.value)},[h("span",null,E(a.value),1),W[10]||(W[10]=h("span",{class:"dropdownIcon"},"",-1))]),c.value?(L(),M("div",JQ,[(L(),M(Re,null,We(j,ue=>h("div",{key:ue,class:Oe(["dropdownItem",{active:a.value===ue}]),onClick:Pe=>{a.value=ue,c.value=!1}},E(ue),11,YQ)),64))])):he("",!0)])]),h("div",XQ,[h("h3",ZQ,E(s.value.walletConnection),1),y.value?(L(),M("div",ej,[h("div",tj,[h("div",nj,[W[11]||(W[11]=h("div",{class:"walletIndicatorDot"},null,-1)),h("span",null,E(s.value.connected),1)]),h("button",{class:"refreshBtn",onClick:k,title:s.value.refreshBalance},[...W[12]||(W[12]=[E1('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-c8c91dc1><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" data-v-c8c91dc1></path><path d="M21 3v5h-5" data-v-c8c91dc1></path><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" data-v-c8c91dc1></path><path d="M3 21v-5h5" data-v-c8c91dc1></path></svg>',1)])],8,sj)]),h("div",rj,[h("div",ij,[h("span",oj,E(s.value.address)+":",1),h("div",aj,[h("span",lj,E(m.value),1),h("button",{class:"walletCopyBtn",onClick:D,title:s.value.copy},[...W[13]||(W[13]=[h("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[h("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),h("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})],-1)])],8,cj)])]),h("div",uj,[h("span",dj,E(s.value.balance)+":",1),h("span",hj,E(w.value),1)])]),h("button",{class:"walletDepositBtn",onClick:ke},[W[14]||(W[14]=h("svg",{class:"depositIcon",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[h("path",{d:"M12 2v20M2 12h20"})],-1)),h("span",null,E(s.value.depositFromWallet),1)]),h("button",{class:"walletDisconnectBtn",onClick:b},E(s.value.disconnect),1)])):(L(),M("div",fj,[W[15]||(W[15]=h("div",{class:"walletNotConnectedIcon"},"",-1)),h("p",pj,E(s.value.walletNotConnected),1),h("p",gj,E(s.value.walletConnectDesc),1),h("button",{class:"walletConnectBtn",onClick:T,disabled:f.value},[f.value?(L(),M("span",yj,E(s.value.connecting||"Connecting..."),1)):(L(),M("span",vj,E(s.value.connectWallet||"Connect Wallet"),1))],8,mj),p.value?(L(),M("div",Aj,E(p.value),1)):he("",!0)]))]),i.value?(L(),M("div",wj,[i.value&&i.value.loginType==="guest"?(L(),M("div",_j,[h("h2",Ej,E(s.value.inviteFriends),1),h("p",bj,E(s.value.inviteDescription),1),h("div",{class:"guestSignupPrompt"},[W[17]||(W[17]=h("p",{class:"guestPromptText"},"Sign up to invite friends and get rewards!",-1)),h("button",{class:"signupBtn",onClick:me},[...W[16]||(W[16]=[h("span",{class:"signupIcon"},"",-1),h("span",null,"Sign Up",-1)])])])])):i.value&&i.value.loginType!=="guest"?(L(),M("div",Ij,[h("h2",Cj,E(s.value.inviteFriends),1),h("p",Tj,E(s.value.inviteDescription),1),h("div",Sj,[h("label",Pj,E(s.value.inviteCode),1),h("div",Rj,[h("span",xj,E(S.value||"Loading..."),1),h("button",{class:"copyBtn",onClick:$,title:s.value.copyInviteCode},"  ",8,kj)])]),h("div",Nj,[h("button",{class:"shareBtn copyLinkBtn",onClick:Z},[W[18]||(W[18]=h("span",{class:"copyIcon"},"",-1)),h("span",null,E(s.value.copyLink||"Copy Link"),1)])]),h("div",Dj,[h("div",Oj,[W[19]||(W[19]=h("span",{class:"rewardIcon"},"",-1)),h("div",Lj,[h("div",Bj,E(s.value.inviteReward),1),h("div",Mj,E(s.value.inviteRewardDesc),1)])]),h("div",Fj,[W[20]||(W[20]=h("span",{class:"rewardIcon"},"",-1)),h("div",Uj,[h("div",Vj,E(s.value.newUserReward),1)])])]),h("div",$j,[h("h3",Hj,E(s.value.inviteStats),1),h("div",Gj,[h("span",Qj,E(B.value.totalReferrals),1),h("span",jj,E(s.value.invites),1)]),h("button",{class:"viewFriendsBtn",onClick:Ve},[...W[21]||(W[21]=[h("span",{class:"friendsIcon"},"",-1),h("span",null,"View Friends",-1)])])])])):he("",!0)])):he("",!0),W[22]||(W[22]=h("div",{style:{height:"30px"}},null,-1))]),ze(jn),_.value?(L(),M("div",{key:0,class:"depositPopupOverlay",onClick:Ne},[h("div",{class:"depositPopup friendsPopup",onClick:W[3]||(W[3]=xn(()=>{},["stop"]))},[h("div",{class:"depositPopupHeader"},[W[23]||(W[23]=h("h3",{class:"depositPopupTitle"},"My Friends",-1)),h("button",{class:"depositPopupClose",onClick:Ne},"")]),h("div",zj,[C.value.length===0?(L(),M("div",Wj,[...W[24]||(W[24]=[h("p",{class:"emptyFriendsText"},"No friends yet. Invite friends to get started!",-1)])])):(L(),M("div",Kj,[(L(!0),M(Re,null,We(C.value,ue=>(L(),M("div",{key:ue.id,class:"friendListItem"},[h("img",{src:ue.profileImage,alt:ue.name,class:"friendListProfile"},null,8,qj),h("div",Jj,[h("p",Yj,E(ue.name),1),h("p",Xj,E(ue.id),1)]),W[25]||(W[25]=h("div",{class:"giftIconSmall"},"",-1))]))),128))]))])])])):he("",!0),A.value?(L(),M("div",{key:1,class:"depositPopupOverlay",onClick:ie},[h("div",{class:"depositPopup",onClick:W[6]||(W[6]=xn(()=>{},["stop"]))},[h("div",Zj,[h("h3",ez,E(s.value.selectDepositMethod),1),h("button",{class:"depositPopupClose",onClick:ie},"")]),h("div",tz,[h("p",nz,E(s.value.selectExchangeToDeposit),1),h("div",sz,[h("button",{class:"depositOption",onClick:W[4]||(W[4]=ue=>G("phantom"))},[W[27]||(W[27]=h("div",{class:"depositOptionIcon"},"",-1)),h("div",rz,[W[26]||(W[26]=h("div",{class:"depositOptionName"},"Phantom",-1)),h("div",iz,E(s.value.goToPhantomWallet),1)]),W[28]||(W[28]=h("div",{class:"depositOptionArrow"},"",-1))]),h("button",{class:"depositOption",onClick:W[5]||(W[5]=ue=>G("upbit"))},[W[30]||(W[30]=h("div",{class:"depositOptionIcon"},"",-1)),h("div",oz,[W[29]||(W[29]=h("div",{class:"depositOptionName"},"Upbit",-1)),h("div",az,E(s.value.goToUpbitExchange),1)]),W[31]||(W[31]=h("div",{class:"depositOptionArrow"},"",-1))])]),h("div",lz,[h("p",cz," "+E(s.value.copyWalletAddressAndDeposit),1),h("button",{class:"depositCopyAddressBtn",onClick:D},E(s.value.copyWalletAddress),1)])])])])):he("",!0)]))}},dz=Qt(uz,[["__scopeId","data-v-c8c91dc1"]]),hz={class:"profilePage"},fz={class:"mainContent"},pz={class:"profileHeader"},gz={class:"profileImageWrapper"},mz=["src","alt"],vz={key:1,class:"profileImagePlaceholder"},yz={class:"profileInfo"},Az={class:"userName"},wz={class:"userEmail"},_z={class:"settingGroup"},Ez={class:"settingLabel"},bz={class:"settingInput"},Iz={class:"userId"},Cz={key:0,class:"statsSection"},Tz={class:"sectionTitle"},Sz={class:"statsGrid"},Pz={class:"statCard"},Rz={class:"statInfo"},xz={class:"statLabel"},kz={class:"statValue"},Nz={class:"statCard"},Dz={class:"statInfo"},Oz={class:"statLabel"},Lz={class:"statValue"},Bz={class:"statCard"},Mz={class:"statInfo"},Fz={class:"statLabel"},Uz={class:"statValue"},Vz={class:"statCard"},$z={class:"statInfo"},Hz={class:"statLabel"},Gz={class:"statValue"},Qz={class:"logoutSection"},jz={__name:"UserProfilePage",setup(n){const e=Sn(),t=on(),{logout:s}=t,r=pe(()=>t.state.coins),i=U(null),o=U(""),a=U(""),l=U(""),c=U(""),d=U(""),f={ko:{userProfile:" ",userID:"User ID",copySuccess:"User ID !",logout:"",logoutConfirm:"  ?",login:"",gameStats:" ",level:"",points:"",coins:"",catFragments:" ",back:" "},en:{userProfile:"User Profile",userID:"User ID",copySuccess:"User ID copied!",logout:"Logout",logoutConfirm:"Are you sure you want to logout?",login:"Login",gameStats:"Game Stats",level:"Level",points:"Points",coins:"Coins",catFragments:"Cat Fragments",back:" Back"}},p=pe(()=>o.value===""?f.ko:f.en);Nt(()=>{const S=dt();if(S)i.value=S,t.loadCurrentUser(),a.value=S.email||S.id||"",l.value=S.name||S.displayName||a.value.split("@")[0]||"User",c.value=S.photoURL||"",d.value=S.id||"ID"+String(Math.random()).substring(2,10);else{const j={id:"guest_"+Date.now(),email:"guest@tdl.com",name:"Guest",loginType:"guest",gameData:{level:1,coins:0,totalCoin:0,catFragments:50}};i.value=j,a.value=j.email,l.value=j.name,d.value=j.id}const B=localStorage.getItem("appLanguage");B?o.value=B:(o.value="English",localStorage.setItem("appLanguage","English"));const V=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",V),rn(()=>{window.removeEventListener("userDataUpdated",V)})});const m=()=>{window.history.length>1?e.back():e.push("/settings")},w=()=>{navigator.clipboard.writeText(d.value),alert(p.value.copySuccess)},y=pe(()=>i.value?.loginType==="guest"||i.value?.email?.includes("@guest.com")||i.value?.email==="guest@tdl.com"),A=()=>{console.log("   -   "),e.push("/login").then(()=>{console.log("   ")}).catch(S=>{console.error("  :",S),window.location.hash="#/login"})},_=()=>{confirm(p.value.logoutConfirm)&&(z1(),s(),e.push("/login"))},C=pe(()=>i.value?{level:i.value.gameData?.level||1,points:i.value.gameData?.coins||0,coins:i.value.gameData?.totalCoin||0,catFragments:i.value.gameData?.catFragments||i.value.gameData?.catCount||0}:null);return(S,B)=>(L(),M("div",hz,[ze(Qn,{coinCount:r.value},null,8,["coinCount"]),h("main",fz,[h("button",{class:"backBtn",onClick:m},E(p.value.back),1),h("div",pz,[h("div",gz,[c.value?(L(),M("img",{key:0,src:c.value,alt:l.value,class:"profileImage"},null,8,mz)):(L(),M("div",vz,E(l.value.charAt(0).toUpperCase()),1))]),h("div",yz,[h("h2",Az,E(l.value),1),h("p",wz,E(a.value),1)])]),h("div",_z,[h("label",Ez,E(p.value.userID),1),h("div",bz,[h("span",Iz,E(d.value),1),h("button",{class:"copyBtn",onClick:w},"")])]),C.value?(L(),M("div",Cz,[h("h3",Tz,E(p.value.gameStats),1),h("div",Sz,[h("div",Pz,[B[0]||(B[0]=h("div",{class:"statIcon"},"",-1)),h("div",Rz,[h("div",xz,E(p.value.level),1),h("div",kz,E(C.value.level),1)])]),h("div",Nz,[B[1]||(B[1]=h("div",{class:"statIcon"},"",-1)),h("div",Dz,[h("div",Oz,E(p.value.points),1),h("div",Lz,E(C.value.points.toLocaleString()),1)])]),h("div",Bz,[B[2]||(B[2]=h("div",{class:"statIcon"},"",-1)),h("div",Mz,[h("div",Fz,E(p.value.coins),1),h("div",Uz,E(C.value.coins.toLocaleString()),1)])]),h("div",Vz,[B[3]||(B[3]=h("div",{class:"statIcon"},"",-1)),h("div",$z,[h("div",Hz,E(p.value.catFragments),1),h("div",Gz,E(C.value.catFragments.toLocaleString()),1)])])])])):he("",!0),h("div",Qz,[y.value?(L(),M("button",{key:0,class:"loginBtn",onClick:xn(A,["prevent"]),type:"button"},E(p.value.login),1)):(L(),M("button",{key:1,class:"logoutBtn",onClick:xn(_,["prevent"]),type:"button"},E(p.value.logout),1))])]),ze(jn)]))}},zz=Qt(jz,[["__scopeId","data-v-10a897ba"]]),Wz={class:"attendancePage"},Kz={class:"mainContent"},qz={class:"attendanceInfo"},Jz={class:"infoItem"},Yz={class:"infoValue"},Xz={class:"infoItem"},Zz={class:"infoValue"},eW={key:0,class:"attendanceMessage"},tW={class:"attendanceGrid"},nW=["onClick"],sW={class:"dayNumber"},rW={class:"rewardIcon"},iW={key:0,class:"specialStar"},oW={class:"rewardAmount"},aW={__name:"AttendancePage",setup(n){const e=on(),t=Sn(),s=pe(()=>e.state.coins),r=U(null),i=U(0),o=U([]),a=U(null),l=U(0),c=U(Array.from({length:20},(_,C)=>({day:C+1,reward:"1K",rewardType:"P",hasSpecial:[5,9,10,11,16,17].includes(C+1),isChecked:!1}))),d=(_,C)=>new Date(_).toDateString()===new Date(C).toDateString(),f=()=>{t.go(-1)},p=async _=>{if(!r.value){alert(" .");return}const C=new Date;C.toDateString();const S=C.toISOString();if(a.value&&d(a.value,S)){alert("   !   .");return}const B=c.value[_];if(B.isChecked){alert("  .");return}const V=o.value.length;if(a.value){const I=new Date(a.value),P=Math.floor((C-I)/(1e3*60*60*24));if(P>0&&_!==V){alert("   .");return}P===1?l.value+=1:P>1&&(l.value=1)}else l.value=1;B.isChecked=!0,o.value.push(B.day),i.value=o.value.length;const j=1e3,x=s.value+j;a.value=S,r.value&&(await e.updateCoins(x),await m()),alert(`Day ${B.day}  ! ${j}  !`),window.dispatchEvent(new Event("userDataUpdated"))},m=async()=>{if(r.value){const _={checkedDays:o.value,attendanceDays:i.value,consecutiveDays:l.value,lastCheckInDate:a.value,lastUpdate:new Date().toISOString()};localStorage.setItem(`attendance_${r.value.id}`,JSON.stringify(_)),await e.updateGameData({attendance:_})}},w=async()=>{if(r.value){let _=null;if(r.value.gameData?.attendance&&(_=r.value.gameData.attendance),!_){const C=localStorage.getItem(`attendance_${r.value.id}`);C&&(_=JSON.parse(C),_&&await e.updateGameData({attendance:_}))}_&&(o.value=_.checkedDays||[],i.value=_.attendanceDays||0,l.value=_.consecutiveDays||0,a.value=_.lastCheckInDate||null,o.value.forEach(C=>{const S=C-1;c.value[S]&&(c.value[S].isChecked=!0)}))}},y=pe(()=>{if(!a.value)return!0;const _=new Date,C=new Date(a.value),S=_.toDateString(),B=C.toDateString();return S!==B}),A=pe(()=>o.value.length);return Nt(async()=>{r.value=dt(),e.loadCurrentUser(),r.value&&await w();const _=()=>{e.loadCurrentUser()};window.addEventListener("userDataUpdated",_),rn(()=>{window.removeEventListener("userDataUpdated",_)})}),(_,C)=>(L(),M("div",Wz,[ze(Qn,{coinCount:s.value},null,8,["coinCount"]),h("main",Kz,[h("button",{class:"backBtn",onClick:f}," "),C[3]||(C[3]=h("h1",{class:"pageTitle"},"",-1)),h("div",qz,[h("div",Jz,[C[0]||(C[0]=h("span",{class:"infoLabel"}," :",-1)),h("span",Yz,E(l.value)+"",1)]),h("div",Xz,[C[1]||(C[1]=h("span",{class:"infoLabel"}," :",-1)),h("span",Zz,E(i.value)+"",1)])]),y.value?he("",!0):(L(),M("div",eW,"   !   . ")),h("div",tW,[(L(!0),M(Re,null,We(c.value,(S,B)=>(L(),M("div",{key:S.day,class:Oe(["dayCell",{checked:S.isChecked,disabled:!y.value&&!S.isChecked||B!==A.value&&!S.isChecked,nextCheckable:y.value&&B===A.value&&!S.isChecked}]),onClick:V=>y.value&&(B===A.value||S.isChecked)?p(B):null},[h("div",sW,"Day "+E(S.day),1),h("div",rW,[C[2]||(C[2]=h("div",{class:"iconCircle"},"P",-1)),S.hasSpecial&&!S.isChecked?(L(),M("span",iW,"")):he("",!0)]),h("div",oW,E(S.reward),1)],10,nW))),128))])]),ze(jn)]))}},lW=Qt(aW,[["__scopeId","data-v-c440a219"]]),ea=()=>{const n=localStorage.getItem("marketplace");return n?JSON.parse(n):[]},Cv=n=>{localStorage.setItem("marketplace",JSON.stringify(n))},cW=(n,e,t)=>{const s=ea(),r={id:`market_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sellerAddress:t,nftId:n.id,nftData:{...n},price:e,priceType:"COIN",listedAt:Date.now(),status:"listed"};return s.push(r),Cv(s),r},uW=(n,e)=>{const t=ea(),s=t.findIndex(i=>i.id===n&&i.status==="listed");if(s===-1)return{success:!1,error:"  NFT ."};const r=t[s];return r.sellerAddress===e?{success:!1,error:" NFT   ."}:(t[s].status="sold",t[s].soldAt=Date.now(),t[s].buyerAddress=e,Cv(t),{success:!0,listing:r,nftData:r.nftData})},dW=(n,e)=>{const t=ea(),s=t.findIndex(r=>r.id===n&&r.sellerAddress===e&&r.status==="listed");return s===-1?{success:!1,error:"  NFT ."}:(t[s].status="cancelled",t[s].cancelledAt=Date.now(),Cv(t),{success:!0,listing:t[s]})},hW=n=>ea().filter(t=>t.sellerAddress===n&&t.status==="listed"),fW=()=>ea().filter(e=>e.status==="listed"),pW=n=>ea().some(t=>t.nftId===n&&t.status==="listed"),gW=()=>{const n=ea(),e=n.filter(s=>s.status==="listed"),t=n.filter(s=>s.status==="sold");return{totalListings:n.length,activeListings:e.length,soldListings:t.length,totalVolume:t.reduce((s,r)=>s+(r.price||0),0)}},mW="/tdl/assets/btc-DC8WHF5v.png",vW="/tdl/assets/eth-DHgp7Wvq.png",yW="/tdl/assets/BTC_line-DiGuGbEI.png",AW="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAACJCAYAAABaWIDDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA85SURBVHgB7d1fchPHFsfxMybJw61KhbuCTN5yqRDbK0BeAXgFmBXErACxguAVYFZgswLEClBibnLf7rCCKDhVqSJGndPqNghibHXPjKZ75vupUqQYy/yxpf5Nd5/ThQAAMBBGtq7r3ZbIfFPvS5GidPeiHzfX3f2yotL/zPxNHxu9bfxkHxcynUrGCgEAoKf8gD/SAf+WDnl39COlNKqwIaDSrzvNLRgQAAAAveIHfTvY39WbXu1/fFW/DsVEFrMGZuKDwSy1YEAAAAD0gg78I73Sv60P96STQf9KMz9jsBwM7IxBJR0gAAAAsuYGfvNAbyPJkw8Gxi8nLILBVIPBTFpEAAAAZEkHfp3eNz9mPPBfpdVgQAAAAGTFrfHPx/rwBxmmRoIBAQAAkA0jN+/o0PVY0lzj71pQMHgXAHyi2tcP2dpI/mHXa+ZqS+19P+pLAaBJXPXXshQMNg7ONx0uAoAmqj19qOsoDPwJqfw37Fi/YU/b3gwCAKnSwb/Uwf+ZuIY9qMdecN4r5OS48P+w/xckrjjU2xMNAhMBgIFoacr/vKvfxHX6szOwb1/p/W8if/5eSDVzv/d/vtZf/7fIta/edwy0fQUWj7ckX/r3O9vRALCp/7BmT5CLSm/jQn5+IgDQY0a+12Vp+VGaUbkZVdHb6U/ng3wdGk5uiQsmI1kEgsK3Gc6BmWgA+F4TD1P/+Sn0h7i431UDCQBok45NY717IPXY6e5DvT/WKe/nsgZGSh1PvzzfSzcSFwxKSW/5YmYDgBHk7KHOBowFAHqigcFfB/75I5E/Dpq40m/C+2BQbPnzCLbc4+4uwG0AsOv/pSBndmfnLrMBAHJXc/BPbuC/SofBYGoDgP2HHgtyV2kI2CEEAMhVvTV/u6Hvr3uF/K+SHlhDMNgvfG3lM8l7RyMct7NTfqGHAICsuLa+8xcSzl71jwt5eSAD0FAwmOrS8bbvA2BDwFtNXcWeIHeEAABZqVHnX+n73S7vdyHBwOgSyelDu0RSXPwFsEbXfelI6etLR1J/isd2FNxmOQBADoxsPos40EcH/dc7uaz1d8XIjS3Xx8D6sPyRswAS5GtL93wYKCVOxZ4AAKmL2/RnS/tO7zP410MASJxv02xfHKWEm/oQwIsEQHLiOtGaw0JO7glq2xAkTX/QD0Xe7Lh1m2Bbbm8HAKTIHAV9uphjBv/mEAAyYMta9If+vv7w74prBRzy7D0/xQYAyXCzmyak+qzSaX8G/waxBJAZI9+WIl9E7JY1u/b0JwGABAQ2oavsTGhfavxTwQxAZtwLwC4JBM8EPHbrbQDQLT8rWQY8Zczg3zwCQIaWQkDI5r5FwydCAIAu+feguwHPeMTpp+0gAGTKhYD5btizbOKeB266AYAmzfckaOr/9KGgFQSAjBXycqJ39yXMlk6/URkAYO3Cr/7t1D+1/m0hAGROp8YeRZQI7lMZAGD9TEhPkylT/+2iCqAnjNx85jsHhjyLygAAaxHe9MeM9P3puaA1zAD0xrWYHgFUBgBYExPQ7tdMGPzbxwxAj/geAfY4zZDDhCrODADQpvCr/zffUPbXPmYAeoTKAABpCrr6P2TwXw8CQM9QGQAgJe7q3+yt/oy/KPtbEwJAD9WoDNgXAGgUV/+pYg9Aj8VVBsx3/CwCANTC2n/amAHotZjKgI0jKgMANMM8Dvhcrv7XjBmAnqtRGbBdyJQOXACi6IXEyJ4/svozuPpfN2YAes69oEzoGdqlyFsqAwDUYAI2FnP13wUCwAC4bn/zsQQpRlQGAIhh5Oae/ndrxU+v2PnfDZYABkRflDqgF6E7/e+7qgIgLX6vih1k7FHXX7uPFuXSZ9glLL+MtfFK3H6YiqZX7dOLB7vxr1zts+fjQl4SADpAABgYfWHa/QCrJnOPygB0yw/2I310SxY/v8b+f8i+lmUaCoqpfg29bdh2s1NCQXPc1X+x6ua/Stf+d5j+7wYBYGD8pkC7MacMeNrMbwqsBFgTv4nstr5N3fEDfotsIBC9FU+FQFBL4NX/vl5cHAg6QQAYICoDkCod9O10vl2m+kHir/CbUOnb48QeSmNnCQgEqwm9+tflxW8EnSEADJS+UPWqqgjc6b84oWtHgIa5q33bMc6MJE2VXzY41kDwkwaCqeADvulPyOzingaAJ4LOEAAGzMh3+oa7MZYwj/RFG3rWAHChDAb+T6kIBB8ysvk4oOc/V/8JIAAMHJUB6II/IOaBBB0Sk7TZR0sGgwoE/hyRkLJhrv4TQAAAlQFYKz9Y2ANiulzjb9tyILAzBBPpKQ1z+t4xfxHwFK7+E0EAAJUBWAt/1f84w+n+Jsw+WjKYSA/4wd++d4SEOa7+E0EAwIKRG/pC/iz0hVxRGYBV+N3hdoq4z1f9Ic4DwcQvGUwkM3GDv235exLamhwtIQDgncASnvNnURmAS+mUv90v8oO0o3INfRYDanXxpyx6COit8F0DU/XBHoKJJCwy0On36M02TX/SQQDAB6gMQFNcTf9iyv+ONGPmBvvi2N2f6lR6FTT7ZKTUP9OXm/asC7cUYe9TtQgEtlvheXOizmfafJ+GsUQFOpr+pIYAgH/QdH+oPxp3JQyVAXjHDxR2ejhwc+mFX22iP4+HIq+fhg74K311uXlrKRAkPEvQbSDwnRntDGEpwYxeJJxwkZAYAgD+If7Nm8oARDWEuYgObnMNlH8ctDHoX8YHgi03c5F0IHi3h0D/Z9JWIGigV0Ol4W173d9HXI0AgAtRGYAYPjzakrBS4nQ28H/KUiAY+SWDHAJBrfMM/Pfxrj+HYSTxKg77SRcBAJ9EZQBC1J/2N4e6rn8/9StF/7q4lUcgeHfAUXVZcyL3vbPft/mmH/SbmPmoGPzTRgDApagMwKqMbB5FbvirbEdA/Zl5LhlygeCaHTBv+yWDUpK1qJSY+dt1dzP+vlEVg3/6CAC4EpUBuEp8qZ+dsj7d7dP6cF6BoBUVg38eCABYCZUB+BQd/MfiWvsGmo8LeflQes7tp/l8pA99tUGfA0H/Al2fEQCwEioDcJEag/9ga8I/CgT29RS5ZyI11PnnhgCAlVEZgGURJ8B5b3W9/7/0gvd8INjUh3cyDQRTkbN7hfwyFWSFAIAgVAbA0iUhO1gdSTAG/6v4boU6OyAjv2SQaiCY+WUcrvozRQBAMCoDhi3yBDgZypp/0xIMBMn1akAcAgCiUBkwTPFd/hj8m/L+PAO7ZGDDwNrOM9Ap/vkxA39/EAAQjcqAYWHwT1PLBxxV+jV10JfjXPs04NMIAIhGZcBwxA/+nP/ehaUDjuwMQSmrvUbtVX3lD1/Sq/2/dNnu11eC3iIAoJbIyoBKlw92qAzIQ40Wv1Od7dkWJMHNFPyrFLn21fuPvv1df+U3kT9/Z1p/eAgAqI3KgH6LbPFbcQIckLYNAWpy9b8mdHNfqVcfgZUEWDfX4jdm8LetYBn8gZQRANAIXec9tJu9JEhxx3eSQ4L89ya0v39FH3ggDywBoFFUBvRDZItfveJ/s83gD+SBAIBGxW8YO9umlWga4lv88j0EcsISABrlNvW92ZXFVHCIz45cqRm65Fr8xvb3Z/AHckIAQOPcFPCZDQEhm8BKO3PgZhDQBdfit4jYmGkb/dDfH8gNAQCtoDIgL77Rjz3ch/7+wEAQANAaKgPyQItfYJjYBIjWURmQLlr8AsNFAEDrIisDZiJnO2wsa098xQZHOwN9wBIAWhdZGXCdyoC2GbvfIri/v8jprgDIHgEAa1GjMuCIyoDm1Wjxu0uLX6AfCABYGz+dH7ppTK9Q30bUpeNTaPELwCIAYK3cxr7gyoA9KgOaUaPFL4M/0DNsAkQnjNw8siV/EmZPAwQNZyJFtvhlMybQUwQAdMLvQH8hYeVnDEaRXIvf4kiC2Ra/dPkD+oglAHTCVwbYUrIq4GlUBkSo0eJ3n8Ef6C8CADqzVBkQoqQyYHU1W/weCIDeIgCgU346P/TMACoDVkCLXwCXIQCgc1QGNK9ei18Gf2AI2ASIZFAZ0Axa/AJYBTMASMg1e7hMJWEeGbkR2s6252jxC+BqBAAkg8qA+mjxC2BVBAAkxVUGzEOPmS2pDKDFL4AwBAAkp5CXE6EyIAgtfgGEIgAgSa4ywDwKfNYgKwN8i9+Iwf+MwR8YMKoAkDQjN5/pj+lIwgymMoAWvwBiMQOAxF2zO9MrCTOIygBa/AKogwCApC1VBoTsUO99ZQAtfgHURQBA8nxlAGcGeLT4BdAEAgCyQGWAU6PF7yMGfwDL2ASIrBi5qQN6sR/4tIeF/DyWzNVo8XtcyAld/gB8gBkAZEUHsvu2Z72EeWDk+7uSvegWv6GNlQAMAAEAGRpeZQAtfgE0jQCA7AytMoAWvwDaQABAloZSGRDZ4rdi8AdwFQIAstX3yoAaLX53GfwBXIUAgKz19cwA1+JXIoKKuVfIL1MBgCtQBohe6NOZAa7F76LcL7TL3z5d/gCsihkA9EQ/KgNo8QtgXZgBQG8Y+bYU+eKFhA2e/ljc7qfNafELYJ2YAUBvRFYG2PLAZ37NvTM6+I/0z27DSylBaPELIA4BAL0SWRmgIaA46mpjoNvtH7Pmv2jxG/p3BYAFlgDQS5FnBliV5mJdEphW0jI35W/b+5qRhNMli9c7dPkDEIsAgN6KrAzwikO9PWwjCPhDfWw4sd39YpoSVTT6AVAXAQC95QfaiHX1ZYsgcKBBoPYmQb/Of1sf7kncwG9VDP4AmkAAQK/5yoCInfX/UOntWJcHnur91J1HcNXvvWg5bGv6R/pSuxU51f/Rn4HBH0AzCADovQZDwJLCzgjYEFDp71AtfbwUd3WvA78ppTkVgz+AJhEAMAjthIC1qRj8ATSNMkAMghs87RHCZiJ5mTL4A2gDAQCDYQfRQk52bOc8yYI95Og1gz+AVrAEgEEy8t1I8+9jSXNJYOZO9Ts5FgBoCTMAGCTXMXBjO73ZgMVV/zcM/gDaxgwABs9tEPz8gb4c9qQzi70JYx34nwsArAEBAPA6CAJ2qt9e6R8y8ANYNwIA8BEfBEb68G58K+FLf4eJfl0d+F8/oZc/gK4QAIBLGCmvi3x5Sx+OfBjYknBT/Up6KyY66D9l0AeQAgIAEMjIDQ0B177yXf/KCz6l0s/SQf5sWsivrwQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADA0PwNkHeXO5vHqaMAAAAASUVORK5CYII=",wW={class:"nftPage"},_W={class:"mainContent nftWrap"},EW={class:"tabMenu"},bW={key:0,class:"walletContent"},IW={class:"walletSection"},CW={class:"walletBalance"},TW={class:"btcInfo"},SW={class:"change positive"},PW={key:0,class:"ethInfo"},RW={class:"subTabMenu"},xW={key:0,class:"itemList"},kW={class:"itemIcon"},NW={class:"itemInfo"},DW={class:"itemSymbol"},OW={class:"itemName"},LW={class:"itemChart"},BW={class:"itemPrice"},MW={class:"price"},FW={key:1,class:"nftList"},UW=["onClick"],VW={class:"nftThumbnail"},$W={class:"nftInfo"},HW={class:"nftId"},GW={class:"collectionName"},QW={class:"nftValue"},jW={class:"nftStars"},zW={class:"nftLevel"},WW={key:0,class:"emptyNFTs"},KW={class:"emptyText"},qW={key:1,class:"marketplaceContent"},JW={class:"marketplaceHeader"},YW={class:"marketplaceStats"},XW={class:"filterBar"},ZW={value:"all"},eK={value:"common"},tK={value:"rare"},nK={value:"epic"},sK={value:"legendary"},rK={value:"all"},iK={value:"low"},oK={value:"mid"},aK={value:"high"},lK={value:"newest"},cK={value:"oldest"},uK={value:"priceLow"},dK={value:"priceHigh"},hK={value:"level"},fK={value:"stars"},pK={key:0,class:"nftGrid"},gK=["onClick"],mK={class:"nftCardImage"},vK=["src"],yK={class:"nftCardBadges"},AK={class:"starBadge"},wK={class:"levelBadge"},_K={class:"nftCardInfo"},EK={class:"nftCardName"},bK={class:"nftCardPrice"},IK={class:"priceLabel"},CK={class:"priceValue"},TK=["onClick"],SK={key:1,class:"emptyMarketplace"},PK={class:"emptyText"},RK={key:2,class:"myNFTsContent"},xK={class:"sectionHeader"},kK={class:"myCoinBalance"},NK={key:0,class:"nftGrid"},DK=["onClick"],OK={class:"nftCardImage"},LK=["src"],BK={class:"nftCardBadges"},MK={class:"starBadge"},FK={class:"levelBadge"},UK={class:"nftCardInfo"},VK={class:"nftCardName"},$K=["onClick"],HK={key:1,class:"emptyMarketplace"},GK={class:"emptyText"},QK={key:3,class:"myListingsContent"},jK={class:"sectionHeader"},zK={key:0,class:"nftGrid"},WK={class:"nftCardImage"},KK=["src"],qK={class:"nftCardBadges"},JK={class:"starBadge"},YK={class:"levelBadge"},XK={class:"nftCardInfo"},ZK={class:"nftCardName"},eq={class:"nftCardPrice"},tq={class:"priceLabel"},nq={class:"priceValue"},sq=["onClick"],rq={key:1,class:"emptyMarketplace"},iq={class:"emptyText"},oq={class:"modalHeader"},aq={class:"modalTitle"},lq={class:"modalBody"},cq={class:"sellNFTPreview"},uq=["src"],dq={class:"sellNFTInfo"},hq={class:"sellNFTName"},fq={class:"sellNFTDetails"},pq={class:"sellPriceInput"},gq={class:"inputLabel"},mq=["placeholder"],vq={class:"priceHint"},yq={class:"modalFooter"},Aq={class:"modalHeader"},wq={class:"modalTitle"},_q={class:"modalBody"},Eq={class:"buyNFTPreview"},bq=["src"],Iq={class:"buyNFTInfo"},Cq={class:"buyNFTName"},Tq={class:"buyNFTDetails"},Sq={class:"buyPriceInfo"},Pq={class:"priceRow"},Rq={class:"priceLabel"},xq={class:"priceValue"},kq={class:"priceRow"},Nq={class:"priceLabel"},Dq={key:0,class:"insufficientWarning"},Oq={class:"modalFooter"},Lq=["disabled"],Bq={class:"modalHeader"},Mq={class:"modalTitle"},Fq={class:"modalBody"},Uq={class:"detailNFTImage"},Vq=["src"],$q={class:"detailBadges"},Hq={class:"detailStarBadge"},Gq={class:"detailLevelBadge"},Qq={class:"detailInfo"},jq={class:"detailRow"},zq={class:"detailValue"},Wq={class:"detailRow"},Kq={class:"detailLabel"},qq={class:"detailValue"},Jq={class:"popupHeader"},Yq={class:"popupTitle"},Xq={class:"popupBody"},Zq={class:"popupMessage"},eJ={class:"popupActions"},tJ={class:"popupHeader"},nJ={class:"popupTitle"},sJ={class:"popupBody"},rJ={class:"popupMessage"},iJ={class:"popupActions"},oJ={class:"popupHeader"},aJ={class:"popupTitle"},lJ={class:"popupBody"},cJ={class:"popupMessage"},uJ={class:"popupActions"},dJ={class:"searchModalHeader"},hJ={class:"searchModalTitle"},fJ={class:"searchModalBody"},pJ=["placeholder"],gJ={class:"searchModalFooter"},mJ={__name:"NFTPage",setup(n){const e=on(),t=pe(()=>e.state.coins),s=pe(()=>e.state.totalCoin),r=U("wallet"),i=U("$ 5,323.00"),o=U("0.0000 ETH"),a=U("0.00335"),l=U("+6.54%"),c=U(!1),d=U(!1),f=U(!1),p=U([]),m=U([]),w=U([]),y=U(!1),A=U(!1),_=U(!1),C=U(null),S=U(""),B=U("all"),V=U("all"),j=U("newest"),x=U(""),I=U(!1),P=U("tokens"),T=U(null),b=pe(()=>gs()),D=K=>{try{return new URL(Object.assign({"../assets/img/cat1.png":hl,"../assets/img/cat10.png":fl,"../assets/img/cat11.png":pl,"../assets/img/cat12.png":gl,"../assets/img/cat13.png":ml,"../assets/img/cat14.png":vl,"../assets/img/cat15.png":yl,"../assets/img/cat16.png":Al,"../assets/img/cat17.png":wl,"../assets/img/cat18.png":_l,"../assets/img/cat19.png":El,"../assets/img/cat2.png":bl,"../assets/img/cat20.png":Il,"../assets/img/cat21.png":Cl,"../assets/img/cat22.png":Tl,"../assets/img/cat23.png":Sl,"../assets/img/cat24.png":Pl,"../assets/img/cat25.png":Rl,"../assets/img/cat26.png":xl,"../assets/img/cat27.png":kl,"../assets/img/cat28.png":Nl,"../assets/img/cat29.png":Dl,"../assets/img/cat3.png":Ol,"../assets/img/cat30.png":Ll,"../assets/img/cat4.png":Bl,"../assets/img/cat5.png":Ml,"../assets/img/cat6.png":Fl,"../assets/img/cat7.png":Ul,"../assets/img/cat8.png":Vl,"../assets/img/cat9.png":$l,"../assets/img/catPoint.png":Hl,"../assets/img/catPointPlus.png":Gl,"../assets/img/catProfile01.png":Ql,"../assets/img/catProfile02.png":jl,"../assets/img/cat_ico.png":zl})[`../assets/img/cat${K}.png`],import.meta.url).href}catch{return`/src/assets/img/cat${K}.png`}},k=()=>{p.value=fW(),T.value&&(w.value=hW(T.value.walletAddress||T.value.id),m.value=(T.value.gameData?.inventory||[]).filter(K=>!pW(K.id)))},ke=pe(()=>{let K=[...p.value];if(x.value.trim()){const F=x.value.toLowerCase();K=K.filter(z=>z.nftData.name.toLowerCase().includes(F)||String(z.nftData.imageId).includes(F))}return B.value!=="all"&&(K=K.filter(F=>(F.nftData.rarity||et.COMMON)===B.value)),V.value!=="all"&&(V.value==="low"?K=K.filter(F=>F.price<1e3):V.value==="mid"?K=K.filter(F=>F.price>=1e3&&F.price<5e3):V.value==="high"&&(K=K.filter(F=>F.price>=5e3))),K=[...K].sort((F,z)=>{switch(j.value){case"newest":return z.listedAt-F.listedAt;case"oldest":return F.listedAt-z.listedAt;case"priceLow":return F.price-z.price;case"priceHigh":return z.price-F.price;case"level":return(z.nftData.level||1)-(F.nftData.level||1);case"stars":return(z.nftData.stars||0)-(F.nftData.stars||0);default:return 0}}),K}),ie=K=>{C.value=K,S.value="",y.value=!0},G=()=>{y.value=!1,C.value=null,S.value=""},$=async()=>{if(!C.value)return;const K=parseFloat(S.value);if(!K||K<=0){alert(b.value.enterValidPrice);return}if(!T.value){alert(b.value.loginRequired);return}const F=T.value.walletAddress||T.value.id;cW(C.value,K,F);const ne=(T.value.gameData?.inventory||[]).filter(ae=>ae.id!==C.value.id);await e.updateGameData({inventory:ne}),k(),alert(`${b.value.nftListedOnMarketplace} (${b.value.price}: ${K.toLocaleString()} ${b.value.coin})`),G()},Z=K=>{C.value=K,A.value=!0},me=()=>{A.value=!1,C.value=null},Ve=async()=>{if(!C.value||!T.value)return;const K=C.value,F=T.value.walletAddress||T.value.id,z=T.value.gameData?.totalCoin||0;if(z<K.price){alert(`${b.value.insufficientCoinsForPurchase} (${b.value.required}: ${K.price.toLocaleString()}, ${b.value.ownedCoins}: ${z.toLocaleString()})`);return}const ne=uW(K.id,F);if(!ne.success){alert(ne.error);return}const ae=T.value.gameData?.inventory||[];ae.unshift(ne.nftData),await e.updateGameData({inventory:ae,totalCoin:z-K.price});const{getAllUsers:de}=await md(async()=>{const{getAllUsers:xe}=await Promise.resolve().then(()=>jx);return{getAllUsers:xe}},void 0),ve=de().find(xe=>(xe.walletAddress||xe.id)===K.sellerAddress);if(ve){const xe=ve.gameData?.totalCoin||0;await Qc(ve.id,{totalCoin:xe+K.price}),window.dispatchEvent(new CustomEvent("userDataUpdated"))}k(),alert(`${b.value.nftPurchased} (${K.price.toLocaleString()} ${b.value.coinsPaid})`),me()},Ne=async K=>{if(!confirm(b.value.confirmCancelSale)||!T.value)return;const F=T.value.walletAddress||T.value.id,z=dW(K.id,F);if(!z.success){alert(z.error);return}const ne=T.value.gameData?.inventory||[];ne.unshift(K.nftData),await e.updateGameData({inventory:ne}),k(),alert(b.value.saleCancelled)},se=K=>{C.value=K,_.value=!0},W=()=>{_.value=!1,C.value=null},ue=()=>{x.value="",B.value="all",V.value="all",j.value="newest"},Pe=pe(()=>gW()),tt=U([{id:1,name:"Bitcoin",symbol:"BTC",price:"36,590.00",change:"+6.21%",isPositive:!0,image:mW,lineImage:yW},{id:2,name:"Ethereum",symbol:"ETH",price:"2,590.00",change:"+5.21%",isPositive:!0,image:vW,lineImage:AW}]),Y=pe(()=>T.value?(T.value.gameData?.inventory||[]).slice(0,10):[]),ge=()=>T.value?`$ ${((T.value.gameData?.totalCoin||0)*.01).toFixed(2)}`:"$ 0.00",fe=()=>{d.value=!0},we=()=>{c.value=!0},Qe=()=>{f.value=!0},N=()=>{d.value=!1},O=()=>{c.value=!1},Q=()=>{f.value=!1};Nt(()=>{T.value=dt(),e.loadCurrentUser(),T.value&&(i.value=ge(),e.isWalletConnected&&e.walletAddress&&(o.value=e.userBalance)),k();const K=()=>{T.value=dt(),e.loadCurrentUser(),T.value&&(i.value=ge()),k()};window.addEventListener("userDataUpdated",K),rn(()=>{window.removeEventListener("userDataUpdated",K)})});const te=K=>{r.value=K,k()};return(K,F)=>(L(),M("div",wW,[ze(Qn,{coinCount:t.value},null,8,["coinCount"]),h("main",_W,[h("div",EW,[h("button",{class:Oe(["tab",{active:r.value==="wallet"}]),onClick:F[0]||(F[0]=z=>te("wallet"))},E(b.value.wallet),3),h("button",{class:Oe(["tab",{active:r.value==="marketplace"}]),onClick:F[1]||(F[1]=z=>te("marketplace"))},E(b.value.marketplace),3),h("button",{class:Oe(["tab",{active:r.value==="myNFTs"}]),onClick:F[2]||(F[2]=z=>te("myNFTs"))},E(b.value.myNFTs),3),h("button",{class:Oe(["tab",{active:r.value==="myListings"}]),onClick:F[3]||(F[3]=z=>te("myListings"))},E(b.value.myListings),3)]),r.value==="wallet"?(L(),M("div",bW,[h("div",IW,[F[23]||(F[23]=h("div",{class:"walletLabel"},"Current Wallet Balance",-1)),h("div",CW,E(i.value),1),h("div",TW,[h("span",null,"BTC : "+E(a.value),1),h("span",SW,E(l.value),1)]),o.value!=="0.0000 ETH"?(L(),M("div",PW,[h("span",null,"ETH : "+E(o.value),1)])):he("",!0)]),h("div",{class:"actionButtons"},[h("button",{class:"actionBtn sendBtn",onClick:fe},[...F[24]||(F[24]=[h("div",{class:"btnIcon"},null,-1),h("span",{class:"btnLabel"},"Send",-1)])]),h("button",{class:"actionBtn buyBtn",onClick:we},[...F[25]||(F[25]=[h("div",{class:"btnIcon"},null,-1),h("span",{class:"btnLabel"},"Buy",-1)])]),h("button",{class:"actionBtn receiveBtn",onClick:Qe},[...F[26]||(F[26]=[h("div",{class:"btnIcon"},null,-1),h("span",{class:"btnLabel"},"Receive",-1)])])]),h("div",RW,[h("button",{class:Oe(["subTab",{active:P.value==="tokens"}]),onClick:F[4]||(F[4]=z=>P.value="tokens")}," Tokens ",2),h("button",{class:Oe(["subTab",{active:P.value==="nfts"}]),onClick:F[5]||(F[5]=z=>P.value="nfts")}," NFTs ",2)]),P.value==="tokens"?(L(),M("div",xW,[(L(!0),M(Re,null,We(tt.value,z=>(L(),M("div",{key:z.id,class:"item"},[h("div",kW,[h("div",{class:"iconCircle",style:St({backgroundImage:`url(${z.image})`})},null,4)]),h("div",NW,[h("div",DW,E(z.symbol),1),h("div",OW,E(z.name),1)]),h("div",LW,[h("div",{class:"chartLine",style:St({backgroundImage:`url(${z.lineImage})`})},null,4)]),h("div",BW,[h("div",MW,"$"+E(z.price),1),h("div",{class:Oe(["change",{positive:z.isPositive,negative:!z.isPositive}])},E(z.change),3)])]))),128))])):he("",!0),P.value==="nfts"?(L(),M("div",FW,[(L(!0),M(Re,null,We(Y.value,z=>(L(),M("div",{key:z.id,class:"nftItem",onClick:ne=>se(z)},[h("div",VW,[h("div",{class:"thumbnailPlaceholder",style:St({backgroundImage:`url(${D(z.imageId||z.id)})`})},null,4)]),h("div",$W,[h("div",HW,"#"+E(z.id),1),h("div",GW,E(z.name),1)]),h("div",QW,[h("div",jW,[(L(),M(Re,null,We(5,ne=>h("span",{key:ne,class:"star"},E((ne<=(z.stars||0),"*")),1)),64))]),h("div",zW,"Lv "+E(z.level||1),1)])],8,UW))),128)),Y.value.length===0?(L(),M("div",WW,[F[27]||(F[27]=h("div",{class:"emptyIcon"},"?",-1)),h("div",KW,E(b.value.noNFTsInWallet),1)])):he("",!0)])):he("",!0)])):he("",!0),r.value==="marketplace"?(L(),M("div",qW,[h("div",JW,[h("div",YW,[h("span",null,E(b.value.onSale)+": "+E(Pe.value.activeListings)+E(b.value.itemsCount),1),h("span",null,E(b.value.totalVolume)+": "+E(Pe.value.totalVolume.toLocaleString())+" "+E(b.value.coin),1)]),h("button",{class:"searchBtn",onClick:F[6]||(F[6]=z=>I.value=!0)},[F[28]||(F[28]=h("span",null,"?",-1)),h("span",null,E(b.value.searchNFT),1)])]),h("div",XW,[Wt(h("select",{"onUpdate:modelValue":F[7]||(F[7]=z=>B.value=z),class:"filterSelect"},[h("option",ZW,E(b.value.allRarity),1),h("option",eK,E(b.value.common),1),h("option",tK,E(b.value.rare),1),h("option",nK,E(b.value.epic),1),h("option",sK,E(b.value.legendary),1)],512),[[Ni,B.value]]),Wt(h("select",{"onUpdate:modelValue":F[8]||(F[8]=z=>V.value=z),class:"filterSelect"},[h("option",rK,E(b.value.allPrice),1),h("option",iK,E(b.value.under1000Coins),1),h("option",oK,E(b.value.midPriceRange),1),h("option",aK,E(b.value.over5000Coins),1)],512),[[Ni,V.value]]),Wt(h("select",{"onUpdate:modelValue":F[9]||(F[9]=z=>j.value=z),class:"filterSelect"},[h("option",lK,E(b.value.newest),1),h("option",cK,E(b.value.oldest),1),h("option",uK,E(b.value.priceLow),1),h("option",dK,E(b.value.priceHigh),1),h("option",hK,E(b.value.levelHigh),1),h("option",fK,E(b.value.starsHigh),1)],512),[[Ni,j.value]])]),ke.value.length>0?(L(),M("div",pK,[(L(!0),M(Re,null,We(ke.value,z=>(L(),M("div",{key:z.id,class:"nftCard",onClick:ne=>se(z.nftData)},[h("div",mK,[h("img",{src:D(z.nftData.imageId||z.nftData.id),alt:"NFT"},null,8,vK),h("div",yK,[h("div",AK,[(L(),M(Re,null,We(5,ne=>h("span",{key:ne,class:"star"},E((ne<=(z.nftData.stars||0),"*")),1)),64))]),h("div",wK,"Lv "+E(z.nftData.level||1),1)])]),h("div",_K,[h("div",EK,E(z.nftData.name),1),h("div",bK,[h("span",IK,E(b.value.price)+":",1),h("span",CK,E(z.price.toLocaleString())+" "+E(b.value.coin),1)])]),h("button",{class:"buyBtn",onClick:xn(ne=>Z(z),["stop"])},E(b.value.buy),9,TK)],8,gK))),128))])):(L(),M("div",SK,[F[29]||(F[29]=h("div",{class:"emptyIcon"},"?",-1)),h("div",PK,E(b.value.noNFTsOnSale),1)]))])):he("",!0),r.value==="myNFTs"?(L(),M("div",RK,[h("div",xK,[h("h3",null,E(b.value.myNFTsCount)+" ("+E(m.value.length)+E(b.value.itemsCount)+")",1),h("div",kK,E(b.value.ownedCoins)+": "+E(s.value.toLocaleString()),1)]),m.value.length>0?(L(),M("div",NK,[(L(!0),M(Re,null,We(m.value,z=>(L(),M("div",{key:z.id,class:"nftCard",onClick:ne=>se(z)},[h("div",OK,[h("img",{src:D(z.imageId||z.id),alt:"NFT"},null,8,LK),h("div",BK,[z.rarity?(L(),M("div",{key:0,class:"rarityBadge",style:St(De(cu)(z.rarity))},E(De(Iv)(z.rarity)),5)):he("",!0),h("div",MK,[(L(),M(Re,null,We(5,ne=>h("span",{key:ne,class:"star"},E((ne<=(z.stars||0),"*")),1)),64))]),h("div",FK,"Lv "+E(z.level||1),1)])]),h("div",UK,[h("div",VK,E(z.name),1)]),h("button",{class:"sellBtn",onClick:xn(ne=>ie(z),["stop"])},E(b.value.sell),9,$K)],8,DK))),128))])):(L(),M("div",HK,[F[30]||(F[30]=h("div",{class:"emptyIcon"},"?",-1)),h("div",GK,E(b.value.noNFTsAvailableForSale),1)]))])):he("",!0),r.value==="myListings"?(L(),M("div",QK,[h("div",jK,[h("h3",null,E(b.value.mySalesList)+" ("+E(w.value.length)+E(b.value.itemsCount)+")",1)]),w.value.length>0?(L(),M("div",zK,[(L(!0),M(Re,null,We(w.value,z=>(L(),M("div",{key:z.id,class:"nftCard"},[h("div",WK,[h("img",{src:D(z.nftData.imageId||z.nftData.id),alt:"NFT"},null,8,KK),h("div",qK,[h("div",JK,[(L(),M(Re,null,We(5,ne=>h("span",{key:ne,class:"star"},E((ne<=(z.nftData.stars||0),"*")),1)),64))]),h("div",YK,"Lv "+E(z.nftData.level||1),1)])]),h("div",XK,[h("div",ZK,E(z.nftData.name),1),h("div",eq,[h("span",tq,E(b.value.salePrice)+":",1),h("span",nq,E(z.price.toLocaleString())+" "+E(b.value.coin),1)])]),h("button",{class:"cancelBtn",onClick:ne=>Ne(z)},E(b.value.cancelSale),9,sq)]))),128))])):(L(),M("div",rq,[F[31]||(F[31]=h("div",{class:"emptyIcon"},"?",-1)),h("div",iq,E(b.value.noNFTsOnSaleList),1)]))])):he("",!0)]),ze(jn),y.value&&C.value?(L(),M("div",{key:0,class:"modalOverlay",onClick:G},[h("div",{class:"modalContent",onClick:F[11]||(F[11]=xn(()=>{},["stop"]))},[h("div",oq,[h("h3",aq,E(b.value.sellNFT),1),h("button",{class:"modalClose",onClick:G},"")]),h("div",lq,[h("div",cq,[h("img",{src:D(C.value.imageId||C.value.id),alt:"NFT",class:"sellNFTImage"},null,8,uq),h("div",dq,[h("div",hq,E(C.value.name),1),h("div",fq,[Qi(E((K.n<=(K.nft.stars||0),"*"))+" ",1),h("span",null,"Lv "+E(C.value.level||1),1)])])]),h("div",pq,[h("label",gq,E(b.value.sellPriceLabel),1),Wt(h("input",{type:"number","onUpdate:modelValue":F[10]||(F[10]=z=>S.value=z),placeholder:b.value.enterPrice,class:"priceInput",min:"1"},null,8,mq),[[ps,S.value]]),h("div",vq,E(b.value.currentOwnedCoins)+": "+E(s.value.toLocaleString()),1)])]),h("div",yq,[h("button",{class:"modalBtn cancelBtn",onClick:G},E(b.value.cancel),1),h("button",{class:"modalBtn confirmBtn",onClick:$},E(b.value.registerSale),1)])])])):he("",!0),A.value&&C.value?(L(),M("div",{key:1,class:"modalOverlay",onClick:me},[h("div",{class:"modalContent",onClick:F[12]||(F[12]=xn(()=>{},["stop"]))},[h("div",Aq,[h("h3",wq,E(b.value.buyNFT),1),h("button",{class:"modalClose",onClick:me},"")]),h("div",_q,[h("div",Eq,[h("img",{src:D(C.value.nftData.imageId||C.value.nftData.id),alt:"NFT",class:"buyNFTImage"},null,8,bq),h("div",Iq,[h("div",Cq,E(C.value.nftData.name),1),h("div",Tq,[h("span",null,"?"+E(C.value.nftData.stars||0)+E(b.value.starsRating),1),h("span",null,"Lv "+E(C.value.nftData.level||1),1)])])]),h("div",Sq,[h("div",Pq,[h("span",Rq,E(b.value.salePrice)+":",1),h("span",xq,E(C.value.price.toLocaleString())+" "+E(b.value.coin),1)]),h("div",kq,[h("span",Nq,E(b.value.ownedCoins)+":",1),h("span",{class:Oe(["priceValue",{insufficient:s.value<C.value.price}])},E(s.value.toLocaleString())+" "+E(b.value.coin),3)]),s.value<C.value.price?(L(),M("div",Dq,E(b.value.insufficientCoinsWarning),1)):he("",!0)])]),h("div",Oq,[h("button",{class:"modalBtn cancelBtn",onClick:me},E(b.value.cancel),1),h("button",{class:Oe(["modalBtn confirmBtn",{disabled:s.value<C.value.price}]),onClick:Ve,disabled:s.value<C.value.price},E(b.value.buy),11,Lq)])])])):he("",!0),_.value&&C.value?(L(),M("div",{key:2,class:"modalOverlay",onClick:W},[h("div",{class:"modalContent detailModal",onClick:F[13]||(F[13]=xn(()=>{},["stop"]))},[h("div",Bq,[h("h3",Mq,E(C.value.name),1),h("button",{class:"modalClose",onClick:W},"")]),h("div",Fq,[h("div",Uq,[h("img",{src:D(C.value.imageId||C.value.id),alt:"NFT"},null,8,Vq),h("div",$q,[h("div",Hq,[(L(),M(Re,null,We(5,z=>h("span",{key:z,class:"star"},E((z<=(K.nft.stars||0),"*")),1)),64))]),h("div",Gq,"Lv "+E(C.value.level||1),1)])]),h("div",Qq,[h("div",jq,[F[32]||(F[32]=h("span",{class:"detailLabel"},"NFT ID:",-1)),h("span",zq,"#"+E(C.value.id),1)]),h("div",Wq,[h("span",Kq,E(b.value.imageId)+":",1),h("span",qq,"#"+E(C.value.imageId),1)])])])])])):he("",!0),d.value?(L(),M("div",{key:3,class:"popupOverlay",onClick:N},[h("div",{class:"popupContent",onClick:F[14]||(F[14]=xn(()=>{},["stop"]))},[h("div",Jq,[h("h2",Yq,E(b.value.send),1),h("button",{class:"closeBtn",onClick:N},"")]),h("div",Xq,[h("p",Zq,E(b.value.sendFeatureComingSoon),1),h("div",eJ,[h("button",{class:"popupBtn cancelBtn",onClick:N},E(b.value.confirm),1)])])])])):he("",!0),c.value?(L(),M("div",{key:4,class:"popupOverlay",onClick:O},[h("div",{class:"popupContent",onClick:F[15]||(F[15]=xn(()=>{},["stop"]))},[h("div",tJ,[h("h2",nJ,E(b.value.buy),1),h("button",{class:"closeBtn",onClick:O},"")]),h("div",sJ,[h("p",rJ,E(b.value.buyFeatureComingSoon),1),h("div",iJ,[h("button",{class:"popupBtn cancelBtn",onClick:O},E(b.value.confirm),1)])])])])):he("",!0),f.value?(L(),M("div",{key:5,class:"popupOverlay",onClick:Q},[h("div",{class:"popupContent",onClick:F[16]||(F[16]=xn(()=>{},["stop"]))},[h("div",oJ,[h("h2",aJ,E(b.value.receive),1),h("button",{class:"closeBtn",onClick:Q},"")]),h("div",lJ,[h("p",cJ,E(b.value.receiveFeatureComingSoon),1),h("div",uJ,[h("button",{class:"popupBtn cancelBtn",onClick:Q},E(b.value.confirm),1)])])])])):he("",!0),I.value?(L(),M("div",{key:6,class:"modalOverlay",onClick:F[22]||(F[22]=z=>I.value=!1)},[h("div",{class:"searchModal",onClick:F[21]||(F[21]=xn(()=>{},["stop"]))},[h("div",dJ,[h("h3",hJ,E(b.value.searchNFT),1),h("button",{class:"searchModalClose",onClick:F[17]||(F[17]=z=>I.value=!1)},"")]),h("div",fJ,[Wt(h("input",{type:"text","onUpdate:modelValue":F[18]||(F[18]=z=>x.value=z),placeholder:b.value.searchPlaceholderNFT,class:"searchInput",onKeyup:F[19]||(F[19]=k1(z=>I.value=!1,["enter"]))},null,40,pJ),[[ps,x.value]])]),h("div",gJ,[h("button",{class:"modalBtn resetBtn",onClick:ue},E(b.value.reset),1),h("button",{class:"modalBtn applyBtn",onClick:F[20]||(F[20]=z=>I.value=!1)},E(b.value.apply),1)])])])):he("",!0)]))}},vJ=Qt(mJ,[["__scopeId","data-v-9e903c06"]]),yJ={class:"notificationPage"},AJ={class:"mainContent"},wJ={class:"pageHeader"},_J={class:"notificationList"},EJ=["onClick"],bJ={class:"notificationContent"},IJ={class:"notificationTitle"},CJ={class:"notificationMessage"},TJ={class:"notificationTime"},SJ={key:0,class:"unreadDot"},PJ={key:0,class:"emptyState"},RJ={__name:"NotificationPage",setup(n){const e=Sn(),t=on(),s=pe(()=>t.state.coins),r=U([{id:1,title:"  !",message:"    .",time:"5 ",read:!1,type:"quest"},{id:2,title:"Coin  ",message:"1 Coin  .",time:"1 ",read:!1,type:"exchange"},{id:3,title:"  ",message:"   !",time:"2 ",read:!0,type:"factory"},{id:4,title:" ",message:"  100 Point .",time:"1 ",read:!0,type:"attendance"}]);Nt(()=>{t.loadCurrentUser();const c=()=>{t.loadCurrentUser()};window.addEventListener("userDataUpdated",c),rn(()=>{window.removeEventListener("userDataUpdated",c)})});const i=c=>{c.read||(c.read=!0)},o=()=>{r.value.forEach(c=>{c.read=!0})},a=pe(()=>r.value.filter(c=>!c.read).length),l=c=>{switch(i(c),c.type){case"quest":e.push("/quest");break;case"exchange":e.push("/exchange");break;case"factory":e.push("/factory");break;case"attendance":e.push("/attendance");break}};return(c,d)=>(L(),M("div",yJ,[ze(Qn,{coinCount:s.value},null,8,["coinCount"]),h("main",AJ,[h("div",wJ,[d[0]||(d[0]=h("h1",{class:"pageTitle"},"",-1)),a.value>0?(L(),M("button",{key:0,class:"markAllReadBtn",onClick:o},"   ")):he("",!0)]),h("div",_J,[(L(!0),M(Re,null,We(r.value,f=>(L(),M("div",{key:f.id,class:Oe(["notificationItem",{unread:!f.read}]),onClick:p=>l(f)},[h("div",bJ,[h("div",IJ,E(f.title),1),h("div",CJ,E(f.message),1),h("div",TJ,E(f.time),1)]),f.read?he("",!0):(L(),M("div",SJ))],10,EJ))),128)),r.value.length===0?(L(),M("div",PJ,[...d[1]||(d[1]=[h("p",null," .",-1)])])):he("",!0)])]),ze(jn)]))}},xJ=Qt(RJ,[["__scopeId","data-v-0a7cfb99"]]),kJ="/tdl/assets/point_ico-CuS5zUpS.png",NJ="/tdl/assets/coin_ico-COVm5STX.png",DJ={class:"shopPage"},OJ={class:"mainContent"},LJ={class:"itemList"},BJ={class:"itemInfo"},MJ={class:"itemName"},FJ={class:"itemDescription"},UJ={class:"itemPrice"},VJ={class:"priceValue"},$J={class:"priceCurrency"},HJ={key:0,src:kJ,alt:"P",class:"currencyIcon"},GJ={key:1,src:NJ,alt:"C",class:"currencyIcon"},QJ=["disabled","onClick"],jJ={__name:"ShopPage",setup(n){const e=on(),t=pe(()=>e.state.coins),s=pe(()=>e.state.totalCoin),r=pe(()=>gs()),i=pe(()=>[{id:1,name:r.value.energy100,description:`${r.value.energyRecover} 100 ${r.value.energy}`,price:100,currency:"point",amount:100},{id:2,name:r.value.energy500,description:`${r.value.energyRecover} 500 ${r.value.energy}`,price:450,currency:"point",amount:500},{id:3,name:r.value.energy1000,description:`${r.value.energyRecover} 1000 ${r.value.energy}`,price:800,currency:"point",amount:1e3},{id:4,name:r.value.energy2000,description:`${r.value.energyRecover} 2000 ${r.value.energy}`,price:1500,currency:"point",amount:2e3}]),o=()=>{e.loadCurrentUser()},a=async l=>{if(!dt()){alert(r.value.loginRequired);return}if(l.currency==="point"&&t.value<l.price){alert(r.value.insufficientPoints);return}if(l.currency==="coin"&&s.value<l.price){alert(r.value.insufficientCoins);return}let d=!1;if(l.currency==="point"){const w=t.value-l.price;d=await e.updateMultiple({coins:w})}else{const w=s.value-l.price;d=await e.updateMultiple({totalCoin:w})}if(!d){alert(r.value.purchaseFailed);return}const f=4e3,p=parseInt(localStorage.getItem("currentEnergy")||f.toString(),10),m=Math.min(p+l.amount,f);localStorage.setItem("currentEnergy",m.toString()),localStorage.setItem("energyLastDate",new Date().toDateString()),window.dispatchEvent(new CustomEvent("userDataUpdated")),alert(`${l.name} ${r.value.purchaseComplete} ${l.amount} ${r.value.energyRecovered}! (${r.value.currentEnergy}: ${e.formatNumber(m)}/${e.formatNumber(f)})`)};return Nt(()=>{o();const l=()=>{e.loadCurrentUser()};window.addEventListener("userDataUpdated",l),rn(()=>{window.removeEventListener("userDataUpdated",l)})}),(l,c)=>(L(),M("div",DJ,[ze(Qn,{coinCount:t.value},null,8,["coinCount"]),h("main",OJ,[h("div",LJ,[(L(!0),M(Re,null,We(i.value,d=>(L(),M("div",{key:d.id,class:"shopItem"},[h("div",BJ,[h("h3",MJ,E(d.name),1),h("p",FJ,E(d.description),1)]),h("div",UJ,[h("span",VJ,E(d.price.toLocaleString()),1),h("span",$J,[d.currency==="point"?(L(),M("img",HJ)):(L(),M("img",GJ))])]),h("button",{class:"buyBtn",disabled:d.currency==="point"&&t.value<d.price||d.currency==="coin"&&s.value<d.price,onClick:f=>a(d)},E(r.value.buy),9,QJ)]))),128))])]),ze(jn)]))}},zJ=Qt(jJ,[["__scopeId","data-v-08c0484a"]]),d_="/tdl/assets/arrow-B-Afy2tM.png",WJ="/tdl/assets/shadow-BT4_IuPe.png",KJ="/tdl/assets/cat10-B8AgbljH.png",qJ="/tdl/assets/cat20-Bz9cd08a.png",JJ="/tdl/assets/cat29-D_79HmBj.png",YJ="/tdl/assets/cat30-Cx-HRp0m.png",XJ="/tdl/assets/cusionBed-Dno4HzpB.png",ZJ="/tdl/assets/ballYarn-DeUmKKN5.png",eY="/tdl/assets/cannedFood-CAb6Z8ZX.png",tY="/tdl/assets/fishToy-67OFlkDg.png",nY="/tdl/assets/heart-BK3AGGPn.png",sY="/tdl/assets/affectionBar2-RPbv561I.png",rY="/tdl/assets/affectionBar-Dx16DdEg.png",iY={class:"homePage"},oY={class:"mainContent"},aY={key:0,class:"homeContent"},lY={class:"catContainer"},cY={class:"catWrapper"},uY={key:0,class:"affectionBarContainer"},dY={class:"affectionBarWrapper"},hY=["src"],fY=["src"],pY=["src"],gY={key:1,class:"loginPrompt"},mY=["onClick"],vY=["src","alt"],yY={class:"catSelectModal"},AY={class:"modalContent"},wY={class:"catGrid"},_Y=["onClick"],EY=["src","alt"],bY={class:"catSelectInfo"},IY={class:"catSelectName"},CY={class:"catSelectLevel"},TY={key:0,class:"selectedBadge"},SY={class:"selectedCount"},PY={class:"modalFooter"},RY=["disabled"],xY={class:"speechBubbles"},kY=["src"],NY={key:1,class:"heartPlusText"},DY={class:"foodEmojis"},OY=["src"],LY=100,BY={__name:"HomePage",setup(n){const e=on(),t=pe(()=>e.state.coins),s=pe(()=>e.state.totalCoin),r=pe(()=>gs()),i=U(null),o=se=>{try{return new URL(Object.assign({"../assets/img/cat1.png":hl,"../assets/img/cat10.png":fl,"../assets/img/cat11.png":pl,"../assets/img/cat12.png":gl,"../assets/img/cat13.png":ml,"../assets/img/cat14.png":vl,"../assets/img/cat15.png":yl,"../assets/img/cat16.png":Al,"../assets/img/cat17.png":wl,"../assets/img/cat18.png":_l,"../assets/img/cat19.png":El,"../assets/img/cat2.png":bl,"../assets/img/cat20.png":Il,"../assets/img/cat21.png":Cl,"../assets/img/cat22.png":Tl,"../assets/img/cat23.png":Sl,"../assets/img/cat24.png":Pl,"../assets/img/cat25.png":Rl,"../assets/img/cat26.png":xl,"../assets/img/cat27.png":kl,"../assets/img/cat28.png":Nl,"../assets/img/cat29.png":Dl,"../assets/img/cat3.png":Ol,"../assets/img/cat30.png":Ll,"../assets/img/cat4.png":Bl,"../assets/img/cat5.png":Ml,"../assets/img/cat6.png":Fl,"../assets/img/cat7.png":Ul,"../assets/img/cat8.png":Vl,"../assets/img/cat9.png":$l,"../assets/img/catPoint.png":Hl,"../assets/img/catPointPlus.png":Gl,"../assets/img/catProfile01.png":Ql,"../assets/img/catProfile02.png":jl,"../assets/img/cat_ico.png":zl})[`../assets/img/cat${se}.png`],import.meta.url).href}catch(W){return console.error(`   : cat${se}.png`,W),$i}},a=[$i],l=U([]),c=pe(()=>l.value.length>0?l.value.map(se=>o(se.imageId)):a),d=U(0),f=U([]),p=U([]),m=U(1),w=pe(()=>{if(l.value.length===0)return m.value;const se=l.value[d.value];return se&&se.affinity!==void 0?se.affinity:30}),y=pe(()=>Math.min(w.value/LY*100,100)),A=U(null),_=U("auto"),C=U(!1),S=U(!1),B=U([]),V=U([]),j=[{id:1,image:XJ,name:"Cushion Bed"},{id:2,image:ZJ,name:"Ball Yarn"},{id:3,image:eY,name:"Canned Food"},{id:4,image:tY,name:"Fish Toy"}],x=["!","  !","  ?","!"," ?"," !","!"," ...","  !","!","!","!","!","!","  !"],I=["Hello!","Nice weather today!","What are you doing?","This is fun!","Do you like cats?","I want to play!","I'm hungry!","I'm sleepy...","Have a great day!","Thank you!","I'm happy!","This is fun!","Hang in there!","Fighting!","Have a nice day!"],P=()=>(localStorage.getItem("appLanguage")||"English")===""?x:I,T=()=>{c.value.length!==0&&(d.value=(d.value-1+c.value.length)%c.value.length)},b=()=>{c.value.length!==0&&(d.value=(d.value+1)%c.value.length)},D=()=>{const se=dt();if(!se||!se.gameData||!se.gameData.inventory){alert("No cats in inventory.");return}if(B.value=se.gameData.inventory.filter(W=>W&&W.imageId),B.value.length===0){alert("No cats in inventory.");return}V.value=[...l.value],S.value=!0},k=se=>{const W=V.value.findIndex(ue=>ue.id===se.id);W>-1?V.value.splice(W,1):V.value.length<4?V.value.push(se):alert("You can select up to 4 cats.")},ke=()=>{if(V.value.length===0){alert("Please select at least 1 cat.");return}V.value.forEach(W=>{W.affinity===void 0&&(W.affinity=30)}),l.value=[...V.value];const se=dt();se&&(se.selectedHomeCats=l.value.map(W=>W.id),se.gameData&&se.gameData.inventory&&l.value.forEach(W=>{const ue=se.gameData.inventory.findIndex(Pe=>Pe&&Pe.id===W.id);ue>-1&&(se.gameData.inventory[ue].affinity=W.affinity)}),localStorage.setItem("currentUser",JSON.stringify(se)),sessionStorage.setItem("currentUser",JSON.stringify(se))),d.value=0,S.value=!1},ie=()=>{V.value=[...l.value],S.value=!1},G=se=>V.value.some(W=>W.id===se.id),$=pe(()=>c.value.length===0?$i:c.value[d.value]),Z=()=>{const se=P(),W=se[Math.floor(Math.random()*se.length)],ue=Math.min(window.innerWidth||500,500),Pe=window.innerHeight||800,tt=220,Y=60,ge=20,fe={id:Date.now(),text:W,x:Math.random()*(ue-tt-ge*2)+ge,y:Math.random()*(Pe-Y-ge*2-200)+100};f.value.push(fe),setTimeout(()=>{const we=f.value.findIndex(Qe=>Qe.id===fe.id);we>-1&&f.value.splice(we,1)},2e3)},me=()=>{C.value=!C.value},Ve=async se=>{if(s.value<1){alert(" !");return}const ue=s.value-1;try{await e.updateGameData({totalCoin:ue})}catch(N){console.error("  :",N),alert("  .");return}const Pe=Math.min(window.innerWidth||500,500),tt=window.innerHeight||800,Y={id:Date.now(),x:Pe/2+(Math.random()-.5)*100,y:tt/2+(Math.random()-.5)*100,image:se.image};if(p.value.push(Y),setTimeout(()=>{const N=p.value.findIndex(O=>O.id===Y.id);N>-1&&p.value.splice(N,1)},2e3),m.value++,l.value.length>0){const N=dt();N&&N.gameData&&N.gameData.inventory&&(l.value.forEach(O=>{O.affinity||(O.affinity=30),O.affinity=Math.min(O.affinity+1,100);const Q=N.gameData.inventory.findIndex(te=>te&&te.id===O.id);Q>-1&&(N.gameData.inventory[Q].affinity=O.affinity)}),localStorage.setItem("currentUser",JSON.stringify(N)),sessionStorage.setItem("currentUser",JSON.stringify(N)),e.updateGameData({inventory:N.gameData.inventory}).catch(O=>{console.error("  :",O)}))}const ge=Math.min(window.innerWidth||500,500),fe=window.innerHeight||800,we=20,Qe={id:Date.now()+1,text:"+1",heartImage:nY,isHeartOnly:!0,x:Math.random()*(ge-100-we*2)+we,y:Math.random()*(fe-100-we*2-200)+100};f.value.push(Qe),setTimeout(()=>{const N=f.value.findIndex(O=>O.id===Qe.id);N>-1&&f.value.splice(N,1)},2e3)},Ne=()=>{A.value&&(_.value=A.value.offsetHeight+"px")};return Nt(()=>{if(i.value=dt(),i.value){if(e.loadCurrentUser(),i.value.selectedHomeCats&&i.value.gameData&&i.value.gameData.inventory){const W=i.value.selectedHomeCats,ue=i.value.gameData.inventory;l.value=ue.filter(Pe=>Pe&&W.includes(Pe.id)).slice(0,4).map(Pe=>(Pe.affinity===void 0&&(Pe.affinity=30),Pe))}}else{const W={id:"guest_"+Date.now(),email:"guest@tdl.com",name:"Guest",loginType:"guest",gameData:{level:1,coins:0,totalCoin:0,catFragments:50,nftCount:0,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}};localStorage.setItem("currentUser",JSON.stringify(W)),sessionStorage.setItem("currentUser",JSON.stringify(W)),i.value=W,e.loadCurrentUser()}setTimeout(()=>{Ne()},100),setTimeout(()=>{i.value&&Z()},500);const se=()=>{const W=dt();W&&W.gameData&&W.gameData.inventory&&l.value.length>0&&l.value.forEach((ue,Pe)=>{const tt=W.gameData.inventory.find(Y=>Y&&Y.id===ue.id);tt&&tt.affinity!==void 0&&(l.value[Pe].affinity=tt.affinity)})};window.addEventListener("userDataUpdated",se),rn(()=>{window.removeEventListener("userDataUpdated",se)})}),(se,W)=>(L(),M("div",iY,[ze(Qn,{coinCount:t.value,totalCoin:s.value},null,8,["coinCount","totalCoin"]),h("main",oY,[i.value?(L(),M("div",aY,[h("div",lY,[c.value.length>1?(L(),M("button",{key:0,class:"arrowButton arrowLeft",onClick:T},[...W[2]||(W[2]=[h("img",{src:d_,alt:"",class:"arrowIcon"},null,-1)])])):he("",!0),h("div",cY,[C.value?(L(),M("div",uY,[W[3]||(W[3]=h("span",{class:"levelText"},"Lv.",-1)),h("div",dY,[h("img",{ref_key:"affectionBarBgRef",ref:A,src:De(sY),alt:"  ",class:"affectionBarBg",onLoad:Ne},null,40,hY),h("div",{class:"affectionBarFill",style:St({width:y.value+"%",height:_.value})},[h("img",{src:De(rY),alt:" ",class:"affectionBarFillImg"},null,8,fY)],4)])])):he("",!0),ze(rR,{name:"slide",mode:"out-in"},{default:j_(()=>[(L(),M("div",{key:d.value,class:"catSlide"},[W[4]||(W[4]=h("img",{src:WJ,alt:"",class:"catShadow"},null,-1)),h("img",{src:$.value,alt:"",class:"catImage",onClick:Z,style:{cursor:"pointer"}},null,8,pY)]))]),_:1})]),c.value.length>1?(L(),M("button",{key:1,class:"arrowButton arrowRight",onClick:b},[...W[5]||(W[5]=[h("img",{src:d_,alt:"",class:"arrowIcon"},null,-1)])])):he("",!0)])])):(L(),M("div",gY,[h("p",null,E(r.value.loginRequired),1),h("button",{class:"loginBtn",onClick:W[0]||(W[0]=ue=>se.$router.push("/login"))},E(r.value.login),1)])),i.value?(L(),M("div",{key:2,class:Oe(["actionButtons",{"gift-buttons-container":C.value,"has-select-btn":i.value.loginType!=="guest"&&!C.value}])},[C.value?(L(),M(Re,{key:1},[(L(),M(Re,null,We(j,ue=>h("button",{key:ue.id,class:"actionBtn giftBtn",onClick:Pe=>Ve(ue)},[h("img",{src:ue.image,alt:ue.name,class:"gift-btn-image"},null,8,vY)],8,mY)),64)),h("button",{class:"actionBtn backBtn",onClick:W[1]||(W[1]=ue=>C.value=!1)},"  ")],64)):(L(),M(Re,{key:0},[i.value.loginType!=="guest"?(L(),M("button",{key:0,class:"actionBtn selectCatsBtn",onClick:D}," Select Cats ")):he("",!0),h("div",{class:"bottomButtonsRow"},[h("button",{class:"actionBtn talkBtn",onClick:Z}," Talk "),h("button",{class:"actionBtn petBtn",onClick:me}," Give gifts ")])],64))],2)):he("",!0)]),ze(jn),S.value?(L(),M("div",{key:0,class:"modalOverlay",onClick:xn(ie,["self"])},[h("div",yY,[h("div",{class:"modalHeader"},[W[6]||(W[6]=h("h2",null,"Select Cats (Max 4)",-1)),h("button",{class:"closeBtn",onClick:ie},"")]),h("div",AY,[h("div",wY,[(L(!0),M(Re,null,We(B.value,ue=>(L(),M("div",{key:ue.id,class:Oe(["catSelectItem",{selected:G(ue)}]),onClick:Pe=>k(ue)},[h("img",{src:o(ue.imageId),alt:ue.name,class:"catSelectImage"},null,8,EY),h("div",bY,[h("p",IY,E(ue.name),1),h("p",CY,"Lv."+E(ue.level||1),1)]),G(ue)?(L(),M("div",TY,"")):he("",!0)],10,_Y))),128))]),h("div",SY," Selected Cats: "+E(V.value.length)+"/4 ",1)]),h("div",PY,[h("button",{class:"modalBtn cancelBtn",onClick:ie},"Cancel"),h("button",{class:"modalBtn confirmBtn",onClick:ke,disabled:V.value.length===0},"Confirm",8,RY)])])])):he("",!0),h("div",xY,[(L(!0),M(Re,null,We(f.value,ue=>(L(),M("div",{key:ue.id,class:Oe(ue.isHeartOnly?"heartOnly":"speechBubble"),style:St({left:ue.x+"px",top:ue.y+"px",transform:"translateX(-50%)"})},[ue.isHeartOnly?(L(),M(Re,{key:1},[ue.heartImage?(L(),M("img",{key:0,src:ue.heartImage,alt:"",class:"heart-image"},null,8,kY)):he("",!0),ue.text?(L(),M("span",NY,E(ue.text),1)):he("",!0)],64)):(L(),M(Re,{key:0},[Qi(E(ue.text),1)],64))],6))),128))]),h("div",DY,[(L(!0),M(Re,null,We(p.value,ue=>(L(),M("div",{key:ue.id,class:"foodEmoji",style:St({left:ue.x+"px",top:ue.y+"px"})},[h("img",{src:ue.image,alt:"",class:"tulImage"},null,8,OY)],4))),128))])]))}},MY=Qt(BY,[["__scopeId","data-v-98129681"]]),FY="/tdl/assets/inviteCode-CsihMctd.png",h_="/tdl/assets/friendGifts-DPy41tGI.png",f_="/tdl/assets/suggStar-DYB4ehhE.png",UY="/tdl/assets/cat2-0Y4nM6HW.png",VY="/tdl/assets/cat3-Dp7OJMB9.png",$Y="/tdl/assets/cat4-DHiuXgwB.png",HY="/tdl/assets/cat5-BvXrfJAO.png",GY="/tdl/assets/cat6-DZOiQoo1.png",QY="/tdl/assets/cat7-CeDKF7mR.png",jY="/tdl/assets/cat8-mjRhb3fS.png",zY="/tdl/assets/cat11-0fJ86MBw.png",WY="/tdl/assets/cat12-9jWhGICw.png",KY="/tdl/assets/cat13-CHa4qUOi.png",qY="/tdl/assets/cat14-CLrryeLM.png",JY="/tdl/assets/cat15-CCtjZj8M.png",YY="/tdl/assets/cat16-CPcR6OS6.png",XY="/tdl/assets/cat17-EO7rjjtM.png",ZY="/tdl/assets/cat18-BGDiOePY.png",eX="/tdl/assets/cat19-DxCDtOnA.png",tX="/tdl/assets/cat21-ECTsze2s.png",nX="/tdl/assets/cat22-BvGXhyri.png",sX="/tdl/assets/cat23-DqU2B_M0.png",rX="/tdl/assets/cat24-7cWYLYDN.png",iX="/tdl/assets/cat25-Cy0mQl6B.png",oX="/tdl/assets/cat26-Bk4tHCwE.png",aX="/tdl/assets/cat27-CvtmCEXM.png",lX="/tdl/assets/cat28-B9s1wmgo.png",cX={class:"socialPage"},uX={class:"mainContent"},dX={class:"socialContent"},hX={class:"tabButtons"},fX={class:"tabContent"},pX={key:0,class:"tabPanel"},gX={class:"inviteCodeSection"},mX={class:"inviteCodeBox"},vX=["value"],yX=["src"],AX={class:"friendsListSection"},wX={class:"friendsGrid"},_X={class:"friendProfileWrapper"},EX={class:"friendListWrap"},bX=["src","alt"],IX={class:"giftIcon"},CX=["src","alt"],TX={class:"friendInfo"},SX={class:"friendName"},PX={class:"friendId"},RX={class:"searchSection"},xX={class:"suggestedSection"},kX={class:"sectionTitle"},NX=["src","alt"],DX={key:0,class:"suggestedGrid"},OX={class:"suggestedProfileWrapper"},LX=["src","alt"],BX={class:"suggestedInfo"},MX={class:"suggestedName"},FX={class:"suggestedId"},UX=["onClick"],VX={key:1,class:"tabPanel"},$X={class:"requestsList"},HX={key:0,class:"emptyMessage"},GX={key:1,class:"requestsGrid"},QX=["src","alt"],jX={class:"requestInfo"},zX={class:"requestName"},WX={class:"requestId"},KX={class:"requestActions"},qX=["onClick"],JX=["onClick"],YX={__name:"SocialPage",setup(n){const e=on(),t=[$i,UY,VY,$Y,HY,GY,QY,jY,BT,KJ,zY,WY,KY,qY,JY,YY,XY,ZY,eX,qJ,tX,nX,sX,rX,iX,oX,aX,lX,JJ,YJ],s=B=>{const V=B-1;return V>=0&&V<t.length?t[V]:$i},r=B=>{let V=0;for(let x=0;x<B.length;x++)V=B.charCodeAt(x)+((V<<5)-V);const j=Math.abs(V)%30+1;return s(j)},i=pe(()=>e.state.coins),o=pe(()=>e.state.totalCoin);pe(()=>gs());const a=U(null),l=U("friends"),c=U(""),d=U(""),f=B=>{l.value=B},p=async()=>{if(c.value)try{await navigator.clipboard.writeText(c.value),alert("Invite code copied!")}catch(B){console.error(" :",B),alert("Failed to copy invite code.")}},m=U([{id:"TDL_8923",name:"Luna",profileImage:r("Luna")},{id:"TDL_4567",name:"Max",profileImage:r("Max")},{id:"TDL_7891",name:"Zoe",profileImage:r("Zoe")}]),w=U([{id:"TDL_2345",name:"Alice",profileImage:r("Alice")},{id:"TDL_6789",name:"Bob",profileImage:r("Bob")},{id:"TDL_3456",name:"Charlie",profileImage:r("Charlie")},{id:"TDL_7890",name:"Diana",profileImage:r("Diana")},{id:"TDL_1234",name:"Eve",profileImage:r("Eve")},{id:"TDL_5678",name:"Frank",profileImage:r("Frank")},{id:"TDL_9012",name:"Grace",profileImage:r("Grace")},{id:"TDL_2468",name:"Henry",profileImage:r("Henry")}]),y=pe(()=>{if(!d.value||d.value.trim()==="")return w.value;const B=d.value.toLowerCase().trim();return w.value.filter(V=>V.name.toLowerCase().includes(B)||V.id.toLowerCase().includes(B))}),A=U([{id:"TDL_1357",name:"Oliver",profileImage:r("Oliver")},{id:"TDL_8024",name:"Sophia",profileImage:r("Sophia")},{id:"TDL_3691",name:"Mason",profileImage:r("Mason")}]),_=B=>{alert(`Invite sent to ${B}`)},C=B=>{A.value=A.value.filter(V=>V.id!==B),alert("Friend request accepted!")},S=B=>{A.value=A.value.filter(V=>V.id!==B),alert("Friend request declined.")};return Nt(async()=>{if(a.value=dt(),a.value){e.loadCurrentUser();try{c.value=await Oi(a.value.id)}catch(B){console.error("   :",B),c.value="ABC123"}}else c.value="ABC123"}),(B,V)=>(L(),M("div",cX,[ze(Qn,{coinCount:i.value,totalCoin:o.value},null,8,["coinCount","totalCoin"]),h("main",uX,[h("div",dX,[h("div",hX,[h("button",{class:Oe(["tabButton tabButtonFriends",{active:l.value==="friends"}]),onClick:V[0]||(V[0]=j=>f("friends"))}," Friends ",2),h("button",{class:Oe(["tabButton tabButtonRequests",{active:l.value==="requests"}]),onClick:V[1]||(V[1]=j=>f("requests"))}," Requests ",2)]),h("div",fX,[l.value==="friends"?(L(),M("div",pX,[h("div",gX,[V[3]||(V[3]=h("h3",{class:"sectionTitle"},"Invite Code",-1)),h("div",mX,[h("input",{type:"text",class:"inviteCodeInput",value:c.value,readonly:""},null,8,vX),h("button",{class:"copyCodeBtn",onClick:p,title:"Copy"},[h("img",{src:De(FY),alt:"Copy",class:"copyCodeIcon"},null,8,yX)])])]),h("div",AX,[h("div",wX,[(L(!0),M(Re,null,We(m.value,j=>(L(),M("div",{key:j.id,class:"friendCard"},[h("div",_X,[h("figure",EX,[h("img",{src:j.profileImage,alt:j.name,class:"friendProfile"},null,8,bX)]),h("div",IX,[h("img",{src:De(h_),alt:De(h_)},null,8,CX)])]),h("div",TX,[h("p",SX,E(j.name),1),h("p",PX,E(j.id),1)])]))),128))])]),h("div",RX,[V[4]||(V[4]=h("h3",{class:"sectionTitle"},"Search friends ",-1)),Wt(h("input",{type:"text",class:"searchInput","onUpdate:modelValue":V[2]||(V[2]=j=>d.value=j),placeholder:"Search by name or ID..."},null,512),[[ps,d.value]])]),h("div",xX,[h("h3",kX,[V[5]||(V[5]=Qi(" Suggested Friends ",-1)),h("img",{src:De(f_),alt:De(f_)},null,8,NX)]),y.value.length>0?(L(),M("div",DX,[(L(!0),M(Re,null,We(y.value,j=>(L(),M("div",{key:j.id,class:"suggestedCard"},[h("figure",OX,[h("img",{src:j.profileImage,alt:j.name,class:"suggestedProfile"},null,8,LX)]),h("div",BX,[h("p",MX,E(j.name),1),h("p",FX,E(j.id),1)]),h("button",{class:"inviteBtn",onClick:x=>_(j.id)}," Invite ",8,UX)]))),128))])):he("",!0)])])):he("",!0),l.value==="requests"?(L(),M("div",VX,[h("div",$X,[A.value.length===0?(L(),M("div",HX,[...V[6]||(V[6]=[h("p",null,"No friend requests yet.",-1)])])):(L(),M("div",GX,[(L(!0),M(Re,null,We(A.value,j=>(L(),M("div",{key:j.id,class:"requestCard"},[h("img",{src:j.profileImage,alt:j.name,class:"requestProfile"},null,8,QX),h("div",jX,[h("p",zX,E(j.name),1),h("p",WX,E(j.id)+":)",1),V[7]||(V[7]=h("p",{class:"requestMessage"},"wants to be your friend",-1))]),h("div",KX,[h("button",{class:"acceptBtn",onClick:x=>C(j.id)}," Accept ",8,qX),h("button",{class:"declineBtn",onClick:x=>S(j.id)},"  ",8,JX)])]))),128))]))])])):he("",!0)])])]),ze(jn)]))}},XX=Qt(YX,[["__scopeId","data-v-572fe9f5"]]),ZX=["/loading","/login","/signup","/forgot-password","/reset-password","/home","/main"],eZ=[{path:"/",redirect:"/loading"},{path:"/loading",component:f6},{path:"/login",component:O6},{path:"/signup",component:z6},{path:"/forgot-password",component:d5},{path:"/reset-password",component:I5},{path:"/main",component:x9},{path:"/mining",component:q9},{path:"/hunting",component:I$},{path:"/exploration",component:Z$},{path:"/production",component:DH},{path:"/exchange",component:ZH},{path:"/quest",component:w7},{path:"/inventory",component:EQ},{path:"/factory",component:FQ},{path:"/settings",component:dz},{path:"/profile",component:zz},{path:"/attendance",component:lW},{path:"/nft",component:vJ},{path:"/notification",component:xJ},{path:"/shop",component:zJ},{path:"/home",component:MY},{path:"/social",component:XX}],HT=Hx({history:wx(),routes:eZ}),p_=(n,e)=>({id:n.uid,email:n.email,name:n.displayName||n.email?.split("@")[0]||"",photoURL:n.photoURL,loginType:"google",gameData:e||{level:1,coins:0,totalCoin:0,catFragments:50,nftCount:0,miningCats:[null,null,null,null],huntingCats:[null,null,null,null],explorationCats:[null,null,null,null],productionCats:[null,null,null,null],inventory:[]}});HT.beforeEach(async(n,e,t)=>{let s=dt();const r=s?.loginType==="guest"||s?.email?.includes("@guest.com")||s?.email==="guest@tdl.com";let i=!!s&&!r;if(!i&&Tt&&Tt.currentUser){console.log("Router guard:    Firebase   ,  ...");try{const a=await Ug(Tt.currentUser.uid),l=p_(Tt.currentUser,a?.gameData);localStorage.setItem("currentUser",JSON.stringify(l)),sessionStorage.setItem("currentUser",JSON.stringify(l)),s=l,i=!0,console.log("Router guard: Firebase       :",l.email)}catch(a){console.error("Router guard: Firebase   :",a)}}if(!i&&!Tt?.currentUser&&n.path!=="/login"&&n.path!=="/signup"&&n.path!=="/loading"&&(await new Promise(a=>setTimeout(a,100)),s=dt(),i=!!s,!i&&Tt&&Tt.currentUser))try{const a=await Ug(Tt.currentUser.uid),l=p_(Tt.currentUser,a?.gameData);localStorage.setItem("currentUser",JSON.stringify(l)),sessionStorage.setItem("currentUser",JSON.stringify(l)),s=l,i=!0,console.log("Router guard:   Firebase    :",l.email)}catch(a){console.error("Router guard:   Firebase   :",a)}const o=ZX.includes(n.path);if(i&&(n.path==="/login"||n.path==="/signup")){console.log("Router guard: authenticated user hitting login/signup, redirecting to /home"),t("/home");return}if(r&&(n.path==="/login"||n.path==="/signup")){console.log("Router guard: guest user accessing login/signup, allowing access"),t();return}if(!i&&!o){console.log("Router guard: unauthenticated access to protected route, redirecting to /login",{to:n.path,hasLocalStorage:!!localStorage.getItem("currentUser"),hasSessionStorage:!!sessionStorage.getItem("currentUser"),hasFirebaseAuth:Tt&&!!Tt.currentUser}),t("/login");return}t()});const GT=DR(o6);GT.use(HT);GT.mount("#app");export{Tt as a,Ug as g,r6 as h,nZ as o};
